"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[1097],{1097:(ee,tt,c)=>{c.r(tt),c.d(tt,{HistoriasModule:()=>Y});var t=c(4650),x=c(6895),z=c(7376),R=c(3353),m=c(1281),Z=c(2687),_=c(7579),k=c(727),pt=c(4986),et=c(5963),ut=c(6406),f=c(9751),y=c(6451),u=c(2722),D=(c(8675),c(4004)),b=c(5698),A=c(8505),C=c(3900);function q(o,i,e){for(let s in i)if(i.hasOwnProperty(s)){const n=i[s];n?o.setProperty(s,n,e?.has(s)?"important":""):o.removeProperty(s)}return o}function M(o,i){const e=i?"":"none";q(o.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Pt(o,i,e){q(o.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},e)}function nt(o,i){return i&&"none"!=i?o+" "+i:o}function Tt(o){const i=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*i}function gt(o,i){return o.getPropertyValue(i).split(",").map(s=>s.trim())}function mt(o){const i=o.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function ft(o,i,e){const{top:s,bottom:n,left:r,right:a}=o;return e>=s&&e<=n&&i>=r&&i<=a}function V(o,i,e){o.top+=i,o.bottom=o.top+o.height,o.left+=e,o.right=o.left+o.width}function It(o,i,e,s){const{top:n,right:r,bottom:a,left:l,width:d,height:h}=o,g=d*i,v=h*i;return s>n-v&&s<a+v&&e>l-g&&e<r+g}c(445);class Et{constructor(i){this._document=i,this.positions=new Map}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:mt(e)})})}handleScroll(i){const e=(0,R.sA)(i),s=this.positions.get(e);if(!s)return null;const n=s.scrollPosition;let r,a;if(e===this._document){const h=this.getViewportScrollPosition();r=h.top,a=h.left}else r=e.scrollTop,a=e.scrollLeft;const l=n.top-r,d=n.left-a;return this.positions.forEach((h,g)=>{h.clientRect&&e!==g&&e.contains(g)&&V(h.clientRect,l,d)}),n.top=r,n.left=a,{top:l,left:d}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Zt(o){const i=o.cloneNode(!0),e=i.querySelectorAll("[id]"),s=o.nodeName.toLowerCase();i.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return"canvas"===s?Lt(o,i):("input"===s||"select"===s||"textarea"===s)&&At(o,i),kt("canvas",o,i,Lt),kt("input, textarea, select",o,i,At),i}function kt(o,i,e,s){const n=i.querySelectorAll(o);if(n.length){const r=e.querySelectorAll(o);for(let a=0;a<n.length;a++)s(n[a],r[a])}}let se=0;function At(o,i){"file"!==i.type&&(i.value=o.value),"radio"===i.type&&i.name&&(i.name=`mat-clone-${i.name}-${se++}`)}function Lt(o,i){const e=i.getContext("2d");if(e)try{e.drawImage(o,0,0)}catch{}}const Ot=(0,R.i$)({passive:!0}),ot=(0,R.i$)({passive:!1}),_t=new Set(["position"]);class oe{constructor(i,e,s,n,r,a){this._config=e,this._document=s,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new _.x,this._pointerMoveSubscription=k.w0.EMPTY,this._pointerUpSubscription=k.w0.EMPTY,this._scrollSubscription=k.w0.EMPTY,this._resizeSubscription=k.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new _.x,this.started=new _.x,this.released=new _.x,this.ended=new _.x,this.entered=new _.x,this.exited=new _.x,this.dropped=new _.x,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){const d=this._getTargetHandle(l);d&&!this._disabledHandles.has(d)&&!this.disabled&&this._initializeDragSequence(d,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{const d=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){if(Math.abs(d.x-this._pickupPositionOnPage.x)+Math.abs(d.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const L=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),O=this._dropContainer;if(!L)return void this._endDragSequence(l);(!O||!O.isDragging()&&!O.isReceiving())&&(l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}l.preventDefault();const h=this._getConstrainedPointerPosition(d);if(this._hasMoved=!0,this._lastKnownPointerPosition=d,this._updatePointerDirectionDelta(h),this._dropContainer)this._updateActiveDropContainer(h,d);else{const g=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,v=this._activeTransform;v.x=h.x-g.x+this._passiveTransform.x,v.y=h.y-g.y+this._passiveTransform.y,this._applyRootElementTransform(v.x,v.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:h,event:l,distance:this._getDragDistance(h),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this._nativeDragStart=l=>{if(this._handles.length){const d=this._getTargetHandle(l);d&&!this._disabledHandles.has(d)&&!this.disabled&&l.preventDefault()}else this.disabled||l.preventDefault()},this.withRootElement(i).withParent(e.parentDragRef||null),this._parentPositions=new Et(s),a.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(i){const e=(0,m.Ig)(i);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(s=>M(s,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(s=>(0,m.fI)(s)),this._handles.forEach(s=>M(s,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(s=>{this._handles.indexOf(s)>-1&&e.add(s)}),this._disabledHandles=e,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){const e=(0,m.fI)(i);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,ot),e.addEventListener("touchstart",this._pointerDown,Ot),e.addEventListener("dragstart",this._nativeDragStart,ot)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?(0,m.fI)(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),M(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),M(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){const i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){const i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){$(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const s=this._rootElement,n=s.parentNode,r=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),l=this._getShadowRoot();n.insertBefore(a,s),this._initialTransform=s.style.transform||"",this._preview=this._createPreviewElement(),Pt(s,!1,_t),this._document.body.appendChild(n.replaceChild(r,s)),this._getPreviewInsertionPoint(n,l).appendChild(this._preview),this.started.next({source:this,event:i}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(i,e){this._parentDragRef&&e.stopPropagation();const s=this.isDragging(),n=$(e),r=!n&&0!==e.button,a=this._rootElement,l=(0,R.sA)(e),d=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),h=n?(0,Z.yG)(e):(0,Z.X6)(e);if(l&&l.draggable&&"mousedown"===e.type&&e.preventDefault(),s||r||d||h)return;if(this._handles.length){const S=a.style;this._rootElementTapHighlight=S.webkitTapHighlightColor||"",S.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(S=>this._updateOnScroll(S)),this._boundaryElement&&(this._boundaryRect=mt(this._boundaryElement));const g=this._previewTemplate;this._pickupPositionInElement=g&&g.template&&!g.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,i,e);const v=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:v.x,y:v.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(i){Pt(this._rootElement,!0,_t),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,s=e.getItemIndex(this),n=this._getPointerPositionOnPage(i),r=this._getDragDistance(n),a=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:r,dropPoint:n,event:i}),this.dropped.next({item:this,currentIndex:s,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:r,dropPoint:n,event:i}),e.drop(this,s,this._initialIndex,this._initialContainer,a,r,n,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:e},{x:s,y:n}){let r=this._initialContainer._getSiblingContainerFromPosition(this,i,e);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,e)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,i,e,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(s,n),this._dropContainer._sortItem(this,i,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,e):this._applyPreviewTransform(i-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const i=this._previewTemplate,e=this.previewClass,s=i?i.template:null;let n;if(s&&i){const r=i.matchSize?this._initialClientRect:null,a=i.viewContainer.createEmbeddedView(s,i.context);a.detectChanges(),n=Ht(a,this._document),this._previewRef=a,i.matchSize?Ut(n,r):n.style.transform=rt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=Zt(this._rootElement),Ut(n,this._initialClientRect),this._initialTransform&&(n.style.transform=this._initialTransform);return q(n.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},_t),M(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(r=>n.classList.add(r)):n.classList.add(e)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const i=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);const e=function ie(o){const i=getComputedStyle(o),e=gt(i,"transition-property"),s=e.find(l=>"transform"===l||"all"===l);if(!s)return 0;const n=e.indexOf(s),r=gt(i,"transition-duration"),a=gt(i,"transition-delay");return Tt(r[n])+Tt(a[n])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(s=>{const n=a=>{(!a||(0,R.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",n),s(),clearTimeout(r))},r=setTimeout(n,1.5*e);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const i=this._placeholderTemplate,e=i?i.template:null;let s;return e?(this._placeholderRef=i.viewContainer.createEmbeddedView(e,i.context),this._placeholderRef.detectChanges(),s=Ht(this._placeholderRef,this._document)):s=Zt(this._rootElement),s.style.pointerEvents="none",s.classList.add("cdk-drag-placeholder"),s}_getPointerPositionInElement(i,e,s){const n=e===this._rootElement?null:e,r=n?n.getBoundingClientRect():i,a=$(s)?s.targetTouches[0]:s,l=this._getViewportScrollPosition();return{x:r.left-i.left+(a.pageX-r.left-l.left),y:r.top-i.top+(a.pageY-r.top-l.top)}}_getPointerPositionOnPage(i){const e=this._getViewportScrollPosition(),s=$(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,n=s.pageX-e.left,r=s.pageY-e.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const l=this._ownerSVGElement.createSVGPoint();return l.x=n,l.y=r,l.matrixTransform(a.inverse())}}return{x:n,y:r}}_getConstrainedPointerPosition(i){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:s,y:n}=this.constrainPosition?this.constrainPosition(i,this,this._initialClientRect,this._pickupPositionInElement):i;if("x"===this.lockAxis||"x"===e?n=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(s=this._pickupPositionOnPage.x),this._boundaryRect){const{x:r,y:a}=this._pickupPositionInElement,l=this._boundaryRect,{width:d,height:h}=this._getPreviewRect(),g=l.top+a,v=l.bottom-(h-a);s=Mt(s,l.left+r,l.right-(d-r)),n=Mt(n,g,v)}return{x:s,y:n}}_updatePointerDirectionDelta(i){const{x:e,y:s}=i,n=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(e-r.x),l=Math.abs(s-r.y);return a>this._config.pointerDirectionChangeThreshold&&(n.x=e>r.x?1:-1,r.x=e),l>this._config.pointerDirectionChangeThreshold&&(n.y=s>r.y?1:-1,r.y=s),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,M(this._rootElement,i))}_removeRootElementListeners(i){i.removeEventListener("mousedown",this._pointerDown,ot),i.removeEventListener("touchstart",this._pointerDown,Ot),i.removeEventListener("dragstart",this._nativeDragStart,ot)}_applyRootElementTransform(i,e){const s=rt(i,e),n=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=n.transform&&"none"!=n.transform?n.transform:""),n.transform=nt(s,this._initialTransform)}_applyPreviewTransform(i,e){const s=this._previewTemplate?.template?void 0:this._initialTransform,n=rt(i,e);this._preview.style.transform=nt(n,s)}_getDragDistance(i){const e=this._pickupPositionOnPage;return e?{x:i.x-e.x,y:i.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:e}=this._passiveTransform;if(0===i&&0===e||this.isDragging()||!this._boundaryElement)return;const s=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===s.width&&0===s.height)return;const r=n.left-s.left,a=s.right-n.right,l=n.top-s.top,d=s.bottom-n.bottom;n.width>s.width?(r>0&&(i+=r),a>0&&(i-=a)):i=0,n.height>s.height?(l>0&&(e+=l),d>0&&(e-=d)):e=0,(i!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:i})}_getDragStartDelay(i){const e=this.dragStartDelay;return"number"==typeof e?e:$(i)?e.touch:e?e.mouse:0}_updateOnScroll(i){const e=this._parentPositions.handleScroll(i);if(e){const s=(0,R.sA)(i);this._boundaryRect&&s!==this._boundaryElement&&s.contains(this._boundaryElement)&&V(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,R.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,e){const s=this._previewContainer||"global";if("parent"===s)return i;if("global"===s){const n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return(0,m.fI)(s)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(i){return this._handles.find(e=>i.target&&(i.target===e||e.contains(i.target)))}}function rt(o,i){return`translate3d(${Math.round(o)}px, ${Math.round(i)}px, 0)`}function Mt(o,i,e){return Math.max(i,Math.min(e,o))}function $(o){return"t"===o.type[0]}function Ht(o,i){const e=o.rootNodes;if(1===e.length&&e[0].nodeType===i.ELEMENT_NODE)return e[0];const s=i.createElement("div");return e.forEach(n=>s.appendChild(n)),s}function Ut(o,i){o.style.width=`${i.width}px`,o.style.height=`${i.height}px`,o.style.transform=rt(i.left,i.top)}function Ft(o,i,e){const s=j(i,o.length-1),n=j(e,o.length-1);if(s===n)return;const r=o[s],a=n<s?-1:1;for(let l=s;l!==n;l+=a)o[l]=o[l+a];o[n]=r}function j(o,i){return Math.max(0,Math.min(i,o))}class re{constructor(i,e){this._element=i,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(i){this.withItems(i)}sort(i,e,s,n){const r=this._itemPositions,a=this._getItemIndexFromPointerPosition(i,e,s,n);if(-1===a&&r.length>0)return null;const l="horizontal"===this.orientation,d=r.findIndex(w=>w.drag===i),h=r[a],v=h.clientRect,S=d>a?1:-1,L=this._getItemOffsetPx(r[d].clientRect,v,S),O=this._getSiblingOffsetPx(d,r,S),G=r.slice();return Ft(r,d,a),r.forEach((w,ai)=>{if(G[ai]===w)return;const Xt=w.drag===i,Rt=Xt?L:O,te=Xt?i.getPlaceholderElement():w.drag.getRootElement();w.offset+=Rt,l?(te.style.transform=nt(`translate3d(${Math.round(w.offset)}px, 0, 0)`,w.initialTransform),V(w.clientRect,0,Rt)):(te.style.transform=nt(`translate3d(0, ${Math.round(w.offset)}px, 0)`,w.initialTransform),V(w.clientRect,Rt,0))}),this._previousSwap.overlaps=ft(v,e,s),this._previousSwap.drag=h.drag,this._previousSwap.delta=l?n.x:n.y,{previousIndex:d,currentIndex:a}}enter(i,e,s,n){const r=null==n||n<0?this._getItemIndexFromPointerPosition(i,e,s):n,a=this._activeDraggables,l=a.indexOf(i),d=i.getPlaceholderElement();let h=a[r];if(h===i&&(h=a[r+1]),!h&&(null==r||-1===r||r<a.length-1)&&this._shouldEnterAsFirstChild(e,s)&&(h=a[0]),l>-1&&a.splice(l,1),h&&!this._dragDropRegistry.isDragging(h)){const g=h.getRootElement();g.parentElement.insertBefore(d,g),a.splice(r,0,i)}else(0,m.fI)(this._element).appendChild(d),a.push(i);d.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables.forEach(i=>{const e=i.getRootElement();if(e){const s=this._itemPositions.find(n=>n.drag===i)?.initialTransform;e.style.transform=s||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(s=>s.drag===i)}updateOnScroll(i,e){this._itemPositions.forEach(({clientRect:s})=>{V(s,i,e)}),this._itemPositions.forEach(({drag:s})=>{this._dragDropRegistry.isDragging(s)&&s._sortFromLastPointerPosition()})}_cacheItemPositions(){const i="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const s=e.getVisibleElement();return{drag:e,offset:0,initialTransform:s.style.transform||"",clientRect:mt(s)}}).sort((e,s)=>i?e.clientRect.left-s.clientRect.left:e.clientRect.top-s.clientRect.top)}_getItemOffsetPx(i,e,s){const n="horizontal"===this.orientation;let r=n?e.left-i.left:e.top-i.top;return-1===s&&(r+=n?e.width-i.width:e.height-i.height),r}_getSiblingOffsetPx(i,e,s){const n="horizontal"===this.orientation,r=e[i].clientRect,a=e[i+-1*s];let l=r[n?"width":"height"]*s;if(a){const d=n?"left":"top",h=n?"right":"bottom";-1===s?l-=a.clientRect[d]-r[h]:l+=r[d]-a.clientRect[h]}return l}_shouldEnterAsFirstChild(i,e){if(!this._activeDraggables.length)return!1;const s=this._itemPositions,n="horizontal"===this.orientation;if(s[0].drag!==this._activeDraggables[0]){const a=s[s.length-1].clientRect;return n?i>=a.right:e>=a.bottom}{const a=s[0].clientRect;return n?i<=a.left:e<=a.top}}_getItemIndexFromPointerPosition(i,e,s,n){const r="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:l,clientRect:d})=>{if(l===i)return!1;if(n){const h=r?n.x:n.y;if(l===this._previousSwap.drag&&this._previousSwap.overlaps&&h===this._previousSwap.delta)return!1}return r?e>=Math.floor(d.left)&&e<Math.floor(d.right):s>=Math.floor(d.top)&&s<Math.floor(d.bottom)});return-1!==a&&this._sortPredicate(a,i)?a:-1}}class ae{constructor(i,e,s,n,r){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new _.x,this.entered=new _.x,this.exited=new _.x,this.dropped=new _.x,this.sorted=new _.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=k.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new _.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function it(o=0,i=pt.z){return o<0&&(o=0),(0,et.H)(o,o,i)}(0,ut.Z).pipe((0,u.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,l=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-l):2===this._verticalScrollDirection&&a.scrollBy(0,l),1===this._horizontalScrollDirection?a.scrollBy(-l,0):2===this._horizontalScrollDirection&&a.scrollBy(l,0)})},this.element=(0,m.fI)(i),this._document=s,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Et(s),this._sortStrategy=new re(this.element,e),this._sortStrategy.withSortPredicate((a,l)=>this.sortPredicate(a,l,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,e,s,n){this._draggingStarted(),null==n&&this.sortingDisabled&&(n=this._draggables.indexOf(i)),this._sortStrategy.enter(i,e,s,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,e,s,n,r,a,l,d={}){this._reset(),this.dropped.next({item:i,currentIndex:e,previousIndex:s,container:this,previousContainer:n,isPointerOverContainer:r,distance:a,dropPoint:l,event:d})}withItems(i){const e=this._draggables;return this._draggables=i,i.forEach(s=>s._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>-1===i.indexOf(n))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._sortStrategy.direction=i,this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){return this._sortStrategy.orientation=i,this}withScrollableParents(i){const e=(0,m.fI)(this.element);return this._scrollableElements=-1===i.indexOf(e)?[e,...i]:i.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,e,s,n){if(this.sortingDisabled||!this._clientRect||!It(this._clientRect,.05,e,s))return;const r=this._sortStrategy.sort(i,e,s,n);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,e){if(this.autoScrollDisabled)return;let s,n=0,r=0;if(this._parentPositions.positions.forEach((a,l)=>{l===this._document||!a.clientRect||s||It(a.clientRect,.05,i,e)&&([n,r]=function le(o,i,e,s){const n=Jt(i,s),r=Qt(i,e);let a=0,l=0;if(n){const d=o.scrollTop;1===n?d>0&&(a=1):o.scrollHeight-d>o.clientHeight&&(a=2)}if(r){const d=o.scrollLeft;1===r?d>0&&(l=1):o.scrollWidth-d>o.clientWidth&&(l=2)}return[a,l]}(l,a.clientRect,i,e),(n||r)&&(s=l))}),!n&&!r){const{width:a,height:l}=this._viewportRuler.getViewportSize(),d={width:a,height:l,top:0,right:a,bottom:l,left:0};n=Jt(d,e),r=Qt(d,i),s=window}s&&(n!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||s!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=r,this._scrollNode=s,(n||r)&&s?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const i=(0,m.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const i=(0,m.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(i).clientRect}_reset(){this._isDragging=!1;const i=(0,m.fI)(this.element).style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(i,e){return null!=this._clientRect&&ft(this._clientRect,i,e)}_getSiblingContainerFromPosition(i,e,s){return this._siblings.find(n=>n._canReceive(i,e,s))}_canReceive(i,e,s){if(!this._clientRect||!ft(this._clientRect,e,s)||!this.enterPredicate(i,this))return!1;const n=this._getShadowRoot().elementFromPoint(e,s);if(!n)return!1;const r=(0,m.fI)(this.element);return n===r||r.contains(n)}_startReceiving(i,e){const s=this._activeSiblings;!s.has(i)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(s.add(i),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(i);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const i=(0,R.kV)((0,m.fI)(this.element));this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const i=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,i))}}function Jt(o,i){const{top:e,bottom:s,height:n}=o,r=.05*n;return i>=e-r&&i<=e+r?1:i>=s-r&&i<=s+r?2:0}function Qt(o,i){const{left:e,right:s,width:n}=o,r=.05*n;return i>=e-r&&i<=e+r?1:i>=s-r&&i<=s+r?2:0}const at=(0,R.i$)({passive:!1,capture:!0});let ce=(()=>{class o{constructor(e,s){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=n=>n.isDragging(),this.pointerMove=new _.x,this.pointerUp=new _.x,this.scroll=new _.x,this._preventDefaultWhileDragging=n=>{this._activeDragInstances.length>0&&n.preventDefault()},this._persistentTouchmoveListener=n=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&n.preventDefault(),this.pointerMove.next(n))},this._document=s}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,at)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,at)}startDragging(e,s){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const n=s.type.startsWith("touch");this._globalListeners.set(n?"touchend":"mouseup",{handler:r=>this.pointerUp.next(r),options:!0}).set("scroll",{handler:r=>this.scroll.next(r),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:at}),n||this._globalListeners.set("mousemove",{handler:r=>this.pointerMove.next(r),options:at}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((r,a)=>{this._document.addEventListener(a,r.handler,r.options)})})}}stopDragging(e){const s=this._activeDragInstances.indexOf(e);s>-1&&(this._activeDragInstances.splice(s,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const s=[this.scroll];return e&&e!==this._document&&s.push(new f.y(n=>this._ngZone.runOutsideAngular(()=>{const a=l=>{this._activeDragInstances.length&&n.next(l)};return e.addEventListener("scroll",a,!0),()=>{e.removeEventListener("scroll",a,!0)}}))),(0,y.T)(...s)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,s)=>{this._document.removeEventListener(s,e.handler,e.options)}),this._globalListeners.clear()}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t.R0b),t.LFG(x.K0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const de={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let vt=(()=>{class o{constructor(e,s,n,r){this._document=e,this._ngZone=s,this._viewportRuler=n,this._dragDropRegistry=r}createDrag(e,s=de){return new oe(e,s,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new ae(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(x.K0),t.LFG(t.R0b),t.LFG(z.rL),t.LFG(ce))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),be=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[vt],imports:[z.ZD]}),o})();var De=c(8277),Vt=c(3238),H=c(148),yt=c(4850),Ct=c(7392),xe=c(4393),St=c(9818),ye=c(74),lt=c(8455),$t=c(9203),I=c(6338),ct=c(3239),U=c(7084),Ce=c(1256),Se=c(8256),we=c(5208),jt=c(7462),dt=c(3267),P=c(9132),Re=c(79);class F{canDeactivate(i,e,s,n){let r=n.root;for(;r.firstChild;)r=r.firstChild;return!(n.url.includes("/expedientes")&&!r.paramMap.get("id"))||i.closeDrawer().then(()=>!0)}}F.\u0275fac=function(i){return new(i||F)},F.\u0275prov=t.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"});var Pe=c(262),Kt=c(2843),wt=c(1135),K=c(9300),Te=c(9646),Ie=c(2340),Ee=c(529);class T{constructor(i){this._httpClient=i,this._tags=new wt.X(null),this._historia=new wt.X(null),this._historias=new wt.X(null),this._apiHost=Ie.N.apiUrl+"/business/v1"}get tags$(){return this._tags.asObservable()}get historia$(){return this._historia.asObservable()}get historias$(){return this._historias.asObservable()}getTags(){return this._httpClient.get("api/apps/historias/tags").pipe((0,A.b)(i=>{this._tags.next(i)}))}createTag(i){return this.tags$.pipe((0,b.q)(1),(0,C.w)(e=>this._httpClient.post("api/apps/historias/tag",{tag:i}).pipe((0,D.U)(s=>(this._tags.next([...e,s]),s)))))}updateTag(i,e){return this.tags$.pipe((0,b.q)(1),(0,C.w)(s=>this._httpClient.patch("api/apps/historias/tag",{id:i,tag:e}).pipe((0,D.U)(n=>{const r=s.findIndex(a=>a.id===i);return s[r]=n,this._tags.next(s),n}))))}deleteTag(i){return this.tags$.pipe((0,b.q)(1),(0,C.w)(e=>this._httpClient.delete("api/apps/historias/tag",{params:{id:i}}).pipe((0,D.U)(s=>{const n=e.findIndex(r=>r.id===i);return e.splice(n,1),this._tags.next(e),s}),(0,K.h)(s=>s),(0,C.w)(s=>this.historias$.pipe((0,b.q)(1),(0,D.U)(n=>(n.forEach(r=>{const a=r.tags.findIndex(l=>l===i);a>-1&&r.tags.splice(a,1)}),s)))))))}getHistorias(i){return this._httpClient.get(this._apiHost+"/opr/expedientes/"+i).pipe((0,A.b)(e=>{this._historias.next(e)}))}updateHistoriasOrders(i){return this._httpClient.patch("api/apps/historias/order",{historias:i})}searchHistorias(i){return this._httpClient.get("api/apps/historias/search",{params:{query:i}})}getHistoriaById(i){return this._historias.pipe((0,b.q)(1),(0,D.U)(e=>{const s=e.find(n=>n.id===i)||null;return this._historia.next(s),s}),(0,C.w)(e=>e?(0,Te.of)(e):(0,Kt._)("Could not found historia with id of "+i+"!")))}createHistoria(i){return this.historias$.pipe((0,b.q)(1),(0,C.w)(e=>this._httpClient.post(this._apiHost+"/opr/expedientes/"+i,{paciente:i,fecha:new Date}).pipe((0,D.U)(s=>(this._historias.next([s,...e]),s)))))}updateHistoria(i,e){return this.historias$.pipe((0,b.q)(1),(0,C.w)(s=>this._httpClient.patch(this._apiHost+"/opr/expedientes/"+i,e).pipe((0,D.U)(n=>{const r=s.findIndex(a=>a.id===i);return s[r]=n,this._historias.next(s),n}),(0,C.w)(n=>this.historia$.pipe((0,b.q)(1),(0,K.h)(r=>r&&r.id===i),(0,A.b)(()=>(this._historia.next(n),n)))))))}deleteHistoria(i){return this.historias$.pipe((0,b.q)(1),(0,C.w)(e=>this._httpClient.delete(this._apiHost+"/opr/expedientes/"+i,{params:{id:i}}).pipe((0,D.U)(s=>{const n=e.findIndex(r=>r.id===i);return e.splice(n,1),this._historias.next(e),!0}))))}}T.\u0275fac=function(i){return new(i||T)(t.LFG(Ee.eN))},T.\u0275prov=t.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"});class N{constructor(i){this._historiasService=i}resolve(i,e){return this._historiasService.getTags()}}N.\u0275fac=function(i){return new(i||N)(t.LFG(T))},N.\u0275prov=t.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"});class B{constructor(i){this._historiasService=i}resolve(i,e){return this._historiasService.getHistorias(i.paramMap.get("idPx"))}}B.\u0275fac=function(i){return new(i||B)(t.LFG(T))},B.\u0275prov=t.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"});class J{constructor(i,e){this._router=i,this._historiasService=e}resolve(i,e){return this._historiasService.getHistoriaById(i.paramMap.get("id")).pipe((0,Pe.K)(s=>{console.error(s);const n=e.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(n),(0,Kt._)(s)}))}}J.\u0275fac=function(i){return new(i||J)(t.LFG(P.F0),t.LFG(T))},J.\u0275prov=t.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"});class W{constructor(){}}W.\u0275fac=function(i){return new(i||W)},W.\u0275cmp=t.Xpm({type:W,selectors:[["historias"]],decls:1,vars:0,template:function(i,e){1&i&&t._UZ(0,"router-outlet")},dependencies:[P.lC],encapsulation:2,changeDetection:0});var Ze=c(4968),ke=c(4880),Ae=c(9122),Le=c(2270);const Oe=["matDrawer"];function Me(o,i){if(1&o&&t._UZ(0,"img",38),2&o){const e=t.oxw(2);t.Q6J("src",e.px.foto,t.LSH)}}function He(o,i){if(1&o&&(t.TgZ(0,"div",39),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.px.nombre.charAt(0)," ")}}function Ue(o,i){if(1&o&&(t.TgZ(0,"div",34)(1,"span",35),t._uU(2,"\u2022"),t.qZA(),t.TgZ(3,"span",36),t._uU(4),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.etiqueta)}}function Fe(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",32),t._UZ(2,"div",42),t.TgZ(3,"div",43),t._uU(4),t.qZA(),t.YNc(5,Ue,5,1,"div",44),t.qZA(),t.BQk()),2&o){const e=i.$implicit;t.xp6(4),t.hij(" ",e.contacto,""),t.xp6(1),t.Q6J("ngIf",e.etiqueta)}}function Ne(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",30),t._UZ(2,"mat-icon",11),t.TgZ(3,"div",40),t.YNc(4,Fe,6,2,"ng-container",41),t.qZA()(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("svgIcon","heroicons_outline:phone"),t.xp6(2),t.Q6J("ngForOf",e.px.formasContacto)("ngForTrackBy",e.trackByFn)}}function Be(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",45),t._UZ(2,"mat-icon",11),t.TgZ(3,"div",46),t._uU(4),t.qZA()(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("svgIcon","heroicons_outline:location-marker"),t.xp6(2),t.xDo("",e.px.direccion.calle," ",e.px.direccion.numeroExterior,", ",e.px.direccion.colonia,", ",e.px.direccion.ciudad,", ",e.px.direccion.estado," ")}}function Je(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",45),t._UZ(2,"mat-icon",11),t.TgZ(3,"div",47),t._uU(4),t.ALo(5,"date"),t.qZA()(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("svgIcon","heroicons_outline:cake"),t.xp6(2),t.Oqu(t.xi3(5,2,e.px.fechaNacimiento,"longDate"))}}function Qe(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",45),t._UZ(2,"mat-icon",11),t.TgZ(3,"div",47),t._uU(4),t.qZA()(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("svgIcon","heroicons_outline:briefcase"),t.xp6(2),t.Oqu(e.px.titulo)}}function Ye(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",30),t._UZ(2,"mat-icon",11)(3,"div",48),t.qZA(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("svgIcon","heroicons_outline:menu-alt-2"),t.xp6(1),t.Q6J("innerHTML",e.px.observaciones,t.oJD)}}function Ge(o,i){if(1&o&&(t.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24),t.YNc(5,Me,1,1,"img",25),t.YNc(6,He,2,1,"div",26),t.qZA(),t.TgZ(7,"div",27),t._uU(8),t.qZA()()()()(),t.TgZ(9,"div",28)(10,"div",29)(11,"div",4)(12,"div",30),t._UZ(13,"mat-icon",11),t.TgZ(14,"div",31)(15,"div",32)(16,"a",33),t._uU(17),t.qZA(),t.TgZ(18,"div",34)(19,"span",35),t._uU(20,"\u2022"),t.qZA(),t.TgZ(21,"span",36),t._uU(22,"Principal"),t.qZA()()()()(),t.YNc(23,Ne,5,3,"ng-container",37),t.YNc(24,Be,5,6,"ng-container",37),t.qZA()(),t.TgZ(25,"div",29)(26,"div",4),t.YNc(27,Je,6,5,"ng-container",37),t.YNc(28,Qe,5,2,"ng-container",37),t.YNc(29,Ye,4,2,"ng-container",37),t.qZA()()()),2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.px.foto),t.xp6(1),t.Q6J("ngIf",!e.px.foto),t.xp6(2),t.HOy("",e.px.nombre," ",e.px.segundoNombre," ",e.px.apellidoPaterno," ",e.px.apellidoMaterno,""),t.xp6(5),t.Q6J("svgIcon","heroicons_outline:mail"),t.xp6(3),t.Q6J("href","mailto:"+e.px.idExterno,t.LSH),t.xp6(1),t.hij(" ",e.px.idExterno," "),t.xp6(6),t.Q6J("ngIf",null==e.px||null==e.px.formasContacto?null:e.px.formasContacto.length),t.xp6(1),t.Q6J("ngIf",e.px.direccion),t.xp6(3),t.Q6J("ngIf",e.px.fechaNacimiento),t.xp6(1),t.Q6J("ngIf",e.px.titulo),t.xp6(1),t.Q6J("ngIf",e.px.observaciones)}}const ze=function(o){return[o]};function qe(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"a",50)(2,"mat-list-item")(3,"mat-icon",51),t._uU(4,"assignment"),t.qZA(),t.TgZ(5,"div",52),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"div",53),t._uU(9),t.qZA()()(),t._UZ(10,"mat-divider"),t.BQk()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(7,ze,e.id)),t.xp6(5),t.Oqu(t.xi3(7,4,e.fecha,"y, LLL dd")),t.xp6(3),t.AsE("Atendido por ",null==e?null:e.atendio.nombre," ",null==e?null:e.atendio.apellidoPaterno,"")}}function Ve(o,i){if(1&o&&(t.TgZ(0,"mat-list")(1,"div",49),t._uU(2,"Valoraciones"),t.qZA(),t.YNc(3,qe,11,9,"ng-container",41),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.historias)("ngForTrackBy",e.trackByFn)}}class Q{constructor(i,e,s,n,r,a,l,d){this._activatedRoute=i,this._changeDetectorRef=e,this._document=s,this._router=n,this._historiasService=r,this._fuseMediaWatcherService=a,this._fuseNavigationService=l,this._personasService=d,this.panelOpenState=!1,this.idPx="",this.historiasCount={completed:0,incomplete:0,total:0},this._unsubscribeAll=new _.x}ngOnInit(){this.idPx=this._activatedRoute.snapshot.paramMap.get("idPx"),this._personasService.personalInfo$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this.px=i,this._changeDetectorRef.markForCheck()}),this._historiasService.historias$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this.historias=i,this.historiasCount.total=this.historias.length,this._changeDetectorRef.markForCheck(),setTimeout(()=>{const e=this._fuseNavigationService.getComponent("mainNavigation");e&&(this._fuseNavigationService.getItem("629bc879efd84cadad5d3167",e.navigation).subtitle=this.historiasCount?.total+" remaining historias",e.refresh())})}),this._historiasService.historia$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this.selectedHistoria=i,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this.drawerMode=i.matches?"side":"over",this._changeDetectorRef.markForCheck()}),(0,Ze.R)(this._document,"keydown").pipe((0,u.R)(this._unsubscribeAll),(0,K.h)(i=>(!0===i.ctrlKey||i.metaKey)&&("/"===i.key||"."===i.key))).subscribe(i=>{"/"===i.key&&this.createHistoria(),"."===i.key&&this.createHistoria()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createHistoria(){this._historiasService.createHistoria(this.idPx).subscribe(i=>{this._router.navigate(["./",i.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}toggleCompleted(i){i.completed=!i.completed,this._historiasService.updateHistoria(i.id,i).subscribe(),this._changeDetectorRef.markForCheck()}dropped(i){Ft(i.container.data,i.previousIndex,i.currentIndex),this._historiasService.updateHistoriasOrders(i.container.data).subscribe(),this._changeDetectorRef.markForCheck()}trackByFn(i,e){return e.id||i}}Q.\u0275fac=function(i){return new(i||Q)(t.Y36(P.gz),t.Y36(t.sBO),t.Y36(x.K0),t.Y36(P.F0),t.Y36(T),t.Y36(ke.T),t.Y36(Ae.Jf),t.Y36(Le.f))},Q.\u0275cmp=t.Xpm({type:Q,selectors:[["historias-list"]],viewQuery:function(i,e){if(1&i&&t.Gf(Oe,7),2&i){let s;t.iGM(s=t.CRH())&&(e.matDrawer=s.first)}},decls:34,vars:9,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","sm:justify-between","py-8","px-6","md:px-8"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"ml-0.5","font-medium","text-secondary"],[1,"mt-4","sm:mt-0"],["mat-flat-button","",1,"ml-3",3,"color","matTooltip","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],["hideToggle","",3,"expanded","opened"],[1,"h-12","bg-gray-50","dark:bg-transparent"],[1,"text-lg","font-semibold"],[1,"mr-4"],["matExpansionPanelContent",""],[3,"opened","closed"],["matListItemIcon","",1,"mr-4"],[1,"flex","flex-col","w-full"],[1,"relative","flex","flex-row","items-center","p-2","pt-0","pb-0","sm:p-6","sm:pt-0"],[1,"w-full","mb-1"],[1,"flex","flex-auto","mt-4"],[1,"flex","items-center","rounded-full","justify-center","w-24","h-24","overflow-hidden","ring-4","ring-bg-card","min-w-24"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"mt-8","ml-6","text-3xl","font-bold","truncate","border-b"],[1,"grid","grid-cols-4","gap-4","w-full","mt-4","md:mt-0"],[1,"col-span-4","md:col-span-2"],[1,"flex"],[1,"min-w-0","ml-6","space-y-1"],[1,"flex","items-center","leading-6"],["target","_blank",1,"hover:underline","text-primary-500",3,"href"],[1,"text-md","truncate","text-secondary"],[1,"mx-2"],[1,"font-medium"],[4,"ngIf"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"min-w-0","space-y-1"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"hidden","sm:flex","w-6","h-4","overflow-hidden"],[1,"font-mono"],["class","text-md truncate text-secondary",4,"ngIf"],[1,"flex","sm:items-center"],[1,"ml-6","leading-6"],[1,"ml-4","leading-6"],[1,"max-w-none","ml-4","prose","prose-sm",3,"innerHTML"],["mat-subheader",""],[3,"routerLink"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return e.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),t._uU(10,"Expediente"),t.qZA(),t.TgZ(11,"div",8)(12,"span"),t._uU(13),t.qZA()()(),t.TgZ(14,"div",9)(15,"button",10),t.NdJ("click",function(){return e.createHistoria()}),t._UZ(16,"mat-icon",11),t.TgZ(17,"span",12),t._uU(18,"Registrar nueva valoraci\xf3n"),t.qZA()()()(),t.TgZ(19,"mat-expansion-panel",13),t.NdJ("opened",function(){return!0}),t.TgZ(20,"mat-expansion-panel-header",14)(21,"mat-panel-title",15)(22,"mat-icon",16),t._uU(23,"account_circle"),t.qZA(),t._uU(24," Datos generales "),t.qZA()(),t.YNc(25,Ge,30,14,"ng-template",17),t.qZA(),t.TgZ(26,"mat-expansion-panel",18),t.NdJ("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),t.TgZ(27,"mat-expansion-panel-header",14)(28,"mat-panel-title",15)(29,"mat-icon",19),t._uU(30,"folder"),t.qZA(),t._uU(31," Expediente "),t.qZA(),t._UZ(32,"mat-panel-description"),t.qZA(),t.YNc(33,Ve,4,2,"ng-template",17),t.qZA()()()()()),2&i&&(t.xp6(2),t.Q6J("mode",e.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(11),t.hij("",e.historiasCount.total," Valoraciones"),t.xp6(2),t.Q6J("color","primary")("matTooltip","Shortcut: Ctrl + /"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(3),t.Q6J("expanded",!0))},dependencies:[P.lC,P.rH,St.eB,yt.d,Ct.Hw,I.i$,I.Tg,I.Yt,I.gs,I.WW,I.sL,U.ib,U.yz,U.yK,U.u4,U.HS,dt.jA,dt.kh,dt.LW,jt.Kd,x.sg,x.O5,x.uU],encapsulation:2,changeDetection:0});var $e=c(9858),ht=c(5439),je=c(8372),E=c(4006),Ke=c(2287);const We=["titleField"];function Xe(o,i){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(t.xi3(2,1,e.historia.fecha,"longDate"))}}function ti(o,i){1&o&&(t.ynx(0),t._uU(1,"Not asignada"),t.BQk())}function ei(o,i){if(1&o&&(t.TgZ(0,"mat-list-option",49),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ii(o,i){if(1&o&&(t.TgZ(0,"mat-list-option",49),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}const Wt=function(){return["../"]};class X{constructor(i,e,s,n,r,a,l){this._activatedRoute=i,this._changeDetectorRef=e,this._formBuilder=s,this._fuseConfirmationService=n,this._router=r,this._historiasListComponent=a,this._historiasService=l,this.checkSalud=["Alergias","Medicamentos","Dolor de cabeza","Diabetes","Hipertensi\xf3n","Embarazada"],this.condicionOjos=["Irritaci\xf3n","Protesis","Glaucoma","Fotofobia","Resequedad","Catarata","Ardor","Lagrimeo","Carnosidad"],this.flagDeleted=!1,this._unsubscribeAll=new _.x}ngOnInit(){this._historiasListComponent.matDrawer.open(),this.historiaForm=this._formBuilder.group({id:[""],paciente:[""],fecha:[new Date],motivoConsulta:[""],estadoGeneralSalud:[[]],ta:[""],fc:[""],tiempoUsoLentes:[""],historiaFamiliar:[""],condicionOjos:[[]],observaciones:[""],graduacionFinal:this._formBuilder.group({diAltura:[""],od:this._formBuilder.group({esf:[""],cil:[""],eje:[""],add:[""],cl:[""],sl:[""]}),oi:this._formBuilder.group({esf:[""],cil:[""],eje:[""],add:[""],cl:[""],sl:[""]})}),order:[0]}),this._historiasService.historias$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this.historias=i,this._changeDetectorRef.markForCheck()}),this._historiasService.historia$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this._historiasListComponent.matDrawer.open(),this.historia=i,this.historiaForm.patchValue(i,{emitEvent:!1}),this._changeDetectorRef.markForCheck()}),this.historiaForm.valueChanges.pipe((0,A.b)(i=>{console.log("update"),this.historia=(0,$e.Z)(this.historia,i)}),(0,je.b)(5e3),(0,u.R)(this._unsubscribeAll)).subscribe(i=>{this._historiasService.updateHistoria(i.id,i).subscribe(),this._changeDetectorRef.markForCheck()}),this._router.events.pipe((0,u.R)(this._unsubscribeAll),(0,K.h)(i=>i instanceof P.m2)).subscribe(()=>{this._titleField.nativeElement.focus()})}ngAfterViewInit(){this._historiasListComponent.matDrawer.openedChange.pipe((0,u.R)(this._unsubscribeAll),(0,K.h)(i=>i)).subscribe(()=>{this._titleField.nativeElement.focus()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){if(!this.flagDeleted){const i=this.historiaForm.getRawValue(),e=this.historiaForm.get("paciente").value;this._historiasService.updateHistoria(e.id,i).subscribe(()=>{})}return this._changeDetectorRef.markForCheck(),this._historiasListComponent.matDrawer.close()}toggleCompleted(){console.log(this.historiaForm.getRawValue())}isOverdue(){return ht(this.historia.fecha,ht.ISO_8601).isBefore(ht(),"days")}deleteHistoria(){this._fuseConfirmationService.open({title:"Eliminar consulta",message:"Seguro que quieres borrar esta consulta? Esta acci\xf3n no se puede deshacer!",actions:{confirm:{label:"Eliminar"}}}).afterClosed().subscribe(e=>{if("confirmed"===e){const s=this.historia.id,n=this.historias.findIndex(l=>l.id===s),r=n+(n===this.historias.length-1?-1:1),a=1===this.historias.length&&this.historias[0].id===s?null:this.historias[r].id;this._historiasService.deleteHistoria(s).subscribe(l=>{!l||(this.flagDeleted=!0,this._router.navigate(a?["../",a]:["../"],{relativeTo:this._activatedRoute}))}),this._changeDetectorRef.markForCheck()}})}trackByFn(i,e){return e.id||i}}X.\u0275fac=function(i){return new(i||X)(t.Y36(P.gz),t.Y36(t.sBO),t.Y36(E.qu),t.Y36(Ke.R),t.Y36(P.F0),t.Y36(Q),t.Y36(T))},X.\u0275cmp=t.Xpm({type:X,selectors:[["historias-details"]],viewQuery:function(i,e){if(1&i&&t.Gf(We,5),2&i){let s;t.iGM(s=t.CRH())&&(e._titleField=s.first)}},decls:155,vars:63,consts:[[1,"flex","flex-auto","w-full"],[1,"flex","flex-col","flex-auto","p-6","pt-10","sm:p-8","sm:pt-10","overflow-y-auto",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],[1,"pr-4","pl-3.5","flex","items-center","justify-center"],[3,"svgIcon"],[1,"ml-2","font-semibold"],[1,"flex","items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["moreMenu","matMenu"],["mat-menu-item","",3,"click"],["type","button","mat-icon-button","",3,"routerLink"],[1,"mt-6","mb-8"],[1,"ml-6"],[1,"font-medium"],[1,"relative","flex","items-center","mt-1.5","px-4","leading-9","rounded-full","cursor-pointer","text-green-800","bg-green-200","dark:text-green-100","dark:bg-green-500",3,"click"],[1,"icon-size-5","text-current",3,"svgIcon"],[1,"ml-2","text-md","font-medium"],[4,"ngIf"],[1,"fuse-mat-no-subscript","fuse-mat-dense","invisible","absolute","inset-0","-mt-2.5","opacity-0","pointer-events-none"],["matInput","",3,"formControlName","matDatepicker"],["dueDatePicker",""],["mat-button","","matDatepickerCancel","",3,"click"],["mat-flat-button","","matDatepickerApply","",1,"",3,"color"],[1,"fuse-mat-textarea","fuse-mat-no-subscript","w-full"],["matInput","","matTextareaAutosize","",3,"formControlName","spellcheck"],["titleField",""],[1,"font-medium","mb-1.5","mt-6"],[1,"my-2"],[1,"mt-8","flex","flex-col"],[3,"formControlName"],["checks",""],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-6","gap-6","w-full","mt-8"],[1,"col-span-2"],[1,"fuse-mat-no-subscript","w-full"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["autocomplete","off","type","text","matInput","",3,"formControlName"],[1,"col-span-6"],["condicion",""],[3,"formGroupName"],[1,"mb-1","mt-6","font-medium"],[1,"grid","grid-cols-4","md:grid-cols-6","gap-2",3,"formGroupName"],["matInput","","type","number",3,"autocomplete","formControlName"],[1,"mb-1","mt-2","font-medium"],[1,"col-span-4"],[1,"mt-8"],["mat-button","",1,"pr-8","pl-8","mt-6",3,"routerLink"],[1,"flex","items-center","justify-center"],[1,"text-primary",3,"svgIcon"],[3,"value"]],template:function(i,e){if(1&i){const s=t.EpF();t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3),t._UZ(4,"mat-icon",4),t.TgZ(5,"span",5),t._uU(6,"Captura valoraci\xf3n"),t.qZA()(),t.TgZ(7,"div",6)(8,"button",7),t._UZ(9,"mat-icon",4),t.qZA(),t.TgZ(10,"mat-menu",null,8)(12,"button",9),t.NdJ("click",function(){return e.deleteHistoria()}),t._UZ(13,"mat-icon",4),t.TgZ(14,"span"),t._uU(15,"Eliminar consulta"),t.qZA()()(),t.TgZ(16,"button",10),t._UZ(17,"mat-icon",4),t.qZA()()(),t._UZ(18,"mat-divider",11),t.TgZ(19,"div",12)(20,"div",13),t._uU(21,"Fecha"),t.qZA(),t.TgZ(22,"div",14),t.NdJ("click",function(){t.CHM(s);const r=t.MAs(30);return t.KtG(r.open())}),t._UZ(23,"mat-icon",15),t.TgZ(24,"span",16),t.YNc(25,Xe,3,4,"ng-container",17),t.YNc(26,ti,2,0,"ng-container",17),t.qZA(),t.TgZ(27,"mat-form-field",18),t._UZ(28,"input",19),t.TgZ(29,"mat-datepicker",null,20)(31,"mat-datepicker-actions")(32,"button",21),t.NdJ("click",function(){return e.historiaForm.get("fecha").setValue(null)}),t._uU(33,"Clear "),t.qZA(),t.TgZ(34,"button",22),t._uU(35,"Select "),t.qZA()()()()()(),t.TgZ(36,"div")(37,"mat-form-field",23)(38,"mat-label"),t._uU(39,"Motivo de la consulta"),t.qZA(),t._UZ(40,"textarea",24,25),t.qZA()(),t.TgZ(42,"div",26),t._uU(43,"Estado general de salud"),t.qZA(),t._UZ(44,"mat-divider",27),t.TgZ(45,"div",28)(46,"mat-selection-list",29,30),t.YNc(48,ei,2,2,"mat-list-option",31),t.qZA(),t.TgZ(49,"div",32)(50,"div",33)(51,"mat-form-field",34)(52,"mat-label"),t._uU(53,"T-A"),t.qZA(),t._UZ(54,"mat-icon",35)(55,"input",36),t.qZA()(),t.TgZ(56,"div",33)(57,"mat-form-field",34)(58,"mat-label"),t._uU(59,"F-C"),t.qZA(),t._UZ(60,"mat-icon",35)(61,"input",36),t.qZA()(),t.TgZ(62,"div",33)(63,"mat-form-field",34)(64,"mat-label"),t._uU(65,"Tiempo usando lentes"),t.qZA(),t._UZ(66,"mat-icon",35)(67,"input",36),t.qZA()(),t.TgZ(68,"div",37)(69,"mat-form-field",34)(70,"mat-label"),t._uU(71,"Historial familiar"),t.qZA(),t._UZ(72,"mat-icon",35)(73,"textarea",24),t.qZA()()()(),t.TgZ(74,"div",26),t._uU(75,"Condici\xf3n de los ojos"),t.qZA(),t._UZ(76,"mat-divider",27),t.TgZ(77,"mat-selection-list",29,38),t.YNc(79,ii,2,2,"mat-list-option",31),t.qZA(),t.TgZ(80,"div",26),t._uU(81,"Graduaci\xf3n "),t.qZA(),t._UZ(82,"mat-divider",27),t.TgZ(83,"div",39)(84,"div",40),t._uU(85,"O.D"),t.qZA(),t.TgZ(86,"div",41)(87,"mat-form-field",33)(88,"mat-label"),t._uU(89,"ESF"),t.qZA(),t._UZ(90,"input",42),t.qZA(),t.TgZ(91,"mat-form-field",33)(92,"mat-label"),t._uU(93,"CIL"),t.qZA(),t._UZ(94,"input",42),t.qZA(),t.TgZ(95,"mat-form-field",33)(96,"mat-label"),t._uU(97,"EJE"),t.qZA(),t._UZ(98,"input",42),t.qZA(),t.TgZ(99,"mat-form-field",33)(100,"mat-label"),t._uU(101,"ADD"),t.qZA(),t._UZ(102,"input",42),t.qZA(),t.TgZ(103,"mat-form-field",33)(104,"mat-label"),t._uU(105,"CL"),t.qZA(),t._UZ(106,"input",42),t.qZA(),t.TgZ(107,"mat-form-field",33)(108,"mat-label"),t._uU(109,"SL"),t.qZA(),t._UZ(110,"input",42),t.qZA()(),t.TgZ(111,"div",43),t._uU(112,"O.I"),t.qZA(),t.TgZ(113,"div",41)(114,"mat-form-field",33)(115,"mat-label"),t._uU(116,"ESF"),t.qZA(),t._UZ(117,"input",42),t.qZA(),t.TgZ(118,"mat-form-field",33)(119,"mat-label"),t._uU(120,"CIL"),t.qZA(),t._UZ(121,"input",42),t.qZA(),t.TgZ(122,"mat-form-field",33)(123,"mat-label"),t._uU(124,"EJE"),t.qZA(),t._UZ(125,"input",42),t.qZA(),t.TgZ(126,"mat-form-field",33)(127,"mat-label"),t._uU(128,"ADD"),t.qZA(),t._UZ(129,"input",42),t.qZA(),t.TgZ(130,"mat-form-field",33)(131,"mat-label"),t._uU(132,"CL"),t.qZA(),t._UZ(133,"input",42),t.qZA(),t.TgZ(134,"mat-form-field",33)(135,"mat-label"),t._uU(136,"SL"),t.qZA(),t._UZ(137,"input",42),t.qZA()(),t.TgZ(138,"div",44)(139,"mat-form-field",34)(140,"mat-label"),t._uU(141,"DI/Altura"),t.qZA(),t._UZ(142,"mat-icon",35)(143,"input",36),t.qZA()()(),t._UZ(144,"div",32),t.TgZ(145,"div",45)(146,"mat-form-field",23)(147,"mat-label"),t._uU(148,"Observaciones"),t.qZA(),t._UZ(149,"textarea",24),t.qZA()(),t.TgZ(150,"button",46)(151,"div",47),t._UZ(152,"mat-icon",48),t.TgZ(153,"span",5),t._uU(154,"Listo"),t.qZA()()()()()}if(2&i){const s=t.MAs(11),n=t.MAs(30);t.xp6(1),t.Q6J("formGroup",e.historiaForm),t.xp6(3),t.Q6J("svgIcon","medical_services"),t.xp6(4),t.Q6J("matMenuTriggerFor",s),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:dots-vertical"),t.xp6(4),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(3),t.Q6J("routerLink",t.DdM(61,Wt)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:calendar"),t.xp6(2),t.Q6J("ngIf",e.historia.fecha),t.xp6(1),t.Q6J("ngIf",!e.historia.fecha),t.xp6(2),t.Q6J("formControlName","fecha")("matDatepicker",n),t.xp6(6),t.Q6J("color","primary"),t.xp6(6),t.Q6J("formControlName","motivoConsulta")("spellcheck",!1),t.xp6(6),t.Q6J("formControlName","estadoGeneralSalud"),t.xp6(2),t.Q6J("ngForOf",e.checkSalud),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(1),t.Q6J("formControlName","ta"),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(1),t.Q6J("formControlName","fc"),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(1),t.Q6J("formControlName","tiempoUsoLentes"),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(1),t.Q6J("formControlName","historiaFamiliar")("spellcheck",!1),t.xp6(4),t.Q6J("formControlName","condicionOjos"),t.xp6(2),t.Q6J("ngForOf",e.condicionOjos),t.xp6(4),t.Q6J("formGroupName","graduacionFinal"),t.xp6(3),t.Q6J("formGroupName","od"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","esf"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","cil"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","eje"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","add"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","cl"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","sl"),t.xp6(3),t.Q6J("formGroupName","oi"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","esf"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","cil"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","eje"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","add"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","cl"),t.xp6(4),t.Q6J("autocomplete","off")("formControlName","sl"),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(1),t.Q6J("formControlName","diAltura"),t.xp6(6),t.Q6J("formControlName","observaciones")("spellcheck",!1),t.xp6(1),t.Q6J("routerLink",t.DdM(62,Wt)),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:check-circle")}},dependencies:[P.rH,St.eB,H.Mq,H.hl,H.M5,H.dp,H.DK,yt.d,lt.v_,lt.$V,lt.g4,Ct.Hw,I.Ub,I.vS,$t.k0,ct.W0,ct.tN,ct.D8,x.sg,x.O5,E._Y,E.Fj,E.wV,E.JJ,E.JL,E.sg,E.u,E.x0,x.uU],encapsulation:2,changeDetection:0});var si=c(9309);const ni=[{path:"",component:W,resolve:{tags:N},children:[{path:":idPx",component:Q,resolve:{historias:B,persona:si.V6},children:[{path:":id",component:X,resolve:{historia:J},canDeactivate:[F]}]}]}];var oi=c(4466),ri=c(455);class Y{}Y.\u0275fac=function(i){return new(i||Y)},Y.\u0275mod=t.oAB({type:Y}),Y.\u0275inj=t.cJS({providers:[{provide:Vt.sG,useValue:{parse:{dateInput:ht.ISO_8601},display:{dateInput:"ll",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}}],imports:[P.Bz.forChild(ni),be,xe.D8,St.yu,ye.Zh,H.FA,yt.t,lt.wp,Ct.Ps,ri.rP,I.ie,U.To,$t.x4,ct.jT,De.Yd,Ce.jc,Se.Xo,Vt.si,we.uw,dt.SJ,jt.AA,Re.V,oi.m]})},8256:(ee,tt,c)=>{c.d(tt,{OY:()=>et,Xo:()=>ut,vy:()=>it});var t=c(4650),x=c(3238),z=c(2687),R=c(5017),m=c(4006),Z=c(1948);const _=function(f){return{enterDuration:f}},k=["*"],pt={provide:m.JU,useExisting:(0,t.Gpc)(()=>et),multi:!0};let et=(()=>{class f extends Z.hr{}return f.\u0275fac=function(){let y;return function(p){return(y||(y=t.n5z(f)))(p||f)}}(),f.\u0275dir=t.lG2({type:f,selectors:[["mat-radio-group"]],contentQueries:function(u,p,D){if(1&u&&t.Suo(D,it,5),2&u){let b;t.iGM(b=t.CRH())&&(p._radios=b)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[t._Bn([pt,{provide:Z.$6,useExisting:f}]),t.qOj]}),f})(),it=(()=>{class f extends Z.XD{constructor(u,p,D,b,A,C,st,q){super(u,p,D,b,A,C,st,q)}}return f.\u0275fac=function(u){return new(u||f)(t.Y36(Z.$6,8),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(z.tE),t.Y36(R.A8),t.Y36(t.QbO,8),t.Y36(Z._J,8),t.$8M("tabindex"))},f.\u0275cmp=t.Xpm({type:f,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(u,p){1&u&&t.NdJ("focus",function(){return p._inputElement.nativeElement.focus()}),2&u&&(t.uIk("tabindex",null)("id",p.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),t.ekj("mat-radio-checked",p.checked)("mat-radio-disabled",p.disabled)("_mat-animation-noopable",p._noopAnimations)("mat-primary","primary"===p.color)("mat-accent","accent"===p.color)("mat-warn","warn"===p.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[t.qOj],ngContentSelectors:k,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(u,p){if(1&u&&(t.F$t(),t.TgZ(0,"label",0,1)(2,"span",2),t._UZ(3,"span",3)(4,"span",4),t.TgZ(5,"input",5,6),t.NdJ("change",function(b){return p._onInputInteraction(b)})("click",function(b){return p._onInputClick(b)}),t.qZA(),t.TgZ(7,"span",7),t._UZ(8,"span",8),t.qZA()(),t.TgZ(9,"span",9)(10,"span",10),t._uU(11,"\xa0"),t.qZA(),t.Hsn(12),t.qZA()()),2&u){const D=t.MAs(1);t.uIk("for",p.inputId),t.xp6(5),t.Q6J("id",p.inputId)("checked",p.checked)("disabled",p.disabled)("required",p.required),t.uIk("name",p.name)("value",p.value)("aria-label",p.ariaLabel)("aria-labelledby",p.ariaLabelledby)("aria-describedby",p.ariaDescribedby),t.xp6(2),t.Q6J("matRippleTrigger",D)("matRippleDisabled",p._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",t.VKq(17,_,p._noopAnimations?0:150)),t.xp6(2),t.ekj("mat-radio-label-before","before"==p.labelPosition)}},dependencies:[x.wG],styles:['.mat-radio-button{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.mat-radio-input:focus~.mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}'],encapsulation:2,changeDetection:0}),f})(),ut=(()=>{class f{}return f.\u0275fac=function(u){return new(u||f)},f.\u0275mod=t.oAB({type:f}),f.\u0275inj=t.cJS({imports:[x.si,x.BQ,x.BQ]}),f})()}}]);