(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[431],{431:(mt,He,Oe)=>{"use strict";Oe.r(He),Oe.d(He,{AgendaModule:()=>D});var ge=Oe(6895),be=Oe(4006),e=Oe(8277),t=Oe(4859),n=Oe(148),i=Oe(9549),a=Oe(7392),r=Oe(284),o=Oe(6338),s=Oe(8739),l=Oe(4385),d=Oe(3267),c=Oe(455),u=Oe(6308),m=Oe(3626),y=Oe(266),b=Oe(9132),f=Oe(4650),v=(Oe(2904),Oe(1199)),S=Oe.n(v),_=Oe(655);window.Smart?window.Smart.RenderMode="manual":window.Smart={RenderMode:"manual"},window.rrule={RRule:S()};class T{constructor(p){this.onCreate=new f.vpe,this.onReady=new f.vpe,this.onAttach=new f.vpe,this.onDetach=new f.vpe;const E=this;this.nativeElement=p.nativeElement,E.nativeElement.onAttached=()=>{E.onAttach.emit(E.nativeElement)},E.nativeElement.onDetached=()=>{E.onDetach.emit(E.nativeElement)}}addEventListener(p,E,$=!1){this.nativeElement.addEventListener(p,E,$)}removeEventListener(p,E,$=!1){this.nativeElement.removeEventListener(p,E,$)}dispatchEvent(p){return this.nativeElement.dispatchEvent(p)}blur(){this.nativeElement.blur()}click(){this.nativeElement.click()}focus(p){this.nativeElement.focus(p)}get locale(){return this.nativeElement?this.nativeElement.locale:void 0}set locale(p){this.nativeElement&&(this.nativeElement.locale=p)}get localizeFormatFunction(){return this.nativeElement?this.nativeElement.localizeFormatFunction:void 0}set localizeFormatFunction(p){this.nativeElement&&(this.nativeElement.localizeFormatFunction=p)}get messages(){return this.nativeElement?this.nativeElement.messages:void 0}set messages(p){this.nativeElement&&(this.nativeElement.messages=p)}get rightToLeft(){return this.nativeElement?this.nativeElement.rightToLeft:void 0}set rightToLeft(p){this.nativeElement&&(this.nativeElement.rightToLeft=p)}get theme(){return this.nativeElement?this.nativeElement.theme:void 0}set theme(p){this.nativeElement&&(this.nativeElement.theme=p)}}T.\u0275fac=function(p){f.$Z()},T.\u0275dir=f.lG2({type:T,inputs:{locale:"locale",localizeFormatFunction:"localizeFormatFunction",messages:"messages",rightToLeft:"rightToLeft",theme:"theme"},outputs:{onCreate:"onCreate",onReady:"onReady",onAttach:"onAttach",onDetach:"onDetach"}}),(0,_.gn)([(0,f.r_U)()],T.prototype,"onCreate",void 0),(0,_.gn)([(0,f.r_U)()],T.prototype,"onReady",void 0),(0,_.gn)([(0,f.r_U)()],T.prototype,"onAttach",void 0),(0,_.gn)([(0,f.r_U)()],T.prototype,"onDetach",void 0),(0,_.gn)([(0,f.IIB)()],T.prototype,"locale",null),(0,_.gn)([(0,f.IIB)()],T.prototype,"localizeFormatFunction",null),(0,_.gn)([(0,f.IIB)()],T.prototype,"messages",null),(0,_.gn)([(0,f.IIB)()],T.prototype,"rightToLeft",null),(0,_.gn)([(0,f.IIB)()],T.prototype,"theme",null);const z=window.Smart;let M=class extends T{constructor(p){super(p),this.eventHandlers=[],this.onBeginUpdate=new f.vpe,this.onEndUpdate=new f.vpe,this.onChange=new f.vpe,this.onItemChange=new f.vpe,this.onItemChanging=new f.vpe,this.onItemClick=new f.vpe,this.onItemInsert=new f.vpe,this.onItemRemove=new f.vpe,this.onItemUpdate=new f.vpe,this.onViewChange=new f.vpe,this.onViewChanging=new f.vpe,this.onEventShortcutKey=new f.vpe,this.onDateChange=new f.vpe,this.onDragStart=new f.vpe,this.onDragEnd=new f.vpe,this.onDropoverCell=new f.vpe,this.onResizeStart=new f.vpe,this.onResizeEnd=new f.vpe,this.onEditDialogOpening=new f.vpe,this.onEditDialogOpen=new f.vpe,this.onEditDialogClose=new f.vpe,this.onEditDialogClosing=new f.vpe,this.onContextMenuOpening=new f.vpe,this.onContextMenuOpen=new f.vpe,this.onContextMenuClose=new f.vpe,this.onContextMenuClosing=new f.vpe,this.onEventMenuOpening=new f.vpe,this.onEventMenuOpen=new f.vpe,this.onEventMenuClose=new f.vpe,this.onEventMenuClosing=new f.vpe,this.onDateMenuOpen=new f.vpe,this.onDateMenuClose=new f.vpe,this.onViewMenuOpen=new f.vpe,this.onViewMenuClose=new f.vpe,this.onNotificationOpen=new f.vpe,this.onNotificationClose=new f.vpe,this.nativeElement=p.nativeElement}createComponent(p={}){this.nativeElement=document.createElement("smart-scheduler");for(let E in p)this.nativeElement[E]=p[E];return this.nativeElement}get autoScrollStep(){return this.nativeElement?this.nativeElement.autoScrollStep:void 0}set autoScrollStep(p){this.nativeElement&&(this.nativeElement.autoScrollStep=p)}get autoHeightAllDayCells(){return this.nativeElement?this.nativeElement.autoHeightAllDayCells:void 0}set autoHeightAllDayCells(p){this.nativeElement&&(this.nativeElement.autoHeightAllDayCells=p)}get available(){return this.nativeElement?this.nativeElement.available:void 0}set available(p){this.nativeElement&&(this.nativeElement.available=p)}get colorScheme(){return this.nativeElement?this.nativeElement.colorScheme:void 0}set colorScheme(p){this.nativeElement&&(this.nativeElement.colorScheme=p)}get currentTimeIndicator(){return this.nativeElement?this.nativeElement.currentTimeIndicator:void 0}set currentTimeIndicator(p){this.nativeElement&&(this.nativeElement.currentTimeIndicator=p)}get currentTimeIndicatorInterval(){return this.nativeElement?this.nativeElement.currentTimeIndicatorInterval:void 0}set currentTimeIndicatorInterval(p){this.nativeElement&&(this.nativeElement.currentTimeIndicatorInterval=p)}get contextMenuDataSource(){return this.nativeElement?this.nativeElement.contextMenuDataSource:void 0}set contextMenuDataSource(p){this.nativeElement&&(this.nativeElement.contextMenuDataSource=p)}get contextMenuClipboardActions(){return this.nativeElement?this.nativeElement.contextMenuClipboardActions:void 0}set contextMenuClipboardActions(p){this.nativeElement&&(this.nativeElement.contextMenuClipboardActions=p)}get eventTemplate(){return this.nativeElement?this.nativeElement.eventTemplate:void 0}set eventTemplate(p){this.nativeElement&&(this.nativeElement.eventTemplate=p)}get eventCollectorTemplate(){return this.nativeElement?this.nativeElement.eventCollectorTemplate:void 0}set eventCollectorTemplate(p){this.nativeElement&&(this.nativeElement.eventCollectorTemplate=p)}get eventRenderMode(){return this.nativeElement?this.nativeElement.eventRenderMode:void 0}set eventRenderMode(p){this.nativeElement&&(this.nativeElement.eventRenderMode=p)}get eventTooltipTemplate(){return this.nativeElement?this.nativeElement.eventTooltipTemplate:void 0}set eventTooltipTemplate(p){this.nativeElement&&(this.nativeElement.eventTooltipTemplate=p)}get cellTemplate(){return this.nativeElement?this.nativeElement.cellTemplate:void 0}set cellTemplate(p){this.nativeElement&&(this.nativeElement.cellTemplate=p)}get dateCurrent(){return this.nativeElement?this.nativeElement.dateCurrent:void 0}set dateCurrent(p){this.nativeElement&&(this.nativeElement.dateCurrent=p)}get dataExport(){return this.nativeElement?this.nativeElement.dataExport:void 0}set dataExport(p){this.nativeElement&&(this.nativeElement.dataExport=p)}get dataSource(){return this.nativeElement?this.nativeElement.dataSource:void 0}set dataSource(p){this.nativeElement&&(this.nativeElement.dataSource=p)}get dateSelectorFormatFunction(){return this.nativeElement?this.nativeElement.dateSelectorFormatFunction:void 0}set dateSelectorFormatFunction(p){this.nativeElement&&(this.nativeElement.dateSelectorFormatFunction=p)}get dayFormat(){return this.nativeElement?this.nativeElement.dayFormat:void 0}set dayFormat(p){this.nativeElement&&(this.nativeElement.dayFormat=p)}get disabled(){return this.nativeElement?this.nativeElement.disabled:void 0}set disabled(p){this.nativeElement&&(this.nativeElement.disabled=p)}get disableAutoScroll(){return this.nativeElement?this.nativeElement.disableAutoScroll:void 0}set disableAutoScroll(p){this.nativeElement&&(this.nativeElement.disableAutoScroll=p)}get disableDrag(){return this.nativeElement?this.nativeElement.disableDrag:void 0}set disableDrag(p){this.nativeElement&&(this.nativeElement.disableDrag=p)}get disableDrop(){return this.nativeElement?this.nativeElement.disableDrop:void 0}set disableDrop(p){this.nativeElement&&(this.nativeElement.disableDrop=p)}get disableResize(){return this.nativeElement?this.nativeElement.disableResize:void 0}set disableResize(p){this.nativeElement&&(this.nativeElement.disableResize=p)}get disableSelection(){return this.nativeElement?this.nativeElement.disableSelection:void 0}set disableSelection(p){this.nativeElement&&(this.nativeElement.disableSelection=p)}get disableWindowEditor(){return this.nativeElement?this.nativeElement.disableWindowEditor:void 0}set disableWindowEditor(p){this.nativeElement&&(this.nativeElement.disableWindowEditor=p)}get disableContextMenu(){return this.nativeElement?this.nativeElement.disableContextMenu:void 0}set disableContextMenu(p){this.nativeElement&&(this.nativeElement.disableContextMenu=p)}get disableEventMenu(){return this.nativeElement?this.nativeElement.disableEventMenu:void 0}set disableEventMenu(p){this.nativeElement&&(this.nativeElement.disableEventMenu=p)}get disableViewMenu(){return this.nativeElement?this.nativeElement.disableViewMenu:void 0}set disableViewMenu(p){this.nativeElement&&(this.nativeElement.disableViewMenu=p)}get disableDateMenu(){return this.nativeElement?this.nativeElement.disableDateMenu:void 0}set disableDateMenu(p){this.nativeElement&&(this.nativeElement.disableDateMenu=p)}get dragFeedbackFormatFunction(){return this.nativeElement?this.nativeElement.dragFeedbackFormatFunction:void 0}set dragFeedbackFormatFunction(p){this.nativeElement&&(this.nativeElement.dragFeedbackFormatFunction=p)}get dragOffset(){return this.nativeElement?this.nativeElement.dragOffset:void 0}set dragOffset(p){this.nativeElement&&(this.nativeElement.dragOffset=p)}get filter(){return this.nativeElement?this.nativeElement.filter:void 0}set filter(p){this.nativeElement&&(this.nativeElement.filter=p)}get filterable(){return this.nativeElement?this.nativeElement.filterable:void 0}set filterable(p){this.nativeElement&&(this.nativeElement.filterable=p)}get filterMode(){return this.nativeElement?this.nativeElement.filterMode:void 0}set filterMode(p){this.nativeElement&&(this.nativeElement.filterMode=p)}get events(){return this.nativeElement?this.nativeElement.events:void 0}set events(p){this.nativeElement&&(this.nativeElement.events=p)}get firstDayOfWeek(){return this.nativeElement?this.nativeElement.firstDayOfWeek:void 0}set firstDayOfWeek(p){this.nativeElement&&(this.nativeElement.firstDayOfWeek=p)}get footerTemplate(){return this.nativeElement?this.nativeElement.footerTemplate:void 0}set footerTemplate(p){this.nativeElement&&(this.nativeElement.footerTemplate=p)}get groupByDate(){return this.nativeElement?this.nativeElement.groupByDate:void 0}set groupByDate(p){this.nativeElement&&(this.nativeElement.groupByDate=p)}get groupOrientation(){return this.nativeElement?this.nativeElement.groupOrientation:void 0}set groupOrientation(p){this.nativeElement&&(this.nativeElement.groupOrientation=p)}get groupTemplate(){return this.nativeElement?this.nativeElement.groupTemplate:void 0}set groupTemplate(p){this.nativeElement&&(this.nativeElement.groupTemplate=p)}get groups(){return this.nativeElement?this.nativeElement.groups:void 0}set groups(p){this.nativeElement&&(this.nativeElement.groups=p)}get hourEnd(){return this.nativeElement?this.nativeElement.hourEnd:void 0}set hourEnd(p){this.nativeElement&&(this.nativeElement.hourEnd=p)}get hourStart(){return this.nativeElement?this.nativeElement.hourStart:void 0}set hourStart(p){this.nativeElement&&(this.nativeElement.hourStart=p)}get hourFormat(){return this.nativeElement?this.nativeElement.hourFormat:void 0}set hourFormat(p){this.nativeElement&&(this.nativeElement.hourFormat=p)}get headerTemplate(){return this.nativeElement?this.nativeElement.headerTemplate:void 0}set headerTemplate(p){this.nativeElement&&(this.nativeElement.headerTemplate=p)}get headerDatePosition(){return this.nativeElement?this.nativeElement.headerDatePosition:void 0}set headerDatePosition(p){this.nativeElement&&(this.nativeElement.headerDatePosition=p)}get headerNavigationStyle(){return this.nativeElement?this.nativeElement.headerNavigationStyle:void 0}set headerNavigationStyle(p){this.nativeElement&&(this.nativeElement.headerNavigationStyle=p)}get headerViewPosition(){return this.nativeElement?this.nativeElement.headerViewPosition:void 0}set headerViewPosition(p){this.nativeElement&&(this.nativeElement.headerViewPosition=p)}get hideAllDay(){return this.nativeElement?this.nativeElement.hideAllDay:void 0}set hideAllDay(p){this.nativeElement&&(this.nativeElement.hideAllDay=p)}get hideNonworkingWeekdays(){return this.nativeElement?this.nativeElement.hideNonworkingWeekdays:void 0}set hideNonworkingWeekdays(p){this.nativeElement&&(this.nativeElement.hideNonworkingWeekdays=p)}get hideOtherMonthDays(){return this.nativeElement?this.nativeElement.hideOtherMonthDays:void 0}set hideOtherMonthDays(p){this.nativeElement&&(this.nativeElement.hideOtherMonthDays=p)}get hideTodayButton(){return this.nativeElement?this.nativeElement.hideTodayButton:void 0}set hideTodayButton(p){this.nativeElement&&(this.nativeElement.hideTodayButton=p)}get hideViewMenuCheckableItems(){return this.nativeElement?this.nativeElement.hideViewMenuCheckableItems:void 0}set hideViewMenuCheckableItems(p){this.nativeElement&&(this.nativeElement.hideViewMenuCheckableItems=p)}get hideWeekend(){return this.nativeElement?this.nativeElement.hideWeekend:void 0}set hideWeekend(p){this.nativeElement&&(this.nativeElement.hideWeekend=p)}get legendLocation(){return this.nativeElement?this.nativeElement.legendLocation:void 0}set legendLocation(p){this.nativeElement&&(this.nativeElement.legendLocation=p)}get legendPosition(){return this.nativeElement?this.nativeElement.legendPosition:void 0}set legendPosition(p){this.nativeElement&&(this.nativeElement.legendPosition=p)}get legendLayout(){return this.nativeElement?this.nativeElement.legendLayout:void 0}set legendLayout(p){this.nativeElement&&(this.nativeElement.legendLayout=p)}get legendLayoutMenuBreakpoint(){return this.nativeElement?this.nativeElement.legendLayoutMenuBreakpoint:void 0}set legendLayoutMenuBreakpoint(p){this.nativeElement&&(this.nativeElement.legendLayoutMenuBreakpoint=p)}get mouseWheelStep(){return this.nativeElement?this.nativeElement.mouseWheelStep:void 0}set mouseWheelStep(p){this.nativeElement&&(this.nativeElement.mouseWheelStep=p)}get horizontalScrollBarVisibility(){return this.nativeElement?this.nativeElement.horizontalScrollBarVisibility:void 0}set horizontalScrollBarVisibility(p){this.nativeElement&&(this.nativeElement.horizontalScrollBarVisibility=p)}get locale(){return this.nativeElement?this.nativeElement.locale:void 0}set locale(p){this.nativeElement&&(this.nativeElement.locale=p)}get max(){return this.nativeElement?this.nativeElement.max:void 0}set max(p){this.nativeElement&&(this.nativeElement.max=p)}get maxEventsPerCell(){return this.nativeElement?this.nativeElement.maxEventsPerCell:void 0}set maxEventsPerCell(p){this.nativeElement&&(this.nativeElement.maxEventsPerCell=p)}get min(){return this.nativeElement?this.nativeElement.min:void 0}set min(p){this.nativeElement&&(this.nativeElement.min=p)}get messages(){return this.nativeElement?this.nativeElement.messages:void 0}set messages(p){this.nativeElement&&(this.nativeElement.messages=p)}get minuteFormat(){return this.nativeElement?this.nativeElement.minuteFormat:void 0}set minuteFormat(p){this.nativeElement&&(this.nativeElement.minuteFormat=p)}get monthFormat(){return this.nativeElement?this.nativeElement.monthFormat:void 0}set monthFormat(p){this.nativeElement&&(this.nativeElement.monthFormat=p)}get nonworkingDays(){return this.nativeElement?this.nativeElement.nonworkingDays:void 0}set nonworkingDays(p){this.nativeElement&&(this.nativeElement.nonworkingDays=p)}get nonworkingHours(){return this.nativeElement?this.nativeElement.nonworkingHours:void 0}set nonworkingHours(p){this.nativeElement&&(this.nativeElement.nonworkingHours=p)}get notificationInterval(){return this.nativeElement?this.nativeElement.notificationInterval:void 0}set notificationInterval(p){this.nativeElement&&(this.nativeElement.notificationInterval=p)}get resizeHandlesVisibility(){return this.nativeElement?this.nativeElement.resizeHandlesVisibility:void 0}set resizeHandlesVisibility(p){this.nativeElement&&(this.nativeElement.resizeHandlesVisibility=p)}get resizeInterval(){return this.nativeElement?this.nativeElement.resizeInterval:void 0}set resizeInterval(p){this.nativeElement&&(this.nativeElement.resizeInterval=p)}get resources(){return this.nativeElement?this.nativeElement.resources:void 0}set resources(p){this.nativeElement&&(this.nativeElement.resources=p)}get restrictedDates(){return this.nativeElement?this.nativeElement.restrictedDates:void 0}set restrictedDates(p){this.nativeElement&&(this.nativeElement.restrictedDates=p)}get restrictedHours(){return this.nativeElement?this.nativeElement.restrictedHours:void 0}set restrictedHours(p){this.nativeElement&&(this.nativeElement.restrictedHours=p)}get restricted(){return this.nativeElement?this.nativeElement.restricted:void 0}set restricted(p){this.nativeElement&&(this.nativeElement.restricted=p)}get rightToLeft(){return this.nativeElement?this.nativeElement.rightToLeft:void 0}set rightToLeft(p){this.nativeElement&&(this.nativeElement.rightToLeft=p)}get scrollButtonsPosition(){return this.nativeElement?this.nativeElement.scrollButtonsPosition:void 0}set scrollButtonsPosition(p){this.nativeElement&&(this.nativeElement.scrollButtonsPosition=p)}get shadeUntilCurrentTime(){return this.nativeElement?this.nativeElement.shadeUntilCurrentTime:void 0}set shadeUntilCurrentTime(p){this.nativeElement&&(this.nativeElement.shadeUntilCurrentTime=p)}get showLegend(){return this.nativeElement?this.nativeElement.showLegend:void 0}set showLegend(p){this.nativeElement&&(this.nativeElement.showLegend=p)}get sortBy(){return this.nativeElement?this.nativeElement.sortBy:void 0}set sortBy(p){this.nativeElement&&(this.nativeElement.sortBy=p)}get sortFunction(){return this.nativeElement?this.nativeElement.sortFunction:void 0}set sortFunction(p){this.nativeElement&&(this.nativeElement.sortFunction=p)}get sortOrder(){return this.nativeElement?this.nativeElement.sortOrder:void 0}set sortOrder(p){this.nativeElement&&(this.nativeElement.sortOrder=p)}get spinButtonsDelay(){return this.nativeElement?this.nativeElement.spinButtonsDelay:void 0}set spinButtonsDelay(p){this.nativeElement&&(this.nativeElement.spinButtonsDelay=p)}get spinButtonsInitialDelay(){return this.nativeElement?this.nativeElement.spinButtonsInitialDelay:void 0}set spinButtonsInitialDelay(p){this.nativeElement&&(this.nativeElement.spinButtonsInitialDelay=p)}get statuses(){return this.nativeElement?this.nativeElement.statuses:void 0}set statuses(p){this.nativeElement&&(this.nativeElement.statuses=p)}get theme(){return this.nativeElement?this.nativeElement.theme:void 0}set theme(p){this.nativeElement&&(this.nativeElement.theme=p)}get timelineHeaderFormatFunction(){return this.nativeElement?this.nativeElement.timelineHeaderFormatFunction:void 0}set timelineHeaderFormatFunction(p){this.nativeElement&&(this.nativeElement.timelineHeaderFormatFunction=p)}get timelineDayScale(){return this.nativeElement?this.nativeElement.timelineDayScale:void 0}set timelineDayScale(p){this.nativeElement&&(this.nativeElement.timelineDayScale=p)}get timeRulerTicks(){return this.nativeElement?this.nativeElement.timeRulerTicks:void 0}set timeRulerTicks(p){this.nativeElement&&(this.nativeElement.timeRulerTicks=p)}get timeZone(){return this.nativeElement?this.nativeElement.timeZone:void 0}set timeZone(p){this.nativeElement&&(this.nativeElement.timeZone=p)}get timeZones(){return this.nativeElement?this.nativeElement.timeZones:void 0}set timeZones(p){this.nativeElement&&(this.nativeElement.timeZones=p)}get tooltipDelay(){return this.nativeElement?this.nativeElement.tooltipDelay:void 0}set tooltipDelay(p){this.nativeElement&&(this.nativeElement.tooltipDelay=p)}get tooltipOffset(){return this.nativeElement?this.nativeElement.tooltipOffset:void 0}set tooltipOffset(p){this.nativeElement&&(this.nativeElement.tooltipOffset=p)}get verticalScrollBarVisibility(){return this.nativeElement?this.nativeElement.verticalScrollBarVisibility:void 0}set verticalScrollBarVisibility(p){this.nativeElement&&(this.nativeElement.verticalScrollBarVisibility=p)}get view(){return this.nativeElement?this.nativeElement.view:void 0}set view(p){this.nativeElement&&(this.nativeElement.view=p)}get viewType(){return this.nativeElement?this.nativeElement.viewType:void 0}set viewType(p){this.nativeElement&&(this.nativeElement.viewType=p)}get views(){return this.nativeElement?this.nativeElement.views:void 0}set views(p){this.nativeElement&&(this.nativeElement.views=p)}get viewSelectorType(){return this.nativeElement?this.nativeElement.viewSelectorType:void 0}set viewSelectorType(p){this.nativeElement&&(this.nativeElement.viewSelectorType=p)}get viewStartDay(){return this.nativeElement?this.nativeElement.viewStartDay:void 0}set viewStartDay(p){this.nativeElement&&(this.nativeElement.viewStartDay=p)}get weekdayFormat(){return this.nativeElement?this.nativeElement.weekdayFormat:void 0}set weekdayFormat(p){this.nativeElement&&(this.nativeElement.weekdayFormat=p)}get yearFormat(){return this.nativeElement?this.nativeElement.yearFormat:void 0}set yearFormat(p){this.nativeElement&&(this.nativeElement.yearFormat=p)}get unfocusable(){return this.nativeElement?this.nativeElement.unfocusable:void 0}set unfocusable(p){this.nativeElement&&(this.nativeElement.unfocusable=p)}get undoRedoSteps(){return this.nativeElement?this.nativeElement.undoRedoSteps:void 0}set undoRedoSteps(p){this.nativeElement&&(this.nativeElement.undoRedoSteps=p)}get windowCustomizationFunction(){return this.nativeElement?this.nativeElement.windowCustomizationFunction:void 0}set windowCustomizationFunction(p){this.nativeElement&&(this.nativeElement.windowCustomizationFunction=p)}addEvent(p){this.nativeElement.isRendered?this.nativeElement.addEvent(p):this.nativeElement.whenRendered(()=>{this.nativeElement.addEvent(p)})}addView(p,E,$,N,U,K){this.nativeElement.isRendered?this.nativeElement.addView(p,E,$,N,U,K):this.nativeElement.whenRendered(()=>{this.nativeElement.addView(p,E,$,N,U,K)})}beginUpdate(){this.nativeElement.isRendered?this.nativeElement.beginUpdate():this.nativeElement.whenRendered(()=>{this.nativeElement.beginUpdate()})}createEvent(p,E,$,N,U){this.nativeElement.isRendered?this.nativeElement.createEvent(p,E,$,N,U):this.nativeElement.whenRendered(()=>{this.nativeElement.createEvent(p,E,$,N,U)})}endUpdate(){this.nativeElement.isRendered?this.nativeElement.endUpdate():this.nativeElement.whenRendered(()=>{this.nativeElement.endUpdate()})}getViewDates(){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise($=>{this.nativeElement.whenRendered(()=>{const N=this.nativeElement.getViewDates();$(N)})}))()})}refresh(p){this.nativeElement.isRendered?this.nativeElement.refresh(p):this.nativeElement.whenRendered(()=>{this.nativeElement.refresh(p)})}exportData(p,E){this.nativeElement.isRendered?this.nativeElement.exportData(p,E):this.nativeElement.whenRendered(()=>{this.nativeElement.exportData(p,E)})}getDataSource(){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise($=>{this.nativeElement.whenRendered(()=>{const N=this.nativeElement.getDataSource();$(N)})}))()})}getResources(){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise($=>{this.nativeElement.whenRendered(()=>{const N=this.nativeElement.getResources();$(N)})}))()})}getDateFromCoordinates(p,E){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(U=>{this.nativeElement.whenRendered(()=>{const K=this.nativeElement.getDateFromCoordinates(p,E);U(K)})}))()})}getIsAllDayCellFromCoordinates(p,E){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(U=>{this.nativeElement.whenRendered(()=>{const K=this.nativeElement.getIsAllDayCellFromCoordinates(p,E);U(K)})}))()})}getState(){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise($=>{this.nativeElement.whenRendered(()=>{const N=this.nativeElement.getState();$(N)})}))()})}clearState(){this.nativeElement.isRendered?this.nativeElement.clearState():this.nativeElement.whenRendered(()=>{this.nativeElement.clearState()})}loadState(p){this.nativeElement.isRendered?this.nativeElement.loadState(p):this.nativeElement.whenRendered(()=>{this.nativeElement.loadState(p)})}saveState(p){this.nativeElement.isRendered?this.nativeElement.saveState(p):this.nativeElement.whenRendered(()=>{this.nativeElement.saveState(p)})}setView(p){this.nativeElement.isRendered?this.nativeElement.setView(p):this.nativeElement.whenRendered(()=>{this.nativeElement.setView(p)})}containsEvent(p){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(N=>{this.nativeElement.whenRendered(()=>{const U=this.nativeElement.containsEvent(p);N(U)})}))()})}insertEvent(p,E){this.nativeElement.isRendered?this.nativeElement.insertEvent(p,E):this.nativeElement.whenRendered(()=>{this.nativeElement.insertEvent(p,E)})}updateEvent(p,E){this.nativeElement.isRendered?this.nativeElement.updateEvent(p,E):this.nativeElement.whenRendered(()=>{this.nativeElement.updateEvent(p,E)})}removeEvent(p){this.nativeElement.isRendered?this.nativeElement.removeEvent(p):this.nativeElement.whenRendered(()=>{this.nativeElement.removeEvent(p)})}getEventExceptions(p){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(N=>{this.nativeElement.whenRendered(()=>{const U=this.nativeElement.getEventExceptions(p);N(U)})}))()})}addEventException(p,E){this.nativeElement.isRendered?this.nativeElement.addEventException(p,E):this.nativeElement.whenRendered(()=>{this.nativeElement.addEventException(p,E)})}updateEventException(p,E,$){this.nativeElement.isRendered?this.nativeElement.updateEventException(p,E,$):this.nativeElement.whenRendered(()=>{this.nativeElement.updateEventException(p,E,$)})}removeEventException(p,E){this.nativeElement.isRendered?this.nativeElement.removeEventException(p,E):this.nativeElement.whenRendered(()=>{this.nativeElement.removeEventException(p,E)})}openWindow(p){this.nativeElement.isRendered?this.nativeElement.openWindow(p):this.nativeElement.whenRendered(()=>{this.nativeElement.openWindow(p)})}closeWindow(){this.nativeElement.isRendered?this.nativeElement.closeWindow():this.nativeElement.whenRendered(()=>{this.nativeElement.closeWindow()})}print(){this.nativeElement.isRendered?this.nativeElement.print():this.nativeElement.whenRendered(()=>{this.nativeElement.print()})}scrollToDate(p,E,$){this.nativeElement.isRendered?this.nativeElement.scrollToDate(p,E,$):this.nativeElement.whenRendered(()=>{this.nativeElement.scrollToDate(p,E,$)})}navigateToDate(p){this.nativeElement.isRendered?this.nativeElement.navigateToDate(p):this.nativeElement.whenRendered(()=>{this.nativeElement.navigateToDate(p)})}scrollToEvent(p){this.nativeElement.isRendered?this.nativeElement.scrollToEvent(p):this.nativeElement.whenRendered(()=>{this.nativeElement.scrollToEvent(p)})}openNotification(p,E){this.nativeElement.isRendered?this.nativeElement.openNotification(p,E):this.nativeElement.whenRendered(()=>{this.nativeElement.openNotification(p,E)})}closeNotifications(){this.nativeElement.isRendered?this.nativeElement.closeNotifications():this.nativeElement.whenRendered(()=>{this.nativeElement.closeNotifications()})}occurrences(p,E){this.nativeElement.isRendered?this.nativeElement.occurrences(p,E):this.nativeElement.whenRendered(()=>{this.nativeElement.occurrences(p,E)})}occurrencesBetween(p,E,$){this.nativeElement.isRendered?this.nativeElement.occurrencesBetween(p,E,$):this.nativeElement.whenRendered(()=>{this.nativeElement.occurrencesBetween(p,E,$)})}occurrenceAfter(p,E){this.nativeElement.isRendered?this.nativeElement.occurrenceAfter(p,E):this.nativeElement.whenRendered(()=>{this.nativeElement.occurrenceAfter(p,E)})}occurrenceBefore(p,E){this.nativeElement.isRendered?this.nativeElement.occurrenceBefore(p,E):this.nativeElement.whenRendered(()=>{this.nativeElement.occurrenceBefore(p,E)})}getCellDateRange(p){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(N=>{this.nativeElement.whenRendered(()=>{const U=this.nativeElement.getCellDateRange(p);N(U)})}))()})}openEventTooltip(p){this.nativeElement.isRendered?this.nativeElement.openEventTooltip(p):this.nativeElement.whenRendered(()=>{this.nativeElement.openEventTooltip(p)})}closeEventTooltip(){this.nativeElement.isRendered?this.nativeElement.closeEventTooltip():this.nativeElement.whenRendered(()=>{this.nativeElement.closeEventTooltip()})}isDateRestricted(p){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(N=>{this.nativeElement.whenRendered(()=>{const U=this.nativeElement.isDateRestricted(p);N(U)})}))()})}isHourRestricted(p){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(N=>{this.nativeElement.whenRendered(()=>{const U=this.nativeElement.isHourRestricted(p);N(U)})}))()})}isEventRestricted(p){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(N=>{this.nativeElement.whenRendered(()=>{const U=this.nativeElement.isEventRestricted(p);N(U)})}))()})}deleteUndoRedoHistory(){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise($=>{this.nativeElement.whenRendered(()=>{const N=this.nativeElement.deleteUndoRedoHistory();$(N)})}))()})}canRedo(){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise($=>{this.nativeElement.whenRendered(()=>{const N=this.nativeElement.canRedo();$(N)})}))()})}canUndo(){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise($=>{this.nativeElement.whenRendered(()=>{const N=this.nativeElement.canUndo();$(N)})}))()})}redo(p){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(N=>{this.nativeElement.whenRendered(()=>{const U=this.nativeElement.redo(p);N(U)})}))()})}undo(p){return(0,_.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(N=>{this.nativeElement.whenRendered(()=>{const U=this.nativeElement.undo(p);N(U)})}))()})}get isRendered(){return!!this.nativeElement&&this.nativeElement.isRendered}ngOnInit(){}ngAfterViewInit(){const p=this;p.onCreate.emit(p.nativeElement),z.Render(),this.nativeElement.classList.add("smart-angular"),this.nativeElement.whenRendered(()=>{p.onReady.emit(p.nativeElement)}),this.listen()}ngOnDestroy(){this.unlisten()}ngOnChanges(p){if(this.nativeElement&&this.nativeElement.isRendered)for(const E in p)p.hasOwnProperty(E)&&(this.nativeElement[E]=p[E].currentValue)}listen(){const p=this;p.eventHandlers.beginUpdateHandler=E=>{p.onBeginUpdate.emit(E)},p.nativeElement.addEventListener("beginUpdate",p.eventHandlers.beginUpdateHandler),p.eventHandlers.endUpdateHandler=E=>{p.onEndUpdate.emit(E)},p.nativeElement.addEventListener("endUpdate",p.eventHandlers.endUpdateHandler),p.eventHandlers.changeHandler=E=>{p.onChange.emit(E)},p.nativeElement.addEventListener("change",p.eventHandlers.changeHandler),p.eventHandlers.itemChangeHandler=E=>{p.onItemChange.emit(E)},p.nativeElement.addEventListener("itemChange",p.eventHandlers.itemChangeHandler),p.eventHandlers.itemChangingHandler=E=>{p.onItemChanging.emit(E)},p.nativeElement.addEventListener("itemChanging",p.eventHandlers.itemChangingHandler),p.eventHandlers.itemClickHandler=E=>{p.onItemClick.emit(E)},p.nativeElement.addEventListener("itemClick",p.eventHandlers.itemClickHandler),p.eventHandlers.itemInsertHandler=E=>{p.onItemInsert.emit(E)},p.nativeElement.addEventListener("itemInsert",p.eventHandlers.itemInsertHandler),p.eventHandlers.itemRemoveHandler=E=>{p.onItemRemove.emit(E)},p.nativeElement.addEventListener("itemRemove",p.eventHandlers.itemRemoveHandler),p.eventHandlers.itemUpdateHandler=E=>{p.onItemUpdate.emit(E)},p.nativeElement.addEventListener("itemUpdate",p.eventHandlers.itemUpdateHandler),p.eventHandlers.viewChangeHandler=E=>{p.onViewChange.emit(E)},p.nativeElement.addEventListener("viewChange",p.eventHandlers.viewChangeHandler),p.eventHandlers.viewChangingHandler=E=>{p.onViewChanging.emit(E)},p.nativeElement.addEventListener("viewChanging",p.eventHandlers.viewChangingHandler),p.eventHandlers.eventShortcutKeyHandler=E=>{p.onEventShortcutKey.emit(E)},p.nativeElement.addEventListener("eventShortcutKey",p.eventHandlers.eventShortcutKeyHandler),p.eventHandlers.dateChangeHandler=E=>{p.onDateChange.emit(E)},p.nativeElement.addEventListener("dateChange",p.eventHandlers.dateChangeHandler),p.eventHandlers.dragStartHandler=E=>{p.onDragStart.emit(E)},p.nativeElement.addEventListener("dragStart",p.eventHandlers.dragStartHandler),p.eventHandlers.dragEndHandler=E=>{p.onDragEnd.emit(E)},p.nativeElement.addEventListener("dragEnd",p.eventHandlers.dragEndHandler),p.eventHandlers.dropoverCellHandler=E=>{p.onDropoverCell.emit(E)},p.nativeElement.addEventListener("dropoverCell",p.eventHandlers.dropoverCellHandler),p.eventHandlers.resizeStartHandler=E=>{p.onResizeStart.emit(E)},p.nativeElement.addEventListener("resizeStart",p.eventHandlers.resizeStartHandler),p.eventHandlers.resizeEndHandler=E=>{p.onResizeEnd.emit(E)},p.nativeElement.addEventListener("resizeEnd",p.eventHandlers.resizeEndHandler),p.eventHandlers.editDialogOpeningHandler=E=>{p.onEditDialogOpening.emit(E)},p.nativeElement.addEventListener("editDialogOpening",p.eventHandlers.editDialogOpeningHandler),p.eventHandlers.editDialogOpenHandler=E=>{p.onEditDialogOpen.emit(E)},p.nativeElement.addEventListener("editDialogOpen",p.eventHandlers.editDialogOpenHandler),p.eventHandlers.editDialogCloseHandler=E=>{p.onEditDialogClose.emit(E)},p.nativeElement.addEventListener("editDialogClose",p.eventHandlers.editDialogCloseHandler),p.eventHandlers.editDialogClosingHandler=E=>{p.onEditDialogClosing.emit(E)},p.nativeElement.addEventListener("editDialogClosing",p.eventHandlers.editDialogClosingHandler),p.eventHandlers.contextMenuOpeningHandler=E=>{p.onContextMenuOpening.emit(E)},p.nativeElement.addEventListener("contextMenuOpening",p.eventHandlers.contextMenuOpeningHandler),p.eventHandlers.contextMenuOpenHandler=E=>{p.onContextMenuOpen.emit(E)},p.nativeElement.addEventListener("contextMenuOpen",p.eventHandlers.contextMenuOpenHandler),p.eventHandlers.contextMenuCloseHandler=E=>{p.onContextMenuClose.emit(E)},p.nativeElement.addEventListener("contextMenuClose",p.eventHandlers.contextMenuCloseHandler),p.eventHandlers.contextMenuClosingHandler=E=>{p.onContextMenuClosing.emit(E)},p.nativeElement.addEventListener("contextMenuClosing",p.eventHandlers.contextMenuClosingHandler),p.eventHandlers.eventMenuOpeningHandler=E=>{p.onEventMenuOpening.emit(E)},p.nativeElement.addEventListener("eventMenuOpening",p.eventHandlers.eventMenuOpeningHandler),p.eventHandlers.eventMenuOpenHandler=E=>{p.onEventMenuOpen.emit(E)},p.nativeElement.addEventListener("eventMenuOpen",p.eventHandlers.eventMenuOpenHandler),p.eventHandlers.eventMenuCloseHandler=E=>{p.onEventMenuClose.emit(E)},p.nativeElement.addEventListener("eventMenuClose",p.eventHandlers.eventMenuCloseHandler),p.eventHandlers.eventMenuClosingHandler=E=>{p.onEventMenuClosing.emit(E)},p.nativeElement.addEventListener("eventMenuClosing",p.eventHandlers.eventMenuClosingHandler),p.eventHandlers.dateMenuOpenHandler=E=>{p.onDateMenuOpen.emit(E)},p.nativeElement.addEventListener("dateMenuOpen",p.eventHandlers.dateMenuOpenHandler),p.eventHandlers.dateMenuCloseHandler=E=>{p.onDateMenuClose.emit(E)},p.nativeElement.addEventListener("dateMenuClose",p.eventHandlers.dateMenuCloseHandler),p.eventHandlers.viewMenuOpenHandler=E=>{p.onViewMenuOpen.emit(E)},p.nativeElement.addEventListener("viewMenuOpen",p.eventHandlers.viewMenuOpenHandler),p.eventHandlers.viewMenuCloseHandler=E=>{p.onViewMenuClose.emit(E)},p.nativeElement.addEventListener("viewMenuClose",p.eventHandlers.viewMenuCloseHandler),p.eventHandlers.notificationOpenHandler=E=>{p.onNotificationOpen.emit(E)},p.nativeElement.addEventListener("notificationOpen",p.eventHandlers.notificationOpenHandler),p.eventHandlers.notificationCloseHandler=E=>{p.onNotificationClose.emit(E)},p.nativeElement.addEventListener("notificationClose",p.eventHandlers.notificationCloseHandler)}unlisten(){const p=this;p.eventHandlers.beginUpdateHandler&&p.nativeElement.removeEventListener("beginUpdate",p.eventHandlers.beginUpdateHandler),p.eventHandlers.endUpdateHandler&&p.nativeElement.removeEventListener("endUpdate",p.eventHandlers.endUpdateHandler),p.eventHandlers.changeHandler&&p.nativeElement.removeEventListener("change",p.eventHandlers.changeHandler),p.eventHandlers.itemChangeHandler&&p.nativeElement.removeEventListener("itemChange",p.eventHandlers.itemChangeHandler),p.eventHandlers.itemChangingHandler&&p.nativeElement.removeEventListener("itemChanging",p.eventHandlers.itemChangingHandler),p.eventHandlers.itemClickHandler&&p.nativeElement.removeEventListener("itemClick",p.eventHandlers.itemClickHandler),p.eventHandlers.itemInsertHandler&&p.nativeElement.removeEventListener("itemInsert",p.eventHandlers.itemInsertHandler),p.eventHandlers.itemRemoveHandler&&p.nativeElement.removeEventListener("itemRemove",p.eventHandlers.itemRemoveHandler),p.eventHandlers.itemUpdateHandler&&p.nativeElement.removeEventListener("itemUpdate",p.eventHandlers.itemUpdateHandler),p.eventHandlers.viewChangeHandler&&p.nativeElement.removeEventListener("viewChange",p.eventHandlers.viewChangeHandler),p.eventHandlers.viewChangingHandler&&p.nativeElement.removeEventListener("viewChanging",p.eventHandlers.viewChangingHandler),p.eventHandlers.eventShortcutKeyHandler&&p.nativeElement.removeEventListener("eventShortcutKey",p.eventHandlers.eventShortcutKeyHandler),p.eventHandlers.dateChangeHandler&&p.nativeElement.removeEventListener("dateChange",p.eventHandlers.dateChangeHandler),p.eventHandlers.dragStartHandler&&p.nativeElement.removeEventListener("dragStart",p.eventHandlers.dragStartHandler),p.eventHandlers.dragEndHandler&&p.nativeElement.removeEventListener("dragEnd",p.eventHandlers.dragEndHandler),p.eventHandlers.dropoverCellHandler&&p.nativeElement.removeEventListener("dropoverCell",p.eventHandlers.dropoverCellHandler),p.eventHandlers.resizeStartHandler&&p.nativeElement.removeEventListener("resizeStart",p.eventHandlers.resizeStartHandler),p.eventHandlers.resizeEndHandler&&p.nativeElement.removeEventListener("resizeEnd",p.eventHandlers.resizeEndHandler),p.eventHandlers.editDialogOpeningHandler&&p.nativeElement.removeEventListener("editDialogOpening",p.eventHandlers.editDialogOpeningHandler),p.eventHandlers.editDialogOpenHandler&&p.nativeElement.removeEventListener("editDialogOpen",p.eventHandlers.editDialogOpenHandler),p.eventHandlers.editDialogCloseHandler&&p.nativeElement.removeEventListener("editDialogClose",p.eventHandlers.editDialogCloseHandler),p.eventHandlers.editDialogClosingHandler&&p.nativeElement.removeEventListener("editDialogClosing",p.eventHandlers.editDialogClosingHandler),p.eventHandlers.contextMenuOpeningHandler&&p.nativeElement.removeEventListener("contextMenuOpening",p.eventHandlers.contextMenuOpeningHandler),p.eventHandlers.contextMenuOpenHandler&&p.nativeElement.removeEventListener("contextMenuOpen",p.eventHandlers.contextMenuOpenHandler),p.eventHandlers.contextMenuCloseHandler&&p.nativeElement.removeEventListener("contextMenuClose",p.eventHandlers.contextMenuCloseHandler),p.eventHandlers.contextMenuClosingHandler&&p.nativeElement.removeEventListener("contextMenuClosing",p.eventHandlers.contextMenuClosingHandler),p.eventHandlers.eventMenuOpeningHandler&&p.nativeElement.removeEventListener("eventMenuOpening",p.eventHandlers.eventMenuOpeningHandler),p.eventHandlers.eventMenuOpenHandler&&p.nativeElement.removeEventListener("eventMenuOpen",p.eventHandlers.eventMenuOpenHandler),p.eventHandlers.eventMenuCloseHandler&&p.nativeElement.removeEventListener("eventMenuClose",p.eventHandlers.eventMenuCloseHandler),p.eventHandlers.eventMenuClosingHandler&&p.nativeElement.removeEventListener("eventMenuClosing",p.eventHandlers.eventMenuClosingHandler),p.eventHandlers.dateMenuOpenHandler&&p.nativeElement.removeEventListener("dateMenuOpen",p.eventHandlers.dateMenuOpenHandler),p.eventHandlers.dateMenuCloseHandler&&p.nativeElement.removeEventListener("dateMenuClose",p.eventHandlers.dateMenuCloseHandler),p.eventHandlers.viewMenuOpenHandler&&p.nativeElement.removeEventListener("viewMenuOpen",p.eventHandlers.viewMenuOpenHandler),p.eventHandlers.viewMenuCloseHandler&&p.nativeElement.removeEventListener("viewMenuClose",p.eventHandlers.viewMenuCloseHandler),p.eventHandlers.notificationOpenHandler&&p.nativeElement.removeEventListener("notificationOpen",p.eventHandlers.notificationOpenHandler),p.eventHandlers.notificationCloseHandler&&p.nativeElement.removeEventListener("notificationClose",p.eventHandlers.notificationCloseHandler)}};M.\u0275fac=function(p){return new(p||M)(f.Y36(f.SBq))},M.\u0275dir=f.lG2({type:M,selectors:[["smart-scheduler"],["","smart-scheduler",""]],inputs:{autoScrollStep:"autoScrollStep",autoHeightAllDayCells:"autoHeightAllDayCells",available:"available",colorScheme:"colorScheme",currentTimeIndicator:"currentTimeIndicator",currentTimeIndicatorInterval:"currentTimeIndicatorInterval",contextMenuDataSource:"contextMenuDataSource",contextMenuClipboardActions:"contextMenuClipboardActions",eventTemplate:"eventTemplate",eventCollectorTemplate:"eventCollectorTemplate",eventRenderMode:"eventRenderMode",eventTooltipTemplate:"eventTooltipTemplate",cellTemplate:"cellTemplate",dateCurrent:"dateCurrent",dataExport:"dataExport",dataSource:"dataSource",dateSelectorFormatFunction:"dateSelectorFormatFunction",dayFormat:"dayFormat",disabled:"disabled",disableAutoScroll:"disableAutoScroll",disableDrag:"disableDrag",disableDrop:"disableDrop",disableResize:"disableResize",disableSelection:"disableSelection",disableWindowEditor:"disableWindowEditor",disableContextMenu:"disableContextMenu",disableEventMenu:"disableEventMenu",disableViewMenu:"disableViewMenu",disableDateMenu:"disableDateMenu",dragFeedbackFormatFunction:"dragFeedbackFormatFunction",dragOffset:"dragOffset",filter:"filter",filterable:"filterable",filterMode:"filterMode",events:"events",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",groupByDate:"groupByDate",groupOrientation:"groupOrientation",groupTemplate:"groupTemplate",groups:"groups",hourEnd:"hourEnd",hourStart:"hourStart",hourFormat:"hourFormat",headerTemplate:"headerTemplate",headerDatePosition:"headerDatePosition",headerNavigationStyle:"headerNavigationStyle",headerViewPosition:"headerViewPosition",hideAllDay:"hideAllDay",hideNonworkingWeekdays:"hideNonworkingWeekdays",hideOtherMonthDays:"hideOtherMonthDays",hideTodayButton:"hideTodayButton",hideViewMenuCheckableItems:"hideViewMenuCheckableItems",hideWeekend:"hideWeekend",legendLocation:"legendLocation",legendPosition:"legendPosition",legendLayout:"legendLayout",legendLayoutMenuBreakpoint:"legendLayoutMenuBreakpoint",mouseWheelStep:"mouseWheelStep",horizontalScrollBarVisibility:"horizontalScrollBarVisibility",locale:"locale",max:"max",maxEventsPerCell:"maxEventsPerCell",min:"min",messages:"messages",minuteFormat:"minuteFormat",monthFormat:"monthFormat",nonworkingDays:"nonworkingDays",nonworkingHours:"nonworkingHours",notificationInterval:"notificationInterval",resizeHandlesVisibility:"resizeHandlesVisibility",resizeInterval:"resizeInterval",resources:"resources",restrictedDates:"restrictedDates",restrictedHours:"restrictedHours",restricted:"restricted",rightToLeft:"rightToLeft",scrollButtonsPosition:"scrollButtonsPosition",shadeUntilCurrentTime:"shadeUntilCurrentTime",showLegend:"showLegend",sortBy:"sortBy",sortFunction:"sortFunction",sortOrder:"sortOrder",spinButtonsDelay:"spinButtonsDelay",spinButtonsInitialDelay:"spinButtonsInitialDelay",statuses:"statuses",theme:"theme",timelineHeaderFormatFunction:"timelineHeaderFormatFunction",timelineDayScale:"timelineDayScale",timeRulerTicks:"timeRulerTicks",timeZone:"timeZone",timeZones:"timeZones",tooltipDelay:"tooltipDelay",tooltipOffset:"tooltipOffset",verticalScrollBarVisibility:"verticalScrollBarVisibility",view:"view",viewType:"viewType",views:"views",viewSelectorType:"viewSelectorType",viewStartDay:"viewStartDay",weekdayFormat:"weekdayFormat",yearFormat:"yearFormat",unfocusable:"unfocusable",undoRedoSteps:"undoRedoSteps",windowCustomizationFunction:"windowCustomizationFunction"},outputs:{onBeginUpdate:"onBeginUpdate",onEndUpdate:"onEndUpdate",onChange:"onChange",onItemChange:"onItemChange",onItemChanging:"onItemChanging",onItemClick:"onItemClick",onItemInsert:"onItemInsert",onItemRemove:"onItemRemove",onItemUpdate:"onItemUpdate",onViewChange:"onViewChange",onViewChanging:"onViewChanging",onEventShortcutKey:"onEventShortcutKey",onDateChange:"onDateChange",onDragStart:"onDragStart",onDragEnd:"onDragEnd",onDropoverCell:"onDropoverCell",onResizeStart:"onResizeStart",onResizeEnd:"onResizeEnd",onEditDialogOpening:"onEditDialogOpening",onEditDialogOpen:"onEditDialogOpen",onEditDialogClose:"onEditDialogClose",onEditDialogClosing:"onEditDialogClosing",onContextMenuOpening:"onContextMenuOpening",onContextMenuOpen:"onContextMenuOpen",onContextMenuClose:"onContextMenuClose",onContextMenuClosing:"onContextMenuClosing",onEventMenuOpening:"onEventMenuOpening",onEventMenuOpen:"onEventMenuOpen",onEventMenuClose:"onEventMenuClose",onEventMenuClosing:"onEventMenuClosing",onDateMenuOpen:"onDateMenuOpen",onDateMenuClose:"onDateMenuClose",onViewMenuOpen:"onViewMenuOpen",onViewMenuClose:"onViewMenuClose",onNotificationOpen:"onNotificationOpen",onNotificationClose:"onNotificationClose"},exportAs:["smart-scheduler"],features:[f.qOj,f.TTD]}),M.ctorParameters=()=>[{type:f.SBq}],(0,_.gn)([(0,f.IIB)()],M.prototype,"autoScrollStep",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"autoHeightAllDayCells",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"available",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"colorScheme",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"currentTimeIndicator",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"currentTimeIndicatorInterval",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"contextMenuDataSource",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"contextMenuClipboardActions",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"eventTemplate",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"eventCollectorTemplate",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"eventRenderMode",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"eventTooltipTemplate",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"cellTemplate",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"dateCurrent",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"dataExport",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"dataSource",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"dateSelectorFormatFunction",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"dayFormat",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disabled",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableAutoScroll",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableDrag",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableDrop",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableResize",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableSelection",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableWindowEditor",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableContextMenu",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableEventMenu",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableViewMenu",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"disableDateMenu",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"dragFeedbackFormatFunction",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"dragOffset",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"filter",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"filterable",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"filterMode",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"events",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"firstDayOfWeek",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"footerTemplate",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"groupByDate",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"groupOrientation",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"groupTemplate",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"groups",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"hourEnd",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"hourStart",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"hourFormat",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"headerTemplate",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"headerDatePosition",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"headerNavigationStyle",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"headerViewPosition",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"hideAllDay",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"hideNonworkingWeekdays",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"hideOtherMonthDays",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"hideTodayButton",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"hideViewMenuCheckableItems",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"hideWeekend",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"legendLocation",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"legendPosition",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"legendLayout",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"legendLayoutMenuBreakpoint",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"mouseWheelStep",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"horizontalScrollBarVisibility",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"locale",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"max",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"maxEventsPerCell",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"min",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"messages",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"minuteFormat",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"monthFormat",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"nonworkingDays",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"nonworkingHours",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"notificationInterval",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"resizeHandlesVisibility",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"resizeInterval",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"resources",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"restrictedDates",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"restrictedHours",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"restricted",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"rightToLeft",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"scrollButtonsPosition",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"shadeUntilCurrentTime",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"showLegend",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"sortBy",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"sortFunction",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"sortOrder",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"spinButtonsDelay",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"spinButtonsInitialDelay",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"statuses",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"theme",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"timelineHeaderFormatFunction",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"timelineDayScale",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"timeRulerTicks",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"timeZone",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"timeZones",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"tooltipDelay",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"tooltipOffset",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"verticalScrollBarVisibility",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"view",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"viewType",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"views",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"viewSelectorType",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"viewStartDay",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"weekdayFormat",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"yearFormat",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"unfocusable",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"undoRedoSteps",null),(0,_.gn)([(0,f.IIB)()],M.prototype,"windowCustomizationFunction",null),(0,_.gn)([(0,f.r_U)()],M.prototype,"onBeginUpdate",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEndUpdate",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onChange",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onItemChange",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onItemChanging",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onItemClick",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onItemInsert",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onItemRemove",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onItemUpdate",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onViewChange",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onViewChanging",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEventShortcutKey",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onDateChange",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onDragStart",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onDragEnd",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onDropoverCell",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onResizeStart",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onResizeEnd",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEditDialogOpening",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEditDialogOpen",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEditDialogClose",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEditDialogClosing",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onContextMenuOpening",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onContextMenuOpen",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onContextMenuClose",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onContextMenuClosing",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEventMenuOpening",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEventMenuOpen",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEventMenuClose",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onEventMenuClosing",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onDateMenuOpen",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onDateMenuClose",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onViewMenuOpen",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onViewMenuClose",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onNotificationOpen",void 0),(0,_.gn)([(0,f.r_U)()],M.prototype,"onNotificationClose",void 0);let L=class{};L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=f.oAB({type:L}),L.\u0275inj=f.cJS({});var F=Oe(7495),B=Oe(2340),J=Oe(9104),Q=Oe(9751),ee=Oe(529),se=Oe(8951);class pe{constructor(p,E,$,N){this._httpClient=p,this._userService=E,this._zone=$,this._authService=N,this._apiHost=B.N.apiUrl+"/reporting/v1"}getExcel(){return this._httpClient.get(this._apiHost+"/rep/credito/pagos/excel",{responseType:"blob"})}getData(){return new Q.y(p=>{var E=new J.EventSourcePolyfill(this._apiHost+"/rep/credito/pagos",{headers:{Authorization:"Bearer "+this._authService.accessToken,"Application-corp":this._userService.userO.empresa.id}});E.onmessage=$=>{this._zone.run(()=>{p.next($)})},E.onerror=$=>{E.close(),this._zone.run(()=>{})}})}}pe.\u0275fac=function(p){return new(p||pe)(f.LFG(ee.eN),f.LFG(F.K),f.LFG(f.R0b),f.LFG(se.e))},pe.\u0275prov=f.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"root"});const fe=["scheduler"];class k{constructor(p,E,$){this.userService=p,this._pagosService=E,this._formBuilder=$,this.dataSource=this.getData(),this.currentTimeIndicator=!0,this.shadeUntilCurrentTime=!0,this.view="day",this.views=["day","week","month","timelineDay","timelineWeek","timelineMonth"],this.firstDayOfWeek=1,this.viewDate=new Date}ngOnInit(){this.paramsForm=this._formBuilder.group({fechaInicio:[""],fechaFin:[""]})}ngAfterViewInit(){}descarga(){}getData(){const p=new Date,E=p.getDate(),$=p.getFullYear(),N=p.getMonth();return[{label:"Google AdWords Strategy",dateStart:new Date($,N,E,9,0),dateEnd:new Date($,N,E,10,30),backgroundColor:"#E67C73"},{label:"New Brochures",dateStart:new Date($,N,E-1,11,30),dateEnd:new Date($,N,E-1,14,15),backgroundColor:"#8E24AA"},{label:"Brochure Design Review",dateStart:new Date($,N,E+2,13,15),dateEnd:new Date($,N,E+2,16,15),backgroundColor:"#039BE5"}]}}k.\u0275fac=function(p){return new(p||k)(f.Y36(F.K),f.Y36(pe),f.Y36(be.qu))},k.\u0275cmp=f.Xpm({type:k,selectors:[["agenda"]],viewQuery:function(p,E){if(1&p&&f.Gf(fe,5,M),2&p){let $;f.iGM($=f.CRH())&&(E.scheduler=$.first)}},decls:6,vars:5,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-auto","bg-card","dark:bg-transparent"],[1,"flex","flex-col","grid","grid-cols-10","flex","sm:flex-row","sm:items-center","sm:justify-between","py-8","md:px-8"],[1,"text-4xl","font-extrabold","tracking-tight","col-span-2"],["id","scheduler",3,"dataSource","currentTimeIndicator","shadeUntilCurrentTime","view","firstDayOfWeek"],["scheduler",""]],template:function(p,E){1&p&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2),f._uU(3," Agenda "),f.qZA()(),f._UZ(4,"smart-scheduler",3,4),f.qZA()),2&p&&(f.xp6(4),f.Q6J("dataSource",E.dataSource)("currentTimeIndicator",E.currentTimeIndicator)("shadeUntilCurrentTime",E.shadeUntilCurrentTime)("view",E.view)("firstDayOfWeek",E.firstDayOfWeek))},dependencies:[M],styles:["#watermark{display:none!important}\n"],encapsulation:2,changeDetection:0});var h=Oe(811);const g=[{path:"",component:k}];class D{}D.\u0275fac=function(p){return new(p||D)},D.\u0275mod=f.oAB({type:D}),D.\u0275inj=f.cJS({imports:[b.Bz.forChild(g),ge.ez,a.Ps,t.ot,i.lN,h.vV,n.FA,e.Yd,c.rP,u.JX,ge.ez,t.ot,a.Ps,o.ie,d.SJ,y.AV,be.UX,t.ot,i.lN,a.Ps,r.c,s.TU,l.LD,u.JX,m.p0,y.AV,L]})},1199:function(mt){typeof self<"u"&&self,mt.exports=function(){return ge={},He.m=Oe=[function(be,e,t){"use strict";t.d(e,"f",function(){return i}),t.d(e,"e",function(){return a}),t.d(e,"g",function(){return r}),t.d(e,"d",function(){return o}),t.d(e,"k",function(){return s}),t.d(e,"l",function(){return l}),t.d(e,"n",function(){return d}),t.d(e,"i",function(){return c}),t.d(e,"m",function(){return u}),t.d(e,"j",function(){return m}),t.d(e,"a",function(){return y}),t.d(e,"b",function(){return b}),t.d(e,"h",function(){return f}),t.d(e,"c",function(){return w});var n=t(2),i=function(v){return null!=v},a=function(v){return"number"==typeof v},r=function(v){return 0<=n.a.indexOf(v)},o=Array.isArray,s=function(v,S){void 0===S&&(S=v),1===arguments.length&&(S=v,v=0);for(var _=[],T=v;T<S;T++)_.push(T);return _},l=function(v,S){var _=0,T=[];if(o(v))for(;_<S;_++)T[_]=[].concat(v);else for(;_<S;_++)T[_]=v;return T},d=function(v){return o(v)?v:[v]};function c(v,S,_){void 0===_&&(_=" ");var T=String(v);return T.length>(S>>=0)?String(T):((S-=T.length)>_.length&&(_+=l(_,S/_.length)),_.slice(0,S)+String(T))}var u=function(v,S,_){var T=v.split(S);return _?T.slice(0,_).concat([T.slice(_).join(S)]):T},m=function(v,S){var _=v%S;return _*S<0?_+S:_},y=function(v,S){return{div:Math.floor(v/S),mod:m(v,S)}},b=function(v){return!i(v)||0===v.length},f=function(v){return!b(v)},w=function(v,S){return f(v)&&-1!==v.indexOf(S)}},function(be,e,t){"use strict";t.r(e);var n,i,a=t(0);(i=n=n||{}).MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],i.ONE_DAY=864e5,i.MAXYEAR=9999,i.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),i.PY_WEEKDAYS=[6,0,1,2,3,4,5],i.getYearDay=function(C){var O=new Date(C.getUTCFullYear(),C.getUTCMonth(),C.getUTCDate());return Math.ceil((O.valueOf()-new Date(C.getUTCFullYear(),0,1).valueOf())/i.ONE_DAY)+1},i.isLeapYear=function(C){return C%4==0&&C%100!=0||C%400==0},i.isDate=function(C){return C instanceof Date},i.isValidDate=function(C){return i.isDate(C)&&!isNaN(C.getTime())},i.tzOffset=function(C){return 60*C.getTimezoneOffset()*1e3},i.daysBetween=function(C,O){var R=C.getTime()-i.tzOffset(C)-(O.getTime()-i.tzOffset(O));return Math.round(R/i.ONE_DAY)},i.toOrdinal=function(C){return i.daysBetween(C,i.ORDINAL_BASE)},i.fromOrdinal=function(C){return new Date(i.ORDINAL_BASE.getTime()+C*i.ONE_DAY)},i.getMonthDays=function(C){var O=C.getUTCMonth();return 1===O&&i.isLeapYear(C.getUTCFullYear())?29:i.MONTH_DAYS[O]},i.getWeekday=function(C){return i.PY_WEEKDAYS[C.getUTCDay()]},i.monthRange=function(C,O){var R=new Date(Date.UTC(C,O,1));return[i.getWeekday(R),i.getMonthDays(R)]},i.combine=function(C,O){return O=O||C,new Date(Date.UTC(C.getUTCFullYear(),C.getUTCMonth(),C.getUTCDate(),O.getHours(),O.getMinutes(),O.getSeconds(),O.getMilliseconds()))},i.clone=function(C){return new Date(C.getTime())},i.cloneDates=function(C){for(var O=[],R=0;R<C.length;R++)O.push(i.clone(C[R]));return O},i.sort=function(C){C.sort(function(O,R){return O.getTime()-R.getTime()})},i.timeToUntilString=function(C,O){void 0===O&&(O=!0);var R=new Date(C);return[Object(a.i)(R.getUTCFullYear().toString(),4,"0"),Object(a.i)(R.getUTCMonth()+1,2,"0"),Object(a.i)(R.getUTCDate(),2,"0"),"T",Object(a.i)(R.getUTCHours(),2,"0"),Object(a.i)(R.getUTCMinutes(),2,"0"),Object(a.i)(R.getUTCSeconds(),2,"0"),O?"Z":""].join("")},i.untilStringToDate=function(C){var O=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/.exec(C);if(!O)throw new Error("Invalid UNTIL value: "+C);return new Date(Date.UTC(parseInt(O[1],10),parseInt(O[2],10)-1,parseInt(O[3],10),parseInt(O[5],10)||0,parseInt(O[6],10)||0,parseInt(O[7],10)||0))};var r=n;function o(C,O){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=C,this.args=O,"between"===C?(this.maxDate=O.inc?O.before:new Date(O.before.getTime()-1),this.minDate=O.inc?O.after:new Date(O.after.getTime()+1)):"before"===C?this.maxDate=O.inc?O.dt:new Date(O.dt.getTime()-1):"after"===C&&(this.minDate=O.inc?O.dt:new Date(O.dt.getTime()+1))}var s=(o.prototype.accept=function(C){++this.total;var O=this.minDate&&C<this.minDate,R=this.maxDate&&C>this.maxDate;if("between"===this.method){if(O)return!0;if(R)return!1}else if("before"===this.method){if(R)return!1}else if("after"===this.method)return!!O||(this.add(C),!1);return this.add(C)},o.prototype.add=function(C){return this._result.push(C),!0},o.prototype.getValue=function(){var C=this._result;switch(this.method){case"all":case"between":return C;default:return C.length?C[C.length-1]:null}},o.prototype.clone=function(){return new o(this.method,this.args)},o),l=function(C,O){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,W){R.__proto__=W}||function(R,W){for(var I in W)W.hasOwnProperty(I)&&(R[I]=W[I])})(C,O)};function d(C,O){function R(){this.constructor=C}l(C,O),C.prototype=null===O?Object.create(O):(R.prototype=O.prototype,new R)}var c,u=function(){return(u=Object.assign||function(C){for(var O,R=1,W=arguments.length;R<W;R++)for(var I in O=arguments[R])Object.prototype.hasOwnProperty.call(O,I)&&(C[I]=O[I]);return C}).apply(this,arguments)};function m(){for(var C=0,O=0,R=arguments.length;O<R;O++)C+=arguments[O].length;var W=Array(C),I=0;for(O=0;O<R;O++)for(var A=arguments[O],H=0,V=A.length;H<V;H++,I++)W[I]=A[H];return W}function y(C,O,R){var W=c.call(this,C,O)||this;return W.iterator=R,W}var b,f,w=(d(y,c=s),y.prototype.add=function(C){return!!this.iterator(C,this._result.length)&&(this._result.push(C),!0)},y);function v(C){return C<b.HOURLY}(f=b=b||{})[f.YEARLY=0]="YEARLY",f[f.MONTHLY=1]="MONTHLY",f[f.WEEKLY=2]="WEEKLY",f[f.DAILY=3]="DAILY",f[f.HOURLY=4]="HOURLY",f[f.MINUTELY=5]="MINUTELY",f[f.SECONDLY=6]="SECONDLY";var S=t(2),_=(T.prototype.getHours=function(){return this.hour},T.prototype.getMinutes=function(){return this.minute},T.prototype.getSeconds=function(){return this.second},T.prototype.getMilliseconds=function(){return this.millisecond},T.prototype.getTime=function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)+this.millisecond},T);function T(C,O,R,W){this.hour=C,this.minute=O,this.second=R,this.millisecond=W||0}var z,M=(d(L,z=_),L.fromDate=function(C){return new this(C.getUTCFullYear(),C.getUTCMonth()+1,C.getUTCDate(),C.getUTCHours(),C.getUTCMinutes(),C.getUTCSeconds(),C.valueOf()%1e3)},L.prototype.getWeekday=function(){return n.getWeekday(new Date(this.getTime()))},L.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},L.prototype.getDay=function(){return this.day},L.prototype.getMonth=function(){return this.month},L.prototype.getYear=function(){return this.year},L.prototype.addYears=function(C){this.year+=C},L.prototype.addMonths=function(C){if(this.month+=C,12<this.month){var O=Math.floor(this.month/12),R=Object(a.j)(this.month,12);this.month=R,this.year+=O,0===this.month&&(this.month=12,--this.year)}},L.prototype.addWeekly=function(C,O){O>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-O))+7*C:this.day+=-(this.getWeekday()-O)+7*C,this.fixDay()},L.prototype.addDaily=function(C){this.day+=C,this.fixDay()},L.prototype.addHours=function(C,O,R){for(O&&(this.hour+=Math.floor((23-this.hour)/C)*C);;){this.hour+=C;var W=Object(a.a)(this.hour,24),I=W.div;if(I&&(this.hour=W.mod,this.addDaily(I)),Object(a.b)(R)||Object(a.c)(R,this.hour))break}},L.prototype.addMinutes=function(C,O,R,W){for(O&&(this.minute+=Math.floor((1439-(60*this.hour+this.minute))/C)*C);;){this.minute+=C;var I=Object(a.a)(this.minute,60),A=I.div;if(A&&(this.minute=I.mod,this.addHours(A,!1,R)),(Object(a.b)(R)||Object(a.c)(R,this.hour))&&(Object(a.b)(W)||Object(a.c)(W,this.minute)))break}},L.prototype.addSeconds=function(C,O,R,W,I){for(O&&(this.second+=Math.floor((86399-(3600*this.hour+60*this.minute+this.second))/C)*C);;){this.second+=C;var A=Object(a.a)(this.second,60),H=A.div;if(H&&(this.second=A.mod,this.addMinutes(H,!1,R,W)),(Object(a.b)(R)||Object(a.c)(R,this.hour))&&(Object(a.b)(W)||Object(a.c)(W,this.minute))&&(Object(a.b)(I)||Object(a.c)(I,this.second)))break}},L.prototype.fixDay=function(){if(!(this.day<=28)){var C=n.monthRange(this.year,this.month-1)[1];if(!(this.day<=C))for(;this.day>C;){if(this.day-=C,++this.month,13===this.month&&(this.month=1,++this.year,this.year>n.MAXYEAR))return;C=n.monthRange(this.year,this.month-1)[1]}}},L.prototype.add=function(C,O){var W=C.interval,I=C.wkst,A=C.byhour,H=C.byminute,V=C.bysecond;switch(C.freq){case b.YEARLY:return this.addYears(W);case b.MONTHLY:return this.addMonths(W);case b.WEEKLY:return this.addWeekly(W,I);case b.DAILY:return this.addDaily(W);case b.HOURLY:return this.addHours(W,O,A);case b.MINUTELY:return this.addMinutes(W,O,A,H);case b.SECONDLY:return this.addSeconds(W,O,A,H,V)}},L);function L(C,O,R,W,I,A,H){var V=z.call(this,W,I,A,H)||this;return V.year=C,V.month=O,V.day=R,V}function F(C){for(var O=[],R=0,W=Object.keys(C);R<W.length;R++){var I=W[R];Object(a.c)(Je,I)||O.push(I),r.isDate(C[I])&&!r.isValidDate(C[I])&&O.push(I)}if(O.length)throw new Error("Invalid options: "+O.join(", "));return u({},C)}function B(C){var O=C.split("\n").map(Q).filter(function(R){return null!==R});return u(u({},O[0]),O[1])}function J(C){var O={},R=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(C);if(!R)return O;var W=R[1],I=R[2];return W&&(O.tzid=W),O.dtstart=r.untilStringToDate(I),O}function Q(C){if(!(C=C.replace(/^\s+|\s+$/,"")).length)return null;var O=/^([A-Z]+?)[:;]/.exec(C.toUpperCase());if(!O)return ee(C);var R=O[1];switch(R.toUpperCase()){case"RRULE":case"EXRULE":return ee(C);case"DTSTART":return J(C);default:throw new Error("Unsupported RFC prop "+R+" in "+C)}}function ee(C){var O=J(C.replace(/^RRULE:/i,""));return C.replace(/^(?:RRULE|EXRULE):/i,"").split(";").forEach(function(R){var W,I=R.split("="),A=I[0],H=I[1];switch(A.toUpperCase()){case"FREQ":O.freq=b[H.toUpperCase()];break;case"WKST":O.wkst=Ae[H.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var V=-1===(W=H).indexOf(",")?se(W):W.split(",").map(se),j=A.toLowerCase();O[j]=V;break;case"BYWEEKDAY":case"BYDAY":O.byweekday=H.split(",").map(function(Y){if(2===Y.length)return Ae[Y];var Z=Y.match(/^([+-]?\d{1,2})([A-Z]{2})$/),G=Number(Z[1]);return new S.b(Ae[Z[2]].weekday,G)});break;case"DTSTART":case"TZID":var P=J(C);O.tzid=P.tzid,O.dtstart=P.dtstart;break;case"UNTIL":O.until=r.untilStringToDate(H);break;case"BYEASTER":O.byeaster=Number(H);break;default:throw new Error("Unknown RRULE property '"+A+"'")}}),O}function se(C){return/^[+-]?\d+$/.test(C)?Number(C):C}var fe=(Object.defineProperty(k.prototype,"isUTC",{get:function(){return!this.tzid||"UTC"===this.tzid.toUpperCase()},enumerable:!0,configurable:!0}),k.prototype.toString=function(){var C=r.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+C:";TZID="+this.tzid+":"+C},k.prototype.getTime=function(){return this.date.getTime()},k.prototype.rezonedDate=function(){if(this.isUTC)return this.date;try{return function(){throw new TypeError}().setZone(this.tzid,{keepLocalTime:!0}).toJSDate()}catch(C){return C instanceof TypeError&&console.error("Using TZID without Luxon available is unsupported. Returned times are in UTC, not the requested time zone"),this.date}},k);function k(C,O){this.date=C,this.tzid=O}function h(C){for(var O=[],R="",W=Object.keys(C),I=Object.keys(Qe),A=0;A<W.length;A++)if("tzid"!==W[A]&&Object(a.c)(I,W[A])){var H=W[A].toUpperCase(),V=C[W[A]],j="";if(Object(a.f)(V)&&(!Object(a.d)(V)||V.length)){switch(H){case"FREQ":j=Ce.FREQUENCIES[C.freq];break;case"WKST":j=Object(a.e)(V)?new S.b(V).toString():V.toString();break;case"BYWEEKDAY":H="BYDAY",j=Object(a.n)(V).map(function(q){return q instanceof S.b?q:Object(a.d)(q)?new S.b(q[0],q[1]):new S.b(q)}).toString();break;case"DTSTART":R=g(V,C.tzid);break;case"UNTIL":j=r.timeToUntilString(V,!C.tzid);break;default:if(Object(a.d)(V)){for(var P=[],Y=0;Y<V.length;Y++)P[Y]=String(V[Y]);j=P.toString()}else j=String(V)}j&&O.push([H,j])}}var Z=O.map(function(q){return q[0]+"="+q[1].toString()}).join(";"),G="";return""!==Z&&(G="RRULE:"+Z),[R,G].filter(function(q){return!!q}).join("\n")}function g(C,O){return C?"DTSTART"+new fe(new Date(C),O).toString():""}var D=(x.prototype._cacheAdd=function(C,O,R){O=O&&(O instanceof Date?r.clone(O):r.cloneDates(O)),"all"===C?this.all=O:(R._value=O,this[C].push(R))},x.prototype._cacheGet=function(C,O){function R(P){for(var Y=0;Y<I.length;Y++){var Z=I[Y];if(String(O[Z])!==String(P[Z]))return!0}return!1}var W=!1,I=O?Object.keys(O):[],A=this[C];if("all"===C)W=this.all;else if(Object(a.d)(A))for(var H=0;H<A.length;H++){var V=A[H];if(!I.length||!R(V)){W=V._value;break}}if(!W&&this.all){var j=new s(C,O);for(H=0;H<this.all.length&&j.accept(this.all[H]);H++);W=j.getValue(),this._cacheAdd(C,W,O)}return Object(a.d)(W)?r.cloneDates(W):W instanceof Date?r.clone(W):W},x);function x(){this.all=!1,this.before=[],this.after=[],this.between=[]}var p=m(Object(a.l)(1,31),Object(a.l)(2,28),Object(a.l)(3,31),Object(a.l)(4,30),Object(a.l)(5,31),Object(a.l)(6,30),Object(a.l)(7,31),Object(a.l)(8,31),Object(a.l)(9,30),Object(a.l)(10,31),Object(a.l)(11,30),Object(a.l)(12,31),Object(a.l)(1,7)),E=m(Object(a.l)(1,31),Object(a.l)(2,29),Object(a.l)(3,31),Object(a.l)(4,30),Object(a.l)(5,31),Object(a.l)(6,30),Object(a.l)(7,31),Object(a.l)(8,31),Object(a.l)(9,30),Object(a.l)(10,31),Object(a.l)(11,30),Object(a.l)(12,31),Object(a.l)(1,7)),$=Object(a.k)(1,29),N=Object(a.k)(1,30),U=Object(a.k)(1,31),K=Object(a.k)(1,32),ne=m(K,N,K,U,K,U,K,K,U,K,U,K,K.slice(0,7)),te=m(K,$,K,U,K,U,K,K,U,K,U,K,K.slice(0,7)),ie=Object(a.k)(-28,0),ve=Object(a.k)(-29,0),ce=Object(a.k)(-30,0),he=Object(a.k)(-31,0),xe=m(he,ve,he,ce,he,ce,he,he,ce,he,ce,he,he.slice(0,7)),Ie=m(he,ie,he,ce,he,ce,he,he,ce,he,ce,he,he.slice(0,7)),Ne=[0,31,60,91,121,152,182,213,244,274,305,335,366],we=[0,31,59,90,120,151,181,212,243,273,304,334,365],Se=function(){for(var C=[],O=0;O<55;O++)C=C.concat(Object(a.k)(7));return C}();function De(C){this.options=C}var ze=(De.prototype.rebuild=function(C,O){var R=this.options;if(C!==this.lastyear&&(this.yearinfo=function _e(C,O){var R,W,I,A,H,V,j=new Date(Date.UTC(C,0,1)),P=r.isLeapYear(C)?366:365,Y=r.isLeapYear(C+1)?366:365,Z=r.toOrdinal(j),G=r.getWeekday(j),q=u(u({yearlen:P,nextyearlen:Y,yearordinal:Z,yearweekday:G},(W=r.isLeapYear(R=C)?366:365,I=new Date(Date.UTC(R,0,1)),A=r.getWeekday(I),365!=W?{mmask:E,mdaymask:ne,nmdaymask:xe,wdaymask:Se.slice(A),mrange:Ne}:{mmask:p,mdaymask:te,nmdaymask:Ie,wdaymask:Se.slice(A),mrange:we})),{wnomask:null});if(Object(a.b)(O.byweekno))return q;q.wnomask=Object(a.l)(0,7+P);var X=H=Object(a.j)(7-G+O.wkst,7);V=4<=X?(X=0,q.yearlen+Object(a.j)(G-O.wkst,7)):P-X;for(var oe=Math.floor(V/7),de=Object(a.j)(V,7),ae=Math.floor(oe+de/4),re=0;re<O.byweekno.length;re++){var le=O.byweekno[re];if(le<0&&(le+=ae+1),0<le&&le<=ae){var ue=void 0;1<le?(ue=X+7*(le-1),X!==H&&(ue-=7-H)):ue=X;for(var Me=0;Me<7&&(q.wnomask[ue]=1,ue++,q.wdaymask[ue]!==O.wkst);Me++);}}if(Object(a.c)(O.byweekno,1)&&(ue=X+7*ae,X!==H&&(ue-=7-H),ue<P))for(re=0;re<7&&(ue+=q.wnomask[ue]=1,q.wdaymask[ue]!==O.wkst);re++);if(X){var Ee=void 0;if(Object(a.c)(O.byweekno,-1))Ee=-1;else{var Re,ke=r.getWeekday(new Date(Date.UTC(C-1,0,1))),Le=Object(a.j)(7-ke.valueOf()+O.wkst,7),Te=r.isLeapYear(C-1)?366:365;Re=4<=Le?(Le=0,Te+Object(a.j)(ke-O.wkst,7)):P-X,Ee=Math.floor(52+Object(a.j)(Re,7)/4)}if(Object(a.c)(O.byweekno,Ee))for(ue=0;ue<X;ue++)q.wnomask[ue]=1}return q}(C,R)),Object(a.h)(R.bynweekday)&&(O!==this.lastmonth||C!==this.lastyear)){var W=this.yearinfo;this.monthinfo=function(V,j,P,Y,Z,G){var q={lastyear:V,lastmonth:j,nwdaymask:[]},X=[];if(G.freq===Ce.YEARLY)if(Object(a.b)(G.bymonth))X=[[0,P]];else for(var oe=0;oe<G.bymonth.length;oe++)X.push(Y.slice((j=G.bymonth[oe])-1,j+1));else G.freq===Ce.MONTHLY&&(X=[Y.slice(j-1,j+1)]);if(Object(a.b)(X))return q;for(q.nwdaymask=Object(a.l)(0,P),oe=0;oe<X.length;oe++)for(var de=X[oe],ae=de[0],re=de[1]-1,le=0;le<G.bynweekday.length;le++){var ue=void 0,Me=G.bynweekday[le],Ee=Me[0],ke=Me[1];ke<0?(ue=re+7*(ke+1),ue-=Object(a.j)(Z[ue]-Ee,7)):(ue=ae+7*(ke-1),ue+=Object(a.j)(7-Z[ue]+Ee,7)),ae<=ue&&ue<=re&&(q.nwdaymask[ue]=1)}return q}(C,O,W.yearlen,W.mrange,W.wdaymask,R)}Object(a.f)(R.byeaster)&&(this.eastermask=function(V,j){void 0===j&&(j=0);var P=V%19,Y=Math.floor(V/100),Z=V%100,G=Math.floor(Y/4),q=Y%4,X=Math.floor((Y+8)/25),oe=Math.floor((Y-X+1)/3),de=Math.floor(19*P+Y-G-oe+15)%30,ae=Math.floor(Z/4),le=Math.floor(32+2*q+2*ae-de-Z%4)%7,ue=Math.floor((P+11*de+22*le)/451),Me=Math.floor((de+le-7*ue+114)/31),ke=Date.UTC(V,Me-1,(de+le-7*ue+114)%31+1+j),Le=Date.UTC(V,0,1);return[Math.ceil((ke-Le)/864e5)]}(C,R.byeaster))},Object.defineProperty(De.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),De.prototype.ydayset=function(){return[Object(a.k)(this.yearlen),0,this.yearlen]},De.prototype.mdayset=function(C,O,R){for(var W=this.mrange[O-1],I=this.mrange[O],A=Object(a.l)(null,this.yearlen),H=W;H<I;H++)A[H]=H;return[A,W,I]},De.prototype.wdayset=function(C,O,R){for(var W=Object(a.l)(null,this.yearlen+7),I=r.toOrdinal(new Date(Date.UTC(C,O-1,R)))-this.yearordinal,A=I,H=0;H<7&&(W[I]=I,++I,this.wdaymask[I]!==this.options.wkst);H++);return[W,A,I]},De.prototype.ddayset=function(C,O,R){var W=Object(a.l)(null,this.yearlen),I=r.toOrdinal(new Date(Date.UTC(C,O-1,R)))-this.yearordinal;return W[I]=I,[W,I,1+I]},De.prototype.htimeset=function(C,O,R,W){var I=this,A=[];return this.options.byminute.forEach(function(H){A=A.concat(I.mtimeset(C,H,R,W))}),r.sort(A),A},De.prototype.mtimeset=function(C,O,R,W){var I=this.options.bysecond.map(function(A){return new _(C,O,A,W)});return r.sort(I),I},De.prototype.stimeset=function(C,O,R,W){return[new _(C,O,R,W)]},De.prototype.getdayset=function(C){switch(C){case b.YEARLY:return this.ydayset.bind(this);case b.MONTHLY:return this.mdayset.bind(this);case b.WEEKLY:return this.wdayset.bind(this);default:return this.ddayset.bind(this)}},De.prototype.gettimeset=function(C){switch(C){case b.HOURLY:return this.htimeset.bind(this);case b.MINUTELY:return this.mtimeset.bind(this);case b.SECONDLY:return this.stimeset.bind(this)}},De);function We(C,O,R,W,I,A){for(var H=[],V=0;V<C.length;V++){var P,j=void 0,Y=C[V];P=Y<0?(j=Math.floor(Y/O.length),Object(a.j)(Y,O.length)):(j=Math.floor((Y-1)/O.length),Object(a.j)(Y-1,O.length));for(var Z=[],G=R;G<W;G++){var q=A[G];Object(a.f)(q)&&Z.push(q)}var X;X=j<0?Z.slice(j)[0]:Z[j];var oe=O[P],de=r.fromOrdinal(I.yearordinal+X),ae=r.combine(de,oe);Object(a.c)(H,ae)||H.push(ae)}return r.sort(H),H}function Ue(C,O){var R=O.dtstart,W=O.freq,A=O.until,H=O.bysetpos,V=O.count;if(0===V||0===O.interval)return me(C);var Le,Te,Re,Ve,qe,Xe,Ze,j=M.fromDate(R),P=new ze(O);P.rebuild(j.year,j.month);for(var Y=(Le=P,Te=j,void 0,void 0,void 0,void 0,qe=(Re=O).byhour,Xe=Re.byminute,Ze=Re.bysecond,v(Ve=Re.freq)?function(je){var it=je.dtstart.getTime()%1e3;if(!v(je.freq))return[];var dt=[];return je.byhour.forEach(function(ct){je.byminute.forEach(function(ut){je.bysecond.forEach(function(at){dt.push(new _(ct,ut,at,it))})})}),dt}(Re):Ve>=Ce.HOURLY&&Object(a.h)(qe)&&!Object(a.c)(qe,Te.hour)||Ve>=Ce.MINUTELY&&Object(a.h)(Xe)&&!Object(a.c)(Xe,Te.minute)||Ve>=Ce.SECONDLY&&Object(a.h)(Ze)&&!Object(a.c)(Ze,Te.second)?[]:Le.gettimeset(Ve)(Te.hour,Te.minute,Te.second,Te.millisecond));;){var Z=P.getdayset(W)(j.year,j.month,j.day),G=Z[0],q=Z[1],X=Z[2],oe=Ke(G,q,X,P,O);if(Object(a.h)(H))for(var de=We(H,Y,q,X,P,G),ae=0;ae<de.length;ae++){var re=de[ae];if(A&&A<re)return me(C);if(R<=re){var le=Ye(re,O);if(!C.accept(le)||V&&!--V)return me(C)}}else for(ae=q;ae<X;ae++){var ue=G[ae];if(Object(a.f)(ue))for(var Me=r.fromOrdinal(P.yearordinal+ue),Ee=0;Ee<Y.length;Ee++)if(re=r.combine(Me,Y[Ee]),A&&A<re||R<=re&&(le=Ye(re,O),!C.accept(le)||V&&!--V))return me(C)}if(0===O.interval||(j.add(O,oe),j.year>r.MAXYEAR))return me(C);v(W)||(Y=P.gettimeset(W)(j.hour,j.minute,j.second,0)),P.rebuild(j.year,j.month)}}function Ye(C,O){return new fe(C,O.tzid).rezonedDate()}function me(C){return C.getValue()}function Ke(C,O,R,W,I){for(var A,H,V,j,P,Y,Z,G,q,X,oe=!1,de=O;de<R;de++){var ae=C[de];A=W,H=ae,j=(V=I).bymonth,P=V.byweekno,Y=V.byweekday,Z=V.byeaster,G=V.bymonthday,q=V.bynmonthday,X=V.byyearday,(oe=Object(a.h)(j)&&!Object(a.c)(j,A.mmask[H])||Object(a.h)(P)&&!A.wnomask[H]||Object(a.h)(Y)&&!Object(a.c)(Y,A.wdaymask[H])||Object(a.h)(A.nwdaymask)&&!A.nwdaymask[H]||null!==Z&&!Object(a.c)(A.eastermask,H)||(Object(a.h)(G)||Object(a.h)(q))&&!Object(a.c)(G,A.mdaymask[H])&&!Object(a.c)(q,A.nmdaymask[H])||Object(a.h)(X)&&(H<A.yearlen&&!Object(a.c)(X,H+1)&&!Object(a.c)(X,-A.yearlen+H)||H>=A.yearlen&&!Object(a.c)(X,H+1-A.yearlen)&&!Object(a.c)(X,-A.nextyearlen+H-A.yearlen)))&&(C[ae]=null)}return oe}var Be=function(){return Be._nlp||(Be._nlp=t(3)),Be._nlp},Ae={MO:new S.b(0),TU:new S.b(1),WE:new S.b(2),TH:new S.b(3),FR:new S.b(4),SA:new S.b(5),SU:new S.b(6)},Qe={freq:b.YEARLY,dtstart:null,interval:1,wkst:Ae.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Je=Object.keys(Qe);function ye(C,O){void 0===C&&(C={}),void 0===O&&(O=!1),this._cache=O?null:new D,this.origOptions=F(C);var R=function(W){var I=u(u({},Qe),F(W));if(Object(a.f)(I.byeaster)&&(I.freq=Ce.YEARLY),!Object(a.f)(I.freq)||!Ce.FREQUENCIES[I.freq])throw new Error("Invalid frequency: "+I.freq+" "+W.freq);if(I.dtstart||(I.dtstart=new Date((new Date).setMilliseconds(0))),Object(a.f)(I.wkst)?Object(a.e)(I.wkst)||(I.wkst=I.wkst.weekday):I.wkst=Ce.MO.weekday,Object(a.f)(I.bysetpos)){Object(a.e)(I.bysetpos)&&(I.bysetpos=[I.bysetpos]);for(var A=0;A<I.bysetpos.length;A++)if(0===(j=I.bysetpos[A])||!(-366<=j&&j<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}if(!(Boolean(I.byweekno)||Object(a.h)(I.byweekno)||Object(a.h)(I.byyearday)||Boolean(I.bymonthday)||Object(a.h)(I.bymonthday)||Object(a.f)(I.byweekday)||Object(a.f)(I.byeaster)))switch(I.freq){case Ce.YEARLY:I.bymonth||(I.bymonth=I.dtstart.getUTCMonth()+1),I.bymonthday=I.dtstart.getUTCDate();break;case Ce.MONTHLY:I.bymonthday=I.dtstart.getUTCDate();break;case Ce.WEEKLY:I.byweekday=[r.getWeekday(I.dtstart)]}if(Object(a.f)(I.bymonth)&&!Object(a.d)(I.bymonth)&&(I.bymonth=[I.bymonth]),Object(a.f)(I.byyearday)&&!Object(a.d)(I.byyearday)&&Object(a.e)(I.byyearday)&&(I.byyearday=[I.byyearday]),Object(a.f)(I.bymonthday))if(Object(a.d)(I.bymonthday)){var H=[],V=[];for(A=0;A<I.bymonthday.length;A++){var j;0<(j=I.bymonthday[A])?H.push(j):j<0&&V.push(j)}I.bymonthday=H,I.bynmonthday=V}else I.bymonthday<0?(I.bynmonthday=[I.bymonthday],I.bymonthday=[]):(I.bynmonthday=[],I.bymonthday=[I.bymonthday]);else I.bymonthday=[],I.bynmonthday=[];if(Object(a.f)(I.byweekno)&&!Object(a.d)(I.byweekno)&&(I.byweekno=[I.byweekno]),Object(a.f)(I.byweekday))if(Object(a.e)(I.byweekday))I.byweekday=[I.byweekday],I.bynweekday=null;else if(Object(a.g)(I.byweekday))I.byweekday=[S.b.fromStr(I.byweekday).weekday],I.bynweekday=null;else if(I.byweekday instanceof S.b)!I.byweekday.n||I.freq>Ce.MONTHLY?(I.byweekday=[I.byweekday.weekday],I.bynweekday=null):(I.bynweekday=[[I.byweekday.weekday,I.byweekday.n]],I.byweekday=null);else{var P=[],Y=[];for(A=0;A<I.byweekday.length;A++){var Z=I.byweekday[A];Object(a.e)(Z)?P.push(Z):Object(a.g)(Z)?P.push(S.b.fromStr(Z).weekday):!Z.n||I.freq>Ce.MONTHLY?P.push(Z.weekday):Y.push([Z.weekday,Z.n])}I.byweekday=Object(a.h)(P)?P:null,I.bynweekday=Object(a.h)(Y)?Y:null}else I.bynweekday=null;return Object(a.f)(I.byhour)?Object(a.e)(I.byhour)&&(I.byhour=[I.byhour]):I.byhour=I.freq<Ce.HOURLY?[I.dtstart.getUTCHours()]:null,Object(a.f)(I.byminute)?Object(a.e)(I.byminute)&&(I.byminute=[I.byminute]):I.byminute=I.freq<Ce.MINUTELY?[I.dtstart.getUTCMinutes()]:null,Object(a.f)(I.bysecond)?Object(a.e)(I.bysecond)&&(I.bysecond=[I.bysecond]):I.bysecond=I.freq<Ce.SECONDLY?[I.dtstart.getUTCSeconds()]:null,{parsedOptions:I}}(C).parsedOptions;this.options=R}var Ge,Ce=(ye.parseText=function(C,O){return Be().parseText(C,O)},ye.fromText=function(C,O){return Be().fromText(C,O)},ye.fromString=function(C){return new ye(ye.parseString(C)||void 0)},ye.prototype._iter=function(C){return Ue(C,this.options)},ye.prototype._cacheGet=function(C,O){return!!this._cache&&this._cache._cacheGet(C,O)},ye.prototype._cacheAdd=function(C,O,R){if(this._cache)return this._cache._cacheAdd(C,O,R)},ye.prototype.all=function(C){if(C)return this._iter(new w("all",{},C));var O=this._cacheGet("all");return!1===O&&(O=this._iter(new s("all",{})),this._cacheAdd("all",O)),O},ye.prototype.between=function(C,O,R,W){if(void 0===R&&(R=!1),!r.isValidDate(C)||!r.isValidDate(O))throw new Error("Invalid date passed in to RRule.between");var I={before:O,after:C,inc:R};if(W)return this._iter(new w("between",I,W));var A=this._cacheGet("between",I);return!1===A&&(A=this._iter(new s("between",I)),this._cacheAdd("between",A,I)),A},ye.prototype.before=function(C,O){if(void 0===O&&(O=!1),!r.isValidDate(C))throw new Error("Invalid date passed in to RRule.before");var R={dt:C,inc:O},W=this._cacheGet("before",R);return!1===W&&(W=this._iter(new s("before",R)),this._cacheAdd("before",W,R)),W},ye.prototype.after=function(C,O){if(void 0===O&&(O=!1),!r.isValidDate(C))throw new Error("Invalid date passed in to RRule.after");var R={dt:C,inc:O},W=this._cacheGet("after",R);return!1===W&&(W=this._iter(new s("after",R)),this._cacheAdd("after",W,R)),W},ye.prototype.count=function(){return this.all().length},ye.prototype.toString=function(){return h(this.origOptions)},ye.prototype.toText=function(C,O,R){return Be().toText(this,C,O,R)},ye.prototype.isFullyConvertibleToText=function(){return Be().isFullyConvertible(this)},ye.prototype.clone=function(){return new ye(this.origOptions)},ye.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],ye.YEARLY=b.YEARLY,ye.MONTHLY=b.MONTHLY,ye.WEEKLY=b.WEEKLY,ye.DAILY=b.DAILY,ye.HOURLY=b.HOURLY,ye.MINUTELY=b.MINUTELY,ye.SECONDLY=b.SECONDLY,ye.MO=Ae.MO,ye.TU=Ae.TU,ye.WE=Ae.WE,ye.TH=Ae.TH,ye.FR=Ae.FR,ye.SA=Ae.SA,ye.SU=Ae.SU,ye.parseString=B,ye.optionsToString=h,ye),et={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function $e(C,O){return void 0===O&&(O={}),function(R,W){var I=function ht(C,O){var R=[],W=[],I=[],A=[],H=J(C),V=H.dtstart,j=H.tzid;return function(P,Y){if(void 0===Y&&(Y=!1),!(P=P&&P.trim()))throw new Error("Invalid empty string");if(!Y)return P.split(/\s/);for(var Z=P.split("\n"),G=0;G<Z.length;){var q=Z[G]=Z[G].replace(/\s+$/g,"");q?0<G&&" "===q[0]?(Z[G-1]+=q.slice(1),Z.splice(G,1)):G+=1:Z.splice(G,1)}return Z}(C,O.unfold).forEach(function(P){if(P){var Y=function(de){var ae=function(Me){if(-1===Me.indexOf(":"))return{name:"RRULE",value:Me};var Ee=Object(a.m)(Me,":",1);return{name:Ee[0],value:Ee[1]}}(de),le=ae.value,ue=ae.name.split(";");if(!ue)throw new Error("empty property name");return{name:ue[0].toUpperCase(),parms:ue.slice(1),value:le}}(P),Z=Y.name,G=Y.parms,q=Y.value;switch(Z.toUpperCase()){case"RRULE":if(G.length)throw new Error("unsupported RRULE parm: "+G.join(","));R.push(B(P));break;case"RDATE":var oe=/RDATE(?:;TZID=([^:=]+))?/i.exec(P)[1];oe&&!j&&(j=oe),W=W.concat(rt(q,G));break;case"EXRULE":if(G.length)throw new Error("unsupported EXRULE parm: "+G.join(","));I.push(B(q));break;case"EXDATE":A=A.concat(rt(q,G));break;case"DTSTART":break;default:throw new Error("unsupported property: "+Z)}}}),{dtstart:V,tzid:j,rrulevals:R,rdatevals:W,exrulevals:I,exdatevals:A}}(R,W),A=I.rrulevals,H=I.rdatevals,V=I.exrulevals,j=I.exdatevals,P=I.dtstart,Y=I.tzid,Z=!1===W.cache;if(W.compatible&&(W.forceset=!0,W.unfold=!0),W.forceset||1<A.length||H.length||V.length||j.length){var G=new tt(Z);return G.dtstart(P),G.tzid(Y||void 0),A.forEach(function(X){G.rrule(new Ce(Fe(X,P,Y),Z))}),H.forEach(function(X){G.rdate(X)}),V.forEach(function(X){G.exrule(new Ce(Fe(X,P,Y),Z))}),j.forEach(function(X){G.exdate(X)}),W.compatible&&W.dtstart&&G.rdate(P),G}var q=A[0]||{};return new Ce(Fe(q,q.dtstart||W.dtstart||P,q.tzid||W.tzid||Y),Z)}(C,function(R){var W=[],I=Object.keys(R),A=Object.keys(et);if(I.forEach(function(H){Object(a.c)(A,H)||W.push(H)}),W.length)throw new Error("Invalid options: "+W.join(", "));return u(u({},et),R)}(O))}function Fe(C,O,R){return u(u({},C),{dtstart:O,tzid:R})}function rt(C,O){return O.forEach(function(R){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(R))throw new Error("unsupported RDATE/EXDATE parm: "+R)}),C.split(",").map(function(R){return r.untilStringToDate(R)})}function ot(C){var O=this;return function(R){if(void 0!==R&&(O["_"+C]=R),void 0!==O["_"+C])return O["_"+C];for(var W=0;W<O._rrule.length;W++){var I=O._rrule[W].origOptions[C];if(I)return I}}}function Pe(C){void 0===C&&(C=!1);var O=Ge.call(this,{},C)||this;return O.dtstart=ot.apply(O,["dtstart"]),O.tzid=ot.apply(O,["tzid"]),O._rrule=[],O._rdate=[],O._exrule=[],O._exdate=[],O}var tt=(d(Pe,Ge=Ce),Pe.prototype._iter=function(C){return function(O,R,W,I,A,H){var V={},j=O.accept;function P(q,X){W.forEach(function(oe){oe.between(q,X,!0).forEach(function(de){V[Number(de)]=!0})})}A.forEach(function(q){var X=new fe(q,H).rezonedDate();V[Number(X)]=!0}),O.accept=function(q){var X=Number(q);return isNaN(X)?j.call(this,q):!(!V[X]&&(P(new Date(X-1),new Date(X+1)),!V[X]))||(V[X]=!0,j.call(this,q))},"between"===O.method&&(P(O.args.after,O.args.before),O.accept=function(q){var X=Number(q);return!!V[X]||(V[X]=!0,j.call(this,q))});for(var Y=0;Y<I.length;Y++){var Z=new fe(I[Y],H).rezonedDate();if(!O.accept(new Date(Z.getTime())))break}R.forEach(function(q){Ue(O,q.options)});var G=O._result;switch(r.sort(G),O.method){case"all":case"between":return G;case"before":return G.length&&G[G.length-1]||null;default:return G.length&&G[0]||null}}(C,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},Pe.prototype.rrule=function(C){nt(C,this._rrule)},Pe.prototype.exrule=function(C){nt(C,this._exrule)},Pe.prototype.rdate=function(C){st(C,this._rdate)},Pe.prototype.exdate=function(C){st(C,this._exdate)},Pe.prototype.rrules=function(){return this._rrule.map(function(C){return $e(C.toString())})},Pe.prototype.exrules=function(){return this._exrule.map(function(C){return $e(C.toString())})},Pe.prototype.rdates=function(){return this._rdate.map(function(C){return new Date(C.getTime())})},Pe.prototype.exdates=function(){return this._exdate.map(function(C){return new Date(C.getTime())})},Pe.prototype.valueOf=function(){var C=[];return!this._rrule.length&&this._dtstart&&(C=C.concat(h({dtstart:this._dtstart}))),this._rrule.forEach(function(O){C=C.concat(O.toString().split("\n"))}),this._exrule.forEach(function(O){C=C.concat(O.toString().split("\n").map(function(R){return R.replace(/^RRULE:/,"EXRULE:")}).filter(function(R){return!/^DTSTART/.test(R)}))}),this._rdate.length&&C.push(lt("RDATE",this._rdate,this.tzid())),this._exdate.length&&C.push(lt("EXDATE",this._exdate,this.tzid())),C},Pe.prototype.toString=function(){return this.valueOf().join("\n")},Pe.prototype.clone=function(){var C=new Pe(!!this._cache);return this._rrule.forEach(function(O){return C.rrule(O.clone())}),this._exrule.forEach(function(O){return C.exrule(O.clone())}),this._rdate.forEach(function(O){return C.rdate(new Date(O.getTime()))}),this._exdate.forEach(function(O){return C.exdate(new Date(O.getTime()))}),C},Pe);function nt(C,O){if(!(C instanceof Ce))throw new TypeError(String(C)+" is not RRule instance");Object(a.c)(O.map(String),String(C))||O.push(C)}function st(C,O){if(!(C instanceof Date))throw new TypeError(String(C)+" is not Date instance");Object(a.c)(O.map(Number),Number(C))||(O.push(C),r.sort(O))}function lt(C,O,R){var W=!R||"UTC"===R.toUpperCase();return(W?C+":":C+";TZID="+R+":")+O.map(function(I){return r.timeToUntilString(I.valueOf(),W)}).join(",")}t.d(e,"rrulestr",function(){return $e}),t.d(e,"Frequency",function(){return b}),t.d(e,"Weekday",function(){return S.b}),t.d(e,"RRule",function(){return Ce}),t.d(e,"RRuleSet",function(){return tt}),e.default=Ce},function(be,e,t){"use strict";t.d(e,"a",function(){return n}),t.d(e,"b",function(){return i});var n=["MO","TU","WE","TH","FR","SA","SU"],i=(a.fromStr=function(r){return new a(n.indexOf(r))},a.prototype.nth=function(r){return this.n===r?this:new a(this.weekday,r)},a.prototype.equals=function(r){return this.weekday===r.weekday&&this.n===r.n},a.prototype.toString=function(){var r=n[this.weekday];return this.n&&(r=(0<this.n?"+":"")+String(this.n)+r),r},a.prototype.getJsWeekday=function(){return 6===this.weekday?0:this.weekday+1},a);function a(r,o){if(0===o)throw new Error("Can't create weekday with n == 0");this.weekday=r,this.n=o}},function(be,e,t){"use strict";function n(v,S){return-1!==v.indexOf(S)}function i(v){return v.toString()}function a(v,S,_){return S+" "+_+", "+v}t.r(e);var r={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},o=t(1),s=t(0);function l(v,S,_,T){if(void 0===S&&(S=i),void 0===_&&(_=r),void 0===T&&(T=a),this.text=[],this.language=_||r,this.gettext=S,this.dateFormatter=T,this.rrule=v,this.options=v.options,this.origOptions=v.origOptions,this.origOptions.bymonthday){var z=[].concat(this.options.bymonthday),M=[].concat(this.options.bynmonthday);z.sort(function(J,Q){return J-Q}),M.sort(function(J,Q){return Q-J}),this.bymonthday=z.concat(M),this.bymonthday.length||(this.bymonthday=null)}if(Object(s.f)(this.origOptions.byweekday)){var L=Object(s.d)(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],F=String(L);this.byweekday={allWeeks:L.filter(function(J){return!J.n}),someWeeks:L.filter(function(J){return Boolean(J.n)}),isWeekdays:-1!==F.indexOf("MO")&&-1!==F.indexOf("TU")&&-1!==F.indexOf("WE")&&-1!==F.indexOf("TH")&&-1!==F.indexOf("FR")&&-1===F.indexOf("SA")&&-1===F.indexOf("SU"),isEveryDay:-1!==F.indexOf("MO")&&-1!==F.indexOf("TU")&&-1!==F.indexOf("WE")&&-1!==F.indexOf("TH")&&-1!==F.indexOf("FR")&&-1!==F.indexOf("SA")&&-1!==F.indexOf("SU")};var B=function(J,Q){return J.weekday-Q.weekday};this.byweekday.allWeeks.sort(B),this.byweekday.someWeeks.sort(B),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}var d=(l.isFullyConvertible=function(v){if(!(v.options.freq in l.IMPLEMENTED)||v.origOptions.until&&v.origOptions.count)return!1;for(var S in v.origOptions){if(n(["dtstart","wkst","freq"],S))return!0;if(!n(l.IMPLEMENTED[v.options.freq],S))return!1}return!0},l.prototype.isFullyConvertible=function(){return l.isFullyConvertible(this.rrule)},l.prototype.toString=function(){var v=this.gettext;if(!(this.options.freq in l.IMPLEMENTED))return v("RRule error: Unable to fully convert this rrule to text");if(this.text=[v("every")],this[o.default.FREQUENCIES[this.options.freq]](),this.options.until){this.add(v("until"));var S=this.options.until;this.add(this.dateFormatter(S.getUTCFullYear(),this.language.monthNames[S.getUTCMonth()],S.getUTCDate()))}else this.options.count&&this.add(v("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?v("times"):v("time"));return this.isFullyConvertible()||this.add(v("(~ approximate)")),this.text.join("")},l.prototype.HOURLY=function(){var v=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?v("hours"):v("hour"))},l.prototype.MINUTELY=function(){var v=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?v("minutes"):v("minute"))},l.prototype.DAILY=function(){var v=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.byweekday&&this.byweekday.isWeekdays?this.plural(this.options.interval)?v("weekdays"):v("weekday"):this.plural(this.options.interval)?v("days"):v("day")),this.origOptions.bymonth&&(this.add(v("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},l.prototype.WEEKLY=function(){var v=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?v("weeks"):v("week")),this.byweekday&&this.byweekday.isWeekdays?1===this.options.interval?this.add(this.plural(this.options.interval)?v("weekdays"):v("weekday")):this.add(v("on")).add(v("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?v("days"):v("day")):(1===this.options.interval&&this.add(v("week")),this.origOptions.bymonth&&(this.add(v("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},l.prototype.MONTHLY=function(){var v=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()).add(v("months")),this.plural(this.options.interval)&&this.add(v("in"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?v("months"):v("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(v("on")).add(v("weekdays")):this.byweekday&&this._byweekday()},l.prototype.YEARLY=function(){var v=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()),this.add(v("years"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?v("years"):v("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(v("on the")).add(this.list(this.options.byyearday,this.nth,v("and"))).add(v("day")),this.options.byweekno&&this.add(v("in")).add(this.plural(this.options.byweekno.length)?v("weeks"):v("week")).add(this.list(this.options.byweekno,void 0,v("and")))},l.prototype._bymonthday=function(){var v=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(v("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,v("or"))).add(v("the")).add(this.list(this.bymonthday,this.nth,v("or"))):this.add(v("on the")).add(this.list(this.bymonthday,this.nth,v("and")))},l.prototype._byweekday=function(){var v=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(v("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(v("and")),this.add(v("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,v("and"))))},l.prototype._byhour=function(){var v=this.gettext;this.add(v("at")).add(this.list(this.origOptions.byhour,void 0,v("and")))},l.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},l.prototype.nth=function(v){var S,_;v=parseInt(v.toString(),10);var T=this.gettext;if(-1===v)return T("last");switch(_=Math.abs(v)){case 1:case 21:case 31:S=_+T("st");break;case 2:case 22:S=_+T("nd");break;case 3:case 23:S=_+T("rd");break;default:S=_+T("th")}return v<0?S+" "+T("last"):S},l.prototype.monthtext=function(v){return this.language.monthNames[v-1]},l.prototype.weekdaytext=function(v){var S=Object(s.e)(v)?(v+1)%7:v.getJsWeekday();return(v.n?this.nth(v.n)+" ":"")+this.language.dayNames[S]},l.prototype.plural=function(v){return v%100!=1},l.prototype.add=function(v){return this.text.push(" "),this.text.push(v),this},l.prototype.list=function(v,S,_,T){function z(L){return S&&S.call(M,L)}void 0===T&&(T=","),Object(s.d)(v)||(v=[v]),S=S||function(L){return L.toString()};var M=this;return _?function(L,F,B){for(var J="",Q=0;Q<L.length;Q++)0!==Q&&(J+=Q===L.length-1?" "+B+" ":F+" "),J+=L[Q];return J}(v.map(z),T,_):v.map(z).join(T+" ")},l),c=(u.prototype.start=function(v){return this.text=v,this.done=!1,this.nextSymbol()},u.prototype.isDone=function(){return this.done&&null===this.symbol},u.prototype.nextSymbol=function(){var v,S;this.symbol=null,this.value=null;do{if(this.done)return!1;for(var _ in v=null,this.rules){var T=this.rules[_].exec(this.text);T&&(null===v||T[0].length>v[0].length)&&(v=T,S=_)}if(null!=v&&(this.text=this.text.substr(v[0].length),""===this.text&&(this.done=!0)),null==v)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"===S);return this.symbol=S,this.value=v,!0},u.prototype.accept=function(v){if(this.symbol!==v)return!1;if(this.value){var S=this.value;return this.nextSymbol(),S}return this.nextSymbol(),!0},u.prototype.acceptNumber=function(){return this.accept("number")},u.prototype.expect=function(v){if(this.accept(v))return!0;throw new Error("expected "+v+" but found "+this.symbol)},u);function u(v){this.done=!0,this.rules=v}function m(v,S){void 0===S&&(S=r);var _={},T=new c(S.tokens);return T.start(v)?(function(){T.expect("every");var J=T.acceptNumber();if(J&&(_.interval=parseInt(J[0],10)),T.isDone())throw new Error("Unexpected end");switch(T.symbol){case"day(s)":_.freq=o.default.DAILY,T.nextSymbol()&&(function(){if(T.accept("at"))do{var pe=T.acceptNumber();if(!pe)throw new Error("Unexpected symbol "+T.symbol+", expected hour");for(_.byhour=[parseInt(pe[0],10)];T.accept("comma");){if(!(pe=T.acceptNumber()))throw new Error("Unexpected symbol "+T.symbol+"; expected hour");_.byhour.push(parseInt(pe[0],10))}}while(T.accept("comma")||T.accept("at"))}(),B());break;case"weekday(s)":_.freq=o.default.WEEKLY,_.byweekday=[o.default.MO,o.default.TU,o.default.WE,o.default.TH,o.default.FR],T.nextSymbol(),B();break;case"week(s)":_.freq=o.default.WEEKLY,T.nextSymbol()&&(z(),B());break;case"hour(s)":_.freq=o.default.HOURLY,T.nextSymbol()&&(z(),B());break;case"minute(s)":_.freq=o.default.MINUTELY,T.nextSymbol()&&(z(),B());break;case"month(s)":_.freq=o.default.MONTHLY,T.nextSymbol()&&(z(),B());break;case"year(s)":_.freq=o.default.YEARLY,T.nextSymbol()&&(z(),B());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":_.freq=o.default.WEEKLY;var Q=T.symbol.substr(0,2).toUpperCase();if(_.byweekday=[o.default[Q]],!T.nextSymbol())return;for(;T.accept("comma");){if(T.isDone())throw new Error("Unexpected end");var ee=L();if(!ee)throw new Error("Unexpected symbol "+T.symbol+", expected weekday");_.byweekday.push(o.default[ee]),T.nextSymbol()}(function(){T.accept("on"),T.accept("the");var pe=F();if(pe)for(_.bymonthday=[pe],T.nextSymbol();T.accept("comma");){if(!(pe=F()))throw new Error("Unexpected symbol "+T.symbol+"; expected monthday");_.bymonthday.push(pe),T.nextSymbol()}})(),B();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(_.freq=o.default.YEARLY,_.bymonth=[M()],!T.nextSymbol())return;for(;T.accept("comma");){if(T.isDone())throw new Error("Unexpected end");var se=M();if(!se)throw new Error("Unexpected symbol "+T.symbol+", expected month");_.bymonth.push(se),T.nextSymbol()}z(),B();break;default:throw new Error("Unknown symbol")}}(),_):null;function z(){var J=T.accept("on"),Q=T.accept("the");if(J||Q)do{var ee=F(),se=L(),pe=M();if(ee)se?(T.nextSymbol(),_.byweekday||(_.byweekday=[]),_.byweekday.push(o.default[se].nth(ee))):(_.bymonthday||(_.bymonthday=[]),_.bymonthday.push(ee),T.accept("day(s)"));else if(se)T.nextSymbol(),_.byweekday||(_.byweekday=[]),_.byweekday.push(o.default[se]);else if("weekday(s)"===T.symbol)T.nextSymbol(),_.byweekday||(_.byweekday=[o.default.MO,o.default.TU,o.default.WE,o.default.TH,o.default.FR]);else if("week(s)"===T.symbol){T.nextSymbol();var fe=T.acceptNumber();if(!fe)throw new Error("Unexpected symbol "+T.symbol+", expected week number");for(_.byweekno=[parseInt(fe[0],10)];T.accept("comma");){if(!(fe=T.acceptNumber()))throw new Error("Unexpected symbol "+T.symbol+"; expected monthday");_.byweekno.push(parseInt(fe[0],10))}}else{if(!pe)return;T.nextSymbol(),_.bymonth||(_.bymonth=[]),_.bymonth.push(pe)}}while(T.accept("comma")||T.accept("the")||T.accept("on"))}function M(){switch(T.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function L(){switch(T.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return T.symbol.substr(0,2).toUpperCase();default:return!1}}function F(){switch(T.symbol){case"last":return T.nextSymbol(),-1;case"first":return T.nextSymbol(),1;case"second":return T.nextSymbol(),T.accept("last")?-2:2;case"third":return T.nextSymbol(),T.accept("last")?-3:3;case"nth":var J=parseInt(T.value[1],10);if(J<-366||366<J)throw new Error("Nth out of range: "+J);return T.nextSymbol(),T.accept("last")?-J:J;default:return!1}}function B(){if("until"===T.symbol){var J=Date.parse(T.text);if(!J)throw new Error("Cannot parse until date:"+T.text);_.until=new Date(J)}else T.accept("for")&&(_.count=parseInt(T.value[0],10),T.expect("number"))}}t.d(e,"fromText",function(){return y}),t.d(e,"isFullyConvertible",function(){return w}),t.d(e,"toText",function(){return f}),t.d(e,"parseText",function(){return m});var y=function(v,S){return void 0===S&&(S=r),new o.default(m(v,S)||void 0)},b=["count","until","interval","byweekday","bymonthday","bymonth"];d.IMPLEMENTED=[],d.IMPLEMENTED[o.default.HOURLY]=b,d.IMPLEMENTED[o.default.MINUTELY]=b,d.IMPLEMENTED[o.default.DAILY]=["byhour"].concat(b),d.IMPLEMENTED[o.default.WEEKLY]=b,d.IMPLEMENTED[o.default.MONTHLY]=b,d.IMPLEMENTED[o.default.YEARLY]=["byweekno","byyearday"].concat(b);var f=function(v,S,_,T){return new d(v,S,_,T).toString()},w=d.isFullyConvertible}],He.c=ge,He.d=function(be,e,t){He.o(be,e)||Object.defineProperty(be,e,{enumerable:!0,get:t})},He.r=function(be){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(be,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(be,"__esModule",{value:!0})},He.t=function(be,e){if(1&e&&(be=He(be)),8&e||4&e&&"object"==typeof be&&be&&be.__esModule)return be;var t=Object.create(null);if(He.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:be}),2&e&&"string"!=typeof be)for(var n in be)He.d(t,n,function(i){return be[i]}.bind(null,n));return t},He.n=function(be){var e=be&&be.__esModule?function(){return be.default}:function(){return be};return He.d(e,"a",e),e},He.o=function(be,e){return Object.prototype.hasOwnProperty.call(be,e)},He.p="",He(He.s=1);function He(be){if(ge[be])return ge[be].exports;var e=ge[be]={i:be,l:!1,exports:{}};return Oe[be].call(e.exports,e,e.exports,He),e.l=!0,e.exports}var Oe,ge}()},2904:function(mt){(()=>{var He={5453:function(e){typeof self<"u"&&self,e.exports=function(){return i={},t.m=n=[function(a,r,o){"use strict";o.d(r,"f",function(){return l}),o.d(r,"e",function(){return d}),o.d(r,"g",function(){return c}),o.d(r,"d",function(){return u}),o.d(r,"k",function(){return m}),o.d(r,"l",function(){return y}),o.d(r,"n",function(){return b}),o.d(r,"i",function(){return f}),o.d(r,"m",function(){return w}),o.d(r,"j",function(){return v}),o.d(r,"a",function(){return S}),o.d(r,"b",function(){return _}),o.d(r,"h",function(){return T}),o.d(r,"c",function(){return z});var s=o(2),l=function(M){return null!=M},d=function(M){return"number"==typeof M},c=function(M){return 0<=s.a.indexOf(M)},u=Array.isArray,m=function(M,L){void 0===L&&(L=M),1===arguments.length&&(L=M,M=0);for(var F=[],B=M;B<L;B++)F.push(B);return F},y=function(M,L){var F=0,B=[];if(u(M))for(;F<L;F++)B[F]=[].concat(M);else for(;F<L;F++)B[F]=M;return B},b=function(M){return u(M)?M:[M]};function f(M,L,F){void 0===F&&(F=" ");var B=String(M);return B.length>(L>>=0)?String(B):((L-=B.length)>F.length&&(F+=y(F,L/F.length)),F.slice(0,L)+String(B))}var w=function(M,L,F){var B=M.split(L);return F?B.slice(0,F).concat([B.slice(F).join(L)]):B},v=function(M,L){var F=M%L;return F*L<0?F+L:F},S=function(M,L){return{div:Math.floor(M/L),mod:v(M,L)}},_=function(M){return!l(M)||0===M.length},T=function(M){return!_(M)},z=function(M,L){return T(M)&&-1!==M.indexOf(L)}},function(a,r,o){"use strict";o.r(r);var s,l,d=o(0);(l=s=s||{}).MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],l.ONE_DAY=864e5,l.MAXYEAR=9999,l.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),l.PY_WEEKDAYS=[6,0,1,2,3,4,5],l.getYearDay=function(A){var H=new Date(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate());return Math.ceil((H.valueOf()-new Date(A.getUTCFullYear(),0,1).valueOf())/l.ONE_DAY)+1},l.isLeapYear=function(A){return A%4==0&&A%100!=0||A%400==0},l.isDate=function(A){return A instanceof Date},l.isValidDate=function(A){return l.isDate(A)&&!isNaN(A.getTime())},l.tzOffset=function(A){return 60*A.getTimezoneOffset()*1e3},l.daysBetween=function(A,H){var V=A.getTime()-l.tzOffset(A)-(H.getTime()-l.tzOffset(H));return Math.round(V/l.ONE_DAY)},l.toOrdinal=function(A){return l.daysBetween(A,l.ORDINAL_BASE)},l.fromOrdinal=function(A){return new Date(l.ORDINAL_BASE.getTime()+A*l.ONE_DAY)},l.getMonthDays=function(A){var H=A.getUTCMonth();return 1===H&&l.isLeapYear(A.getUTCFullYear())?29:l.MONTH_DAYS[H]},l.getWeekday=function(A){return l.PY_WEEKDAYS[A.getUTCDay()]},l.monthRange=function(A,H){var V=new Date(Date.UTC(A,H,1));return[l.getWeekday(V),l.getMonthDays(V)]},l.combine=function(A,H){return H=H||A,new Date(Date.UTC(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate(),H.getHours(),H.getMinutes(),H.getSeconds(),H.getMilliseconds()))},l.clone=function(A){return new Date(A.getTime())},l.cloneDates=function(A){for(var H=[],V=0;V<A.length;V++)H.push(l.clone(A[V]));return H},l.sort=function(A){A.sort(function(H,V){return H.getTime()-V.getTime()})},l.timeToUntilString=function(A,H){void 0===H&&(H=!0);var V=new Date(A);return[Object(d.i)(V.getUTCFullYear().toString(),4,"0"),Object(d.i)(V.getUTCMonth()+1,2,"0"),Object(d.i)(V.getUTCDate(),2,"0"),"T",Object(d.i)(V.getUTCHours(),2,"0"),Object(d.i)(V.getUTCMinutes(),2,"0"),Object(d.i)(V.getUTCSeconds(),2,"0"),H?"Z":""].join("")},l.untilStringToDate=function(A){var H=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/.exec(A);if(!H)throw new Error("Invalid UNTIL value: "+A);return new Date(Date.UTC(parseInt(H[1],10),parseInt(H[2],10)-1,parseInt(H[3],10),parseInt(H[5],10)||0,parseInt(H[6],10)||0,parseInt(H[7],10)||0))};var c=s;function u(A,H){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=A,this.args=H,"between"===A?(this.maxDate=H.inc?H.before:new Date(H.before.getTime()-1),this.minDate=H.inc?H.after:new Date(H.after.getTime()+1)):"before"===A?this.maxDate=H.inc?H.dt:new Date(H.dt.getTime()-1):"after"===A&&(this.minDate=H.inc?H.dt:new Date(H.dt.getTime()+1))}var m=(u.prototype.accept=function(A){++this.total;var H=this.minDate&&A<this.minDate,V=this.maxDate&&A>this.maxDate;if("between"===this.method){if(H)return!0;if(V)return!1}else if("before"===this.method){if(V)return!1}else if("after"===this.method)return!!H||(this.add(A),!1);return this.add(A)},u.prototype.add=function(A){return this._result.push(A),!0},u.prototype.getValue=function(){var A=this._result;switch(this.method){case"all":case"between":return A;default:return A.length?A[A.length-1]:null}},u.prototype.clone=function(){return new u(this.method,this.args)},u),y=function(A,H){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,j){V.__proto__=j}||function(V,j){for(var P in j)j.hasOwnProperty(P)&&(V[P]=j[P])})(A,H)};function b(A,H){function V(){this.constructor=A}y(A,H),A.prototype=null===H?Object.create(H):(V.prototype=H.prototype,new V)}var f,w=function(){return(w=Object.assign||function(A){for(var H,V=1,j=arguments.length;V<j;V++)for(var P in H=arguments[V])Object.prototype.hasOwnProperty.call(H,P)&&(A[P]=H[P]);return A}).apply(this,arguments)};function v(){for(var A=0,H=0,V=arguments.length;H<V;H++)A+=arguments[H].length;var j=Array(A),P=0;for(H=0;H<V;H++)for(var Y=arguments[H],Z=0,G=Y.length;Z<G;Z++,P++)j[P]=Y[Z];return j}function S(A,H,V){var j=f.call(this,A,H)||this;return j.iterator=V,j}var _,T,z=(b(S,f=m),S.prototype.add=function(A){return!!this.iterator(A,this._result.length)&&(this._result.push(A),!0)},S);function M(A){return A<_.HOURLY}(T=_=_||{})[T.YEARLY=0]="YEARLY",T[T.MONTHLY=1]="MONTHLY",T[T.WEEKLY=2]="WEEKLY",T[T.DAILY=3]="DAILY",T[T.HOURLY=4]="HOURLY",T[T.MINUTELY=5]="MINUTELY",T[T.SECONDLY=6]="SECONDLY";var L=o(2),F=(B.prototype.getHours=function(){return this.hour},B.prototype.getMinutes=function(){return this.minute},B.prototype.getSeconds=function(){return this.second},B.prototype.getMilliseconds=function(){return this.millisecond},B.prototype.getTime=function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)+this.millisecond},B);function B(A,H,V,j){this.hour=A,this.minute=H,this.second=V,this.millisecond=j||0}var J,Q=(b(ee,J=F),ee.fromDate=function(A){return new this(A.getUTCFullYear(),A.getUTCMonth()+1,A.getUTCDate(),A.getUTCHours(),A.getUTCMinutes(),A.getUTCSeconds(),A.valueOf()%1e3)},ee.prototype.getWeekday=function(){return s.getWeekday(new Date(this.getTime()))},ee.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},ee.prototype.getDay=function(){return this.day},ee.prototype.getMonth=function(){return this.month},ee.prototype.getYear=function(){return this.year},ee.prototype.addYears=function(A){this.year+=A},ee.prototype.addMonths=function(A){if(this.month+=A,12<this.month){var H=Math.floor(this.month/12),V=Object(d.j)(this.month,12);this.month=V,this.year+=H,0===this.month&&(this.month=12,--this.year)}},ee.prototype.addWeekly=function(A,H){H>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-H))+7*A:this.day+=-(this.getWeekday()-H)+7*A,this.fixDay()},ee.prototype.addDaily=function(A){this.day+=A,this.fixDay()},ee.prototype.addHours=function(A,H,V){for(H&&(this.hour+=Math.floor((23-this.hour)/A)*A);;){this.hour+=A;var j=Object(d.a)(this.hour,24),P=j.div;if(P&&(this.hour=j.mod,this.addDaily(P)),Object(d.b)(V)||Object(d.c)(V,this.hour))break}},ee.prototype.addMinutes=function(A,H,V,j){for(H&&(this.minute+=Math.floor((1439-(60*this.hour+this.minute))/A)*A);;){this.minute+=A;var P=Object(d.a)(this.minute,60),Y=P.div;if(Y&&(this.minute=P.mod,this.addHours(Y,!1,V)),(Object(d.b)(V)||Object(d.c)(V,this.hour))&&(Object(d.b)(j)||Object(d.c)(j,this.minute)))break}},ee.prototype.addSeconds=function(A,H,V,j,P){for(H&&(this.second+=Math.floor((86399-(3600*this.hour+60*this.minute+this.second))/A)*A);;){this.second+=A;var Y=Object(d.a)(this.second,60),Z=Y.div;if(Z&&(this.second=Y.mod,this.addMinutes(Z,!1,V,j)),(Object(d.b)(V)||Object(d.c)(V,this.hour))&&(Object(d.b)(j)||Object(d.c)(j,this.minute))&&(Object(d.b)(P)||Object(d.c)(P,this.second)))break}},ee.prototype.fixDay=function(){if(!(this.day<=28)){var A=s.monthRange(this.year,this.month-1)[1];if(!(this.day<=A))for(;this.day>A;){if(this.day-=A,++this.month,13===this.month&&(this.month=1,++this.year,this.year>s.MAXYEAR))return;A=s.monthRange(this.year,this.month-1)[1]}}},ee.prototype.add=function(A,H){var j=A.interval,P=A.wkst,Y=A.byhour,Z=A.byminute,G=A.bysecond;switch(A.freq){case _.YEARLY:return this.addYears(j);case _.MONTHLY:return this.addMonths(j);case _.WEEKLY:return this.addWeekly(j,P);case _.DAILY:return this.addDaily(j);case _.HOURLY:return this.addHours(j,H,Y);case _.MINUTELY:return this.addMinutes(j,H,Y,Z);case _.SECONDLY:return this.addSeconds(j,H,Y,Z,G)}},ee);function ee(A,H,V,j,P,Y,Z){var G=J.call(this,j,P,Y,Z)||this;return G.year=A,G.month=H,G.day=V,G}function se(A){for(var H=[],V=0,j=Object.keys(A);V<j.length;V++){var P=j[V];Object(d.c)(ht,P)||H.push(P),c.isDate(A[P])&&!c.isValidDate(A[P])&&H.push(P)}if(H.length)throw new Error("Invalid options: "+H.join(", "));return w({},A)}function pe(A){var H=A.split("\n").map(k).filter(function(V){return null!==V});return w(w({},H[0]),H[1])}function fe(A){var H={},V=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(A);if(!V)return H;var j=V[1],P=V[2];return j&&(H.tzid=j),H.dtstart=c.untilStringToDate(P),H}function k(A){if(!(A=A.replace(/^\s+|\s+$/,"")).length)return null;var H=/^([A-Z]+?)[:;]/.exec(A.toUpperCase());if(!H)return h(A);var V=H[1];switch(V.toUpperCase()){case"RRULE":case"EXRULE":return h(A);case"DTSTART":return fe(A);default:throw new Error("Unsupported RFC prop "+V+" in "+A)}}function h(A){var H=fe(A.replace(/^RRULE:/i,""));return A.replace(/^(?:RRULE|EXRULE):/i,"").split(";").forEach(function(V){var j,P=V.split("="),Y=P[0],Z=P[1];switch(Y.toUpperCase()){case"FREQ":H.freq=_[Z.toUpperCase()];break;case"WKST":H.wkst=Ge[Z.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var G=-1===(j=Z).indexOf(",")?g(j):j.split(",").map(g),q=Y.toLowerCase();H[q]=G;break;case"BYWEEKDAY":case"BYDAY":H.byweekday=Z.split(",").map(function(oe){if(2===oe.length)return Ge[oe];var de=oe.match(/^([+-]?\d{1,2})([A-Z]{2})$/),ae=Number(de[1]);return new L.b(Ge[de[2]].weekday,ae)});break;case"DTSTART":case"TZID":var X=fe(A);H.tzid=X.tzid,H.dtstart=X.dtstart;break;case"UNTIL":H.until=c.untilStringToDate(Z);break;case"BYEASTER":H.byeaster=Number(Z);break;default:throw new Error("Unknown RRULE property '"+Y+"'")}}),H}function g(A){return/^[+-]?\d+$/.test(A)?Number(A):A}var x=(Object.defineProperty(p.prototype,"isUTC",{get:function(){return!this.tzid||"UTC"===this.tzid.toUpperCase()},enumerable:!0,configurable:!0}),p.prototype.toString=function(){var A=c.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+A:";TZID="+this.tzid+":"+A},p.prototype.getTime=function(){return this.date.getTime()},p.prototype.rezonedDate=function(){if(this.isUTC)return this.date;try{return function(){throw new TypeError}().setZone(this.tzid,{keepLocalTime:!0}).toJSDate()}catch(A){return A instanceof TypeError&&console.error("Using TZID without Luxon available is unsupported. Returned times are in UTC, not the requested time zone"),this.date}},p);function p(A,H){this.date=A,this.tzid=H}function E(A){for(var H=[],V="",j=Object.keys(A),P=Object.keys(et),Y=0;Y<j.length;Y++)if("tzid"!==j[Y]&&Object(d.c)(P,j[Y])){var Z=j[Y].toUpperCase(),G=A[j[Y]],q="";if(Object(d.f)(G)&&(!Object(d.d)(G)||G.length)){switch(Z){case"FREQ":q=Fe.FREQUENCIES[A.freq];break;case"WKST":q=Object(d.e)(G)?new L.b(G).toString():G.toString();break;case"BYWEEKDAY":Z="BYDAY",q=Object(d.n)(G).map(function(re){return re instanceof L.b?re:Object(d.d)(re)?new L.b(re[0],re[1]):new L.b(re)}).toString();break;case"DTSTART":V=$(G,A.tzid);break;case"UNTIL":q=c.timeToUntilString(G,!A.tzid);break;default:if(Object(d.d)(G)){for(var X=[],oe=0;oe<G.length;oe++)X[oe]=String(G[oe]);q=X.toString()}else q=String(G)}q&&H.push([Z,q])}}var de=H.map(function(re){return re[0]+"="+re[1].toString()}).join(";"),ae="";return""!==de&&(ae="RRULE:"+de),[V,ae].filter(function(re){return!!re}).join("\n")}function $(A,H){return A?"DTSTART"+new x(new Date(A),H).toString():""}var N=(U.prototype._cacheAdd=function(A,H,V){H=H&&(H instanceof Date?c.clone(H):c.cloneDates(H)),"all"===A?this.all=H:(V._value=H,this[A].push(V))},U.prototype._cacheGet=function(A,H){function V(X){for(var oe=0;oe<P.length;oe++){var de=P[oe];if(String(H[de])!==String(X[de]))return!0}return!1}var j=!1,P=H?Object.keys(H):[],Y=this[A];if("all"===A)j=this.all;else if(Object(d.d)(Y))for(var Z=0;Z<Y.length;Z++){var G=Y[Z];if(!P.length||!V(G)){j=G._value;break}}if(!j&&this.all){var q=new m(A,H);for(Z=0;Z<this.all.length&&q.accept(this.all[Z]);Z++);j=q.getValue(),this._cacheAdd(A,j,H)}return Object(d.d)(j)?c.cloneDates(j):j instanceof Date?c.clone(j):j},U);function U(){this.all=!1,this.before=[],this.after=[],this.between=[]}var K=v(Object(d.l)(1,31),Object(d.l)(2,28),Object(d.l)(3,31),Object(d.l)(4,30),Object(d.l)(5,31),Object(d.l)(6,30),Object(d.l)(7,31),Object(d.l)(8,31),Object(d.l)(9,30),Object(d.l)(10,31),Object(d.l)(11,30),Object(d.l)(12,31),Object(d.l)(1,7)),ne=v(Object(d.l)(1,31),Object(d.l)(2,29),Object(d.l)(3,31),Object(d.l)(4,30),Object(d.l)(5,31),Object(d.l)(6,30),Object(d.l)(7,31),Object(d.l)(8,31),Object(d.l)(9,30),Object(d.l)(10,31),Object(d.l)(11,30),Object(d.l)(12,31),Object(d.l)(1,7)),te=Object(d.k)(1,29),ie=Object(d.k)(1,30),ve=Object(d.k)(1,31),ce=Object(d.k)(1,32),he=v(ce,ie,ce,ve,ce,ve,ce,ce,ve,ce,ve,ce,ce.slice(0,7)),xe=v(ce,te,ce,ve,ce,ve,ce,ce,ve,ce,ve,ce,ce.slice(0,7)),Ie=Object(d.k)(-28,0),Ne=Object(d.k)(-29,0),we=Object(d.k)(-30,0),Se=Object(d.k)(-31,0),_e=v(Se,Ne,Se,we,Se,we,Se,Se,we,Se,we,Se,Se.slice(0,7)),De=v(Se,Ie,Se,we,Se,we,Se,Se,we,Se,we,Se,Se.slice(0,7)),ze=[0,31,60,91,121,152,182,213,244,274,305,335,366],We=[0,31,59,90,120,151,181,212,243,273,304,334,365],Ue=function(){for(var A=[],H=0;H<55;H++)A=A.concat(Object(d.k)(7));return A}();function me(A){this.options=A}var Ke=(me.prototype.rebuild=function(A,H){var V=this.options;if(A!==this.lastyear&&(this.yearinfo=function Ye(A,H){var V,j,P,Y,Z,G,q=new Date(Date.UTC(A,0,1)),X=c.isLeapYear(A)?366:365,oe=c.isLeapYear(A+1)?366:365,de=c.toOrdinal(q),ae=c.getWeekday(q),re=w(w({yearlen:X,nextyearlen:oe,yearordinal:de,yearweekday:ae},(j=c.isLeapYear(V=A)?366:365,P=new Date(Date.UTC(V,0,1)),Y=c.getWeekday(P),365!=j?{mmask:ne,mdaymask:he,nmdaymask:_e,wdaymask:Ue.slice(Y),mrange:ze}:{mmask:K,mdaymask:xe,nmdaymask:De,wdaymask:Ue.slice(Y),mrange:We})),{wnomask:null});if(Object(d.b)(H.byweekno))return re;re.wnomask=Object(d.l)(0,7+X);var le=Z=Object(d.j)(7-ae+H.wkst,7);G=4<=le?(le=0,re.yearlen+Object(d.j)(ae-H.wkst,7)):X-le;for(var ue=Math.floor(G/7),Me=Object(d.j)(G,7),Ee=Math.floor(ue+Me/4),ke=0;ke<H.byweekno.length;ke++){var Le=H.byweekno[ke];if(Le<0&&(Le+=Ee+1),0<Le&&Le<=Ee){var Te=void 0;1<Le?(Te=le+7*(Le-1),le!==Z&&(Te-=7-Z)):Te=le;for(var Re=0;Re<7&&(re.wnomask[Te]=1,Te++,re.wdaymask[Te]!==H.wkst);Re++);}}if(Object(d.c)(H.byweekno,1)&&(Te=le+7*Ee,le!==Z&&(Te-=7-Z),Te<X))for(ke=0;ke<7&&(Te+=re.wnomask[Te]=1,re.wdaymask[Te]!==H.wkst);ke++);if(le){var Ve=void 0;if(Object(d.c)(H.byweekno,-1))Ve=-1;else{var je,qe=c.getWeekday(new Date(Date.UTC(A-1,0,1))),Xe=Object(d.j)(7-qe.valueOf()+H.wkst,7),Ze=c.isLeapYear(A-1)?366:365;je=4<=Xe?(Xe=0,Ze+Object(d.j)(qe-H.wkst,7)):X-le,Ve=Math.floor(52+Object(d.j)(je,7)/4)}if(Object(d.c)(H.byweekno,Ve))for(Te=0;Te<le;Te++)re.wnomask[Te]=1}return re}(A,V)),Object(d.h)(V.bynweekday)&&(H!==this.lastmonth||A!==this.lastyear)){var j=this.yearinfo;this.monthinfo=function(G,q,X,oe,de,ae){var re={lastyear:G,lastmonth:q,nwdaymask:[]},le=[];if(ae.freq===Fe.YEARLY)if(Object(d.b)(ae.bymonth))le=[[0,X]];else for(var ue=0;ue<ae.bymonth.length;ue++)le.push(oe.slice((q=ae.bymonth[ue])-1,q+1));else ae.freq===Fe.MONTHLY&&(le=[oe.slice(q-1,q+1)]);if(Object(d.b)(le))return re;for(re.nwdaymask=Object(d.l)(0,X),ue=0;ue<le.length;ue++)for(var Me=le[ue],Ee=Me[0],ke=Me[1]-1,Le=0;Le<ae.bynweekday.length;Le++){var Te=void 0,Re=ae.bynweekday[Le],Ve=Re[0],qe=Re[1];qe<0?(Te=ke+7*(qe+1),Te-=Object(d.j)(de[Te]-Ve,7)):(Te=Ee+7*(qe-1),Te+=Object(d.j)(7-de[Te]+Ve,7)),Ee<=Te&&Te<=ke&&(re.nwdaymask[Te]=1)}return re}(A,H,j.yearlen,j.mrange,j.wdaymask,V)}Object(d.f)(V.byeaster)&&(this.eastermask=function(G,q){void 0===q&&(q=0);var X=G%19,oe=Math.floor(G/100),de=G%100,ae=Math.floor(oe/4),re=oe%4,le=Math.floor((oe+8)/25),ue=Math.floor((oe-le+1)/3),Me=Math.floor(19*X+oe-ae-ue+15)%30,Ee=Math.floor(de/4),Le=Math.floor(32+2*re+2*Ee-Me-de%4)%7,Te=Math.floor((X+11*Me+22*Le)/451),Re=Math.floor((Me+Le-7*Te+114)/31),qe=Date.UTC(G,Re-1,(Me+Le-7*Te+114)%31+1+q),Xe=Date.UTC(G,0,1);return[Math.ceil((qe-Xe)/864e5)]}(A,V.byeaster))},Object.defineProperty(me.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(me.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),me.prototype.ydayset=function(){return[Object(d.k)(this.yearlen),0,this.yearlen]},me.prototype.mdayset=function(A,H,V){for(var j=this.mrange[H-1],P=this.mrange[H],Y=Object(d.l)(null,this.yearlen),Z=j;Z<P;Z++)Y[Z]=Z;return[Y,j,P]},me.prototype.wdayset=function(A,H,V){for(var j=Object(d.l)(null,this.yearlen+7),P=c.toOrdinal(new Date(Date.UTC(A,H-1,V)))-this.yearordinal,Y=P,Z=0;Z<7&&(j[P]=P,++P,this.wdaymask[P]!==this.options.wkst);Z++);return[j,Y,P]},me.prototype.ddayset=function(A,H,V){var j=Object(d.l)(null,this.yearlen),P=c.toOrdinal(new Date(Date.UTC(A,H-1,V)))-this.yearordinal;return j[P]=P,[j,P,1+P]},me.prototype.htimeset=function(A,H,V,j){var P=this,Y=[];return this.options.byminute.forEach(function(Z){Y=Y.concat(P.mtimeset(A,Z,V,j))}),c.sort(Y),Y},me.prototype.mtimeset=function(A,H,V,j){var P=this.options.bysecond.map(function(Y){return new F(A,H,Y,j)});return c.sort(P),P},me.prototype.stimeset=function(A,H,V,j){return[new F(A,H,V,j)]},me.prototype.getdayset=function(A){switch(A){case _.YEARLY:return this.ydayset.bind(this);case _.MONTHLY:return this.mdayset.bind(this);case _.WEEKLY:return this.wdayset.bind(this);default:return this.ddayset.bind(this)}},me.prototype.gettimeset=function(A){switch(A){case _.HOURLY:return this.htimeset.bind(this);case _.MINUTELY:return this.mtimeset.bind(this);case _.SECONDLY:return this.stimeset.bind(this)}},me);function Be(A,H,V,j,P,Y){for(var Z=[],G=0;G<A.length;G++){var X,q=void 0,oe=A[G];X=oe<0?(q=Math.floor(oe/H.length),Object(d.j)(oe,H.length)):(q=Math.floor((oe-1)/H.length),Object(d.j)(oe-1,H.length));for(var de=[],ae=V;ae<j;ae++){var re=Y[ae];Object(d.f)(re)&&de.push(re)}var le;le=q<0?de.slice(q)[0]:de[q];var ue=H[X],Me=c.fromOrdinal(P.yearordinal+le),Ee=c.combine(Me,ue);Object(d.c)(Z,Ee)||Z.push(Ee)}return c.sort(Z),Z}function Ae(A,H){var V=H.dtstart,j=H.freq,Y=H.until,Z=H.bysetpos,G=H.count;if(0===G||0===H.interval)return Je(A);var Xe,Ze,je,it,dt,ct,ut,q=Q.fromDate(V),X=new Ke(H);X.rebuild(q.year,q.month);for(var oe=(Xe=X,Ze=q,void 0,void 0,void 0,void 0,dt=(je=H).byhour,ct=je.byminute,ut=je.bysecond,M(it=je.freq)?function(at){var ft=at.dtstart.getTime()%1e3;if(!M(at.freq))return[];var pt=[];return at.byhour.forEach(function(gt){at.byminute.forEach(function(vt){at.bysecond.forEach(function(yt){pt.push(new F(gt,vt,yt,ft))})})}),pt}(je):it>=Fe.HOURLY&&Object(d.h)(dt)&&!Object(d.c)(dt,Ze.hour)||it>=Fe.MINUTELY&&Object(d.h)(ct)&&!Object(d.c)(ct,Ze.minute)||it>=Fe.SECONDLY&&Object(d.h)(ut)&&!Object(d.c)(ut,Ze.second)?[]:Xe.gettimeset(it)(Ze.hour,Ze.minute,Ze.second,Ze.millisecond));;){var de=X.getdayset(j)(q.year,q.month,q.day),ae=de[0],re=de[1],le=de[2],ue=ye(ae,re,le,X,H);if(Object(d.h)(Z))for(var Me=Be(Z,oe,re,le,X,ae),Ee=0;Ee<Me.length;Ee++){var ke=Me[Ee];if(Y&&Y<ke)return Je(A);if(V<=ke){var Le=Qe(ke,H);if(!A.accept(Le)||G&&!--G)return Je(A)}}else for(Ee=re;Ee<le;Ee++){var Te=ae[Ee];if(Object(d.f)(Te))for(var Re=c.fromOrdinal(X.yearordinal+Te),Ve=0;Ve<oe.length;Ve++)if(ke=c.combine(Re,oe[Ve]),Y&&Y<ke||V<=ke&&(Le=Qe(ke,H),!A.accept(Le)||G&&!--G))return Je(A)}if(0===H.interval||(q.add(H,ue),q.year>c.MAXYEAR))return Je(A);M(j)||(oe=X.gettimeset(j)(q.hour,q.minute,q.second,0)),X.rebuild(q.year,q.month)}}function Qe(A,H){return new x(A,H.tzid).rezonedDate()}function Je(A){return A.getValue()}function ye(A,H,V,j,P){for(var Y,Z,G,q,X,oe,de,ae,re,le,ue=!1,Me=H;Me<V;Me++){var Ee=A[Me];Y=j,Z=Ee,q=(G=P).bymonth,X=G.byweekno,oe=G.byweekday,de=G.byeaster,ae=G.bymonthday,re=G.bynmonthday,le=G.byyearday,(ue=Object(d.h)(q)&&!Object(d.c)(q,Y.mmask[Z])||Object(d.h)(X)&&!Y.wnomask[Z]||Object(d.h)(oe)&&!Object(d.c)(oe,Y.wdaymask[Z])||Object(d.h)(Y.nwdaymask)&&!Y.nwdaymask[Z]||null!==de&&!Object(d.c)(Y.eastermask,Z)||(Object(d.h)(ae)||Object(d.h)(re))&&!Object(d.c)(ae,Y.mdaymask[Z])&&!Object(d.c)(re,Y.nmdaymask[Z])||Object(d.h)(le)&&(Z<Y.yearlen&&!Object(d.c)(le,Z+1)&&!Object(d.c)(le,-Y.yearlen+Z)||Z>=Y.yearlen&&!Object(d.c)(le,Z+1-Y.yearlen)&&!Object(d.c)(le,-Y.nextyearlen+Z-Y.yearlen)))&&(A[Ee]=null)}return ue}var Ce=function(){return Ce._nlp||(Ce._nlp=o(3)),Ce._nlp},Ge={MO:new L.b(0),TU:new L.b(1),WE:new L.b(2),TH:new L.b(3),FR:new L.b(4),SA:new L.b(5),SU:new L.b(6)},et={freq:_.YEARLY,dtstart:null,interval:1,wkst:Ge.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},ht=Object.keys(et);function $e(A,H){void 0===A&&(A={}),void 0===H&&(H=!1),this._cache=H?null:new N,this.origOptions=se(A);var V=function(j){var P=w(w({},et),se(j));if(Object(d.f)(P.byeaster)&&(P.freq=Fe.YEARLY),!Object(d.f)(P.freq)||!Fe.FREQUENCIES[P.freq])throw new Error("Invalid frequency: "+P.freq+" "+j.freq);if(P.dtstart||(P.dtstart=new Date((new Date).setMilliseconds(0))),Object(d.f)(P.wkst)?Object(d.e)(P.wkst)||(P.wkst=P.wkst.weekday):P.wkst=Fe.MO.weekday,Object(d.f)(P.bysetpos)){Object(d.e)(P.bysetpos)&&(P.bysetpos=[P.bysetpos]);for(var Y=0;Y<P.bysetpos.length;Y++)if(0===(q=P.bysetpos[Y])||!(-366<=q&&q<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}if(!(Boolean(P.byweekno)||Object(d.h)(P.byweekno)||Object(d.h)(P.byyearday)||Boolean(P.bymonthday)||Object(d.h)(P.bymonthday)||Object(d.f)(P.byweekday)||Object(d.f)(P.byeaster)))switch(P.freq){case Fe.YEARLY:P.bymonth||(P.bymonth=P.dtstart.getUTCMonth()+1),P.bymonthday=P.dtstart.getUTCDate();break;case Fe.MONTHLY:P.bymonthday=P.dtstart.getUTCDate();break;case Fe.WEEKLY:P.byweekday=[c.getWeekday(P.dtstart)]}if(Object(d.f)(P.bymonth)&&!Object(d.d)(P.bymonth)&&(P.bymonth=[P.bymonth]),Object(d.f)(P.byyearday)&&!Object(d.d)(P.byyearday)&&Object(d.e)(P.byyearday)&&(P.byyearday=[P.byyearday]),Object(d.f)(P.bymonthday))if(Object(d.d)(P.bymonthday)){var Z=[],G=[];for(Y=0;Y<P.bymonthday.length;Y++){var q;0<(q=P.bymonthday[Y])?Z.push(q):q<0&&G.push(q)}P.bymonthday=Z,P.bynmonthday=G}else P.bymonthday<0?(P.bynmonthday=[P.bymonthday],P.bymonthday=[]):(P.bynmonthday=[],P.bymonthday=[P.bymonthday]);else P.bymonthday=[],P.bynmonthday=[];if(Object(d.f)(P.byweekno)&&!Object(d.d)(P.byweekno)&&(P.byweekno=[P.byweekno]),Object(d.f)(P.byweekday))if(Object(d.e)(P.byweekday))P.byweekday=[P.byweekday],P.bynweekday=null;else if(Object(d.g)(P.byweekday))P.byweekday=[L.b.fromStr(P.byweekday).weekday],P.bynweekday=null;else if(P.byweekday instanceof L.b)!P.byweekday.n||P.freq>Fe.MONTHLY?(P.byweekday=[P.byweekday.weekday],P.bynweekday=null):(P.bynweekday=[[P.byweekday.weekday,P.byweekday.n]],P.byweekday=null);else{var X=[],oe=[];for(Y=0;Y<P.byweekday.length;Y++){var de=P.byweekday[Y];Object(d.e)(de)?X.push(de):Object(d.g)(de)?X.push(L.b.fromStr(de).weekday):!de.n||P.freq>Fe.MONTHLY?X.push(de.weekday):oe.push([de.weekday,de.n])}P.byweekday=Object(d.h)(X)?X:null,P.bynweekday=Object(d.h)(oe)?oe:null}else P.bynweekday=null;return Object(d.f)(P.byhour)?Object(d.e)(P.byhour)&&(P.byhour=[P.byhour]):P.byhour=P.freq<Fe.HOURLY?[P.dtstart.getUTCHours()]:null,Object(d.f)(P.byminute)?Object(d.e)(P.byminute)&&(P.byminute=[P.byminute]):P.byminute=P.freq<Fe.MINUTELY?[P.dtstart.getUTCMinutes()]:null,Object(d.f)(P.bysecond)?Object(d.e)(P.bysecond)&&(P.bysecond=[P.bysecond]):P.bysecond=P.freq<Fe.SECONDLY?[P.dtstart.getUTCSeconds()]:null,{parsedOptions:P}}(A).parsedOptions;this.options=V}var rt,Fe=($e.parseText=function(A,H){return Ce().parseText(A,H)},$e.fromText=function(A,H){return Ce().fromText(A,H)},$e.fromString=function(A){return new $e($e.parseString(A)||void 0)},$e.prototype._iter=function(A){return Ae(A,this.options)},$e.prototype._cacheGet=function(A,H){return!!this._cache&&this._cache._cacheGet(A,H)},$e.prototype._cacheAdd=function(A,H,V){if(this._cache)return this._cache._cacheAdd(A,H,V)},$e.prototype.all=function(A){if(A)return this._iter(new z("all",{},A));var H=this._cacheGet("all");return!1===H&&(H=this._iter(new m("all",{})),this._cacheAdd("all",H)),H},$e.prototype.between=function(A,H,V,j){if(void 0===V&&(V=!1),!c.isValidDate(A)||!c.isValidDate(H))throw new Error("Invalid date passed in to RRule.between");var P={before:H,after:A,inc:V};if(j)return this._iter(new z("between",P,j));var Y=this._cacheGet("between",P);return!1===Y&&(Y=this._iter(new m("between",P)),this._cacheAdd("between",Y,P)),Y},$e.prototype.before=function(A,H){if(void 0===H&&(H=!1),!c.isValidDate(A))throw new Error("Invalid date passed in to RRule.before");var V={dt:A,inc:H},j=this._cacheGet("before",V);return!1===j&&(j=this._iter(new m("before",V)),this._cacheAdd("before",j,V)),j},$e.prototype.after=function(A,H){if(void 0===H&&(H=!1),!c.isValidDate(A))throw new Error("Invalid date passed in to RRule.after");var V={dt:A,inc:H},j=this._cacheGet("after",V);return!1===j&&(j=this._iter(new m("after",V)),this._cacheAdd("after",j,V)),j},$e.prototype.count=function(){return this.all().length},$e.prototype.toString=function(){return E(this.origOptions)},$e.prototype.toText=function(A,H,V){return Ce().toText(this,A,H,V)},$e.prototype.isFullyConvertibleToText=function(){return Ce().isFullyConvertible(this)},$e.prototype.clone=function(){return new $e(this.origOptions)},$e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],$e.YEARLY=_.YEARLY,$e.MONTHLY=_.MONTHLY,$e.WEEKLY=_.WEEKLY,$e.DAILY=_.DAILY,$e.HOURLY=_.HOURLY,$e.MINUTELY=_.MINUTELY,$e.SECONDLY=_.SECONDLY,$e.MO=Ge.MO,$e.TU=Ge.TU,$e.WE=Ge.WE,$e.TH=Ge.TH,$e.FR=Ge.FR,$e.SA=Ge.SA,$e.SU=Ge.SU,$e.parseString=pe,$e.optionsToString=E,$e),ot={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function tt(A,H){return void 0===H&&(H={}),function(V,j){var P=function Pe(A,H){var V=[],j=[],P=[],Y=[],Z=fe(A),G=Z.dtstart,q=Z.tzid;return function(X,oe){if(void 0===oe&&(oe=!1),!(X=X&&X.trim()))throw new Error("Invalid empty string");if(!oe)return X.split(/\s/);for(var de=X.split("\n"),ae=0;ae<de.length;){var re=de[ae]=de[ae].replace(/\s+$/g,"");re?0<ae&&" "===re[0]?(de[ae-1]+=re.slice(1),de.splice(ae,1)):ae+=1:de.splice(ae,1)}return de}(A,H.unfold).forEach(function(X){if(X){var oe=function(Me){var Ee=function(Re){if(-1===Re.indexOf(":"))return{name:"RRULE",value:Re};var Ve=Object(d.m)(Re,":",1);return{name:Ve[0],value:Ve[1]}}(Me),Le=Ee.value,Te=Ee.name.split(";");if(!Te)throw new Error("empty property name");return{name:Te[0].toUpperCase(),parms:Te.slice(1),value:Le}}(X),de=oe.name,ae=oe.parms,re=oe.value;switch(de.toUpperCase()){case"RRULE":if(ae.length)throw new Error("unsupported RRULE parm: "+ae.join(","));V.push(pe(X));break;case"RDATE":var ue=/RDATE(?:;TZID=([^:=]+))?/i.exec(X)[1];ue&&!q&&(q=ue),j=j.concat(st(re,ae));break;case"EXRULE":if(ae.length)throw new Error("unsupported EXRULE parm: "+ae.join(","));P.push(pe(re));break;case"EXDATE":Y=Y.concat(st(re,ae));break;case"DTSTART":break;default:throw new Error("unsupported property: "+de)}}}),{dtstart:G,tzid:q,rrulevals:V,rdatevals:j,exrulevals:P,exdatevals:Y}}(V,j),Y=P.rrulevals,Z=P.rdatevals,G=P.exrulevals,q=P.exdatevals,X=P.dtstart,oe=P.tzid,de=!1===j.cache;if(j.compatible&&(j.forceset=!0,j.unfold=!0),j.forceset||1<Y.length||Z.length||G.length||q.length){var ae=new O(de);return ae.dtstart(X),ae.tzid(oe||void 0),Y.forEach(function(le){ae.rrule(new Fe(nt(le,X,oe),de))}),Z.forEach(function(le){ae.rdate(le)}),G.forEach(function(le){ae.exrule(new Fe(nt(le,X,oe),de))}),q.forEach(function(le){ae.exdate(le)}),j.compatible&&j.dtstart&&ae.rdate(X),ae}var re=Y[0]||{};return new Fe(nt(re,re.dtstart||j.dtstart||X,re.tzid||j.tzid||oe),de)}(A,function(V){var j=[],P=Object.keys(V),Y=Object.keys(ot);if(P.forEach(function(Z){Object(d.c)(Y,Z)||j.push(Z)}),j.length)throw new Error("Invalid options: "+j.join(", "));return w(w({},ot),V)}(H))}function nt(A,H,V){return w(w({},A),{dtstart:H,tzid:V})}function st(A,H){return H.forEach(function(V){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(V))throw new Error("unsupported RDATE/EXDATE parm: "+V)}),A.split(",").map(function(V){return c.untilStringToDate(V)})}function lt(A){var H=this;return function(V){if(void 0!==V&&(H["_"+A]=V),void 0!==H["_"+A])return H["_"+A];for(var j=0;j<H._rrule.length;j++){var P=H._rrule[j].origOptions[A];if(P)return P}}}function C(A){void 0===A&&(A=!1);var H=rt.call(this,{},A)||this;return H.dtstart=lt.apply(H,["dtstart"]),H.tzid=lt.apply(H,["tzid"]),H._rrule=[],H._rdate=[],H._exrule=[],H._exdate=[],H}var O=(b(C,rt=Fe),C.prototype._iter=function(A){return function(H,V,j,P,Y,Z){var G={},q=H.accept;function X(re,le){j.forEach(function(ue){ue.between(re,le,!0).forEach(function(Me){G[Number(Me)]=!0})})}Y.forEach(function(re){var le=new x(re,Z).rezonedDate();G[Number(le)]=!0}),H.accept=function(re){var le=Number(re);return isNaN(le)?q.call(this,re):!(!G[le]&&(X(new Date(le-1),new Date(le+1)),!G[le]))||(G[le]=!0,q.call(this,re))},"between"===H.method&&(X(H.args.after,H.args.before),H.accept=function(re){var le=Number(re);return!!G[le]||(G[le]=!0,q.call(this,re))});for(var oe=0;oe<P.length;oe++){var de=new x(P[oe],Z).rezonedDate();if(!H.accept(new Date(de.getTime())))break}V.forEach(function(re){Ae(H,re.options)});var ae=H._result;switch(c.sort(ae),H.method){case"all":case"between":return ae;case"before":return ae.length&&ae[ae.length-1]||null;default:return ae.length&&ae[0]||null}}(A,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},C.prototype.rrule=function(A){R(A,this._rrule)},C.prototype.exrule=function(A){R(A,this._exrule)},C.prototype.rdate=function(A){W(A,this._rdate)},C.prototype.exdate=function(A){W(A,this._exdate)},C.prototype.rrules=function(){return this._rrule.map(function(A){return tt(A.toString())})},C.prototype.exrules=function(){return this._exrule.map(function(A){return tt(A.toString())})},C.prototype.rdates=function(){return this._rdate.map(function(A){return new Date(A.getTime())})},C.prototype.exdates=function(){return this._exdate.map(function(A){return new Date(A.getTime())})},C.prototype.valueOf=function(){var A=[];return!this._rrule.length&&this._dtstart&&(A=A.concat(E({dtstart:this._dtstart}))),this._rrule.forEach(function(H){A=A.concat(H.toString().split("\n"))}),this._exrule.forEach(function(H){A=A.concat(H.toString().split("\n").map(function(V){return V.replace(/^RRULE:/,"EXRULE:")}).filter(function(V){return!/^DTSTART/.test(V)}))}),this._rdate.length&&A.push(I("RDATE",this._rdate,this.tzid())),this._exdate.length&&A.push(I("EXDATE",this._exdate,this.tzid())),A},C.prototype.toString=function(){return this.valueOf().join("\n")},C.prototype.clone=function(){var A=new C(!!this._cache);return this._rrule.forEach(function(H){return A.rrule(H.clone())}),this._exrule.forEach(function(H){return A.exrule(H.clone())}),this._rdate.forEach(function(H){return A.rdate(new Date(H.getTime()))}),this._exdate.forEach(function(H){return A.exdate(new Date(H.getTime()))}),A},C);function R(A,H){if(!(A instanceof Fe))throw new TypeError(String(A)+" is not RRule instance");Object(d.c)(H.map(String),String(A))||H.push(A)}function W(A,H){if(!(A instanceof Date))throw new TypeError(String(A)+" is not Date instance");Object(d.c)(H.map(Number),Number(A))||(H.push(A),c.sort(H))}function I(A,H,V){var j=!V||"UTC"===V.toUpperCase();return(j?A+":":A+";TZID="+V+":")+H.map(function(P){return c.timeToUntilString(P.valueOf(),j)}).join(",")}o.d(r,"rrulestr",function(){return tt}),o.d(r,"Frequency",function(){return _}),o.d(r,"Weekday",function(){return L.b}),o.d(r,"RRule",function(){return Fe}),o.d(r,"RRuleSet",function(){return O}),r.default=Fe},function(a,r,o){"use strict";o.d(r,"a",function(){return s}),o.d(r,"b",function(){return l});var s=["MO","TU","WE","TH","FR","SA","SU"],l=(d.fromStr=function(c){return new d(s.indexOf(c))},d.prototype.nth=function(c){return this.n===c?this:new d(this.weekday,c)},d.prototype.equals=function(c){return this.weekday===c.weekday&&this.n===c.n},d.prototype.toString=function(){var c=s[this.weekday];return this.n&&(c=(0<this.n?"+":"")+String(this.n)+c),c},d.prototype.getJsWeekday=function(){return 6===this.weekday?0:this.weekday+1},d);function d(c,u){if(0===u)throw new Error("Can't create weekday with n == 0");this.weekday=c,this.n=u}},function(a,r,o){"use strict";function s(M,L){return-1!==M.indexOf(L)}function l(M){return M.toString()}function d(M,L,F){return L+" "+F+", "+M}o.r(r);var c={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},u=o(1),m=o(0);function y(M,L,F,B){if(void 0===L&&(L=l),void 0===F&&(F=c),void 0===B&&(B=d),this.text=[],this.language=F||c,this.gettext=L,this.dateFormatter=B,this.rrule=M,this.options=M.options,this.origOptions=M.origOptions,this.origOptions.bymonthday){var J=[].concat(this.options.bymonthday),Q=[].concat(this.options.bynmonthday);J.sort(function(fe,k){return fe-k}),Q.sort(function(fe,k){return k-fe}),this.bymonthday=J.concat(Q),this.bymonthday.length||(this.bymonthday=null)}if(Object(m.f)(this.origOptions.byweekday)){var ee=Object(m.d)(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],se=String(ee);this.byweekday={allWeeks:ee.filter(function(fe){return!fe.n}),someWeeks:ee.filter(function(fe){return Boolean(fe.n)}),isWeekdays:-1!==se.indexOf("MO")&&-1!==se.indexOf("TU")&&-1!==se.indexOf("WE")&&-1!==se.indexOf("TH")&&-1!==se.indexOf("FR")&&-1===se.indexOf("SA")&&-1===se.indexOf("SU"),isEveryDay:-1!==se.indexOf("MO")&&-1!==se.indexOf("TU")&&-1!==se.indexOf("WE")&&-1!==se.indexOf("TH")&&-1!==se.indexOf("FR")&&-1!==se.indexOf("SA")&&-1!==se.indexOf("SU")};var pe=function(fe,k){return fe.weekday-k.weekday};this.byweekday.allWeeks.sort(pe),this.byweekday.someWeeks.sort(pe),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}var b=(y.isFullyConvertible=function(M){if(!(M.options.freq in y.IMPLEMENTED)||M.origOptions.until&&M.origOptions.count)return!1;for(var L in M.origOptions){if(s(["dtstart","wkst","freq"],L))return!0;if(!s(y.IMPLEMENTED[M.options.freq],L))return!1}return!0},y.prototype.isFullyConvertible=function(){return y.isFullyConvertible(this.rrule)},y.prototype.toString=function(){var M=this.gettext;if(!(this.options.freq in y.IMPLEMENTED))return M("RRule error: Unable to fully convert this rrule to text");if(this.text=[M("every")],this[u.default.FREQUENCIES[this.options.freq]](),this.options.until){this.add(M("until"));var L=this.options.until;this.add(this.dateFormatter(L.getUTCFullYear(),this.language.monthNames[L.getUTCMonth()],L.getUTCDate()))}else this.options.count&&this.add(M("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?M("times"):M("time"));return this.isFullyConvertible()||this.add(M("(~ approximate)")),this.text.join("")},y.prototype.HOURLY=function(){var M=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?M("hours"):M("hour"))},y.prototype.MINUTELY=function(){var M=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?M("minutes"):M("minute"))},y.prototype.DAILY=function(){var M=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.byweekday&&this.byweekday.isWeekdays?this.plural(this.options.interval)?M("weekdays"):M("weekday"):this.plural(this.options.interval)?M("days"):M("day")),this.origOptions.bymonth&&(this.add(M("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},y.prototype.WEEKLY=function(){var M=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?M("weeks"):M("week")),this.byweekday&&this.byweekday.isWeekdays?1===this.options.interval?this.add(this.plural(this.options.interval)?M("weekdays"):M("weekday")):this.add(M("on")).add(M("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?M("days"):M("day")):(1===this.options.interval&&this.add(M("week")),this.origOptions.bymonth&&(this.add(M("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},y.prototype.MONTHLY=function(){var M=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()).add(M("months")),this.plural(this.options.interval)&&this.add(M("in"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?M("months"):M("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(M("on")).add(M("weekdays")):this.byweekday&&this._byweekday()},y.prototype.YEARLY=function(){var M=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()),this.add(M("years"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?M("years"):M("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(M("on the")).add(this.list(this.options.byyearday,this.nth,M("and"))).add(M("day")),this.options.byweekno&&this.add(M("in")).add(this.plural(this.options.byweekno.length)?M("weeks"):M("week")).add(this.list(this.options.byweekno,void 0,M("and")))},y.prototype._bymonthday=function(){var M=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(M("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,M("or"))).add(M("the")).add(this.list(this.bymonthday,this.nth,M("or"))):this.add(M("on the")).add(this.list(this.bymonthday,this.nth,M("and")))},y.prototype._byweekday=function(){var M=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(M("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(M("and")),this.add(M("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,M("and"))))},y.prototype._byhour=function(){var M=this.gettext;this.add(M("at")).add(this.list(this.origOptions.byhour,void 0,M("and")))},y.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},y.prototype.nth=function(M){var L,F;M=parseInt(M.toString(),10);var B=this.gettext;if(-1===M)return B("last");switch(F=Math.abs(M)){case 1:case 21:case 31:L=F+B("st");break;case 2:case 22:L=F+B("nd");break;case 3:case 23:L=F+B("rd");break;default:L=F+B("th")}return M<0?L+" "+B("last"):L},y.prototype.monthtext=function(M){return this.language.monthNames[M-1]},y.prototype.weekdaytext=function(M){var L=Object(m.e)(M)?(M+1)%7:M.getJsWeekday();return(M.n?this.nth(M.n)+" ":"")+this.language.dayNames[L]},y.prototype.plural=function(M){return M%100!=1},y.prototype.add=function(M){return this.text.push(" "),this.text.push(M),this},y.prototype.list=function(M,L,F,B){function J(ee){return L&&L.call(Q,ee)}void 0===B&&(B=","),Object(m.d)(M)||(M=[M]),L=L||function(ee){return ee.toString()};var Q=this;return F?function(ee,se,pe){for(var fe="",k=0;k<ee.length;k++)0!==k&&(fe+=k===ee.length-1?" "+pe+" ":se+" "),fe+=ee[k];return fe}(M.map(J),B,F):M.map(J).join(B+" ")},y),f=(w.prototype.start=function(M){return this.text=M,this.done=!1,this.nextSymbol()},w.prototype.isDone=function(){return this.done&&null===this.symbol},w.prototype.nextSymbol=function(){var M,L;this.symbol=null,this.value=null;do{if(this.done)return!1;for(var F in M=null,this.rules){var B=this.rules[F].exec(this.text);B&&(null===M||B[0].length>M[0].length)&&(M=B,L=F)}if(null!=M&&(this.text=this.text.substr(M[0].length),""===this.text&&(this.done=!0)),null==M)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"===L);return this.symbol=L,this.value=M,!0},w.prototype.accept=function(M){if(this.symbol!==M)return!1;if(this.value){var L=this.value;return this.nextSymbol(),L}return this.nextSymbol(),!0},w.prototype.acceptNumber=function(){return this.accept("number")},w.prototype.expect=function(M){if(this.accept(M))return!0;throw new Error("expected "+M+" but found "+this.symbol)},w);function w(M){this.done=!0,this.rules=M}function v(M,L){void 0===L&&(L=c);var F={},B=new f(L.tokens);return B.start(M)?(function(){B.expect("every");var fe=B.acceptNumber();if(fe&&(F.interval=parseInt(fe[0],10)),B.isDone())throw new Error("Unexpected end");switch(B.symbol){case"day(s)":F.freq=u.default.DAILY,B.nextSymbol()&&(function(){if(B.accept("at"))do{var D=B.acceptNumber();if(!D)throw new Error("Unexpected symbol "+B.symbol+", expected hour");for(F.byhour=[parseInt(D[0],10)];B.accept("comma");){if(!(D=B.acceptNumber()))throw new Error("Unexpected symbol "+B.symbol+"; expected hour");F.byhour.push(parseInt(D[0],10))}}while(B.accept("comma")||B.accept("at"))}(),pe());break;case"weekday(s)":F.freq=u.default.WEEKLY,F.byweekday=[u.default.MO,u.default.TU,u.default.WE,u.default.TH,u.default.FR],B.nextSymbol(),pe();break;case"week(s)":F.freq=u.default.WEEKLY,B.nextSymbol()&&(J(),pe());break;case"hour(s)":F.freq=u.default.HOURLY,B.nextSymbol()&&(J(),pe());break;case"minute(s)":F.freq=u.default.MINUTELY,B.nextSymbol()&&(J(),pe());break;case"month(s)":F.freq=u.default.MONTHLY,B.nextSymbol()&&(J(),pe());break;case"year(s)":F.freq=u.default.YEARLY,B.nextSymbol()&&(J(),pe());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":F.freq=u.default.WEEKLY;var k=B.symbol.substr(0,2).toUpperCase();if(F.byweekday=[u.default[k]],!B.nextSymbol())return;for(;B.accept("comma");){if(B.isDone())throw new Error("Unexpected end");var h=ee();if(!h)throw new Error("Unexpected symbol "+B.symbol+", expected weekday");F.byweekday.push(u.default[h]),B.nextSymbol()}(function(){B.accept("on"),B.accept("the");var D=se();if(D)for(F.bymonthday=[D],B.nextSymbol();B.accept("comma");){if(!(D=se()))throw new Error("Unexpected symbol "+B.symbol+"; expected monthday");F.bymonthday.push(D),B.nextSymbol()}})(),pe();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(F.freq=u.default.YEARLY,F.bymonth=[Q()],!B.nextSymbol())return;for(;B.accept("comma");){if(B.isDone())throw new Error("Unexpected end");var g=Q();if(!g)throw new Error("Unexpected symbol "+B.symbol+", expected month");F.bymonth.push(g),B.nextSymbol()}J(),pe();break;default:throw new Error("Unknown symbol")}}(),F):null;function J(){var fe=B.accept("on"),k=B.accept("the");if(fe||k)do{var h=se(),g=ee(),D=Q();if(h)g?(B.nextSymbol(),F.byweekday||(F.byweekday=[]),F.byweekday.push(u.default[g].nth(h))):(F.bymonthday||(F.bymonthday=[]),F.bymonthday.push(h),B.accept("day(s)"));else if(g)B.nextSymbol(),F.byweekday||(F.byweekday=[]),F.byweekday.push(u.default[g]);else if("weekday(s)"===B.symbol)B.nextSymbol(),F.byweekday||(F.byweekday=[u.default.MO,u.default.TU,u.default.WE,u.default.TH,u.default.FR]);else if("week(s)"===B.symbol){B.nextSymbol();var x=B.acceptNumber();if(!x)throw new Error("Unexpected symbol "+B.symbol+", expected week number");for(F.byweekno=[parseInt(x[0],10)];B.accept("comma");){if(!(x=B.acceptNumber()))throw new Error("Unexpected symbol "+B.symbol+"; expected monthday");F.byweekno.push(parseInt(x[0],10))}}else{if(!D)return;B.nextSymbol(),F.bymonth||(F.bymonth=[]),F.bymonth.push(D)}}while(B.accept("comma")||B.accept("the")||B.accept("on"))}function Q(){switch(B.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function ee(){switch(B.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return B.symbol.substr(0,2).toUpperCase();default:return!1}}function se(){switch(B.symbol){case"last":return B.nextSymbol(),-1;case"first":return B.nextSymbol(),1;case"second":return B.nextSymbol(),B.accept("last")?-2:2;case"third":return B.nextSymbol(),B.accept("last")?-3:3;case"nth":var fe=parseInt(B.value[1],10);if(fe<-366||366<fe)throw new Error("Nth out of range: "+fe);return B.nextSymbol(),B.accept("last")?-fe:fe;default:return!1}}function pe(){if("until"===B.symbol){var fe=Date.parse(B.text);if(!fe)throw new Error("Cannot parse until date:"+B.text);F.until=new Date(fe)}else B.accept("for")&&(F.count=parseInt(B.value[0],10),B.expect("number"))}}o.d(r,"fromText",function(){return S}),o.d(r,"isFullyConvertible",function(){return z}),o.d(r,"toText",function(){return T}),o.d(r,"parseText",function(){return v});var S=function(M,L){return void 0===L&&(L=c),new u.default(v(M,L)||void 0)},_=["count","until","interval","byweekday","bymonthday","bymonth"];b.IMPLEMENTED=[],b.IMPLEMENTED[u.default.HOURLY]=_,b.IMPLEMENTED[u.default.MINUTELY]=_,b.IMPLEMENTED[u.default.DAILY]=["byhour"].concat(_),b.IMPLEMENTED[u.default.WEEKLY]=_,b.IMPLEMENTED[u.default.MONTHLY]=_,b.IMPLEMENTED[u.default.YEARLY]=["byweekno","byyearday"].concat(_);var T=function(M,L,F,B){return new b(M,L,F,B).toString()},z=b.isFullyConvertible}],t.c=i,t.d=function(a,r,o){t.o(a,r)||Object.defineProperty(a,r,{enumerable:!0,get:o})},t.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},t.t=function(a,r){if(1&r&&(a=t(a)),8&r||4&r&&"object"==typeof a&&a&&a.__esModule)return a;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:a}),2&r&&"string"!=typeof a)for(var s in a)t.d(o,s,function(l){return a[l]}.bind(null,s));return o},t.n=function(a){var r=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(r,"a",r),r},t.o=function(a,r){return Object.prototype.hasOwnProperty.call(a,r)},t.p="",t(t.s=1);function t(a){if(i[a])return i[a].exports;var r=i[a]={i:a,l:!1,exports:{}};return n[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n,i}()},2612:()=>{Smart("smart-button",class extends Smart.ContentElement{static get properties(){return{value:{type:"string"},name:{type:"string"},type:{value:"button",type:"string"},clickMode:{allowedValues:["hover","press","release","pressAndRelease"],type:"string",value:"release"}}}static get styleUrls(){return["smart.button.css"]}template(){return"<button class=\"smart-button smart-unselectable\" inner-h-t-m-l='[[innerHTML]]' id='button' type='[[type]]' name='[[name]]' value='[[value]]' disabled='[[disabled]]' role=\"presentation\"></button>"}refresh(){}static get listeners(){return{"button.down":"_downHandler","button.mouseenter":"_mouseEnterHandler","button.mouseleave":"_mouseLeaveHandler","button.touchend":"_touchEndHandler","button.click":"_clickHandler","button.up":"_upHandler",up:"_upHandler","button.focus":"_focusHandler","button.blur":"_blurHandler"}}focus(){const e=this;e.$.button?e.$.button.focus():HTMLElement.prototype.focus.call(e)}blur(){const e=this;e.$.button?e.$.button.blur():HTMLElement.prototype.blur.call(e)}_upHandler(e){const t=this;if(e.stopPropagation(),t.$.setAttributeValue("active",!1),t.dataset.target){const n=document.querySelector(t.dataset.target);let i=t.dataset.toggle;const a="smart-window".toLowerCase();if(n&&n.nodeName.toLowerCase()===a&&"modal"===i&&(i="openModal"),"tab"===i||"pill"===i||"list"===i){const r=this.closest(".nav, .list-group"),o='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',s=!r||"UL"!==r.nodeName&&"OL"!==r.nodeName?r.children(".active"):r.querySelectorAll("li > .active");if(r){const l=r.querySelectorAll(o);for(let c=0;c<l.length;c++)l[c].classList.remove("primary");for(let c=0;c<s.length;c++)s[c].classList.remove("active");let d=t.parentNode;for(;d;){if("LI"===d.nodeName){d.classList.add("active");break}d=d.parentNode}t.classList.add("primary")}return n.parentNode.querySelectorAll(".active").forEach(l=>{l.classList.remove("active"),l.classList.add("smart-hidden")}),n.classList.add("active"),void n.classList.remove("smart-hidden")}i&&n&&!n[i]&&"collapse"===i&&(setTimeout(()=>{n.classList.contains("smart-hidden")?n.classList.remove("smart-hidden"):n.classList.add("smart-hidden")}),e.originalEvent.preventDefault()),i&&n&&!n[i]&&"dropdown"===i?(setTimeout(()=>{n.opened=!n.opened}),e.originalEvent.preventDefault()):i&&n&&n[i]&&(setTimeout(()=>{n[i]()},50),e.originalEvent.preventDefault())}}_focusHandler(){this.$.setAttributeValue("focus",!0),this.$.fireEvent("focus")}_blurHandler(){this.$.setAttributeValue("focus",!1),this.$.fireEvent("blur")}_clickHandler(e){const t=this;("release"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t.readonly)&&(e.preventDefault(),e.stopPropagation())}_downHandler(e){const t=this;if(!(t.disabled||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),t.$.setAttributeValue("active",!0),"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t.readonly))){if(t.hasAttribute("smart-blazor"))return void t.$.dispatchEvent(new Event("click"));t.$.fireEvent("click",{buttons:"buttons"in e?e.buttons:e.which,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}_mouseEnterHandler(e){const t=this;if(!t.readonly&&(t.$button.setAttributeValue("hover",!0),t.$.setAttributeValue("hover",!0),"hover"===t.clickMode)){const n="buttons"in e?e.buttons:e.which;if(t.hasAttribute("smart-blazor"))return void t.$.dispatchEvent(new Event("click"));t.$.fireEvent("click",{buttons:n,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}_touchEndHandler(){const e=this;setTimeout(function(){e.$button.setAttributeValue("hover",!1),e.$.setAttributeValue("hover",!1)},300)}_mouseLeaveHandler(){this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;"disabled"===e?(i._setFocusable(),i.$button&&i.$button.setAttributeValue("hover",!1),i.$.setAttributeValue("hover",!1),i instanceof Smart.RepeatButton&&i._stopRepeat()):"unfocusable"===e&&i._setFocusable()}_setFocusable(){const e=this,t=e.$.button?e.$.button:e;if(e.disabled||e.unfocusable)return t.removeAttribute("tabindex"),void(t.tabIndex=-1);t.tabIndex=e.tabIndex>0?e.tabIndex:0}ready(){const e=this;super.ready(),e.setAttribute("role","button"),e._setFocusable(),e.enableShadowDOM&&e.$.hiddenInput&&e.appendChild(e.$.hiddenInput)}}),Smart("smart-repeat-button",class extends Smart.Button{static get properties(){return{delay:{value:50,type:"number"},initialDelay:{value:150,type:"number"}}}static get listeners(){return{"button.down":"_startRepeat","button.mouseenter":"_overriddenHandler","button.mouseleave":"_overriddenHandler","button.pointerenter":"_updateInBoundsFlag","button.pointerleave":"_updateInBoundsFlag","button.touchmove":"_touchmoveHandler","document.up":"_stopRepeat"}}_clickHandler(e){const t=this;("release"!==t.clickMode||t.preventDefaultClick||t.readonly||t.disabled)&&(e.preventDefault(),e.stopPropagation(),t.preventDefaultClick=!1)}_updateInBoundsFlag(e){const t=this;-1!==e.type.indexOf("leave")?(t._isPointerInBounds=!1,t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)):(t._isPointerInBounds=!0,t.$button.setAttributeValue("hover",!0),t.$.setAttributeValue("hover",!0)),1!==("buttons"in e?e.buttons:e.which)&&t._stopRepeat(e)}_startRepeat(e){const t=this;t.setAttribute("active",""),t._initialTimer||t.readonly||(t._initialTimer=setTimeout(function(){t._repeatTimer=setInterval(()=>{if(t._isPointerInBounds){if(t.hasAttribute("smart-blazor"))return t.$.dispatchEvent(new Event("click")),void(t.preventDefaultClick=!0);t.$.fireEvent("click",{buttons:"buttons"in e?e.buttons:e.which,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),t.preventDefaultClick=!0}},t.delay)},t.initialDelay))}_stopRepeat(e){const t=this;t.readonly||e&&("pointercancel"===e.type||e.originalEvent&&"pointercancel"===e.originalEvent.type)||(t.$.setAttributeValue("active",!1),t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null))}_touchmoveHandler(e){this.preventDefaultClick&&e.cancelable&&(e.preventDefault(),e.stopPropagation())}_overriddenHandler(){}}),Smart("smart-toggle-button",class extends Smart.Button{static get properties(){return{checked:{value:!1,type:"boolean?"},falseContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminate:{value:!1,type:"boolean"},trueContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateTemplate:{value:null,type:"any"},trueTemplate:{value:null,type:"any"},falseTemplate:{value:null,type:"any"},type:{value:"toggle",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}static get listeners(){return{keydown:"_keyHandler",keyup:"_keyHandler",dragstart:"_dragStartHandler","button.click":"_buttonClickHandler","button.mouseenter":"_buttonMouseEnterHandler","button.mouseleave":"_buttonMouseLeaveHandler","document.up":"_documentUpHandler"}}ready(){super.ready(),this._setAriaState(),this._updateGroupValue()}_setAriaState(){const t=this.checked;this.setAttribute("aria-pressed",null!==t?t:"mixed")}_buttonClickHandler(){}_buttonMouseLeaveHandler(){this.removeAttribute("hover")}_buttonMouseEnterHandler(){const e=this;e.setAttribute("hover",""),e.disabled||e.readonly||"hover"!==e.clickMode||(e._changeCheckState("pointer"),e.focus(),e._updateHidenInputNameAndValue())}_documentUpHandler(e){const t=this;t._pressed&&(t._pressed=!1,t.disabled||t.readonly||"press"===t.clickMode||"pointercancel"===e.originalEvent.type||(t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()))}_downHandler(e){const t=this;t.disabled||t.readonly||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),t._pressed=!0,"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||(t._changeCheckState("pointer"),t.hasAttribute("smart-blazor")?t.$.dispatchEvent(new Event("click")):t.$.fireEvent("click"),t._updateHidenInputNameAndValue()),"press"===t.clickMode&&(e.preventDefault(),e.stopPropagation()))}_dragStartHandler(e){e.preventDefault()}_keyHandler(e){const t=this;if(!0!==t.disabled&&!t.readonly&&32===e.keyCode){if("keydown"===e.type)return void e.preventDefault();if("none"===t.switchMode)return;t._changeCheckState("keyboard"),t._updateHidenInputNameAndValue()}}_updateGroupValue(){const e=this;if(e.dataset.target){const t=document.querySelector(e.dataset.target);if(t){const n=document.querySelectorAll('[data-target="'+e.dataset.target+'"]'),i=[];if(e.checked){const a=e.dataset.property,r=e.dataset.value;if(a&&void 0!==t[a]){let o=r;"true"===o&&(o=!0),"false"===o&&(o=!1),t[a]=o}}for(let a=0;a<n.length;a++){const r=n[a];r.checked&&(r.name?(i.push(r.name),e.id&&r.setAttribute("data-id",e.id)):e.id&&i.push(e.id))}t.value=i.toString(),e._targetDispatchTimer&&clearTimeout(e._targetDispatchTimer),e._targetDispatchTimer=setTimeout(()=>{t.dispatchEvent(new Event("change"))},100)}}}_changeCheckState(e){const t=this;let n=null;null===t.checked?t.checked=!0:(n=t.checked,t.checked=!t.checked),t._handleTextSelection(),t.$.fireEvent("change",{value:t.checked,oldValue:n,changeType:e}),t.$.fireEvent(t.checked?"checkValue":"uncheckValue",{changeType:e}),t._updateGroupValue(),t._setAriaState()}_handleTextSelection(){const e=this;e.$.addClass("smart-unselectable"),e.timer&&clearTimeout(e.timer),e.timer=setTimeout(()=>e.$.removeClass("smart-unselectable"),500)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;if("checked"===e)return i.$.fireEvent("change",{value:n,oldValue:t,changeType:"api"}),void i._setAriaState();switch(e){case"trueTemplate":i._handleTemplate(!0);break;case"falseTemplate":i._handleTemplate(!1);break;case"indeterminateTemplate":i._handleTemplate()}}_htmlBindOnInitialization(){const e=this;e._bindContentProperty("trueContent","smart-true-content"),e._bindContentProperty("falseContent","smart-false-content"),e._bindContentProperty("indeterminateContent","smart-indeterminate-content")}_bindContentProperty(e,t){const n=this;if(!n.$[e+"Container"])return;let i=document.createElement("div");i.innerHTML=n.innerHTML;let a,r=i.getElementsByClassName(t);if(r.length>0)for(let o=0;o<r.length;o++)a=r[o];""===n[e]&&(n[e]=void 0===a?"":a.outerHTML),n.$[e+"Container"].innerHTML=n[e]}_updateContentProperties(){const e=this;function t(n){e.$[n+"Container"]&&(e[n]=e.$[n+"Container"].innerHTML)}t("trueContent"),t("falseContent"),t("indeterminateContent")}_updateHidenInputValue(){const e=this;if(!e.$.hiddenInput)return;let t;t=null===e.checked?"null":!1===e.checked?"off":e.value||"on",e.$.hiddenInput.setAttribute("value",t)}_updateHidenInputName(){const e=this;e.$.hiddenInput&&e.$.hiddenInput.setAttribute("name",!1===e.checked?"":e.name||"")}_updateHidenInputNameAndValue(){this._updateHidenInputName(),this._updateHidenInputValue()}_handleTemplate(e,t){const n=this;let i,a,r;if(!0===e?(i=n.trueTemplate,a=n.$.trueContentContainer,r=n.trueContent):!1===e?(i=n.falseTemplate,a=n.$.falseContentContainer,r=n.falseContent):(i=n.indeterminateTemplate,a=n.$.indeterminateContentContainer,r=n.indeterminateContent),t&&(a.innerHTML=r||""),null===i||!i)return;if("function"==typeof i)return void i(a,{value:r});if(!("content"in document.createElement("template")))return void n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}));if(i=document.getElementById(i),null===i||!("content"in i))return void n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:"template"}));const o=i.content,s=o.childNodes.length,l=/{{\w+}}/g;let d,c=[];for(let f=0;f<s;f++)for(d=l.exec(o.childNodes[f].innerHTML);d;)c.push({childNodeIndex:f,bindingString:d[0]}),d=l.exec(o.childNodes[f].innerHTML);const u=c.length;let m,y,b=document.importNode(i.content,!0);for(let f=0;f<u;f++){m=b.childNodes[c[f].childNodeIndex],y=c.length;for(let w=0;w<y;w++)m.innerHTML=m.innerHTML.replace(c[f].bindingString,r)}a.innerHTML="";for(let f=0;f<b.childNodes.length;f++)b.childNodes[f].outerHTML&&(a.innerHTML+=b.childNodes[f].outerHTML)}})},6867:()=>{Smart("smart-button-group",class extends Smart.ContentElement{static get properties(){return{dataSource:{type:"any",value:[],reflectToAttribute:!1},name:{value:"",type:"string"},selectionMode:{allowedValues:["none","one","zeroOrOne","zeroOrMany"],type:"string",value:"one"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"}}}static get styleUrls(){return["smart.buttongroup.css"]}template(){return"<div id='container' class='smart-container' role=\"presentation\">\n                    <div id=\"itemsContainer\" class=\"smart-button-group-items\" role=\"presentation\"></div>\n                    <input id='hiddenInput' type='hidden' name='[[name]]' value='[[value]]' class='smart-hidden-input'>\n                </div>"}static get listeners(){return{click:"_clickHandler",keydown:"_keyDownHandler",focus:"_focusHandler",blur:"_focusHandler"}}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;switch(e){case"dataSource":i._handleDataSource();break;case"unfocusable":i._setFocusable();break;case"selectionMode":i._handleSelection();break;case"selectedValues":case"selectedIndexes":i._handleValue(e)}}render(){const e=this;e._handleDataSource(),e.setAttribute("role","group"),e._setFocusable(),e.enableShadowDOM&&e.$.hiddenInput&&e.appendChild(e.$.hiddenInput),super.render()}select(e){const t=this;if(null==e||"none"===t.selection)return;const n=t.$.itemsContainer.children;if("number"!=typeof e){e+="";for(let i=0;i<n.length;i++){const a=n[i];a.getAttribute("value")===e&&t._selectItem(a)}}else t._selectItem(n[e])}_clickHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;e.stopPropagation(),t._selectItem(n)}_handleDataSource(){const e=this,t=e.$.itemsContainer,n=e.dataSource,i=e.selectedValues,a=e.selectedIndexes;let r="function"==typeof n?e.dataSource():n;if("string"==typeof r&&(r=JSON.parse(e.dataSource)),Array.isArray(r)||(r=Array.from(r)),t.innerHTML="",!r)return void e._updateValue();const o=document.createDocumentFragment();for(let s=0;s<r.length;s++){const l=r[s];let d,c=l,u=l;"object"==typeof l&&(c=l.label+""||"",u=l.value+""||c||"",d=l.disabled);const m=document.createElement("div");m.innerHTML=`<div>${c}</div>`,m.id=e.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),m.classList.add("smart-button-group-item"),m.setAttribute("data-label",c),m.setAttribute("value",u),m.setAttribute("role","option"),m.setAttribute("aria-label",c),i.indexOf(u)>-1||a.indexOf("value")>-1?(m.setAttribute("active",""),m.setAttribute("aria-selected",!0)):m.setAttribute("aria-selected",!1),d&&m.setAttribute("disabled",""),o.appendChild(m)}t.appendChild(o),e._handleSelection()}_handleSelection(){const e=this,t=e.$.itemsContainer,n=Array.from(t.children);if(!n.length)return;const i=e.selectionMode;switch(t.setAttribute("aria-multiselectable",!1),i){case"none":n.forEach(a=>{a.removeAttribute("active"),a.removeAttribute("focus"),a.setAttribute("aria-selected",!1)});break;case"one":case"zeroOrOne":{const a=n.filter(o=>o.hasAttribute("active")),r=n[0];"one"===i&&!a.length&&r&&(r.setAttribute("active",""),r.setAttribute("aria-selected",!0));for(let o=0;o<a.length;o++){const s=a[o];0!==o&&(s.removeAttribute("active"),s.removeAttribute("focus"),s.setAttribute("aria-selected",!1))}break}case"zeroOrMany":t.setAttribute("aria-multiselectable",!0)}e._updateValue()}_handleValue(e){const t=this,n=t.$.itemsContainer.children,i=t.selectionMode;let a=t.selectedValues,r=t.selectedIndexes;"selectedValues"===e?r=[]:"selectedIndexes"===e&&(a=[]);for(let o=0;o<n.length;o++){const s=n[o];"none"!==i&&(a.indexOf(s.getAttribute("value"))>-1||r.indexOf(o)>-1)?(s.setAttribute("active",""),s.setAttribute("focus",""),s.setAttribute("aria-selected",!0)):(s.removeAttribute("active"),s.removeAttribute("focus"),s.setAttribute("aria-selected",!1))}t._handleSelection()}_keyDownHandler(e){const t=this;if(t.readonly)return;const n=t.$.itemsContainer.children;let i,a;for(let r=0;r<n.length;r++){const o=n[r];o.hasAttribute("focus")&&(i=o),o.hasAttribute("active")&&(a=o)}switch(i=i||a||n[0],e.key){case"ArrowLeft":case"ArrowRight":e.preventDefault(),i="ArrowLeft"===e.key?i.previousElementSibling:i.nextElementSibling;break;case"Enter":case" ":return e.preventDefault(),void t._selectItem(i);case"Home":case"End":e.preventDefault(),i="Home"===e.key?n[0]:n[n.length-1]}if(i)for(let r=0;r<n.length;r++)n[r]===i?i.setAttribute("focus",""):n[r].removeAttribute("focus")}_focusHandler(e){const t=this.$.itemsContainer;if("focus"!==e.type||this.readonly){const n=t.children;for(let i=0;i<n.length;i++)n[i].removeAttribute("focus")}else{const n=t.querySelector(".smart-button-group-item[active]")||t.children[0];n&&n.setAttribute("focus","")}}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return e.removeAttribute("tabindex"),void(e.tabIndex=-1);e.tabIndex=e.tabIndex>0?e.tabIndex:0}_selectItem(e){if(!e||!e.closest)return;const t=this,n=t.selectionMode;if(!(e=e.closest(".smart-button-group-item"))||"none"===n)return;const i=t.$.itemsContainer.children;if("one"!==n||!e.hasAttribute("active")){if(n.toLowerCase().indexOf("one")>-1){"zeroOrOne"===n&&e.hasAttribute("active")&&(e=void 0);for(let a=0;a<i.length;a++){const r=i[a];r.removeAttribute("active"),r.removeAttribute("focus"),r.setAttribute("aria-selected",!1)}}for(let a=0;a<i.length;a++){const r=i[a];r===e?(e.hasAttribute("active")?(e.removeAttribute("active"),e.setAttribute("aria-selected",!1)):(e.setAttribute("active",""),e.setAttribute("aria-selected",!0)),e.setAttribute("focus","")):r.removeAttribute("focus")}t._updateValue()}}_updateValue(){const e=this,t=Array.from(e.$.itemsContainer.children),n=t.filter(r=>r.hasAttribute("active")),i=n.map(r=>r.getAttribute("value")),a=e.selectedValues;if(a.length!==i.length||a.some(r=>i.indexOf(r)<0)){const r=n.map(s=>t.indexOf(s)),o=e.selectedIndexes;e.set("selectedValues",i),e.set("selectedIndexes",r),e.$.fireEvent("change",{oldValue:a,oldIndexes:o,values:i,indexes:r})}}})},5810:()=>{Smart("smart-calendar",class extends Smart.BaseElement{static get properties(){return{animationSettings:{value:null,type:"object"},calendarMode:{value:"default",allowedValues:["default","classic"],type:"string"},dayNameFormat:{value:"firstTwoLetters",allowedValues:["narrow","firstTwoLetters","long","short"],type:"string"},dateFormatFunction:{value:null,type:"function"},disableAutoNavigation:{value:!1,type:"boolean"},displayMode:{value:"month",allowedValues:["month","year","decade"],type:"string"},displayModeView:{value:"table",allowedValues:["table","list"],type:"string"},dropDownHeight:{value:"200",type:"string"},dropDownWidth:{value:"",type:"string"},firstDayOfWeek:{value:0,type:"number",defaultValue:0,validator:"_firstDayOfWeekValidator"},footerTemplate:{value:null,type:"any"},headerTemplate:{value:null,type:"any"},hideDayNames:{value:!1,type:"boolean"},hideOtherMonthDays:{value:!1,type:"boolean"},hideTooltipArrow:{value:!1,type:"boolean"},importantDates:{value:[],type:"array",defaultValue:[]},importantDatesTemplate:{value:null,type:"any"},max:{value:new Date(2100,0,1),type:"any",defaultValue:new Date(2100,0,1)},min:{value:new Date(1900,0,1),type:"any",defaultValue:new Date(1900,0,1)},months:{value:1,type:"number",defaultValue:1,validator:"_monthsValidator"},monthNameFormat:{value:"long",allowedValues:["narrow","firstTwoLetters","long","short","2-digit","numeric"],type:"string"},name:{value:"",type:"string"},restrictedDates:{value:[],type:"array",defaultValue:[]},scrollButtonsNavigationMode:{value:"landscape",allowedValues:["portrait","landscape"],type:"string"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedDates:{value:[],reflectToAttribute:!1,type:"array"},selectionMode:{value:"default",allowedValues:["none","default","one","oneExtended","many","zeroOrMany","oneOrMany","zeroOrOne","week","range"],type:"string"},spinButtonsDelay:{value:80,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},titleTemplate:{value:null,type:"any"},tooltip:{value:!1,type:"boolean"},tooltipArrow:{value:!0,type:"boolean"},tooltipArrowDirection:{allowedValues:["bottom","top","left","right","none"],value:"bottom",type:"string"},tooltipDelay:{value:100,type:"number"},tooltipOffset:{value:[],type:"array"},tooltipPosition:{value:"auto",allowedValues:["auto","bottom","top","left","right","absolute"],type:"string"},tooltipTemplate:{value:null,type:"any"},view:{value:"portrait",allowedValues:["landscape","portrait"],type:"string"},viewSections:{value:["header"],type:"array"},weekNumbers:{value:!1,type:"boolean"},weeks:{value:6,type:"number",defaultValue:6,validator:"_weeksValidator"},yearFormat:{value:"numeric",allowedValues:["2-digit","numeric"],type:"string"}}}static get listeners(){return{"container.down":"_downHandler","document.up":"_documentUpHandler","body.move":"_moveHandler","container.wheel":"_containerWheelHandler","body.focus":"_bodyFocusStateHandler","body.blur":"_bodyBlurStateHandler","header.click":"_headerClickHandler","header.change":"_headerChangeHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","container.mouseover":"_mouseEventsHandler","container.mouseout":"_mouseEventsHandler","container.open":"_popupEventHandler","container.close":"_popupEventHandler"}}static get methods(){return{select:"select(date=new Date(): date|string): void",clearSelection:"clearSelection(): void",today:"today(): date",navigate:"navigate(step: date|string|int): bool"}}static get styleUrls(){return["smart.calendar.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="title" class="smart-calendar-title" role="heading" aria-level="1">\n                        <div id="yearContainer" class="smart-calendar-year-container" role="button"></div>\n                        <div id="dateContainer" class="smart-calendar-date-container smart-calendar-selected" role="button"></div>\n                    </div>\n                    <div id="calendarContainer" class="smart-calendar-container">\n                        <div id="header" class="smart-calendar-header">\n                            <smart-repeat-button prev-month class="smart-calendar-button" id="previousMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]" right-to-left="[[rightToLeft]]" aria-label="Previous month">\n                                <span aria-hidden="true"></span>\n                            </smart-repeat-button>\n                            <div id="dateElement" class="smart-calendar-date-element" role="presentation">\n                                <div id="defaultHeaderDate" role="button"></div>\n                                <div id="classicHeaderDate">\n                                    <div id="monthElement" class="smart-calendar-month-element" disabled="[[disabled]]" role="presentation">\n                                    </div>\n                                    <input class="smart-calendar-year-element" id="yearElement" disabled="[[disabled]]" readonly="[[readonly]]" aria-label="Year" />\n                                    <span class="smart-calendar-year-elements">\n                                        <smart-repeat-button next-year class="smart-calendar-button" id="nextYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]" right-to-left="[[rightToLeft]]" aria-label="Next year">\n                                            <span aria-hidden="true"></span>\n                                        </smart-repeat-button>\n                                        <smart-repeat-button prev-year class="smart-calendar-button" id="previousYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]" right-to-left="[[rightToLeft]]" aria-label="Previous year">\n                                            <span aria-hidden="true"></span>\n                                        </smart-repeat-button>\n                                    </span>\n                                </div>\n                            </div>\n                            <smart-repeat-button next-month class="smart-calendar-button" id="nextMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]" right-to-left="[[rightToLeft]]" aria-label="Next month">\n                                <span aria-hidden="true"></span>\n                            </smart-repeat-button>\n                        </div>\n                        <div id="body" class="smart-content smart-calendar-body" role="presentation">\n                            <div id="monthsContainer" class="smart-calendar-months-container" role="presentation">\n                              <div id="month" class="smart-calendar-month" role="grid">\n                                   <div id="monthName" class="smart-calendar-month-name"></div>\n                                   <div id="weekTitles" class="smart-calendar-week-titles" role="row">\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                   </div>\n                                   <div id="weeks" class="smart-calendar-weeks" role="rowgroup">\n                                        <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                        </div>\n                                        <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                       <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                       <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                       <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                       <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                   </div>\n                                </div>\n                            </div>\n                            <div id="dateViewContainer" class="smart-calendar-date-view-container smart-hidden">\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                            </div>\n                            <div id="monthsSeparator" class="smart-calendar-month-separator"></div>\n                            <div id="nextMonthsContainer" class="smart-calendar-next-months-container" aria-hidden="true"></div>\n                            <div id="animationPanel" class="smart-calendar-animation-panel smart-hidden"></div>\n                        </div>\n                        <div id="footer" class="smart-calendar-footer smart-hidden">\n                            <div id="selectedDatesRange"></div>\n                        </div>\n                        <input id="hiddenInput" type="hidden" name="[[name]]">\n                    </div>\n                </div>'}_updateTargetValue(){const e=this;if(e.dataset.target){const t=document.querySelector(e.dataset.target);if(t){const n=e.dataset.property,i=e.selectedDates.toString();n&&void 0!==t[n]&&(t[n]=i)}}}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;switch(e){case"animationSettings":i._applyAnimationSettings();break;case"disabled":case"unfocusable":i._setFocusable();break;case"calendarMode":case"dropDownWidth":case"dropDownHeight":i.displayMode="month",i._refreshHeaderElements(),i._refreshCalendarMode(),i._setDisplayModeContent();break;case"dayNameFormat":i._refreshDayOfWeekTitles(i.$.month);break;case"dateFormatFunction":{let a=i.$.monthsContainer.children;for(let r=0;r<a.length;r++)a[r].firstElementChild.innerHTML=n?n(a[r]._date):i._monthsNames[a[r]._date.getMonth()]+" "+a[r]._date.toLocaleDateString(i.locale,{year:i.yearFormat});i._refreshHeaderTitle();break}case"displayMode":if("classic"===i.calendarMode&&"month"!==n){i[e]="month";break}i._setDisplayMode(t,n);break;case"displayModeView":i._applyAnimationSettings(!0),"month"!==i.displayMode&&i._setDisplayModeContent();break;case"firstDayOfWeek":i._handleMonths(),i._refreshDayOfWeekTitles();break;case"hideTooltipArrow":i.$.tooltip&&(i.$.tooltip.arrow=!n);break;case"titleTemplate":case"headerTemplate":case"footerTemplate":i._handleLayoutTemplate(i.$[e.split(/[T]/)[0]],n),"titleTemplate"===e?i._refreshTitle():"headerTemplate"===e?i._refreshHeaderTitle():i._refreshFooter();break;case"importantDates":i.importantDates=i._getValidDates(n),i._refreshImportantDates();break;case"importantDatesTemplate":i._handleImportantDateTemplate(),i._refreshImportantDates();break;case"locale":i._refreshMonthNames(),i._refreshDayOfWeekTitles(),i._refreshHeaderTitle(),i._refreshTitle(),i._refreshFooter(),i.displayMode&&"month"!==i.displayMode&&i._setDisplayModeContent();break;case"max":case"min":i._validateMinMax(e,n,t),i._validateSelectedDates(),i._noFocusingRequired=!1,i._refreshHeaderElements();break;case"months":i._handleMonths();break;case"monthNameFormat":i._refreshCalendarMode(),i._refreshHeaderTitle();break;case"restrictedDates":i._setRestrictedDates(i.restrictedDates=i._getValidDates(n));break;case"rightToLeft":i._refreshDayOfWeekTitles(),i._handleMonths();break;case"scrollButtonsNavigationMode":i._setScrollButtonsNavigationMode();break;case"selectedDates":if(i._clearSelection(!0),i._validateSelectedDates(i._getValidDates(n)),i._applySelectionMode(!0),i._viewDates){let a=i.selectedDates[i.selectedDates.length-1];i._isDateInView(a)?i.selectedDates.map(r=>i._selectDate(r,!0,!0)):i._handleMonths(a)}i._refreshFooter(),i._setWeeksVisibility(i.$.monthsContainer),i.$.hiddenInput.value=i.selectedDates.toString(),i.isInitialized&&(i.$.fireEvent("change",{value:i.selectedDates}),i._updateTargetValue()),i._refreshTitle(),"month"!==i.displayMode&&i._setDisplayModeContent();break;case"selectionMode":i._applySelectionMode(!1,t),i._refreshTitle();break;case"tooltip":i._handleTooltip();break;case"tooltipArrow":case"tooltipArrowDirection":case"tooltipDelay":case"tooltipOffset":case"tooltipPosition":case"tooltipTemplate":if(i.$.tooltip){const a=e.replace("tooltip","");i.$.tooltip[a.charAt(0).toLowerCase()+a.slice(1)]=n}break;case"view":i._refreshTitle();break;case"viewSections":n.indexOf("title")>-1?i.$title.removeClass("smart-hidden"):i.$title.addClass("smart-hidden"),i._refreshTitle(),n.indexOf("header")>-1?i.$header.removeClass("smart-hidden"):i.$header.addClass("smart-hidden"),i._refreshHeaderTitle(),n.indexOf("footer")>-1?i.$footer.removeClass("smart-hidden"):i.$footer.addClass("smart-hidden"),i._refreshFooter(),i._setFocusable();break;case"weeks":i._setWeeksVisibility(i.$.monthsContainer);break;case"yearFormat":if(i._refreshCalendarMode(),i._refreshFooter(),i.months>1&&"month"===i.displayMode){let a=i._animationStarted?i.$.nextMonthsContainer.children:i.$.monthsContainer.children;for(let r=0;r<a.length;r++)a[r].firstElementChild.innerHTML=i.dateFormatFunction?i.dateFormatFunction(a[r]._date):i._monthsNames[a[r]._date.getMonth()]+" "+a[r]._date.toLocaleDateString(i.locale,{year:n})}i._refreshTitle(),i._refreshHeaderTitle()}}ready(){super.ready();const e=this;e._keysPressed={},e._applyAnimationSettings(),e.importantDates=e._getValidDates(e.importantDates),e.restrictedDates=e._getValidDates(e.restrictedDates)}render(){const e=this;e.setAttribute("role","dialog"),e._refreshMonthNames(),e._validateMinMax(),e._validateSelectedDates(e._getValidDates(e.selectedDates)),e._handleLayoutTemplate(e.$.title,e.titleTemplate),e._handleLayoutTemplate(e.$.header,e.headerTemplate),e._handleLayoutTemplate(e.$.footer,e.footerTemplate),e._handleImportantDateTemplate(),e._setFocusable(),e._refreshDayOfWeekTitles(),e._applySelectionMode(!0),e._handleMonths(0===e.selectedDates.length?new Date((new Date).setHours(0,0,0,0)):e.selectedDates[e.selectedDates.length-1]),e._handleTooltip(),e._updateViewSectionsVisibility(),e._setScrollButtonsNavigationMode(),e._refreshCalendarMode(),e._setDisplayMode(),e._refreshTitle(),e._refreshFooter(),e._refreshImportantDates(),e.$.monthElement&&e.$.monthElement._setDropDownSize&&e.$.monthElement._setDropDownSize(),e._changeEventFired=0,e.$.hiddenInput.value=e.selectedDates.toString(),e.shadowRoot&&e.appendChild(e.$.hiddenInput),e.isInitialized=!0,super.render()}refresh(){this.isInitialized&&this.render()}_updateViewSectionsVisibility(){const e=this;e.viewSections.indexOf("title")>-1?e.$title.removeClass("smart-hidden"):e.$title.addClass("smart-hidden"),e.viewSections.indexOf("header")>-1?e.$header.removeClass("smart-hidden"):e.$header.addClass("smart-hidden"),e.viewSections.indexOf("footer")>-1?e.$footer.removeClass("smart-hidden"):e.$footer.addClass("smart-hidden")}clearSelection(){this._clearSelection()}_setFocusable(){const e=this;let t=e.tabIndex>0?e.tabIndex:0;function n(i,a){if(a)return i&&i instanceof a?("function"==typeof i._setFocusable&&i.isCompleted?i.unfocusable=t<=-1:i.setAttribute("tabindex",t),i):i||void 0}(e.disabled||e.unfocusable)&&(t=-1),e.$.previousMonthButton=n(e.$.previousMonthButton,Smart.Button),e.$.nextMonthButton=n(e.$.nextMonthButton,Smart.Button),e.$.nextYearButton=n(e.$.nextYearButton,Smart.Button),e.$.previousYearButton=n(e.$.previousYearButton,Smart.Button),e.$.monthElement=n(e.$.monthElement,Smart.Input),e.$.yearElement=n(e.$.yearElement,HTMLInputElement),e.viewSections.indexOf("title")>-1&&(e.$.dateContainer.setAttribute("tabindex",t),e.$.yearContainer.setAttribute("tabindex",t)),e.$.body.setAttribute("tabindex",t),"default"===e.calendarMode?e.$.dateElement.setAttribute("tabindex",t):e.$.dateElement.removeAttribute("tabindex"),e.unfocusable?e.removeAttribute("tabindex"):e.tabIndex=e.readonly&&!e.disabled?e.tabIndex>0?e.tabIndex:0:t}static get requires(){return{"Smart.DropDownList":"smart.dropdownlist.js","Smart.ListBox":"smart.listbox.js","Smart.RepeatButton":"smart.button.js","Smart.Tooltip":"smart.tooltip.js"}}navigate(e){const t=this;let n,i,a;if(e){if("number"==typeof e){if(e=parseInt(e),isNaN(e)||0===e)return!1;if(6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode){let r,o;t._focusedCell||t._focusCell();const s=[].slice.call(t._focusedCell.closest(".smart-calendar-weeks").children).filter(l=>!l.classList.contains("smart-hidden"));e<0?(o=s[0].querySelectorAll(".smart-calendar-cell"),r=t.rightToLeft?o[o.length-1]:o[0]):(o=s[s.length-1].querySelectorAll(".smart-calendar-cell"),r=t.rightToLeft?o[0]:o[o.length-1]),i=new Date(r.value),i.setDate(i.getDate()+e),n=i}else n=t._getNextDate(e)}else{if(n=e=t._getValidDate(e),a=!0,isNaN(n.getTime()))return!1;const r=t._viewDates[0];if(r&&n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear())return!1;6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode&&(i=n)}return!(!n||t.$.fireEvent("navigationChanging",{value:new Date(n),type:t.displayMode}).defaultPrevented||("month"!==t.displayMode?(!a&&t.hasAnimation?(t.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),"list"===t.displayModeView?t._setDisplayModeContent(n):t._navigationDate&&t._navigationDate.getTime()===n.getTime()||t._animateNavigation(n,e)):t._setDisplayModeContent(n),t.$.fireEvent("navigationChange",{value:new Date(n),type:t.displayMode}),0):(t.hasAnimation?(t._animateNavigation(n,e),t.$nextMonthsContainer.hasClass("smart-date-view-container")&&t.$nextMonthsContainer.removeClass("smart-date-view-container")):(t._handleMonths(n),t._refreshHeaderElements(),t._refreshHeaderTitle()),i&&(t._focusCell(t._getCellByDate(i,t._animationStarted?t.$.nextMonthsContainer:void 0),!0),t._updateWeeksVisibility(e)),t.$.fireEvent("navigationChange",{value:new Date(n),type:t.displayMode}),0)))}}set value(e){this._select(e)}get value(){return this.selectedDates&&this.selectedDates.length>0?this.selectedDates[0]:null}select(e){this._select(e)}_select(e){const t=this;t._viewDates&&void 0!==t._viewDates[0]&&"none"!==t.selectionMode&&e&&(e=t._getValidDate(e))instanceof Date&&("one"===t.selectionMode&&t.selectedDates.map(Number).indexOf(e.getTime())>-1||e.getTime()<t.min.getTime()||e.getTime()>t.max.getTime()||("one"!==t.selectionMode&&"default"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._clearSelection(!0),t._selectDate(e),1!==t.selectedDates.length||t._isDateInView(t.selectedDates[0])||t._handleMonths(t.selectedDates[0])))}today(){const e=this;let t=new Date;return t.setHours(0,0,0,0),t.getTime()<e.min.getTime()||t.getTime()>e.max.getTime()?t=new Date(e.max):e._selectDate(t),e._handleMonths(t),t}_animateNavigation(e,t,n){const i=this;i._navigationDate=e,i._animationSettings||i._applyAnimationSettings(),i.$animationPanel.addClass("smart-hidden"),i.$.dateViewContainer.style.transform="",i.$.dateViewContainer.style.opacity="",i.$.monthsContainer.style.transform="",i.$.monthsContainer.style.opacity="";const a="month"!==i.displayMode?i.$.dateViewContainer:i.$.monthsContainer,r=i.$.body[i._animationSettings.scrollMax]-i.$.body[i._animationSettings.size];i._scrollStep=i.$.body[i._animationSettings.size]*i._animationSettings.startSpeed,i._animationStarted&&i._getMonthCells(i.$.monthsContainer,i.rightToLeft).map(o=>{i._setCellState(o,"restricted",!1),i._setCellState(o,"selected",!1),i._setCellState(o,"otherMonth",!1),i._setCellState(o,"focus",!1),i._setCellState(o,"important",!1),i._setCellState(o,"today",!1),i._setCellState(o,"disabled",!1),i._setCellState(o,"hover",!1)}),i._animationStarted=!0,"month"!==i.displayMode?(i._setCellState(i._focusedCell,"focus",!1),i._setDisplayModeContent(e,i.$.nextMonthsContainer)):i._handleMonths(e,i.$.nextMonthsContainer),i.rightToLeft&&(t*=-1),n||(t>0?(a.style.order=1,i.$.nextMonthsContainer.style.order=3,(!i._animationStarted||i._animationStarted&&i.$.body[i._animationSettings.scrollSize]>i.$.body[i._animationSettings.scrollMax]*i._animationSettings.resetThreshold*2)&&(i.$.body[i._animationSettings.scrollSize]=0)):(a.style.order=3,i.$.nextMonthsContainer.style.order=1,(!i._animationStarted||i._animationStarted&&i.$.body[i._animationSettings.scrollSize]<i.$.body[i._animationSettings.scrollMax]*i._animationSettings.resetThreshold)&&(i.$.body[i._animationSettings.scrollSize]=i.$.body[i._animationSettings.scrollMax]))),cancelAnimationFrame(i._animationId),i._animationId=requestAnimationFrame(function o(){let l=i._scrollStep/2;(t>0?i.$.body[i._animationSettings.scrollSize]>=r:0===i.$.body[i._animationSettings.scrollSize])?i._animateNavigationCompleted():(t>0&&i.$.body[i._animationSettings.scrollSize]>r*i._animationSettings.easeThreshold?(l=Math.max(i.$.body[i._animationSettings.scrollSize]/i._animationSettings.stepEaseSize,Math.abs(l-(r-i.$.body[i._animationSettings.scrollSize])*i._animationSettings.step)),i._scrollStep=i._scrollStep*i._animationSettings.step+l):t<0&&i.$.body[i._animationSettings.scrollSize]<r*i._animationSettings.easeThreshold&&(l=Math.max(i.$.body[i._animationSettings.scrollMax]/i._animationSettings.stepEaseSize,Math.abs(l-i.$.body[i._animationSettings.scrollSize]*i._animationSettings.step)),i._scrollStep=i._scrollStep*i._animationSettings.step+l),i.$.body[i._animationSettings.scrollSize]+=t>0?i._scrollStep:-i._scrollStep,i._animationId=requestAnimationFrame(o))})}_animateNavigationCompleted(){const e=this;let t,n,i,a="month"!==e.displayMode?e.$.dateViewContainer:e.$.monthsContainer;if(cancelAnimationFrame(e._animationId),"month"!==e.displayMode){let r=[].slice.call(a.children).indexOf(e._focusedCell);a.innerHTML=e.$.nextMonthsContainer.innerHTML;let o,s=a.children[r];n=a.children,i=e.$.nextMonthsContainer.children;for(let l=0;l<n.length;l++)n[l].value=i[l].value,n[l].restricted=i[l].restricted,n[l].important=i[l].important,n[l].otherMonth=i[l].otherMonth,n[l].value.getTime()<=e.max.getTime()&&(o=n[l]);t=s&&s.value.getTime()>=e.max.getTime()?o.value:e._focusedCell?e._focusedCell.value:void 0}else{let r=a.children,o=e.$.nextMonthsContainer.children;e._focusedCell&&e.$.nextMonthsContainer.contains(e._focusedCell)&&(t=e._focusedCell.value);for(let s=0;s<r.length&&o[s]._date;s++){r[s]._date=o[s]._date,r[s].innerHTML=o[s].innerHTML,n=e._getMonthCells(r[s]),i=e._getMonthCells(o[s]);for(let l=0;l<n.length;l++)n[l].value=i[l].value,n[l].restricted=i[l].restricted,n[l].important=i[l].important,n[l].otherMonth=i[l].otherMonth,n[l].removeAttribute("focus")}e._selectedCells.length>0&&(e._selectedCells=e._selectedCells.map(s=>e._getCellByDate(s.value)).filter(s=>void 0!==s))}e._focusCell(e._getCellByDate(t)),a.style.order=1,e.$.nextMonthsContainer.style.order=3,e.$.body[e._animationSettings.scrollSize]=0,e._animationStarted=!1,delete e._navigationDate}_applyAnimationSettings(e){const t=this;t._animationSettings=t.animationSettings?t.animationSettings:t._animationSettings||{},"portrait"===t.scrollButtonsNavigationMode?(t._animationSettings.scrollMax="scrollHeight",t._animationSettings.size="offsetHeight",t._animationSettings.scrollSize="scrollTop"):(t._animationSettings.scrollMax="scrollWidth",t._animationSettings.size="offsetWidth",t._animationSettings.scrollSize="scrollLeft"),e||(t._animationSettings.startSpeed=t._animationSettings.startSpeed?t._animationSettings.startSpeed:.2,t._animationSettings.easeThreshold=t._animationSettings.easeThreshold?t._animationSettings.easeThreshold:.5,t._animationSettings.step=t._animationSettings.step?t._animationSettings.step:.25,t._animationSettings.stepEaseSize=t._animationSettings.stepEaseSize?t._animationSettings.stepEaseSize:200,t._animationSettings.resetThreshold=t._animationSettings.resetThreshold?t._animationSettings.resetThreshold:.2)}_applySelectionMode(e,t){const n=this;let i=[],a=!!e,r=n.selectionMode;function o(l,d){const c=n.$.monthsContainer.children;for(let u=0;u<c.length;u++)n._getMonthCells(c[u]).map(m=>{n._setCellState(m,l,d)})}switch("many"===r&&"range"===r||o("hover",!1),n._newRangeSelectionStarted=n.selectedDates.length>0&&"range"===r,-1!==["default","many","zeroOrMany","oneOrMany","week","range"].indexOf(r)?Array.from(n.getElementsByClassName("smart-calendar-month")).forEach(l=>l.setAttribute("aria-multiselectable",!0)):Array.from(n.getElementsByClassName("smart-calendar-month")).forEach(l=>l.removeAttribute("aria-multiselectable")),"none"!==r&&"none"!==t||o("selected",!1),r){case"none":return void n._clearSelection(a);case"range":return void(n.selectedDates.length>1&&n._selectMultipleDates(n.selectedDates[0],n.selectedDates[n.selectedDates.length-1]));case"many":case"default":case"oneOrMany":if(0===n.selectedDates.length){i.push(new Date(Math.min(Math.max(n.min.getTime(),(new Date).setHours(0,0,0,0)),n.max.getTime())));break}return;case"oneExtended":case"one":if(1===n.selectedDates.length)return;n.selectedDates.length>1?(i.push(n.selectedDates[n.selectedDates.length-1]),n._clearSelection(a)):i.push(new Date(Math.min(Math.max(n.min.getTime(),(new Date).setHours(0,0,0,0)),n.max.getTime())));break;case"zeroOrOne":if(n.selectedDates.length>1){i.push(n.selectedDates[n.selectedDates.length-1]),n._clearSelection(a);break}return;case"zeroOrMany":return;case"week":if(n.selectedDates.length>=1){let l=n.selectedDates[n.selectedDates.length-1];for(let d=0;d<7;d++)i.push(new Date(l)),l.setDate(l.getDate()+1);n._clearSelection(a)}}if(n.selectedDates=[],e)return void(n.selectedDates=i);const s=i.length;for(let l=0;l<s;l++)n._selectDate(i[l],l<s-1)}_clearSelection(e){const t=this,n=t.selectedDates.slice(0),i=t.selectionMode;if(t.isRendered){if(t._selectedCells&&t._selectedCells.map(a=>{t._setCellState(a,"selected",!1)}),t.selectedDates=[],t._selectedCells=[],"many"===i||"range"===i){const a=t.$.monthsContainer.children;for(let r=0;r<a.length;r++)t._getMonthCells(a[r]).map(o=>{t._setCellState(o,"hover",!1)})}t.$.footer&&t._refreshFooter(),t.$.hiddenInput.value=t.selectedDates.toString(),!e&&t.isInitialized&&n.length&&(t.$.fireEvent("change",{value:[]}),t._updateTargetValue()),t.$.title&&t._refreshTitle()}else t.set("selectedDates",[])}_bodyBlurStateHandler(e){this._bodyStateHandler(e),this.$.fireEvent("blur")}_bodyFocusStateHandler(e){this._bodyStateHandler(e),this.$.fireEvent("focus")}_bodyStateHandler(e){const t=this;if(t._focusedCell){if("blur"===e.type||"focus"===e.type&&t._noFocusingRequired)return t._noFocusingRequired=!1,void t._setCellState(t._focusedCell,"focus",!1);if("month"!==t.displayMode)return void("focus"!==e.type||t.$.dateViewContainer.querySelector("smart-calendar-cell[focus]")||t._setCellState(t._focusedCell||t.$.dateViewContainer.querySelector(".smart-calendar-cell"),"focus",!0))}"focus"===e.type&&t._focusCell()}_containerWheelHandler(e){const t=this;if(t.disabled||t.readonly||"month"!==t.displayMode&&"list"===t.displayModeView)return;let n,i;i=document.activeElement,t.shadowRoot?i=t.shadowRoot.activeElement:t.isInShadowDOM&&(i=t.getRootNode().activeElement),t.$.yearElement===i&&(n=12),(i&&t.shadowRoot||i.closest("smart-calendar")===t)&&(n=e.target===t.$.yearElement?12:1),n&&(e.preventDefault(),n=12===n?n:n*t.months,t.navigate(e.deltaY>0?-n:n))}_downHandler(e){const t=this;let n=e.originalEvent.target;if(t._dragStartDetails=void 0,t.disabled||t.readonly)return;if(t.hasRippleAnimation&&(n.value instanceof Date||n.parentElement&&n.parentElement.classList.contains("smart-calendar-title")||n.parentElement===t.$.dateElement)&&Smart.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY),n=e.originalEvent.target.closest(".smart-calendar-header"),e.originalEvent.target.closest(".smart-calendar-year-container")&&"decade"!==t.displayMode)return"classic"===t.calendarMode?void 0:void t._showDateView("year");if(e.originalEvent.target.closest(".smart-calendar-date-container")&&"month"!==t.displayMode)return"classic"===t.calendarMode?void 0:void t._displayModeHandler("list"===t.displayModeView?t.$.listViewContainer.querySelector("li.active"):t._focusedCell,"month");if(t._animationStarted&&t._animateNavigationCompleted(),Smart.Utilities.Core.isMobile&&e.originalEvent.target.closest(".smart-calendar-body")===t.$.body)return void(t._dragStartDetails={x:e.pageX,y:e.pageY,startTime:Date.now(),target:e.originalEvent.target});if(n=e.originalEvent.target,n.closest(".smart-calendar-week")||n.parentElement===t.$.dateViewContainer){for(;n&&!(n.value instanceof Date);)n=n.parentElement;return void(n&&("month"!==t.displayMode?t._displayModeHandler(n):t._weeksDownHandler(e,n)))}if(n.closest(".smart-calendar-month-element"))return;if(e.originalEvent.stopPropagation(),"list"===t.displayModeView&&"month"!==t.displayMode)return n=(t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target).closest("smart-list-item"),void(n&&t._displayModeHandler(n));const i=document.scrollingElement||document.documentElement,a=i.scrollLeft,r=i.scrollTop;t.unfocusable||t.focus(),window.scrollTo(a,r)}_displayModeHandler(e,t){const n=this;if(n._animationStarted&&n._animateNavigationCompleted(),e instanceof HTMLElement&&e.closest(".smart-calendar-week")&&e.otherMonth&&("decade"===n.displayMode&&(e.value.getFullYear()<n.min.getFullYear()||e.value.getFullYear()>n.max.getFullYear())||"year"===n.displayMode&&(e.value.getFullYear()<n.min.getFullYear()||e.value.getFullYear()===n.min.getFullYear()&&e.value.getMonth()<n.min.getMonth()||e.value.getFullYear()>n.max.getFullYear()||e.value.getFullYear()===n.max.getFullYear()&&e.value.getMonth()>n.max.getMonth())))return;switch(t=t||n.displayMode){case"year":t="month";break;case"decade":t="year"}if(n.displayMode===t)return;const i=n.$.listViewContainer,a=i&&i.contains(e);n.$.fireEvent("displayModeChanging",{oldDisplayMode:n.displayMode,newDisplayMode:t}).defaultPrevented||(n.set("displayMode",t),n.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),e.parentElement!==n.$.dateViewContainer||e.disabled||e.restricted||n._focusCell(e),n.hasAnimation?(a&&e instanceof HTMLLIElement?n.$.animationPanel.style.transformOrigin=e.offsetHeight?e.offsetWidth/2+"px "+(e.offsetTop+e.offsetHeight/2)+"px":i.offsetLeft+i.offsetWidth/2+"px "+(i.offsetTop+i.offsetHeight/2)+"px":(n.$.dateViewContainer.style.order=1,n.$.nextMonthsContainer.style.order=3,n.$.animationPanel.style.transformOrigin=(e=n._focusedCell).offsetLeft+e.offsetWidth/2+"px "+(e.offsetTop+e.offsetHeight/2)+"px"),n._animateView(1,e)):n._setDisplayModeContent(e.value instanceof Date?e.value:new Date(e.getAttribute("value")||e.value)))}_animateView(e,t){const n=this;let i,a,r=t instanceof Date?t:new Date(t.getAttribute("value")||t.value),o=!1,s=1,l=1;const d=n.$.listViewContainer;"list"===n.displayModeView?i=d.contains(t)?d:a="month"!==n.displayMode?n.$.monthsContainer:d:t.value instanceof Date||(t=n._focusedCell?n._focusedCell:n._selectedCells.length>0?n._selectedCells[n._selectedCells.length-1]:n._getCellByDate(new Date)),i||(i=t.parentElement===n.$.dateViewContainer?n.$.dateViewContainer:n.$.monthsContainer),a||(a="month"===n.displayMode?n.$.monthsContainer:"list"===n.displayModeView?d:n.$.dateViewContainer),a.style.transformOrigin=n.$.animationPanel.style.transformOrigin,i===d?(n.$.animationPanel.innerHTML="",n.$.animationPanel.appendChild(i.cloneNode(!0))):n.$.animationPanel.innerHTML=i.innerHTML,n._setDisplayModeContent(r),i.style.order=1,n.$.nextMonthsContainer.style.order=3,n.$.body[n._animationSettings.scrollSize]=0,n.$.animationPanel.style.width=n.$.body.offsetWidth+"px",n.$.animationPanel.style.height=n.$.body.offsetHeight+"px",n.$.animationPanel.style.transform="scale(1)",n.$.animationPanel.style.opacity=1,n.$animationPanel.removeClass("smart-hidden"),a.style.opacity="0",a.style.transform="scale(3.5)",i.$.hasClass("smart-calendar-date-view-container")?n.$animationPanel.addClass("smart-calendar-date-view-container"):n.$animationPanel.removeClass("smart-calendar-date-view-container"),cancelAnimationFrame(n._animationId),n._animationId=requestAnimationFrame(function c(){if((e>0&&s>=3.5||e<0&&s<=0)&&(o=!0),o){if(cancelAnimationFrame(n._animationId),n.$animationPanel.addClass("smart-hidden"),n.$.animationPanel.style.transform="",n.$.animationPanel.style.opacity="",i.style.order=1,n.$.nextMonthsContainer.style.order=3,n.$.body[n._animationSettings.scrollSize]=0,a.style.transform="",a.style.opacity="",n.unfocusable)return;"month"===n.displayMode?n.$.body.focus():"list"===n.displayModeView&&n.focus()}else n.$.animationPanel.style.opacity=l,a.style.opacity=1-l,l-=.05,e>0?(n.$.animationPanel.style.transform="scale("+s+")",a.style.transform="scale("+Math.min((s-1)/2,1)+")",s+=.125):(n.$.animationPanel.style.transform="scale("+Math.max(s,0)+")",a.style.transform="scale("+Math.max(1+s,1)+")",s-=.06),n._animationId=requestAnimationFrame(c)})}_documentUpHandler(e){const t=this;let n=e.originalEvent.target;if((t.isInShadowDOM||t.shadowRoot&&n===t)&&(n=e.originalEvent.composedPath()[0]),t._newRangeSelectionStarted&&!t.$.container.contains(n)&&delete t._newRangeSelectionStarted,n&&n.classList&&n.classList.contains("smart-calendar-cell")&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault(),e.preventDefault()),!Smart.Utilities.Core.isMobile||!t._dragStartDetails||e.originalEvent.target.closest(".smart-calendar-list-view"))return;delete t._previousIteration;const i=Date.now();let a={};(t.isInShadowDOM||t.shadowRoot&&n===t)&&(n=e.originalEvent.composedPath()[0]),"portrait"===t.scrollButtonsNavigationMode?(a.coordinate="y",a.direction="pageY"):(a.coordinate="x",a.direction="pageX");const r=t._dragStartDetails.step*(t.rightToLeft?-1:1);if(Math.abs(t._dragStartDetails[a.coordinate]-e[a.direction])<=10){if(n="list"===t.displayModeView&&"month"!==t.displayMode?n.closest("smart-list-item"):n,!n)return void(t._dragStartDetails=void 0);if("month"!==t.displayMode)return t._displayModeHandler(n),"portrait"===t.scrollButtonsNavigationMode?t.$.body.scrollTop=0:t.$.body.scrollLeft=0,void(t._dragStartDetails=void 0);if(t._weeksDownHandler(e,n),!t.disableAutoNavigation&&n.otherMonth)return}else{const s=Math.abs((e[a.direction]-t._dragStartDetails[a.coordinate])/(i-t._dragStartDetails.startTime));if(s>1){const l=parseInt(s);for(let d=0;d<l;d++)if(!t.navigate(r)){t._cancelAnimation();break}return void(t._dragStartDetails=void 0)}}if(!t.hasAnimation)return t.navigate(t._dragStartDetails.step),void(t._dragStartDetails=void 0);let o=("month"!==t.displayMode?t.$.dateViewContainer[t._animationSettings.scrollMax]:t.$.monthsContainer[t._animationSettings.scrollMax])+t.$.monthsSeparator[t._animationSettings.size];if(t._dragStartDetails.step>0&&t.$.body[t._animationSettings.scrollSize]>o*t._animationSettings.easeThreshold||t._dragStartDetails.step<0&&t.$.body[t._animationSettings.scrollSize]<o*t._animationSettings.easeThreshold)return t._animateNavigation(t._dragStartDetails.navigationDate,r,!0),6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode&&t._updateWeeksVisibility(r,t._getCellByDate(t._dragStartDetails.navigationDate,t.$.nextMonthsContainer)),t.$.fireEvent("navigationChange",{value:new Date(t._dragStartDetails.navigationDate),type:t.displayMode}),void(t._dragStartDetails=void 0);t._cancelAnimation(),t._dragStartDetails=void 0}_cancelAnimation(){const e=this,t="month"!==e.displayMode?e.$.dateViewContainer:e.$.monthsContainer;let n=e.$.animationPanel.style.transform,i=e.$.animationPanel.style.opacity;n&&(n=parseFloat(n.substring(n.indexOf("(")+1||0,n.indexOf(")")))),t.style.order=1,e.$.nextMonthsContainer.style.order=3,e.$.body[e._animationSettings.scrollSize]=0,e._animationId=requestAnimationFrame(function a(){if(!n||n>=3.5){cancelAnimationFrame(e._animationId),e.$animationPanel.addClass("smart-hidden"),e.$.animationPanel.style.transform="",e.$.animationPanel.style.opacity="";const r="month"===e.displayMode?e.$.monthsContainer:e.$.listViewContainer;return r.style.transform="",r.style.opacity="",e.unfocusable||("month"===e.displayMode?e.$.body.focus():"list"===e.displayModeView&&e.focus()),void(e._animationStarted=!1)}e.$.animationPanel.style.opacity=i-=.25,e.$.animationPanel.style.transform="scale("+(n+=.5)+")",e._animationId=requestAnimationFrame(a)})}_focusCell(e,t){const n=this;if(n._focusedCell&&n._setCellState(n._focusedCell,"focus",!1),n.disabled||n.readonly)return;if(e)return"month"!==n.displayMode?(n._setCellState(e,"focus",!0),void(n._focusedCell=e)):e.disabled||e.restricted?void 0:(t||n._setCellState(e,"focus",!0),void(n._focusedCell=e));if("month"!==n.displayMode&&0===n.$.monthsContainer.offsetHeight)return;const i=n._selectedCells[n._selectedCells.length-1];if(i&&i.offsetHeight)n._setCellState(i,"focus",!0),n._focusedCell=i;else{const a=n.$.monthsContainer.children;if(!a[0]._date||n.min.getTime<a[0]._date.getTime())return;const r=n._getMonthCells(a[0],n.rightToLeft);for(let o=0;o<r.length;o++){const s=r[o];if(!s.otherMonth){if(s.disabled||s.restricted||!s.offsetHeight)continue;n._focusedCell=s;break}}}n._focusedCell&&n._setCellState(n._focusedCell,"focus",!0)}_getDays(e,t){const n=t.length;let i=[];if(n>0)for(let a=0;a<n;a++)t[a].getFullYear()===e.getFullYear()&&t[a].getMonth()===e.getMonth()&&i.push(t[a].getDate());return i}_getCellByDate(e,t){const n=this;if(!(e instanceof Date))return;if(t||(t=n.$.monthsContainer),"month"!==n.displayMode){if("list"===n.displayModeView)return;let o=arguments[1]?n.$.nextMonthsContainer.children:n.$.dateViewContainer.children;for(let s=0;s<o.length;s++)if("year"!==n.displayMode){if(o[s].value.getFullYear()===e.getFullYear())return o[s]}else if(o[s].value.getMonth()===e.getMonth())return o[s];return}let i,a,r=t.children;for(let o=0;o<r.length;o++)if(e.getFullYear()===r[o]._date.getFullYear()&&e.getMonth()===r[o]._date.getMonth()){i=r[o];break}if(i){a=n._getMonthCells(i);for(let o=0;o<a.length;o++)if((!a[o].otherMonth||a[o].hover)&&a[o].value.getMonth()===e.getMonth()&&a[o].value.getDate()===e.getDate())return a[o]}}_getMonthCells(e,t){const n=e.getElementsByClassName("smart-calendar-week");let i=[];if(t)for(let a=0;a<n.length;a++){let r=n[a].children;for(let o=r.length-1;o>0;o--)r[o].classList.contains("smart-calendar-cell")&&i.push(r[o])}else for(let a=0;a<n.length;a++){let r=n[a].children;for(let o=1;o<r.length;o++)r[o].classList.contains("smart-calendar-cell")&&i.push(r[o])}return i}_getWeekNumber(e){let n,i=new Date(e.getFullYear(),0,1),a=Math.round((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1,r=i.getDay()-this.firstDayOfWeek;return r=r>=0?r:r+7,r<4?(n=Math.floor((a+r-1)/7)+1,n>52&&(i=new Date(e.getFullYear()+1,0,1),r=i.getDay()-this.firstDayOfWeek,r=r>=0?r:r+7,n=r<4?1:53)):n=Math.round((a+r-1)/7),n}_handleDateSelection(e){const t=this;if(void 0!==e&&!e.disabled&&!e.restricted)switch(t.selectionMode){case"none":t._focusCell(e);break;case"oneExtended":case"one":case"default":if(t._keysPressed.Control)return t.selectedDates.length>1||1===t.selectedDates.length&&!e.selected?void t._selectDate(e.value):void t._focusCell(e);if(t._keysPressed.Shift)return void t._selectMultipleDates(new Date(t.selectedDates[0]),e);t._clearSelection(!0),t._selectDate(e.value,t._selectedCells.indexOf(e.value)>-1);break;case"many":{if(0===t.selectedDates.length)return void t._selectDate(e.value);const n=t.selectedDates[t.selectedDates.length-1];let i=new Date(t.selectedDates[0]);if(e.value.getTime()===i.getTime()||e.value.getTime()===n.getTime())return t._clearSelection(),void t._focusCell(e);t.selectedDates.length>0&&t._selectMultipleDates(i,e);break}case"range":{if(t.selectedDates.length>1&&!t._keysPressed.Control&&!t._newRangeSelectionStarted&&t._clearSelection(!0),0===t.selectedDates.length||t._keysPressed.Control&&t.selectedDates.length>1&&!t._newRangeSelectionStarted)return e.value&&t.selectedDates.find(a=>a.getTime()===e.value.getTime())?void 0:(t._newRangeSelectionStarted=!0,void t._selectDate(e.value));const n=t.selectedDates[t.selectedDates.length-1];let i=t._keysPressed.Control||t._newRangeSelectionStarted?n:new Date(t.selectedDates[0]);t.selectedDates.length>0&&t._selectMultipleDates(i,e),delete t._newRangeSelectionStarted;break}case"zeroOrMany":t._selectDate(e.value);break;case"oneOrMany":if(1===t.selectedDates.length&&e.selected)return void t._focusCell(e);t._selectDate(e.value);break;case"zeroOrOne":if(1===t.selectedDates.length&&e.selected)return void t._selectDate(e.value);t._clearSelection(!0),t._selectDate(e.value);break;case"week":{if(e.selected&&(e.value.getTime()===t.selectedDates[0].getTime()||e.value.getTime()===t.selectedDates[t.selectedDates.length-1].getTime()))return t._clearSelection(),void t._focusCell(e);t._clearSelection(!0);let n=new Date(e.value);t._selectDate(n);for(let i=1;i<7;i++)n.setDate(n.getDate()+1),t._selectDate(n);t._isDateInView(n)||t.navigate(1);break}}}_handleImportantDateTemplate(){const e=this;if(e._importantDatesTemplate=e._validateTemplate("importantDatesTemplate",e.importantDatesTemplate),!e._importantDatesTemplate||!e._importantDatesTemplate.content)return;let t=e._importantDatesTemplate.content;const n=t.childNodes.length,i=/{{\w+}}/g;let a;e._bindingDetails=[];for(let r=0;r<n;r++)if(a=i.exec(t.childNodes[r].innerHTML),a)return void e._bindingDetails.push({childNodeIndex:r,bindingString:a[0]})}_handleLayoutTemplate(e,t){const n=this,i=n._validateTemplate(e.$.hasClass("smart-header")?"headerTemplate":e.$.hasClass("smart-calendar-footer")?"footerTemplate":"titleTemplate",t);if(!i||!i.content)return void("function"==typeof t&&t(e,{}));n._layoutTemplates||(n._layoutTemplates=[]);let a=document.importNode(i.content,!0);e.innerHTML="";const r=a.childNodes.length,o=/{{\w+}}/g;let s,l=[];for(let d=0;d<r;d++)s=o.exec(a.childNodes[d].innerHTML),s&&l.push({childNodeIndex:d,bindingString:s[0]});if(n._layoutTemplates=n._layoutTemplates.filter(d=>d.selector!==e),n._layoutTemplates.push({selector:e,template:i,bindings:l}),n.shadowRoot)return e.innerHTML="<slot></slot>",void n.appendChild(a);e.appendChild(a)}_handleCalendarCellHover(e,t){const n=this;if(!n._animationStarted){if("month"===n.displayMode)if("mouseover"===e.type&&("many"===n.selectionMode||"range"===n.selectionMode&&n._newRangeSelectionStarted)&&n.selectedDates.length>0){const i=n.$.monthsContainer.children;for(let d=0;d<i.length;d++)n._getMonthCells(i[d]).map(c=>{n._setCellState(c,"hover",!1)});let a=new Date("range"===n.selectionMode?n.selectedDates[n.selectedDates.length-1]:n.selectedDates[0]),r=new Date(t.value),o=t;const s=a.getTime()>r.getTime()?-1:1,l=function(){o=n._getCellByDate(a),!o||o.selected||o.restricted||n._setCellState(o,"hover",!0)};if(a.getTime()!==r.getTime()){for(a.setDate(a.getDate()+s);a.getTime()!==r.getTime();)l(),a.setDate(a.getDate()+s);l()}}else n._setCellState(t,"hover",!1);n._setCellState(t,"hover","mouseover"===e.type&&!t.otherMonth)}}_handleMonths(e,t){const n=this;let i;function a(o){let s,l=o.children.length,d=document.createDocumentFragment();for(;l<n.months;l++)s=n.$.month.cloneNode(!1),s.innerHTML=n.$.month.innerHTML,d.appendChild(s);return d}function r(o){let s=o.children;for(let l=0;l<s.length;l++)n._setMonth(e,s[l]),e.setMonth(e.getMonth()+1);n._setWeeksVisibility(o),n._refreshHeaderElements(),n._refreshHeaderTitle(),n.tooltip&&n.$.tooltip&&n.$.tooltip.close(),n.$.body===document.activeElement&&n._focusCell()}if(e||(e=n._viewDates&&n._viewDates.length>0?n._viewDates[0]:new Date),e=new Date(Math.min(Math.max(n.min.getTime(),e.getTime()),n.max.getTime())),t||(t=n.$.monthsContainer),n._selectedCells=[],n.hasAnimation){for(i=n.$.nextMonthsContainer.children,i.length>0&&i[0].value instanceof Date&&(n.$.nextMonthsContainer.innerHTML="");n.$.nextMonthsContainer.childElementCount<n.months;)n.$.nextMonthsContainer.appendChild(a(n.$.nextMonthsContainer));for(;n.$.nextMonthsContainer.childElementCount>n.months;)n.$.nextMonthsContainer.removeChild(i[n.$.nextMonthsContainer.childElementCount-1]);if(arguments[1]===n.$.nextMonthsContainer)return void r(n.$.nextMonthsContainer)}if(i=n.$.monthsContainer.children,i.length>n.months){for(;n.$.monthsContainer.childElementCount>n.months;)n.$.monthsContainer.removeChild(i[n.$.monthsContainer.childElementCount-1]),n._viewDates.pop();r(n.$.monthsContainer)}else n.$.monthsContainer.children.length!==n.months&&(n._viewDates=[],n.$.monthsContainer.appendChild(a(n.$.monthsContainer))),r(n.$.monthsContainer)}_headerChangeHandler(e){const t=this;if(e.stopPropagation(),t.disabled||t.readonly)return;if(e.target.ownerElement===t.$.monthElement&&0!==t._changeEventFired)return void t._changeEventFired--;const n=t.displayMode;e.target===t.$.yearElement&&(t._viewDates[0].setFullYear(Math.min(Math.max(t.min.getFullYear(),isNaN(parseInt(t.$.yearElement.value))?0:parseInt(t.$.yearElement.value)),t.max.getFullYear())),t._handleMonths(t._viewDates[0])),!t.$.monthElement||e.target!==t.$.monthElement&&e.target.ownerElement!==t.$.monthElement||(t._handleMonths(new Date(t.$.monthsContainer.children[0]._date.getFullYear(),t.$.monthElement.selectedIndex,1)),"month"!==n&&t._setDisplayMode(t.displayMode,t.displayMode="month"))}_headerClickHandler(e){const t=this;if(t.disabled||t.readonly)return;let n=e.target.closest("smart-repeat-button");if(!n||!n.disabled){switch(n){case t.$.previousMonthButton:return t._isInteractiveNavigation=!0,void t.navigate(-1*t.months*(t.rightToLeft?-1:1));case t.$.nextMonthButton:return t._isInteractiveNavigation=!0,void t.navigate(1*t.months*(t.rightToLeft?-1:1));case t.$.previousYearButton:return void t.navigate(-12);case t.$.nextYearButton:return void t.navigate(12)}"classic"!==t.calendarMode&&e.target.closest(".smart-calendar-date-element")&&(t._animationStarted&&t._animateNavigationCompleted(),t._isInteractiveNavigation=!0,t._showDateView())}}_selectMultipleDates(e,t){const n=this;if(t instanceof HTMLElement&&(t=t.value),n._newRangeSelectionStarted?n._selectDate(e,!0):n._clearSelection(!0),"range"!==n.selectionMode||t.getTime()!==e.getTime()){if((e=new Date(e)).getTime()<t.getTime())for(;e.getTime()<=t.getTime();)n.selectedDates.find(i=>i.getTime()===e.getTime())||n._selectDate(e,!0),e.setDate(e.getDate()+1);else if(e.getTime()>t.getTime())for(;e.getTime()>=t.getTime();)n.selectedDates.find(i=>i.getTime()===e.getTime())||n._selectDate(e,!0),e.setDate(e.getDate()-1);else n._selectDate(t,!0);n.$.hiddenInput.value=n.selectedDates.toString(),n._refreshFooter(),n.isInitialized&&(n.$.fireEvent("change",{value:n.selectedDates}),n._updateTargetValue()),n._refreshTitle()}}_setDisplayMode(e,t,n){const i=this;if(i.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),0!==arguments.length&&i.hasAnimation)if(i._animationStarted&&(i.displayMode=e,i._animateNavigationCompleted(),i.displayMode=t),"month"===e&&"year"===t||"year"===e&&"decade"===t)i.displayMode=e,i._showDateView(n?void 0:i.displayMode);else if("month"===e&&"decade"===t)i._showDateView(i.displayMode="year");else{let a;"list"===i.displayModeView?(a=i.$.listViewContainer.querySelector("li.active"),i.$.animationPanel.style.transformOrigin=a.offsetLeft+a.offsetWidth/2+"px "+(a.offsetTop>0?a.offsetTop-a.offsetHeight/2:a.offsetTop+a.offsetHeight/2)+"px"):(i.$.dateViewContainer.style.order=1,i.$.nextMonthsContainer.style.order=3,a=i._focusedCell,i.$.animationPanel.style.transformOrigin=a.offsetLeft+a.offsetWidth/2+"px "+(a.offsetTop+a.offsetHeight/2)+"px"),i._animateView(1,a)}else{if("classic"===i.calendarMode)return void(i.displayMode="month");if("month"!==i.displayMode&&(i.$monthsContainer.addClass("smart-hidden"),i.$dateViewContainer.hasClass("smart-hidden")&&i.$dateViewContainer.removeClass("smart-hidden")),!i.isCompleted&&"month"===i.displayMode)return;i._setDisplayModeContent()}}_setDisplayModeContent(e,t){const n=this;let i=e&&"Invalid Date"!==e.toString()?e:n.selectedDates.length>0?n.selectedDates[n.selectedDates.length-1]:new Date;i.setTime(Math.min(Math.max(i.getTime(),n.min.getTime()),n.max.getTime())),i.setHours(0,0,0,0);const a=n._prepareView(i);if(!a)return;let r;t?(n.$.nextMonthsContainer.innerHTML=n.$.dateViewContainer.innerHTML,r=n.$.nextMonthsContainer):r=n.$.dateViewContainer;const o=r.children;let s;for(let l=0;l<o.length;l++){const d=o[l];d.innerHTML=a.viewContent[l],d.value=a.dates[l],"year"===n.displayMode?(d.value.getFullYear()<n.min.getFullYear()||d.value.getFullYear()===n.min.getFullYear()&&d.value.getMonth()<n.min.getMonth()||d.value.getFullYear()>n.max.getFullYear()||d.value.getFullYear()===n.max.getFullYear()&&d.value.getMonth()>n.max.getMonth()?n._setCellState(d,"otherMonth",!0):n._setCellState(d,"otherMonth",!1),i.getFullYear()===d.value.getFullYear()&&i.getMonth()===d.value.getMonth()&&(s=d)):"decade"===n.displayMode&&(0===l||l===o.length-1||d.value.getFullYear()<n.min.getFullYear()||d.value.getFullYear()>n.max.getFullYear()?n._setCellState(d,"otherMonth",!0):n._setCellState(d,"otherMonth",!1),i.getFullYear()===d.value.getFullYear()&&(s=d)),n._setCellState(d,"hover",!1),n._setCellState(d,"focus",!1)}if(s.otherMonth)for(let l=0;l<o.length;l++)if(!o[l].otherMonth){s=o[l];break}n._mobileScrolling||(n._focusedCell&&n._setCellState(n._focusedCell,"focus",!1),n._focusedCell=s,n._focusCell(n._focusedCell),n._refreshHeaderTitle(),n._refreshHeaderElements(),n.$.fireEvent("displayModeChange"),n._isInteractiveNavigation?n._isInteractiveNavigation=void 0:(n._setCellState(s,"focus",!0),setTimeout(function(){n.unfocusable||(n.$.body.focus(),n._focusCell(n._focusedCell))},0)))}_prepareView(e){const t=this,n=t.$.listViewContainer;let i,a,r=[],o=[];function s(l,d,c){let u=new Date(l,d+1,0),m=u.getDate();return u.setDate(c>m?m:c),u}if("month"===t.displayMode)return t.$nextMonthsContainer.hasClass("smart-date-view-container")&&t.$nextMonthsContainer.removeClass("smart-date-view-container"),n&&n.classList.add("smart-hidden"),t.$dateViewContainer.hasClass("smart-visibility-hidden")&&t.$dateViewContainer.removeClass("smart-visibility-hidden"),t._isDateInView(e)||t._handleMonths(e),t.$header.hasClass("smart-hidden")&&t.$header.removeClass("smart-hidden"),t.$body.hasClass("smart-calendar-list-view")&&t.$body.removeClass("smart-calendar-list-view"),t.$dateContainer.addClass("smart-calendar-selected"),t.$yearContainer.removeClass("smart-calendar-selected"),t.$dateViewContainer.addClass("smart-hidden"),t.$monthsContainer.removeClass("smart-hidden"),t._refreshHeaderTitle(),t.$.body.setAttribute("tabindex",t.tabIndex>0?t.tabIndex:0),t._refreshHeaderElements(),t.unfocusable||t.$.body.focus(),t._focusCell(t._getCellByDate(e)),void t.$.fireEvent("displayModeChange");if("list"===t.displayModeView)return t._setDisplayModeListContent(e),void t.$.fireEvent("displayModeChange");if(t.$header.hasClass("smart-hidden")&&t.$header.removeClass("smart-hidden"),t.$dateViewContainer.hasClass("smart-visibility-hidden")&&t.$dateViewContainer.removeClass("smart-visibility-hidden"),n&&n.classList.add("smart-hidden"),t.$.body.setAttribute("tabindex",t.tabIndex>0?t.tabIndex:0),"year"===t.displayMode){let l=new Date;for(let d=0;d<12;d++)l=s(l.getFullYear(),d,l.getDate()),r.push(l.toLocaleDateString(t.locale,{month:"short"})),o.push(s(e.getFullYear(),d,e.getDate()))}else{i=e?e.getFullYear():t._viewDates[0].getFullYear(),a=i%10,0!==a&&(i-=a),i-=1;for(let l=0;l<12;l++)r.push(i+""),o.push(new Date(i,e.getMonth(),e.getDate())),++i}return{viewContent:r,dates:o}}_setDisplayModeListContent(e){const t=this;let n=[];function i(a,r,o){let s=new Date(a,r+1,0),l=s.getDate();return s.setDate(o>l?l:o),s}if(t.$dateViewContainer.addClass("smart-visibility-hidden"),"year"===t.displayMode){let a=new Date;for(let r=0;r<12;r++)a=i(a.getFullYear(),r,a.getDate()),n.push({label:a.toLocaleDateString(t.locale,{month:"short"}),value:i(e.getFullYear(),r,e.getDate()).toDateString()});t.$yearContainer.removeClass("smart-calendar-selected"),t.$dateContainer.addClass("smart-calendar-selected")}else{let a=t.min.getFullYear(),r=t.max.getFullYear();r=Math.min(t.max.getFullYear(),e.getFullYear()+10),a=Math.max(t.min.getFullYear(),r-10);for(let o=a;o<r;o++)n.push({label:o.toString(),value:new Date(o,e.getMonth(),e.getDate()).toDateString()});t.$yearContainer.addClass("smart-calendar-selected"),t.$dateContainer.removeClass("smart-calendar-selected")}t._prepareListViewer(n,e.toDateString()),t._refreshHeaderTitle(),t._refreshHeaderElements(),t.unfocusable||t.focus()}_prepareListViewer(e=[],t){const n=this,i=n.$.body;let a=n.$.listViewContainer;a||(n.$.listViewContainer=a=document.createElement("smart-scroll-viewer"),a.classList.add("smart-input-drop-down-menu","smart-calendar-list-view"),a.ensureVisible=n._listViewerEnsureVisible.bind(n),a._handleKeyStrokes=n._listViewerKeyStrokesHandler.bind(n),a._setActiveDescendant=n._listViewerSetActiveDescendant.bind(n));let r=a.querySelector("ul");r||(r=document.createElement("ul"),r.onclick=n._listViewContainerItemClickHandler.bind(n),a.appendChild(r)),i.contains(a)&&i.removeChild(a),r.innerHTML="";for(let o=0;o<e.length;o++){const s=e[o],l=s.label,d=s.value,c=document.createElement("li"),u=document.createElement("a");t===d?(c.setAttribute("aria-selected",!0),c.classList.add("active"),t=c):c.setAttribute("aria-selected",!1),c.id=a.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),c.setAttribute("value",d),c.setAttribute("role","option"),c.setAttribute("aria-label",l),u.innerHTML=l,u.setAttribute("aria-hidden",!0),c.appendChild(u),r.appendChild(c)}a.classList.remove("smart-hidden"),i.classList.add("smart-calendar-list-view"),i.removeAttribute("tabindex"),i.insertBefore(a,n.$.animationPanel),a.refresh(),a.ensureVisible()}_listViewerEnsureVisible(){const e=this.$.listViewContainer,t=e.querySelector(".active");if(!t)return;const n=Array.from(e.querySelectorAll("li"));t.offsetTop+t.offsetHeight>=e.scrollTop+e.offsetHeight&&(e.scrollTop=t.offsetTop+t.offsetHeight),(t.offsetTop<=e.scrollTop||t.offsetTop>=e.scrollTop+e.offsetHeight)&&(e.scrollTop=t.offsetTop),0===n.indexOf(t)?e.scrollTop=0:n.indexOf(t)===n.length-1&&(e.scrollTop=e.scrollHeight)}_listViewerKeyStrokesHandler(e){if(["ArrowUp","ArrowDown"].indexOf(e)<0)return;event.preventDefault();const t=this.$.listViewContainer,n=t.querySelector(".active");if(!n){const a=t.querySelector("li");return a.classList.add("active"),void t._setActiveDescendant(a)}const i=n["ArrowDown"===e?"nextElementSibling":"previousElementSibling"];i&&(n.classList.remove("active"),i.classList.add("active"),t._setActiveDescendant(i),t.ensureVisible())}_listViewerSetActiveDescendant(e){const t=this.$.listViewContainer;e?t.setAttribute("aria-activedescendant",e.id):t.removeAttribute("aria-activedescendant")}_listViewContainerItemClickHandler(e){const t=this,n=e.target.closest("li");n&&"list"===t.displayModeView&&"month"!==t.displayMode&&t._displayModeHandler(n)}_isDateInView(e){const t=this;if(!e)return!1;for(let n=0;n<t._viewDates.length;n++)if(e.getFullYear()===t._viewDates[n].getFullYear()&&e.getMonth()===t._viewDates[n].getMonth()){let i=t._getCellByDate(e,t._animationStarted?t.$.nextMonthsContainer:void 0);return i?!(i.otherMonth||!i.offsetHeight||i.classList.contains("smart-visibility-hidden")):void 0}return!1}_keyDownHandler(e){const t=this;if(t.disabled||t.readonly)return;const n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement;switch(n){case t.$.yearElement:"Escape"===e.key&&t._refreshHeaderElements();break;case t.$.dateElement:if("default"===t.calendarMode&&" "===e.key||"Enter"===e.key)return e.preventDefault(),t._isInteractiveNavigation=!0,void t._showDateView();t._focusedCell||t._focusCell(),e.key.indexOf("Arrow")>-1&&t.$.dateElement===n&&!t.unfocusable&&t.$.body.focus(),t._navigateDays(e);break;case t.$.body:" "===e.key&&e.preventDefault(),t._navigateDays(e);break;case t.$.yearContainer:if(" "!==e.key&&"Enter"!==e.key||"decade"===t.displayMode||(e.preventDefault(),t._isInteractiveNavigation=!0,t._showDateView("year")),e.key.indexOf("Arrow")>-1){if(e.preventDefault(),t._focusedCell||t._focusCell(),"month"!==t.displayMode&&"list"===t.displayModeView)return t.unfocusable||t.focus(),void t.$.listViewContainer._handleKeyStrokes(e.key);t._navigateDays(e)}break;case t.$.dateContainer:if(" "!==e.key&&"Enter"!==e.key||"month"===t.displayMode||(e.preventDefault(),t._displayModeHandler("list"===t.displayModeView?t.$.listViewContainer.querySelector("li.active"):t._focusedCell,"month")),e.key.indexOf("Arrow")>-1){if(t._focusedCell||t._focusCell(),"month"!==t.displayMode&&"list"===t.displayModeView)return t.unfocusable||t.focus(),void t.$.listViewContainer._handleKeyStrokes(e.key);t._navigateDays(e)}break;default:if("month"!==t.displayMode&&"list"===t.displayModeView)return["Arrow","End","Home","Page"].indexOf(e.key)&&e.preventDefault()," "===e.key||"Enter"===e.key||e.ctrlKey&&("ArrowUp"===e.key||"ArrowDown"===e.key)?void t._navigateDays(e):void t.$.listViewContainer._handleKeyStrokes(e.key);e.key.indexOf("Arrow")>-1&&(t._focusedCell||t._focusCell(),t._navigateDays(e))}}_showDateView(e){const t=this;switch(e=e||t.displayMode){case"month":e="year";break;case"year":e="decade"}if(t.displayMode===e||t.$.fireEvent("displayModeChanging",{oldDisplayMode:t.displayMode,newDisplayMode:e}).defaultPrevented)return;let n;if(t.displayMode=e,"list"===t.displayModeView&&"month"!==t.displayMode){t._setDisplayModeListContent(t._focusedCell?t._focusedCell.value:t._viewDates[0]);const i=t.$.listViewContainer;i.classList.remove("smart-hidden"),n=i.querySelector("li.active"),t.$.animationPanel.style.transformOrigin=n.offsetHeight?n.offsetLeft+n.offsetWidth/2+"px "+(n.offsetTop>0?n.offsetTop-n.offsetHeight/2:n.offsetTop+n.offsetHeight/2)+"px":i.offsetLeft+i.offsetWidth/2+"px "+(n.offsetTop>0?n.offsetTop-n.offsetHeight/2:i.offsetTop+i.offsetHeight/2)+"px"}else t._focusedCell||t._focusCell(),n=t._focusedCell,t.$.animationPanel.style.transformOrigin=n.offsetLeft+n.offsetWidth/2+"px "+(n.offsetTop+n.offsetHeight/2)+"px";t.$monthsContainer.addClass("smart-hidden"),t.$dateViewContainer.hasClass("smart-hidden")&&t.$dateViewContainer.removeClass("smart-hidden"),"decade"===t.displayMode&&(t.$yearContainer.addClass("smart-calendar-selected"),t.$dateContainer.removeClass("smart-calendar-selected")),t.hasAnimation?t._animateView(-1,n):t._setDisplayModeContent(t._focusedCell?t._focusedCell.value:t._viewDates[0])}_keyUpHandler(e){const t=this;t.disabled||t.readonly||"default"!==t.selectionMode&&"range"!==t.selectionMode||"Shift"!==e.key&&"Control"!==e.key||(t._keysPressed[e.key]=!1)}_handleTooltip(){const e=this;let n=e.$.tooltip;e.tooltip?(n||(n=document.createElement("smart-tooltip"),n.tooltipTemplate=e.tooltipTemplate,n.arrow=e.tooltipArrow,n.arrowDirection=e.tooltipArrowDirection,n.offset=e.tooltipOffset,n.position=e.tooltipPosition,n.delay=e.tooltipDelay,n.rightToLeft=e.rightToLeft,n.openMode="manual",e.$.tooltip=n),n.parentElement||e.$.calendarContainer.appendChild(n)):n&&n.remove()}_mouseEventsHandler(e){const t=this;if(t.disabled||t.readonly)return;const n=t.$.tooltip;if("mouseenter"===e.type)return void t.$.setAttributeValue("hover",!0);if("mouseleave"===e.type){if(t.$.setAttributeValue("hover",!1),t._newRangeSelectionStarted&&"range"===t.selectionMode){const o=t.$.monthsContainer.children;for(let s=0;s<o.length;s++)t._getMonthCells(o[s]).map(l=>{t._setCellState(l,"hover",!1)})}return void(t.tooltip&&n&&n.close())}const i=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(!i.closest(".smart-calendar-week"))return void(t.tooltip&&n&&(clearTimeout(t._tooltipAutoCloseTimeout),n[n.contains(i)?"open":"close"]()));const a=i.closest(".smart-calendar-cell");if(!a)return;if(Smart.Utilities.Core.isMobile||t._handleCalendarCellHover(e,a),!t.tooltip&&n)return void n.close();const r=a.hasAttribute("important");if(clearTimeout(t._tooltipAutoCloseTimeout),r&&n&&"mouseover"===e.type)return n.selector=a,void(n.selector!==a?n.close():(t.tooltipTemplate||(n.innerHTML=0===n.innerHTML.trim().length?"Important day!":n.innerHTML),n.open(),t.$.fireEvent("open",{target:n,value:new Date(a.value)})));t._tooltipAutoCloseTimeout=setTimeout(function(){!n||"mouseout"!==e.type&&a&&r||n.close(),clearTimeout(t._tooltipAutoCloseTimeout)}.bind(t),t.tooltipDelay)}_popupEventHandler(e){const t=this,n=t.$.tooltip;if(e.stopPropagation(),e.target!==t.$.monthElement)if(e.target===n){if("close"===e.type){const i=n.selector;t.$.fireEvent("close",{target:n,value:i?new Date(i.value):null})}}else t.$.fireEvent(e.type,{target:e.target})}_moveHandler(e){const t=this;if(!Smart.Utilities.Core.isMobile||!t._dragStartDetails||"list"===t.displayModeView&&"month"!==t.displayMode)return;e.originalEvent.preventDefault(),e.preventDefault(),e.stopPropagation();const n={x:Math.round(e.pageX),y:Math.round(e.pageY)};let i,a,r;if(i="portrait"===t.scrollButtonsNavigationMode?n.y>t._dragStartDetails.y?-1*t.months:1*t.months:n.x<t._dragStartDetails.x?1*t.months:-1*t.months,t._previousIteration&&i===t._previousIteration.step)a=t._previousIteration.date;else if(6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode){let s,l;t._focusedCell||t._focusCell();const d=[].slice.call(t._focusedCell.closest(".smart-calendar-weeks").children).filter(c=>!c.classList.contains("smart-hidden"));if(d.length){let c;!t.rightToLeft&&i<0||t.rightToLeft&&i>0?(c=d[0].querySelectorAll(".smart-calendar-cell"),l=t.rightToLeft?c[c.length-1]:c[0]):(c=d[d.length-1].querySelectorAll(".smart-calendar-cell"),l=t.rightToLeft?c[0]:c[c.length-1]),s=new Date(l.value),s.setDate(s.getDate()+i*(t.rightToLeft?-1:1)),a=s}else a=t._getNextDate(i*(t.rightToLeft?-1:1))}else a=t._getNextDate(i*(t.rightToLeft?-1:1));if(!a)return;if(!t._dragStartDetails.navigationDate&&t.$.fireEvent("navigationChanging",{value:new Date(a),type:t.displayMode}).defaultPrevented)return t._cancelAnimation(),void(t._dragStartDetails=void 0);if(t._dragStartDetails.step=i,t._dragStartDetails.navigationDate=new Date(a),!t.hasAnimation)return;if(t._previousIteration={step:i,date:a},t._mobileScrolling=!0,"month"!==t.displayMode)t.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),r=t.$.dateViewContainer,t.$.nextMonthsContainer.children[0].value instanceof Date&&t.$.nextMonthsContainer.children[1].value.getFullYear()===a.getFullYear()||t._setDisplayModeContent(a,t.$.nextMonthsContainer);else if(t.$nextMonthsContainer.hasClass("smart-calendar-date-view-container")&&t.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),r=t.$.monthsContainer,!t.$.nextMonthsContainer.children[0]._date||t.$.nextMonthsContainer.children[0]._date.getTime()!==a.getTime()){let s=t.$.nextMonthsContainer.children;for(let l=0;l<s.length;l++)a.setMonth(t._dragStartDetails.navigationDate.getMonth()+l*(t.rightToLeft?-1:1)),t._setMonth(new Date(a),s[l],!0)}6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode&&t._updateWeeksVisibility(i*(t.rightToLeft?-1:1),t._getCellByDate(a,t.$.nextMonthsContainer)),delete t._mobileScrolling,i<0?(r.style.order=3,t.$.nextMonthsContainer.style.order=1,t.$.body[t._animationSettings.scrollSize]=t.$.body[t._animationSettings.scrollMax]):(r.style.order=1,t.$.nextMonthsContainer.style.order=3,t.$.body[t._animationSettings.scrollSize]=0);const o="portrait"===t.scrollButtonsNavigationMode?"y":"x";Math.abs(t._dragStartDetails[o]-n[o])>5&&(t.$.body[t._animationSettings.scrollSize]+=2*-(n[o]-t._dragStartDetails[o]))}_getNextDate(e){const t=this;let n;if("month"!==t.displayMode){let i;const a=t._focusedCell&&t._focusedCell.value.getFullYear();if("list"===t.displayModeView)n=new Date(t.$.listViewContainer.querySelector("li").getAttribute("value"));else{let o=t._animationStarted?t.$.nextMonthsContainer:t.$.dateViewContainer;n=new Date("year"===t.displayMode?o.children[0].value:o.children[1].value)}i="year"===t.displayMode?1:0!==e?10:1,n.setFullYear(n.getFullYear()+(e>0?i:-i)),n.getTime()<t.min.getTime()&&(n=t.min),n.getTime()>t.max.getTime()&&(n=t.max);const r="month"!==t.displayMode&&"list"===t.displayModeView;if(n.getFullYear()<t.min.getFullYear()||n.getFullYear()>t.max.getFullYear()||!r&&a===n.getFullYear())return}else{let i=t._viewDates[0];if(n=new Date(i),n.setDate(1),n.setMonth(n.getMonth()+e),n.setTime(Math.min(Math.max(n.getTime(),t.min.getTime()),t.max.getTime())),i.getMonth()===n.getMonth()&&i.getFullYear()===n.getFullYear())return}return n}_navigateDays(e){const t=this;let n="ArrowUp"===e.key||"ArrowDown"===e.key?7:1,i="ArrowUp"===e.key||"ArrowLeft"===e.key||"PageUp"===e.key?-1:1;switch(e.key){case"ArrowUp":case"ArrowLeft":case"ArrowDown":case"ArrowRight":if(!t._handleArrowKeys(e,n,i))return;break;case" ":case"Enter":{if("month"!==t.displayMode)return void t._displayModeHandler("list"===t.displayModeView?t.$.listViewContainer.querySelector("li.active"):t._focusedCell);const a=t._focusedCell;if("oneExtended"===t.selectionMode&&a)return t._clearSelection(!0),void t._selectDate(a.value,t._selectedCells.indexOf(a.value)>-1);break}case"Control":case"Shift":return"default"===t.selectionMode&&(t._keysPressed[e.key]=!0),void("range"===t.selectionMode&&(t._keysPressed[e.key]="Control"===e.key));case"Home":case"End":{let a;if(e.preventDefault(),a=function(o){if("Home"===e.key){for(let s=0;s<o.length;s++)if(!o[s].otherMonth&&(!o[s].disabled||!o[s].restricted)&&o[s].offsetHeight)return o[s]}else for(let s=o.length-1;s>=0;s--)if(!o[s].otherMonth&&(!o[s].disabled||!o[s].restricted)&&o[s].offsetHeight)return o[s]}("month"!==t.displayMode?t.$.dateViewContainer.children:t._getMonthCells(t._focusedCell.closest(".smart-calendar-month"),t.rightToLeft)),!a||(t._focusCell(a),"month"!==t.displayMode))return;break}case"PageUp":case"PageDown":if(!t._handlePageUpDownKeys(e,i))return;break;default:return}"oneExtended"!==t.selectionMode&&t._focusedCell&&t._handleDateSelection(t._focusedCell)}_handleArrowKeys(e,t,n){const i=this;let a;if("month"!==i.displayMode||i._animationStarted||i.unfocusable||i.$.body.focus(),i._focusedCell||i._focusCell(i._getCellByDate(new Date)),e.altKey)return;if(e.ctrlKey){if("ArrowDown"===e.key||"ArrowUp"===e.key){if("classic"===i.calendarMode)return;let s;switch(i.displayMode){case"month":s="ArrowDown"===e.key?"month":"year";break;case"year":s="ArrowDown"===e.key?"month":"decade";break;case"decade":s="ArrowDown"===e.key?"year":"decade"}if(s!==i.displayMode){const l=i.displayMode;i.displayMode=s,i._setDisplayMode(l,s,"month"===l),i._keysPressed&&delete i._keysPressed.Control}}return}if(e.preventDefault(),!i.rightToLeft||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(n*=-1),"month"!==i.displayMode&&"list"!==i.displayModeView){const s=i._animationStarted?i.$.nextMonthsContainer.children:i.$.dateViewContainer.children;if(t="ArrowUp"===e.key||"ArrowDown"===e.key?4:1,"year"===i.displayMode){const l=i._focusedCell.value.getMonth()+n*t;let d=new Date(i._focusedCell.value.getFullYear(),l+1,0);i._focusedCell.value.getDate()<=d.getDate()&&(d=i._focusedCell.value),a=new Date(i._focusedCell.value.getFullYear(),l,d.getDate())}else a=new Date(i._focusedCell.value.getFullYear()+n*t,i._focusedCell.value.getMonth(),i._focusedCell.value.getDate());if("year"===i.displayMode){if(a.getFullYear()<i.min.getFullYear()||a.getFullYear()===i.min.getFullYear()&&a.getMonth()<i.min.getMonth()||a.getFullYear()>i.max.getFullYear()||a.getFullYear()===i.max.getFullYear()&&a.getMonth()>i.max.getMonth())return;a.getTime()>s[s.length-1].value.getTime()?i.navigate(1):a.getTime()<s[0].value.getTime()&&i.navigate(-1)}else{if(a.getFullYear()<i.min.getFullYear()||a.getFullYear()>i.max.getFullYear())return;if(a.getFullYear()<s[1].value.getFullYear()||a.getFullYear()>s[10].value.getFullYear()){let l=i._focusedCell;i.navigate(n),"ArrowUp"!==e.key&&"ArrowDown"!==e.key||a.setFullYear(l===s[3]||l===s[4]||l===s[7]||l===s[8]?a.getFullYear()+2*n:a.getFullYear()-2*n)}}return void i._focusCell(i._getCellByDate(a,i._animationStarted?i.$.nextMonthsContainer:void 0))}if(!i._focusedCell)return;const r=i.restrictedDates.map(Number);for(a=new Date(i._focusedCell.value.getFullYear(),i._focusedCell.value.getMonth(),i._focusedCell.value.getDate()+n*t,0,0,0,0);r.indexOf(a.getTime())>-1;)a.setDate(a.getDate()+n);if(a.getTime()<i.min.getTime()||a.getTime()>i.max.getTime())return;i._isDateInView(a)||i.navigate(n*i.months);let o=i._getCellByDate(a,i._animationStarted?i.$.nextMonthsContainer:void 0);return i._focusCell(o),i._updateWeeksVisibility(n),!(["zeroOrMany","oneOrMany","none","many","week","range"].indexOf(i.selectionMode)>-1)||void 0}_handlePageUpDownKeys(e,t){const n=this;let i;if(e.preventDefault(),"month"!==n.displayMode){if(i=n._focusedCell,!n.navigate(t))return;for(;i&&i.classList.contains("smart-visibility-hidden");)i=null===i.previousElementSibling?i.nextElementSibling:i.previousElementSibling;return n._focusCell(i),void(n.hasAnimation&&"decade"===n.displayMode&&n._focusedCell.value.setFullYear(n._focusedCell.value.getFullYear()+10*t))}i=new Date(n._focusedCell.value.getFullYear(),n._focusedCell.value.getMonth()+t,1,0,0,0,0);let a=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();return n._focusedCell.value.getDate()>a?i.setDate(a):i.setDate(n._focusedCell.value.getDate()),n._isDateInView(i)||n.navigate(i),n._focusCell(n._animationStarted?n._getCellByDate(i,n.$.nextMonthsContainer):n._getCellByDate(i)),!0}_selectDate(e,t,n){const i=this;if(void 0===i._viewDates||"none"===i.selectionMode)return;let a,r=i.selectedDates.slice(0),o=i._getCellByDate(e,i._animationStarted?i.$.nextMonthsContainer:void 0);o&&i._selectCell(o),(e=new Date(e)).setHours(0,0,0,0),a=r.map(Number).indexOf(e.getTime()),i.restrictedDates.map(Number).indexOf(e.getTime())>-1||e.getTime()<i.min.getTime()||e.getTime()>i.max.getTime()||(a>-1?r.splice(a,1):r.push(e),n||(i.selectedDates=r),i._refreshFooter(),i.$.hiddenInput.value=i.selectedDates.toString(),!t&&i.isInitialized&&(i.$.fireEvent("change",{value:[e]}),i._updateTargetValue()),i._refreshTitle())}_selectCell(e){const t=this;if(!e||t.restrictedDates.map(Number).indexOf(e.value.getTime())>-1||t.disableAutoNavigation&&!1===e.otherMonth||e.value.getTime()<t.min.getTime()||e.value.getTime()>t.max.getTime())return;const n=t._selectedCells.indexOf(e);n>-1?(t._setCellState(e,"selected",!1),t._selectedCells.splice(n,1)):(t._setCellState(e,"selected",!0),t._selectedCells.push(e)),t._focusCell(e)}_refreshDayOfWeekTitles(){const e=this;let t,n=[],i=new Date;function a(l){let d;return"firstTwoLetters"===e.dayNameFormat?(d=new Intl.DateTimeFormat(e.locale,{weekday:"long"}).format(l),d=8206===d.charCodeAt(0)?d.substring(1,3):d.substring(0,2)):d=new Intl.DateTimeFormat(e.locale,{weekday:e.dayNameFormat}).format(l),d}for(let l=1;l<8;l++)i.setDate(l),t={number:i.getDay(),name:a(i)},n.push(t);n.sort((l,d)=>l.number>d.number?1:-1);const r=e.$.monthsContainer.children;let o,s;for(let l=0;l<r.length;l++)if(o=r[l].getElementsByClassName("smart-calendar-week-titles")[0].children,s=e.firstDayOfWeek>6?0:e.firstDayOfWeek,e.rightToLeft)for(let d=o.length-1;d>=1;d--)o[d].textContent=n[s++].name,s=s>6?0:s;else for(let d=1;d<o.length;d++)o[d].textContent=n[s++].name,s=s>6?0:s;if(e.hasAnimation){const l=e.$.monthsContainer.getElementsByClassName("smart-calendar-week-titles")[0].innerHTML,d=e.$.nextMonthsContainer.getElementsByClassName("smart-calendar-week-titles");for(let c=0;c<d.length;c++)d[c].innerHTML=l}}_refreshCalendarMode(){const e=this;if(!e.headerTemplate)if(e._refreshMonthNames(),"default"===e.calendarMode){e.$classicHeaderDate.addClass("smart-hidden"),e.$defaultHeaderDate.removeClass("smart-hidden");const t=e._viewDates.slice(0).sort((o,s)=>o.getTime()-s.getTime()),n=t[0],i=t[t.length-1];n.setDate(2);let a=e.monthNameFormat;"firstTwoLetters"===a&&(a="long");let r=n.toLocaleDateString(e.locale,{year:e.yearFormat,month:a});e.months>1&&(i.setDate(2),r+=" - "+i.toLocaleDateString(e.locale,{year:e.yearFormat,month:a})),e.$.defaultHeaderDate.innerHTML=r,e.unfocusable||e.$.dateElement.setAttribute("tabindex",e.tabIndex>0?e.tabIndex:0)}else e.$defaultHeaderDate.addClass("smart-hidden"),e.$classicHeaderDate.removeClass("smart-hidden"),e.$.dateElement.removeAttribute("tabindex")}_refreshFooter(){const e=this;if(!(e.viewSections.indexOf("footer")<0||0===e.$.footer.offsetHeight))if(e.footerTemplate){if("function"==typeof e.footerTemplate)return;let n=e._layoutTemplates.filter(a=>a.selector===e.$.footer)[0],i=document.importNode(n.template.content,!0);n.bindings.length>0&&(n.selector.childNodes[n.bindings[0].childNodeIndex].innerHTML=i.childNodes[n.bindings[0].childNodeIndex].innerHTML.replace(n.bindings[0].bindingString,t()))}else e.$.selectedDatesRange.innerHTML=t();function t(){if(0===e.selectedDates.length)return"";if(1===e.selectedDates.length)return e.selectedDates[0].toLocaleDateString(e.locale,{year:e.yearFormat,weekday:"short",month:"short",day:"numeric"});{let n=e.selectedDates.slice(0).sort((i,a)=>i.getTime()-a.getTime());return n[0].toLocaleDateString(e.locale,{year:e.yearFormat,weekday:"short",month:"short",day:"numeric"})+" - "+n[n.length-1].toLocaleDateString(e.locale,{year:e.yearFormat,weekday:"short",month:"short",day:"numeric"})}}}_refreshImportantDates(){const e=this;if("month"===e.displayMode){e._clearImportantDates();for(let t=0;t<e.importantDates.length;t++)e._setImportantDate(e.importantDates[t])}}_clearImportantDates(){const e=this,t=e.$.monthsContainer.children;for(let n=0;n<t.length;n++)e._getMonthCells(t[n]).map(i=>{e._setCellState(i,"important",!1)})}_setImportantDate(e,t){const n=this,i=n._getCellByDate(e);t||(t=i),t&&(n._setCellState(t,"important",!0),n._applyImportantDateTemplate(t))}_applyImportantDateTemplate(e){const t=this;if(!t._importantDatesTemplate)return"function"==typeof t.importantDatesTemplate?void t.importantDatesTemplate(e,{value:e.value}):void(e.innerHTML=e.value.getDate()+"");let n=document.importNode(t._importantDatesTemplate.content,!0);if(t._bindingDetails&&t._bindingDetails.length>0){let i=n.childNodes[t._bindingDetails[0].childNodeIndex];i.innerHTML=i.innerHTML.replace(t._bindingDetails[0].bindingString,e.value.getDate())}e.innerHTML="";for(let i=0;i<n.childNodes.length;i++)n.childNodes[i].outerHTML&&(e.innerHTML+=n.childNodes[i].outerHTML)}_setMonth(e,t,n){const i=this,a=i._getDays(e,i.selectedDates),r=i._getDays(e,i.importantDates),o=i._getDays(e,i.restrictedDates);e.setDate(1),t||(t=i.$.month),t._date=new Date(e),n||((!i._viewDates||i._viewDates.length>=i.months)&&(i._viewDates=[]),i._viewDates.push(new Date(e)));let s=((e=new Date(e)).getDay()-i.firstDayOfWeek+7)%7;e.setDate(0);let l=e.getDate();if(e.setDate(32),e.setDate(1),e.setDate(32),i._selectedCells)for(let d=0;d<i._selectedCells.length;d++)i._selectedCells[d].closest(".smart-calendar-month")===t&&i._setCellState(i._selectedCells[d],"selected",!1);i._setMonthContent(e,t,{previusMonthDays:l,firstDayOfWeek:s,selectedDates:a,importantDates:r,restrictedDates:o})}_setMonthContent(e,t,n){const i=this,a=32-e.getDate(),r=i._getMonthCells(t,i.rightToLeft),o=t._date.getMonth(),s=t._date.getFullYear(),l=new Date;let d,c=1,u=1;l.setHours(0,0,0,0),r.map(m=>{i._setCellState(m,"restricted",!1),i._setCellState(m,"selected",!1),i._setCellState(m,"otherMonth",!1),i._setCellState(m,"focus",!1),i._setCellState(m,"important",!1),i._setCellState(m,"today",!1),i._setCellState(m,"disabled",!1),i._setCellState(m,"hover",!1)});for(let m=0;m<r.length;m++){const y=r[m];m===n.firstDayOfWeek&&u<=a?(y.className="smart-calendar-cell",y.value=new Date(s,o,u),y.innerHTML=y.value.getDate().toString(),n.restrictedDates.indexOf(u)>-1||y.value.getTime()<i.min.getTime()||y.value.getTime()>i.max.getTime()?i._setCellState(y,"restricted",!0):n.selectedDates.indexOf(u)>-1&&(i._setCellState(y,"selected",!0),i._selectedCells.indexOf(y)<0&&i._selectedCells.push(y)),n.importantDates.indexOf(u)>-1&&(i._setImportantDate(y.value,y),n.importantDates.splice(n.importantDates.indexOf(u),1)),y.value.getTime()===l.getTime()&&i._setCellState(y,"today",!0),n.firstDayOfWeek++,u++):(1===u?(y.value=new Date(s,o-1,++n.previusMonthDays-n.firstDayOfWeek),d=!!(y.value.getTime()<i.min.getTime()||t.previousElementSibling)):(y.value=new Date(s,o+1,c++),d=!!(y.value.getTime()>i.max.getTime()||t.nextElementSibling)),y.innerHTML=y.value.getDate().toString(),i._setCellState(y,"otherMonth",!0),d?y.classList.add("smart-visibility-hidden"):y.classList.remove("smart-visibility-hidden"))}i.months>1&&(t.firstElementChild.innerHTML=i.dateFormatFunction?i.dateFormatFunction(t._date):i._monthsNames[o]+" "+t._date.toLocaleDateString(i.locale,{year:i.yearFormat})),i._setMonthWeekNumbers(t)}_refreshMonthNames(){const e=this;let t,n=new Date;function i(a){let r=e.monthNameFormat;"firstTwoLetters"===r&&(r="long");let o=new Intl.DateTimeFormat(e.locale,{month:r}).format(a);return"firstTwoLetters"===e.monthNameFormat&&(o=8206===o.charCodeAt(0)?o.substring(0,2):o.substring(1,3)),o}n.setDate(1),e._monthsNames=[];for(let a=0;a<12;a++)n.setMonth(a),t=i(n),e._monthsNames.push(t);if("classic"===e.calendarMode&&e.$.monthElement){let a=e.$.monthsContainer.children;if(e.$.monthElement.dataSource&&(e._changeEventFired=1),e.shadowRoot?e._setMonthElementPropertyInShadowDOM("dataSource",e._monthsNames):e.$.monthElement.dataSource=e._monthsNames,e._viewDates){for(let r=0;r<a.length;r++)a[r].firstElementChild.textContent=e._monthsNames[a[r]._date.getMonth()]+" "+a[r]._date.getFullYear();e._changeEventFired=1,e.shadowRoot?e._setMonthElementPropertyInShadowDOM("selectedIndex",e._viewDates.map(r=>r.getMonth())[0]):e.$.monthElement.selectedIndex=e._viewDates.map(r=>r.getMonth())[0]}}}_setMonthWeekNumbers(e){const t=this,n=function(a){for(let r=1;r<a.children.length;r++)if(!a.children[r].classList.contains("smart-visibility-hidden"))return!0};let i=e.getElementsByClassName("smart-calendar-week");i=[].slice.call(i);for(let a=0;a<i.length;a++){if(!n(i[a])){i[a].children[0].innerHTML="";continue}const r=i[a].children[1],o=r.otherMonth?r.value.getTime()>e._date.getTime()?1:-1:0;i[a].children[0].innerHTML=t._getWeekNumber(new Date(e._date.getFullYear(),e._date.getMonth()+o,r.value.getDate()))}}_setRestrictedDates(e){const t=this,n=t.$.monthsContainer.children;for(let i=0;i<n.length;i++)t._getMonthCells(n[i]).map(a=>{t._setCellState(a,"restricted",!1)});if(t._viewDates){const i=function(a){for(let r=0;r<t._viewDates.length;r++)if(t._viewDates[r].getFullYear()===a.getFullYear()&&t._viewDates[r].getMonth()===a.getMonth())return!0};for(let a=0;a<e.length;a++)if(i(e[a])){const r=t._getCellByDate(e[a]);t._setCellState(r,"restricted",!0)}}}_setScrollButtonsNavigationMode(){const e=this;"landscape"!==e.scrollButtonsNavigationMode?(e.$.previousMonthButton&&(e.$.previousMonthButton.$.button.firstElementChild.className="smart-arrow-down smart-arrow"),e.$.nextMonthButton&&(e.$.nextMonthButton.$.button.firstElementChild.className="smart-arrow-up smart-arrow")):(e.$.previousMonthButton&&(e.$.previousMonthButton.$.button.firstElementChild.className="smart-arrow-left smart-arrow"),e.$.nextMonthButton&&(e.$.nextMonthButton.$.button.firstElementChild.className="smart-arrow-right smart-arrow")),e._applyAnimationSettings(!0)}_refreshTitle(){const e=this;let t=e.selectedDates.length>0?e.selectedDates[e.selectedDates.length-1]:new Date;if(e.titleTemplate){if("function"==typeof e.titleTemplate)return;let n=e._layoutTemplates.filter(a=>a.selector===e.$.title)[0],i=document.importNode(n.template.content,!0);if(n.bindings.length>0){let a=i.childNodes[n.bindings[0].childNodeIndex];return t=t.toLocaleDateString(e.locale,{year:e.yearFormat,weekday:"short",month:"short",day:"numeric"}),void(n.selector.childNodes[n.bindings[0].childNodeIndex].innerHTML=a.innerHTML.replace(n.bindings[0].bindingString,t))}}e.$.title.children[0].innerHTML=t.toLocaleDateString(e.locale,{year:e.yearFormat}),e.$.title.children[1].innerHTML="landscape"===e.view?t.toLocaleDateString(e.locale,{weekday:"short"})+",</br>"+t.toLocaleDateString(e.locale,{month:"short",day:"numeric"}):t.toLocaleDateString(e.locale,{weekday:"short"})+", "+t.toLocaleDateString(e.locale,{month:"short",day:"numeric"})}_setWeeksVisibility(e){const t=this,n=e.children;let i;function a(r){(function(o){for(let s=1;s<o.children.length;s++)if(!o.children[s].classList.contains("smart-visibility-hidden"))return!1;return!0})(r)||i>=t.weeks?r.classList.add("smart-hidden"):i<t.weeks&&(r.classList.remove("smart-hidden"),i++)}for(let r=0;r<n.length;r++){let o=n[r].getElementsByClassName("smart-calendar-week");o=[].slice.call(o);let s=t._selectedCells.filter(l=>l.closest(".smart-calendar-month")===n[r]);if(6!==t.weeks)if(i=0,s.length>0){let d=o.indexOf(s[s.length-1].parentElement);for(let c=d;c<o.length;c++)a(o[c]);for(let c=d-1;c>=0;c--)a(o[c])}else for(let l=0;l<o.length;l++)a(o[l]);else o.map(l=>l.classList.remove("smart-hidden"))}}_refreshHeaderElements(){const e=this,t=document.activeElement.closest("smart-calendar")===e,n=e._animationStarted?e.$.nextMonthsContainer:e.$.dateViewContainer;let i,a,r=e._viewDates[e._viewDates.length-1],o=e._viewDates.map(s=>s.getFullYear());if("month"===e.displayMode||"list"!==e.displayModeView){if("classic"===e.calendarMode&&e.$.monthElement&&e.$.monthElement instanceof HTMLDivElement){const s=document.createElement("smart-input");s.setAttribute("smart-id","monthElement"),s.classList.add("smart-calendar-month-element"),s.dropDownPosition="bottom",s.selectionMode="one",s.disabled=e.disabled,s.rightToLeft=e.rightToLeft,s.theme=e.theme,s.dropDownWidth=e.dropDownWidth,s.dropDownHeight=e.dropDownHeight,s.readonly=!0,s.dropDownButtonPosition="right";const l=e.$.monthElement;e.$.monthElement.parentNode.insertBefore(s,e.$.monthElement),e.$.monthElement=s,l.remove()}if(e.$.previousMonthButton&&!e.disabled&&("month"!==e.displayMode&&e.$.dateViewContainer.children[0].value?a="year"===e.displayMode?n.children[0].value.getFullYear()-1:n.children[1].value.getFullYear()-1:e._viewDates[0].getMonth()-1<0?(i=11,a=e._viewDates[0].getFullYear()-1):(i=e._viewDates[0].getMonth()-1,a=e._viewDates[0].getFullYear()),e.$.previousMonthButton.disabled=a<e.min.getFullYear()||a===e.min.getFullYear()&&i<e.min.getMonth(),e.$.previousMonthButton.disabled&&t&&e.$.body.focus()),e.$.nextMonthButton&&!e.disabled&&("month"!==e.displayMode&&e.$.dateViewContainer.children[0].value?a="year"===e.displayMode?n.children[0].value.getFullYear()+1:n.children[1].value.getFullYear()+11:r.getMonth()+1>11?(i=0,a=r.getFullYear()+1):(i=r.getMonth()+1,a=r.getFullYear()),e.$.nextMonthButton.disabled=a>e.max.getFullYear()||a===e.max.getFullYear()&&i>e.max.getMonth(),e.$.nextMonthButton.disabled&&t&&e.$.body.focus()),"classic"===e.calendarMode&&e.$.monthElement){let s=[...e._monthsNames];if(o.indexOf(e.min.getFullYear())>-1)for(let d=0;d<e.min.getMonth();d++)s[d]="";if(o.indexOf(e.max.getFullYear())>-1)for(let d=e.max.getMonth()+1;d<s.length;d++)s[d]="";s=s.filter(d=>""!==d);const l=Math.max(0,e.$.monthElement.selectedIndex);e.$.monthElement.dataSource=s,e._changeEventFired=0!==e.$.monthElement.selectedIndex,e.shadowRoot?e._setMonthElementPropertyInShadowDOM("selectedIndex",e._viewDates[0].getMonth()):e.$.monthElement.selectedIndex=l,e._changeEventFired=0}e.$.previousYearButton&&!e.disabled&&(a=e._viewDates[0].getFullYear()-1,e.$.previousYearButton.disabled=a<e.min.getFullYear(),e.$.previousYearButton.disabled&&t&&e.$.body.focus()),e.$.nextYearButton&&!e.disabled&&(a=r.getFullYear()+1,e.$.nextYearButton.disabled=a>e.max.getFullYear(),e.$.nextYearButton.disabled&&t&&e.$.body.focus()),e.$.yearElement&&(e.$.yearElement.value=o[0],e.$.yearElement.disabled=r.getFullYear()+1>e.max.getFullYear()&&e._viewDates[0].getFullYear()-1<e.min.getFullYear())}}_setMonthElementPropertyInShadowDOM(e,t){const n=this.$.monthElement,i=n.context;n.context=document,this.$.monthElement[e]=t,n.context=i}_refreshHeaderTitle(){const e=this;let t;function n(){if("month"!==e.displayMode){if("list"===e.displayModeView){const d=e.$.listViewContainer;if(!d)return;const c=d.querySelectorAll("li");if(!c.length)return"";let u;d.querySelector("li.active")&&(u=d.querySelector("li.active").getAttribute("value")),t="year"===e.displayMode?new Date(u||c[0].getAttribute("value")).getFullYear():new Date(c[0].getAttribute("value")).getFullYear()+" - "+new Date(c[c.length-1].getAttribute("value")).getFullYear()}else if(e.$.dateViewContainer.children[0].value){let d=e._animationStarted?e.$.nextMonthsContainer.children:e.$.dateViewContainer.children;t="year"===e.displayMode?d[0].value.getFullYear():d[1].value.getFullYear()+" - "+d[d.length-2].value.getFullYear()}if(t)return t}const r=e._viewDates.slice(0).sort((d,c)=>d.getTime()-c.getTime()),o=r[0],s=r[r.length-1];o.setDate(2);let l=e.monthNameFormat;return"firstTwoLetters"===l&&(l="long"),t=o.toLocaleDateString(e.locale,{year:e.yearFormat,month:l}),e.months>1&&(s.setDate(2),t+=" - "+s.toLocaleDateString(e.locale,{year:e.yearFormat,month:l})),t}if("default"===e.calendarMode&&(e.$.defaultHeaderDate.innerHTML=n()),"function"==typeof e.headerTemplate||!e._layoutTemplates)return;let i=e._layoutTemplates.filter(r=>r.selector===e.$.header)[0];if(!i)return;let a=document.importNode(i.template.content,!0);i.bindings.length>0&&((e.shadowRoot?e:i.selector).childNodes[i.bindings[0].childNodeIndex].innerHTML=a.childNodes[i.bindings[0].childNodeIndex].innerHTML.replace(i.bindings[0].bindingString,e.dateFormatFunction?e.dateFormatFunction(e._viewDates):n()))}_updateWeeksVisibility(e,t){const n=this;let i=(t||n._focusedCell).parentElement;function a(){for(let c=s;c<o.length;c++)if(o[c].classList.contains("smart-hidden")&&!l(o[c])&&(o[c].classList.remove("smart-hidden"),d++,d===n.weeks))return!0}function r(){for(let c=s;c>=0;--c)if(o[c].classList.contains("smart-hidden")&&!l(o[c])&&(o[c].classList.remove("smart-hidden"),d++,d===n.weeks))return!0}if(!t&&!i.classList.contains("smart-hidden"))return;const o=[].slice.call(i.parentElement.children),s=o.indexOf(i),l=function(c){for(let u=1;u<c.children.length;u++)if(!c.children[u].classList.contains("smart-visibility-hidden"))return!1;return!0};let d=0;if(o.map(c=>c.classList.add("smart-hidden")),e>0){if(a())return;r()}else{if(r())return;a()}}_getValidDates(e){let t=[];function n(i){if(i instanceof Date)return i;if(Smart.Utilities.DateTime&&i instanceof Smart.Utilities.DateTime)return i.toDate();if("string"==typeof i){if("new Date()"===i.trim()||"new Smart.Utilities.DateTime()"===i.trim())return new Date;let a=/(\d+[,-.\/]{1}\s*\d+[,-.\/]{1}\s*\d+)/;const r=()=>(i=i.replace(/[,-.\/]/g,",").split(",")).length>2?i=new Date(parseInt(i[0]),parseInt(i[1])-1,parseInt(i[2])):new Date;return a.test(i)&&(i=a.exec(i)[0].replace(/[,-.\/]/g,",").split(","))?new Date(parseInt(i[0]),parseInt(i[1])-1,parseInt(i[2])):r()}}if(void 0===e)return null;if(Array.isArray(e))for(let i=0;i<e.length;i++)t.push(n(e[i]));else t.push(n(e));return t=t.filter(i=>i&&"Invalid Date"!==i.toDateString()),t.map(i=>i.setHours(0,0,0,0)),t}_getValidDate(e){const t=this._getValidDates(e);return t.length>0?t[0]:null}_validateSelectedDates(e){const t=this;let n=[];e||(e=t.selectedDates);let i=e.slice(0);t.selectedDates=i.filter(function(r){if(r.getTime()>=t.min.getTime()&&r.getTime()<=t.max.getTime()&&!function(r){for(let o=0;o<t.restrictedDates.length;o++)if(t.restrictedDates[o].getTime()===r.getTime())return!0}(r))return!0;n.push(r)}),t._viewDates&&(n.map(r=>t._selectDate(r)),t._focusCell())}_validateMinMax(e,t,n){const i=this;switch(e){case"min":t=i._getValidDate(i[e]),i.min=t||n||i.properties.min.defaultValue;break;case"max":t=i._getValidDate(i[e]),i.max=t||n||i.properties.max.defaultValue;break;default:t=i._getValidDate(i.min),i.min=t||n||i.properties.min.defaultValue,t=i._getValidDate(i.max),i.max=t||n||i.properties.max.defaultValue}i.min=i.min.getTime()>i.max.getTime()?i.max:i.min,i.min.setHours(0,0,0,0),i.max.setHours(0,0,0,0);let a,r=i.$.monthsContainer.children;if(i._viewDates){if(i._viewDates[0].getTime()>i.max.getTime()||i._viewDates[0].getTime()<i.min.getTime())return void i._handleMonths();for(let o=0;o<r.length;o++){a=i._getMonthCells(r[o]);for(let s=0;s<a.length;s++){const l=a[s];if(l.value.getTime()>=i.min.getTime()&&l.value.getTime()<=i.max.getTime())i._setCellState(l,"restricted",!1),l.value.getMonth()===r[o]._date.getMonth()?l.classList.remove("smart-visibility-hidden"):i.hideOtherMonthDays||(i._setCellState(l,"otherMonth",!0),l.classList.remove("smart-visibility-hidden")),"month"!==i.displayMode&&i._setCellState(l,"otherMonth",!1);else{if(l.otherMonth){if(l.classList.contains("smart-visibility-hidden")){i._setCellState(l,"restricted",!1);continue}}else i._setCellState(l,"restricted",!0);"month"!==i.displayMode&&(l.classList.remove("smart-visibility-hidden"),i._setCellState(l,"otherMonth",!0))}}}}}_setCellState(e,t,n){e[t]=n;const i=Smart.Utilities.Core.toDash(t);n?(e.setAttribute(i,""),"selected"===t?e.setAttribute("aria-selected",!0):"today"===t?e.setAttribute("aria-current","date"):"restricted"===t?e.removeAttribute("aria-selected"):"disabled"===t&&(e.removeAttribute("aria-selected"),e.setAttribute("aria-disabled",!0))):(e.removeAttribute(i),"selected"===t?"none"===this.selectionMode||e.restricted||e.disabled?e.removeAttribute("aria-selected"):e.setAttribute("aria-selected",!1):"today"===t?e.removeAttribute("aria-current"):"restricted"!==t||e.disabled?"disabled"===t&&(e.removeAttribute("aria-disabled"),e.restricted||e.setAttribute("aria-selected",!1)):e.setAttribute("aria-selected",!1))}_validateTemplate(e,t){if(null===t||!t||"function"==typeof t)return;const n=this;if("content"in document.createElement("template")){if("string"==typeof t&&(t=document.getElementById(t)),null!==t&&"content"in t)return t;n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:e}))}else n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}))}_weeksDownHandler(e,t){const n=this,i=t.value;let a;if(n.$.body.contains(t))if(t.otherMonth&&(a=t.value.getTime()>t.closest(".smart-calendar-month")._date.getTime()?1:-1),i&&n.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),a){if(n._isDateInView(i))return;n.disableAutoNavigation||n.navigate(a*n.months)}else(t=n._getCellByDate(i))&&(t.disabled||t.restricted)||n._handleDateSelection(t)}_firstDayOfWeekValidator(e,t){return Math.min(Math.max(0,isNaN(t)?6:t),6)}_weeksValidator(e,t){return Math.min(Math.max(1,isNaN(t)?6:t),6)}_monthsValidator(e,t){return Math.min(Math.max(1,isNaN(t)?1:t),12)}})},9097:()=>{Smart("smart-check-box",class extends Smart.ToggleButton{static get properties(){return{checkMode:{value:"both",allowedValues:["both","input","label"],type:"string"},type:{value:"checkbox",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}template(){return"<div id='container' class='smart-container' role=\"presentation\">\n                    <div class='smart-overlay' role=\"presentation\"></div>\n                    <span id='checkBoxInput' class='smart-input' aria-hidden=\"true\"></span>\n                    <span id='checkBoxLabel' inner-h-t-m-l='[[innerHTML]]' class='smart-label'><content></content></span>\n                    <input id='hiddenInput' class='smart-hidden-input' type='hidden'>\n                </div>"}static get listeners(){return{down:"_downHandler","document.up":"_documentUpHandler","checkBoxInput.mouseenter":"_mouseEnterHandler","checkBoxInput.mouseleave":"_mouseLeaveHandler",focus:"_focusHandler",blur:"_blurHandler"}}static get styleUrls(){return["smart.toggle.css"]}_focusHandler(){this.$.setAttributeValue("focus",!0)}_blurHandler(){this.$.setAttributeValue("focus",!1)}_mouseEnterHandler(){this.$.setAttributeValue("hover",!0)}_mouseLeaveHandler(){this.$.setAttributeValue("hover",!1)}ready(){const e=this;super.ready(),e.setAttribute("role","checkbox"),e.indeterminate&&(e._valueCache=e.checked,e.checked=null,e._setAriaState()),e.classList.add("smart-toggle-box"),e._updateHidenInputNameAndValue()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;switch(i._updateContentProperties(),e){case"indeterminate":n?(i._valueCache=i.checked,i.checked=null):i.checked=i._valueCache,i._setAriaState(),i._updateHidenInputNameAndValue();break;case"value":case"checked":i._updateHidenInputNameAndValue();break;case"name":i._updateHidenInputName()}}_documentUpHandler(e){const t=this;if(!t._pressed||"pointercancel"===e.originalEvent.type)return;const n=t.enableShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t._pressed=!1,t.$.setAttributeValue("active",!1),!(t.disabled||t.readonly||"input"===t.checkMode&&n!==t.$.checkBoxInput||"label"===t.checkMode&&n!==t.$.checkBoxLabel)){if("press"===t.clickMode)return e.preventDefault(),void e.stopPropagation();t._changeCheckState("pointer"),t.focus(),t._handleTextSelection(),t._updateHidenInputNameAndValue()}}_downHandler(e){const t=this,n=t.enableShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(!(t.disabled||t.readonly||"input"===t.checkMode&&n!==t.$.checkBoxInput||"label"===t.checkMode&&n!==t.$.checkBoxLabel)){if(t.$.setAttributeValue("active",!0),t.hasRippleAnimation){const i=t.$.checkBoxInput.getBoundingClientRect(),a=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset;Smart.Utilities.Animation.Ripple.animate(t.$.checkBoxInput,i.left+i.width/2+a,i.top+i.height/2+r)}t._pressed=!0,"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||(t._changeCheckState("pointer"),t.$.fireEvent("click"),t.focus(),t._updateHidenInputNameAndValue())}}_setAriaState(){const t=this.checked;this.setAttribute("aria-checked",null!==t?t:"mixed")}})},2864:()=>{Smart("smart-check-input",class extends Smart.MultiInput{static get properties(){return{inverted:{type:"boolean",value:!1}}}uncheckAll(){this.selectedValues=[]}checkAll(){const e=this;let t=[];for(let n=0;n<e.dataSource.length;n++)t.push(e.dataSource[n].value||e.dataSource[n].label);e.selectedValues=t}_performSelect(e){const t=this;if(!e)return void t.close();const n=e.target?e.target.closest("li"):e;if(!n)return;t._selectedItems||(t._selectedItems=[]),n.classList.toggle("selected");const i=n.classList.contains("selected"),a={label:n.getAttribute("data-label"),value:n.getAttribute("value")},r=t.$.menu.children;for(let u=0;u<r.length;u++)r[u].classList.remove("active");if(i)t._selectedItems.push(a),t._setActiveDescendant(n),n.classList.add("active"),n.setAttribute("aria-selected",!0);else{const u=t._selectedItems.findIndex(m=>m.label===a.label&&m.value===a.value);u>-1&&t._selectedItems.splice(u,1),n.classList.remove("active"),n.setAttribute("aria-selected",!1)}n.setAttribute("aria-selected",i);const o=t._selectedItems,s=t.value,l=t.$.input.dataValue;let[d,c]=[[],[]];for(let u=0;u<o.length;u++){const m=o[u];d.push(m.label),c.push(m.value)}t.set("selectedValues",o.map(u=>u.value)),d=d.join(", "),t.set("value",d),t.$.input.dataValue=c=c.join(", "),d===s&&c===l||t.$.fireEvent("change",{value:c,label:d,oldValue:l,oldLabel:s})}_render(e){const t=this,n=e.map(function(s){let l=s,d=s;"object"==typeof s&&(l=s.label,d=s.value||l);const c=document.createElement("li"),u=document.createElement("a");return u.href="#",c.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),c.setAttribute("data-label",l),c.setAttribute("value",d),c.setAttribute("role","option"),c.setAttribute("aria-selected",!1),c.setAttribute("aria-label",l),u.innerHTML=t.highlighter?t.highlighter(l):t._highlighter(l),u.setAttribute("aria-hidden",!0),s.color&&(c.classList.add("color"),c.style.setProperty("--smart-primary",s.color)),s.icon&&(u.classList.add("icon"),u.classList.add(s.icon)),c.appendChild(u),c});t.$.menu.innerHTML="";let i=[],a=[],r=t._selectedItems;r||(r=t._selectedItems=[]);const o=r.length;r.length&&r.forEach(s=>{a.push(s.label),i.push(s.value)}),i=i.concat((t.$.input.dataValue||t.$.input.value).split(",").map(s=>s.trim())),a=a.concat(t.$.input.value.split(",").map(s=>s.trim()));for(let s=0;s<n.length;s++){const l=n[s],d=l.getAttribute("value"),c=l.getAttribute("data-label"),u=o?i.indexOf(d):a.indexOf(c);u>-1&&a[u]===c&&(l.classList.add("selected"),l.setAttribute("aria-selected",!0),t._setActiveDescendant(l),r.findIndex(m=>m.label===c&&m.value===d)<0&&r.push({label:l.getAttribute("data-label"),value:l.getAttribute("value")})),t.$.menu.appendChild(l)}t.set("selectedValues",r.map(s=>s.value))}_next(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n){const r=e.$.menu.firstElementChild;return r.classList.add("active","focused"),void e._setActiveDescendant(r)}const i=e.$.menu.children;for(let r=0;r<i.length;r++)i[r].classList.remove("active","focused");e._setActiveDescendant();let a=n.nextElementSibling;a||(a=e.$.menu.firstElementChild),a.classList.add("active","focused"),e._setActiveDescendant(a),e.ensureVisible()}_prev(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n){const r=e.$.menu.firstElementChild;return r.classList.add("active","focused"),void e._setActiveDescendant(r)}const i=e.$.menu.children;for(let r=0;r<i.length;r++)i[r].classList.remove("active","focused");e._setActiveDescendant();let a=n.previousElementSibling;a||(a=e.$.menu.lastElementChild),a.classList.add("active","focused"),e._setActiveDescendant(a),e.ensureVisible()}_keyUpHandler(e){const t=this;if(!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 9:case 13:if(!t.opened)return;t._performSelect(t.$.menu.querySelector(".active")),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault()),t.readonly||(t.$.input.dataValue=t.$.input.value)}}_createElement(){super._createElement(),this.$.menu.setAttribute("aria-multiselectable",!0),this.$.scrollView.classList.add("smart-check-input-drop-down-menu")}})},4896:()=>{Smart("smart-color-input",class extends Smart.Input{static get properties(){return{dataSource:{type:"any",value:null},displayMode:{value:"default",allowedValues:["default","grid"],type:"string"},dropDownHeight:{type:"any",value:"auto"},messages:{value:{en:{standardColors:"Standard colors",themeShadeColors:"",themeColors:"Theme colors"}},type:"object",extend:!0},placeholder:{value:"Please Select Color",type:"string"},valueDisplayMode:{value:"default",allowedValues:["default","colorBox","colorCode"],type:"string"},valueFormat:{value:"hex",allowedValues:["rgb","rgba","hex"],type:"string"}}}static get listeners(){return{"input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","input.select":"_inputSelectHandler","input.change":"_inputChangeHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}template(){return'<div id="inputContainer" role="presentation">\n                    <div class="smart-content">\n                        <div class="smart-buttons-container" role="presentation" id="buttonsContainer">\n                            <div class="smart-action-button" id="actionButton">\n                                <div id="colorSampleContainer" class="smart-color-box color-picker-sample-container" role="presentation">\n                                    <div id="colorSample" class="color-picker-sample"></div>\n                                </div>\n                                <input class="smart-input smart-color-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\'\n                                    value=\'[[value]]\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" spellcheck="false" />\n                            </div>\n                            <div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup">\n                                <div id="arrow" class="smart-drop-down-button-icon" aria-hidden="true"></div>\n                            </div>\n                        </div>\n                        <span id="hint" class="smart-hint smart-hidden" inner-h-t-m-l="[[hint]]"></span>\n                    </div>\n                </div>'}open(){const e=this;let t;e.dropDownDataSource?(e.query="",t="function"==typeof e.dataSource?e.dataSource(e.query):e.dataSource):t="function"==typeof e.dropDownDataSource?e.dropDownDataSource(e.query):e.dropDownDataSource,e._process(t);const n=e.$.menu.querySelector(".color-sample.selected");if(n){const i=e.$.input.dataValue,a=e.$.menu.querySelectorAll(".color-sample");for(let r=0;r<a.length;r++){const o=a[r],s=o.getAttribute("data-label"),l=o.getAttribute("value");if(void 0!==i&&l===i||void 0===i&&s===e.$.input.value){n.removeAttribute("aria-current"),n.classList.remove("selected"),o.classList.add("selected"),o.setAttribute("aria-current",!0),e._setActiveDescendant(o),e.$.input.dataValue=l;break}}}e.ensureVisible(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}_blurHandler(){const e=this;e.opened||(e.removeAttribute("focus"),e.$.actionButton.removeAttribute("focus"),e.$.dropDownButton.removeAttribute("focus")),delete e._preventLookup,e._isValidColor(e.value)||(e.$.input.value=e.$.input.dataValue=e.value="",e.$colorSampleContainer.addClass("no-color"))}_focusHandler(){const e=this;e.setAttribute("focus",""),e.$.actionButton.setAttribute("focus",""),e.$.dropDownButton.setAttribute("focus",""),e.readonly||0!==e.minLength||0!==e.$.input.value.length||e._preventLookup?delete e._preventLookup:e._lookup()}_lookup(e){const t=this;let n=[];t.query=t.$.input.value,t.$.input.readonly&&(t._incrementalSearchQuery||(t._incrementalSearchQuery=""),t._incrementalSearchQuery+=e.key,t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t.query=t._incrementalSearchQuery,t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},700)),t.query.length<t.minLength?t.close():(n="function"==typeof t.dataSource?t.dataSource(t.query):t.dataSource,clearTimeout(t._autoCompleteTimeout),t._autoCompleteTimeout=setTimeout(function(){const i=t.context;t.context=t,t._process(n),t.context=i},t.autoCompleteDelay))}_getDefaultColors(){let e=this._generateColors();if("grid"===this.displayMode)return e;let t=[];for(let n=0;n<e.length;n++)t=t.concat(Object.values(e[n])[0]);return t}_generateColors(){const e=this;return"default"===e.displayMode?e._defaultModeColors?e._defaultModeColors:e._defaultModeColors=[{themeColors:["#FFFFFF","#000000","#E6E6E6","#495469","#5671C2","#D48439","#A5A5A5","#EEC328","#7399D3","#85AA4C"]},{themeShadeColors:["#F2F2F2","#808080","#D0CECE","#D6DCE4","#DDEBF7","#FCE4D6","#EBEBEB","#FFF2CC","#DDE5F7","#E2EFDA","#D8D8D8","#595959","#AEAAAA","#ACB9CA","#BDD7EE","#F6CAAD","#DBDBDB","#FFE699","#B4C6E7","#C6E0B4","#BFBFBF","#404040","#757171","#8497B0","#9BC2E6","#F4B084","#C0C0C0","#FFD966","#8EA9DB","#A9D08E","#A6A6A6","#262626","#312F2F","#333F4F","#2F75B5","#C65911","#7B7B7B","#BF8F00","#305496","#548235","#808080","#0D0D0D","#161616","#222B35","#1F4E78","#833C0C","#525252","#806000","#203764","#375623"]},{standardColors:["#A52A0D","#DB3A15","#EEC328","#FEFE33","#A6CD57","#62AC54","#65ADEE","#3F6FBE","#10205F","#64379E"]}]:e._gridColors?e._gridColors:e._gridColors=["rgba(255, 255, 255, 0)","rgb(0, 0, 0)","rgb(153, 51, 0)","rgb(51, 51, 0)","rgb(0, 51, 0)","rgb(0, 51, 102)","rgb(0, 0, 128)","rgb(51, 51, 153)","rgb(51, 51, 51)","rgb(128, 0, 0)","rgb(255, 102, 0)","rgb(128, 128, 0)","rgb(0, 128, 0)","rgb(0, 128, 128)","rgb(0, 0, 255)","rgb(102, 102, 153)","rgb(128, 128, 128)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(153, 204, 0)","rgb(51, 153, 102)","rgb(51, 204, 204)","rgb(51, 102, 255)","rgb(128, 0, 128)","rgb(153, 153, 153)","rgb(255, 0, 255)","rgb(255, 204, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(0, 204, 255)","rgb(153, 51, 102)","rgb(192, 192, 192)","rgb(255, 153, 204)","rgb(255, 204, 153)","rgb(255, 255, 153)","rgb(204, 255, 204)","rgb(204, 255, 255)","rgb(153, 204, 255)","rgb(204, 153, 255)","rgb(255, 255, 255)"]}_downHandler(e){(this.readonly||e.originalEvent.target.closest(".smart-color-box"))&&this._dropDownButtonDownHandler(e)}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;n===t||n.closest&&n.closest(".smart-buttons-container")===t.$.buttonsContainer||(t.$.scrollView.contains(n.shadowParent||n)?t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()):(t.opened&&(t._preventLookup=!0),t._isPointerDown=!1,"manual"!==t.dropDownOpenMode&&t.close()))}_formatValue(e){const t=this;if(!t._isValidColor(e))return"";const n=t._getRGBA(e);switch(t.valueFormat){case"hex":e=t._rgbArrayToHEX([n.r,n.g,n.b,n.a]);break;case"rgb":e="rgb("+n.r+", "+n.g+", "+n.b+")";break;case"rgba":e=null!==n.r&&null!==n.g&&null!==n.b?"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")":null}return e||null}_getRGBA(e){const t=this,n=e||t.value;let i=1;n&&(t._isRGBA(n)&&/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.test(n.replace(/\s/g,""))?i=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(n.replace(/\s/g,""))[4]:t._isHEX(e)&&/(^#[0-9A-F]{8}$)/gi.test(e.replace(/\s/g,""))&&(i=parseInt(/(^#[0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2}$)/gi.exec(e.replace(/\s/g,""))[4],16)/255),i=Math.min(1,Math.max(0,parseFloat(i))),isNaN(i)&&(i=1)),e=t._HSVtoRGBA(t._colorToHSV(n),i);const a=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e.replace(/\s/g,""));return{r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3]),a:parseFloat(a[4])}}_colorToHSV(e){if(!this._isValidColor(e))return;e=this._toRGBA(e).replace(/\s/g,"");const t=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e),n=Math.min(255,Math.max(0,parseFloat(t[1])))/255,i=Math.min(255,Math.max(0,parseFloat(t[2])))/255,a=Math.min(255,Math.max(0,parseFloat(t[3])))/255;let r={h:0,s:0,v:0},o=0,s=0;if(n>=i&&n>=a?(s=n,o=i>a?a:i):i>=a&&i>=n?(s=i,o=n>a?a:n):(s=a,o=i>n?n:i),r.v=s,r.s=s?(s-o)/s:0,r.s){const l=s-o;r.h=n===s?(i-a)/l:i===s?2+(a-n)/l:4+(n-i)/l,r.h=60*r.h,r.h<0&&(r.h+=360)}else r.h=0;return r.s=parseFloat(r.s),r.v=parseFloat(r.v),r}_rgbArrayToHEX(e){let t="#";if(Array.isArray(e)&&null===e[0])return null;for(let i=0;i<3;i++){let a=parseInt(e[i]).toString(16).toUpperCase();a=1===a.length?0+a:a,t+=a}let n=parseFloat(e[3]);return isNaN(n)||(n=parseInt(255*n).toString(16).toUpperCase(),"FF"!==n&&(t=t.slice(0,7)+(1===n.length?0+n:n))),t}_HSVtoRGBA(e,t){const n=(e=e||{h:0,s:0,v:0}).h,a=e.v;let r,o,s,l=a*e.s,d=n/60,c=l*(1-Math.abs(d%2-1));d>=0&&d<=1?[r,o,s]=[l,c,0]:d>=1&&d<=2?[r,o,s]=[c,l,0]:d>=2&&d<=3?[r,o,s]=[0,l,c]:d>=3&&d<=4?[r,o,s]=[0,c,l]:d>=4&&d<=5?[r,o,s]=[c,0,l]:d>=5&&d<=6&&([r,o,s]=[l,0,c]);const u=a-l;return"rgba("+Math.round(255*(r+u))+", "+Math.round(255*(o+u))+", "+Math.round(255*(s+u))+", "+(void 0!==t?t:this._getRGBA().a||0)+")"}_toRGBA(e,t){const n=this;let i=n.value;function a(r){const o=/^#(.)(.)(.)$/gi.exec(r),s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(r),l=parseInt(o?o[1]+o[1]:s[1],16),d=parseInt(o?o[2]+o[2]:s[2],16),c=parseInt(o?o[3]+o[3]:s[3],16),u=parseInt(o?o[4]+o[4]:s[4],16);return t?"rgba("+l+", "+d+", "+c+", 1)":"rgba("+l+", "+d+", "+c+", "+(isNaN(u)?"1":u/255)+")"}if(n._isRGBA(e))return t?"rgba("+e.match(/(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})/gi)+", 1)":e;if(n._isValidColorName(e))i=a(n._cssColorNamesHEX[e.trim().toLowerCase()]);else if(n._isHEX(e))i=a(e);else{if(!n._isRGB(e))return!1;i=e.toLowerCase(),i=i.replace("rgb","rgba"),i=i.replace(")",", 1)")}return i}_isHEX(e){return/(^#[0-9A-F]{3}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{8}$)/i.test(e)}_isRGB(e){return/rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\)/i.test(e)}_isValidColorName(e){return!(!e||void 0===this._cssColorNamesHEX[e.trim().toLowerCase()])}_isRGBA(e){return/rgba\((\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\)/i.test(e)}_isValidColor(e){return this._isHEX(e)||this._isRGB(e)||this._isRGBA(e)||this._isValidColorName(e)}_performSelect(e){const t=this;let n,i,a;t.opened?(n=t.$.menu.querySelector(".selected")||t.$.menu.querySelector(".color-sample"),i=n.getAttribute("data-label"),a=n.getAttribute("value")):i=a=t.$.input.value;const r=e||t.value,o=t.$.input.dataValue;t.set("value",t.$.colorSample.style.backgroundColor=t._formatValue(i)),t.$.input.dataValue=a,t.setAttribute("data-value",a),t._isValidColor(t.value)?(t.$colorSampleContainer.removeClass("no-color"),t.$.colorSample.setAttribute("aria-label",t.value)):(t.$colorSampleContainer.addClass("no-color"),t.$.colorSample.setAttribute("aria-label","No color")),n&&(n.classList.add("selected"),n.setAttribute("aria-current",!0)),!t.isRendered||i===r&&a===o||(t.$.fireEvent("change",{value:a,label:i,oldValue:o,oldLabel:r}),t._updateTargetValue()),t.close()}_process(e){const t=this;if(e||(e=[]),"string"==typeof(e=e.slice(0))&&(e=t.$.deserialize(e,"array")),t.matcher)e=e.filter(n=>t.matcher(n)>-1);else if(t.query){let n=[];for(let i in t._cssColorNamesHEX)t._matcher(i,!0)>-1&&n.push(t._cssColorNamesHEX[i]);if(n.length)e=n;else if(e.length||null!=t.dataSource)e=e.filter(i=>t._matcher(i)>-1);else{let i=t._generateColors();"default"===t.displayMode&&(i=[].concat.apply([],i.map(a=>Object.values(a)[0]))),e=i.filter(a=>t._matcher(a)>-1)}}!e.length&&t.opened&&t.close(),t.query.length>0&&!e.length||!e.length&&null!=t.dataSource||(t._render(t.query.length>0?e.slice(0,t.items):e),t._open(),t._refreshMenu(),t.ensureVisible())}_matcher(e,t){const n=this,i=n.query;if(e=t?e.label||e:n._formatValue(e.label||e),!i)return-1;switch(n.queryMode){case"startsWith":return e.startsWith(i);case"startsWithIgnoreCase":return e.toLowerCase().startsWith(i.toLowerCase());case"doesNotContain":return e.indexOf(i)<0;case"doesNotContainIgnoreCase":return e.toLowerCase().indexOf(i.toLowerCase())<0;case"contains":return e.indexOf(i)>-1;default:case"containsIgnoreCase":return e.toLowerCase().indexOf(i.toLowerCase());case"equals":return 0===e.localeCompare(i);case"equalsIgnoreCase":return 0===e.toLowerCase().localeCompare(i.toLowerCase());case"endsWith":return e.endsWith(i);case"endsWithIgnoreCase":return e.toLowerCase().endsWith(i.toLowerCase())}}_render(e){const t=this;if(t.$.menu.innerHTML="",e.length)t.$.menu.appendChild(t._createColorGroup(t._createColorSamples(e)));else if(null==t.dataSource&&!t.query.length)if(e=t._generateColors(),"default"===t.displayMode){const n=t._generateColors();for(let i=0;i<n.length;i++){const a=Object.keys(n[i])[0],r=Object.values(n[i])[0],o=document.createElement("div");o.classList.add("standard-colors-label"),o.innerHTML=t.localize(a),o.id=t.id+a+"Label",t.$.menu.appendChild(o),t.$.menu.appendChild(t._createColorGroup(t._createColorSamples(r),a+"Label"))}}else t.$.menu.appendChild(t._createColorGroup(t._createColorSamples(e)))}_createColorGroup(e,t){const n=this,i=document.createElement("div");function a(){const r=n.$.menu.getElementsByClassName("selected");r[0]&&(r[0].removeAttribute("aria-current"),r[0].classList.remove("selected")),this.classList.add("selected"),this.setAttribute("aria-current",!0),n._setActiveDescendant(this)}i.classList.add("grid-samples-container"),i.setAttribute("role","menu"),t&&i.setAttribute("aria-labelledby",n.id+t);for(let r=0;r<e.length;r++){const o=e[r];i.appendChild(o),o.onmouseenter=a,o.onclick=a,o.onmouseleave=function(){this.removeAttribute("aria-current"),this.classList.remove("selected"),n._setActiveDescendant(null)}}return i}_createColorSamples(e){const t=this;let n=[];for(let i=0;i<e.length;i++){const a=e[i];let r=a,o=a;"object"==typeof a&&(r=a.label,o=a.value||r);const s=document.createElement("div");s.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),s.setAttribute("data-label",r),s.setAttribute("value",o),s.setAttribute("role","menuitem"),s.setAttribute("aria-label",r),s.classList.add("color-sample"),s.style.backgroundColor=r,"rgba(255, 255, 255, 255)"!==r&&"#FFFFFF"!==r&&"#FFFFFFFF"!==r||(s.style.borderColor="var(--smart-border)",s.style.borderStyle="solid",s.style.borderWidth="1px"),"rgba(255, 255, 255, 0)"===r||"#FFFFFF00"===r||"transparent"===r?s.setAttribute("transparent",""):s.removeAttribute("transparent"),s.classList[r||o?"remove":"add"]("no-color"),n.push(s)}if(n.length>0&&!t.$.menu.querySelector(".selected")){const i=Math.max(0,e.indexOf(t.value));n[i].classList.add("selected"),n[i].setAttribute("aria-current",!0),t._setActiveDescendant(n[0])}return n}ensureVisible(){this.$.menu.querySelector(".color-sample.selected")}_next(){const e=this,t=e.$.menu.querySelector(".color-sample.selected");if(!t){const i=e.$.menu.querySelector(".color-sample");return i.classList.add("selected"),i.setAttribute("aria-current",!0),void e._setActiveDescendant(i)}t.removeAttribute("aria-current"),t.classList.remove("selected");let n=t.nextElementSibling;if(!n){let i=t.parentElement.nextElementSibling;for(;i;){if(i.classList.contains("grid-samples-container")){n=i.children[0];break}i=i.nextElementSibling}n||(n=e.$.menu.querySelector(".color-sample"))}n.classList.add("selected"),n.setAttribute("aria-current",!0),e._setActiveDescendant(n),e.ensureVisible()}_prev(){const e=this,t=e.$.menu.querySelector(".color-sample.selected");if(!t){const i=e.$.menu.querySelector(".color-sample");return i.classList.add("selected"),i.setAttribute("aria-current",!0),void e._setActiveDescendant(i)}t.removeAttribute("aria-current"),t.classList.remove("selected");let n=t.previousElementSibling;if(!n){let i=t.parentElement.previousElementSibling;for(;i;){if(i.classList.contains("grid-samples-container")){n=i.children[i.children.length-1];break}i=i.previousElementSibling}n||(n=e.$.menu.querySelector(".grid-samples-container:last-of-type .color-sample:last-of-type"))}n.classList.add("selected"),n.setAttribute("aria-current",!0),e._setActiveDescendant(n),e.ensureVisible()}_move(e){const t=this;if(t.opened){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 37:case 38:e.preventDefault(),t[t.rightToLeft?"_next":"_prev"]();break;case 39:case 40:e.preventDefault(),t[t.rightToLeft?"_prev":"_next"]()}e.stopPropagation()}}_inputSelectHandler(){const e=this;e.readonly&&(e.$.input.selectionStart=e.$.input.selectionEnd)}_inputChangeHandler(e){e.stopPropagation(),this._performSelect()}_keyDownHandler(e){const t=this;t._suppressKeyPressRepeat=![37,38,39,40,9,13,27,16,17,18].includes(e.keyCode),e.shiftKey||e.ctrlKey||(e.altKey?"ArrowUp"===e.key?t.close():"ArrowDown"===e.key&&t.open():t._move(e))}_keyUpHandler(e){const t=this;if(!(e.shiftKey||e.altKey||e.ctrlKey))switch(e.keyCode){case 40:case 39:case 38:case 37:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 9:case 13:if(!t.opened)return void(13===e.keyCode&&t.open());t._performSelect(),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:if(t.readonly)return void(32!==e.keyCode||t.opened||t.open());t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault()),t.$.input.dataValue=t.$.input.value,t._isValidColor(t.value)||(t.$colorSampleContainer.addClass("no-color"),t.$.colorSample.setAttribute("aria-label","No color"),t.$.colorSample.style.backgroundColor="")}}propertyChangedHandler(e,t,n){const i=this;if("dropDownHeight"===e)i.$.scrollView.style.setProperty("--smart-input-drop-down-menu-height",i.dropDownHeight+"px");else if("opened"===e)i.opened=t,n?i.open():i.close();else if("placeholder"===e){if(i.readonly){const a=i.getAttribute("aria-label");if(a&&a!==t)return;n?i.setAttribute("aria-label",n):i.removeAttribute("aria-label")}}else"readonly"===e?i._setAriaRelations():"theme"===e?i.$.scrollView.setAttribute(e,n):"rightToLeft"===e?n?i.$.scrollView.setAttribute("right-to-left",""):i.$.scrollView.removeAttribute("right-to-left"):"valueFormat"===e?(i.value=i._formatValue(i.value),i.$.input.dataValue=i.value):"displayMode"===e?i.open():"value"===e?(i.$.input.value=n,i._performSelect(t)):super.propertyChangedHandler(e,t,n)}_createElement(){const e=this,t=document.createElement("div"),n=document.createElement("div");n.classList.add("smart-color-input-drop-down-menu","smart-color-panel"),n.setAttribute("theme",e.theme),e.$.scrollView=n,e.rightToLeft?e.$.scrollView.setAttribute("right-to-left",""):e.$.scrollView.removeAttribute("right-to-left"),e.$.menu=t,e.$.menu.classList.add("default-samples-container","grid-mode-container","smart-container"),e.$.scrollView.onclick=function(i){i.stopPropagation(),i.preventDefault(),e._performSelect(),e.$.input.focus()},e.classList.add("smart-drop-down-box","smart-color-picker"),e.value?(e.$colorSampleContainer.removeClass("no-color"),e.$.colorSample.setAttribute("aria-label",e.value)):(e.$colorSampleContainer.addClass("no-color"),e.$.colorSample.setAttribute("aria-label","No color")),e._cssColorNamesHEX={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},e._performSelect(e.value)}_setAriaRelations(){const e=this,t=e.getAttribute("aria-label");e.readonly?(e.setAttribute("role","button"),!t&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.$.input.setAttribute("aria-hidden",!0),e.$.input.removeAttribute("aria-activedescendant"),e.$.input.removeAttribute("aria-controls"),e.$.dropDownButton.setAttribute("aria-hidden",!0)):(e.setAttribute("role","combobox"),t&&t===e.placeholder&&e.removeAttribute("aria-label"),e.$.input.setAttribute("role","searchbox"),e.$.input.removeAttribute("aria-hidden",!0),e.$.dropDownButton.removeAttribute("aria-hidden")),e.setAttribute("aria-expanded",e.opened),e.setAttribute("aria-haspopup","listbox"),e.$.scrollView.setAttribute("role","listbox")}})},6057:()=>{(()=>{Smart.DataAdapter=window.smartDataAdapter=class{constructor(t){t||(t={});const n=Object.assign(this,t);n.key=(65536*(1+Math.random())|0).toString(16).substring(1),n.$document=Smart.Utilities.Extend(document),n.boundSource=!1===n.observable||n.virtualDataSource?[]:new Smart.ObservableArray,n.dataItemById=[],void 0===n.allowAdd&&(n.allowAdd=!0),void 0===n.allowRemove&&(n.allowRemove=!0),void 0===n.allowUpdate&&(n.allowUpdate=!0),void 0===n.mapChar&&(n.mapChar="."),n.observable=void 0===t.observable&&!n.virtualDataSource,void 0===n.sanitizeHTML&&(n.sanitizeHTML="blackList"),n._expandedRowIds=[],t.dataSource||(n.dataSource=[]),t.dataFields||(n.dataFields=[]),t.dataSourceType||(n.dataSourceType="array"),t.id||(n.id=null),t.autoFetch||(n.autoFetch=!0),t.dataFields&&(n.dataFields=t.dataFields),Object.defineProperty(n,"groupBy",{configurable:!1,enumerable:!0,get:()=>n._groupBy?n._groupBy:[],set(i){const a=()=>{n.boundHierarchy=null,n.refreshHierarchy(),n.onGroup&&n.onGroup()};n._groupBy=new Smart.ObservableArray(i),n._groupBy.notify(function(){a()}),n.isInitialized&&a()}}),n.groupBy=t.groupBy?t.groupBy.toArray?t.groupBy.toArray():t.groupBy:[],t&&!1!==t.autoBind&&n.dataBind(),n.isInitialized=!0}beginUpdate(){this.isUpdating=!0}endUpdate(){const t=this;t.isUpdating=!1,t.refreshIndexes(),t.refreshHierarchy()}get expandHierarchy(){return void 0===this._expandHierarchy&&(this._expandHierarchy=!1),this._expandHierarchy}set expandHierarchy(t){const n=this;n._expandHierarchy=t,n.isInitialized&&n.refreshHierarchy()}_getDataField(t){switch(t.name){case"leaf":case"parent":case"expanded":case"checked":case"selected":case"level":case"icon":case"data":case"group":case"children":case"items":t.map=t.map?t.map.replace(t.name,"$"+t.name):t.name,t.name="$"+t.name}}get dataFields(){return this._dataFields}set dataFields(t){const n=this;return n._dataFields=n._getDataFieldObjects(t),n._dataFields}_getDataFieldObjects(t){const n=this;let i=[];if("number"==typeof t){const a="A".charCodeAt(0);let r="",o=0;for(let s=0;s<t;s++){const l=String.fromCharCode(a+o);o++,i.push({name:r+l,dataType:"string"}),o>=26&&(o=0,r+="A")}}else if(Array.isArray(t)&&t.length>0)for(let a=0;a<t.length;a++){const r=t[a];if("string"==typeof r){const o=r.split(":"),s=o[0].trim(),l=o.length>1?o[1].trim():"string";i.push({name:s,dataType:l})}else i.push(r);n._getDataField(i[i.length-1])}return i}get dataSource(){const t=this;return t._dataSource||(t._dataSource=[]),t._dataSource}set dataSource(t){const n=this;n._dataSource=t,n.isInitialized&&(n.boundSource=!1===n.observable||n.virtualDataSource?[]:new Smart.ObservableArray,n.dataItemById=[],n.bindingCompleted=!1,n.dataBind(),n.refreshIndexes())}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){this._canNotify=t}_notify(t){const n=this;n.canNotify&&n.notifyFn&&n.notifyFn(t)}notify(t){t&&(this.notifyFn=t)}toArray(){const t=this;return!1===t.observable?t.boundSource:t.boundSource.toArray()}forEach(t){const n=this;if(t)if(n.boundHierarchy&&n.boundHierarchy.length>0){const i=(a=>{let r=[];for(;a;){r=r.concat(a);for(let o=0;o<a.length;o++)a[o].children&&(r=r.concat(a[o].children));a=a.children}return r})(n.boundHierarchy);for(let a=0;a<i.length;a++)t(i[a],a)}else for(let i=0;i<n.boundSource.length;i++)t(n.boundSource[i],i)}dataBind(){const t=this;t.bindingCompleted=!1,t.clear();const n=()=>{t.observable&&(t.boundSource.notify||(t.boundSource=new Smart.ObservableArray),t.boundSource.notify(function(i){if("update"===i.action&&i.path&&i.path.indexOf(".")>=0&&-1===i.path.indexOf("children")&&-1===i.path.indexOf("parent")&&-1===i.path.indexOf("loaded")&&-1===i.path.indexOf("level")&&-1===i.path.indexOf("leaf")&&-1===i.path.indexOf("expanded")){let a=!1;for(let r=0;r<t.dataFields.length;r++)i.path.indexOf(t.dataFields[r].name)>=0&&(a=!0);t._notify&&a&&t._notify({action:"update",data:i.target,index:i.index})}})),t._onBindingComplete()};"string"==typeof t.dataSource&&(t.dataSource.indexOf(".json")>=0||"json"===t.dataSourceType)?(t.url=t.dataSource,t.dataSourceType="json",new e(t,i=>{t.dataSource=i})):"string"==typeof t.dataSource&&t.dataSource.indexOf(".xml")>=0?(t.url=t.dataSource,t.dataSourceType="xml",new e(t,i=>{t.dataSource=i})):"string"==typeof t.dataSource&&t.dataSource.indexOf(".xlsx")>=0?(t.url=t.dataSource,t.dataSourceType="xlsx",new e(t,i=>{if(!i[0])return i=[],t._bindToArray(),void n();const a=Object.keys(i[0]),r={},o=[];if(!1!==t.exportHeader){let s=0;for(let l in a)r[a[l]]=t.dataFields[s++].name;for(let l=1;l<i.length;l++){const d=i[l],c={};for(let u in a){const m=a[u];c[r[m]]=d[m]}o.push(c)}t.dataSource=o}t._bindToArray(),n()})):"string"==typeof t.dataSource&&t.dataSource.indexOf(".csv")>=0?(t.url=t.dataSource,t.dataSourceType="csv",new e(t,i=>{t.dataSource=i})):"string"==typeof t.dataSource&&t.dataSource.indexOf(".tsv")>=0?(t.url=t.dataSource,t.dataSourceType="tsv",new e(t,i=>{t.dataSource=i})):"string"==typeof t.dataSource&&(t.dataSource.indexOf(".ics")>=0||t.dataSource.indexOf(".php")>=0&&"ics"===t.dataSourceType||t.dataSource.indexOf(".txt")>=0&&"ics"===t.dataSourceType)?(t.url=t.dataSource,t.dataSourceType="ics",new e(t,i=>{t.dataSource=i})):"string"==typeof t.dataSource&&(t.dataSource.indexOf("BEGIN:VCALENDAR")>=0||"ics"===t.dataSourceType)?(t._bindToICS(),n()):"string"==typeof t.dataSource&&(t.dataSource.indexOf("<?xml")>=0||"xml"===t.dataSourceType)?(t._bindToXML(),n()):"string"==typeof t.dataSource&&(t.dataSource.indexOf("  ")>=0||t.dataSource.indexOf(",")>=0||"tsv"===t.dataSourceType||"csv"===t.dataSourceType||"tab"===t.dataSourceType)?(t._bindToCSV(),n()):"array"===t.dataSourceType?(t._bindToArray(),n()):"json"===t.dataSourceType&&(t._bindToJSON(),n())}_bindToXML(){const t=this;let n=null,i=null;window.DOMParser&&(n=new DOMParser,i=n.parseFromString(t.dataSource,"text/xml")),void 0===t.root&&(t.root=""),void 0===t.record&&(t.record="");const a=i.querySelectorAll(t.root+" "+t.record),r=a.length,o=[];let s=t.dataFields?t.dataFields.length:0;if(0===s){const l=a[0],d=new Array;for(let c in l)d[d.length]={name:c};t.dataFields=d,s=d.length}for(let l=0;l<r;l++){const d=a[l],c={};if(void 0===d)break;if(t.id){const u=d.querySelector(t.id);c[t.id]=u.textContent}for(let u=0;u<s;u++){const m=t.dataFields[u],y=d.querySelector(m.map||m.name);c[m.name]=y.textContent}o[l]=c}t.canNotify=!1,t.dataSource=o,t.canNotify=!0,t._bindToArray()}static BindToCSV(t,n=!1){const i=""+t,a=-1===i.indexOf(",")?"\t":",",r=i.split("\r"),o=new Array,s=[];let l=i.split("\n"),d=l.length;1===d&&r.length>1&&(l=r,d=l.length);const c=!0===n;for(let u=0;u<d;u++){const m={},y=l[u].split(a);for(let b=0;b<y.length;b++){let f=s[b],w=y[b];if(f||(s.push({name:w.trim()}),f=s[s.length-1]),w=w.trim(),1!==u||c)switch(f.dataType){case"boolean":w="false"!==w;break;case"number":w=parseFloat(w);break;case"date":w=new Date(w)}else{let v="string";"false"===w||"true"===w?(v="boolean",w="false"!==w):isNaN(parseInt(w)&&-1===w.indexOf("/"))?(w.indexOf("-")>=0||w.indexOf("/")>=0||w.indexOf(":")>=0)&&"Invalid Date"!==new Date(w).toString()&&(v="date",w=new Date(w)):(v="number",w=parseFloat(w)),f.dataType||(f.dataType=v)}m[f.name]=w}(c||u>0)&&o.push(m)}return o}_bindToCSV(){const t=this,n=""+t.dataSource,i=-1===n.indexOf(",")?"\t":",",a=n.split("\r"),r=new Array;let o=n.split("\n"),s=o.length;1===s&&a.length>1&&(o=a,s=o.length);const l=t.dataFields.length>0;for(let d=0;d<s;d++){const c=o[d],u={},m=o[d].split(i);for(let y=0;y<m.length;y++){let b=t.dataFields[y],f=m[y];if(b||(t.dataFields.push({name:f.trim()}),b=t.dataFields[t.dataFields.length-1]),b.map&&(f=c[b.map]),f=f.trim(),1!==d||l)switch(b.dataType){case"boolean":f="false"!==f;break;case"number":f=parseFloat(f);break;case"date":f=new Date(f)}else{let w="string";"false"===f||"true"===f?(w="boolean",f="false"!==f):isNaN(parseInt(f)&&-1===f.indexOf("/"))?(f.indexOf("-")>=0||f.indexOf("/")>=0||f.indexOf(":")>=0)&&"Invalid Date"!==new Date(f).toString()&&(w="date",f=new Date(f)):(w="number",f=parseFloat(f)),b.dataType||(b.dataType=w)}u[b.map||b.name||y.toString()]=f}(l||d>0)&&r.push(u)}t.canNotify=!1,t.dataSource=r,t.canNotify=!0,t._bindToArray()}_onBindingComplete(){const t=this;t._buildHierarchy(),t.onBindingComplete&&t.onBindingComplete({data:t.boundSource}),t._notify&&t._notify({action:"bindingComplete",data:t.boundSource}),t.bindingCompleted=!0}refreshHierarchy(){this.isUpdating||this._buildHierarchy()}find(){return this.boundSource.find.apply(this.boundSource,arguments)}onVirtualDataSourceRequested(t,n){const i=this;let a=n?n.first:1/0,r=n?n.last:1/0,o=n?n.row:null;if(void 0===a&&(a=1/0),void 0===r&&(r=1/0),i.virtualFirstIndex=a,i.virtualLastIndex=r,i.virtualDataSource){const s=function(d){void 0!==d.virtualDataSourceLength&&(i.virtualDataSourceLength=d.virtualDataSourceLength),new Smart.DataAdapter({dataSource:d.dataSource,dataFields:d.dataFields||i.dataFields,data:n,keyDataField:d.keyDataField,parentDataField:d.parentDataField,observable:!1,id:d.id||i.id,onBindingComplete(c){if(void 0===n.result&&(n.result=!0),i.virtualDataSourceOnExpand&&o)return i.groupBy.length>0?c.data&&c.data.length>0&&i.add(c.data):c.data&&c.data.length>0?i.add(c.data,o.$.id):o.leaf=!0,i.onFilter&&i.onFilter(),void t(n);a===1/0&&"scroll"===n.action?c.data&&c.data.length&&i.add(c.data):(i.canNotify=!1,i.dataSource=c.data,i.canNotify=!0),i.onFilter&&i.onFilter(),t(n)}})};let l={};if(n.sorting&&n.sorting.length>0){let d=[];for(let u in n.sorting)d.push(u+" "+n.sorting[u].sortOrder.toUpperCase());const c=" ORDER BY "+d.join(", ");l.orderBy=c}else l.orderBy="";if(void 0===a||void 0===r||0===a&&0===r)l.limit="";else{const d=r-a;l.limit=" LIMIT "+d+" OFFSET "+a,isNaN(d)&&(l.limit="")}if(l.groupBy=n.grouping&&n.grouping.length>0?" GROUP BY "+n.grouping[0]:"",n.filtering&&n.filtering.length>0){const d=(y,b)=>{switch(b.condition){case"EMPTY":return y+" = ''";case"NOT_EMPTY":return y+" != ''";case"EQUAL":return y+" = '"+b.value+"'";case"NOT_EQUAL":return y+" != '"+b.value+"'";case"CONTAINS_CASE_SENSITIVE":case"CONTAINS":return y+" LIKE '%"+b.value+"%'";case"DOES_NOT_CONTAIN_CASE_SENSITIVE":case"DOES_NOT_CONTAIN":return y+" NOT LIKE '%"+b.value+"%'";case"STARTS_WITH_CASE_SENSITIVE":case"STARTS_WITH":return y+" LIKE '"+b.value+"%'";case"ENDS_WITH_CASE_SENSITIVE":case"ENDS_WITH":return y+" LIKE '%"+b.value+"'";case"NULL":return y+" IS NULL";case"NOT_NULL":return y+" IS NOT NULL"}},c=(y,b)=>{switch(b.condition){case"EQUAL":return y+" = "+b.value;case"NOT_EQUAL":return y+" != "+b.value;case"GREATER_THAN":return y+" > "+b.value;case"GREATER_THAN_OR_EQUAL":return y+" >= "+b.value;case"LESS_THAN":return y+" < "+b.value;case"LESS_THAN_OR_EQUAL":return y+" <= "+b.value;case"NULL":return y+" IS NULL";case"NOT_NULL":return y+" IS NOT NULL";case"RANGE":return"("+y+" >= "+b.value+" and "+y+" <= "+b.valueTo+")"}},u=(y,b,f)=>{if(f.operator){var w=y(b,f.condition1),v=y(b,f.condition2);return"("+w+" "+f.operator+" "+v+")"}return y(b,f)};let m=[];for(let y in n.filtering){const b=n.filtering[y];let f=b.filters,w=[],v=" AND ";for(let S=0;S<f.length;S++){const _=f[S];switch(_.type){case"stringFilter":w.push(u(d,y,_));break;case"numericFilter":case"dateFilter":case"booleanFilter":w.push(u(c,y,_))}1===b.logicalOperators[S]&&(v=" OR ")}m.push("("+w.join(v)+")")}if(m.length>0){let y=" AND ";n.filterOperator&&"or"===n.filterOperator.toLowerCase()&&(y=" OR "),l.where=" WHERE "+m.join(y)}else l.where=""}else l.where="";if("dataBind"===n.action&&i.virtualDataSourceOnExpand&&i.keyDataField&&i.parentDataField&&(l.where?l.where+=" AND "+i.parentDataField+" IS NULL":l.where=" WHERE "+i.parentDataField+" IS NULL"),"update"===n.action){const d=[];for(let c in n.edit.row)"$"!==c&&c!==i.id&&d.push(c+"='"+n.edit.row[c]+"'");l.update=" SET "+d.join(", ")+" WHERE "+i.id+"="+n.edit.row[i.id]}if("remove"===n.action){const d=[];for(let c in n.edit.row)"$"!==c&&c!==i.id&&d.push(c+" = '"+n.edit.row[c]+"'");l.remove=" WHERE "+i.id+"="+n.edit.row[i.id]}if("add"===n.action){const d=[],c=[];for(let u in n.edit.row)"$"!==u&&(c.push(u),d.push("'"+n.edit.row[u]+"'"));l.add=" ("+c.join(", ")+")  VALUES ("+d.join(", ")+")"}"expand"===n.action?(i.groupDataField?l.where?l.where+=" AND "+i.groupDataField+" = '"+o[i.groupDataField]+"'":l.where=" WHERE "+i.groupDataField+" = '"+o[i.groupDataField]+"'":i.keyDataField&&i.parentDataField?l.where?l.where+=" AND "+i.parentDataField+" = "+o[i.keyDataField]:l.where=" WHERE "+i.parentDataField+" = "+o[i.keyDataField]:l.where?l.where+=" AND "+o.groupDataField+" = '"+o.label+"'":l.where=" WHERE "+o.groupDataField+" = '"+o.label+"'",l.where.indexOf("undefined")>=0&&(l.where=""),l.limit="",l.groupBy="",i.virtualDataSourceOnExpand(s,{first:a,last:r,row:n.row,sorting:n.sorting,filtering:n.filtering,grouping:n.grouping,action:n.action,query:l})):i.virtualDataSource(s,{first:a,last:r,sorting:n.sorting,filtering:n.filtering,filterOperator:n.filterOperator||"and",grouping:n.grouping,action:n.action,query:l})}else t()}add(t,n){const i=this;if(!t)return;let a=!0;const r=function(o){const s=i._getDataItem(o,i.boundSource.length);if(i.dataItemById[s.$.id])return void 0!==n&&(s.$.parentId=n),null;i[i.boundSource.length]=s,i.dataItemById[s.$.id]=s;const l=i.boundSource.push(s);return void 0!==n&&(s.$.parentId=n),l||(a=!1),s};if(t.length){let o=[];for(let s=0;s<t.length;s++){const l=r(t[s]);l&&o.push(l)}i._notify({action:"add",data:o})}else{const o=r(t);i._notify({action:"add",data:o})}return i.refreshHierarchy(),a}refreshIndexes(){const t=this;for(let i=0;i<t.boundSource.length;i++)t[i]=t.boundSource[i],t[i].$.index=i,t.dataItemById[t[i].$.id]=t[i];let n=t.boundSource.length;for(;t[n];)delete t[n],n++}removeLast(){const t=this;delete t[t.boundSource.length-1];const n=t.boundSource.pop();return delete t.dataItemById[n.$.id],t._notify({action:"removeLast",data:n}),t.refreshHierarchy(),n}removeById(t){const n=this,i=n.indexOf(n.dataItemById[t]);n.boundSource[i]&&n.removeAt(i)}remove(t){const n=this;let i=n.indexOf(t);-1===i&&t&&t.$&&(i=n.indexOf(n.dataItemById[t.$.id])),n.boundSource[i]&&n.removeAt(i)}removeAt(t){const n=this,i=n.boundSource[t];if(!i)throw new Error("Invalid Item Index");n.boundSource.splice(t,1),delete n.dataItemById[i.$.id],n.refreshIndexes(),n._notify({action:"remove",index:t,data:i}),n.refreshHierarchy()}update(t,n){const i=this;if(Smart.Utilities.Types.isArray(t)&&Smart.Utilities.Types.isArray(n)&&0===t.length&&0===n.length)return void i.refreshHierarchy();if(n.length&&t.length){let o=[];for(let s=0;s<t.length;s++){const l=i._getDataItem(n[s],t[s]),d=t[s];o.push(l),i.boundSource[d]=l,i[d]=i.boundSource[d],i.dataItemById[l.$.id]=i[d]}return i._notify({action:"update",index:t,data:o}),void i.refreshHierarchy()}const a=i._getDataItem(n,t);return a.$.id=i.boundSource[t].$.id,i.boundSource[t]=a,i[t]=i.boundSource[t],i.dataItemById[a.$.id]=i[t],i._notify({action:"update",index:t,data:a}),i.refreshHierarchy(),a}insert(t,n){const i=this;if(n.length){const r=[];for(let o=0;o<n.length;o++){const s=i._getDataItem(n[o],t+o);r.push(s)}n=r}else n=i._getDataItem(n,t);const a=i.boundSource.splice(t,0,n);return i.refreshIndexes(),i._notify({action:"insert",index:t,data:n}),i.refreshHierarchy(),a}move(t,n){if(n>t&&n-t==1||t===n)return;const i=this,a=i.boundSource.splice(t,1)[0];n>t&&n--,i.boundSource.splice(n,0,a),i.refreshIndexes(),i._notify({action:"move",index:n,data:i.boundSource[n]}),i.refreshHierarchy()}indexOf(t){return this.boundSource.indexOf(t)}get length(){const t=this;return void 0!==t.virtualDataSourceLength?t.virtualDataSourceLength:t.dataSourceLength?t.dataSourceLength:"number"==typeof t.dataSource?t.dataSource:t.bindingCompleted?t.boundSource.length:t.dataSource&&"string"!=typeof t.dataSource&&t.dataSource.length?t.dataSource.length:t.boundSource.length}clear(){const t=this;if(!t.isInitialized)return t._cachedValues=[],void(t.dataItemById=[]);for(let n=0;n<t.boundSource.length;n++)delete t[n];t._expandedRowIds=[],t._cachedValues=[],t.boundSource=t.observable?new Smart.ObservableArray:[],t.dataItemById=[],t.refreshHierarchy()}_getId(t,n,i){if(null===t||void 0===t.name||!t.name||!n.getAttribute){if(t&&t.toString().length>0&&n.getAttribute){let a=n.getAttribute(t);if(null!==a&&a.toString().length>0)return a.trim().split(" ").join("").replace(/([ #;?%&,.+*~\':'!^$[\]()=>|\/@])/g,"");{let r=t.split(this.mapChar);if(r.length>1){let o=n;for(let s=0;s<r.length;s++)void 0!==o&&(o=o[r[s]]);if(void 0!==o)return o}else if(void 0!==n[t])return n[t]}}return i}{let a=n.getAttribute(t.name);if(null!==a&&a.toString().length>0)return a;if(t.map)try{let r=n.getAttribute(t.map);if(null!==r&&r.toString().length>0)return r}catch{return i}}}_buildHierarchy(){const t=this;if(t.reservedNames){const i=t.reservedNames;i.leaf||(i.leaf="leaf"),i.parent||(i.parent="parent"),i.expanded||(i.expanded="expanded"),i.checked||(i.checked="checked"),i.selected||(i.selected="selected"),i.level||(i.level="level"),i.data||(i.data="data")}else t.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};const n=t.reservedNames;if(t.childrenDataField){const i=[];for(let a=0;a<t.boundSource.length;a++){const r=Object.assign({},t.boundSource[a]);if(!r)continue;i.push(r);const o=function(l){const d=t.childrenDataField.split(t.mapChar);let c=null;if(d.length>1){let u=l;for(let m=0;m<d.length;m++)void 0!==u&&(u=u[d[m]]);c=u}else c=l.children;l.children=c,(null==l.children||l.children&&0===l.children.length)&&(l[n.leaf]=!0)};o(r),r[n.level]=0,r.$||(r.$={}),r[n.parent]=null,r[n.data]=r,void 0===r[n.expanded]&&(r[n.expanded]=!1,t.expandHierarchy&&(r[n.expanded]=!0));const s=function(l,d){if(d)for(let c=0;c<d.length;c++){let u=t._getDataItem(d[c],c);u&&(o(u),t.id||(u.$.id=function(){const y=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return y()+y()}()),u[n.level]=l[n.level]+1,u[n.parent]=l,u[n.data]=Object.assign({},u),l&&(l.children[c]=u),void 0===u[n.expanded]&&(u[n.expanded]=!1,t.expandHierarchy&&(u[n.expanded]=!0)),s(u,u.children))}else l.children=new Array};s(r,r.children)}if(t.boundHierarchy=i,!t._boundSourceUpdate){for(let a=0;a<t.boundHierarchy.length;a++){const r=t.boundHierarchy[a];if(r.children){const o=function(s){if(t.dataItemById[s.$.id]||(t.boundSource.canNotify=!1,t.dataItemById[s.$.id]=s,t.boundSource.canNotify=!0),s.children)for(let l=0;l<s.children.length;l++){const d=s.children[l];d.children&&o(d)}};o(r)}}t._boundSourceUpdate=!0}}if(t.xmlRoot&&"xml"===t.dataSourceType&&(t.boundHierarchy=this._getHierarchy("uid","_parentuid","children",null,t.boundSource)),t.keyDataField&&t.parentDataField)return["keyDataField","parentDataField"].forEach(i=>{"parent"===t[i]&&(t[i]="$"+t[i])}),void(t.boundHierarchy=this._getHierarchy(t.keyDataField,t.parentDataField,"children",null,t.boundSource));t.groupBy&&t.groupBy.length>0?t.boundHierarchy=this._getGroupHierarchy(t.groupBy,"children","label",null,"data",null,"parent",t.boundSource):t.virtualDataSourceOnExpand&&(t.boundHierarchy=this._getHierarchy("id","parentId","children",null,t.boundSource))}_getGroupHierarchy(t,n,i,a,r,o,s,l,d){let c=this;d||(d=0);let u=c.reservedNames;const m=function(){function _(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return _()+_()+"-"+_()+"-"+_()+"-"+_()+"-"+_()+_()+_()};let y=new Array;for(let _=0;_<t.length;_++)y[_]=m();n||(n="children"),i||(i="group"),r||(r="item"),s||(s="parent"),void 0===o&&(o="value");const b=new Array,f=new Array;let w=0;const v=function(_){let T=_;if(a)for(let z in a){const M=a[z];M.name&&M.map&&(T[M.map]=T[M.name])}return T};let S=!1;for(let _=0;_<l.length;_++){let T=Object.assign({},v(l[_]));T[u.leaf]=!1;let z=new Array,M=0;for(let B=0;B<t.length;B++){const J=t[B],Q=T[J];null!=Q?((""===Q||void 0===Q&&0===B)&&(S=!0),z[M++]={value:Q,group:J,hash:y[B]}):(z[M++]={value:null,group:J,hash:y[B]},0===B&&(S=!0))}if(z.length!==t.length)break;let L=null,F="";for(let B=0;B<z.length;B++){const J=z[B].value,Q=z[B].group;if(F=F+"_"+z[B].hash+"_"+J,null==f[F]){if(null===L){L={$:{}},L[u.level]=0,L[u.leaf]=!1,L[s]=null,L[i]=J,L[r]=T,L.groupDataField=Q,L[Q]||(L[Q]=L.data[Q]),void 0!==T[u.expanded]?L[u.expanded]=T[u.expanded]:(L[u.expanded]=!1,c.expandHierarchy&&(L[u.expanded]=!0)),o&&(L[o]=T[o]),L[n]=new Array;let ee=b.length+d;this.id&&"number"!=typeof T.$.id&&!isFinite(T.$.id)||(ee="Item"+ee),void 0===L.$.id&&(L.$.id=ee),c._expandedRowIds[L.$.id]&&(L[u.expanded]=!0),c.expandHierarchy&&c._collapsedIds&&c._collapsedIds[L.$.id]&&(L[u.expanded]=!1),b[w++]=L}else{const ee={$:{}};ee[u.level]=L[u.level]+1,ee[s]=L,ee[i]=J,ee[n]=new Array,ee[r]=T,ee.groupDataField=Q,ee[u.leaf]=!1,ee[Q]||(ee[Q]=ee.data[Q]),void 0!==T[u.expanded]?ee[u.expanded]=T[u.expanded]:(ee[u.expanded]=!1,c.expandHierarchy&&(ee[u.expanded]=!0)),o&&(ee[o]=T[o]),void 0===ee.$.id&&(ee.$.id=L.$.id+"_"+L[n].length),c.expandHierarchy&&c._collapsedIds&&c._collapsedIds[ee.$.id]&&(ee[u.expanded]=!1),c._expandedRowIds[ee.$.id]&&(ee[u.expanded]=!0),L[n][L[n].length]=ee,L=ee}f[F]=L}else L=f[F]}T&&(T[u.leaf]=!0),null!==L?(null===this.id?void 0===T.$.id&&(T.$.id=L.$.id+"_"+L[n].length):void 0===T.$.id&&-1===T.$.id.toString().indexOf(L.$.id)&&(T.$.id=L.$.id+"_"+T.$.id),T[s]=L,T[u.level]=L[u.level]+1,L[n][L[n].length]=T):void 0===T.$.id&&(T.$.id=m())}if(S){let _=null,T=!1;for(let z=0;z<b.length;z++){const M=b[z];if(!M[M.groupDataField]){_=M,_.$.id.toString().startsWith("Item")&&(T=!0),b.splice(z,1);break}}if(_&&(b.push(_),T))for(let z=0;z<b.length;z++){const M=b[z];M.$.id="Item"+z,Object.keys(c._expandedRowIds).length>0&&(M[u.expanded]=!!c._expandedRowIds[M.$.id],c.expandHierarchy&&(M[u.expanded]=!0,c._collapsedIds&&c._collapsedIds[M.$.id]&&(M[u.expanded]=!1)))}}return b}_getHierarchy(t,n,i,a,r){const o=this,s=new Array;let l=this.boundSource;if(r&&(l=r),0===this.boundSource.length)return null;const d=null!==i?i:"children";let c=new Array,u=l,m=u.length,y=o.reservedNames;const b=function(f){let w=f;if(a)for(let v in a){const S=a[v];S.name&&S.map&&(w[S.map]=w[S.name])}return w};for(let f=0;f<m;f++){let w=u[f],v=w[n],S=w[t];"parentId"===n&&(v=w.$.parentId),"id"===t&&(S=w.$.id),w[d]=new Array,o.expandHierarchy&&void 0===w[y.expanded]&&(w[y.expanded]=o.expandHierarchy),c[S]={parentId:v,item:w}}for(let f=0;f<m;f++){const w=u[f];let v=w[n],S=w[t];if("parentId"===n&&(v=w.$.parentId),"id"===t&&(S=w.$.id),void 0!==c[v]){let _={parentId:v,item:c[S].item},T=c[v].item;T[d]||(T[d]=new Array);let z=T[d].length;_=_.item,y?_[y.parent]=T:_.parent=T;const M=b(_);T[d][z]=M,c[v].item=T,c[S].item=_}else{let _=c[S].item;y?void 0===_[y.parent]&&(_[y.parent]=null):void 0===_.parent&&(_.parent=null);const T=b(_);y?T[y.level]=0:T.level=0,s[s.length]=T}}if(0!==s.length){let f=function(w,v){for(let S=0;S<v.length;S++){const _=v[S];y?_[y.level]=w:_.level=w;const T=_[d];T&&T.length>0?(_.leaf=!1,f(w+1,T)):o.virtualDataSourceOnExpand?void 0===_.leaf&&(_.leaf=!1):y?_[y.leaf]=!0:_.leaf=!0}};f(0,s)}return s}summarize(t,n){Array.isArray(t)||(t=[t]);let a=[];for(let d=0;d<t.length;d++){const c=t[d];for(let u in c)a.push({dataField:u,functions:c[u]})}t=a;let r={},o=new Array;n||(n=this.boundSource);let s=n.length,l=0;if(0!==s&&void 0!==s){for(let d=0;d<s;d++){let c=n[d];if((!c||!c.$||!1!==c.$.filtered)&&c){l++;for(let u=0;u<t.length;u++){const m=t[u];let y=c[m.dataField];if(m.functions&&m.functions.length>0){r[m.dataField]=r[m.dataField]||{},o[m.dataField]=o[m.dataField]||0,o[m.dataField]++;const b=function(v){for(let S in v){let _=r[m.dataField][S];null==_&&(r[m.dataField][S]=0,_=0),"function"==typeof v[S]&&(_=v[S](_,y,m.dataField,c)),r[m.dataField][S]=_}},f=y;let w=parseFloat(y);w=!isNaN(w),f&&f.toDate&&(w=!1),"string"==typeof y&&y.startsWith("+")&&(w=!1),w&&(y=parseFloat(y)),"number"==typeof y&&isFinite(y)?m.functions.forEach(function(v){let S=r[m.dataField][v];if(null==S&&(S=0,"min"===v&&(S=9999999999999),"max"===v&&(S=-9999999999999),"median"===v&&(S=[])),"sum"===v||"avg"===v||"stdev"===v||"stdevp"===v||"var"===v||"varp"===v)S+=parseFloat(y);else if("product"===v)0===d?S=parseFloat(y):S*=parseFloat(y);else if("min"===v)S=Math.min(S,parseFloat(y));else if("max"===v)S=Math.max(S,parseFloat(y));else if("count"===v)S++;else if("median"===v)S.push(parseFloat(y));else if("blank"===v)S=r[m.dataField][v],null==S&&(S=0),y||S++;else if("filled"===v)S=r[m.dataField][v],null==S&&(S=0),void 0!==y&&S++;else if("unique"===v)S=r[m.dataField][v],null==S&&(S=[]),-1===S.indexOf(y)&&S.push(y);else if("object"==typeof v)return void b(v);r[m.dataField][v]=S}):m.functions.forEach(function(v){if("min"===v||"max"===v||"count"===v||"product"===v||"sum"===v||"avg"===v||"stdev"===v||"stdevp"===v||"var"===v||"varp"===v){if(null===y&&"count"!==v)return!0;let S=r[m.dataField][v];return null==S&&(S=0),r[m.dataField][v]=S,!0}if("blank"===v){let S=r[m.dataField][v];null==S&&(S=0),y||S++,r[m.dataField][v]=S}else if("filled"===v){let S=r[m.dataField][v];null==S&&(S=0),y&&S++,r[m.dataField][v]=S}else if("unique"===v){let S=r[m.dataField][v];null==S&&(S=[]),-1===S.indexOf(y)&&S.push(y),r[m.dataField][v]=S}"object"==typeof v&&b(v)})}}}}for(let d=0;d<t.length;d++){const c=t[d];if(c.functions&&(!c.functions||0!==c.functions.length)){if(r[c.dataField]||(r[c.dataField]={},c.functions.forEach(function(u){r[c.dataField][u]=0})),void 0!==r[c.dataField].avg){const u=r[c.dataField].avg,m=o[c.dataField];r[c.dataField].avg=0===m||void 0===m?0:u/m}else void 0!==r[c.dataField].count&&(r[c.dataField].count=l);if(void 0!==r[c.dataField].unique&&(r[c.dataField].unique=r[c.dataField].unique.length),void 0!==r[c.dataField].median){let u=r[c.dataField].median;u.sort(function(m,y){return m-y}),r[c.dataField].median=.5*(u[Math.floor((u.length+1)/2)-1]+u[Math.ceil((u.length+1)/2)-1])}(r[c.dataField].stdev||r[c.dataField].stdevp||r[c.dataField].var||r[c.dataField].varp)&&c.functions.forEach(function(u){if("stdev"===u||"var"===u||"varp"===u||"stdevp"===u){const y=s,b=r[c.dataField][u]/s;let f=0;for(let v=0;v<s;v++){let S=n[v][c.dataField];f+=(S-b)*(S-b)}let w="stdevp"===u||"varp"===u?y:y-1;0===w&&(w=1),"var"===u||"varp"===u?r[c.dataField][u]=f/w:"stdevp"!==u&&"stdev"!==u||(r[c.dataField][u]=Math.sqrt(f/w))}})}}return r}}_getDataItem(t,n){const i=this,a={};if(!t)return{$:{id:n,isEmpty:!0,index:n}};if("string"==typeof t&&(t={"":t}),"number"==typeof i.dataSource||i.dataSourceLength){for(let l=0;l<i.dataFields.length;l++)a[(i.dataFields?i.dataFields[l]:{}).name]="";return a.$={},a.$.id=n,a.$.index=n,a}const o=t;if(void 0!==o.expanded&&(a.expanded=o.expanded,a.expanded="true"===o.expanded||!0===o.expanded||1===o.expanded),i.childrenDataField?void 0!==o[i.childrenDataField]&&(a.children=o[i.childrenDataField]):void 0!==o.children?a.children=o.children:void 0!==o.items&&(a.children=o.items),void 0!==o.leaf&&(a.leaf=o.leaf),void 0!==o.level&&(a.level=o.level),i.keyDataField&&void 0!==o[i.keyDataField]&&(a[i.keyDataField]=o[i.keyDataField]),i.parentDataField&&void 0!==o[i.parentDataField]&&(a[i.parentDataField]=o[i.parentDataField]),0===i.dataFields.length){const l=Object.getOwnPropertyNames(t);for(let d=0;d<l.length;d++)"$"!==l[d]&&i.dataFields.push({name:l[d],dataType:"string"})}for(let l=0;l<i.dataFields.length;l++){const d=i.dataFields?i.dataFields[l]:{};let c="";if(null==d)continue;if(t.length&&(c=t[l]),d.map){let m=d.map.split(i.mapChar);if(m.length>0){let y=o;for(let b=0;b<m.length;b++)o&&y&&(y=y[m[b]]);c=y}else c=o[d.map]}null!=c?c=c.toString():void 0===c&&null!==c&&(c="");let u=!1;""===c&&(u=!0,c=t[d.name],void 0===d.dataType&&(d.dataType="any"),null!=c?"array"!==d.dataType&&("any"===d.dataType?c=Array.isArray(t[d.name])?[...t[d.name]]:"object"==typeof t[d.name]?Object.assign({},t[d.name]):t[d.name]:"date"!==d.dataType&&(c=c.toString())):c=void 0===c&&"any"===d.dataType?null:""),"[object Object]"===c&&d.map&&u&&(c=""),i._cachedValues[c+"_"+d.dataType]?c=i._cachedValues[c+"_"+d.dataType]:("bool"===d.dataType||"boolean"===d.dataType?"true"===c||"1"===c?c=!0:"false"!==c&&"0"!==c||(c=!1):"number"===d.dataType?(-1===c.indexOf(".")&&c.indexOf(",")>=0&&c.substring(1+c.indexOf(",")).length<3&&(c=c.replace(",",".")),c=i.$document.deserialize(""+c,d.dataType,!0)):"date"===d.dataType?c=d.formatString&&Smart.Utilities.DateTime?Smart.Utilities.DateTime.ParseDate(c,d.formatString):i.$document.deserialize(""+c,d.dataType,!0):"any"!==d.dataType&&(c="string"===d.dataType&&"null"===c?"null":i.$document.deserialize(""+c,d.dataType,!0)),"any"!==d.dataType&&(i._cachedValues[c+"_"+d.dataType]=c)),"string"!==d.dataType&&"boolean"!==d.dataType&&"bool"!==d.dataType&&"any"!==d.dataType&&(isNaN(c)||c===-1/0||c===1/0)&&(c="date"===d.dataType||"number"===d.dataType?null:0),"parent"!==d.name&&"group"!==d.name&&"leaf"!==d.name&&"level"!==d.name?("string"===d.dataType&&/<.+?>/.test(c)&&c.replace&&("all"===i.sanitizeHTML?c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;"):"blackList"===i.sanitizeHTML&&(c=window.Smart.Utilities.Core.sanitizeHTML(c))),a[d.name]=c):a.$[d.name]=c}let s=n;if(i.id){if(s=o[i.id],void 0===s){const l=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};s=l()+l()}"object"==typeof s&&(s=n),o.$&&void 0!==o.$.id&&(s=o.$.id)}else if(!i.virtualDataSource&&i.dataItemById&&i.dataItemById[s])for(s=i.length;i.dataItemById[s];)s++;return a.$||(a.$={}),a.$.id=s,a.$.index=n,new Object(a)}_bindToArray(){const t=this,n="number"==typeof t.dataSource||t.dataSourceLength,i=[];t.boundSource.canNotify=!1;const a=n?"number"==typeof t.dataSource?t.dataSource:t.dataSource.length:t.observable?t.length:t.dataSource.length;for(let r=0;r<a;r++){const s=t._getDataItem(n?{}:t.dataSource[r],r);i.push(s)}if(n&&t.dataSourceLength&&t.dataSource.length>0)for(let r=0;r<t.dataSource.length;r++){const o=t.dataSource[r].cell,s=t.dataSource[r].value,l=o.replace(/[^0-9]/g,""),d=o.replace(/[0-9]/g,"");i[l-1][d]=s}t.boundSource=!1===t.observable||t.virtualDataSource?[]:new Smart.ObservableArray(i),t.observable&&(t.boundSource=new Smart.ObservableArray(i));for(let r=0;r<a;r++)t[r]=t.observable?t.boundSource[r]:i[r],t.dataItemById[t[r].$.id]=t[r];!1===t.observable&&(t.boundSource=i),t.boundSource.canNotify=!0}_bindToICS(){const t=this,n=""+t.dataSource,i=t.rowDelimiter||"\n",a=n.split("\r"),r=[];let o=n.split(i),s=o.length;1===s&&a.length>1&&(o=a,s=o.length);const l=function(u,m){var y=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(u);if(!y)throw new Error("Invalid UNTIL value: "+u);return m?new Date(y[1],y[2]-1,y[3],0,0,0,0):new Date(Date.UTC(y[1],y[2]-1,y[3],y[5]||0,y[6]||0,y[7]||0))};for(let u=0;u<s;u++){const m=o[u].trim();if(m.indexOf("BEGIN:VEVENT")>=0)var d={};else if(d)if(m.indexOf("BEGIN:VALARM")>=0)var c={};else{if(c){if(m.indexOf("ACTION")>=0){c.ACTION=m.substring(m.indexOf("ACTION")+7);continue}if(m.indexOf("DESCRIPTION")>=0){c.DESCRIPTION=m.substring(m.indexOf("DESCRIPTION")+12);continue}if(m.indexOf("TRIGGER")>=0){c.TRIGGER=m.substring(m.indexOf("TRIGGER")+8);continue}if(m.indexOf("END:VALARM")>=0){d.ALARM||(d.ALARM=[]),d.ALARM.push(c),c=void 0;continue}}if(m.indexOf("SUMMARY")>=0)d.SUMMARY=m.substring(m.indexOf("SUMMARY")+8);else if(m.indexOf("LOCATION")>=0)d.LOCATION=m.substring(m.indexOf("LOCATION")+9);else if(m.indexOf("DESCRIPTION")>=0)d.DESCRIPTION=m.substring(m.indexOf("DESCRIPTION")+12);else if(m.indexOf("RRULE")>=0)d.RRULE=m.substring(m.indexOf("RRULE")+6);else if(m.indexOf("RECURRENCE-ID")>=0)d.RECURRENCEID=m.substring(m.indexOf("RECURRENCE-ID")+14);else if(m.indexOf("RECURRENCE-ID;VALUE=DATE")>=0)d.RECURRENCEID=m.substring(m.indexOf("RECURRENCE-ID;VALUE=DATE")+25);else if(m.indexOf("EXDATE;VALUE=DATE")>=0){const y=m.substring(m.indexOf("EXDATE;VALUE=DATE")+20);d.EXDATE=y}else if(m.indexOf("EXDATE")>=0){const y=m.substring(m.indexOf("EXDATE")+7);d.EXDATE=y}else m.indexOf("DTEND;VALUE=DATE")>=0?d.DTEND=l(m.substring(m.indexOf("DTEND;VALUE=DATE")+17),!0):m.indexOf("DTEND")>=0?d.DTEND=l(m.substring(m.indexOf("DTEND")+6)):m.indexOf("DTSTART;VALUE=DATE")>=0?d.DTSTART=l(m.substring(m.indexOf("DTSTART;VALUE=DATE")+19),!0):m.indexOf("DTSTART")>=0?d.DTSTART=l(m.substring(m.indexOf("DTSTART")+8)):m.indexOf("UID")>=0?d.uid=d.UID=m.substring(m.indexOf("UID")+4):m.indexOf("STATUS")>=0?d.STATUS=m.substring(m.indexOf("STATUS")+7):m.indexOf("TITLE")>=0?d.TITLE=m.substring(m.indexOf("TITLE")+6):m.indexOf("CATEGORIES")>=0?d.CATEGORIES=m.substring(m.indexOf("CATEGORIES")+11):m.indexOf("END:VEVENT")>=0&&(r.push(d),d.ALARM&&(d.ALARM=JSON.stringify(d.ALARM)),c=void 0)}}t.canNotify=!1,t.dataSource=r,t.canNotify=!0,t._bindToArray()}_bindToJSON(){const t=this,n=[],i=t.dataSource.length?t.dataSource:Object.entries(t.dataSource);t.boundSource.canNotify=!1;for(let a=0;a<i.length;a++){const o=t._getDataItem(i[a],a);n.push(o)}t.boundSource=!1===t.observable||t.virtualDataSource?[]:new Smart.ObservableArray(n);for(let a=0;a<t.length;a++)t[a]=t.boundSource[a],t.dataItemById[t[a].$.id]=t[a];!1===t.observable&&(t.boundSource=n),t.boundSource.canNotify=!0}sortBy(t,n,i){const a=this;if(!n)for(let r=0;r<a.dataFields.length;r++){const o=a.dataFields[r];if(o.name===t){n=o.dataType;break}}if(a.boundHierarchy){if((!t||0===t.length)&&a.groupBy.length>0)return void a.refreshHierarchy();const r=(s=>{let l=[];for(;s;){l=l.concat(s);for(let d=0;d<s.length;d++)s[d].children&&(l=l.concat(s[d].children));s=s.children}return l})(a.boundHierarchy);r&&r.find(s=>{if(s.summaryRow)return s})&&a.refreshHierarchy();const o=function(s){a._sort(s,t,i,n);for(let l=0;l<s.length;l++){const d=s[l];d.children&&o(d.children,t,i,n)}};o(a.boundHierarchy)}else a._sort(a.boundSource,t,i,n)}_createFilter(t,n){const i={"=":"EQUAL","<>":"NOT_EQUAL","!=":"NOT_EQUAL",not_like:"DOES_NOT_CONTAIN",like:"CONTAINS","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",equal:"EQUAL","not equal":"NOT_EQUAL","less than":"LESS_THAN","greater than":"GREATER_THAN","greater than or equal":"GREATER_THAN_OR_EQUAL","less than or equal":"LESS_THAN_OR_EQUAL","starts with":"STARTS_WITH","ends with":"ENDS_WITH",notEqual:"NOT_EQUAL",not_equal:"NOT_EQUAL",lessThan:"LESS_THAN",greaterThan:"GREATER_THAN",greaterThanOrEqual:"GREATER_THAN_OR_EQUAL",lessThanOrEqual:"LESS_THAN_OR_EQUAL",less_than:"LESS_THAN",greater_than:"GREATER_THAN",greater_than_or_equal:"GREATER_THAN_OR_EQUAL",less_than_or_equal:"LESS_THAN_OR_EQUAL",null:"null","":"EMPTY",isblank:"EMPTY",isnotblank:"NOT_EMPTY",isBlank:"EMPTY",isNotBlank:"NOT_EMPTY",CONTAINS:"CONTAINS",DOES_NOT_CONTAIN:"DOES_NOT_CONTAIN",contains:"CONTAINS",does_not_contain:"DOES_NOT_CONTAIN","not contains":"DOES_NOT_CONTAIN",notcontains:"DOES_NOT_CONTAIN",notContains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",starts_with:"STARTS_WITH",ends_with:"ENDS_WITH",startsWith:"STARTS_WITH",endsWith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"};let a=[];"string"==typeof n&&(n=[n]);for(let d=0;d<n.length;d++){const c=n[d],u=-1===c.indexOf('"')?c.split(" "):c.split('"');let m=[];for(let y=0;y<u.length;y++){const b=u[y];""!==b&&" "!==b&&m.push(b.trim())}a.push(m)}const r=new Smart.FilterGroup,o=[],s=[];for(let d=0;d<a.length;d++){const c=a[d];if(c.length>1){const u=new Smart.FilterGroup;let m=c.length>2?"":"and",y=0,b=[];for(let f=0;f<c.length;f++){let w=c[f];if("and"!==w&&"or"!==w){if(y++,2===y){let v=i[c[f-1]];v||(v=c[f-1]),"number"===t&&(w=parseFloat(w)),"date"===t&&(w=new Date(w));const S=u.createFilter(t,w,v);if(y=0,b.push(S),m){for(let _=0;_<b.length;_++)u.addFilter(m,b[_]);b=[]}}}else m=w}s.push(u)}else{let u=c[0];if(u&&i[u]&&(u="and"),"and"!==u&&"or"!==u)throw new Error('Filter Exprresion expects "AND" or "OR", but the token is: '+u);o.push(u)}}let l=0;if(1===s.length)return s[0];for(let d=0;d<s.length;d++){let c=o[l];(d+1)%2==0&&l++,c||(c="and"),r.addFilter(c,s[d])}return r}filterBy(t,...n){const i=this,a=(()=>{for(let o=0;o<i.dataFields.length;o++){const s=i.dataFields[o];if(s.name===t)return s.dataType}})(),r=i._createFilter(a,n);return i.boundSource.filter(o=>r.evaluate(o[t]))}_filter(t,n="and"){const i=this,a=[],r=[];if(0===t.length)return void i.clearFilter();const o=d=>{for(let c=0;c<i.dataFields.length;c++){const u=i.dataFields[c];if(u.name===d)return u.dataType}};let s,l;"and"===n?(s=!0,l=function(d,c,u){return d&&c.evaluate(u[c.dataField])}):(s=!1,l=function(d,c,u){return d||c.evaluate(u[c.dataField])});for(let d=0;d<t.length;d++){const c=t[d],u=c[0];let m=null;m=c[1]instanceof Smart.FilterGroup?c[1]:i._createFilter(o(u),c.splice(1)),m&&(r.push(u),m.dataField=u,a.push(m))}if(i.boundHierarchy){const d=function(u){let m=s;for(let y=0;y<a.length;y++)m=l(m,a[y],u);return u.$.filtered=m,m},c=function(u,m,y){let b=0;for(let f=0;f<u.length;f++){const w=u[f];d(w),w.$.filtered&&b++,w.children&&c(w.children,w,m)}b>0&&i.groupBy.length>0&&m?(m.$.filtered=!0,y&&!y.$.filtered&&(y.$.filtered=!0)):b>0&&b!==u.length&&m?(m.$.filtered=null,y&&!y.$.filtered&&(y.$.filtered=null)):b>0&&b===u.length&&m&&(m.$.filtered=!0,y&&!y.$.filtered&&(y.$.filtered=!0))};c(i.boundHierarchy,null,null)}else for(let d=0;d<i.boundSource.length;d++){const c=i.boundSource[d];let u=s;for(let m=0;m<a.length;m++)u=l(u,a[m],c);c.$.filtered=u}i.onFilter&&i.onFilter()}clearGroup(){const t=this;t.groupBy=[],t.boundHierarchy=null,t.refreshHierarchy(),t.onGroup&&t.onGroup()}clearFilter(){const t=this;for(let n=0;n<t.boundSource.length;n++)t.boundSource[n].$.filtered=!0;if(t.boundHierarchy){const n=function(i,a,r){for(let o=0;o<i.length;o++){const s=i[o];s.$.filtered=!0,s.children&&n(s.children,s,a)}a&&(a.$.filtered=!0,r&&!r.$.filtered&&(r.$.filtered=!0))};n(t.boundHierarchy,null,null)}t.onFilter&&t.onFilter()}clearSort(){this._sort(this.boundSource,[],[],[])}_sort(t,n,i,a,r,o){const s=this;let l=!1;if(0===t.length)return;if(t&&t.constructor&&t instanceof Smart.ObservableArray&&(l=!0),(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)&&!l&&!s.boundHierarchy)throw new Error("sort: Missing or Invalid arguments!");"string"==typeof n&&(n=[n]);const d=[],c=[];void 0===i&&(i=[]);const u=function(m,y){let b;switch(y||typeof m){case"string":b=(new Intl.Collator).compare;break;case"number":case"int":case"bigInt":case"float":case"double":b=function(f,w){return f-w};break;case"boolean":case"bool":b=function(f,w){return f===w?0:!1===f?-1:1};break;case"date":case"time":case"dateTime":b=m instanceof Date?function(f,w){return f||w?f?w?f.getTime()-w.getTime():1:-1:0}:m instanceof Smart.Utilities.DateTime||m instanceof Smart.Utilities.BigNumber?function(f,w){return f.compare(w)}:function(f,w){return f-w};break;case"object":if(m instanceof Date)b=function(f,w){return f||w?f?w?f.getTime()-w.getTime():1:-1:0};else if(m instanceof Smart.Utilities.DateTime||m instanceof Smart.Utilities.BigNumber)b=function(f,w){return f.compare(w)};else if(m instanceof Smart.Utilities.Complex||window.NIComplex&&m instanceof window.NIComplex){const f=new Smart.Utilities.ComplexNumericProcessor;b=function(w,v){return f.compareComplexNumbers(w,v)}}}return b};for(let m=0;m<n.length;m++){d[m]=void 0===i[m]||"asc"===i[m]||"ascending"===i[m]?1:-1;let y=t[0][n[m]];if(void 0===y&&t[0]&&t[0].children&&t[0].data&&(y=t[0].data[n[m]]),o&&o){const b=n[m];if(o[b]){c[m]=o[b];continue}}c[m]=s.sortComparators&&s.sortComparators[n[m]]?s.sortComparators[n[m]]:u(y,a[m])}n.length>0&&r?r(t,n,i,c):t.sort(function(m,y){for(let b=0;b<n.length;b++){const f=c[b](m[n[b]],y[n[b]]);if(0===f){if(n[b+1])continue;return void 0!==m.$.index?(m.$.index-y.$.index)*d[b]:0}return f*d[b]}if(0===n.length)return m.$.index<y.$.index?-1:m.$.index>y.$.index?1:0});for(let m=0;m<t.length;m++)s[m]=t[m]}static Filter(t,n,i,a,r="and"){let o,s;return"and"===r?(o=!0,s=function(l,d,c,u){return a?l&&a(d,c,u):l&&u.evaluate(d[c])}):(o=!1,s=function(l,d,c,u){return a?l||a(d,c,u):l||u.evaluate(d[c])}),t.filter(l=>{let d=o;for(let c=0;c<i.length;c++)d=s(d,l,n[c],i[c]);return d})}filter(t,n,i){Smart.DataAdapter.Filter(this.boundSource,t,n,i)}sort(t,n,i){Smart.DataAdapter.Sort(this.boundSource,t,n,i)}static Sort(t,n,i,a){const r=function(d){let c;switch(typeof d){case"string":if(d.indexOf("-")>=0||d.indexOf("/")>=0){const u=new Date(d);if(u&&"Invalid Date"!==u.toString())return function(m,y){const b=new Date(m),f=new Date(y);return b||f?b?f?b.getTime()-f.getTime():1:-1:0}}c=(new Intl.Collator).compare;break;case"number":c=function(u,m){return u-m};break;case"boolean":c=function(u,m){return u===m?0:!1===u?-1:1};break;case"object":if(d instanceof Date)c=function(u,m){return u||m?u?m?u.getTime()-m.getTime():1:-1:0};else if(d instanceof Smart.Utilities.DateTime||d instanceof Smart.Utilities.BigNumber)c=function(u,m){return u.compare(m)};else if(d instanceof Smart.Utilities.Complex||window.NIComplex&&d instanceof window.NIComplex){const u=new Smart.Utilities.ComplexNumericProcessor;c=function(m,y){return u.compareComplexNumbers(m,y)}}else c=function(u,m){return u-m}}return c};if(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)return;"string"==typeof n&&(n=[n]);const o=[],s=[];void 0===i&&(i=[]);for(let d=0;d<n.length;d++)o[d]=void 0===i[d]||"asc"===i[d]||"ascending"===i[d]?1:-1,s[d]=r(t[0][n[d]]);if(a)return void a(t,n,i,s);const l=t.slice(0);return l.sort(function(d,c){for(let u=0;u<n.length;u++){const m=s[u](d[n[u]],c[n[u]]);if(0===m){if(n[u+1])continue;return void 0!==d._index?(d._index-c._index)*o[u]:0}return m*o[u]}}),l}};class e{constructor(n,i){const a=this;a.config=n,a.callback=i,!1!==n.autoFetch&&a.call(n)}call(n){const i=this;n||(n=i.config);let a="GET",r=n.url,o=null,s=!0;if(n.type&&(a=n.type),n.data)if("GET"===a){r+="?";for(let l in n.data)Object.prototype.hasOwnProperty.call(n.data,l)&&(r+=encodeURI(l+"="+n.data[l]+"&"));"&"===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1))}else"POST"===a&&(o=JSON.stringify(n.data));n&&!1===n.async&&"xlsx"!==n.dataSourceType&&(s=!1),void 0!==window.fetch&&s?i.ajaxFetch(n,a,r,o):i.ajaxXMLHttpRequest(n,a,r,o,s)}ajaxFetch(n,i,a,r){const o=this,s={method:i};let l,d,c,u;switch(n.dataSourceType){case"json":l="json";break;case"xlsx":l="arrayBuffer";break;default:l="text"}n&&n.contentType&&(s.headers=new Headers({"Content-Type":n.contentType})),null!==r&&(s.body=r),n.timeout&&(c=setTimeout(function(){u=!0},n.timeout)),(!n.beforeSend||!1!==n.beforeSend(s,n))&&fetch(a,s).then(function(m){if(u)throw d=408,new Error("timeout");if(c&&clearTimeout(c),d=m.status,!m.ok)throw new Error(m.statusText);return m[l]()}).then(function(m){if("arrayBuffer"===l)return JSZip.loadAsync(m).then(function(y){return y.files["xl/worksheets/sheet1.xml"].async("text").then(function(b){return y.files["xl/sharedStrings.xml"].async("text").then(function(f){const w=o.parseXLSXData(b,f);o.ajaxComplete(n,w,d)})})});o.ajaxComplete(n,m,d)}).catch(function(m){"JSZip is not defined"===m.message&&(m.message="JSZip is not defined. Please include a reference to JSZip to be able to load data from XLSX files."),n&&n.loadError&&n.loadError(d,m),o.callback&&o.callback(m,d)})}ajaxXMLHttpRequest(n,i,a,r,o){const s=new XMLHttpRequest,l=this;s.open(i,a,o),s.ontimeout=function(){n&&n.loadError&&n.loadError(408,"timeout")},s.onload=function(){if(4===s.readyState){const d=s.status;let c=s.response;d>=200&&d<=299?("json"===n.dataSourceType&&(c=JSON.parse(c)),l.ajaxComplete(n,c,d)):n&&n.loadError&&n.loadError(d,c)}},s.onerror=function(){n&&n.loadError&&n.loadError(s.status,s.response)},n&&n.contentType&&s.setRequestHeader("Content-Type",n.contentType),o&&n.timeout&&(s.timeout=n.timeout),(!n.beforeSend||!1!==n.beforeSend(s,n))&&s.send(r)}ajaxComplete(n,i,a){if(n){if(n.beforeLoadComplete){const r=n.beforeLoadComplete(i);r&&(i=r)}n.loadComplete&&n.loadComplete(i,a),this.callback&&this.callback(i,a)}}parseXLSXData(n,i){const a=new DOMParser,r=a.parseFromString(i,"text/xml"),o=Array.from(r.getElementsByTagName("si")),s=[],l=a.parseFromString(n,"text/xml"),d=Array.from(l.getElementsByTagName("row")),c=[];return o.forEach(function(u){let m=u.getElementsByTagName("t");if(1===m.length)s.push(m[0].innerHTML);else{let y="";m=Array.from(m),m.forEach(function(b){y+=b.innerHTML}),s.push(y)}}),d.forEach(function(u){const m={};Array.from(u.getElementsByTagName("c")).forEach(function(y){const b=y.getAttribute("r").match(/\D+/)[0],f=y.getAttribute("t"),w=y.getElementsByTagName("v")[0].innerHTML;let v;switch(f){case"s":v=s[parseFloat(w)];break;case"b":v=1===parseFloat(w);break;default:v=parseFloat(w)}m[b]=v}),c.push(m)}),c}}Smart.Ajax=window.Ajax=e})()},2052:()=>{(()=>{const e=-1*(new Date).getTimezoneOffset(),t=[{id:"Local",offset:e,offsetHours:e/60,displayName:"",supportsDaylightSavingTime:!1},{id:"Dateline Standard Time",offset:-720,offsetHours:-12,displayName:"(UTC-12:00) International Date Line West",supportsDaylightSavingTime:!1},{id:"UTC-11",offset:-660,offsetHours:-11,displayName:"(UTC-11:00) Coordinated Universal Time-11",supportsDaylightSavingTime:!1},{id:"Hawaiteratoran Standard Time",offset:-600,offsetHours:-10,displayName:"(UTC-10:00) Hawaiterator",supportsDaylightSavingTime:!1},{id:"Alaskan Standard Time",offset:-540,offsetHours:-9,displayName:"(UTC-09:00) Alaska",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time (Mexico)",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Baja California",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Pacific Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Arizona",supportsDaylightSavingTime:!1},{id:"Mountain Standard Time (Mexico)",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",supportsDaylightSavingTime:!0},{id:"Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Mountain Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central America Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central America",supportsDaylightSavingTime:!1},{id:"Canada Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Saskatchewan",supportsDaylightSavingTime:!1},{id:"Central Standard Time (Mexico)",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",supportsDaylightSavingTime:!0},{id:"SA Pacific Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Bogota, Lima, Quito, Rio Branco",supportsDaylightSavingTime:!1},{id:"Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Eastern Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Indiana (East)",supportsDaylightSavingTime:!0},{id:"Venezuela Standard Time",offset:-270,offsetHours:-4.5,displayName:"(UTC-04:30) Caracas",supportsDaylightSavingTime:!1},{id:"Atlantic Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Atlantic Time (Canada)",supportsDaylightSavingTime:!0},{id:"Paraguay Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Asuncion",supportsDaylightSavingTime:!0},{id:"Central Brazilian Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Cuiaba",supportsDaylightSavingTime:!0},{id:"Pacific SA Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Santiago",supportsDaylightSavingTime:!0},{id:"SA Western Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",supportsDaylightSavingTime:!1},{id:"Newfoundland Standard Time",offset:-210,offsetHours:-3.5,displayName:"(UTC-03:30) Newfoundland",supportsDaylightSavingTime:!0},{id:"SA Eastern Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Cayenne, Fortaleza",supportsDaylightSavingTime:!1},{id:"Argentina Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Buenos Aires",supportsDaylightSavingTime:!0},{id:"E. South America Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Brasilia",supportsDaylightSavingTime:!0},{id:"Bahia Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Salvador",supportsDaylightSavingTime:!0},{id:"Montevideo Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Montevideo",supportsDaylightSavingTime:!0},{id:"Greenland Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Greenland",supportsDaylightSavingTime:!0},{id:"UTC-02",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Coordinated Universal Time-02",supportsDaylightSavingTime:!1},{id:"Mid-Atlantic Standard Time",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Mid-Atlantic - Old",supportsDaylightSavingTime:!0},{id:"Azores Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Azores",supportsDaylightSavingTime:!0},{id:"Cape Verde Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Cape Verde Is.",supportsDaylightSavingTime:!1},{id:"Morocco Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Casablanca",supportsDaylightSavingTime:!0},{id:"UTC",offset:0,offsetHours:0,displayName:"(UTC) Coordinated Universal Time",supportsDaylightSavingTime:!1},{id:"GMT Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Dublin, Edinburgh, Lisbon, London",supportsDaylightSavingTime:!0},{id:"Greenwich Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Monrovia, Reykjavik",supportsDaylightSavingTime:!1},{id:"Central European Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",supportsDaylightSavingTime:!0},{id:"Namibia Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Windhoek",supportsDaylightSavingTime:!0},{id:"W. Central Africa Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) West Central Africa",supportsDaylightSavingTime:!1},{id:"W. Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",supportsDaylightSavingTime:!0},{id:"Central Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",supportsDaylightSavingTime:!0},{id:"Romance Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",supportsDaylightSavingTime:!0},{id:"FLE Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",supportsDaylightSavingTime:!0},{id:"South Africa Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Harare, Pretoria",supportsDaylightSavingTime:!1},{id:"Turkey Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Istanbul",supportsDaylightSavingTime:!0},{id:"GTB Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Athens, Bucharest",supportsDaylightSavingTime:!0},{id:"Libya Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Tripoli",supportsDaylightSavingTime:!0},{id:"E. Europe Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) E. Europe",supportsDaylightSavingTime:!0},{id:"Jordan Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Amman",supportsDaylightSavingTime:!0},{id:"Middle East Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Beirut",supportsDaylightSavingTime:!0},{id:"Egypt Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Cairo",supportsDaylightSavingTime:!0},{id:"Syria Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Damascus",supportsDaylightSavingTime:!0},{id:"Israel Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Jerusalem",supportsDaylightSavingTime:!0},{id:"Arab Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kuwait, Riyadh",supportsDaylightSavingTime:!1},{id:"E. Africa Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Nairobi",supportsDaylightSavingTime:!1},{id:"Arabic Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Baghdad",supportsDaylightSavingTime:!0},{id:"Kaliningrad Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kaliningrad, Minsk",supportsDaylightSavingTime:!0},{id:"Iran Standard Time",offset:210,offsetHours:3.5,displayName:"(UTC+03:30) Tehran",supportsDaylightSavingTime:!0},{id:"Mauritius Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Port Louis",supportsDaylightSavingTime:!0},{id:"Georgian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Tbilisi",supportsDaylightSavingTime:!1},{id:"Caucasus Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Yerevan",supportsDaylightSavingTime:!0},{id:"Arabian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Abu Dhabi, Muscat",supportsDaylightSavingTime:!1},{id:"Azerbaijan Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Baku",supportsDaylightSavingTime:!0},{id:"Russian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",supportsDaylightSavingTime:!0},{id:"Afghanistan Standard Time",offset:270,offsetHours:4.5,displayName:"(UTC+04:30) Kabul",supportsDaylightSavingTime:!1},{id:"Pakistan Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Islamabad, Karachi",supportsDaylightSavingTime:!0},{id:"West Asia Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Ashgabat, Tashkent",supportsDaylightSavingTime:!1},{id:"India Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",supportsDaylightSavingTime:!1},{id:"Sri Lanka Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Sri Jayawardenepura",supportsDaylightSavingTime:!1},{id:"Nepal Standard Time",offset:345,offsetHours:5.75,displayName:"(UTC+05:45) Kathmandu",supportsDaylightSavingTime:!1},{id:"Central Asia Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Astana",supportsDaylightSavingTime:!1},{id:"Bangladesh Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Dhaka",supportsDaylightSavingTime:!0},{id:"Ekaterinburg Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Ekaterinburg",supportsDaylightSavingTime:!0},{id:"Myanmar Standard Time",offset:390,offsetHours:6.5,displayName:"(UTC+06:30) Yangon (Rangoon)",supportsDaylightSavingTime:!1},{id:"SE Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Bangkok, Hanoi, Jakarta",supportsDaylightSavingTime:!1},{id:"N. Central Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Novosibirsk",supportsDaylightSavingTime:!0},{id:"Ulaanbaatar Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Ulaanbaatar",supportsDaylightSavingTime:!1},{id:"China Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",supportsDaylightSavingTime:!1},{id:"Singapore Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Kuala Lumpur, Singapore",supportsDaylightSavingTime:!1},{id:"North Asia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Krasnoyarsk",supportsDaylightSavingTime:!0},{id:"Taipei Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Taipei",supportsDaylightSavingTime:!1},{id:"W. Australia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Perth",supportsDaylightSavingTime:!0},{id:"Korea Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Seoul",supportsDaylightSavingTime:!1},{id:"North Asia East Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Irkutsk",supportsDaylightSavingTime:!0},{id:"Tokyo Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Osaka, Sapporo, Tokyo",supportsDaylightSavingTime:!1},{id:"AUS Central Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Darwin",supportsDaylightSavingTime:!1},{id:"Cen. Australia Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Adelaide",supportsDaylightSavingTime:!0},{id:"West Pacific Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Guam, Port Moresby",supportsDaylightSavingTime:!1},{id:"Tasmania Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Hobart",supportsDaylightSavingTime:!0},{id:"E. Australia Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Brisbane",supportsDaylightSavingTime:!1},{id:"AUS Eastern Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Canberra, Melbourne, Sydney",supportsDaylightSavingTime:!0},{id:"Yakutsk Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Yakutsk",supportsDaylightSavingTime:!0},{id:"Vladivostok Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Vladivostok",supportsDaylightSavingTime:!0},{id:"Central Pacific Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Solomon Is., New Caledonia",supportsDaylightSavingTime:!1},{id:"Magadan Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Magadan",supportsDaylightSavingTime:!0},{id:"Kamchatka Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old",supportsDaylightSavingTime:!0},{id:"Fiji Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Fiji",supportsDaylightSavingTime:!0},{id:"New Zealand Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Auckland, Wellington",supportsDaylightSavingTime:!0},{id:"UTC+12",offset:720,offsetHours:12,displayName:"(UTC+12:00) Coordinated Universal Time+12",supportsDaylightSavingTime:!1},{id:"Tonga Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Nuku'alofa",supportsDaylightSavingTime:!1},{id:"Samoa Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Samoa",supportsDaylightSavingTime:!0}],n=[0,31,59,90,120,151,181,212,243,273,304,334,365],i=[0,31,60,91,121,152,182,213,244,274,305,335,366];Smart.Utilities.Assign("TimeSpan",class{constructor(){const a=this;if(a.ticksPerMillisecond=1e4,a.millisecondsPerTick=1e-4,a.ticksPerSecond=1e7,a.secondsPerTick=1e-7,a.ticksPerMinute=6e8,a.minutesPerTick=1.6666666666666667e-9,a.ticksPerHour=36e9,a.hoursPerTick=27777777777777777e-27,a.ticksPerDay=864e9,a.daysPerTick=11574074074074074e-28,a.millisPerSecond=1e3,a.millisPerMinute=6e4,a.millisPerHour=36e5,a.millisPerDay=864e5,a._ticks=0,1===arguments.length){if(isNaN(arguments[0]))throw new Error("Argument must be a number.");a._ticks=arguments[0]}else 3===arguments.length?a._ticks=a.timeToMS(arguments[0],arguments[1],arguments[2],0):4===arguments.length?a._ticks=(1e3*(3600*arguments[0]*24+3600*arguments[1]+60*arguments[2]+arguments[3])+0)*a.ticksPerMillisecond:5===arguments.length&&(a._ticks=(1e3*(3600*arguments[0]*24+3600*arguments[1]+60*arguments[2]+arguments[3])+arguments[4])*a.ticksPerMillisecond)}ticks(){return this._ticks}days(){return parseInt(this._ticks/this.ticksPerDay)}timeToMS(a,r,o,s){return parseInt((3600*a+60*r+o+s/1e3)*this.ticksPerSecond)}hours(){return parseInt(this._ticks/this.ticksPerHour)%24}milliseconds(){return parseInt(this._ticks/this.ticksPerMillisecond)%1e3}minutes(){return parseInt(this._ticks/this.ticksPerMinute)%60}seconds(){return parseInt(this._ticks/this.ticksPerSecond)%60}totalDays(){return parseInt(this._ticks*this.daysPerTick)}totalHours(){return parseInt(this._ticks*this.hoursPerTick)}totalMilliseconds(){return parseInt(this._ticks*this.millisecondsPerTick)}totalMinutes(){return parseInt(this._ticks*this.minutesPerTick)}totalSeconds(){return parseInt(this._ticks*this.secondsPerTick)}add(a){return new Smart.Utilities.TimeSpan(this._ticks+a._ticks)}subtract(a){return new Smart.Utilities.TimeSpan(this._ticks-a._ticks)}duration(){const a=this;return a._ticks>=0?new Smart.Utilities.TimeSpan(a._ticks):new Smart.Utilities.TimeSpan(-a._ticks)}equals(a){return this._ticks===a._ticks}valueOf(){return this._ticks}compare(a,r){return a._ticks>r._ticks?1:a._ticks<r._ticks?-1:0}interval(a,r){return new Smart.Utilities.TimeSpan((a*r+(a>=0?.5:-.5))*this.ticksPerMillisecond)}fromDays(a){return this.interval(a,this.millisPerDay)}fromHours(a){return this.interval(a,this.millisPerHour)}fromMilliseconds(a){return this.interval(a,1)}fromMinutes(a){return this.interval(a,this.millisPerMinute)}fromSeconds(a){return this.interval(a,this.millisPerSecond)}fromTicks(a){return new Smart.Utilities.TimeSpan(a)}toString(){return this.totalMilliseconds().toString()}negate(){return new Smart.Utilities.TimeSpan(-this._ticks)}}),Smart.Utilities.Assign("DateTime",class{constructor(){function a(s){const l=r.regexISOString.exec(s);o=new Smart.Utilities.DateTime(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5]),parseFloat(l[6]),parseFloat(l[7]),0,0,0,0,0,0,0,"UTC")}const r=this;let o;if(r.ticksPerMillisecond=1e4,r.millisecondsPerTick=1e-4,r.ticksPerSecond=1e7,r.secondsPerTick=1e-7,r.ticksPerMinute=6e8,r.minutesPerTick=1.6666666666666667e-9,r.ticksPerHour=36e9,r.hoursPerTick=27777777777777777e-27,r.ticksPerDay=864e9,r.daysPerTick=11574074074074074e-28,r.millisPerSecond=1e3,r.millisPerMinute=6e4,r.millisPerHour=36e5,r.millisPerDay=864e5,r.daysPerYear=365,r.daysPer4Years=1461,r.daysPer100Years=36524,r.daysPer400Years=146097,r.daysTo1601=584388,r.daysTo1899=693593,r.daysTo10000=3652059,r.minTicks=0,r.maxTicks=3155378976e9,r.maxMillis=3155378976e5,r.datePartYear=0,r.datePartDayOfYear=1,r.datePartMonth=2,r.datePartDay=3,r.daysToMonth365=n,r.daysToMonth366=i,r.minValue=new Date(0),r.maxValue=new Date(3155378976e9),r.ticksMask=0x4000000000000000,r.flagsMask=0xc000000000000000,r.localMask=0x8000000000000000,r.ticksCeiling=0x4000000000000000,r.kindUnspecified=0,r.kindUtc=0x4000000000000000,r.kindLocal=0x8000000000000000,r.kindLocalAmbiguousDst=0xc000000000000000,r.kindShift=62,r.regexTrim=/^\s+|\s+$/g,r.regexInfinity=/^[+-]?infinity$/i,r.regexHex=/^0x[a-f0-9]+$/i,r.regexParseFloat=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,r.regexISOString=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/,r.calendar={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",ISO8601:"yyyy-MM-ddTHH:mm:ss.sssZ",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",FP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",FPA:"yyyy/MM/dd HH:mm:ss:fffuunnppeeaaxxoo",FPA2:"yyyy-MM-dd HH:mm:ss:fffuunnppeeaaxxoo",FT:"HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",PP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp",PT:"HH:mm:ss:fff:uu:nn:pp"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","},r.dateData=0,r.timeZone=null,r.timeZones=t,r._codeToUnit={u:"_microsecond",uu:"_microsecond",n:"_nanosecond",nn:"_nanosecond",p:"_picosecond",pp:"_picosecond",e:"_femtosecond",ee:"_femtosecond",a:"_attosecond",aa:"_attosecond",x:"_zeptosecond",xx:"_zeptosecond",o:"_yoctosecond",oo:"_yoctosecond"},r._smallUnits=["_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"],r._microsecond=0,r._nanosecond=0,r._picosecond=0,r._femtosecond=0,r._attosecond=0,r._zeptosecond=0,r._yoctosecond=0,0===arguments.length){const s=new Date;r.dateData=r.dateToMS(s.getFullYear(),s.getMonth()+1,s.getDate())+r.timeToMS(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds())}else if(1===arguments.length)if(void 0===arguments[0]&&(arguments[0]="todayDate"),"number"==typeof arguments[0]&&isFinite(arguments[0])||"string"!=typeof arguments[0])if("number"==typeof arguments[0])r.dateData=arguments[0];else if(arguments[0]instanceof Date){const s=arguments[0];r.dateData=r.dateToMS(s.getFullYear(),s.getMonth()+1,s.getDate())+r.timeToMS(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds())}else r.dateData=arguments[0];else{let s;"today"===arguments[0]?s=new Date:"todayDate"===arguments[0]?(s=new Date,s.setHours(0,0,0,0)):r.regexISOString.test(arguments[0])?a(arguments[0]):s=r.tryparseDate(arguments[0]),s&&(r.dateData=r.dateToMS(s.getFullYear(),s.getMonth()+1,s.getDate())+r.timeToMS(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()))}else if(2===arguments.length){if(void 0===arguments[0]&&(arguments[0]="todayDate"),"number"==typeof arguments[0]&&isFinite(arguments[0])||"string"!=typeof arguments[0])if("number"==typeof arguments[0])r.dateData=arguments[0];else if(arguments[0]instanceof Date){const s=arguments[0];r.dateData=r.dateToMS(s.getFullYear(),s.getMonth()+1,s.getDate())+r.timeToMS(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds())}else r.dateData=arguments[0];else{let s;"today"===arguments[0]?s=new Date:"todayDate"===arguments[0]?(s=new Date,s.setHours(0,0,0,0)):r.regexISOString.test(arguments[0])?a(arguments[0]):s=r.tryparseDate(arguments[0]),s&&(r.dateData=r.dateToMS(s.getFullYear(),s.getMonth()+1,s.getDate())+r.timeToMS(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()))}r.validateTimeZone(arguments[1])}else if(arguments.length>2)if("string"==typeof arguments[0]){const s=r.tryparseDate(arguments[0],arguments[2],arguments[1]);r.dateData=r.dateToMS(s.getFullYear(),s.getMonth()+1,s.getDate())+r.timeToMS(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds())}else{const s=arguments[0],l=arguments[7]||0,d=arguments[8]||0,c=arguments[9]||0,u=arguments[10]||0,m=arguments[11]||0,y=arguments[12]||0,b=arguments[13]||0,f=new Date(s,arguments[1]-1,arguments[2],arguments[3]||0,arguments[4]||0,arguments[5]||0,arguments[6]||0);s<1970&&f.setFullYear(s),r.dateData=r.dateToMS(f.getFullYear(),f.getMonth()+1,f.getDate())+r.timeToMS(f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds()),r._microsecond=l,r._nanosecond=d,r._picosecond=c,r._femtosecond=u,r._attosecond=m,r._zeptosecond=y,r._yoctosecond=b,arguments[14]&&r.validateTimeZone(arguments[14])}if(r.timeZone||r.validateTimeZone("Local"),o){const s=o.toTimeZone(r.timeZone);r.dateData=s.dateData}}static isValidDate(a){const r=this.validateDate(a);return!(!r||r&&!r.dateData)}static validateDate(a,r,o){if(a instanceof Smart.Utilities.DateTime)return a;if(a instanceof Date)return new Smart.Utilities.DateTime(a);try{if("string"==typeof a&&o)return this.parseDateString(a,r,o);if(new RegExp(/^\d{1,2}\/\d{1,2}\/\d{4}(, \d{1,2}:\d{2}:\d{1,2} [A|P]M)?$/).test(a)){const s=new Date(a);if(!isNaN(s.getTime()))return new Smart.Utilities.DateTime(s)}if("string"==typeof a)return this.parseDateString(a,r,o);if("number"==typeof a)return new Smart.Utilities.DateTime(new Date(a))}catch{}return r}static parseDateString(a,r,o){const s=new Date(a);if(!isNaN(s.getTime()))return a&&"string"==typeof a&&o?new Smart.Utilities.DateTime(a,o,null):new Smart.Utilities.DateTime(s);const l=a.indexOf("Date("),d=a.indexOf("DateTime("),c=a.lastIndexOf(")");let u=a;if(-1===l&&-1===d||-1===c){const m=new Smart.Utilities.DateTime,y=m.parseDate(a,o);if(y)return u=new Smart.Utilities.DateTime(y),m.copySmallTimePartValues(u),u}else{if(u=a.slice(-1!==l?l+5:d+9,c),u=u.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),""===u.trim())return new Smart.Utilities.DateTime;if(new RegExp(/(^(\d+)(\s*,\s*\d+)+(\s*,\s*[a-zA-Z ]+)?$)/g).test(u))return u=u.split(","),u.map(function(m,y){u[y]=isNaN(u[y])?m.trim():parseInt(m)}),-1!==l&&u[1]++,u.unshift(null),u=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,u)),u}if(""===u.trim())return r;if(!isNaN(u))return u=new Date(parseInt(u,10)),new Smart.Utilities.DateTime(u);try{const m=u.split(",");2===m.length?(m[1]=m[1].trim(),m.unshift(null),u=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,m))):u=new Smart.Utilities.DateTime(u)}catch{u=r}return u}static fromFullTimeStamp(a){a=a.toString();const r=new Smart.Utilities.DateTime(parseFloat(a.slice(0,a.length-21)));let o=a.slice(a.length-21),s=0;for(;o.length>0;)r[r._smallUnits[s]]=parseInt(o.slice(0,3),10),o=o.slice(3),s++;return r}static getConstructorParameters(a){return[a.year(),a.month(),a.day(),a.hour(),a.minute(),a.second(),a.millisecond(),a._microsecond,a._nanosecond,a._picosecond,a._femtosecond,a._attosecond,a._zeptosecond,a._yoctosecond,a.timeZone]}static detectDisplayMode(a,r,o){if(a.calendar.patterns[r])return-1!==["d","D","M","Y","d1","d2"].indexOf(r)?"calendar":-1!==["t","T","FT","PT"].indexOf(r)?"timePicker":"default";const s=["d","M","y"],l=["h","H","m","s","t","f","u","n","p","e","a","x","o"],d=o.groups;let c=!1,u=!1;for(let m=0;m<d.length;m++){const y=d[m].charAt(0);if(-1!==s.indexOf(y)?c=!0:-1!==l.indexOf(y)&&(u=!0),c&&u)break}return c===u?"default":c?"calendar":"timePicker"}static getLocalizedNames(a){const r={names:[],namesAbbr:[],namesShort:[]},o={names:[],namesAbbr:[]};if(this[a])return this[a];for(let s=23;s<30;s++){const l=new Date(2017,6,s),d=l.toLocaleString(a,{weekday:"long"});r.names.push(d),r.namesAbbr.push(l.toLocaleString(a,{weekday:"short"})),r.namesShort.push(d.substring(0,2))}for(let s=0;s<12;s++){const l=new Date(2017,s,1).toLocaleString(a,{month:"long"});o.names.push(l),o.namesAbbr.push(l.substring(0,3))}return o.names.push(""),o.namesAbbr.push(""),this[a]={days:r,months:o},this[a]}internalMS(){return this.dateData}getDatePart(a){const r=this,o=r.internalMS();let s=parseInt(o/r.millisPerDay);const l=parseInt(s/r.daysPer400Years);s-=l*r.daysPer400Years;let d=parseInt(s/r.daysPer100Years);4===d&&(d=3),s-=d*r.daysPer100Years;const c=parseInt(s/r.daysPer4Years);s-=c*r.daysPer4Years;let u=parseInt(s/r.daysPerYear);if(4===u&&(u=3),a===r.datePartYear)return parseInt(400*l+100*d+4*c+u+1);if(s-=u*r.daysPerYear,a===r.datePartDayOfYear)return parseInt(s+1);const m=3!==u||24===c&&3!==d?r.daysToMonth365:r.daysToMonth366;let y=s>>6;for(;s>=m[y];)y++;return a===r.datePartMonth?parseInt(y):parseInt(s-m[y-1]+1)}dayOfWeek(){return parseInt(this.dateData/this.millisPerDay+1)%7}dayOfYear(){return this.getDatePart(this.datePartDayOfYear)}weekOfYear(a){const r=this.toDate(),o=a||this.calendar.firstDay,s=new Date(r.getFullYear(),0,1),l=Math.floor((r.getTime()-s.getTime()-6e4*(r.getTimezoneOffset()-s.getTimezoneOffset()))/864e5)+1;let d,c=s.getDay()-o;if(c=c>=0?c:c+7,c<4){if(d=Math.floor((l+c-1)/7)+1,d>52){let u=new Date(r.getFullYear()+1,0,1).getDay()-o;u=u>=0?u:u+7,d=u<4?1:53}}else d=Math.floor((l+c-1)/7);return d}subtract(a){const r=this;return new Smart.Utilities.TimeSpan(r.dateData*r.ticksPerMillisecond-a.dateData*r.ticksPerMillisecond)}dateToMS(a,r,o){const s=this;if(a>=1&&a<=9999&&r>=1&&r<=12){a=parseInt(a);const l=s.isLeapYear(a)?s.daysToMonth366:s.daysToMonth365;if(o>=1&&o<=l[r]-l[r-1]){const d=a-1;return(365*d+parseInt(d/4)-parseInt(d/100)+parseInt(d/400)+l[r-1]+o-1)*s.millisPerDay}}}isLeapYear(a){if(a<1||a>9999)throw new Error("Year out of Range");return a%4==0&&(a%100!=0||a%400==0)}timeToMS(a,r,o,s){const l=this;if(a>=0&&a<24&&r>=0&&r<60&&o>=0&&o<60){const d=parseInt(3600*a+60*r+o);return s>0&&s<1e3?d*l.millisPerSecond+s:d*l.millisPerSecond}}daysInMonth(a,r){if(r<1||r>12)throw new Error("Month out of Range");const o=this,s=o.isLeapYear(a)?o.daysToMonth366:o.daysToMonth365;return s[r]-s[r-1]}arrayIndexOf(a,r){return a.indexOf(r)}startsWith(a,r){return 0===a.indexOf(r)}endsWith(a,r){return a.substr(a.length-r.length)===r}trim(a){return(a+"").replace(this.regexTrim,"")}expandFormat(a,r){let o,s=a.patterns,l=(r=r||"F").length;if(s[r])return s[r];if(1===l){if(o=s[r],!o)throw"Invalid date format string '"+r+"'.";r=o}else 2===l&&"%"===r.charAt(0)&&(r=r.charAt(1));return r}getEra(a,r){if(!r||"string"==typeof a)return 0;let o,s=a.getTime();for(let l=0,d=r.length;l<d;l++)if(o=r[l].start,null===o||s>=o)return l;return 0}toUpper(a){return a.split("\xa0").join(" ").toUpperCase()}toUpperArray(a){const r=[];for(let o=0,s=a.length;o<s;o++)r[o]=this.toUpper(a[o]);return r}getEraYear(a,r,o,s){let l=a.getFullYear();return!s&&r.eras&&(l-="number"==typeof o?o:r.eras[o].offset),l}getDayIndex(a,r,o){const s=this,l=a.days;let d,c=a._upperDays;return c||(a._upperDays=c=[s.toUpperArray(l.names),s.toUpperArray(l.namesAbbr),s.toUpperArray(l.namesShort)]),r=r.toUpperCase(),o?(d=s.arrayIndexOf(c[1],r),-1===d&&(d=s.arrayIndexOf(c[2],r))):d=s.arrayIndexOf(c[0],r),d}getMonthIndex(a,r,o){const s=this;let l=a.months,d=a.monthsGenitive||a.months,c=a._upperMonths,u=a._upperMonthsGen;c||(a._upperMonths=c=[s.toUpperArray(l.names),s.toUpperArray(l.namesAbbr)],a._upperMonthsGen=u=[s.toUpperArray(d.names),s.toUpperArray(d.namesAbbr)]),r=s.toUpper(r);let m=s.arrayIndexOf(o?c[1]:c[0],r);return m<0&&(m=s.arrayIndexOf(o?u[1]:u[0],r)),m}appendPreOrPostMatch(a,r){let o=0,s=!1;for(let l=0,d=a.length;l<d;l++){const c=a.charAt(l);switch(c){case"'":s?r.push("'"):o++,s=!1;break;case"\\":s&&r.push("\\"),s=!s;break;default:r.push(c),s=!1}}return o}getTokenRegExp(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyyy|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|uu|u|nn|n|pp|p|ee|e|aa|a|xx|x|oo|o|i{1,24}|zzz|zz|z|gg|g/g}static ParseDate(a,r){return(new Smart.Utilities.DateTime).tryparseDate(a,null,r)}tryparseDate(a,r,o){const s=this;if(null==r&&(r=s.calendar),void 0!==o){if(Array.isArray(o))for(let m=0;m<o.length;m++){const y=s.parseDate(a,o[m],r);if(y)return y}const u=s.parseDate(a,o,r);if(u)return u}if(""===a)return null;if(null==a||a.substring||(a=a.toString()),null!=a&&"/Date("===a.substring(0,6)){const u=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/;let m=new Date(+a.replace(/\/Date\((\d+)\)\//,"$1"));if("Invalid Date"===m){const y=a.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/);m=null,y&&(m=new Date(1*y[1]+36e5*y[2]+6e4*y[3]))}if(null==m||"Invalid Date"===m||isNaN(m)){const y=u.exec(a);if(y){const b=new Date(parseInt(y[1]));if(y[2]){let f=parseInt(y[3]);"-"===y[2]&&(f=-f);const w=b.getUTCMinutes();b.setUTCMinutes(w-f)}if(!isNaN(b.valueOf()))return b}}return m}const l={smartdate:"yyyy-MM-dd HH:mm:ss",d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",ISO8601:"yyyy-MM-ddTHH:mm:ss.sssZ",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"MM-dd-yyyy",d4:"MM.dd.yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",custom3:"yyyy-MM-ddTHH:mm:ss.fff+HH:mm",custom4:"yyyy-MM-ddTHH:mm:ss.fff-HH:mm",custom5:"yyyy-MM-ddTHH:mm:ss.ffffff+HH:mm",custom6:"yyyy-MM-ddTHH:mm:ss.ffffff-HH:mm",iso:"yyyy-MM-ddTHH:mm:ssZ",iso2:"yyyy-MM-ddTHH:mm.fffZ",iso_date1:"yyyy-MM-dd",iso_date2:"yyyy-MM-dd",iso_date3:"yyyy-ddd",iso_date4:"yyyy-MM-dd HH:mm",iso_date5:"yyyy-MM-dd HH:mm Z",iso_date6:"yyyy-MMM-dd",iso_date7:"yyyy-MM",iso_date8:"yyyy-MMM",iso_date9:"yyyy-MMMM",iso_date10:"yyyy-MMMM-dd",iso_time1:"HH:mm:ss.tttt",iso_time2:"HH:mm:ss",iso_time3:"HH:mm",iso_time4:"HH",iso_time5:"yyyyyy-MM-dd",iso_time6:"yyyyyy-MM-dd"};for(let u in l){const m=s.parseDate(a,l[u],r);if(m)return m}const d=r.patterns;for(let u in d){const m=s.parseDate(a,d[u],r);if(m){if("ISO"===u){const y=s.parseDate(a,d.ISO2,r);if(y)return y}return m}}let c;if("string"==typeof a){const u=[":","/","-"," ",","];let m="",y=(S=a=s.trim(a),a=S.replace(new RegExp(", ","g"),","));a.indexOf(":")>=0?(m=a.substring(a.indexOf(":")-2),m=s.trim(m),y=a.substring(0,a.indexOf(":")-2)):a.toUpperCase().indexOf("AM")>=0?(m=a.substring(a.toUpperCase().indexOf("AM")-2),m=s.trim(m),y=a.substring(0,a.toUpperCase().indexOf("AM")-2)):a.toUpperCase().indexOf("PM")>=0&&(m=a.substring(a.toUpperCase().indexOf("PM")-2),m=s.trim(m),y=a.substring(0,a.toUpperCase().indexOf("PM")-2));let b=new Date,f=!1;if(y){for(let M=0;M<u.length;M++)if(y.indexOf(u[M])>=0){c=y.split(u[M]);break}if(!c)return null;let w=new Array,v=new Array,S=new Array,_=null,T=null;for(let M=0;M<c.length;M++){const L=c[M],F=s.parseDate(L,"d",r)||s.parseDate(L,"dd",r)||s.parseDate(L,"ddd",r)||s.parseDate(L,"dddd",r);if(F&&(w.push(F.getDate()),L.length>2)){_=M;break}}for(let M=0;M<c.length;M++){const L=c[M],F=s.parseDate(L,"M",r)||s.parseDate(L,"MM",r)||s.parseDate(L,"MMM",r)||s.parseDate(L,"MMMM",r);if(F){if(null!=_&&_===M)continue;if(v.push(F.getMonth()),L.length>2){T=M;break}}}for(let M=0;M<c.length;M++){const F=s.parseDate(c[M],"yyyy",r);if(F){if(null!=_&&_===M||null!=T&&T===M)continue;S.push(F.getFullYear())}}const z=new Array;for(let M=w.length-1;M>=0;M--)for(let L=0;L<v.length;L++)for(let F=0;F<S.length;F++){const B=new Date(S[F],v[L],w[M]);S[F]<1970&&B.setFullYear(S[F]),isNaN(B.getTime())||z.push(B)}z.length>0&&(b=z[0],f=!0)}if(m){const w=m.indexOf(":")>=0?m.split(":"):m,v=s.parseDate(m,"h:mm tt",r)||s.parseDate(m,"HH:mm:ss.fff",r)||s.parseDate(m,"HH:mm:ss.ff",r)||s.parseDate(m,"h:mm:ss tt",r)||s.parseDate(m,"HH:mm:ss.tttt",r)||s.parseDate(m,"HH:mm:ss",r)||s.parseDate(m,"HH:mm",r)||s.parseDate(m,"HH",r);let S=0,_=0,T=0,z=0;v&&!isNaN(v.getTime())?(S=v.getHours(),_=v.getMinutes(),T=v.getSeconds(),z=v.getMilliseconds()):(1===w.length&&(S=parseInt(w[0])),2===w.length&&(S=parseInt(w[0]),_=parseInt(w[1])),3===w.length&&(S=parseInt(w[0]),_=parseInt(w[1]),w[2].indexOf(".")>=0?(T=parseInt(w[2].toString().split(".")[0]),z=parseInt(w[2].toString().split(".")[1])):T=parseInt(w[2])),4===w.length&&(S=parseInt(w[0]),_=parseInt(w[1]),T=parseInt(w[2]),z=parseInt(w[3]))),!b||isNaN(S)||isNaN(_)||isNaN(T)||isNaN(z)||(b.setHours(S,_,T,z),f=!0)}if(f)return b}var S;if(null!=a){c=[":","/","-"];let u=!0;for(let m=0;m<c.length;m++)-1!==a.indexOf(c[m])&&(u=!1);if(u){const m=new Number(a);if(!isNaN(m))return new Date(m)}}return null}getParseRegExp(a,r){const o=this;let s=a._parseRegExp;if(s){const w=s[r];if(w)return w}else a._parseRegExp=s={};let l,d=o.expandFormat(a,r).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],u=[],m=0,y=0,b=o.getTokenRegExp();for(;null!==(l=b.exec(d));){const w=d.slice(m,l.index);if(m=b.lastIndex,y+=o.appendPreOrPostMatch(w,c),y%2){c.push(l[0]);continue}let v,S=l[0],_=S.length;switch(S){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":v="(\\D+)";break;case"tt":case"t":v="(\\D*)";break;case"yyyyy":v="(\\d{1,4})";break;case"yyyy":v="(\\d{"+_+"})";break;case"fff":case"ff":case"f":v="(\\d{1,"+_+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":v="(\\d\\d?)";break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":v="(\\d{1,3})";break;case"zzz":v="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":v="([+-]?\\d\\d?)";break;case"/":v="/";break;default:if(!/i{1,24}/.test(S))throw"Invalid date format pattern '"+S+"'.";v="(\\d{"+S.length+"})"}v&&c.push(v),"/"!==S&&u.push(l[0])}o.appendPreOrPostMatch(d.slice(m),c),c.push("$");const f={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:u};return s[r]=f}outOfRange(a,r,o){return a<r||a>o}expandYear(a,r){const o=this,s=new Date,l=o.getEra(s);if(r<100){let d=a.twoDigitYearMax;d="string"==typeof d?(new Date).getFullYear()%100+parseInt(d,10):d;const c=o.getEraYear(s,a,l);(r+=c-c%100)>d&&(r-=100)}return r}padZeros(a,r){let o,s=a+"";return r>1&&s.length<r?(o=["0","00","000"][r-2]+s,o.substr(o.length-r,r)):(o=s,o)}parseDate(a,r,o){const s=this;null==o&&(o=s.calendar),a=s.trim(a);const l=o,d=s.getParseRegExp(l,r),c=new RegExp(d.regExp).exec(a);if(null===c)return null;let u,m=d.groups,y=null,b=null,f=null,w=null,v=null,S=0,_=0,T=0,z=0,M=null,L=!1;for(let Q=0,ee=m.length;Q<ee;Q++){const se=c[Q+1];if(se){const pe=m[Q],fe=pe.length,k=parseInt(se,10);switch(pe){case"dd":case"d":if(w=k,s.outOfRange(w,1,31))return null;break;case"MMM":case"MMMM":case"MMMMM":case"MMMMMM":case"MMMMMMM":case"MMMMMMMM":if(f=s.getMonthIndex(l,se,3===fe),s.outOfRange(f,0,11))return null;break;case"M":case"MM":if(f=k-1,s.outOfRange(f,0,11))return null;break;case"y":case"yy":case"yyyy":if(b=fe<4?s.expandYear(l,k):k,s.outOfRange(b,0,9999))return null;break;case"h":case"hh":if(S=k,12===S&&(S=0),s.outOfRange(S,0,11))return null;break;case"H":case"HH":if(S=k,s.outOfRange(S,0,23))return null;break;case"m":case"mm":if(_=k,s.outOfRange(_,0,59))return null;break;case"s":case"ss":if(T=k,s.outOfRange(T,0,59))return null;break;case"tt":case"t":if(L=l.PM&&(se===l.PM[0]||se===l.PM[1]||se===l.PM[2]),!L&&(!l.AM||se!==l.AM[0]&&se!==l.AM[1]&&se!==l.AM[2]))return null;break;case"f":case"ff":case"fff":if(z=k*Math.pow(10,3-fe),s.outOfRange(z,0,999))return null;break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":if(s.outOfRange(k,0,1e3))return null;s[s._codeToUnit[pe]]=k;break;case"ddd":case"dddd":if(v=s.getDayIndex(l,se,3===fe),s.outOfRange(v,0,6))return null;break;case"zzz":{const h=se.split(/:/);if(2!==h.length||(u=parseInt(h[0],10),s.outOfRange(u,-12,13)))return null;const g=parseInt(h[1],10);if(s.outOfRange(g,0,59))return null;M=60*u+(s.startsWith(se,"-")?-g:g);break}case"z":case"zz":if(u=k,s.outOfRange(u,-12,13))return null;M=60*u;break;case"g":case"gg":{let h=se;if(!h||!l.eras)return null;h=this.trim(h.toLowerCase());for(let g=0,D=l.eras.length;g<D;g++)if(h===l.eras[g].nathat.toLowerCase()){y=g;break}if(null===y)return null;break}default:{let h=se;h.length%3==1?h+="00":h.length%3==2&&(h+="0"),z=parseInt(h.slice(0,3),10),h=h.slice(3);let g=0;for(;h.length>0;)s[s._smallUnits[g]]=parseInt(h.slice(0,3),10),h=h.slice(3),g++}}}}let F,B=new Date,J=l.convert;if(F=B.getFullYear(),null===b?b=F:l.eras&&(b+=l.eras[y||0].offset),null===f&&(f=0),null===w&&(w=1),J){if(B=J.toGregorian(b,f,w),null===B)return null}else if(B.setFullYear(b,f,w),B.getDate()!==w||null!==v&&B.getDay()!==v)return null;if(L&&S<12&&(S+=12),B.setHours(S,_,T,z),null!==M){const Q=B.getMinutes()-(M+B.getTimezoneOffset());B.setHours(B.getHours()+parseInt(Q/60,10),Q%60)}return B}toString(a,r){const o=this;void 0===a&&(a="yyyy-MM-dd HH:mm:ss");const s=o.dateData.toString()+o.getFractionsOfSecondStamp()+a+(o.timeZone||"");if(Smart.Utilities.DateTime.cache&&Smart.Utilities.DateTime.cache[s]&&!1!==o.showTodayDateAsString)return Smart.Utilities.DateTime.cache[s];const l=o.toDate();if(null==r&&(r=o.calendar),"string"==typeof l)return l;if(!a||!a.length||"i"===a){let v;return v=o.formatDate(l,r.patterns.F,r),v}const d=r.eras,c="s"===a;a=o.expandFormat(r,a);const u=[];let m,y=0,b=o.getTokenRegExp();function f(v,S){if(void 0!==v.getMonth)switch(S){case 0:return v.getFullYear();case 1:return v.getMonth();case 2:return v.getDate()}}for(;;){const v=b.lastIndex,S=b.exec(a),_=a.slice(v,S?S.index:a.length);if(y+=o.appendPreOrPostMatch(_,u),!S)break;if(y%2){u.push(S[0]);continue}const T=S[0],z=T.length;let M;if(/i{1,24}/.test(T))u.push(o.getFirstNDigitsOfPrecision(T.length));else switch(T){case"ddd":case"dddd":u.push((3===z?r.days.namesAbbr:r.days.names)[l.getDay()]);break;case"d":case"dd":u.push(o.padZeros(f(l,2),z));break;case"MMM":case"MMMM":M=f(l,1),u.push(r.months[3===z?"namesAbbr":"names"][M]);break;case"M":case"MM":u.push(o.padZeros(f(l,1)+1,z));break;case"y":case"yy":case"yyyy":M=o.getEraYear(l,r,o.getEra(l,d),c),z<4&&(M%=100),u.push(o.padZeros(M,z));break;case"h":case"hh":m=l.getHours()%12,0===m&&(m=12),u.push(o.padZeros(m,z));break;case"H":case"HH":u.push(o.padZeros(l.getHours(),z));break;case"m":case"mm":u.push(o.padZeros(l.getMinutes(),z));break;case"s":case"ss":u.push(o.padZeros(l.getSeconds(),z));break;case"t":case"tt":M=l.getHours()<12?r.AM?r.AM[0]:" ":r.PM?r.PM[0]:" ",u.push(1===z?M.charAt(0):M);break;case"f":case"ff":case"fff":u.push(o.padZeros(l.getMilliseconds(),3).substr(0,z));break;case"u":case"n":case"p":case"e":case"a":case"x":case"o":u.push(o[o._codeToUnit[T]]);break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":u.push(o.padZeros(o[o._codeToUnit[T]],3));break;case"z":case"zz":u.push((o.timeZoneOffsetHours>=0?"+":"-")+o.padZeros(Math.floor(Math.abs(o.timeZoneOffsetHours)),z));break;case"zzz":u.push((o.timeZoneOffsetHours>=0?"+":"-")+o.padZeros(Math.floor(Math.abs(o.timeZoneOffsetHours)),2)+":"+o.padZeros(60*Math.abs(o.timeZoneOffsetHours%1),2));break;case"g":case"gg":r.eras&&u.push(r.eras[o.getEra(l,d)].name);break;case"/":u.push(r["/"]);break;default:throw"Invalid date format pattern '"+T+"'."}}let w=u.join("");if(Smart.Utilities.DateTime.cache||(Smart.Utilities.DateTime.cache=new Array),o._today||(o._today=new Date),o.calendar&&o.calendar.today&&-1===a.indexOf(":")&&l.getFullYear()===o._today.getFullYear()&&l.getDate()===o._today.getDate()&&l.getMonth()===o._today.getMonth()){if(!1===o.showTodayDateAsString)return Smart.Utilities.DateTime.cache[s]=w,w;w=o.calendar.today}return Smart.Utilities.DateTime.cache[s]=w,w}getFractionsOfSecondStamp(){const a=this;return a._microsecond.toString()+a._nanosecond+a._picosecond+a._femtosecond+a._attosecond+a._zeptosecond+a._yoctosecond}getFirstNDigitsOfPrecision(a,r){const o=this;return(""+(!0!==r?o.padZeros(o.millisecond(),3):"")+o.padZeros(o._microsecond,3)+o.padZeros(o._nanosecond,3)+o.padZeros(o._picosecond,3)+o.padZeros(o._femtosecond,3)+o.padZeros(o._attosecond,3)+o.padZeros(o._zeptosecond,3)+o.padZeros(o._yoctosecond,3)).slice(0,a)}copySmallTimePartValues(a){const r=this;a._microsecond=r._microsecond,a._nanosecond=r._nanosecond,a._picosecond=r._picosecond,a._femtosecond=r._femtosecond,a._attosecond=r._attosecond,a._zeptosecond=r._zeptosecond,a._yoctosecond=r._yoctosecond}add(a,r,o){const s=this,l=s.internalMS();if(void 0===r){if(!1===o)return s.dateData=l+parseInt(a._ticks/s.ticksPerMillisecond),s;const u=new Smart.Utilities.DateTime(l+parseInt(a._ticks/s.ticksPerMillisecond));return s.copyTimeZone(u),s.copySmallTimePartValues(u),u}const d=a*r;if(d<=-s.maxMillis||d>=s.maxMillis)throw new Error("Out of Range");if(!1===o)return s.dateData=l+d,s;const c=new Smart.Utilities.DateTime(l+d);return s.copyTimeZone(c),s.copySmallTimePartValues(c),c}addDays(a,r){return this.add(a,this.millisPerDay,r)}clone(){const a=this,r=new Smart.Utilities.DateTime(a.dateData);return a.copyTimeZone(r),a.copySmallTimePartValues(r),r}clearTime(){const a=this,r=a.month(),o=a.year(),s=a.day(),l=new Smart.Utilities.DateTime(o,r,s,0,0,0,0);return a.copyTimeZone(l),l}addHours(a,r){return this.add(a,this.millisPerHour,r)}addDeciseconds(a,r){return this.add(100*a,1,r)}addCentiseconds(a,r){return this.add(10*a,1,r)}addMilliseconds(a,r){return this.add(a,1,r)}addMinutes(a,r){return this.add(a,this.millisPerMinute,r)}addMonths(a,r){const o=this;if(a<-12e4||a>12e4)throw new Error("Invalid Months Value");let s=parseInt(o.getDatePart(o.datePartYear)),l=parseInt(o.getDatePart(o.datePartMonth)),d=parseInt(o.getDatePart(o.datePartDay));if(a%12==0)s+=a/12;else{const m=l-1+a;m>=0?(l=m%12+1,s+=m/12):(l=12+(m+1)%12,s+=(m-11)/12),s=parseInt(s)}if(s<1||s>9999)throw new Error("Year out of range");const c=o.daysInMonth(s,l);if(d>c&&(d=c),!1===r)return o.dateData=o.dateToMS(s,l,d)+o.internalMS()%o.millisPerDay,o;const u=new Smart.Utilities.DateTime(o.dateToMS(s,l,d)+o.internalMS()%o.millisPerDay);return o.copyTimeZone(u),o.copySmallTimePartValues(u),u}addSeconds(a,r){return this.add(a,this.millisPerSecond,r)}addYears(a,r){return this.addMonths(12*a,r)}addMicroseconds(a,r){if(0===a)return;const o=this;let s,l;a<0&&0===o.hour()&&0===o.minute()&&0===o.second()&&0===o.millisecond()&&0===o._microsecond&&(s=parseInt(a/1e3,10)-1,l=1e3+a%1e3);const d=1e3*o.timeToMS(o.hour(),o.minute(),o.second(),o.millisecond())+o._microsecond,c=d+a;let u;if(void 0===s&&(s=parseInt(c/1e3,10)-parseInt(d/1e3,10)),void 0===l&&(l=parseInt(c%1e3,10)),0!==s&&(u=o.addMilliseconds(s,r)),!1!==r)return u||(u=o.clone()),u._microsecond=l,u;o._microsecond=l}addFractionsOfSecond(a,r,o,s,l){if(0===a)return;const d=this,c=1e3*d[s]+d[o],u=a+c;let m,y=parseInt(u/1e3,10)-parseInt(c/1e3,10),b=parseInt(u%1e3,10);if(a<0&&u<0&&b<0&&(y--,b=1e3+b),0!==y&&(m=d[l](y,r)),!1!==r)return m||(m=d.clone()),m[o]=b,m;d[o]=b}addNanoseconds(a,r){return this.addFractionsOfSecond(a,r,"_nanosecond","_microsecond","addMicroseconds")}addPicoseconds(a,r){return this.addFractionsOfSecond(a,r,"_picosecond","_nanosecond","addNanoseconds")}addFemtoseconds(a,r){return this.addFractionsOfSecond(a,r,"_femtosecond","_picosecond","addPicoseconds")}addAttoseconds(a,r){return this.addFractionsOfSecond(a,r,"_attosecond","_femtosecond","addFemtoseconds")}addZeptoseconds(a,r){return this.addFractionsOfSecond(a,r,"_zeptosecond","_attosecond","addAttoseconds")}addYoctoseconds(a,r){return this.addFractionsOfSecond(a,r,"_yoctosecond","_zeptosecond","addZeptoseconds")}getTimeZoneOffset(){const a=new Date,r=new Date(a.getFullYear(),0,1),o=new Date(a.getFullYear(),6,1),s=a.getTimezoneOffset()<Math.max(r.getTimezoneOffset(),o.getTimezoneOffset());return{offset:-a.getTimezoneOffset()/60,dst:+s}}isInDaylightSavingTime(){const a=new Date,r=new Date(a.getFullYear(),0,1),o=new Date(a.getFullYear(),6,1);return this.date().getTimezoneOffset()<Math.max(r.getTimezoneOffset(),o.getTimezoneOffset())}supportsDaylightSavingTime(){const a=new Date,r=new Date(a.getFullYear(),0,1),o=new Date(a.getFullYear(),6,1);return r.getTimezoneOffset()!==o.getTimezoneOffset()}date(){const a=this,r=a.month(),o=a.year(),s=a.day(),l=new Smart.Utilities.DateTime(o,r,s);return a.copyTimeZone(l),l}isWeekend(){return 0===this.dayOfWeek()||6===this.dayOfWeek()}toDate(a){const r=this,o=r.month(),s=r.year(),l=r.day(),d=r.hour(),c=r.minute(),u=r.second(),m=r.millisecond();let y=new Date(s,o-1,l);if(s<1970&&y.setFullYear(s),y.setHours(d,c,u,m),a){const b=r.timeZones.filter(function(f){return f.id===a});if(b.length){let f=b[0].offset;const w=y.getTime();let v=60*y.getTimezoneOffset()*1e3;if(r.timeZone){const S=r.timeZones.filter(function(_){return _.id===r.timeZone});S.length&&(v=60*-S[0].offset*1e3)}y=new Date(w+v+6e4*f)}}return y}toTimeZone(a){const r=this;let o=a;if(null==o&&(o="Local"),r.timeZone===o)return r.clone();const s=r.timeZones.filter(function(c){return c.id===o});if(0===s.length)return r.clone();const l=this.toDate(o),d=new Smart.Utilities.DateTime(l);return d.timeZone=o,d.timeZoneOffset=s[0].offset,d.timeZoneOffsetHours=s[0].offsetHours,r.copySmallTimePartValues(d),d}day(){return this.getDatePart(this.datePartDay)}month(){return this.getDatePart(this.datePartMonth)}year(){return this.getDatePart(this.datePartYear)}millisecond(){return parseInt(this.internalMS()%1e3)}hour(){return parseInt(Math.floor(this.internalMS()/this.millisPerHour)%24)}minute(){return parseInt(this.internalMS()/this.millisPerMinute%60)}second(){return parseInt(this.internalMS()/this.millisPerSecond%60)}microsecond(){return this._microsecond}nanosecond(){return this._nanosecond}picosecond(){return this._picosecond}femtosecond(){return this._femtosecond}attosecond(){return this._attosecond}zeptosecond(){return this._zeptosecond}yoctosecond(){return this._yoctosecond}valueOf(){return this.dateData}equals(a){const r=this;return r.dateData===a.dateData&&r._microsecond===a._microsecond&&r._nanosecond===a._nanosecond&&r._picosecond===a._picosecond&&r._femtosecond===a._femtosecond&&r._attosecond===a._attosecond&&r._zeptosecond===a._zeptosecond&&r._yoctosecond===a._yoctosecond}equalDateParts(a){const r=this;return r.year()===a.year()&&r.month()===a.month()&&r.day()===a.day()}compare(a){const r=this;if(r.equals(a))return 0;const o=["dateData","_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"];for(let s=0;s<o.length;s++){const l=o[s];if(r[l]>a[l])return 1;if(r[l]<a[l])return-1}return 0}toDateString(){return this.toDate().toDateString()}toLocaleDateString(){return this.toDate().toLocaleDateString(this.calendar.locale)}toLocaleString(){return this.toDate().toLocaleString(this.calendar.locale)}toLocaleTimeString(){return this.toDate().toLocaleTimeString(this.calendar.locale)}validateTimeZone(a){const r=this;if("string"!=typeof a)return;const o=r.timeZones.filter(function(s){return s.id===a});0!==o.length&&(r.timeZone=a,r.timeZoneOffset=o[0].offset,r.timeZoneOffsetHours=o[0].offsetHours)}copyTimeZone(a){const r=this;a.timeZone=r.timeZone,a.timeZoneOffset=r.timeZoneOffset,a.timeZoneOffsetHours=r.timeZoneOffsetHours}getTimeStamp(){return new Smart.Utilities.BigNumber(this.dateData.toString()+this.getFirstNDigitsOfPrecision(void 0,!0))}})})()},7054:()=>{Smart("smart-date-time-picker",class extends Smart.BaseElement{static get properties(){return{animationSettings:{value:null,type:"object"},autoClose:{value:!1,type:"boolean"},autoCloseDelay:{value:0,type:"number"},calendarButton:{value:!1,type:"boolean"},calendarButtonPosition:{value:"right",allowedValues:["left","right"],type:"string"},calendarMode:{value:"default",allowedValues:["default","classic"],type:"string"},dayNameFormat:{value:"firstTwoLetters",allowedValues:["narrow","firstTwoLetters","long","short"],type:"string"},disableAutoNavigation:{value:!1,type:"boolean"},displayKind:{value:"unspecified",allowedValues:["UTC","local","unspecified"],type:"string"},displayModeView:{value:"table",allowedValues:["table","list"],type:"string"},displayMode:{allowedValues:["outlined","filled","underlined"],value:"outlined",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownDisplayMode:{value:"default",allowedValues:["default","classic","calendar","timePicker","auto"],type:"string"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["auto","bottom","overlay-top","overlay-center","overlay-bottom","top","center-bottom","center-top"],type:"string"},editMode:{value:"default",allowedValues:["default","full","partial"],type:"string"},enableMouseWheelAction:{value:!1,type:"boolean"},firstDayOfWeek:{value:0,type:"number"},footerTemplate:{value:null,type:"any"},footer:{value:!1,type:"boolean"},formatString:{value:"dd-MMM-yy HH:mm:ss.fff",type:"string"},headerTemplate:{value:null,type:"any"},hideDayNames:{value:!1,type:"boolean"},hideOtherMonthDays:{value:!1,type:"boolean"},hideTooltipArrow:{value:!1,type:"boolean"},hint:{value:"",type:"string"},importantDates:{value:[],type:"array"},importantDatesTemplate:{value:null,type:"any"},interval:{value:new Smart.Utilities.TimeSpan(0,0,1),type:"any"},label:{value:"",type:"string"},max:{value:new Smart.Utilities.DateTime(3001,1,1),type:"any"},messages:{value:{en:{now:"Now",dateTabLabel:"DATE",timeTabLabel:"TIME"}},type:"object",extend:!0},min:{value:new Smart.Utilities.DateTime(1600,1,1),type:"any"},name:{value:"",type:"string"},nullable:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},placeholder:{value:"Enter date",type:"string"},restrictedDates:{value:[],type:"array"},spinButtons:{value:!1,type:"boolean"},spinButtonsDelay:{value:75,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},spinButtonsPosition:{value:"right",allowedValues:["left","right"],type:"string"},tooltip:{value:!1,type:"boolean"},tooltipDelay:{value:100,type:"number"},tooltipPosition:{value:"top",allowedValues:["bottom","top","left","right","absolute"],type:"string"},tooltipTemplate:{value:null,type:"any"},validation:{value:"strict",allowedValues:["strict","interaction"],type:"string"},value:{defaultReflectToAttribute:!0,value:new Smart.Utilities.DateTime,type:"any"},weekNumbers:{value:!1,type:"boolean"},weeks:{value:6,type:"number"},yearCutoff:{value:1926,type:"number"}}}static get listeners(){return{"container.mouseout":"_mouseoutHandler","container.mouseover":"_mouseoverHandler","calendarButton.click":"_calendarButtonClickHandler","calendarDropDown.change":"_calendarDropDownChangeHandler","calendarDropDown.click":"_calendarDropDownClickHandler","downButton.click":"_spinButtonsClickHandler","input.blur":"_inputBlurHandler","input.change":"_inputChangeHandler","input.dragstart":"_inputDragstartHandler","input.focus":"_inputFocusHandler","input.keydown":"_inputKeydownHandler","input.down":"_inputDownHandler","input.paste":"_inputPasteHandler","input.select":"_inputSelectHandler","input.up":"_inputUpHandler","input.wheel":"_inputWheelHandler","dropDownContainer.keydown":"_dropDownKeydownHandler","dropDownContainer.transitionend":"_dropDownTransitionendHandler","dropDownHeader.click":"_dropDownHeaderClickHandler","upButton.click":"_spinButtonsClickHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.Utilities.DateTime":"smart.date.js","Smart.Utilities.Draw":"smart.draw.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.NumericProcessor":"smart.numeric.js","Smart.RepeatButton":"smart.button.js","Smart.Calendar":"smart.calendar.js","Smart.TimePicker":"smart.timepicker.js"}}static get styleUrls(){return["smart.datetimepicker.css"]}template(){return'<div id="container" role="presentation">\n                    <span id="label" class="smart-label">[[label]]</span>\n                    <div id="content" class="smart-content">\n                        <input id="input" class="smart-input smart-date-time-input" type="text" readonly="[[readonly]]" disabled="[[disabled]]" placeholder="[[placeholder]]" name="[[name]]" aria-label="[[placeholder]]" />\n                        <div id="spinButtonsContainer" class="smart-spin-buttons-container" role="presentation">\n                            <smart-repeat-button initial-delay="[[spinButtonsInitialDelay]]" animation="[[animation]]" delay="[[spinButtonsDelay]]" readonly="[[readonly]]"  unfocusable id="upButton" right-to-left="[[rightToLeft]]" class="smart-spin-button" aria-label="Increment">\n                                <div class="smart-arrow smart-arrow-up" aria-hidden="true"></div>\n                            </smart-repeat-button>\n                            <smart-repeat-button initial-delay="[[spinButtonsInitialDelay]]" animation="[[animation]]" delay="[[spinButtonsDelay]]" readonly="[[readonly]]" unfocusable id="downButton" right-to-left="[[rightToLeft]]" class="smart-spin-button" aria-label="Decrement">\n                                <div class="smart-arrow smart-arrow-down" aria-hidden="true"></div>\n                            </smart-repeat-button>\n                        </div>\n                        <div id="calendarButton" class="smart-drop-down-button smart-calendar-button" role="button" aria-haspopup="dialog" aria-label="Toggle popup"></div>\n                        <div id="dropDownContainer" class="smart-drop-down smart-date-time-drop-down smart-drop-down-container smart-visibility-hidden" role="dialog">\n                            <div id="dropDownHeader" class="smart-drop-down-header smart-hidden" role="heading" aria-level="1">\n                                <div id="selectDate" class="smart-selected" role="button"></div>\n                                <div id="selectTime" role="button"></div>\n                            </div>\n                            <div id="dropDownContent" class="smart-drop-down-content" role="presentation">\n                                <smart-calendar id="calendarDropDown" class="smart-hidden"\n                                              animation="[[animation]]"\n                                              animation-settings="[[animationSettings]]"\n                                              calendar-mode="[[calendarMode]]"\n                                              day-name-format="[[dayNameFormat]]"\n                                              disable-auto-navigation="[[disableAutoNavigation]]"\n                                              display-mode-view="[[displayModeView]]"\n                                              first-day-of-week="[[firstDayOfWeek]]"\n                                              header-template="[[headerTemplate]]"\n                                              hide-day-names="[[hideDayNames]]"\n                                              hide-other-month-days="[[hideOtherMonthDays]]"\n                                              hide-tooltip-arrow="[[hideTooltipArrow]]"\n                                              important-dates="[[importantDates]]"\n                                              important-dates-template="[[importantDatesTemplate]]"\n                                              locale="[[locale]]"\n                                              right-to-left="[[rightToLeft]]"\n                                              selection-mode="one"\n                                              spin-buttons-delay="[[spinButtonsDelay]]"\n                                              spin-buttons-initial-delay="[[spinButtonsInitialDelay]]"\n                                              theme="[[theme]]"\n                                              tooltip="[[tooltip]]"\n                                              tooltip-delay="[[tooltipDelay]]"\n                                              tooltip-position="[[tooltipPosition]]"\n                                              tooltip-template="[[tooltipTemplate]]"\n                                              unfocusable="[[unfocusable]]"\n                                              view-sections=\'["header", "footer"]\'\n                                              week-numbers="[[weekNumbers]]"\n                                              weeks="[[weeks]]"></smart-calendar>\n                            </div>\n                        </div>\n                    </div>\n                    <span id="hint" inner-h-t-m-l="[[hint]]" class="smart-hint smart-hidden"></span>\n                </div>'}attached(){const e=this;super.attached(),e.isCompleted&&(e._defaultFooterTemplateApplied&&e._addCalendarFooterListeners(),e.$.timePickerDropDown&&e._addTimePickerListener(),e._positionDetection&&e._positionDetection.dropDownAttached())}detached(){const e=this;if(super.detached(),e.close(),e._defaultFooterTemplateApplied){const t=e.$.calendarDropDown.$footer;t.unlisten("change"),t.unlisten("click"),t.unlisten("wheel")}e.$.timePickerDropDown&&e.$.timePickerDropDown.$.unlisten("change"),e._positionDetection&&e._positionDetection.dropDownDetached()}ready(){super.ready();const e=this;e._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e._iOS=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),e._edgeMacFF&&e.$dropDownContainer.addClass("not-in-view"),e._defaultFooterTemplate=document.createElement("template"),e._defaultFooterTemplate.innerHTML='<div class="smart-date-time-picker-footer">\n                <div class="smart-footer-component smart-footer-component-hour" role="presentation">\n                    <input type="text" class="smart-hour-element" aria-label="Hours" />\n                    <span role="presentation">\n                        <smart-repeat-button initial-delay="0" delay="75" aria-label="Increment hours">\n                            <span class="smart-arrow smart-arrow-up" aria-hidden="true"></span>\n                        </smart-repeat-button>\n                        <smart-repeat-button  initial-delay="0" delay="75" aria-label="Decrement hours">\n                            <span class="smart-arrow smart-arrow-down" aria-hidden="true"></span>\n                        </smart-repeat-button>\n                    </span>\n                </div>\n                <div class="smart-footer-component smart-footer-component-minute" role="presentation">\n                    <input class="smart-minute-element" aria-label="Minutes" />\n                    <span role="presentation">\n                        <smart-repeat-button initial-delay="0" delay="75" aria-label="Increment minutes">\n                            <span class="smart-arrow smart-arrow-up" aria-hidden="true"></span>\n                        </smart-repeat-button>\n                        <smart-repeat-button initial-delay="0" delay="75" aria-label="Decrement minutes">\n                            <span class="smart-arrow smart-arrow-down" aria-hidden="true"></span>\n                        </smart-repeat-button>\n                    </span>\n                </div>\n                <div class="smart-footer-component smart-footer-component-ampm" role="presentation">\n                    <input type="text" class="smart-am-pm-element" aria-label="AM/PM" />\n                </div>\n                <div class="smart-footer-component smart-footer-component-today" role="presentation">\n                    <div tabindex="-1" class="smart-today-element" role="button" aria-label="Now"></div>\n                </div>\n            </div>',e._codeToMethod={y:"addYears",yy:"addYears",yyyy:"addYears",yyyyy:"addYears",M:"addMonths",MM:"addMonths",MMM:"addMonths",MMMM:"addMonths",d:"addDays",dd:"addDays",ddd:"addDays",dddd:"addDays",H:"addHours",HH:"addHours",h:"addHours",hh:"addHours",m:"addMinutes",mm:"addMinutes",s:"addSeconds",ss:"addSeconds",f:"addDeciseconds",ff:"addCentiseconds",fff:"addMilliseconds",u:"addMicroseconds",uu:"addMicroseconds",n:"addNanoseconds",nn:"addNanoseconds",p:"addPicoseconds",pp:"addPicoseconds",e:"addFemtoseconds",ee:"addFemtoseconds",a:"addAttoseconds",aa:"addAttoseconds",x:"addZeptoseconds",xx:"addZeptoseconds",o:"addYoctoseconds",oo:"addYoctoseconds"},e._codeToIndex={y:0,yy:0,yyyy:0,yyyyy:0,M:1,MM:1,MMM:1,MMMM:1,d:2,dd:2,ddd:2,dddd:2,H:3,HH:3,h:3,hh:3,m:4,mm:4,s:5,ss:5,f:6,ff:6,fff:6,u:7,uu:7,n:8,nn:8,p:9,pp:9,e:10,ee:10,a:11,aa:11,x:12,xx:12,o:13,oo:13},e._getLocalizedNames(),e.checkLicense()}render(){const e=this;e.rightToLeft&&(e.calendarButtonPosition="right"===e.calendarButtonPosition?"left":"right"),e._positionDetection=new Smart.Utilities.PositionDetection(e,e.$.dropDownContainer,e.$.content,"close"),e._positionDetection.customPositionDropDown=e._positionExternalDropDown,e._positionDetection.getDropDownParent(!0),e._positionDetection.setDropDownPosition(),e.$.dropDownContainer.style.left=null,e._positionDetection.handleAutoPositioning(),e._setIds(),e._validateInitialPropertyValues(),e._setFocusable(),e.setAttribute("role","presentation"),e.$.input.setAttribute("aria-describedby",e.$.hint.id),e.$.input.setAttribute("aria-labelledby",e.$.label.id),e.$.calendarButton.setAttribute("aria-owns",e.$.dropDownContainer.id),e.$.dropDownContainer.setAttribute("animation",e.animation),e.$.dropDownContainer.setAttribute("drop-down-display-mode",e.dropDownDisplayMode),super.render(),e.isInitialized=!0}close(){this.opened&&this._close()}focus(){this.$.input.focus()}select(){this.$.input.select()}open(){this.opened||this._open()}_handleFooter(){const e=this;if(e.footer){e.$.dropDownContainer.setAttribute("footer","");const t=e.$.calendarDropDown;"default"===e._dropDownDisplayMode?t.viewSections=["title","header","footer"]:"classic"===e._dropDownDisplayMode?t.viewSections=["header","footer"]:"calendar"===e._dropDownDisplayMode&&(t.viewSections=["title","header","footer"])}else e.$.dropDownContainer.removeAttribute("footer")}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;switch(e){case"animation":case"theme":i.$.timePickerDropDown&&(i.$.timePickerDropDown[e]=n),"animation"===e&&(i.$.dropDownContainer.setAttribute("animation",i.animation),i._defaultFooterTemplateApplied&&Array.from(i.$.calendarDropDown.$.footer.getElementsByTagName("smart-repeat-button")).forEach(function(a){a.animation=n}));break;case"calendarButton":i.$.dropDownContainer.style.transition="none",n||i.close();break;case"calendarButtonPosition":i.$.dropDownContainer.style.transition="none",i.close(),"left"===n?i.$.content.insertBefore(i.$.calendarButton,i.$.content.firstElementChild):null===i._dropDownParent?i.$.content.insertBefore(i.$.calendarButton,i.$.dropDownContainer):i.$.content.appendChild(i.$.calendarButton);break;case"disabled":n?(i.close(),i.$.upButton.disabled=!0,i.$.downButton.disabled=!0):i._disableSpinButtons(),i._setFocusable(),i._positionDetection.handleAutoPositioning();break;case"displayKind":{const a=i._outputTimeZone;switch(n){case"unspecified":i._outputTimeZone=i._inputTimeZone;break;case"UTC":i._outputTimeZone="UTC";break;case"local":i._outputTimeZone="Local"}if(i._outputTimeZone===a)return;null!==i._value&&(i.close(),i._toSync=!0,i._value=i._value.toTimeZone(i._outputTimeZone),i._applyFormatString()),i.min=i.min.toTimeZone(i._outputTimeZone),i.max=i.max.toTimeZone(i._outputTimeZone);for(let r=0;r<i.restrictedDates.length;r++){let o=i.restrictedDates[r];o=o.toTimeZone(i._outputTimeZone)}break}case"dropDownAppendTo":i._positionDetection.dropDownAppendToChangedHandler();break;case"dropDownDisplayMode":i._changeDropDownDisplayMode();break;case"dropDownOverlay":n||i._positionDetection.removeOverlay();break;case"dropDownPosition":i._positionDetection.dropDownPositionChangedHandler();break;case"footer":i._handleFooter();break;case"footerTemplate":if(null!==n){i._defaultFooterTemplateApplied=!1;const a=i.$.calendarDropDown.$footer;a.unlisten("change"),a.unlisten("click"),a.unlisten("wheel"),i.$.calendarDropDown.footerTemplate=n}else{i._setDefaultFooterTemplate();const a=i._value;i._hourElement.value=a.toString("hh"),i._minuteElement.value=a.toString("mm"),i._ampmElement.value=a.toString("tt")}i._handleFooter();break;case"formatString":""===n&&(i.formatString="dd-MMM-yy HH:mm:ss.fff"),i._getFormatStringRegExp(),i._applyFormatString(),"auto"===i.dropDownDisplayMode&&i._changeDropDownDisplayMode(),i._timePickerInitialized&&(i.$.timePickerDropDown.format=i._formatStringRegExp.groups.find(a=>-1!==a.indexOf("H"))?"24-hour":"12-hour");break;case"interval":i._validateInterval(t);break;case"locale":case"messages":if(i.$.selectDate.innerHTML=i.localize("dateTabLabel"),i.$.selectTime.innerHTML=i.localize("timeTabLabel"),i._defaultFooterTemplateApplied&&(i._todayElement.title=i.localize("now")),"messages"===e)return;i._getLocalizedNames(),i.min.calendar.days=i._localizedDays,i.min.calendar.months=i._localizedMonths,i.min.calendar.locale=i.locale,i.max.calendar.days=i._localizedDays,i.max.calendar.months=i._localizedMonths,i.max.calendar.locale=i.locale,null!==i.value&&(i._value.calendar.days=i._localizedDays,i._value.calendar.months=i._localizedMonths,i._value.calendar.locale=i.locale,i.value.calendar.days=i._localizedDays,i.value.calendar.months=i._localizedMonths,i.value.calendar.locale=i.locale),Smart.Utilities.DateTime.cache=[],i._applyFormatString();break;case"max":case"min":i._validateMinMax(e,t),"strict"===i.validation?i._validateValue():i._minMaxChanged=!0;break;case"nullable":!0===t&&null===i._value&&i._validateValue(i._now(),null);break;case"opened":n?i._open():i._close();break;case"readonly":case"unfocusable":n&&i.close(),"unfocusable"===e&&i._setFocusable();break;case"restrictedDates":i._validateRestrictedDates(),i._validateValue();break;case"spinButtonsPosition":i.$.content.insertBefore(i.$.spinButtonsContainer,"right"===n?i.$.input.nextElementSibling:i.$.input);break;case"validation":"strict"===n&&(delete i._minMaxChanged,i._validateValue());break;case"value":{let a;null!==n?(a=Smart.Utilities.DateTime.validateDate(n,i._now(),i.formatString),a=a.toTimeZone(i._outputTimeZone)):a=null,i._validateValue(a,i._value,void 0,!0);break}}}setDate(e){const t=this;let n;null!==e?(n=Smart.Utilities.DateTime.validateDate(e,t._now(),t.formatString),n=n.toTimeZone(t._outputTimeZone)):n=null,t._validateValue(n,t._value,void 0,!0)}getDate(){return this.value&&this.value.toDate?this.value.toDate():null}_addCalendarFooterListeners(){const e=this,t=e.$.calendarDropDown.$footer;t.listen("change",e._footerChangeHandler.bind(e)),t.listen("click",e._footerClickHandler.bind(e)),t.listen("wheel",e._footerWheelHandler.bind(e))}_updateTargetValue(){const e=this;if(e.dataset.target){const t=document.querySelector(e.dataset.target);if(t){const n=e.dataset.property,i=e.value;n&&void 0!==t[n]&&(t[n]=i)}}}_addTimePickerListener(){const e=this;e.$.timePickerDropDown.$.listen("change",function(t){const n=e.context,i=t.detail.value,a=Smart.Utilities.DateTime.getConstructorParameters(null!==e._value?e._value:e._now());e.context=e,a[3]=i.getHours(),a[4]=i.getMinutes(),e._timePickerInitiatedChange=!0,a.unshift(null),e._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,a))),e._timePickerInitiatedChange=!1,e.context=n})}_applyFormatString(){const e=this;null!==e.value&&(e.$.input.value=e._value.toString(e.formatString))}_calendarButtonClickHandler(e){const t=this;t._highlightedTimePart=void 0,t.disabled||t.readonly||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t.$.calendarButton,e.pageX,e.pageY),t.opened?t._close():t._open())}_calendarDropDownChangeHandler(e){const t=this;if(e.stopPropagation(),t._disregardCalendarChangeEvent)t._disregardCalendarChangeEvent=!1;else if(this.$.calendarDropDown.selectedDates.length>0){const n=e.detail.value[0],i=null!==t._value?t._value:t._now(),a=Smart.Utilities.DateTime.getConstructorParameters(i);if(a[0]=n.getFullYear(),a[1]=n.getMonth()+1,a[2]=n.getDate(),t._calendarInitiatedChange=!0,a.unshift(null),t._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,a))),t._defaultFooterTemplateApplied){const r=t._value;""===t._hourElement.value&&(t._hourElement.value=r.toString("hh")),""===t._ampmElement.value&&(t._ampmElement.value=r.toString("tt")),""===t._minuteElement.value&&(t._minuteElement.value=r.toString("mm"))}t._calendarInitiatedChange=!1}else t._setNullValue()}_calendarDropDownClickHandler(e){const t=this;t.autoClose&&e.target.closest(".smart-calendar-cell")&&(clearTimeout(t._autoCloseTimeout),t._autoCloseTimeout=setTimeout(function(){t.close()},t.autoCloseDelay))}_changeDropDownDisplayMode(){function e(i,a,r,o){t.$dropDownHeader[i]("smart-hidden"),t.$calendarDropDown[a]("smart-hidden"),t._timePickerInitialized&&t.$.timePickerDropDown.$[r]("smart-hidden"),o&&(t.opened?t.$.calendarDropDown._refreshTitle():t._toSync=!0)}const t=this,n=t._dropDownDisplayMode;t._detectDisplayMode(),t._dropDownDisplayMode!==n&&("default"===t._dropDownDisplayMode?(t.calendarMode="default",t.$.calendarDropDown.viewSections=["title","header"],t.$selectDate.addClass("smart-selected"),t.$selectTime.removeClass("smart-selected"),e("removeClass","removeClass","addClass",!0)):"classic"===t._dropDownDisplayMode?(t.calendarMode="classic",t.$.calendarDropDown.viewSections=["header","footer"],e("addClass","removeClass","addClass")):"calendar"===t._dropDownDisplayMode?(t.calendarMode="default",t.$.calendarDropDown.viewSections=["title","header"],e("addClass","removeClass","addClass",!0)):(t.calendarMode="default",e("addClass","addClass","removeClass"),t._timePickerInitialized||t._initializeTimePicker()),t.$.dropDownContainer.setAttribute("drop-down-display-mode",t.dropDownDisplayMode))}_cloneValue(){return null!==this._value?this._value.clone():null}_close(){const e=this;if(e.$.fireEvent("closing").defaultPrevented)e.opened=!0;else{e.$.calendarDropDown.disabled=!0,e.$calendarButton.removeClass("smart-calendar-button-pressed"),e.$.calendarButton.removeAttribute("active"),e.$dropDownContainer.addClass("smart-visibility-hidden");const t=e.$.calendarDropDown.$.container.querySelector(".smart-calendar-cell[hover]");t&&t.removeAttribute("hover"),e.opened=!1,e._positionDetection.removeOverlay(!0),e.$.fireEvent("close"),e._edgeMacFF&&!e.hasAnimation&&(e.$.dropDownContainer.style.top=null,e.$.dropDownContainer.style.left=null,e.$dropDownContainer.addClass("not-in-view")),e.$.input.focus()}e.$.calendarButton.setAttribute("aria-expanded",e.opened)}_detectDisplayMode(){const e=this;e._dropDownDisplayMode="auto"!==e.dropDownDisplayMode?e.dropDownDisplayMode:Smart.Utilities.DateTime.detectDisplayMode(e.value||e.min,e.formatString,e._formatStringRegExp),"timePicker"===e._dropDownDisplayMode?(e.$calendarButton.addClass("time"),"Enter date"===e.placeholder&&(e.placeholder="Enter time")):(e.$calendarButton.removeClass("time"),"Enter time"===e.placeholder&&(e.placeholder="Enter date")),"default"===e._dropDownDisplayMode?e.$dropDownContent.removeClass("partial"):e.$dropDownContent.addClass("partial")}_disableSpinButtons(){const e=this;if(e.disabled)return;const t=null===e._value;e.$.upButton.disabled=t,e.$.downButton.disabled=t}_documentUpHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement,i=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;Smart.Utilities.Core.isMobile||n!==t.$.input||"partial"!==t.editMode||null===t._value||i===t.$.input&&t.$.input.selectionStart!==t.$.input.selectionEnd?i===t.$.calendarButton||t.$.dropDownContainer.contains(i)||t.$.dropDownContainer.contains(t._getRootShadowHost(i))||(t.close(),n===t.$.input||t.contains(i)||(t._highlightedTimePart=void 0)):(t._highlightedTimePartEdit=!1,t._validateValue(t.$.input.value,t._cloneValue(),!1),t._highlightTimePartBasedOnCursor()),t._mouseFocus=!1}_getRootShadowHost(e){const t=this;if(!t.shadowRoot&&!t.isInShadowDOM)return;let n,i=e.getRootNode().host;for(;i&&i!==t&&i!==document;)n=i,i=i.getRootNode().host;return n}_dropDownHeaderClickHandler(e){const t=this;if(e.target===t.$.selectDate){if(t.$selectDate.hasClass("smart-selected"))return;t.$selectDate.addClass("smart-selected"),t.$selectTime.removeClass("smart-selected"),t.$.timePickerDropDown.$.addClass("smart-hidden"),t.$calendarDropDown.removeClass("smart-hidden")}else{if(t.$selectTime.hasClass("smart-selected"))return;t.$selectDate.removeClass("smart-selected"),t.$selectTime.addClass("smart-selected"),t.$calendarDropDown.addClass("smart-hidden"),t._timePickerInitialized?t.$.timePickerDropDown.$.removeClass("smart-hidden"):t._initializeTimePicker()}}_dropDownKeydownHandler(e){const t=this,n=e.key,i=t.shadowRoot?t.shadowRoot.activeElement:document.activeElement;!t.$.dropDownHeader.contains(i)||"Enter"!==n&&" "!==n?"Escape"===n||e.altKey&&"ArrowUp"===n?(e.preventDefault(),t.close(),t.$.input.focus()):"Enter"!==n&&" "!==n||!i.classList.contains("smart-footer-component-today")?"Enter"===n&&(i===t.$.calendarDropDown.$.body&&t.$.calendarDropDown.querySelectorAll(".smart-calendar-cell[selected][focus]").length>0||t._timePickerInitialized&&i===t.$.timePickerDropDown.$.picker)&&(e.preventDefault(),t.close()):(e.preventDefault(),t._validateValue(t._now()),t.close()):(e.preventDefault(),t._dropDownHeaderClickHandler({target:i}))}_dropDownTransitionendHandler(){const e=this;if(e.hasAnimation)return e.opened&&e._toFocus?(e._toFocus.focus(),delete e._toFocus,void(e._timePickerInitialized&&!e.$.timePickerDropDown.classList.contains("smart-hidden")&&requestAnimationFrame(()=>e.$.timePickerDropDown._highlightLabel()))):e._edgeMacFF&&!e.opened?(e.$.dropDownContainer.style.top=null,e.$.dropDownContainer.style.left=null,void e.$dropDownContainer.addClass("not-in-view")):void 0}_footerChangeHandler(e){const t=this,n=t.context,i=e.target,a=null!==t._value?t._value:t._now();let r,o=i.value;if(t.context=t,e.stopPropagation(),i.classList.contains("smart-hour-element")){if(o=parseInt(o,10),isNaN(o)||o<0||o>12)return void(i.value=a.toString("hh"));o>0&&o<12&&"PM"===a.toString("tt")&&(o+=12),r="hh"}else{if(!i.classList.contains("smart-minute-element")){if(null===t._value)return void(i.value="");const l=a.toString("tt");return o=o.toLowerCase(),void("PM"===l&&("a"===o||"am"===o)||"AM"===l&&("p"===o||"pm"===o)?(t._incrementDecrement(void 0,"tt"),i.value=t._value.toString("tt")):i.value=l)}if(o=parseInt(o,10),isNaN(o)||o<0||o>59)return void(i.value=a.toString("mm"));r="mm"}const s=Smart.Utilities.DateTime.getConstructorParameters(a);s[t._codeToIndex[r]]=o,s.unshift(null),t._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,s))),i.value=t._value.toString(r),t.context=n}_footerClickHandler(e){const t=this,n=t.context,i=e.target;if(t.context=t,i.classList.contains("smart-today-element"))t._validateValue(t._now()),t.autoClose&&(clearTimeout(t._autoCloseTimeout),t._autoCloseTimeout=setTimeout(function(){t.close()},t.autoCloseDelay));else{const a=i.closest("smart-repeat-button");if(null!==a){const r=a===a.parentElement.children[1],o=a.closest(".smart-footer-component").classList.contains("smart-footer-component-hour")?"hh":"mm";t._incrementDecrement(r,o)}}t.context=n}_footerWheelHandler(e){const t=this,n=t.shadowRoot?t.shadowRoot.activeElement:document.activeElement;if(t.enableMouseWheelAction&&e.target instanceof HTMLInputElement&&n===e.target){const i=t.context,a=e.target;t.context=t,a.classList.contains("smart-hour-element")?t._incrementDecrement(e.deltaY>0,"hh"):a.classList.contains("smart-minute-element")?t._incrementDecrement(e.deltaY>0,"mm"):t._incrementDecrement(void 0,"tt"),t.context=i,e.stopPropagation()}}_getAndHighlightTimePart(e,t,n){const i=this;i._programmaticSelection=!0,i.$.input.selectionStart!==e||i.$.input.selectionEnd!==t?i.$.input.setSelectionRange(e,t):setTimeout(function(){i.$.input.setSelectionRange(e,t)},200),i._highlightedTimePart={code:i._formatStringRegExp.groups[n],index:n,from:e,to:t}}_getFormatStringRegExp(){const e=this;e._formatStringRegExp=e.min.getParseRegExp(e.min.calendar,e.formatString.replace(/y+/g,"yyyyy")),e._formatStringRegExp.regExp=new RegExp(e._formatStringRegExp.regExp)}_getLocalizedNames(){const e=this,t=Smart.Utilities.DateTime.getLocalizedNames(e.locale);e._localizedDays=t.days,e._localizedMonths=t.months,e.$.selectDate.innerHTML=e.localize("dateTabLabel"),e.$.selectTime.innerHTML=e.localize("timeTabLabel")}_handleManualTimePartEdit(e){const t=this,n=Smart.Utilities.DateTime.getConstructorParameters(t._value);if(e=e[t._highlightedTimePart.index+1],isNaN(e)){if(1===t._codeToIndex[t._highlightedTimePart.code]){let i=-1;if(e.length>1&&t._localizedMonths.names.some(function(a,r){if(-1!==a.toLowerCase().indexOf(e.toLowerCase()))return i=r,!0}),-1===i)return void t._applyFormatString();n[1]=i+1}}else{if("f"===t._highlightedTimePart.code)e=100*parseInt(e,10);else if("ff"===t._highlightedTimePart.code)e=10*parseInt(e,10);else if(-1!==t._highlightedTimePart.code.indexOf("y")&&e.length<3){const i=t.yearCutoff.toString(),a=parseInt(i.slice(2),10);let r=parseInt(i.slice(0,2),10);(e=parseInt(e,10))<a&&r++,e=e.toString(),e=r+""+"0".repeat(2-e.length)+e}else if(-1!==t._highlightedTimePart.code.indexOf("h")){const i=t._value.hour();e=parseInt(e,10),i>11&&e<=11&&(e+=12)}n[t._codeToIndex[t._highlightedTimePart.code]]=parseInt(e,10)}try{n.unshift(null),t._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,n)))}catch{t._applyFormatString()}}_highlightTimePartBasedOnCursor(e){const t=this,n=t.$.input.value,i=t._formatStringRegExp.regExp.exec(n);function a(){return void 0===e?t.$.input.selectionStart:e}if(null===i)return void(t._highlightedTimePart=void 0);t._iOS||void 0!==e||(e=t.$.input.selectionStart);let r,o=i.index;for(let s=1;s<i.length;s++){const l=i[s];if(r=n.indexOf(l,o),o=r+l.length,1===s&&a()<r){t._getAndHighlightTimePart(r,o,0);break}if(a()>=r&&a()<=o){t._getAndHighlightTimePart(r,o,s-1);break}const d=i[s+1];if(!d){t._programmaticSelection=!0,t.$.input.setSelectionRange(r,o),t._highlightedTimePart={code:t._formatStringRegExp.groups[s-1],index:s-1,from:r,to:o};break}{const c=n.indexOf(d,o);if(a()>o&&a()<c){a()-o<=c-a()?t._getAndHighlightTimePart(r,o,s-1):(t._programmaticSelection=!0,t.$.input.setSelectionRange(c,c+d.length));break}}}}_highlightTimePartBasedOnIndex(e){const t=this,n=t.$.input.value,i=t._formatStringRegExp.regExp.exec(n);if(null===i)return t._validateValue(void 0,t._cloneValue(),!1),void t._highlightTimePartBasedOnIndex(e);let a,r=i.index;const o=t.shadowRoot?t.shadowRoot.activeElement:document.activeElement;if(!(e<0||e>=i.length)){t.$.input!==o&&t.$.input.focus();for(let s=1;s<i.length;s++){const l=i[s];if(a=n.indexOf(l,r),r=a+l.length,e===s-1){t._getAndHighlightTimePart(a,r,e);break}}}}_incrementDecrement(e,t){const n=this,i=n._cloneValue();if(n._minMaxChanged&&(n._value=n._rangeValidation(n._value),delete n._minMaxChanged),void 0===t&&n._highlightedTimePart&&(t=n._highlightedTimePart.code),void 0!==t){if("z"===t||"zz"===t||"zzz"===t)return void n._highlightTimePartBasedOnIndex(n._highlightedTimePart.index);n._value="t"===t||"tt"===t?n._value.addHours(n._value.hour()<12?12:-12,!0):n._value[n._codeToMethod[t]](e?-1:1,!0),n._validateValue(void 0,i,!1),n._highlightedTimePart&&n._highlightTimePartBasedOnIndex(n._highlightedTimePart.index)}else n._value=n._value.add(e?n.interval.negate():n.interval,void 0,!0),n._validateValue(void 0,i,!1);0!==i.compare(n._value)&&n.isInitialized&&(n.$.fireEvent("change",{oldValue:i.toTimeZone(n._inputTimeZone),value:n.value}),n._updateTargetValue())}_initializeTimePicker(){const e=this,t=document.createElement("smart-time-picker");t.rightToLeft=e.rightToLeft,t.animation=e.animation,t.format=e._formatStringRegExp.groups.find(n=>-1!==n.indexOf("H"))?"24-hour":"12-hour",t.theme=e.theme,t.value=null!==e._value?e._value.toDate():e._now(),e.$.timePickerDropDown=t,t.$=Smart.Utilities.Extend(t),e.$.dropDownContent.appendChild(t),e._timePickerInitialized=!0,e._addTimePickerListener()}_inputBlurHandler(){const e=this;e.removeAttribute("focus"),e._fullEdit=!1,e._highlightedTimePartEdit=!1,e.$.fireEvent("blur")}_inputChangeHandler(e){const t=this;if(e&&e.stopPropagation(),""!==t.$.input.value){if(t._fullEdit||null===t._value)t._fullEdit=!1,t._validateValue(t.$.input.value),t._highlightTimePartBasedOnCursor();else if(t._highlightedTimePartEdit){t._highlightedTimePartEdit=!1;let n=t._formatStringRegExp.regExp.exec(t.$.input.value);null!==n?t._handleManualTimePartEdit(n):t._applyFormatString()}}else t._setNullValue()}_inputDragstartHandler(e){e.preventDefault()}_inputFocusHandler(){const e=this;if(e.setAttribute("focus",""),"full"!==e.editMode){const t=Smart.Utilities.Core.isMobile?10:0;setTimeout(function(){e._iOS?e._highlightTimePartBasedOnCursor():!0!==e._mouseFocus&&(void 0===e._highlightedTimePart?e._highlightTimePartBasedOnCursor(e._iOS?void 0:0):e._highlightTimePartBasedOnIndex(e._highlightedTimePart.index))},t)}e.$.fireEvent("focus")}_inputKeydownHandler(e){const t=this,n=t.editMode,i=e.key;if("Tab"!==i){if(e.altKey&&"ArrowDown"===i)return e.preventDefault(),void t.open();if("Escape"===i||e.altKey&&"ArrowUp"===i)return e.preventDefault(),void t.close();if("full"!==n){if("partial"===n){if("Delete"===i)return void(null!==t._value&&(t._setNullValue(),e.preventDefault()));if(null===t._value&&(t._validateValue(t._now(),null,!1),t._highlightTimePartBasedOnIndex(0)),-1!==["/",".","-",","," "].indexOf(i))return t._inputChangeHandler(),t._navigateToNextTimePart(),void e.preventDefault();if("Backspace"===i)return t._resetTimePart(),t._highlightedTimePart.index>0?t._navigateToPreviousTimePart():t._highlightTimePartBasedOnIndex(0),void e.preventDefault()}else if(t._fullEdit||t._highlightedTimePartEdit||t.readonly||-1!==["Alt","Control","Shift"].indexOf(i)||e.altKey||e.ctrlKey)return;if(-1!==["End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].indexOf(i)){if(e.preventDefault(),"partial"===n&&t._highlightedTimePartEdit&&t._inputChangeHandler(),null!==t._value)switch(i){case"End":t._highlightTimePartBasedOnIndex(t._formatStringRegExp.groups.length-1);break;case"Home":t._highlightTimePartBasedOnIndex(0);break;case"ArrowLeft":t._navigateToPreviousTimePart();break;case"ArrowUp":t._incrementDecrement();break;case"ArrowRight":t._navigateToNextTimePart();break;case"ArrowDown":t._incrementDecrement(!0)}}else if(t._highlightedTimePart){if("partial"!==n&&t._highlightedTimePart.to-t._highlightedTimePart.from!=t.$.input.selectionEnd-t.$.input.selectionStart)return void(t._fullEdit=!0);const a=t._highlightedTimePart.code;if("ddd"===a||"dddd"===a||"z"===a||"zz"===a||"zzz"===a||"t"===a||"tt"===a)return void e.preventDefault();if("partial"===n&&"MMM"!==a&&"MMMM"!==a&&!1===new RegExp(/^\d+$/).test(i))return void((i.length<2||"F"!==i.charAt(0))&&e.preventDefault());t._highlightedTimePartEdit=!0}}else t._fullEdit=!0}}_inputDownHandler(){const e=this;e._fullEdit||e._highlightedTimePartEdit||"full"===e.editMode||Smart.Utilities.Core.isMobile||setTimeout(function(){e._mouseFocus=!0,e._highlightTimePartBasedOnCursor()},0)}_inputPasteHandler(e){"partial"===this.editMode?e.preventDefault():this._fullEdit=!0}_inputSelectHandler(){const e=this,t=e.shadowRoot?e.shadowRoot.activeElement:document.activeElement;"partial"===e.editMode&&t===e.$.input&&(!0===e._programmaticSelection?e._programmaticSelection=!1:e._highlightTimePartBasedOnIndex(e._highlightedTimePart?e._highlightedTimePart.index:0))}_inputUpHandler(){const e=this;Smart.Utilities.Core.isMobile&&(e._iOS?(e._mouseFocus=!0,setTimeout(function(){document.activeElement===e.$.input&&e._highlightTimePartBasedOnCursor()},50)):setTimeout(function(){e._mouseFocus=!0,e._highlightTimePartBasedOnCursor()},10))}_inputWheelHandler(e){const t=this;(t.shadowRoot?t.shadowRoot.activeElement:document.activeElement)!==t.$.input||!t.enableMouseWheelAction||t.disabled||t.readonly||(e.preventDefault(),t._incrementDecrement(e.deltaY>0))}_isRestricted(e){const t=this.restrictedDates;let n=!1;for(let i=0;i<t.length;i++)if(e.equalDateParts(t[i])){n=!0;break}return n}_mouseoutHandler(e){const t=this,n=e.target;t.disabled||n!==t.$.input&&n!==t.$.calendarButton||(n.removeAttribute("hover"),t.removeAttribute("hover"))}_mouseoverHandler(e){const t=this,n=e.target;t.disabled||n!==t.$.input&&n!==t.$.calendarButton||(n.setAttribute("hover",""),t.setAttribute("hover",""))}_navigateToNextTimePart(){this._highlightTimePartBasedOnIndex(this._highlightedTimePart.index+1)}_navigateToPreviousTimePart(){this._highlightTimePartBasedOnIndex(this._highlightedTimePart.index-1)}_now(){const t=new Smart.Utilities.DateTime("today","Local");return"Local"!==this._outputTimeZone?t.toTimeZone(this._outputTimeZone):t}_open(e){const t=this;if(t.disabled||t.readonly||t.$.fireEvent("opening").defaultPrevented)return t.opened=!1,void t.$.calendarButton.setAttribute("aria-expanded",!1);t._edgeMacFF&&t.$dropDownContainer.removeClass("not-in-view");const n=t.$.dropDownContainer;n.style.marginLeft=null,e||(n.style.transition=""),t.$.calendarDropDown.disabled=!1,t.$calendarButton.addClass("smart-calendar-button-pressed"),t.$.calendarButton.setAttribute("active",""),("default"!==t._dropDownDisplayMode&&"timePicker"!==t._dropDownDisplayMode||!t._timePickerInitialized||t._timePickerInitialized&&t.$.timePickerDropDown.$.hasClass("smart-hidden"))&&t.$calendarDropDown.removeClass("smart-hidden"),t.opened=!0,t.$.calendarButton.setAttribute("aria-expanded",!0),t._positionDetection.placeOverlay(),t._positionDetection.checkBrowserBounds("vertically"),t._positionDetection.positionDropDown(),t.$dropDownContainer.removeClass("smart-visibility-hidden");const i=1===window.devicePixelRatio?document.documentElement.clientWidth:window.innerWidth,a=n.getBoundingClientRect();if(a.left<0?n.style.marginLeft=-1*a.left+"px":a.right>i&&(n.style.marginLeft=i-a.right+"px"),t.$.fireEvent("open"),t._toSync){const o=t._value;if(null!==o)t._disregardCalendarChangeEvent=!0,t.$.calendarDropDown.selectedDates=[o.toDate()],t._defaultFooterTemplateApplied&&(t._hourElement.value=o.toString("hh"),t._minuteElement.value=o.toString("mm"),t._ampmElement.value=o.toString("tt")),t._timePickerInitialized&&(t.$.timePickerDropDown.value=o.toDate()),t._disregardCalendarChangeEvent=!1;else{const s=t.$.calendarDropDown.context;t.$.calendarDropDown.context=t.$.calendarDropDown,t.$.calendarDropDown._clearSelection(!0),t.$.calendarDropDown.context=s,t._defaultFooterTemplateApplied&&(t._hourElement.value="",t._minuteElement.value="",t._ampmElement.value="")}t._toSync=!1}let r;switch(t._dropDownDisplayMode){case"default":r=t.$selectDate.hasClass("smart-selected")?t.$.calendarDropDown:t.$.timePickerDropDown.$.picker;break;case"classic":case"calendar":r=t.$.calendarDropDown;break;case"timePicker":r=t.$.timePickerDropDown.$.picker}t.hasAnimation?(t._toFocus=r,function o(){t._toFocus&&(0===t.$.dropDownContainer.getBoundingClientRect().height?requestAnimationFrame(o):t._dropDownTransitionendHandler())}()):r.focus()}_positionExternalDropDown(e){const t=this.context,n=!t.calendarButton||"right"===t.calendarButtonPosition,i=t._dropDownListPosition,a=t.$.dropDownContainer;let r,o=n?e.right-a.offsetWidth:e.left;switch(i){case"bottom":r=e.bottom;break;case"overlay-top":r=e.bottom-a.offsetHeight;break;case"overlay-center":r=e.top+e.height/2-a.offsetHeight/2;break;case"overlay-bottom":r=e.top;break;case"top":r=e.top-a.offsetHeight;break;case"center-bottom":case"center-top":r="center-bottom"===i?e.bottom+5:e.top-5-a.offsetHeight,o=n?e.right-a.offsetWidth/2-t.$.calendarButton.offsetWidth/2:e.left-a.offsetWidth/2+t.$.calendarButton.offsetWidth/2}return{left:o,top:r}}_rangeValidation(e){const t=this;return-1===e.compare(t.min)?t.min.clone():1===e.compare(t.max)?t.max.clone():e}_resetTimePart(){const e=this,n=e._codeToIndex[e._highlightedTimePart.code],i=Smart.Utilities.DateTime.getConstructorParameters(e._value);let a;a=n>2?0:n>0?1:e.min.year(),i[n]=a,i.unshift(null),e._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,i)))}_setIds(){const e=this;e.$.label.id||(e.$.label.id=e.id+"Label"),e.$.input.id||(e.$.input.id=e.id+"Input"),e.$.calendarButton.id||(e.$.calendarButton.id=e.id+"CalendarButton"),e.$.dropDownContainer.id||(e.$.dropDownContainer.id=e.id+"DropDownContainer"),e.$.hint.id||(e.$.hint.id=e.id+"Hint")}_setDefaultFooterTemplate(e){const t=this;t.$.calendarDropDown.footerTemplate=t._defaultFooterTemplate,e&&t.$.calendarDropDown._handleLayoutTemplate(t.$.calendarDropDown.$.footer,t._defaultFooterTemplate),t._hourElement=t.$.calendarDropDown.getElementsByClassName("smart-hour-element")[0],t._minuteElement=t.$.calendarDropDown.getElementsByClassName("smart-minute-element")[0],t._ampmElement=t.$.calendarDropDown.getElementsByClassName("smart-am-pm-element")[0],t._todayElement=t.$.calendarDropDown.getElementsByClassName("smart-today-element")[0],t._todayElement.title=t.localize("now"),Array.from(t.$.calendarDropDown.$.footer.getElementsByTagName("smart-repeat-button")).forEach(function(n){n.animation=t.animation}),t._addCalendarFooterListeners(),t._defaultFooterTemplateApplied=!0}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return e.$.input.tabIndex=-1,e.$.selectDate.removeAttribute("tabindex"),e.$.selectTime.removeAttribute("tabindex"),void(e._defaultFooterTemplateApplied&&(e._hourElement.tabIndex=-1,e._ampmElement.tabIndex=-1,e._minuteElement.tabIndex=-1));const t=e.tabIndex>0?e.tabIndex:0;e.$.input.removeAttribute("tabindex"),e.$.selectDate.tabIndex=t,e.$.selectTime.tabIndex=t,e._defaultFooterTemplateApplied&&(e._hourElement.removeAttribute("tabindex"),e._ampmElement.removeAttribute("tabindex"),e._minuteElement.removeAttribute("tabindex"),e.$.calendarDropDown.getElementsByClassName("smart-footer-component-today")[0].tabIndex=t)}_setNullValue(e){const t=this;if(void 0===e&&(e=t._cloneValue()),t.nullable){if(t._value=null,t.value=null,t._highlightedTimePart=void 0,t.$.input.value="",null!==e){if(t.opened){if(!t._calendarInitiatedChange){const n=t.$.calendarDropDown.context;t.$.calendarDropDown.context=t.$.calendarDropDown,t.$.calendarDropDown._clearSelection(!0),t.$.calendarDropDown.context=n}t._defaultFooterTemplateApplied&&(t._hourElement.value="",t._ampmElement.value="",t._minuteElement.value=""),t._toSync=!1}else t._toSync=!0;t.isInitialized&&(t.$.fireEvent("change",{oldValue:e.toTimeZone(t._inputTimeZone),value:null}),t._updateTargetValue())}t._disableSpinButtons()}else t._validateValue(t._now(),e)}_spinButtonsClickHandler(e){const t=this;null===t._value||t.disabled||t.readonly||t._incrementDecrement(t.$.downButton.contains(e.target))}_validateInitialPropertyValues(){const e=this,t=e.$.calendarDropDown;"left"===e.calendarButtonPosition&&e.$.content.insertBefore(e.$.calendarButton,e.$.input),"left"===e.spinButtonsPosition&&e.$.content.insertBefore(e.$.spinButtonsContainer,e.$.input),e.disabled&&(e.$.upButton.disabled=!0,e.$.downButton.disabled=!0),e.opened&&(e.disabled||e.readonly?e.opened=!1:(e.$.dropDownContainer.style.transition="none",e._open(!0))),e.$.calendarButton.setAttribute("aria-expanded",e.opened),null===e.footerTemplate?e._setDefaultFooterTemplate(!0):(t.footerTemplate=e.footerTemplate,t._handleLayoutTemplate(t.$.footer,e.footerTemplate)),""===e.formatString&&(e.formatString="dd-MMM-yy HH:mm:ss.fff");const n=e.displayKind;let i;if("UTC"===n?e._outputTimeZone="UTC":"local"===n&&(e._outputTimeZone="Local"),null!==e.value?(i=Smart.Utilities.DateTime.validateDate(e.value,new Smart.Utilities.DateTime,e.formatString),e._inputTimeZone=i.timeZone,"unspecified"!==n&&e._inputTimeZone!==e._outputTimeZone?i=i.toTimeZone(e._outputTimeZone):"unspecified"===n&&(e._outputTimeZone=e._inputTimeZone)):(i=null,e._inputTimeZone="Local"),e._validateRestrictedDates(),e._validateMinMax("both"),e._validateValue(i,e._now(),!1,!0),e._validateInterval(new Smart.Utilities.TimeSpan(0,0,1)),e._getFormatStringRegExp(),e._defaultFooterTemplateApplied&&""===e._hourElement.value&&null!==e.value){const r=e.value;e._hourElement.value=r.toString("hh"),e._ampmElement.value=r.toString("tt"),e._minuteElement.value=r.toString("mm")}e._detectDisplayMode();const a=e._dropDownDisplayMode;"default"===a||"calendar"===a?(t.viewSections=["title","header"],t.$title.hasClass("smart-hidden")&&t.propertyChangedHandler("viewSections",["header","footer"],["title","header"]),"default"===a&&e.$dropDownHeader.removeClass("smart-hidden")):"timePicker"===a&&(e.$calendarDropDown.addClass("smart-hidden"),e._initializeTimePicker()),e.footer&&e._handleFooter()}_validateInterval(e){const t=this,n=t.interval;let i=n;if(n instanceof Smart.Utilities.TimeSpan)i=n;else if("string"==typeof n){const a=n.indexOf("TimeSpan("),r=n.indexOf(")");if(-1!==a&&-1!==r&&(i=n.slice(a+9,r),i=i.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),new RegExp(/(^(\d+)(,\s*\d+)*$)/g).test(i)&&(i=i.replace(/\s/g,""),i=i.split(","),i.map(function(o,s){i[s]=parseInt(o)}),i.unshift(null),i=new(Function.prototype.bind.apply(Smart.Utilities.TimeSpan,i)))),i instanceof Smart.Utilities.TimeSpan==0){if(""===i.trim())return void(t.interval=e);isNaN(i)||(i=1e4*parseInt(i,10));try{i=new Smart.Utilities.TimeSpan(i)}catch{return void(t.interval=e)}}}else{if("number"!=typeof n)return void(t.interval=e);i=new Smart.Utilities.TimeSpan(n)}t.interval=0===i._ticks?e:i}_validateMinMax(e,t){const n=this;let i=!1;"max"!==e&&(n.min=Smart.Utilities.DateTime.validateDate(n.min,t||new Smart.Utilities.DateTime(1600,1,1),n.formatString),n.min=n.min.toTimeZone(n._outputTimeZone),i=!0),"min"!==e&&(n.max=Smart.Utilities.DateTime.validateDate(n.max,t||new Smart.Utilities.DateTime(3001,1,1),n.formatString),n.max=n.max.toTimeZone(n._outputTimeZone),n.max.calendar.days=n._localizedDays,n.max.calendar.months=n._localizedMonths,n.max.calendar.locale=n.locale,n.$.calendarDropDown.max=n.max.toDate()),n.min.compare(n.max)>0&&(n.min=n.max.clone(),i=!0),i&&(n.min.calendar.days=n._localizedDays,n.min.calendar.months=n._localizedMonths,n.min.calendar.locale=n.locale,n.$.calendarDropDown.min=n.min.toDate())}_validateRestrictedDates(){const e=this,t=[],n=[];for(let i=0;i<e.restrictedDates.length;i++){let r=Smart.Utilities.DateTime.validateDate(e.restrictedDates[i],"invalid",e.formatString);"invalid"!==r&&(r=r.toTimeZone(e._outputTimeZone),t.push(r),n.push(r.toDate()))}e.restrictedDates=t,e.$.calendarDropDown.restrictedDates=n}_validateValue(e,t,n,i){const a=this,r=void 0!==t?t:a._cloneValue();if(null===e||""===e)return void a._setNullValue(r);if(e&&"string"==typeof e)if(-1===e.indexOf("-")&&-1===e.indexOf("/")&&-1===e.indexOf(".")){if(a.formatString){let d="",c=0;for(let u=0;u<a.formatString.length;u++)"-"===a.formatString[u]||"/"===a.formatString[u]||"."===a.formatString[u]?d+=a.formatString[u]:e[c]?(d+=e[c],c++):d+=a.formatString[u];if(d.indexOf("y")>=0){let u=d.substring(d.indexOf("y")-2);const m=a.yearCutoff.toString(),y=parseInt(m.slice(2),10);let b=parseInt(m.slice(0,2),10);u=parseInt(u,10),u<y&&b++,u=u.toString(),"NaN"!==u?(u=b+""+"0".repeat(2-u.length)+u,d=d.substring(0,d.indexOf("y")-2)+u):d=null}e=d}}else{let d=e.indexOf("-")>=0?"-":"";if(""===d&&(d=e.indexOf("/")>=0?"/":""),""===d&&(d=e.indexOf(".")>=0?".":""),d&&a.formatString.indexOf("yyyy")>=0){const c=e.split(d);let u=c[c.length-1];if(u.length<4){const m=a.yearCutoff.toString(),y=parseInt(m.slice(2),10);let b=parseInt(m.slice(0,2),10);u=parseInt(u,10),u<y&&b++,u=u.toString(),u=b+""+"0".repeat(2-u.length)+u,c[c.length-1]=u,e=c.join(d)}}}if(void 0!==e&&(a._value=Smart.Utilities.DateTime.validateDate(e,r,a.formatString)),null===a._value)return void a._setNullValue(r);let o=a._value;for(;!0===a._isRestricted(o);)o.addDays(1,!1);const s=a._rangeValidation(o);i&&"strict"!==a.validation?!1===o.equals(s)&&(a._minMaxChanged=!0):(a._value=s,delete a._minMaxChanged),a.value=a._value.toTimeZone(a._inputTimeZone);const l=a._value;if(l.calendar.days=a._localizedDays,l.calendar.months=a._localizedMonths,l.calendar.locale=a.locale,a._applyFormatString(),a._disableSpinButtons(),(null===r||null===l)&&r!==l||null!==r&&null!==l&&0!==r.compare(l)){if(!1!==n&&a.isInitialized&&!i&&(a.$.fireEvent("change",{oldValue:null!==r?r.toTimeZone(a._inputTimeZone):null,value:a.value}),a._updateTargetValue()),a._calendarInitiatedChange)return;a.opened?(null!==r&&0!==a.$.calendarDropDown.selectedDates.length&&r.year()===l.year()&&r.month()===l.month()&&r.day()===l.day()&&a.$.calendarDropDown._isDateInView(l.toDate())||(a._disregardCalendarChangeEvent=!0,a.$.calendarDropDown.selectedDates=[l.toDate()]),a._defaultFooterTemplateApplied&&(null!==r&&r.hour()===l.hour()||(a._hourElement.value=l.toString("hh"),a._ampmElement.value=l.toString("tt")),null!==r&&r.minute()===l.minute()||(a._minuteElement.value=l.toString("mm"))),a._timePickerInitialized&&!a._timePickerInitiatedChange&&(a.$.timePickerDropDown.value=l.toDate()),a._toSync=!1):a._toSync=!0}}})},9613:()=>{Smart.Utilities.Assign("Draw",class{constructor(e,t){const n=this;n.host=e,n.renderEngine=t||"",n.refresh();const i=["clear","removeElement","attr","getAttr","line","circle","rect","path","pieslice","pieSlicePath","text","measureText"];for(let a in i)n._addFn(Smart.Utilities.Draw.prototype,i[a])}_addFn(e,t){e[t]||(e[t]=function(){return this.renderer[t].apply(this.renderer,arguments)})}_initRenderer(e){return this.createRenderer(this,e)}_internalRefresh(){const e=this;if(e.renderer||(e.host.innerHTML="",e._initRenderer(e.host)),"none"===window.getComputedStyle(e.host).display)return;const t=e.renderer;if(!t)return;const n=t.getRect();e._render({x:1,y:1,width:n.width,height:n.height})}_render(e){this._plotRect=e}refresh(){this._internalRefresh()}getSize(){const e=this._plotRect;return{width:e.width,height:e.height}}toGreyScale(e){if(-1===e.indexOf("#"))return e;const t=this.cssToRgb(e);t[0]=t[1]=t[2]=Math.round(.3*t[0]+.59*t[1]+.11*t[2]);const n=this.rgbToHex(t[0],t[1],t[2]);return"#"+n[0]+n[1]+n[2]}decToHex(e){return e.toString(16)}hexToDec(e){return parseInt(e,16)}rgbToHex(e,t,n){return[this.decToHex(e),this.decToHex(t),this.decToHex(n)]}hexToRgb(e,t,n){return[this.hexToDec(e),this.hexToDec(t),this.hexToDec(n)]}cssToRgb(e){return e.indexOf("rgb")<=-1?this.hexToRgb(e.substring(1,3),e.substring(3,5),e.substring(5,7)):e.substring(4,e.length-1).split(",")}hslToRgb(e){let t,n,i;const a=parseFloat(e[0]),r=parseFloat(e[1]),o=parseFloat(e[2]);if(0===r)t=n=i=o;else{const s=o<.5?o*(1+r):o+r-o*r,l=2*o-s;t=this.hueToRgb(l,s,a+.3333333333333333),n=this.hueToRgb(l,s,a),i=this.hueToRgb(l,s,a-.3333333333333333)}return[255*t,255*n,255*i]}hueToRgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?e+6*(t-e)*n:n<.5?t:n<.6666666666666666?e+(t-e)*(.6666666666666666-n)*6:e}rgbToHsl(e){const t=parseFloat(e[0])/255,n=parseFloat(e[1])/255,i=parseFloat(e[2])/255,a=Math.max(t,n,i),r=Math.min(t,n,i);let o,s,l=(a+r)/2;if(a===r)o=s=0;else{const d=a-r;switch(s=l>.5?d/(2-a-r):d/(a+r),a){case t:o=(n-i)/d+(n<i?6:0);break;case n:o=(i-t)/d+2;break;case i:o=(t-n)/d+4}o/=6}return[o,s,l]}swap(e,t){const n=e;e=t,t=n}getNum(e){if(e.constructor!==Array){if(isNaN(e))return 0}else for(let t=0;t<e.length;t++)if(!isNaN(e[t]))return e[t];return 0}_ptRotate(e,t,n,i,a){const r=Math.sqrt(Math.pow(Math.abs(e-n),2)+Math.pow(Math.abs(t-i),2)),o=Math.asin((e-n)/r)+a;return{x:e=n+Math.cos(o)*r,y:t=i+Math.sin(o)*r}}log(e,t){return Math.log(e)/(t?Math.log(t):1)}_mod(e,t){const n=Math.abs(e>t?t:e);let i=1;if(0!==n)for(;n*i<100;)i*=10;return(e*=i)%(t*=i)/i}createRenderer(e,t){const n=e;let i=n.renderer=null;return document.createElementNS&&"HTML5"!==n.renderEngine&&(i=new Smart.Utilities.SvgRenderer(this)),null!==i||"HTML5"!==n.renderEngine&&void 0!==n.renderEngine||(i=new Smart.Utilities.HTML5Renderer(this)),i.init(t),n.renderer=i,i}getByPriority(e){let t;for(let n=0;n<e.length;n++){const i=e[n];if(null!=i&&""!==i){t=i;break}}return t}get(e,t,n){return void 0!==n?e[t][n]:e[t]}min(e,t){let n=NaN;for(let i=0;i<e.length;i++){const a=this.get(e,i,t);(isNaN(n)||a<n)&&(n=a)}return n}max(e,t){let n=NaN;for(let i=0;i<e.length;i++){const a=this.get(e,i,t);(isNaN(n)||a>n)&&(n=a)}return n}sum(e,t){let n=0;for(let i=0;i<e.length;i++){const a=this.get(e,i,t);isNaN(a)||(n+=a)}return n}count(e,t){let n=0;for(let i=0;i<e.length;i++){const a=this.get(e,i,t);isNaN(a)||n++}return n}avg(e,t){return this.sum(e,t)/Math.max(1,this.count(e,t))}filter(e,t){if(!t)return e;const n=[];for(let i=0;i<e.length;i++)t(e[i])&&n.push(e[i]);return n}scale(e,t,n,i){if(isNaN(e))return NaN;if((e<Math.min(t.min,t.max)||e>Math.max(t.min,t.max))&&(!i||!0!==i.ignore_range))return NaN;let a=NaN,r=1;if(void 0===t.type||"logarithmic"!==t.type){let o=Math.abs(t.max-t.min);o||(o=1),r=Math.abs(e-Math.min(t.min,t.max))/o}else if("logarithmic"===t.type){let o=t.base;isNaN(o)&&(o=10);let s=Math.min(t.min,t.max);s<=0&&(s=1);let l=Math.max(t.min,t.max);l<=0&&(l=1);const d=this.log(l,o);l=Math.pow(o,d);const c=this.log(s,o);s=Math.pow(o,c);const u=this.log(e,o);r=Math.abs(u-c)/(d-c)}if("logarithmic"===n.type){let o=n.base;isNaN(o)&&(o=10);const s=this.log(n.max,o),l=this.log(n.min,o);n.flip&&(r=1-r);const d=Math.min(l,s)+r*Math.abs(s-l);a=Math.pow(o,d)}else a=Math.min(n.min,n.max)+r*Math.abs(n.max-n.min),n.flip&&(a=Math.max(n.min,n.max)-a+n.min);return a}axis(e,t,n){if(n<=1)return[t,e];(isNaN(n)||n<2)&&(n=2);let i=0;for(;Math.round(e)!==e&&Math.round(t)!==t&&i<10;)e*=10,t*=10,i++;let a=(t-e)/n;for(;i<10&&Math.round(a)!==a;)e*=10,t*=10,a*=10,i++;const r=[1,2,5];let o,s=0;for(;;){let m=s%r.length,y=Math.floor(s/r.length),b=Math.pow(10,y)*r[m];if(m=(s+1)%r.length,y=Math.floor((s+1)/r.length),o=Math.pow(10,y)*r[m],a>=b&&a<o)break;s++}const l=o,d=[];let c=this.renderer._rnd(e,l,!1);const u=i<=0?1:Math.pow(10,i);for(;c<t+l;)d.push(c/u),c+=l;return d}_widgetToImage(e,t,n,i,a){let r=e;if(!r)return!1;void 0!==n&&""!==n||(n="image."+t);let o=r.renderEngine,s=r.animation;if(r.animation="none",r.renderEngine="HTML5",r.renderEngine!==o)try{r.refresh()}catch{return r.renderEngine=o,r.refresh(),r.animation=s,!1}let l=r.renderer.getContainer().firstElementChild,d=!0;"function"==typeof i&&(d=i(e,l));let c=!0;return d&&(c=this.exportImage(e,l,t,n,a)),r.renderEngine!==o&&(r.renderEngine=o,r.refresh(),r.animation=s),c}_saveAsImage(e,t){return this._widgetToImage(this,e,t)}saveAsPNG(e){return this._saveAsImage("png",e)}saveAsJPEG(e){return this._saveAsImage("jpeg",e)}exportImage(e,t,n,i,a){if(!t)return!1;let r="pdf"===n.toLowerCase();r&&(n="jpeg"),void 0!==i&&""!==i||(i="image."+n);let o=!0;if("print"!==n){try{if(t)if(r){a=a||"portrait";const s={content:{image:t.toDataURL("image/"+n),width:Math.min(t.width/1.35,"portrait"===a?515:762)},pageOrientation:a};try{pdfMake.createPdf(s).download(i)}catch{e.error(e.localize("missingReference",{files:"pdfmake.min.js"}))}}else{Smart.Utilities.DataExporter||e.error(e.localize("missingReference",{files:"smart.export.js"}));const s=new Smart.Utilities.DataExporter;t.toBlob(function(l){s.downloadFile(l,n,i)})}}catch{o=!1}return o}{const s=window.open("","","width=800,height=500"),l=s.document.open(),d='<!DOCTYPE html><html><head><meta charset="utf-8" /><title>jQWidgets Chart</title></head><body><img src="'+t.toDataURL()+'" /></html>';try{l.write(d),l.close(),setTimeout(function(){s.print(),s.close()},100)}catch{}}}}),Smart.Utilities.Assign("Renderer",class{constructor(e){const t=this;t.draw=e,t._gradients={},t._toRadiansCoefficient=2*Math.PI/360}pieSlicePath(e,t,n,i,a,r,o){i||(i=1);const s=Math.abs(a-r),l=s>180?1:0;s>=360&&(r=a+359.99);const d=a*this._toRadiansCoefficient,c=r*this._toRadiansCoefficient;let u=e,m=e,y=t,b=t;const f=!isNaN(n)&&n>0;f&&(o=0);const w=Math.cos(d),v=Math.sin(d),S=Math.cos(c),_=Math.sin(c);if(o+n>0){if(o>0){const J=(s/2+a)*this._toRadiansCoefficient;e+=o*Math.cos(J),t-=o*Math.sin(J)}f&&(u=e+n*w,y=t-n*v,m=e+n*S,b=t-n*_)}const T=e+i*w,z=e+i*S,M=t-i*v,L=t-i*_;let F="";const B=Math.abs(Math.abs(r-a)-360)>.02;return f?(F="M "+m+","+b,F+=" a"+n+","+n,F+=" 0 "+l+",1 "+(u-m)+","+(y-b),F+=B?" L"+T+","+M:" M"+T+","+M,F+=" a"+i+","+i,F+=" 0 "+l+",0 "+(z-T)+","+(L-M),B&&(F+=" Z")):(F="M "+z+","+L,F+=" a"+i+","+i,F+=" 0 "+l+",1 "+(T-z)+","+(M-L),B&&(F+=" L"+e+","+t,F+=" Z")),F}measureText(e,t,n,i){const a=this._getTextParts(e,t,n),r=a.width;let o=a.height;!1===i&&(o/=.6);let s={};if(isNaN(t)&&(t=0),0===t)s={width:this._rup(r),height:this._rup(o)};else{const l=t*Math.PI*2/360,d=Math.abs(Math.sin(l)),c=Math.abs(Math.cos(l)),u=Math.abs(r*d+o*c),m=Math.abs(r*c+o*d);s={width:this._rup(m),height:this._rup(u)}}return i&&(s.textPartsInfo=a),s}alignTextInRect(e,t,n,i,a,r,o,s,l,d){const c=l*Math.PI*2/360,u=Math.sin(c),m=Math.cos(c),y=a*u,b=a*m;"center"===o||""===o||"undefined"===o?e+=n/2:"right"===o&&(e+=n),"center"===s||"middle"===s||""===s||"undefined"===s?t+=i/2:"bottom"===s?t+=i-r/2:"top"===s&&(t+=r/2);let f="middle";-1!==(d=d||"").indexOf("top")?f="top":-1!==d.indexOf("bottom")&&(f="bottom");let w="center";return-1!==d.indexOf("left")?w="left":-1!==d.indexOf("right")&&(w="right"),"center"===w?(e-=b/2,t-=y/2):"right"===w&&(e-=b,t-=y),"top"===f?(e-=r*u,t+=r*m):"middle"===f&&(e-=r*u/2,t+=r*m/2),{x:e=this._rup(e),y:t=this._rup(t)}}adjustColor(e,t){if("string"!=typeof e)return"#000000";if(-1===e.indexOf("#"))return e;const n=this.draw;let i=n.cssToRgb(e);const a=n.rgbToHsl(i);a[2]=Math.min(1,a[2]*t),a[1]=Math.min(1,a[1]*t*1.1),i=n.hslToRgb(a),e="#";for(let r=0;r<3;r++){let o=Math.round(i[r]);o=n.decToHex(o),1===o.toString().length&&(e+="0"),e+=o}return e.toUpperCase()}_rup(e){let t=Math.round(e);return e>t&&t++,t}_ptdist(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))}_rnd(e,t,n,i){if(isNaN(e))return e;void 0===i&&(i=!0);let a=e-(!0===i?e%t:this._mod(e,t));return e===a?a:(n?e>a&&(a+=t):a>e&&(a-=t),1===t?Math.round(a):a)}_ptrnd(e){if(!document.createElementNS)return Math.round(e)===e?e:this._rnd(e,1,!1,!0);const t=this._rnd(e,.5,!1,!0);return.5!==Math.abs(t-Math.round(t))?t>e?t-.5:t+.5:t}_getContrastColor(e){if(void 0===e)return;let t=this.draw.hexToRgb(e.slice(1,3),e.slice(3,5),e.slice(5,7));return(.299*t[0]+.61*t[1]+.114*t[2])/255>.6?"#000000":"#FFFFFF"}}),Smart.Utilities.Assign("SvgRenderer",class extends Smart.Utilities.Renderer{constructor(e){super(e);const t=this;t._svgns="http://www.w3.org/2000/svg",t._openGroups=[],t._clipId=0}init(e){const t=document.createElement("div");t.className="drawContainer",t.onselectstart=function(){return!1},e.appendChild(t),this.host=e,this.container=t;try{const n=document.createElementNS(this._svgns,"svg");n.setAttribute("version","1.1"),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("overflow","hidden"),t.appendChild(n),this.canvas=n}catch{return!1}return this._id=(new Date).getTime(),this.clear(),!0}getType(){return"SVG"}refresh(){}getRect(){return{x:0,y:0,width:Math.max(this._rup(this.host.offsetWidth)-1,0),height:Math.max(this._rup(this.host.offsetHeight)-1,0)}}getContainer(){return this.container}clear(){for(;this.canvas.childNodes.length>0;)this.removeElement(this.canvas.firstElementChild);this._defaultParent=void 0,this._defs=document.createElementNS(this._svgns,"defs"),this._gradients={},this.canvas.appendChild(this._defs)}removeElement(e){if(void 0!==e)try{for(;e.firstChild;)this.removeElement(e.firstChild);e.parentNode?e.parentNode.removeChild(e):this.canvas.removeChild(e)}catch{}}beginGroup(){const e=this._activeParent(),t=document.createElementNS(this._svgns,"g");return e.appendChild(t),this._openGroups.push(t),t}endGroup(){0!==this._openGroups.length&&this._openGroups.pop()}_activeParent(){return 0===this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]}createClipRect(e){const t=document.createElementNS(this._svgns,"clipPath"),n=document.createElementNS(this._svgns,"rect");return this.attr(n,{x:e.x,y:e.y,width:e.width,height:e.height,fill:"none"}),this._clipId=this._clipId||0,t.id="cl"+this._id+"_"+(++this._clipId).toString(),t.appendChild(n),this._defs.appendChild(t),t}getWindowHref(){let e=window.location.href;return e&&(e=e.replace(/([\('\)])/g,"\\$1"),e=e.replace(/#.*$/,""),e)}setClip(e,t){const n="url("+this.getWindowHref()+"#"+t.id+")";return this.attr(e,{"clip-path":n})}addHandler(e,t,n){e.addEventListener(t,n)}removeHandler(){}on(e,t,n){this.addHandler(e,t,n)}off(e,t,n){this.removeHandler(e,t,n)}shape(e,t){const n=document.createElementNS(this._svgns,e);if(n){for(let i in t)n.setAttribute(i,t[i]);return this._activeParent().appendChild(n),n}}_getTextParts(e,t,n){const i={width:0,height:0,parts:[]};if(void 0===e)return i;const a=e.toString().split("<br>"),r=this._activeParent(),o=document.createElementNS(this._svgns,"text");this.attr(o,n);for(let s=0;s<a.length;s++){const l=a[s],d=o.ownerDocument.createTextNode(l);let c;o.appendChild(d),r.appendChild(o);try{c=o.getBBox()}catch{}const u=this._rup(c.width),m=this._rup(.6*c.height);o.removeChild(d),i.width=Math.max(i.width,u),i.height+=m+(s>0?4:0),i.parts.push({width:u,height:m,text:l})}return r.removeChild(o),i}_measureText(e,t,n,i){return super.measureText(e,t,n,i)}measureText(e,t,n){return this._measureText(e,t,n,!1)}text(e,t,n,i,a,r,o,s,l,d,c){const u=this._measureText(e,r,o,!0,this).textPartsInfo,m=u.parts,y=this._getContrastColor(arguments[11]);let b;if(l||(l="center"),d||(d="center"),(m.length>1||s)&&(b=this.beginGroup()),s){const F=this.createClipRect({x:this._rup(t)-1,y:this._rup(n)-1,width:this._rup(i)+2,height:this._rup(a)+2});this.setClip(b,F)}let f=this._activeParent(),w=0,v=0;w=u.width,v=u.height,(isNaN(i)||i<=0)&&(i=w),(isNaN(a)||a<=0)&&(a=v);const S=i||0,_=a||0;let T=0;if(!r||0===r){let F;n+=v,"center"===d||"middle"===d?n+=(_-v)/2:"bottom"===d&&(n+=_-v),i||(i=w),a||(a=v),f=this._activeParent();for(let B=m.length-1;B>=0;B--){F=document.createElementNS(this._svgns,"text"),this.attr(F,o),this.attr(F,{cursor:"default"});const J=F.ownerDocument.createTextNode(m[B].text);F.appendChild(J);let Q=t;const ee=m[B].width,se=m[B].height;"center"===l?Q+=(S-ee)/2:"right"===l&&(Q+=S-ee),this.attr(F,{x:this._rup(Q),y:this._rup(n+T),width:this._rup(ee),height:this._rup(se)}),void 0!==y&&(F.style.fill=y),f.appendChild(F),T-=m[B].height+4}return b?(this.endGroup(),b):F}const z=this.alignTextInRect(t,n,i,a,w,v,l,d,r,c),M=this.shape("g",{transform:"translate("+(t=z.x)+","+(n=z.y)+")"}),L=this.shape("g",{transform:"rotate("+r+")"});M.appendChild(L),T=0;for(let F=m.length-1;F>=0;F--){const B=document.createElementNS(this._svgns,"text");this.attr(B,o),this.attr(B,{cursor:"default"});const J=B.ownerDocument.createTextNode(m[F].text);B.appendChild(J);let Q=0;const ee=m[F].width,se=m[F].height;"center"===l?Q+=(u.width-ee)/2:"right"===l&&(Q+=u.width-ee),this.attr(B,{x:this._rup(Q),y:this._rup(T),width:this._rup(ee),height:this._rup(se)}),L.appendChild(B),T-=se+4}return f.appendChild(M),b&&this.endGroup(),M}line(e,t,n,i,a){const r=this.shape("line",{x1:e,y1:t,x2:n,y2:i});return this.attr(r,a),r}path(e,t){const n=this.shape("path");return n.setAttribute("d",e),t&&this.attr(n,t),n}rect(e,t,n,i,a){e=this._ptrnd(e),t=this._ptrnd(t),n=Math.max(1,this._rnd(n,1,!1)),i=Math.max(1,this._rnd(i,1,!1));const r=this.shape("rect",{x:e,y:t,width:n,height:i});return a&&this.attr(r,a),r}circle(e,t,n,i){const a=this.shape("circle",{cx:e,cy:t,r:n});return i&&this.attr(a,i),a}pieslice(e,t,n,i,a,r,o,s){const l=this.pieSlicePath(e,t,n,i,a,r,o),d=this.shape("path");return d.setAttribute("d",l),s&&this.attr(d,s),d}attr(e,t){if(e&&t)for(let n in t)"textContent"===n?e.textContent=t[n]:e.setAttribute(n,"width"===n||"height"===n?Math.max(0,t[n]):t[n])}removeAttr(e,t){if(e&&t)for(let n in t)"textContent"===n?e.textContent="":e.removeAttribute(t[n])}getAttr(e,t){return e.getAttribute(t)}_toLinearGradient(e,t,n){const i="grd"+this._id+e.replace("#","")+(t?"v":"h"),a="url("+this.getWindowHref()+"#"+i+")";if(this._gradients[a])return a;const r=document.createElementNS(this._svgns,"linearGradient");this.attr(r,{x1:"0%",y1:"0%",x2:t?"0%":"100%",y2:t?"100%":"0%",id:i});for(let o=0;o<n.length;o++){const s=n[o],l=document.createElementNS(this._svgns,"stop"),d="stop-color:"+this.adjustColor(e,s[1]);this.attr(l,{offset:s[0]+"%",style:d}),r.appendChild(l)}return this._defs.appendChild(r),this._gradients[a]=!0,a}_toRadialGradient(e,t,n){const i="grd"+this._id+e.replace("#","")+"r"+(void 0!==n?n.key:""),a="url("+this.getWindowHref()+"#"+i+")";if(this._gradients[a])return a;const r=document.createElementNS(this._svgns,"radialGradient");this.attr(r,void 0===n?{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:i}:{cx:n.x,cy:n.y,r:n.outerRadius,id:i,gradientUnits:"userSpaceOnUse"});for(let o=0;o<t.length;o++){const s=t[o],l=document.createElementNS(this._svgns,"stop"),d="stop-color:"+this.adjustColor(e,s[1]);this.attr(l,{offset:s[0]+"%",style:d}),r.appendChild(l)}return this._defs.appendChild(r),this._gradients[a]=!0,a}}),Smart.Utilities.Assign("HTML5Renderer",class extends Smart.Utilities.Renderer{constructor(e){super(e),this._renderers=new Smart.Utilities.HTML5RenderHelpers(this)}init(e){try{this.host=e;const t=document.createElement("div"),n=document.createElement("canvas");t.className="chartContainer",t.style.position="relative",t.onselectstart=function(){return!1},n.id="__smartCanvasWrap",n.style.width="100%",n.style.height="100%",t.appendChild(n),e.appendChild(t),this.canvas=n,n.width=e.offsetWidth,n.height=e.offsetHeight,this.ctx=n.getContext("2d"),this._elements={},this._maxId=0,this._gradientId=0,this._gradients={},this._currentPoint={x:0,y:0},this._lastCmd="",this._pos=0}catch{return!1}return!0}getType(){return"HTML5"}getContainer(){return this.host.getElementsByClassName("chartContainer")[0]}getRect(){return{x:0,y:0,width:this.canvas.width-1,height:this.canvas.height-1}}beginGroup(){}endGroup(){}setClip(){}createClipRect(){}addHandler(){}removeHandler(){}on(e,t,n){this.addHandler(e,t,n)}off(e,t,n){this.removeHandler(e,t,n)}clear(){this._elements={},this._maxId=0,this._renderers._gradients={},this._gradientId=0}removeElement(e){void 0!==e&&this._elements[e.id]&&delete this._elements[e.id]}shape(e,t){let n={type:e,id:this._maxId++};for(let i in t)n[i]=t[i];return this._elements[n.id]=n,n}attr(e,t){for(let n in t)e[n]=t[n]}removeAttr(e,t){for(let n in t)delete e[t[n]]}rect(e,t,n,i,a){if(isNaN(e))throw'Invalid value for "x"';if(isNaN(t))throw'Invalid value for "y"';if(isNaN(n))throw'Invalid value for "width"';if(isNaN(i))throw'Invalid value for "height"';let r=this.shape("rect",{x:e,y:t,width:n,height:i});return a&&this.attr(r,a),r}path(e,t){let n=this.shape("path",t);return this.attr(n,{d:e}),n}line(e,t,n,i,a){return this.path("M "+e+","+t+" L "+n+","+i,a)}circle(e,t,n,i){let a=this.shape("circle",{x:e,y:t,r:n});return i&&this.attr(a,i),a}pieslice(e,t,n,i,a,r,o,s){let l=this.path(this.pieSlicePath(e,t,n,i,a,r,o),s);return this.attr(l,{x:e,y:t,innerRadius:n,outerRadius:i,angleFrom:a,angleTo:r}),l}_getCSSStyle(e){const t=document.createElement("div");t.className=e,t.style.position="absolute",t.style.visibility="hidden",this.host.appendChild(t);let n=window.getComputedStyle(t);return n={color:n.color,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight},this.host.removeChild(t),n}_getTextParts(e,t,n){let i="Arial",a="10pt",r="";if(n&&n.class){let l=this._getCSSStyle(n.class);l.fontSize&&(a=l.fontSize),l.fontFamily&&(i=l.fontFamily),l.fontWeight&&(r=l.fontWeight)}this.ctx.font=r+" "+a+" "+i;let o={width:0,height:0,parts:[]},s=e.toString().split("<br>");for(let l=0;l<s.length;l++){let d=s[l],c=this.ctx.measureText(d).width,u=document.createElement("span");u.className="chart",u.font=this.ctx.font,u.textContent=d,this.host.appendChild(u);let m=.6*u.offsetHeight;this.host.removeChild(u),o.width=Math.max(o.width,this._rup(c)),o.height+=m+(l>0?4:0),o.parts.push({width:c,height:m,text:d})}return o}_measureText(e,t,n,i){return super.measureText(e,t,n,i)}measureText(e,t,n){return this._measureText(e,t,n,!1)}text(e,t,n,i,a,r,o,s,l,d,c){let u=this.shape("text",{text:e,x:t,y:n,width:i,height:a,angle:r,clip:s,halign:l,valign:d,rotateAround:c});if(o&&this.attr(u,o),u.fontFamily="Arial",u.fontSize="10pt",u.fontWeight="",u.color=this._getContrastColor(arguments[11]),o&&o.class){let y=this._getCSSStyle(o.class);u.fontFamily=y.fontFamily||u.fontFamily,u.fontSize=y.fontSize||u.fontSize,u.fontWeight=y.fontWeight||u.fontWeight,u.color=u.color||y.color}u.color=u.color||"#000000";let m=this._measureText(e,0,o,!0);return this.attr(u,{textPartsInfo:m.textPartsInfo,textWidth:m.width,textHeight:m.height}),(i<=0||isNaN(i))&&this.attr(u,{width:m.width}),(a<=0||isNaN(a))&&this.attr(u,{height:m.height}),u}_toLinearGradient(e,t,n){if(this._renderers._gradients[e])return e;let i=[];for(let r=0;r<n.length;r++)i.push({percent:n[r][0]/100,color:this.adjustColor(e,n[r][1])});let a="gr"+this._gradientId++;return this.createGradient(a,t?"vertical":"horizontal",i),a}_toRadialGradient(e,t){if(this._renderers._gradients[e])return e;let n=[];for(let a=0;a<t.length;a++)n.push({percent:t[a][0]/100,color:this.adjustColor(e,t[a][1])});let i="gr"+this._gradientId++;return this.createGradient(i,"radial",n),i}createGradient(e,t,n){this._renderers.createGradient(this,e,t,n)}refresh(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let e in this._elements){let t=this._elements[e];this._renderers.setFillStyle(this,t),this._renderers.setStroke(this,t),this._renderers[this._elements[e].type](this.ctx,t)}}}),Smart.Utilities.Assign("HTML5RenderHelpers",class{constructor(e){this.HTML5Renderer=e,this._cmds="mlcazq"}ptrnd(e){if(.5===Math.abs(Math.round(e)-e))return e;let t=Math.round(e);return t<e&&(t-=1),t+.5}createGradient(e,t,n,i){e._gradients[t]={orientation:n,colorStops:i}}setStroke(e,t){let n=e.ctx,i=t["stroke-width"];n.strokeStyle=t.stroke||"transparent",n.lineWidth=0===i?.01:void 0!==i?i:1,n.globalAlpha=void 0!==t["fill-opacity"]?t["fill-opacity"]:void 0!==t.opacity?t.opacity:1,n.setLineDash&&n.setLineDash(t["stroke-dasharray"]?t["stroke-dasharray"].split(","):[])}setFillStyle(e,t){let n=e.ctx;if(n.fillStyle="transparent",n.globalAlpha=void 0!==t["fill-opacity"]?t["fill-opacity"]:void 0!==t.opacity?t.opacity:1,t.fill&&-1===t.fill.indexOf("#")&&e._gradients[t.fill]){let i,a="horizontal"!==e._gradients[t.fill].orientation,r="radial"===e._gradients[t.fill].orientation,o=this.ptrnd(t.x),s=this.ptrnd(t.y),l=this.ptrnd(t.x+(a?0:t.width)),d=this.ptrnd(t.y+(a?t.height:0));if(("circle"===t.type||"path"===t.type||"rect"===t.type)&&r){let u=this.ptrnd(t.x),m=this.ptrnd(t.y);"rect"===t.type&&(u+=t.width/2,m+=t.height/2),i=n.createRadialGradient(u,m,t.innerRadius||0,u,m,t.outerRadius||t.r||0)}r||((isNaN(o)||isNaN(l)||isNaN(s)||isNaN(d))&&(o=0,s=0,l=a?0:n.canvas.width,d=a?n.canvas.height:0),i=n.createLinearGradient(o,s,l,d));let c=e._gradients[t.fill].colorStops;for(let u=0;u<c.length;u++)i.addColorStop(c[u].percent,c[u].color);n.fillStyle=i}else t.fill&&(n.fillStyle=t.fill)}rect(e,t){0!==t.width&&0!==t.height&&(e.fillRect(this.ptrnd(t.x),this.ptrnd(t.y),t.width,t.height),e.strokeRect(this.ptrnd(t.x),this.ptrnd(t.y),t.width,t.height))}circle(e,t){0!==t.r&&(e.beginPath(),e.arc(this.ptrnd(t.x),this.ptrnd(t.y),t.r,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke())}_parsePoint(e){return{x:this._parseNumber(e),y:this._parseNumber(e)}}_parseNumber(e){let t,n=!1;for(t=this._pos;t<e.length;t++)if(e[t]>="0"&&e[t]<="9"||"."===e[t]||"e"===e[t]||"-"===e[t]&&!n||"-"===e[t]&&t>=1&&"e"===e[t-1])n=!0;else{if(n||" "!==e[t]&&","!==e[t])break;this._pos++}let i=parseFloat(e.substring(this._pos,t));if(!isNaN(i))return this._pos=t,i}_isRelativeCmd(e){return-1!==this._cmds.indexOf(e)}_parseCmd(e){for(let t=this._pos;t<e.length;t++){if(-1!==this._cmds.toLowerCase().indexOf(e[t].toLowerCase()))return this._pos=t+1,this._lastCmd=e[t],this._lastCmd;if(" "!==e[t]){if(e[t]>="0"&&e[t]<="9"){if(this._pos=t,""===this._lastCmd)break;return this._lastCmd}}else this._pos++}}_toAbsolutePoint(e){return{x:this._currentPoint.x+e.x,y:this._currentPoint.y+e.y}}path(e,t){let n,i=t.d;for(this._pos=0,this._lastCmd="",this._currentPoint={x:0,y:0},e.beginPath();this._pos<i.length;){let a=this._parseCmd(i);if(void 0===a)break;if("M"!==a&&"m"!==a)if("L"!==a&&"l"!==a)if("A"!==a&&"a"!==a)if("Z"!==a&&"z"!==a||void 0===n)if("C"!==a&&"c"!==a){if("Q"===a||"q"===a){let r=this._parsePoint(i),o=this._parsePoint(i);e.quadraticCurveTo(r.x,r.y,o.x,o.y),this._currentPoint=o}}else{let r=this._parsePoint(i),o=this._parsePoint(i),s=this._parsePoint(i);e.bezierCurveTo(r.x,r.y,o.x,o.y,s.x,s.y),this._currentPoint=s}else e.lineTo(n.x,n.y),this._currentPoint=n;else{let r=this._parseNumber(i),o=this._parseNumber(i),s=this._parseNumber(i)*(Math.PI/180),l=this._parseNumber(i),d=this._parseNumber(i),c=this._parsePoint(i);if(this._isRelativeCmd(a)&&(c=this._toAbsolutePoint(c)),0===r||0===o)continue;let u=this._currentPoint,m={x:Math.cos(s)*(u.x-c.x)/2+Math.sin(s)*(u.y-c.y)/2,y:-Math.sin(s)*(u.x-c.x)/2+Math.cos(s)*(u.y-c.y)/2},y=Math.pow(m.x,2)/Math.pow(r,2)+Math.pow(m.y,2)/Math.pow(o,2);y>1&&(r*=Math.sqrt(y),o*=Math.sqrt(y));let b=(l===d?-1:1)*Math.sqrt((Math.pow(r,2)*Math.pow(o,2)-Math.pow(r,2)*Math.pow(m.y,2)-Math.pow(o,2)*Math.pow(m.x,2))/(Math.pow(r,2)*Math.pow(m.y,2)+Math.pow(o,2)*Math.pow(m.x,2)));isNaN(b)&&(b=0);let f={x:b*r*m.y/o,y:b*-o*m.x/r},w={x:(u.x+c.x)/2+Math.cos(s)*f.x-Math.sin(s)*f.y,y:(u.y+c.y)/2+Math.sin(s)*f.x+Math.cos(s)*f.y},v=function(Q){return Math.sqrt(Math.pow(Q[0],2)+Math.pow(Q[1],2))},S=function(Q,ee){return(Q[0]*ee[0]+Q[1]*ee[1])/(v(Q)*v(ee))},_=function(Q,ee){return(Q[0]*ee[1]<Q[1]*ee[0]?-1:1)*Math.acos(S(Q,ee))},T=_([1,0],[(m.x-f.x)/r,(m.y-f.y)/o]),z=[(m.x-f.x)/r,(m.y-f.y)/o],M=[(-m.x-f.x)/r,(-m.y-f.y)/o],L=_(z,M);S(z,M)<=-1&&(L=Math.PI),S(z,M)>=1&&(L=0),0===d&&L>0&&(L-=2*Math.PI),1===d&&L<0&&(L+=2*Math.PI);let F=r>o?r:o,B=r>o?1:r/o,J=r>o?o/r:1;e.translate(w.x,w.y),e.rotate(s),e.scale(B,J),e.arc(0,0,F,T,T+L,1-d),e.scale(1/B,1/J),e.rotate(-s),e.translate(-w.x,-w.y)}else{let r=this._parsePoint(i);if(void 0===r)break;e.lineTo(r.x,r.y),this._currentPoint=r}else{let r=this._parsePoint(i);if(void 0===r)break;e.moveTo(r.x,r.y),this._currentPoint=r,void 0===n&&(n=r)}}e.fill(),e.stroke(),e.closePath()}text(e,t){let n=this.ptrnd(t.x),i=this.ptrnd(t.y),a=this.ptrnd(t.width),r=this.ptrnd(t.height),o=t.halign,s=t.valign,l=t.angle,d=t.rotateAround,c=t.textPartsInfo,u=c.parts,m=t.clip;void 0===m&&(m=!0),e.save(),o||(o="center"),s||(s="center"),m&&(e.rect(n,i,a,r),e.clip());let y=t.textWidth,b=t.textHeight,f=a||0,w=r||0;if(e.fillStyle=t.color,e.font=t.fontWeight+" "+t.fontSize+" "+t.fontFamily,!l||0===l){i+=b,"center"===s||"middle"===s?i+=(w-b)/2:"bottom"===s&&(i+=w-b),a||(a=y),r||(r=b);let z=0;for(let M=u.length-1;M>=0;M--){let L=u[M],F=n,B=u[M].width;"center"===o?F+=(f-B)/2:"right"===o&&(F+=f-B),e.fillText(L.text,F,i+z),z-=L.height+(M>0?4:0)}return void e.restore()}let v=this.HTML5Renderer.alignTextInRect(n,i,a,r,y,b,o,s,l,d);n=v.x,i=v.y;let S=l*Math.PI*2/360;e.translate(n,i),e.rotate(S);let _=0,T=c.width;for(let z=u.length-1;z>=0;z--){let M=0;"center"===o?M+=(T-u[z].width)/2:"right"===o&&(M+=T-u[z].width),e.fillText(u[z].text,M,_),_-=u[z].height+4}e.restore()}}),Smart.Utilities.Assign("Plot",class{constructor(e){this.renderer=e}get(e,t,n){return void 0!==n?e[t][n]:e[t]}min(e,t){let n=NaN;for(let i=0;i<e.length;i++){let a=this.get(e,i,t);(isNaN(n)||a<n)&&(n=a)}return n}max(e,t){let n=NaN;for(let i=0;i<e.length;i++){let a=this.get(e,i,t);(isNaN(n)||a>n)&&(n=a)}return n}sum(e,t){let n=0;for(let i=0;i<e.length;i++){let a=this.get(e,i,t);isNaN(a)||(n+=a)}return n}count(e,t){let n=0;for(let i=0;i<e.length;i++){let a=this.get(e,i,t);isNaN(a)||n++}return n}avg(e,t){return this.sum(e,t)/Math.max(1,this.count(e,t))}filter(e,t){if(!t)return e;let n=[];for(let i=0;i<e.length;i++)t(e[i])&&n.push(e[i]);return n}scale(e,t,n,i){if(isNaN(e))return NaN;if((e<Math.min(t.min,t.max)||e>Math.max(t.min,t.max))&&(!i||!0!==i.ignore_range))return NaN;let a=NaN,r=1;if(void 0===t.type||"logarithmic"!==t.type){let o=Math.abs(t.max-t.min);o||(o=1),r=Math.abs(e-Math.min(t.min,t.max))/o}else if("logarithmic"===t.type){let o=t.base;isNaN(o)&&(o=10);let s=Math.min(t.min,t.max);s<=0&&(s=1);let l=Math.max(t.min,t.max);l<=0&&(l=1);let d=Math.log(l)/Math.log(o);l=Math.pow(o,d);let c=Math.log(s)/Math.log(o);s=Math.pow(o,c);let u=Math.log(e)/Math.log(o);r=Math.abs(u-c)/(d-c)}if("logarithmic"===n.type){let o=n.base;isNaN(o)&&(o=10);let s=Math.log(n.max)/Math.log(o),l=Math.log(n.min)/Math.log(o);n.flip&&(r=1-r);let d=Math.min(l,s)+r*Math.abs(s-l);a=Math.pow(o,d)}else a=Math.min(n.min,n.max)+r*Math.abs(n.max-n.min),n.flip&&(a=Math.max(n.min,n.max)-a+n.min);return a}axis(e,t,n){if(n<=1)return[t,e];(isNaN(n)||n<2)&&(n=2);let i=0;for(;Math.round(e)!==e&&Math.round(t)!==t&&i<10;)e*=10,t*=10,i++;let a=(t-e)/n;for(;i<10&&Math.round(a)!==a;)e*=10,t*=10,a*=10,i++;let r,o=[1,2,5],s=0;for(;;){let m=s%o.length,y=Math.floor(s/o.length),b=Math.pow(10,y)*o[m];if(m=(s+1)%o.length,y=Math.floor((s+1)/o.length),r=Math.pow(10,y)*o[m],a>=b&&a<r)break;s++}let l=r,d=[],c=this.renderer._rnd(e,l,!1),u=i<=0?1:Math.pow(10,i);for(;c<t+l;)d.push(c/u),c+=l;return d}})},7650:()=>{Smart("smart-drop-down-list",class extends Smart.ContentElement{static get properties(){return{autoCloseDelay:{value:100,type:"number"},dataSource:{value:null,type:"any",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},displayMode:{allowedValues:["outlined","filled","underlined"],value:"outlined",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownButtonPosition:{allowedValues:["none","left","right","top","bottom"],value:"right",defaultReflectToAttribute:!0,type:"string"},dropDownMinHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"default",type:"string"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPlaceholder:{value:"No Items",type:"string"},dropDownPosition:{allowedValues:["auto","top","bottom","overlay-top","overlay-center","overlay-bottom","center-bottom","center-top"],value:"auto",type:"string"},dropDownMinWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxWidth:{value:"",type:"any",validator:"_propertyValidator"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterCallback:{value:null,type:"function?"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},hint:{value:"",type:"string"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemMeasureMode:{value:"auto",allowedValues:["auto","precise"],type:"string"},inputMember:{value:"label",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},label:{value:"",type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},placeholder:{value:"",type:"string"},resizeMode:{value:"none",allowedValues:["none","horizontal","vertical","both"],type:"string"},resizeIndicator:{value:!1,type:"boolean"},selectionDisplayMode:{value:"plain",allowedValues:["plain","placeholder","tokens"],type:"string"},selectionMode:{value:"zeroAndOne",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","zeroAndOne","one","checkBox","radioButton"],type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},tokenTemplate:{value:null,type:"any"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","actionButton.focus":"_buttonsFocusHandler","actionButton.blur":"_buttonsFocusHandler","document.selectstart":"_selectStartHandler","document.dragstart":"_dragStartHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.move":"_documentMoveHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",focus:"_focusEventHandler",blur:"_blurEventHandler","dropDownButton.focus":"_buttonsFocusHandler","dropDownButton.blur":"_buttonsFocusHandler","dropDownContainer.transitionend":"_dropDownTransitionendHandler","listBox.change":"_listBoxChangeHandler","listBox.itemClick":"_listBoxItemClickHandler","listBox.keydown":"_listBoxKeyDownHandler","listBox.bindingComplete":"_bindingCompleteHandler",mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler",resize:"_resizeHandler","resizeBar.move":"_resizeBarMoveHandler",styleChanged:"_styleChangedHandler",wheel:"_mouseWheelHandler"}}template(){return'<div id="container" role="presentation">\n                    <span class="smart-label" id="label">[[label]]</span>\n                    <div id="content" class="smart-content" role="presentation">\n                        <div class="smart-buttons-container" id="buttonsContainer" role="presentation">\n                            <span id="actionButton" class ="smart-action-button" role="presentation">[[placeholder]]</span>\n                            <span id="dropDownButton" class="smart-drop-down-button">\n                                <span class ="smart-drop-down-button-icon" id="arrow" aria-hidden="true"></span>\n                            </span>\n                        </div>\n                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden" role="presentation">\n                            <smart-list-box id="listBox" unfocusable\n                                    animation="[[animation]]"\n                                    data-source="[[dataSource]]"\n                                    disabled="[[disabled]]"\n                                    display-loading-indicator="[[displayLoadingIndicator]]"\n                                    display-member="[[displayMember]]"\n                                    filterable="[[filterable]]"\n                                    filter-callback="[[filterCallback]]"\n                                    filter-mode="[[filterMode]]"\n                                    filter-input-placeholder="[[filterInputPlaceholder]]"\n                                    grouped="[[grouped]]"\n                                    group-member="[[groupMember]]"\n                                    item-height="[[itemHeight]]"\n                                    item-measure-mode="[[itemMeasureMode]]"\n                                    item-template="[[itemTemplate]]"\n                                    incremental-search-delay="[[incrementalSearchDelay]]"\n                                    incremental-search-mode="[[incrementalSearchMode]]"\n                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"\n                                    loading-indicator-position="[[loadingIndicatorPosition]]"\n                                    name="[[name]]"\n                                    placeholder="[[dropDownPlaceholder]]"\n                                    right-to-left="[[rightToLeft]]"\n                                    readonly="[[readonly]]"\n                                    selected-indexes="{{selectedIndexes}}"\n                                    selection-mode="[[selectionMode]]"\n                                    selected-values="{{selectedValues}}"\n                                    sorted="[[sorted]]"\n                                    sort-direction="[[sortDirection]]"\n                                    theme="[[theme]]"\n                                    value-member="[[valueMember]]"\n                                    horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"\n                                    vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]"\n                                    virtualized="[[virtualized]]">\n                                <content></content>\n                            </smart-list-box>\n                            <div id="resizeBar" class="smart-drop-down-resize-bar" aria-label="Resize">\n                                <div></div>\n                            </div>\n                         </div>\n                    </div>\n                    <span class="smart-hint smart-hidden" id="hint">[[hint]]</span>\n                </div>'}static get styleUrls(){return["smart.dropdownlist.css","smart.dropdown.css"]}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;switch(e){case"animation":i.$.dropDownContainer.setAttribute("animation",i.animation);break;case"disabled":i._setFocusable(),i.close(),i._positionDetection.handleAutoPositioning();break;case"dataSource":case"displayMember":case"inputMember":i.$.actionButton&&(i.$.actionButton.innerHTML=i.placeholder),i._setDropDownSize(),i._positionDetection.checkBrowserBounds("vertically"),i._positionDetection.positionDropDown(),i._positionDetection.checkBrowserBounds("horizontally");break;case"dropDownAppendTo":i._positionDetection.dropDownAppendToChangedHandler();break;case"dropDownOpenMode":i._setFocusable(),i.$dropDownContainer.addClass("smart-visibility-hidden"),i.$.dropDownContainer.setAttribute("drop-down-open-mode",n),i.$.dropDownButton.removeAttribute("selected"),i.removeAttribute("drop-down-button-focus"),i.removeAttribute("action-button-focus"),i.opened=!1,i._ariaButton&&i._ariaButton.setAttribute("aria-expanded",!1),i._setAriaRelations();break;case"dropDownOverlay":n||i._positionDetection.removeOverlay();break;case"dropDownPosition":i._positionDetection.dropDownPositionChangedHandler();break;case"dropDownMinWidth":case"dropDownWidth":case"dropDownMaxWidth":case"dropDownHeight":case"dropDownMinHeight":case"dropDownMaxHeight":i._setDropDownSize();break;case"filterable":i.$.listBox.filterable=n,i._dropDownSize&&"auto"===i._dropDownSize.height&&i._setDropDownSize();break;case"label":if(!i._ariaButton)return;n?i._ariaButton.setAttribute("aria-labelledby",i.$.label.id):"DropDownList"===i.elementName&&i._ariaButton.setAttribute("aria-labelledby",i.$.actionButton.id);break;case"opened":if(i.disabled||i.readonly)return;n?i.open():i.close();break;case"placeholder":case"selectionDisplayMode":i._applySelection();break;case"readonly":i.close();break;case"resizeIndicator":n?i.$.dropDownContainer.setAttribute("resize-indicator",""):i.$.dropDownContainer.removeAttribute("resize-indicator");break;case"resizeMode":i.$.dropDownContainer.setAttribute("resize-mode",i.resizeMode);break;case"selectedValues":case"selectedIndexes":0===n.length?i.$.actionButton.innerHTML=i.placeholder:i._applySelection();break;case"selectionMode":i.$.listBox&&(i.$.listBox[e]=n,"checkBox"!==n&&"radioButton"!==n&&"checkBox"!==t&&"radioButton"!==t||i._setDropDownSize());break;case"tokenTemplate":i._tokenTemplate=i._validateTemplate(i.tokenTemplate),i._applySelection();break;case"unfocusable":i._setFocusable()}}_updateTargetValue(){const e=this;if(e.dataset.target){const t=document.querySelector(e.dataset.target);if(t){const n=e.dataset.property,i=e.value;n&&void 0!==t[n]&&(t[n]=i)}}}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(t.$.listBox.appendChild(e),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}attached(){const e=this;super.attached(),e.isCompleted&&e.$.dropDownContainer&&(e._positionDetection.dropDownAttached("_setDropDownSize"),e._positionDetection.checkBrowserBounds(),e.selectedIndexes&&e._applySelection())}detached(){const e=this;super.detached(),e.$.dropDownContainer&&(e.close(),e._positionDetection&&e._positionDetection.dropDownDetached())}clearItems(){const e=this;e.$.listBox&&(e.$.listBox.clearItems(),e.$.actionButton.innerHTML=e.placeholder)}clearSelection(){const e=this;e.$.listBox&&(e.$.listBox.clearSelection(),e.$.actionButton.innerHTML=e.placeholder)}close(){const e=this;e.$dropDownContainer.hasClass("smart-visibility-hidden")||e.$.fireEvent("closing").defaultPrevented||(e.$dropDownContainer.addClass("smart-visibility-hidden"),e.$.fireEvent("close"),e.$.dropDownButton&&e.$.dropDownButton.removeAttribute("selected"),e.opened=!1,e._ariaButton&&e._ariaButton.setAttribute("aria-expanded",!1),e._preventDropDownClose=!1,e._positionDetection.removeOverlay(!0),e.$.listBox.removeAttribute("focus"),e._edgeMacFF&&!e.hasAnimation&&e.$.dropDownContainer&&(e.$.dropDownContainer.style.top=e.$.dropDownContainer.style.left="",e.$dropDownContainer.addClass("not-in-view")))}cloneNode(){const e=this;if(!e.$.listBox)return;let t=HTMLElement.prototype.cloneNode.apply(e,Array.prototype.slice.call(arguments,0,1));return t.dataSource=e.dataSource,t}ensureVisible(e){this.$.listBox&&this.$.listBox.ensureVisible(e)}getItem(e){if(this.$.listBox)return this.$.listBox.getItem(e)}get items(){const e=this;return e.$&&e.$.listBox?e.$.listBox.items:[]}get _focusedItem(){const e=this;return e.$&&e.$.listBox?e.$.listBox._focusedItem:null}insert(e,t){const n=this;n.$.listBox&&(n.$.listBox.insert(e,t),n._applySelection(),n._dropDownSize&&"auto"===n._dropDownSize.height&&n._setDropDownSize())}insertBefore(e,t){const n=this;if(!n.isCompleted){const i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,i.concat(Array.prototype.slice.call(arguments)))}e&&t?n.$.listBox&&(n.$.listBox.insertBefore(e,t),n._dropDownSize&&"auto"===n._dropDownSize.height&&n._setDropDownSize()):n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this,t=function(){for(let n=0;n<e.items.length;n++)if(!e.items[n].disabled)return e.items[n]};if(!e.disabled&&e.offsetHeight&&e.$dropDownContainer.hasClass("smart-visibility-hidden")){if(e.$dropDownContainer.hasClass("not-in-view")&&e.$dropDownContainer.removeClass("not-in-view"),e.$.dropDownContainer.style.transition=null,e.dropDownAppendTo){const n=e.getBoundingClientRect();if(e.$.container.contains(e.$.dropDownContainer)){let i=0;const a=setInterval(function(){const r=e.getBoundingClientRect();i++,r.top===e._positionTop&&i<10||(e.open(),clearInterval(a),e._positionTop=r.top)},100);return}n.top!==e._positionTop&&(e._positionTop=n.top)}e.$.fireEvent("opening").defaultPrevented||(e._shadowDOMStylesDelay&&(e._setDropDownSize(),delete e._shadowDOMStylesDelay),e.opened=!0,e._ariaButton&&e._ariaButton.setAttribute("aria-expanded",!0),e.$.listBox.setAttribute("focus",""),e._positionDetection.placeOverlay(),e._positionDetection.checkBrowserBounds("vertically"),e._positionDetection.positionDropDown(),e._positionDetection.checkBrowserBounds("horizontally"),e.$dropDownContainer.removeClass("smart-visibility-hidden"),e.$.fireEvent("open"),e.$.dropDownButton&&("dropDownButton"===e.dropDownOpenMode?e.$.dropDownButton.setAttribute("selected",""):e.$.dropDownButton.removeAttribute("selected")),(e.$.listBox&&!e._focusedItem||e._focusedItem&&!e._focusedItem._focused)&&e._focus(e.selectedIndexes.length>0?e.items[e.selectedIndexes[0]]:t),e.$.input&&!Smart.Utilities.Core.isMobile&&e.$.input.focus())}}ready(){super.ready()}render(){const e=this;e.rightToLeft&&(e.dropDownButtonPosition="right"===e.dropDownButtonPosition?"left":"right"),e.classList.add("smart-drop-down-box"),e.$.dropDownContainer&&(e._positionDetection=new Smart.Utilities.PositionDetection(e,e.$.dropDownContainer,e.$.container,"close"),e._positionDetection.getDropDownParent(!0),e._positionDetection.setDropDownPosition(),e._calculateDropDownSize(),e.$.dropDownContainer.setAttribute("resize-mode",e.resizeMode),e.$.dropDownContainer.setAttribute("drop-down-open-mode",e.dropDownOpenMode),e.resizeIndicator&&e.$.dropDownContainer.setAttribute("resize-indicator",""),e._positionDetection.handleAutoPositioning()),e.opened&&e.open(),e._positionTop=e.getBoundingClientRect().top,e._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e._edgeMacFF&&e.hasAnimation&&e.$.dropDownContainer&&e.$dropDownContainer.addClass("not-in-view"),e.$.label&&!e.$.label.id&&(e.$.label.id=e.id+"Label"),e.$.actionButton&&!e.$.actionButton.id&&(e.$.actionButton.id=e.id+"ActionButton"),e.$.hint&&!e.$.hint.id&&(e.$.hint.id=e.id+"Hint"),e._createElement(),super.render()}removeAt(e){const t=this;t.$.listBox&&(t.$.listBox.removeAt(e),t._applySelection(),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize())}removeChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e&&e instanceof Smart.ListItem?(t.$.listBox.removeChild(e),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}get value(){const e=this;return e.isRendered&&e.$.listBox?e.$.listBox.value:null}set value(e){const t=this;return t.isRendered&&t.$.listBox?void(t.$.listBox.value=e):null}select(e){this.$.listBox&&this.$.listBox.select(e)}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return e.removeAttribute("tabindex"),e.$.actionButton.removeAttribute("tabindex"),void e.$.dropDownButton.removeAttribute("tabindex");let t=e.tabIndex>0?e.tabIndex:0;e.tabIndex=t,"dropDownButton"===e.dropDownOpenMode?(e.removeAttribute("tabindex"),e.$.actionButton.setAttribute("tabindex",t),e.$.dropDownButton.setAttribute("tabindex",t)):(e.$.actionButton.removeAttribute("tabindex"),e.$.dropDownButton.removeAttribute("tabindex"))}static get requires(){return{"Smart.ListBox":"smart.listbox.js"}}unselect(e){this.$.listBox&&this.$.listBox.unselect(e)}update(e,t){const n=this;n.$.listBox&&(n.$.listBox.update(e,t),n._applySelection())}_resizeBarMoveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_createToken(){const e=this;let t,n=!1;const i=document.createDocumentFragment(),a=e.selectedIndexes[e.selectedIndexes.length-1];"plain"!==e.selectionDisplayMode||"one"!==e.selectionMode&&"zeroAndOne"!==e.selectionMode&&"zeroOrOne"!==e.selectionMode&&"radioButton"!==e.selectionMode?"tokens"===e.selectionDisplayMode?1===e.selectedIndexes.length&&["oneOrManyExtended","oneOrMany","zeroAndOne","one","radioButton"].indexOf(e.selectionMode)>-1?t="":(t="&#10006",n=!0):t=1===e.selectedIndexes.length?"":",":t="";const r=e.selectedIndexes,o=e.$.listBox._items;for(let s=0;s<r.length;s++){const l=r[s];o[l]&&i.appendChild(e._applyTokenTemplate(o[l][e.inputMember],"tokens"!==e.selectionDisplayMode&&l===a?"":t,n))}return i}_applySelection(){const e=this;if("placeholder"!==e.selectionDisplayMode&&0!==e.selectedIndexes.length){if(e.$.listBox._items&&0!==e.$.listBox._items.length)if("plain"!==e.selectionDisplayMode)e.$.actionButton.innerHTML="",e.$.actionButton.appendChild(e._createToken());else{const t=e.$.listBox.selectedIndexes,n=e.$.listBox._items;let i=[];for(let a=0;a<t.length;a++){const r=t[a];n[r]&&i.push(n[r][e.inputMember])}e.$.actionButton.innerHTML=i.length?`<span class="smart-token">${i.join(", ").trim()}</span>`:""}}else e.$.actionButton.innerHTML=e.placeholder}_applyTokenTemplate(e,t,n){const i=this,a=document.createElement("span"),r=function(){return"<span class='smart-drop-down-list-selection-label' role=\"presentation\">"+e+`</span><span class='smart-drop-down-list-unselect-button' role="button"${n?' aria-label="Unselect"':""}>${t}</span>`};if(a.classList.add("smart-token"),i._tokenTemplate){let o=document.importNode(i._tokenTemplate.content,!0);const s=o.childNodes.length,l=/{{\w+}}/g;let d;for(let c=0;c<s;c++)d=l.exec(o.childNodes[c].innerHTML),d&&(o.childNodes[c].innerHTML=o.childNodes[c].innerHTML.replace(d[0],r())),o.childNodes[c].outerHTML&&(a.innerHTML+=o.childNodes[c].outerHTML)}else"function"==typeof i.tokenTemplate?i.tokenTemplate(a,{label:e,iconSeparator:t}):a.innerHTML=r();return a}_bindingCompleteHandler(){const e=this;e.$.listBox&&requestAnimationFrame(()=>{e._setDropDownSize(),e._positionDetection.checkBrowserBounds()})}_buttonsDownHandler(e){const t=this;if(!t.disabled){if(t.hasRippleAnimation)if(t.$.buttonsContainer&&"dropDownButton"!==t.dropDownOpenMode){const n=t.$.buttonsContainer;n.firstElementChild.noRipple=!0,Smart.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY),n.firstElementChild.noRipple=!1}else Smart.Utilities.Animation.Ripple.animate(e.target,e.pageX,e.pageY);t._preventsSelectStart=!0,t.tagName.toLowerCase().indexOf("smart-drop-down-")>-1&&"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.actionButton&&t.$.actionButton.setAttribute("active",""),t.opened&&(t._preventDropDownClose=!0)}}_buttonsMouseEventsHandler(e){const t=this;t.disabled||("mouseenter"===e.type?(t.setAttribute("hover",""),e.target.setAttribute("hover",""),"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.dropDownButton&&t.setAttribute("drop-down-button-hover","")):(t.removeAttribute("hover"),t.removeAttribute("drop-down-button-hover"),e.target.removeAttribute("hover")))}_calculateDropDownSize(){const e=this;e._dropDownSize={};const t=window.getComputedStyle(e.$.dropDownContainer),n=parseFloat(t.getPropertyValue("border-top-width").trim()),i=parseFloat(t.getPropertyValue("border-bottom-width").trim()),a=parseFloat(t.getPropertyValue("margin-top").trim()),r=parseFloat(t.getPropertyValue("margin-bottom").trim()),o=parseFloat(t.getPropertyValue("padding-top").trim()),s=parseFloat(t.getPropertyValue("padding-bottom").trim());Smart.Utilities.Core.CSSVariablesSupport()&&(e._dropDownSize.width=t.getPropertyValue("--smart-drop-down-list-drop-down-width").trim(),e._dropDownSize.height=t.getPropertyValue("--smart-drop-down-list-drop-down-height").trim()),(!e._dropDownSize.width||e._dropDownSize.width.indexOf("initial")>-1)&&(e._dropDownSize.width=e.offsetWidth),e._dropDownSize.height||(e._dropDownSize.height="auto"),e._dropDownSize.minHeight=parseFloat(t.getPropertyValue("min-height").trim()),e._dropDownSize.maxHeight=parseFloat(t.getPropertyValue("max-height").trim()),e._dropDownSize.borderWidth=(isNaN(n)?0:n)+(isNaN(i)?0:i),e._dropDownSize.paddingWidth=(isNaN(o)?0:o)+(isNaN(s)?0:s),e._dropDownSize.marginWidth=(isNaN(a)?0:a)+(isNaN(r)?0:r)}_createElement(){const e=this;e._tokenTemplate=e._validateTemplate(e.tokenTemplate),e._applySelection(),e._setDropDownSize(),e._setFocusable(),e.$.arrow.noRipple=!0,e._shadowDOMStylesDelay=e.shadowRoot,e._setAriaRelations(!0)}_documentDownHandler(e){const t=this;if(t.disabled||t.readonly)return;let n=e.originalEvent.target;if(n===t._overlay&&(t._overlayDown=!0),t.shadowRoot){n=e.originalEvent.composedPath()[0];let a=n.getRootNode().host;for(;a;)a.closest(".smart-drop-down-container")===t.$.dropDownContainer&&(t._isDropDownClicked=!0),a=a.getRootNode().host}else t.isInShadowDOM&&(n=e.originalEvent.composedPath()[0]),t._isDropDownClicked=n.closest(".smart-drop-down-container")===t.$.dropDownContainer;if(t._buttonClicked=n.closest(".smart-action-button")||n.closest(".smart-drop-down-button"),t.$.listBox){let a=n.closest("smart-list-item");t.$.listBox.contains(a)||(a=void 0),t.hasRippleAnimation&&a&&Smart.Utilities.Animation.Ripple.animate(a,e.pageX,e.pageY),(a||n===t.$.listBox.$.filterInput||n.closest(".smart-token"))&&(t._preventDropDownClose=!0)}if(t._isDropDownClicked&&(t._preventDropDownClose=!0),n!==t.$.resizeBar||"none"===t.resizeMode)return;t._resizeDetails||(t._resizeDetails={});const i=t.$.dropDownContainer.getBoundingClientRect();t._resizeDetails.started=!0,t._resizeDetails.x=e.pageX,t._resizeDetails.y=e.pageY,t._resizeDetails.width=t.$.dropDownContainer.offsetWidth,t._resizeDetails.height=t.$.dropDownContainer.offsetHeight,t._resizeDetails.offsetXL=e.clientX-i.left,t._resizeDetails.offsetXR=i.left+t.$.dropDownContainer.offsetWidth-e.clientX,t._resizeDetails.offsetY=i.top+t.$.dropDownContainer.offsetHeight-e.clientY,t._resizeDetails.offsetYtop=e.clientY-i.top,t._preventDropDownClose=!0}_documentMoveHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if("auto"===t.dropDownOpenMode&&null!==t.dropDownAppendTo&&(t.contains(n)||t.$.dropDownContainer.contains(n)?t._isElementHovered=!0:(t._isElementHovered=!1,t._autoClose())),!t._resizeDetails||t._resizeDetails&&!t._resizeDetails.started)return;t.setAttribute("resizing",""),t._resizeDetails.resizeEventFired||(t.$.fireEvent("resizeStart",{position:{left:e.pageX,top:e.pageY}}),t._resizeDetails.resizeEventFired=!0);const i=document.documentElement,a=t.$.dropDownContainer.getBoundingClientRect(),r=t.getBoundingClientRect(),o=t.$.dropDownContainer.hasAttribute("top")?"top":"bottom";let s;function l(){if(s=e.pageY-t._resizeDetails.y,"bottom"===o)t._resizeDetails.height=Math.min(i.clientHeight-a.top-6,Math.max(0,t._resizeDetails.height+s)),t._resizeDetails.y=Math.max(a.top+i.scrollTop-t._resizeDetails.offsetY,Math.min(i.clientHeight+i.scrollTop-1.5*t._resizeDetails.offsetY,e.pageY));else{if(t._resizeDetails.height=Math.min(t._dropDownSize.maxHeight,Math.max(0,Math.min(r.top,t._resizeDetails.height-s))),s=Math.max(0,a.top+(a.height-Math.max(t._dropDownSize.minHeight,t._resizeDetails.height))),t.dropDownAppendTo){const u=Math.abs(parseFloat(getComputedStyle(t.$.dropDownContainer).getPropertyValue("margin-bottom")))||0;t.$.dropDownContainer.style.top=t.dropDownAppendTo?u+s+"px":""}const c=r.top+i.scrollTop+t._resizeDetails.offsetYtop;t._resizeDetails.y=Math.max(t._resizeDetails.offsetYtop,Math.min(c,Math.max(c-t._dropDownSize.maxHeight,e.pageY)))}t.$.dropDownContainer.style.height=t._resizeDetails.height+"px"}function d(){s=e.pageX-t._resizeDetails.x,t._resizeDetails.width=Math.min(i.clientWidth-a.left-6,Math.max(0,t._resizeDetails.width+s)),t.$.dropDownContainer.style.width=t._resizeDetails.width+"px",t._resizeDetails.x=Math.max(a.left+i.scrollLeft-t._resizeDetails.offsetXR,Math.min(i.clientWidth+i.scrollLeft-1.5*t._resizeDetails.offsetXR,e.pageX))}switch(t.resizeMode){case"vertical":l();break;case"horizontal":d();break;case"both":d(),l()}}_documentUpHandler(e){const t=this;if(t.$.actionButton.removeAttribute("active"),t._resizeDetails&&t._resizeDetails.started)return t._resizeDetails.started=t._resizeDetails.resizeEventFired=!1,t.removeAttribute("resizing"),t._preventDropDownClose=!1,t.focus(),void t.$.fireEvent("resizeEnd",{position:{left:e.pageX,top:e.pageY}});if(t.disabled||t._isDropDownClicked||t.readonly)return void delete t._isDropDownClicked;if(t._overlayDown)return t.close(),void delete t._overlayDown;let n=e.originalEvent.target,i=n.closest?n.closest("smart-drop-down-list"):void 0;if((t.enableShadowDOM||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0],i=n.getRootNode().host),t._preventsSelectStart=!1,void 0===n||n===t.$.resizeBar)return;if("tokens"===t.selectionDisplayMode&&n.classList.contains("smart-drop-down-list-selection-label")&&i===t){"none"!==t.dropDownOpenMode&&t.open();let o=t.$.listBox._items.filter(s=>s[t.inputMember].toString()===n.textContent)[0];return t.$.listBox._scrollView.scrollTop=o.offsetTop,void t._focus(o)}if("tokens"===t.selectionDisplayMode&&n.classList.contains("smart-drop-down-list-unselect-button")&&i===t)return 1===t.selectedIndexes.length&&["zeroOrMany","zeroOrOne","checkBox"].indexOf(t.selectionMode)<0?void 0:void t.unselect(t.$.listBox._items.filter(o=>o[t.inputMember].toString()===n.previousElementSibling.textContent)[0]);const a=n.closest(".smart-action-button");let r;if(t._buttonClicked&&("dropDownButton"===t.dropDownOpenMode&&a&&t._buttonClicked===t.$.actionButton?t.$.fireEvent("actionButtonClick"):n.closest(".smart-drop-down-button")!==t._buttonClicked&&a!==t._buttonClicked||(r=!0,t.$.fireEvent("dropDownButtonClick"))),t._buttonClicked=void 0,a===t.$.actionButton||n.closest(".smart-drop-down-button")===t.$.dropDownButton)return"dropDownButton"===t.dropDownOpenMode&&a===t.$.actionButton?void t.close():void(t.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==t.dropDownOpenMode&&r&&"pointercancel"!==e.originalEvent.type?t.open():t.close());n=t._getUpEventTarget(n),void 0!==n&&("dropDownContainer"!==n&&"item"!==n||"item"===n&&"checkBox"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0)&&t.close()}_dragStartHandler(e){this._resizeDetails&&this._resizeDetails.started&&e.preventDefault()}_dropDownTransitionendHandler(){const e=this;e._edgeMacFF&&!e.opened&&e.hasAnimation&&(e.$.dropDownContainer.style.top=e.$.dropDownContainer.style.left="",e.$dropDownContainer.addClass("not-in-view"))}_focus(e){this.$.listBox._focus(e)}_blurEventHandler(){const e=this;e.$.dropDownButton&&(e.removeAttribute("focus"),e.$.dropDownButton.removeAttribute("focus")),e.$.actionButton&&(e.removeAttribute("focus"),e.$.actionButton.removeAttribute("focus")),e.nodeName&&"smart-drop-down-list"===e.nodeName.toLowerCase()&&!e._preventDropDownClose&&e.close()}_focusEventHandler(){const e=this;e.$.dropDownButton&&(e.setAttribute("focus",""),e.$.dropDownButton.setAttribute("focus","")),e.$.actionButton&&(e.setAttribute("focus",""),e.$.actionButton.setAttribute("focus","")),e.removeAttribute("drop-down-button-focus"),e.removeAttribute("action-button-focus")}_buttonsFocusHandler(e){const t=this;e.target===t.$.dropDownButton?"focus"===e.type?t.setAttribute("drop-down-button-focus",""):(t.removeAttribute("drop-down-button-focus"),t.nodeName&&"smart-drop-down-list"===t.nodeName.toLowerCase()&&!t._preventDropDownClose&&t.close()):"focus"===e.type?t.setAttribute("action-button-focus",""):t.removeAttribute("action-button-focus")}_getUpEventTarget(e){const t=this;let n=e;for(n=void 0===n.parentElement?n.getRootNode().host:n.parentElement;n;){if(n===t.$.dropDownContainer){n="dropDownContainer";break}n=void 0===n.parentElement?n.getRootNode().host:n.parentElement}return n}_keyDownHandler(e){const t=this,n=t.enableShadowDOM&&t.shadowRoot.activeElement||document.activeElement,i=t.enableShadowDOM?e.composedPath()[0]:e.target;if(!(t.$.listBox&&i===t.$.listBox.$.filterInput||n!==t&&n!==t.$.dropDownButton&&n!==t.$.actionButton)||"Tab"===e.key)switch(e.key){case"Tab":if(t.filterable&&t.opened){const a=function(){for(let r=0;r<t.items.length;r++)if(!t.items[r].disabled)return t.items[r]};t.$.listBox.$.filterInput&&!Smart.Utilities.Core.isMobile&&document.activeElement!==t.$.listBox.$.filterInput?(t.$.listBox.$.filterInput.focus(),t._preventDropDownClose=!0):t.$.listBox&&(t.focus(),t._focus(t.selectedIndexes.length>0?t.items[t.selectedIndexes[0]]:a),t._preventDropDownClose=!0),e.preventDefault()}break;case"Enter":case" ":e.preventDefault(),i!==t.$.actionButton&&(t._keyPressed=!0,t.opened?(t._focusedItem&&t.select(t._focusedItem),("Enter"===e.key&&["none"].indexOf(t.selectionMode)<0||" "===e.key&&["none","zeroAndOne","one","radioButton"].indexOf(t.selectionMode)>-1)&&t.close()):t.opened||t.readonly||"none"===t.dropDownOpenMode||t.open()),"dropDownButton"===t.dropDownOpenMode&&i.setAttribute("active","");break;case"End":case"Home":case"PageUp":case"PageDown":case"ArrowUp":case"ArrowDown":if(t.readonly)return;if(e.altKey)return t._keyPressed=!1,void(t.$dropDownContainer.hasClass("smart-visibility-hidden")?t.open():t.close());e.preventDefault(),t.$.listBox._handleKeyStrokes(e.key);break;case"Escape":e.preventDefault(),t.close();break;default:if(t.readonly)return;"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!0),t.$.listBox._applyIncrementalSearch(e.key)}}_keyUpHandler(e){const t=this,n=t.enableShadowDOM?e.composedPath()[0]:e.target;t.$.listBox&&n===t.$.listBox.$.filterInput||("Enter"!==e.key&&" "!==e.key||(n.removeAttribute("active"),t.$dropDownContainer.hasClass("smart-visibility-hidden")||(t._keyPressed=!1)),t.$.listBox&&"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!1))}_listBoxChangeHandler(e){const t=this;if(e.target===t.$.listBox){if((t.dropDownAppendTo||t.enableShadowDOM)&&t.$.fireEvent("change",e.detail),"list"===t.autoComplete&&e.detail){const n=t.$.listBox._items[e.detail.index];t._lastSelectedItem=n&&n.selected?n:void 0}t._applySelection(t.selectionMode,e.detail),t._updateTargetValue()}else e.stopPropagation()}_listBoxItemClickHandler(e){const t=this;(t.dropDownAppendTo||t.enableShadowDOM)&&t.$.fireEvent(e.type,e.detail),"checkBox"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0&&t.close(),Smart.Utilities.Core.isMobile||t.focus(),delete t._isDropDownClicked}_listBoxKeyDownHandler(e){const t=this;if("Enter"===e.key)return t.close(),"dropDownButton"===t.dropDownOpenMode?t.$.dropDownButton.focus():t.focus(),void e.stopPropagation();"Escape"!==e.key||t.close()}_mouseEnterHandler(){const e=this;e._isElementHovered=!0,e.tagName.toLowerCase().indexOf("smart-drop-down-")>-1&&"auto"===e.dropDownOpenMode&&!e.disabled&&!e.readonly&&e.open()}_mouseLeaveHandler(){const e=this;e.removeAttribute("hover"),e._isElementHovered=!1,"auto"!==e.dropDownOpenMode||e.disabled||e.readonly||e._autoClose()}_mouseWheelHandler(e){const t=this;t.disabled||t.readonly||t.items&&0===t.items.length||t.$dropDownContainer&&!t.$dropDownContainer.hasClass("smart-visibility-hidden")||t.$.listBox&&(e.preventDefault(),t.$.listBox._handleKeyStrokes(e.deltaY>0?"ArrowDown":"ArrowUp"))}_autoClose(){const e=this;e._autoCloseTimeout=setTimeout(function(){e._isElementHovered||e.close(),clearTimeout(e._autoCloseTimeout)}.bind(e),e.autoCloseDelay)}_propertyValidator(e,t){return"number"!=typeof t&&"string"!=typeof t?e:t}_resizeHandler(){this.refresh()}refresh(){const e=this;"none"===e.resizeMode&&(e._calculateDropDownSize(),e._setDropDownSize())}_selectStartHandler(e){this._preventsSelectStart&&e.preventDefault()}_setAriaRelations(e){const t=this;let n,i;"dropDownButton"!==t.dropDownOpenMode?(n=t.$.dropDownButton,n.setAttribute("aria-hidden",!0),i=t,t.$.actionButton.removeAttribute("role")):(n=t,i=t.$.dropDownButton,i.removeAttribute("aria-hidden"),t.$.actionButton.setAttribute("role","button")),t._ariaButton=i,i.setAttribute("role","button"),i.setAttribute("aria-haspopup","listbox"),i.setAttribute("aria-owns",t.$.listBox.id),i.setAttribute("aria-describedby",t.$.hint.id),t.label?i.setAttribute("aria-labelledby",t.$.label.id):"DropDownList"===t.elementName&&i.setAttribute("aria-labelledby",t.$.actionButton.id),n.setAttribute("role","presentation"),n.removeAttribute("aria-owns"),e?i.setAttribute("aria-expanded",t.opened):(n.removeAttribute("aria-describedby"),n.removeAttribute("aria-expanded"),n.removeAttribute("aria-haspopup"),n.removeAttribute("aria-labelledby"))}_setDropDownSize(){const e=this,t=e.$.listBox;let n;if(e._dropDownSize||e._calculateDropDownSize(),["dropDownMinWidth","dropDownMaxWidth"].forEach(i=>{e.$.dropDownContainer.style[i.replace("dropDown","").replace(/^./,"m")]="initial"===e[i]?e.offsetWidth+"px":e[i]?parseFloat(e[i])+(e[i].toString().endsWith("%")?"%":"px"):null}),["dropDownMinHeight","dropDownMaxHeight"].forEach(i=>{e.$.dropDownContainer.style[i.replace("dropDown","").replace(/^./,"m")]=e[i]?parseFloat(e[i])+(e[i].toString().endsWith("%")?"%":"px"):null}),e.$.dropDownContainer.style.width=e.dropDownWidth?"auto"!==e.dropDownWidth?("initial"===e.dropDownWidth?e.offsetWidth:parseFloat(e.dropDownWidth))+"px":"auto":"auto"===e._dropDownSize.width?"auto":(parseFloat(e._dropDownSize.width)||0)+"px",e.dropDownHeight&&"auto"!==e.dropDownHeight)e.$.dropDownContainer.style.height=parseFloat(e.dropDownHeight)+((e.dropDownHeight+"").indexOf("%")>-1?"%":"px");else if(!e.$.listBox||"auto"!==e._dropDownSize.height&&"auto"!==e.dropDownHeight)e.$.dropDownContainer.style.height=e._dropDownSize.height;else{e.$.dropDownContainer.style.height="";let i=0;if(t.$.itemsContainer&&(i=2*parseInt(window.getComputedStyle(t.$.itemsContainer).getPropertyValue("--smart-list-item-vertical-offset"))),isNaN(i)&&(i=6),n=i,t.items&&t.items.length>0?t.items.map(a=>n+=a.height||a.offsetHeight):n=t.$.placeholder?t.$.placeholder.offsetHeight:200,e.filterable){const a=t.$.filterInputContainer;n+=a.offsetHeight+a.offsetTop}n=n+e._dropDownSize.paddingWidth+e._dropDownSize.borderWidth,e.$.dropDownContainer.style.height=n+"px"}if(t){if(void 0===n||!t.$)return void t._refreshLayout();const a=Math.max(0,e._dropDownSize.minHeight-(n-(t.$.horizontalScrollBar?t.$.horizontalScrollBar.offsetHeight:0)));a&&(e.$.dropDownContainer.style.height=n+a+"px"),!e.opened&&e.virtualized&&t.refresh()}}_styleChangedHandler(e){const t=this;if(t.dropDownAppendTo){const n=e.detail.styleProperties,i=["font-size","font-family","font-style","font-weight"];for(let a=0;a<i.length;a++)n[i[a]]&&(t.$.dropDownContainer.style[i[a]]=n[i[a]].value)}"auto"===t._dropDownSize.height&&t._setDropDownSize()}_validateTemplate(e){const t=this;if(e&&"function"!=typeof e)if("content"in document.createElement("template")){if(e instanceof HTMLTemplateElement||(e=document.getElementById(e)),null!==e&&"content"in e)return e;t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"tokenTemplate"}))}else t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}))}})},6321:()=>{!function(){const e="13.2.0",t=[];let n="Smart";if(window[n]&&window[n].Version){if(window[n].Version===e)return;if(window[n].Version!==e)n+=e;else{let k=2;for(;window[n];)n+=k.toString(),k++}}const i=navigator.userAgent.indexOf("Edge")>-1&&navigator.appVersion.indexOf("Edge")>-1;document.elementsFromPoint||(document.elementsFromPoint=document.msElementsFromPoint);class a{static isBoolean(h){return"boolean"==typeof h}static isFunction(h){return!!(h&&h.constructor&&h.call&&h.apply)}static isArray(h){return Array.isArray(h)}static isObject(h){return h&&("object"==typeof h||this.isFunction(h))||!1}static isDate(h){return h instanceof Date}static isString(h){return"string"==typeof h}static isNumber(h){return"number"==typeof h}static getType(h){const g=this,D=["Boolean","Number","String","Function","Array","Date","Object"].find(x=>{if(g["is"+x](h))return x});return D?D.toLowerCase():void 0}}class r{static animate(h,g,D,x){const p=h;if(!p||p instanceof HTMLElement==0)return;if(0===p.getElementsByClassName("smart-ripple").length){const ie=document.createElement("span");ie.classList.add("smart-ripple"),ie.setAttribute("role","presentation");let ve=!0,ce=null;if(window[n].EnableShadowDOM&&p.enableShadowDOM&&!0!==p.isInShadowDOM){for(let he=0;he<p.shadowRoot.host.shadowRoot.children.length;he++)"link"!==p.shadowRoot.host.shadowRoot.children[he].tagName.toLowerCase()&&(ce=p.shadowRoot.host.shadowRoot.children[he]);p.shadowRoot.host.shadowRoot.querySelector(".smart-ripple")&&(ve=!1)}else ce=p.firstElementChild;ve&&(ce&&!ce.noRipple&&ce.offsetHeight>0?ce.appendChild(ie):p.appendChild(ie))}let E=null;if(E=window[n].EnableShadowDOM&&p.shadowRoot?p.shadowRoot.host.shadowRoot.querySelector(".smart-ripple"):p.getElementsByClassName("smart-ripple")[0],!E)return;E.innerHTML="",E.classList.remove("smart-animate"),E.style.height=E.style.width=Math.max(p.offsetHeight,p.offsetWidth)+"px";const $=window.getComputedStyle(E.parentElement),N=parseInt($.borderLeftWidth)||0,U=parseInt($.borderTopWidth)||0,K=p.getBoundingClientRect(),ne=g-(K.left+window.pageXOffset)-E.offsetWidth/2-N,te=D-(K.top+window.pageYOffset)-E.offsetHeight/2-U;E.style.left=ne+"px",E.style.top=te+"px",E.classList.add("smart-animate"),E.addEventListener("animationend",function ie(){E.parentElement&&E.parentElement.removeChild(E),x&&x(),E.removeEventListener("animationend",ie),E.removeEventListener("animationcancel",ie)}),E.addEventListener("animationcancel",function ie(){E.parentElement&&E.parentElement.removeChild(E),x&&x(),E.removeEventListener("animationcancel",ie),E.removeEventListener("animationend",ie)})}}class o{static easeInQuad(h,g,D,x){return D*(h/=x)*h+g}static easeOutQuad(h,g,D,x){return-D*(h/=x)*(h-2)+g}static easeInOutQuad(h,g,D,x){return(h/=x/2)<1?D/2*h*h+g:-D/2*(--h*(h-2)-1)+g}static easeInCubic(h,g,D,x){return D*(h/=x)*h*h+g}static easeOutCubic(h,g,D,x){return D*((h=h/x-1)*h*h+1)+g}static easeInOutCubic(h,g,D,x){return(h/=x/2)<1?D/2*h*h*h+g:D/2*((h-=2)*h*h+2)+g}static easeInQuart(h,g,D,x){return D*(h/=x)*h*h*h+g}static easeOutQuart(h,g,D,x){return-D*((h=h/x-1)*h*h*h-1)+g}static easeInOutQuart(h,g,D,x){return(h/=x/2)<1?D/2*h*h*h*h+g:-D/2*((h-=2)*h*h*h-2)+g}static easeInQuint(h,g,D,x){return D*(h/=x)*h*h*h*h+g}static easeOutQuint(h,g,D,x){return D*((h=h/x-1)*h*h*h*h+1)+g}static easeInOutQuint(h,g,D,x){return(h/=x/2)<1?D/2*h*h*h*h*h+g:D/2*((h-=2)*h*h*h*h+2)+g}static easeInSine(h,g,D,x){return-D*Math.cos(h/x*(Math.PI/2))+D+g}static easeOutSine(h,g,D,x){return D*Math.sin(h/x*(Math.PI/2))+g}static easeInOutSine(h,g,D,x){return-D/2*(Math.cos(Math.PI*h/x)-1)+g}static easeInExpo(h,g,D,x){return 0===h?g:D*Math.pow(2,10*(h/x-1))+g}static easeOutExpo(h,g,D,x){return h===x?g+D:D*(1-Math.pow(2,-10*h/x))+g}static easeInOutExpo(h,g,D,x){return 0===h?g:h===x?g+D:(h/=x/2)<1?D/2*Math.pow(2,10*(h-1))+g:D/2*(2-Math.pow(2,-10*--h))+g}static easeInCirc(h,g,D,x){return-D*(Math.sqrt(1-(h/=x)*h)-1)+g}static easeOutCirc(h,g,D,x){return D*Math.sqrt(1-(h=h/x-1)*h)+g}static easeInOutCirc(h,g,D,x){return(h/=x/2)<1?-D/2*(Math.sqrt(1-h*h)-1)+g:D/2*(Math.sqrt(1-(h-=2)*h)+1)+g}static easeInElastic(h,g,D,x){let p=1.70158,E=0,$=D;return 0===h?g:1==(h/=x)?g+D:(E||(E=.3*x),$<Math.abs(D)?($=D,p=E/4):p=E/(2*Math.PI)*Math.asin(D/$),-$*Math.pow(2,10*(h-=1))*Math.sin((h*x-p)*(2*Math.PI)/E)+g)}static easeOutElastic(h,g,D,x){let p=1.70158,E=0,$=D;return 0===h?g:1==(h/=x)?g+D:(E||(E=.3*x),$<Math.abs(D)?($=D,p=E/4):p=E/(2*Math.PI)*Math.asin(D/$),$*Math.pow(2,-10*h)*Math.sin((h*x-p)*(2*Math.PI)/E)+D+g)}static easeInOutElastic(h,g,D,x){let p=1.70158,E=0,$=D;return 0===h?g:2==(h/=x/2)?g+D:(E||(E=.44999999999999996*x),$<Math.abs(D)?($=D,p=E/4):p=E/(2*Math.PI)*Math.asin(D/$),h<1?$*Math.pow(2,10*(h-=1))*Math.sin((h*x-p)*(2*Math.PI)/E)*-.5+g:$*Math.pow(2,-10*(h-=1))*Math.sin((h*x-p)*(2*Math.PI)/E)*.5+D+g)}static easeInBack(h,g,D,x,p){return void 0===p&&(p=1.70158),D*(h/=x)*h*((p+1)*h-p)+g}static easeOutBack(h,g,D,x,p){return void 0===p&&(p=1.70158),D*((h=h/x-1)*h*((p+1)*h+p)+1)+g}static easeInOutBack(h,g,D,x,p){return void 0===p&&(p=1.70158),(h/=x/2)<1?D/2*(h*h*((1+(p*=1.525))*h-p))+g:D/2*((h-=2)*h*((1+(p*=1.525))*h+p)+2)+g}static easeInBounce(h,g,D,x){return D-this.easeOutBounce(x-h,0,D,x)+g}static easeOutBounce(h,g,D,x){return(h/=x)<.36363636363636365?D*(7.5625*h*h)+g:h<.7272727272727273?D*(7.5625*(h-=.5454545454545454)*h+.75)+g:h<.9090909090909091?D*(7.5625*(h-=.8181818181818182)*h+.9375)+g:D*(7.5625*(h-=.9545454545454546)*h+.984375)+g}static easeInOutBounce(h,g,D,x){return h<x/2?.5*this.easeInBounce(2*h,0,D,x)+g:.5*this.easeOutBounce(2*h-x,0,D,x)+.5*D+g}}class s{static get isMobile(){return/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase())||["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}static get Browser(){let h;const g=function(x){let p=x.indexOf(h);if(-1===p)return;const E=x.indexOf("rv:");return parseFloat(x.substring("Trident"===h&&-1!==E?E+3:p+h.length+1))};let D={};return D[function(){const x=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}];for(let p=0;p<x.length;p++)if(h=x[p].subString,-1!==x[p].string.indexOf(x[p].subString))return x[p].identity;return"Other"}()]=!0,D.version=g(navigator.userAgent)||g(navigator.appVersion)||"Unknown",D}static toCamelCase(h){return h.replace(/-([a-z])/g,function(g){return g[1].toUpperCase()})}static toDash(h){return h.split(/(?=[A-Z])/).join("-").toLowerCase()}static unescapeHTML(h){return(new DOMParser).parseFromString(h,"text/html").documentElement.textContent}static escapeHTML(h){const g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(h).replace(/[&<>"'`=\/]/g,D=>g[D])}static sanitizeHTML(h){if(h&&(h.indexOf("onclick")>=0||h.indexOf("onload")>=0||h.indexOf("onerror")>=0))return this.escapeHTML(h);const g=new RegExp("<s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)[^>]*>(.*?)<s*/s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)>","ig");return String(h).replace(g,D=>this.escapeHTML(D))}static createGUID(){function h(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return h()+h()+"-"+h()+"-"+h()+"-"+h()+"-"+h()+h()+h()}static getScriptLocation(){return"./"!==window[n].BaseUrl?window[n].BaseUrl:function(){if(document.currentScript){let p=document.currentScript.src,E=p.lastIndexOf("/");return p=p.substring(0,E),p}const h=new Error;let g="(",D=")";if(Smart.Utilities.Core.Browser.Safari&&(g="@",D="\n"),h.fileName)return h.fileName.replace("/smart.element.js","");let x=h.stack.split(g);return x=x[1],x=x.split(D)[0],x=x.split(":"),x.splice(-2,2),x=x.join(":"),x.replace("/smart.element.js","")}()}static CSSVariablesSupport(){return window.CSS&&window.CSS.supports&&window.CSS.supports("(--fake-var: 0)")}static assign(h,g){const D=p=>p&&"object"==typeof p&&!Array.isArray(p)&&null!==p;let x=Object.assign({},h);return D(h)&&D(g)&&Object.keys(g).forEach(p=>{D(g[p])?p in h?x[p]=this.assign(h[p],g[p]):Object.assign(x,{[p]:g[p]}):Object.assign(x,{[p]:g[p]})}),x}static html(h,g){const D=this;let x="",p=h.childNodes;if(!g){for(let E,$=0,N=p.length;$<N&&(E=p[$]);$++){const U=["strong"];if(E instanceof HTMLElement||E.tagName&&U.indexOf(E.tagName.toLowerCase())>=0){const K=E.tagName.toLowerCase(),ne=E.attributes;let te="<"+K;for(let ie,ve=0;ie=ne[ve];ve++)te+=" "+ie.name+'="'+ie.value.replace(/[&\u00A0"]/g,v.Core.escapeHTML)+'"';te+=">",["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"][K]&&(x+=te),x=x+te+D.html(E)+"</"+K+">"}else{if(8===E.nodeType)continue;x+=E.textContent.replace(/[&\u00A0<>]/g,v.Core.escapeHTML)}}return x}h.innerHTML=g.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")}}let l=[];class d{static watch(h){switch(h.nodeName.toLowerCase()){case"smart-grid":case"smart-kanban":case"smart-table":case"smart-pivot-table":case"smart-scheduler":case"smart-tabs":case"smart-card-view":case"smart-list-box":case"smart-combo-box":case"smart-drop-down-list":case"smart-calendar":case"smart-gauge":case"smart-numeric-text-box":case"smart-menu":case"smart-tree":l.push(h);break;default:return}d.start()}static start(){d.isStarted||(d.isStarted=!0,d.interval&&clearInterval(d.interval),0===l.length||document.hidden?d.isStarted=!1:d.interval=setInterval(function(){d.observe()},100))}static stop(){d.isStarted=!1,d.interval&&clearInterval(d.interval)}static observeElement(h){const g=h;if("test"===window.Smart.Mode||document.hidden)return void(d.interval&&clearInterval(d.interval));let D=h._computedStyle||"resize"!==g.hasStyleObserver?document.defaultView.getComputedStyle(g,null):{},x=!0,p="resize"!==g.hasStyleObserver?["paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","display","visibility","font-size","font-family","font-style","font-weight","max-height","min-height","max-width","min-width","overflow","overflow-x","overflow-y"]:[];if(h.styleProperties&&(p=p.concat(h.styleProperties)),h.observableStyleProperties&&(p=h.observableStyleProperties),!g._styleInfo){g._styleInfo=[];for(let $=0;$<p.length;$++){const N=p[$],U=N.startsWith("--")?D.getPropertyValue(N):D[N];g._styleInfo[N]=U}return}if(h.isHidden||"none"!==D.display&&(0!==h.offsetWidth&&0!==h.offsetHeight||(h.isHidden=!0)),h.isHidden){if(h.visibilityChangedHandler(),h.isHidden)return;x=!1}let E=[];for(let $=0;$<p.length;$++){const N=p[$],U=N.startsWith("--")?D.getPropertyValue(N):D[N];g._styleInfo[N]!==U&&(E[N]={oldValue:g._styleInfo[N],value:U},E.length++),g._styleInfo[N]=U}E.length>0&&(g.$.fireEvent("styleChanged",{styleProperties:E},{bubbles:!1,cancelable:!0}),E.display&&x&&g.$.fireEvent("resize",g,{bubbles:!1,cancelable:!0}))}static observe(){for(let h=0;h<l.length;h++)this.observeElement(l[h])}static unwatch(h){d.stop();const g=l.indexOf(h);-1!==g&&l.splice(g,1),d.start()}}let c=[];const u=[],m=["resize","down","up","move","tap","taphold","swipeleft","swiperight","swipetop","swipebottom"];class y{constructor(h){const g=this;g.target=h,g.$target=new f(h),g.$document=h.$document?h.$document:new f(document),g.id=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase();let D={handlers:{},boundEventTypes:[],listen:g.listen.bind(g),unlisten:g.unlisten.bind(g)};return g.tapHoldDelay=750,g.swipeMin=10,g.swipeMax=5e3,g.swipeDelay=1e3,g.tapHoldDelay=750,g.inputEventProperties=["clientX","clientY","pageX","pageY","screenX","screenY"],m.forEach(x=>{D[x]=p=>{D.handlers[x]=p},g[x]=p=>{if(!D.handlers[p.type]){if(("mousemove"===p.type||"pointermove"===p.type||"touchmove"===p.type)&&D.handlers.move){const E=g.createEvent(p,"move");D.handlers.move(E)}return!0}return D.handlers[p.type](p)}}),g.listen(),g.handlers=D.handlers,D}listen(h){const g=this;if("resize"===h&&g.target!==document&&g.target!==window&&!1!==g.target.hasResizeObserver)if(Smart.Utilities.Core.Browser.Firefox){if(!g.target.resizeObserver){let D,x,p,E=!1,$=g.target.offsetWidth,N=g.target.offsetHeight;const U=new ResizeObserver(()=>{if(!E)return void(E=!0);const K=new CustomEvent("resize",{bubbles:!1,cancelable:!0});x=g.target.offsetWidth,p=g.target.offsetHeight,D=x!==$||p!==N,g.target.requiresLayout&&(D=!0),D&&(g.resize(K),g.target.requiresLayout=!1)});U.observe(g.target),g.target.resizeObserver=U}}else if(!g.target.resizeTrigger){const D=document.createElement("div");D.className="smart-resize-trigger-container",D.innerHTML='<div class="smart-resize-trigger-container"><div class="smart-resize-trigger"></div></div><div class="smart-resize-trigger-container"><div class="smart-resize-trigger-shrink"></div></div>',D.setAttribute("aria-hidden",!0),window[n].EnableShadowDOM&&g.target.shadowRoot?g.target.shadowRoot.appendChild(D):g.target.appendChild(D),g.target.resizeTrigger=D;const x=D.childNodes[0],p=x.childNodes[0],E=D.childNodes[1],$=function(){p.style.width="100000px",p.style.height="100000px",x.scrollLeft=1e5,x.scrollTop=1e5,E.scrollLeft=1e5,E.scrollTop=1e5};let N,U,K,ne,te=g.target.offsetWidth,ie=g.target.offsetHeight;if(0===te||0===ie){const ve=function(){$(),g.target.removeEventListener("resize",ve)};g.target.addEventListener("resize",ve),$()}else $();g.target.resizeHandler=function(){U||(U=requestAnimationFrame(function(){if(U=0,K=g.target.offsetWidth,ne=g.target.offsetHeight,N=K!==te||ne!==ie,g.target.requiresLayout&&(N=!0),!N)return;te=K,ie=ne;const ve=new CustomEvent("resize",{bubbles:!1,cancelable:!0});g.resize(ve),g.target.requiresLayout=!1})),$()},x.addEventListener("scroll",g.target.resizeHandler),E.addEventListener("scroll",g.target.resizeHandler)}g.isListening||(g.isListening=!0,g.isPressed=!1,g.isReleased=!1,g.isInBounds=!1,window.PointerEvent?(g.$target.listen("pointerdown.inputEvents"+g.id,g.pointerDown.bind(g)),g.$target.listen("pointerup.inputEvents"+g.id,g.pointerUp.bind(g)),g.$target.listen("pointermove.inputEvents"+g.id,g.pointerMove.bind(g)),g.$target.listen("pointercancel.inputEvents"+g.id,g.pointerCancel.bind(g))):("ontouchstart"in window&&(g.$target.listen("touchmove.inputEvents"+g.id,g.touchMove.bind(g)),g.$target.listen("touchstart.inputEvents"+g.id,g.touchStart.bind(g)),g.$target.listen("touchend.inputEvents"+g.id,g.touchEnd.bind(g)),g.$target.listen("touchcancel.inputEvents"+g.id,g.touchCancel.bind(g))),g.$target.listen("mousedown.inputEvents"+g.id,g.mouseDown.bind(g)),g.$target.listen("mouseup.inputEvents"+g.id,g.mouseUp.bind(g)),g.$target.listen("mousemove.inputEvents"+g.id,g.mouseMove.bind(g)),g.$target.listen("mouseleave.inputEvents"+g.id,g.mouseLeave.bind(g))),g.target._handleDocumentUp||(g.target._handleDocumentUp=g.handleDocumentUp.bind(g),g.target._handleDocumentUpId=g.id,g.$document.listen("mouseup.inputEvents"+g.target._handleDocumentUpId,g.target._handleDocumentUp)))}unlisten(h){const g=this;if(g.isListening=!1,window.PointerEvent?(g.$target.unlisten("pointerdown.inputEvents"+g.id),g.$target.unlisten("pointerup.inputEvents"+g.id),g.$target.unlisten("pointermove.inputEvents"+g.id),g.$target.unlisten("pointercancel.inputEvents"+g.id)):("ontouchstart"in window&&(g.$target.unlisten("touchstart.inputEvents"+g.id),g.$target.unlisten("touchmove.inputEvents"+g.id),g.$target.unlisten("touchend.inputEvents"+g.id),g.$target.unlisten("touchcancel.inputEvents"+g.id)),g.$target.unlisten("mousedown.inputEvents"+g.id),g.$target.unlisten("mouseup.inputEvents"+g.id),g.$target.unlisten("mousemove.inputEvents"+g.id),g.$target.unlisten("mouseleave.inputEvents"+g.id)),g.target._handleDocumentUp&&(g.$document.unlisten("mouseup.inputEvents"+g.target._handleDocumentUpId,g.target._handleDocumentUp),delete g.target._handleDocumentUp,delete g.target._handleDocumentUpId),"resize"===h)if(Smart.Utilities.Core.Browser.Firefox)g.target.resizeObserver&&(g.target.resizeObserver.unobserve(g.target),delete g.target.resizeObserver);else if(g.target.resizeTrigger){const D=g.target.resizeTrigger,p=D.childNodes[1];D.childNodes[0].removeEventListener("scroll",g.target.resizeHandler),p.removeEventListener("scroll",g.target.resizeHandler),g.target.resizeHandler=null,D.parentNode.removeChild(D),delete g.target.resizeTrigger}}handleDocumentUp(h){const g=this;g.isPressed=!1,g.isReleased=!1,g.resetSwipe(h)}createEvent(h,g){const D=this,x=h.touches,p=h.changedTouches,E=x&&x.length?x[0]:p&&p.length?p[0]:void 0,$=new CustomEvent(g,{bubbles:!0,cancelable:!0,composed:void 0!==D.$target.element.getRootNode().host});if($.originalEvent=h,E){for(let N=0;N<D.inputEventProperties.length;N++){const U=D.inputEventProperties[N];$[U]=E[U]}return $}for(let N in h)N in $||($[N]=h[N]);return $}fireTap(h){const g=this;if(clearTimeout(this.tapHoldTimeout),!this.tapHoldFired&&this.isInBounds){const D=g.createEvent(h,"tap");g.tap(D)}}initTap(h){const g=this;g.isInBounds=!0,g.tapHoldFired=!1,g.tapHoldTimeout=setTimeout(function(){if(g.isInBounds){g.tapHoldFired=!0;const D=g.createEvent(h,"taphold");g.taphold(D)}},g.tapHoldDelay)}pointerDown(h){return this.handleDown(h)}mouseDown(h){const g=this;if(!(g.isPressed||g.touchStartTime&&new Date-g.touchStartTime<500))return g.handleDown(h)}touchStart(h){const g=this;return g.touchStartTime=new Date,g.isTouchMoved=!0,g.handleDown(h)}mouseUp(h){const g=this;if(!(g.isReleased||g.touchEndTime&&new Date-g.touchEndTime<500))return g.handleUp(h)}handleDown(h){const g=this;g.isReleased=!1,g.isPressed=!0;const D=g.createEvent(h,"down");return(g.handlers.tap||g.handlers.taphold)&&g.initTap(D),(g.handlers.swipeleft||g.handlers.swiperight||g.handlers.swipetop||g.handlers.swipebottom)&&g.initSwipe(D),g.down(D)}handleUp(h){const g=this;g.isReleased=!0,g.isPressed=!1;const D=g.createEvent(h,"up"),x=g.up(D);return(g.handlers.tap||g.handlers.taphold)&&g.fireTap(D),g.resetSwipe(D),x}handleMove(h){const g=this;let D=g.move(h);return g.isPressed&&(g._maxSwipeVerticalDistance=Math.max(g._maxSwipeVerticalDistance,Math.abs(g._startY-h.pageY)),g._maxSwipeHorizontalDistance=Math.max(g._maxSwipeHorizontalDistance,Math.abs(g._startX-h.pageX)),D=g.handleSwipeEvents(h)),D}touchEnd(h){return this.touchEndTime=new Date,this.handleUp(h)}pointerUp(h){return this.handleUp(h)}pointerCancel(h){this.pointerUp(h)}touchCancel(h){this.touchEnd(h)}mouseLeave(){this.isInBounds=!1}mouseMove(h){if(!this.isTouchMoved)return this.handleMove(h)}pointerMove(h){return this.handleMove(h)}touchMove(h){const g=this,D=h.touches,x=h.changedTouches,p=D&&D.length?D[0]:x&&x.length?x[0]:void 0;for(let E=0;E<g.inputEventProperties.length;E++){const $=g.inputEventProperties[E];void 0===h[$]&&(h[$]=p[$])}return g.isTouchMoved=!0,g.handleMove(h)}handleSwipeEvents(h){const g=this;let D=!0;return(g.handlers.swipetop||g.handlers.swipebottom)&&(D=this.handleVerticalSwipeEvents(h)),!1===D||(g.handlers.swipeleft||g.handlers.swiperight)&&(D=this.handleHorizontalSwipeEvents(h)),D}handleVerticalSwipeEvents(h){let g,D;return g=h.pageY,D=g-this._startY,this.swiped(h,D,"vertical")}handleHorizontalSwipeEvents(h){let g,D;return g=h.pageX,D=g-this._startX,this.swiped(h,D,"horizontal")}swiped(h,g,D){const x=this;if(D=D||0,Math.abs(g)>=x.swipeMin&&!x._swipeEvent&&!x._swipeLocked){let p=g<0?"swipeleft":"swiperight";if("horizontal"===D?x._swipeEvent=x.createEvent(h,p):(p=g<0?"swipetop":"swipebottom",x._swipeEvent=x.createEvent(h,g<0?"swipetop":"swipebottom")),x[p]&&(x[p](this._swipeEvent),Math.abs(g)<=this.swipeMax))return h.stopImmediatePropagation(),!1}return!0}resetSwipe(){this._swipeEvent=null,clearTimeout(this._swipeTimeout)}initSwipe(h){const g=this;g._maxSwipeVerticalDistance=0,g._maxSwipeHorizontalDistance=0,g._startX=h.pageX,g._startY=h.pageY,g._swipeLocked=!1,g._swipeEvent=null,g._swipeTimeout=setTimeout(function(){g._swipeLocked=!0},g.swipeDelay)}}class b{get scrollWidth(){return this.horizontalScrollBar?this.horizontalScrollBar.max:-1}set scrollWidth(h){h<0&&(h=0),this.horizontalScrollBar&&(this.horizontalScrollBar.max=h)}get scrollHeight(){return this.verticalScrollBar?this.verticalScrollBar.max:-1}set scrollHeight(h){h<0&&(h=0),this.verticalScrollBar&&(this.verticalScrollBar.max=h)}get scrollLeft(){return this.horizontalScrollBar?this.horizontalScrollBar.value:-1}set scrollLeft(h){h<0&&(h=0),this.horizontalScrollBar&&(this.horizontalScrollBar.value=h)}get scrollTop(){return this.verticalScrollBar?this.verticalScrollBar.value:-1}set scrollTop(h){h<0&&(h=0),this.verticalScrollBar&&(this.verticalScrollBar.value=h)}get vScrollBar(){return this.verticalScrollBar}get hScrollBar(){return this.horizontalScrollBar}constructor(h,g,D){const x=this;x.container=h,x.horizontalScrollBar=g,x.verticalScrollBar=D,x.disableSwipeScroll=!1,x.listen()}listen(){const h=this,g=s.isMobile,D=h.horizontalScrollBar,x=h.verticalScrollBar;let p,E,$,N,U,K,ne,te;h.inputEvents=new y(h.container);const ie=function(we){return{amplitude:0,delta:0,initialValue:0,min:0,max:we.max,previousValue:0,pointerPosition:0,targetValue:0,scrollBar:we,value:0,velocity:0}},ve=ie(D),ce=ie(x),he=function(){const we=h.container.touchVelocityCoefficient||50;K=Date.now(),ne=K-N,N=K;const Se=function(_e){_e.delta=_e.value-_e.previousValue,_e.previousValue=_e.value,_e.velocity=we*_e.delta/(1+ne)*.8+.2*_e.velocity};Se(ce),Se(ve)},xe=function(we){return te.value=we>te.max?te.max:we<te.min?te.min:we,te.scrollBar.value=te.value,we>te.max?"max":we<te.min?"min":"value"};function Ie(){let we,Se;te.amplitude&&(h.container.$.fireEvent("kineticScroll"),we=Date.now()-N,Se=-te.amplitude*Math.exp(-we/500),Se>5||Se<-5?(xe(te.targetValue+Se),cancelAnimationFrame(E),E=0,E=requestAnimationFrame(Ie)):xe(te.targetValue))}let Ne;h.inputEvents.down(function(we){if(!g)return;const Se=we.originalEvent.target,_e=Se&&Se.closest?Se.closest("smart-scroll-bar"):void 0;if(_e===h.horizontalScrollBar||_e===h.verticalScrollBar)return;$=!0,p=!1;const De=function(ze,We){ze.amplitude=0,ze.pointerPosition=We,ze.previousValue=ze.value,ze.value=ze.scrollBar.value,ze.initialValue=ze.value,ze.max=ze.scrollBar.max};De(ce,we.clientY),De(ve,we.clientX),N=Date.now(),clearInterval(U),U=setInterval(he,500)}),h.inputEvents.up(function(){if(!$)return!0;if(clearInterval(U),h.disableSwipeScroll)return void($=!1);const we=function(Se){te=Se,Se.amplitude=.8*Se.velocity,Se.targetValue=Math.round(Se.value+Se.amplitude),N=Date.now(),cancelAnimationFrame(E),E=requestAnimationFrame(Ie),Se.velocity=0};ce.velocity>10||ce.velocity<-10?we(ce):(ve.velocity>10||ve.velocity<-10)&&we(ve),$=!1}),h.inputEvents.move(function(we){if(!$)return!0;if(h.disableSwipeScroll||(p&&(we.originalEvent.preventDefault(),we.originalEvent.stopPropagation()),ve.visible=h.scrollWidth>0,ce.visible=h.scrollHeight>0,!$||!ve.visible&&!ce.visible))return;const Se=h.container.touchScrollRatio,_e=h.container;let De,ze;Se&&("number"==typeof Se?(De=-Se,ze=-Se):"function"==typeof Se&&(De=Se(ce.max,_e.offsetHeight),ze=Se(ve.max,_e.offsetWidth))),ce.ratio=De||-ce.max/_e.offsetHeight,ce.delta=(we.clientY-ce.pointerPosition)*ce.ratio,ve.ratio=ze||-ve.max/_e.offsetWidth,ve.delta=(we.clientX-ve.pointerPosition)*ve.ratio;let We="value";const Ue=function(me,Ke,Be){return me.delta>5||me.delta<-5?(te=me,We=me.initialValue+me.delta>te.max?"max":me.initialValue+me.delta<te.min?"min":"value","min"===We&&0===me.initialValue||"max"===We&&me.initialValue===me.max||!me.visible||(h.container.$.fireEvent("kineticScroll"),xe(me.initialValue+me.delta),he(),Be.originalEvent.preventDefault(),Be.originalEvent.stopPropagation(),p=!0,!1)):null};let Ye=Ue(ce,0,we);if(null!==Ye)return Ye;{let me=Ue(ve,0,we);if(null!==me)return me}}),h.scrollTo=function(we,Se){const _e=!1===Se?ve:ce;let De=!1;N||(N=Date.now()),Ne||(Ne=Date.now()),Math.abs(Date.now()-Ne)>375?N=Date.now():De=!0,Ne=Date.now(),_e.value=_e.scrollBar.value,_e.delta=we-_e.value,_e.max=_e.scrollBar.max,we<=_e.min&&(we=_e.min),we>=_e.max&&(we=_e.max),_e.targetValue=we;const ze=we;let We=_e.value;_e.velocity=100*_e.delta/(1+_e.max),_e.from=We;const Ue=function(me){return _e.value=me>_e.max?_e.max:me<_e.min?_e.min:me,_e.scrollBar.value=_e.value,me>_e.max?"max":me<_e.min?"min":"value"},Ye=function(){let me,Ke=Date.now()-Ne,Be=Math.min(1e3,Date.now()-N),Ae=_e.velocity*Math.exp(Be/175);if(De)(Ae<0&&_e.value<=we||Ae>0&&_e.value>=we)&&(Ae=0),(_e.value+Ae<=_e.min||_e.value+Ae>=_e.max)&&(Ae=0),Ae>.5||Ae<-.5?(Ue(_e.value+Ae),cancelAnimationFrame(E),E=0,E=requestAnimationFrame(Ye)):Ue(_e.targetValue);else{if(Ke>=175)return cancelAnimationFrame(E),h.container.$.fireEvent("kineticScroll"),void(E=0);me=v.Animation.Easings.easeInSine(Ke,We,ze-We,175),Ue(me),cancelAnimationFrame(E),E=0,E=requestAnimationFrame(Ye)}};cancelAnimationFrame(E),E=requestAnimationFrame(Ye)},h.inputEvents.listen()}unlisten(){const h=this;h.inputEvents&&h.inputEvents.unlisten(),delete h.inputEvents}}class f{constructor(h){this.events={},this.handlers={},this.element=h}hasClass(h){const g=this,D=h.split(" ");for(let x=0;x<D.length;x++)if(!g.element.classList.contains(D[x]))return!1;return!0}addClass(h){const g=this;if(g.hasClass(h))return;const D=h.split(" ");for(let x=0;x<D.length;x++)g.element.classList.add(D[x]);g.isNativeElement||d.observeElement(g.element)}removeClass(h){const g=this;if(0===arguments.length)return void g.element.removeAttribute("class");const D=h.split(" ");for(let x=0;x<D.length;x++)g.element.classList.remove(D[x]);""===g.element.className&&g.element.removeAttribute("class"),g.isNativeElement||d.observeElement(g.element)}get isCustomElement(){const h=this;return!!h.element.tagName.startsWith(n)||h.element instanceof window[n].BaseElement==1||"DIV"!==h.element.tagName&&"SPAN"!==h.element.tagName&&"BUTTON"!==h.element.tagName&&"INPUT"!==h.element.tagName&&"UL"!==h.element.tagName&&"LI"!==h.element.tagName&&document.createElement(h.element.nodeName)instanceof window[n].BaseElement==1}get isNativeElement(){return!this.isCustomElement}dispatch(h){const g=this,D=g.events[h.type];let x=!1;if(D.length>1)for(let p=0;p<D.length;p++){const E=D[p];if(E.namespace&&E.namespace.indexOf("_")>=0){x=!0;break}}x&&D.sort(function(p,E){let $=p.namespace,N=E.namespace;return $=-1===$.indexOf("_")?0:parseInt($.substring($.indexOf("_")+1)),N=-1===N.indexOf("_")?0:parseInt(N.substring(N.indexOf("_")+1)),$<N?-1:$>N?1:0});for(let p=0;p<D.length;p++){const E=D[p];if(h.namespace=E.namespace,h.context=E.context,h.defaultPrevented)break;const $=E.handler.apply(g.element,[h]);if(void 0!==$&&(h.result=$,!1===$)){h.preventDefault(),h.stopPropagation();break}}return h.result}fireEvent(h,g,D){D||(D={bubbles:!0,cancelable:!0,composed:null!==this.element.getRootNode().host}),D.detail=g||{};const p=new CustomEvent(h,D);return p.originalStopPropagation=p.stopPropagation,p.stopPropagation=function(){return p.isPropagationStopped=!0,p.originalStopPropagation()},this.dispatchEvent(p),p}get isPassiveSupported(){const h=this;if(void 0!==h.supportsPassive)return h.supportsPassive;h.supportsPassive=!1;try{let g=Object.defineProperty({},"passive",{get:function(){h.supportsPassive=!0}});window.addEventListener("testPassive",null,g),window.removeEventListener("testPassive",null,g)}catch{}return h.supportsPassive}dispatchEvent(h){const g=this,D=h.type,x=g.element.context,p=D.substring(0,1).toUpperCase()+D.substring(1);g.element.context=document,g.element["on"+p]?g.element["on"+p](h):g.element["on"+D.toLowerCase()]?g.element["on"+D.toLowerCase()](h):g.element.dispatchEvent(h),g.element.context=x}listen(h,g){const D=this,x=h.split("."),p=x.slice(1).join("."),E=x[0];D.events[E]||(D.events[E]=[]);const $={type:E,handler:g,context:D.element,namespace:p};m.indexOf(E)>=0&&(D.inputEvents||(D.inputEvents=new y(D.element)),D.inputEvents[E](function(N){D.dispatchEvent(N)}),D.inputEvents.boundEventTypes.push(E),D.inputEvents.listen(E)),0===D.events[E].length&&(D.handlers[E]=D.dispatch.bind(D),"wheel"===E?D.element.addEventListener("wheel",D.handlers[E],!!D.isPassiveSupported&&{passive:!1}):D.element.addEventListener(E,D.handlers[E],("touchmove"===E||"touchstart"===E||"touchend"===E)&&!!D.isPassiveSupported&&{passive:!1})),D.events[E].push($)}unlisten(h){const g=this,D=h.split("."),x=D.slice(1).join("."),p=D[0];let E=g.events[p];if(g.inputEvents&&g.inputEvents.boundEventTypes.indexOf(p)>=0&&(g.inputEvents.boundEventTypes.splice(g.inputEvents.boundEventTypes.indexOf(p),1),0===g.inputEvents.boundEventTypes.length&&g.inputEvents.unlisten(p)),E){for(let $=0;$<E.length;$++){if(""!==x){let N=E.findIndex(U=>U.namespace===x);E.splice(N,1);break}E=[]}0===E.length&&(g.element.removeEventListener(p,g.handlers[p]),g.events[p]=[],delete g.handlers[p])}}getAttributeValue(h,g){const D=this,x=D.element.getAttribute(h);if(D.isNativeElement)return D.deserialize(x,g);const p=D.element.propertyByAttributeName[h];return void 0===p.deserialize?D.deserialize(x,g,p.nullable):D.element[p.deserialize](x)}setAttributeValue(h,g,D){const x=this;let p,E=!1;if(x.isNativeElement){if(p=x.serialize(g,D),"boolean"===D&&["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(h)>=0)return void(g?x.element.setAttribute(h,""):x.element.removeAttribute(h))}else{const $=x.element.propertyByAttributeName[h];E=!$||$.nullable,p=$&&$.serialize?x.element[$.serialize](g):x.serialize(g,D,E)}"array"!==D&&"object"!==D||"[]"!==p&&"{}"!==p?void 0===p?(x.element.removeAttribute(h),x.element.shadowRoot&&x.element.$.root&&x.element.$.root.removeAttribute(h)):(x.element.setAttribute(h,p),x.element.shadowRoot&&x.element.$.root&&x.element.$.root.setAttribute(h,p)):x.element.removeAttribute(h)}serialize(h,g,D){if(void 0===g&&(g=v.Types.getType(h)),void 0!==h&&(D||null!==h)){if(D&&null===h)return"null";if("string"===g)return h;if("boolean"===g||"bool"===g){if(!0===h||"true"===h||1===h||"1"===h)return"";if(!1===h||"false"===h||0===h||"0"===h)return}return"array"===g?JSON.stringify(h):["string","number","int","integer","float","date","any","function"].indexOf(g)>=0?h.toString():"object"===g?JSON.stringify(h):void 0}}deserialize(h,g,D){const x="null"===h;if(void 0!==h&&(!x||D)){if(x&&D)return null;if("boolean"===g||"bool"===g)return null!==h;if("number"===g||"float"===g)return"NaN"===h?NaN:"Infinity"===h?1/0:"-Infinity"===h?-1/0:parseFloat(h);if("int"===g||"integer"===g)return"NaN"===h?NaN:"Infinity"===h?1/0:"-Infinity"===h?-1/0:parseInt(h);if("string"===g||"any"===g)return h;if("date"===g)return new Date(h);if("function"===g){if("function"==typeof window[h])return window[h]}else if("array"===g||"object"===g)try{const p=JSON.parse(h);if(p)return p}catch{if(window[h]&&"object"==typeof window[h])return window[h];if("array"===g&&h.indexOf("[")>=0){if(h.indexOf("{")>=0){let E=h.replace(/{/gi,"").replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim();E=E.split("},");for(let $=0;$<E.length;$++){let N={},U=E[$].trim().split(",");for(let K=0;K<U.length;K++){const ne=U[K].split(":")[0].trim(),te=U[K].split(":")[1].trim();N[ne]=te}E[$]=N}return E}return h.replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim().split(",")}}}}}class w{static get Ripple(){return r}static get Easings(){return o}}class v{static get Types(){return a}static get Core(){return s}static get Animation(){return w}static get Scroll(){return b}static get InputEvents(){return y}static Extend(h){return new f(h)}static Assign(h,g){if(h.indexOf(".")>=0){const D=h.split(".");return v[D[0]]||(v[D[0]]={}),void(v[D[0]][D[1]]=g)}v[h]=g}}const S=v.Extend(document);let _=null;document.addEventListener("click",()=>{d.start(),_&&clearTimeout(_),_=setTimeout(()=>{d.stop()},1e4)}),document.addEventListener("mouseenter",()=>{d.start()}),document.addEventListener("mouseleave",()=>{d.stop()});let T=(()=>{class k{}return k.cache={},k})();class z extends HTMLElement{static get properties(){return{animation:{value:"advanced",type:"string",allowedValues:["none","simple","advanced"]},unfocusable:{value:!1,type:"boolean"},disabled:{value:!1,type:"boolean"},dataContext:{value:null,reflectToAttribute:!1,type:"any"},debugMode:{value:!0,type:"boolean",reflectToAttribute:!1},locale:{value:"en",type:"string",reflectToAttribute:!1},localizeFormatFunction:{value:null,type:"any",reflectToAttribute:!1},messages:{value:{en:{propertyUnknownName:"Invalid property name: '{{name}}'!",propertyUnknownType:"'{{name}}' property is with undefined 'type' member!",propertyInvalidValue:"Invalid '{{name}}' property value! Actual value: '{{actualValue}}', Expected value: '{{value}}'!",propertyInvalidValueType:"Invalid '{{name}}' property value type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",methodInvalidValueType:"Invalid '{{name}}' method argument value type! Actual type: '{{actualType}}', Expected type: '{{type}}' for argument with index: '{{argumentIndex}}'!",methodInvalidArgumentsCount:"Invalid '{{name}}' method arguments count! Actual arguments count: '{{actualArgumentsCount}}', Expected at least: '{{argumentsCount}}' argument(s)!",methodInvalidReturnType:"Invalid '{{name}}' method return type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",elementNotInDOM:"Element does not exist in DOM! Please, add the element to the DOM, before invoking a method.",moduleUndefined:"Module is undefined.",missingReference:"{{elementType}}: Missing reference to '{{files}}'.",htmlTemplateNotSuported:"{{elementType}}: Web Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: '{{property}}' property accepts a string that must match the id of an HTMLTemplate element from the DOM."}},reflectToAttribute:!1,inherit:!0,type:"object"},props:{value:null,reflectToAttribute:!1,isHierarchicalProperty:!0,type:"any"},readonly:{value:!1,type:"boolean"},renderMode:{value:"auto",type:"string",reflectToAttribute:!1,allowedValues:["auto","manual"]},rightToLeft:{value:!1,type:"boolean"},rethrowError:{value:!0,type:"boolean",reflectToAttribute:!1},theme:{value:window[n].Theme,type:"string"},visibility:{value:"visible",allowedValues:["visible","collapsed","hidden"],type:"string"},wait:{value:!1,type:"boolean"}}}getBindings(h,g){const D=this;let x=0,p={},E=($=>{if($ instanceof HTMLElement)return D.parseAttributes($);{let N=D.parseProperty($.data?$.data.trim():null,"textContent",$);if(N)return D&&$.parentNode===D.$.content&&(N.value=""!==D.$.html?D.$.html:void 0,D.innerHTML=""),{textContent:N}}})(h);E&&(p.data=E),g||(p.mapping=[],g=p),h.getAttribute&&(p.nodeId=h.getAttribute("smart-id"),g&&E&&(g.mapping[p.nodeId]=E)),p.node=h,h.firstChild&&(p.children={});for(let $=h.firstChild;$;$=$.nextSibling)p.children[x++]=D.getBindings($,g);return p}_addRemovePropertyBinding(h,g,D,x,p){if(!h||!g||!D)return;const E=this,$=E.bindings,N=D.getAttribute("smart-id"),U=h.indexOf("{{")>=0;let K=!1;(h=h.replace("{{","").replace("}}","").replace("[[","").replace("]]","")).indexOf("!")>=0&&(h=h.replace("!",""),K=!0);const ne=E._properties[h],te={name:h,reflectToAttribute:ne.reflectToAttribute,twoWay:U,type:ne.type,not:K};if(p&&!x){const ve={};ve[h]={name:h,targetPropertyName:g,reflectToAttribute:ne.reflectToAttribute,twoWay:U,type:ne.type,not:K},$.mapping[N]=ve}const ie=function(ve){for(let ce in ve){const he=ve[ce];if(he.nodeId===N){he.data||(he.data={}),x?(he.data[g]=null,delete he.data[g]):he.data[g]=te;break}if(he.children)ie(he.children);else if(he.node&&he.node.children&&he.node===D.parentElement){const xe=he.node;if(!xe.firstChild)continue;he.children={};let Ie=0;for(let Ne=xe.firstChild;Ne;Ne=Ne.nextSibling)he.children[Ie++]=E.getBindings(Ne);ie(he.children)}}};ie($.children),x?delete E.boundProperties[h]:E.boundProperties[h]=!0,E.updateBoundNodes(h)}addPropertyBinding(h,g,D,x){this._addRemovePropertyBinding(h,g,D,!1,x)}removePropertyBinding(h,g,D,x){this._addRemovePropertyBinding(h,g,D,!0,x)}parseAttributes(h){const g=this;let D;for(let x=0;x<h.attributes.length;x++){const p=h.attributes[x],E=p.name,$=p.value;T.cache["toCamelCase"+E]||(T.cache["toCamelCase"+E]=v.Core.toCamelCase(E));const N=T.cache["toCamelCase"+E];if(E.indexOf("(")>=0){let K=E.substring(1,E.length-1);if(g&&!g.dataContext){g.templateListeners[h.getAttribute("smart-id")+"."+K]=$,h.removeAttribute(E);continue}{D||(D={});const ne=$.substring(0,$.indexOf("("));D[N]={isEvent:!0,name:K,value:ne};continue}}let U=g.parseProperty($,E,h);U&&(D||(D={}),D[N]=U)}return D}parseProperty(h,g){if(!h||!h.length)return;const D=this;let x,p=h.length,E=0,$=0,N=0,U=!0;for(;$<p;){E=h.indexOf("{{",$);let te=h.indexOf("[[",$),ie="}}";if(te>=0&&(E<0||te<E)&&(E=te,U=!1,ie="]]"),N=E<0?-1:h.indexOf(ie,E+2),N<0)return;x=x||{};let ve=h.slice(E+2,N).trim();x.name=ve,$=N+2}const K=x.name,ne=D?D._properties[K]:null;return x.twoWay=U,x.ready=!1,D&&(K.indexOf("::")>=0?D.boundProperties[K.substring(0,K.indexOf("::"))]=!0:D.boundProperties[K]=!0),ne?(x.type=ne.type,x.reflectToAttribute=ne.reflectToAttribute):(x.type=["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(g)>=0?"boolean":"string",x.reflectToAttribute=!0),x}updateTextNodes(){const h=this;h.updateTextNode(h.shadowRoot||h,h.bindings,h)}updateTextNode(h,g,D){const x=this;if(!g)return;let p=0;for(let E=h.firstChild;E&&g.children;E=E.nextSibling)x.updateTextNode(E,g.children[p++],D);if(g&&g.data)for(let E in g.data){const $=g.data[E],N=$.name;"textContent"===E&&$.twoWay&&!$.updating&&void 0!==$.value&&(D[N]=$.value)}}updateBoundProperty(h,g){g.updating||(g.updating=!0,this[h]=g.value,g.updating=!1)}updateBoundNodes(h){const g=this;if(g.updateBoundNode(g.shadowRoot||g,g.bindings,g,h),g.detachedChildren.length>0)for(let D=0;D<g.detachedChildren.length;D++){const x=g.detachedChildren[D],p=x.getAttribute("smart-id"),E=function(N){if(N.nodeId===p)return N;for(let U in N.children){const K=N.children[U];if((K.getAttribute?K.getAttribute("smart-id"):"")===p)return N;if(K.children){const ne=E(K);if(ne)return ne}}return null},$=E(g.bindings);if($)g.updateBoundNode(x,$,g,h,!0);else if(x.getAttribute&&g.bindings.mapping){const N=g,U=g.bindings;if(U)for(let K in U.mapping){const ne=N.querySelector('[smart-id="'+K+'"]');ne&&g.updateBoundData(ne,U.mapping[K],N,h)}}}}updateBoundMappedNodes(){const h=this,g=h.bindings,D=h;if(g.mapping)for(let x in g.mapping){let p=D.querySelector('[smart-id="'+x+'"]');if(D.shadowRoot&&(p=D.querySelector('[id="'+x+'"]'),p||(p=D.shadowRoot.querySelector('[id="'+x+'"]')||D.shadowRoot.querySelector('[smart-id="'+x+'"]'))),p)h.updateBoundData(p,g.mapping[x],D);else if(D.getAttribute("aria-controls")){let E=document.getElementById(D.getAttribute("aria-controls"));!E&&D.shadowRoot&&(E=D.shadowRoot.getElementById(D.getAttribute("aria-controls"))),p=E.querySelector('[smart-id="'+x+'"]'),p&&h.updateBoundData(p,g.mapping[x],D)}}}updateBoundNode(h,g,D,x,p){const E=this;if(!g)return;let $=0;if(p){if(p&&!g.data)for(let U=h.firstChild;U&&g.children;U=U.nextSibling)if(U.getAttribute){const K=U.getAttribute("smart-id"),ne=function(){for(let te in g.children)if(g.children[te].nodeId===K)return g.children[te]}();E.updateBoundNode(U,ne,D,x),$++}else E.updateBoundNode(U,g.children[$++],D,x,p)}else for(let U=h.firstChild;U&&g.children;U=U.nextSibling)if(U.getAttribute){const K=U.getAttribute("smart-id"),ne=function(){for(let te in g.children)if(g.children[te].nodeId===K)return g.children[te]}();E.updateBoundNode(U,ne,D,x),$++}else E.updateBoundNode(U,g.children[$++],D,x);g&&g.data&&E.updateBoundData(h,g.data,D,x)}updateBoundData(h,g,D,x){const p=this;for(let E in g){const $=g[E];let N=$.name;if(!$.updating&&(N.indexOf("::")>=0&&(N=N.substring(0,N.indexOf("::"))),void 0===x||x===N)){if(N.indexOf("(")>=0){let U=N.substring(N.indexOf("("));const K=N.substring(0,N.indexOf("("));if(U=U.substring(1,U.length-1),U=U.replace(/ /gi,""),U=U.split(","),U.length>0&&""!==U[0]){let ne=[];for(let te=0;te<U.length;te++)ne.push(D[U[te]]);$.value=D[K].apply(D,ne)}else $.value=D[K]();$.type=typeof $.value}else $.value=D[N];if("innerHTML"===N){if(h[E].toString().trim()!==D[N].toString().trim()){if(window.smartBlazor&&h[E].indexOf("\x3c!--")>=0){($.ready||D._properties[N].defaultValue!==$.value)&&(h[E]=$.value.toString());continue}($.ready||D._properties[N].defaultValue!==$.value)&&(h[E]=$.value.toString().trim())}}else $.not?(h[E]=!$.value,$.targetPropertyName&&(h[$.targetPropertyName]=!$.value)):(h[E]=$.value,$.targetPropertyName&&(h[$.targetPropertyName]=$.value));if(h.$&&h.$.isNativeElement){T.cache["toDash"+E]||(T.cache["toDash"+E]=v.Core.toDash(E));const U=T.cache["toDash"+E],K=h.$.getAttributeValue(U,$.type);!$.reflectToAttribute||K===$.value&&$.ready||h.$.setAttributeValue(U,$.value,$.type),$.reflectToAttribute||h.$.setAttributeValue(U,null,$.type)}if(!$.ready){if(h.$&&h.$.isCustomElement){T.cache["toDash"+E]||(T.cache["toDash"+E]=v.Core.toDash(E));const U=T.cache["toDash"+E];h._properties||(h._beforeCreatedProperties=h._properties=h.propertyByAttributeName=[]),h._properties[E]||(h._properties[E]={attributeName:U},h._beforeCreatedProperties&&(h._beforeCreatedProperties[E]=h._properties[E]),h.propertyByAttributeName[U]=h._properties[E]);const K=h._properties[E];K.isUpdating=!0,$.reflectToAttribute&&h.$.setAttributeValue(K.attributeName,$.not?!$.value:$.value,$.type),$.reflectToAttribute||h.$.setAttributeValue(K.attributeName,null,$.type),K.isUpdating=!1}if($.twoWay){const U=function(K){if($.value=K,h.$&&h.$.isNativeElement){T.cache["toDash"+E]||(T.cache["toDash"+E]=v.Core.toDash(E));const ne=T.cache["toDash"+E],te=h.$.getAttributeValue(ne,$.type);$.reflectToAttribute&&te!==$.value&&h.$.setAttributeValue(ne,$.value,$.type),$.reflectToAttribute||h.$.setAttributeValue(ne,null,$.type)}};if($.name.indexOf("::")>=0){const K=$.name.indexOf("::"),ne=$.name.substring(K+2);p["$"+h.getAttribute("smart-id")].listen(ne,function(){U(h[E]);const te=$.name.substring(0,$.name.indexOf("::"));p.updateBoundProperty(te,$)})}if(h.$&&h.$.isCustomElement){h._properties[E]&&(h._properties[E].notify=!0),T.cache["toDash"+E]||(T.cache["toDash"+E]=v.Core.toDash(E));const K=T.cache["toDash"+E];p["$"+h.getAttribute("smart-id")].listen(K+"-changed",function(ne){U(ne.detail.value);const ie=p.context;ne.context!==document&&(p.context=p),p.updateBoundProperty($.name,$),p.context=ie})}}}$.ready=!0}}}static clearCache(){this.cache={}}addMessages(h,g){Object.assign(this.messages[h],g)}localize(h,g){const D=this;if(!D.messages||!D.messages[D.locale])return;let x=D.messages[D.locale][h];if(""===x)return"";if(!x){const E=D.messages.en;if(E){let $=E[h];if($){for(let N in g){let U=g[N];$=$.replace(new RegExp("{{"+N+"}}","g"),U)}return $}return h}}const p=x;for(let E in g){let $=g[E];x=x.replace(new RegExp("{{"+E+"}}","g"),$)}if(D.localizeFormatFunction){const E=D.localizeFormatFunction(p,x,g,h);if(void 0!==E)return E}return x}static get requires(){return{}}static get listeners(){return{"theme-changed":function(h){this.theme=h.detail.newValue}}}static get methods(){return{}}get classNamesMap(){return{animation:"smart-animate",rippleAnimation:"smart-ripple"}}get hasAnimation(){return"none"!==this.animation}get hasRippleAnimation(){return"none"!==this.animation&&"advanced"===this.animation}static get modules(){return window[n].Modules}get properties(){const h=this;return h._properties||(h._properties=[]),h._properties}get parents(){const h=this;let g=[],D=h.parentNode;for(;D&&9!==D.nodeType;)D instanceof HTMLElement==1&&g.push(D),D=D.parentNode;const x=h.getRootNode();return x.host&&(g=g.concat((E=>{let $=[E],N=E.parentNode;for(;N&&9!==N.nodeType;)N instanceof HTMLElement==1&&$.push(N),N=N.parentNode;return $})(x.host))),window[n].EnableShadowDOM&&h.isInShadowDOM&&h.shadowParent&&(g=g.concat(h.shadowParent.parents)),g}log(h){this._logger("log",h)}warn(h){this._logger("warn",h)}error(h){this._logger("error",h)}_logger(h,g){if(this.debugMode){const D=g instanceof Error?g.message:g.toString();console[h](D)}if(this.rethrowError&&"error"===h)throw g}get focused(){return this.contains(document.activeElement)}template(){return"<div></div>"}registered(){this.onRegistered&&this.onRegistered()}created(){const h=this;h.isReady=!1,h._initElement(h),h._setModuleState("created"),h.onCreated&&h.onCreated()}completed(){const h=this;h.isCompleted=!0,h._onCompleted&&h._onCompleted(),h.onCompleted&&h.onCompleted()}whenReady(h){const g=this;g.isCompleted?h():(g.whenReadyCallbacks||(g.whenReadyCallbacks=[]),g.whenReadyCallbacks.push(h))}whenRendered(h){const g=this;g.isRendered?h():(g.whenRenderedCallbacks||(g.whenRenderedCallbacks=[]),g.whenRenderedCallbacks.push(h))}addThemeClass(){const h=this;""!==h.theme&&h.classList.add("smart-"+h.theme)}addDefaultClass(){const h=this;h.classList.add(n.toLowerCase()+"-element"),h.classList.add(h.nodeName.toLowerCase())}_renderShadowRoot(){const h=this;if(h.shadowRoot){h.$.root.classList.add(h.nodeName.toLowerCase());for(let g=0;g<h.attributes.length;g++){const D=h.attributes[g];"class"===D.name||"id"===D.name||"style"===D.name||"tabindex"===D.name||D.name.indexOf("aria")>=0||h.$.root.setAttribute(D.name,D.value)}for(let g=0;g<h.classList.length;g++){const D=h.classList[g];"smart-element-init"!==D&&"smart-element"!==D&&"smart-hidden"!==D&&"smart-visibility-hidden"!==D&&h.$.root.classList.add(D)}}}render(){const h=this;if(!h.isRendered&&(h.isRendered=!0,h.isRendering=!1,h.context=document,h._renderShadowRoot(),h.whenRenderedCallbacks)){for(let g=0;g<h.whenRenderedCallbacks.length;g++)h.whenRenderedCallbacks[g]();h.whenRenderedCallbacks=[]}h.onRender&&h.onRender(),h.disabled&&h.setAttribute("aria-disabled",!0),h.readonly&&-1!==["checkbox","combobox","grid","gridcell","listbox","radiogroup","slider","spinbutton","textbox"].indexOf(h.getAttribute("role"))&&h.setAttribute("aria-readonly",!0)}ready(){const h=this;if(h._setId(),h.addThemeClass(),h.addDefaultClass(),"collapsed"===h.visibility?h.classList.add("smart-hidden"):"hidden"===h.visibility&&h.classList.add("smart-visibility-hidden"),h.dataContext&&h.applyDataContext(),h.onReady&&h.onReady(),h.shadowRoot&&Smart(h._selector)){if(Smart(h._selector).styleUrls){const g=Smart(h._selector).styleUrls;for(let D=0;D<g.length;D++)h.importStyle(g[D])}if(Smart(h._selector).styles){const g=document.createElement("style");g.innerHTML=Smart(h._selector).styles,h.shadowRoot.insertBefore(g,h.shadowRoot.firstChild)}}Smart(h._selector)&&Smart(h._selector).ready&&Smart(h._selector).ready()}_setId(){const h=this;if(!h.id){const g=h.elementName;h.id=g.slice(0,1).toLowerCase()+g.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}checkLicense(){"Evaluation"===window[n].License&&-1===window.location.hostname.indexOf("htmlelements")&&(this.logWatermark(),this.logLicense(),window[n].License="")}logWatermark(){const h=document.createElement("a");h.href="https://www.htmlelements.com/",h.innerHTML="https://www.htmlelements.com/",h.style.position="absolute",h.style.right="5px",h.style.bottom="5px",h.style.color="#fff",h.style.padding="20px",h.style.borderRadius="5px",h.style.background="#0C3D78",h.style.cursor="pointer",h.style.zIndex="999999",h.style.display="block",h.style.fontSize="24px",h.style.textDecoration="none",h.style.fontWeight="bold",h.style.opacity=0,h.style.transition="opacity .35s ease-in-out",h.id="watermark",document.getElementById("watermark")||setTimeout(()=>{document.getElementById("watermark")||(document.body.appendChild(h),setTimeout(()=>{h.style.opacity=1}),setTimeout(()=>{h.style.opacity=0,setTimeout(()=>{h.parentNode.removeChild(h)},350)},6e3))},1e3)}logLicense(){console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("*jQWidgets License Key Not Found."),console.log("*This is an EVALUATION only Version, it is NOT Licensed for software projects intended for PRODUCTION."),console.log("*if you want to hide this message, please send an email to: sales@jqwidgets.com for a license."),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************")}get _selector(){const h=this;return h.id?"#"+h.id:h.classList.length>0?"."+h.classList[0]:""}applyDataContext(h){const g=this;let D="string"==typeof g.dataContext?window[g.dataContext]||document[g.dataContext]:g.dataContext;if(h&&(D=h,g.dataContext=h),D){if(!D._uid){D._uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),D._properties=[];for(let x in D){const p=D[x];"function"!=typeof p&&"_properties"!==x&&"_uid"!==x&&(D._properties[x]=p,Object.defineProperty(D,x,{configurable:!1,enumerable:!0,get:()=>D._properties[x],set(E){const $=D._properties[x];D._properties[x]=E;let N=[];N[x]={oldValue:$,value:E},N.length++,g.updatingDataContext=!0,S.fireEvent("dataContextPropertyChanged",{dataContext:D,properties:N},{bubbles:!1,cancelable:!0}),g.updatingDataContext=!1}}))}}if(g.dataContextProperties=g.parseAttributes(g),g.dataContextPropertiesMap={},g.dataContextListeners={},g.dataContextProperties){g.updatingDataContext=!0;for(let x in g.dataContextProperties){const p=g.dataContextProperties[x],E=p.name;if(p.propertyName=x,g.dataContextPropertiesMap[E]=x,T.cache["toDash"+x]||(T.cache["toDash"+x]=v.Core.toDash(E)),p.isEvent){const $=p.value;g.dataContextListeners[E]&&g.removeEventListener(E,g.dataContextListeners[E]),g.dataContextListeners[E]=function(N){D[$](N)},g.addEventListener(E,g.dataContextListeners[E])}if(E.indexOf(".")>=0){const $=E.split(".");let N=D[$[0]];for(let U=1;U<$.length;U++)N=N[$[U]];void 0!==N&&(g[x]=N)}else g[x]=D[E]}g.dataContextPropertyChangedHandler=function(x){const p=x.detail.properties;if(x.detail.dataContext===("string"==typeof g.dataContext?window[g.dataContext]||document[g.dataContext]:g.dataContext))for(let E in p){const $=g.dataContextPropertiesMap[E],N=g.context;$&&(g.context=document,g[$]=p[E].value,g.context=N)}},S.listen("dataContextPropertyChanged",g.dataContextPropertyChangedHandler),g.updatingDataContext=!1}else g.dataContextProperties=null}else{g.dataContextProperties=null;const x=function(){("string"==typeof g.dataContext?window[g.dataContext]||document[g.dataContext]:g.dataContext)&&(g.applyDataContext(),window.removeEventListener("load",x))};window.addEventListener("load",x)}}updateDataContextProperty(h){const g=this,D="string"==typeof g.dataContext?window[g.dataContext]||document[g.dataContext]:g.dataContext,x=g.dataContextProperties[h];if(!g.updatingDataContext&&x.twoWay){const p=x.name;if(p.indexOf(".")>=0){const E=p.split(".");let $=D[E[0]];for(let N=1;N<E.length;N++)$=$[E[N]];void 0!==$&&($=g[h],c[D._uid]&&(c[D._uid][h]=$))}else D[p]=g[h],c[D._uid]&&(c[D._uid][h]=D[p])}}static get version(){return window[n].Version}initProperties(){const h=this;if(Smart(h._selector)&&Smart(h._selector).properties&&(h._initProperties=Smart(h._selector).properties),h.hasAttribute("props")&&!h.props?h._initProperties=window[h.getAttribute("props")]:h.props&&(h._initProperties=h.props),h._initProperties){const g=Object.keys(h._initProperties);for(let D=0;D<g.length;D++){const x=g[D],p=h._initProperties[x];if(void 0!==p){if(p.constructor===Smart.ObservableArray||p instanceof Smart.ObservableArray){h[x]=p.toArray();continue}if(p.constructor===Smart.DataAdapter||"smartDataAdapter"===p.constructor.name||"object"==typeof p&&Smart.DataAdapter&&p instanceof Smart.DataAdapter||p instanceof Smart.Observable||p.constructor===Smart.Observable||"object"!=typeof p||v.Types.isArray(p)||p instanceof Date){if(void 0===h[x]&&-1===["onReady","onAttached","onDetached","onCreated","onCompleted"].indexOf(x)){const E=h.localize("propertyUnknownName",{name:x});h.log(E)}h[x]=p;continue}}if("messages"!==x)if("dataSourceMap"!==x&&"rowCSSRules"!==x){if(p&&"object"==typeof p){const E=function($,N){const U=Object.keys($);for(let K=0;K<U.length;K++){const ne=U[K],te=$[ne],ie=h._properties[N+"_"+ne];if(ie&&null===ie.value){if(void 0===h[N+"_"+ne]){const ve=h.localize("propertyUnknownName",{name:N+"_"+ne});h.log(ve)}h[N+"_"+ne]=te}else if("object"==typeof te&&!v.Types.isArray(te)&&te&&te.constructor!==Date)E(te,N+"_"+ne);else{if(void 0===h[N+"_"+ne]){const ve=h.localize("propertyUnknownName",{name:N+"_"+ne});h.log(ve)}h[N+"_"+ne]=te}}};E(p,x)}}else h[x]=p;else h[x]=Object.assign(h[x],p)}}}setProperties(h){const g=this,D=Object.keys(h);for(let x=0;x<D.length;x++){const p=D[x],E=h[p];if(E.constructor===Smart.ObservableArray||E instanceof Smart.ObservableArray)g[p]=E.toArray();else if(E.constructor===Smart.DataAdapter||"smartDataAdapter"===E.constructor.name||"object"==typeof E&&Smart.DataAdapter&&E instanceof Smart.DataAdapter||E instanceof Smart.Observable||E.constructor===Smart.Observable||"object"!=typeof E||v.Types.isArray(E)||E instanceof Date){if(void 0===g[p]&&-1===["onReady","onAttached","onDetached","onCreated","onCompleted"].indexOf(p))continue;const $=g._properties[p];g[p]="int"===$.type||"number"===$.type&&"string"==typeof subPropertyValue?"int"===$.type?parseInt(E):parseFloat(E):E}else if("messages"!==p&&"dataSourceMap"!==p){if("object"==typeof E){const $=function(N,U){const K=Object.keys(N);for(let ne=0;ne<K.length;ne++){const te=K[ne],ie=N[te],ve=g._properties[U+"_"+te];if(ve&&null===ve.value){if(void 0===g[U+"_"+te])continue;const ce=g._properties[U+"_"+te];g[U+"_"+te]="int"===ce.type||"number"===ce.type&&"string"==typeof ie?"int"===ce.type?parseInt(ie):parseFloat(ie):ie}else if("object"==typeof ie&&!v.Types.isArray(ie)&&ie&&ie.constructor!==Date)$(ie,U+"_"+te);else{if(void 0===g[U+"_"+te])continue;const ce=g._properties[U+"_"+te];g[U+"_"+te]="int"===ce.type||"number"===ce.type&&"string"==typeof ie?"int"===ce.type?parseInt(ie):parseFloat(ie):ie}}};$(E,p)}}else g[p]=E}}setup(){const h=this;if(h.context=this,h.isReady&&!h.isCompleted)return;if(h.isReady)return h._setModuleState("attached"),h.isAttached=!0,h.attached(),h._handleListeners("listen"),void(h.context=document);h.ownerElement&&h.ownerElement.detachedChildren.indexOf(h)>=0&&h.ownerElement.detachedChildren.splice(h.ownerElement.detachedChildren.indexOf(h),1),h.isReady=!0,h.methods=h.getStaticMember("methods"),h.initProperties(),s.isMobile&&h.classList.add("smart-mobile");for(let x=0;x<h.attributes.length;x+=1){const p=h.propertyByAttributeName[h.attributes[x].name];if(!p)continue;let E=h.$.getAttributeValue(p.attributeName,p.type);const $=E?E.toString():"";if(!($.indexOf("{{")>=0||$.indexOf("[[")>=0||"object"!==p.type&&"array"!==p.type&&(h.attributes[x].value.indexOf("{{")>=0||h.attributes[x].value.indexOf("[[")>=0)||void 0===E||p.value===E)){const N=v.Types.getType(E),U=h.attributes[x].value;if(("any"===p.type||"object"===p.type)&&""+h[p.name]===E||"array"===p.type&&h[p.name]&&JSON.stringify(h[p.name])===E)continue;if("number"===N&&isNaN(E)&&"NaN"!==U&&"Infinity"!==U&&"-Infinity"!==U){const K=h.localize("propertyInvalidValueType",{name:p.name,actualType:"string",type:p.type});h.log(K)}p.isUpdatingFromAttribute=!0,h[p.name]=E,p.isUpdatingFromAttribute=!1}}for(let x in h._properties){const p=h._properties[x];if("innerHTML"===x&&p.value===p.defaultValue&&(p.value=p.defaultValue=v.Core.html(h)),"boolean"!==p.type&&"bool"!==p.type||"false"===h.getAttribute(p.attributeName)&&(p.isUpdating=!0,h.setAttribute(p.attributeName,""),p.isUpdating=!1),p.defaultReflectToAttribute&&p.reflectToAttribute){if(p.defaultReflectToAttribute&&p.defaultReflectToAttributeConditions){let E=!0;for(let $=0;$<p.defaultReflectToAttributeConditions.length;$++){const N=p.defaultReflectToAttributeConditions[$];let U,K;for(let ne in N)U=ne,K=N[ne];h._properties[U]&&h._properties[U].value!==K&&(E=!1)}if(!E)continue}p.isUpdating=!0,h.$.setAttributeValue(p.attributeName,p.value,p.type),p.isUpdating=!1}}const g=[];if(h.children.length>0)for(let x=0;x<h.children.length;x++){const p=h.children[x];v.Extend(p).isCustomElement&&g.push(p)}h.applyTemplate(),h.complete=function(){if(!h.templateBindingsReady){const p=E=>{E.templateBindingsReady||(E.templateBindingsReady=!0,E.updateTextNodes(),E.updateBoundNodes())};if(h.ownerElement){let E=h.ownerElement,$=[];for(;E;)$.push(E),E=E.ownerElement;for(let N=$.length-1;N>=0;N--)p($[N]);p(h)}else p(h)}const x=()=>{if(h._setModuleState("ready"),h.ready(),"auto"!==h.renderMode||h.isRendered||h.render(),h.isAttached=!0,h._setModuleState("attached"),h.attached(),h._handleListeners("listen"),h.isHidden||0!==h.offsetWidth&&0!==h.offsetHeight||(h.isHidden=!0),h.completed(),h.isRendered&&(h.context=document),h.whenReadyCallbacks){for(let p=0;p<h.whenReadyCallbacks.length;p++)h.whenReadyCallbacks[p]();h.whenReadyCallbacks=[]}};if(h.wait)h.classList.add("smart-visibility-hidden");else if(h.classList.contains("smart-async"))requestAnimationFrame(()=>{x()});else{const p=h.shadowParent;h.shadowParent=null;const E=h.parents;if(h.shadowParent=p,0===E.length)return;const $=()=>{let N=h.ownerElement,U=[];for(;N;)U.push(N),N=N.ownerElement;for(let K=U.length-1;K>=0;K--)U[K].updateBoundMappedNodes()};h.ownerElement&&"HTML"!==E[E.length-1].nodeName?h.getRootNode().host?x():h.ownerElement&&"HTML"===h.ownerElement.parents[h.ownerElement.parents.length-1].nodeName?($(),x()):h.checkIsInDomInterval=setInterval(()=>{const N=h.parents;"HTML"===N[N.length-1].nodeName&&(clearInterval(h.checkIsInDomInterval),$(),x())},100):x()}};let D=[].slice.call(h.querySelectorAll("[smart-id]")).concat(g);if(window[n].EnableShadowDOM&&!0!==h.isInShadowDOM&&(D=[].slice.call(h.shadowRoot.querySelectorAll("[smart-id]")).concat(g)),0===D.length)h.complete();else{h._completeListeners=0;for(let x=0;x<D.length;x++){const p=D[x];if(v.Extend(p).isCustomElement){const E=function(){h._completeListeners--,0===h._completeListeners&&(h.complete(),delete h._completeListeners)}.bind(h);p.isCompleted||p.isUtilityElement||!0===p.wait||(h._completeListeners++,p._onCompleted||(p.completeHandlers=[],p._onCompleted=function(){for(let $=0;$<p.completeHandlers.length;$++)p.completeHandlers[$]()}),p.completeHandlers.push(E))}}0===h._completeListeners&&h.complete()}}visibilityChangedHandler(){const h=this;h.isReady&&requestAnimationFrame(()=>{0===h.offsetWidth||0===h.offsetHeight?h.isHidden=!0:(h.isHidden=!1,h.$.fireEvent("resize",h,{bubbles:!1,cancelable:!0}))})}attributeChangedCallback(h,g,D){const x=this,p=x.propertyByAttributeName[h];if("class"!==h&&"style"!==h||x.visibilityChangedHandler(),p||x.attributeChanged(h,g,D),x.onAttributeChanged&&x.onAttributeChanged(h,g,D),!p||p&&p.isUpdating)return;let E=x.$.getAttributeValue(p.attributeName,p.type);void 0!==D&&x[p.name]!==E&&(p.isUpdatingFromAttribute=!0,x[p.name]=void 0!==E?E:x._properties[p.name].defaultValue,p.isUpdatingFromAttribute=!1)}attributeChanged(h,g,D){}set hasStyleObserver(h){const g=this;void 0===g._hasStyleObserver&&(g._hasStyleObserver=h),h?d.watch(g):d.unwatch(g)}get hasStyleObserver(){return void 0===this._hasStyleObserver||this._hasStyleObserver}attached(){const h=this;h.hasStyleObserver&&d.watch(h),h.onAttached&&h.onAttached(),Smart(h._selector)&&Smart(h._selector).attached&&Smart(h._selector).attached()}detached(){const h=this;h.hasStyleObserver&&d.unwatch(h),h._setModuleState("detached"),h.isAttached=!1,h.ownerElement&&-1===h.ownerElement.detachedChildren.indexOf(h)&&h.ownerElement.detachedChildren.push(h),h._handleListeners("unlisten"),h.onDetached&&h.onDetached(),Smart(h._selector)&&Smart(h._selector).detached&&Smart(h._selector).detached(),u&&u[h._selector]&&delete u[h._selector]}propertyChangedHandler(h,g,D){const x=this;g!==D&&("theme"===h&&(""!==g&&x.classList.remove("smart-"+g),""!==D&&x.classList.add("smart-"+D)),"visibility"===h?("collapsed"===g?x.classList.remove("smart-hidden"):"hidden"===g&&x.classList.remove("smart-visibility-hidden"),"collapsed"===D?x.classList.add("smart-hidden"):"hidden"===D&&x.classList.add("smart-visibility-hidden")):("disabled"===h||"readonly"===h)&&x._ariaPropertyChangedHandler(h,D),x.propertyChanged&&x.propertyChanged(h,g,D))}_ariaPropertyChangedHandler(h,g){const D=this;"readonly"===h&&-1===["checkbox","combobox","grid","gridcell","listbox","radiogroup","slider","spinbutton","textbox"].indexOf(D.getAttribute("role"))||(g?D.setAttribute("aria-"+h,!0):D.removeAttribute("aria-"+h))}_handleListeners(h){const g=this,D=g.tagName.toLowerCase(),x=p=>{for(let E in p){const $=E.split(".");let N=$[0],U=g.$;if($[1])if(N=$[1],U=g["$"+$[0]],"document"===$[0]){let te=g.smartId;""===te&&(te=v.Core.toCamelCase(D)),N=N+"."+te}else g.smartId&&(N=N+"."+g.smartId+"_"+g.parents.length);else g.smartId&&(N=N+"."+g.smartId);const K=p[E],ne=function(te){const ie=g.context;g.context=g,g[K]&&g[K].apply(g,[te]),g.context=ie};U&&U[h](N,ne)}};x(g.getStaticMember("listeners")),x(g.templateListeners),Smart(g._selector)&&Smart(g._selector).properties&&x(Smart(g._selector).listeners)}parseTemplate(){const h=this,g=h.template(),D=document.createDocumentFragment();if(t[h.nodeName]&&!i)return t[h.nodeName].cloneNode(!0);if(""===g)return null;let x=document.createElement("div");D.appendChild(x),x.innerHTML=g;let p=x.childNodes;x.parentNode.removeChild(x);for(let E=0;E<p.length;E++)D.appendChild(p[E]);return t[h.nodeName]=D,i?D:D.cloneNode(!0)}applyTemplate(){const h=this,g=h.parseTemplate();if(!g||!g.hasChildNodes)return;const D=g.childNodes[0],x=($,N)=>{h["$"+$]=N.$=v.Extend(N),h.$[$]=N,N.ownerElement=h};let p=D;if(D.getElementsByTagName("content").length>0){let $=D.getElementsByTagName("content")[0];p=$.parentNode,p.removeChild($)}else{const $=g.querySelectorAll("[inner-h-t-m-l]");$&&$.length>0&&(p=$[0])}h.$.template="template"===D.nodeName.toLowerCase()?D:D.querySelector("template");let E=g.querySelectorAll("[id]");0===E.length&&(E=g.querySelectorAll("*")),x("root",D),x("content",p),h.$.html=h.innerHTML.toString().trim();for(let $=0;$<E.length;$+=1){let N=E[$];""===N.id&&(N.id="child"+$),x(N.id,N),N.setAttribute("smart-id",N.id),h.shadowRoot?N.shadowParent=h:N.removeAttribute("id")}for(h.bindings=!1!==h.hasTemplateBindings?h.getBindings(g):[],h.$root.addClass("smart-container");h.childNodes.length;)p.appendChild(h.firstChild);if(h.appendTemplate(g),h.$.template){const $=document.createElement("div");$.classList.add("smart-template-container"),h.$.templateContainer=$,h.$.template.parentNode.insertBefore($,h.$.template),h.refreshTemplate()}}refreshTemplate(){const h=this;if(!h.$.templateContainer)return;h.templateDetached(h.$.templateContainer);const g=h.$.template.content.cloneNode(!0);h.templateBindings=h.getBindings(g),h.templateProperties=[];let D=document.createDocumentFragment();const x=function(p,E,$){for(let N in p){const U=p[N],K=U.node.cloneNode();E.appendChild(K);let ne=[],te=!1;if(U.data)for(let ie in U.data){const ve=U.data[ie],ce=ve.name;if(h.templateProperties[ce]=!0,K.removeAttribute(v.Core.toDash(ie)),"*items"===ie)ne=h[ce],te=!0;else if(ce.indexOf("item.")>=0&&void 0!==$)ve.value=$[ce.substring(5)],K[ie]=ve.value;else if(ce.indexOf("item")>=0&&void 0!==$)ve.value=$,K[ie]=ve.value;else if("*if"===ie)if(ce.indexOf("(")>=0){let he,xe=ce.substring(ce.indexOf("("));const Ie=ce.substring(0,ce.indexOf("("));if(xe=xe.substring(1,xe.length-1),xe=xe.replace(/ /gi,""),xe=xe.split(","),xe.length>0&&""!==xe[0]){let Ne=[];for(let we=0;we<xe.length;we++)Ne.push(h[xe[we]]);he=h[Ie].apply(h,Ne)}else he=h[Ie]();!1===he&&E.removeChild(K)}else h[ce]||E.removeChild(K);else h.updateBoundNode(K,U,h,ce)}if(ne.length>0||te){for(let ie=0;ie<ne.length;ie++)U.children&&x(U.children,K,ne[ie]);if("number"==typeof ne)for(let ie=0;ie<ne;ie++)U.children&&x(U.children,K,ie)}else U.children&&x(U.children,K,$)}};x(h.templateBindings.children,D),h.$.templateContainer.innerHTML="",h.$.templateContainer.appendChild(D),h.templateAttached(h.$.templateContainer)}templateAttached(){}templateDetached(){}appendTemplate(h){this.appendChild(h)}defineElementModules(){const h=this,g=h.constructor.prototype;if("BaseElement"===g.elementName){g.modules=h.constructor.modules;const D=g.modules;for(let x=0;x<D.length;x+=1)h.addModule(D[x])}else{const D=g.modules;if(!D)return;for(let x=0;x<D.length;x+=1){const p=D[x],E=p.prototype;h.defineElementMethods(E.methodNames,E),h.defineElementProperties(p.properties)}}}watch(h,g){this._watch=null!==h&&null!==g?{properties:h,propertyChangedCallback:g}:null}unwatch(){this._watch=null}set(h,g,D){const x=this,p=x.context;x.context=!0===D?document:x,x[h]=g,x.context=p}get(h){return this[h]}_setModuleState(h,g){const D=this,x="is"+h.substring(0,1).toUpperCase()+h.substring(1),p="on"+h.substring(0,1).toUpperCase()+h.substring(1);for(let E=0;E<D.modulesList.length;E++){const $=D.modulesList[E];$[x]=!0,$[h]&&$[h](g),$[p]&&$[p](g)}}addModule(h,g){const D=this;if(!h)return;const x=D.modules.slice(0),p=h.prototype,E=Object.getPrototypeOf(h);if(E.name&&E.name!==h.name&&D.addModule(E),!h.moduleName&&h.name&&(h.moduleName=h.name),-1===x.findIndex($=>h.moduleName===$.moduleName)&&x.push(h),D.defineModule(h),D.defineElementMethods(p.methodNames,p),D.defineElementProperties(h.properties),D.constructor.prototype.modules=x,g)for(let $ in Smart.Elements.tagNames){const N=Smart.Elements.tagNames[$];let U=Object.getPrototypeOf(N),K=[];for(;U!==HTMLElement;)K.push(U.prototype),U=Object.getPrototypeOf(U);K.indexOf(D)>=0&&N!==D&&N.prototype.addModule(h)}}defineModule(h){if(h.isDefined)return;h.prototype._initModule=function(p){this.ownerElement=p};const g=h.properties||{},D=Object.keys(g),x=Object.getOwnPropertyNames(h.prototype);h.prototype.methodNames=x;for(let p=0;p<D.length;p+=1){const E=D[p],$=g[E];Object.defineProperty(h.prototype,E,{configurable:!1,enumerable:!0,get(){return this.ownerElement?this.ownerElement[E]:$.value},set(N){this.ownerElement[E]=N}})}h.isDefined=!0}getStaticMember(h,g){const D=window[n][this.elementName],x=D[h];g||(g="");let p="array"===g?[]:"string"===g?"":{},E=Object.getPrototypeOf(D),$=[];for(;E[h];)$.push(E[h]),E=Object.getPrototypeOf(E);for(let N=$.length-1;N>=0;N--)if("array"===g)for(let U=0;U<$[N].length;U++)-1===p.indexOf($[N][U])&&p.push($[N][U]);else"string"===g?-1===p.indexOf($[N])&&(p+=$[N]):p=v.Core.assign(p,$[N]);if("array"===g){for(let N=0;N<x.length;N++)-1===p.indexOf(x[N])&&p.push(x[N]);return p}return"string"===g?(-1===p.indexOf(x)&&(p+=x),p):v.Core.assign(p,x)}defineElementHierarchicalProperties(h,g){const x=[];(function(p){const E=Object.keys(p);for(let $=0;$<E.length;$++){const N=E[$];if("messages"===N)continue;const U=p[N],K=Object.keys(U),ne=K.indexOf("value")>=0&&K.indexOf("type")>=0&&"object"==typeof U.value;if("propertyObject"===U.type||ne){const te=function(ie,ve){if(!ie.value)return;const ce=Object.keys(ie.value);for(let he=0;he<ce.length;he++){const xe=ce[he],Ie=ie.value[xe],Ne=ve+"_"+xe;if("object"!=typeof Ie||null===Ie)break;const we=Object.keys(Ie);if(!(we.indexOf("value")>=0&&we.indexOf("type")>=0))break;if("array"!==ie.type&&(ie.isHierarchicalProperty=!0),Ie.parentPropertyName=ve,g){const Se=g._properties[Ne];if(ie.value.hasOwnProperty(xe)){if(Se.isDefined)continue;delete ie.value[xe]}Se.isDefined=!0,Object.defineProperty(ie.value,xe,{configurable:!1,enumerable:!0,get:()=>g._properties[Ne].value,set(_e){g.updateProperty(g,g._properties[Ne],_e)}})}x[Ne]||(x[Ne]=Ie,x.length++),("propertyObject"===Ie.type||"object"==typeof Ie.value&&"array"!==Ie.type)&&te(g?g._properties[Ne]:Ie,Ne)}};te(U,N)}}})(h),x.length>0&&!g&&this.defineElementProperties(x)}defineElement(){const h=this,g=h.constructor.prototype,D=h.getStaticMember("properties"),x=Object.getOwnPropertyNames(g);g.extendedProperties={},g.boundProperties={},g.templateListeners={},h.defineElementModules(),h.defineElementMethods(x,g),h.defineElementProperties(D),h.defineElementHierarchicalProperties(h.extendedProperties),g._initElement=function(){const p=this,E=g.extendedProperties,$=Object.keys(E),N=p.modules;p.$=v.Extend(p),p.$document=S,p.smartId=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),p.isCreated||(p.modulesList=[],p._properties=[],p._beforeCreatedProperties&&(p._properties=p._beforeCreatedProperties,delete p._beforeCreatedProperties),p.detachedChildren=[],p.propertyByAttributeName=[]);for(let U=0;U<N.length;U+=1){let K=new N[U];K._initModule(p),p.modulesList.push(K)}for(let U=0;U<$.length;U+=1){const K=$[U],ne=E[K];let te=ne.value;if(p._properties[K]){if(void 0!==p._properties[K].notify)continue;delete p._properties[K]}if(B&&"innerHTML"===K&&delete p[K],-1===window.navigator.userAgent.indexOf("PhantomJS")&&p.hasOwnProperty(K)&&(te=p[K],delete p[K]),"array"===ne.type&&null!=te&&(te=te.slice(0)),"object"===ne.type&&null!=te&&(te=Array.isArray(te)?te.slice(0):Object.assign({},te)),p._properties[K]={name:K,notify:ne.notify,allowedValues:ne.allowedValues,type:ne.type,nullable:ne.nullable,reflectToAttribute:ne.reflectToAttribute,defaultReflectToAttribute:ne.defaultReflectToAttribute,defaultReflectToAttributeConditions:ne.defaultReflectToAttributeConditions,value:te,readOnly:ne.readOnly,defaultValue:te,attributeName:ne.attributeName,observer:ne.observer,inherit:ne.inherit,extend:ne.extend,validator:ne.validator},p.propertyByAttributeName[ne.attributeName]=p._properties[K],!ne.hasOwnProperty("type")){const ve=p.localize("propertyUnknownType",{name:K});p.log(ve)}if("any"===ne.type||"propertyObject"===ne.type)continue;const ie=v.Types.getType(te);if(null!=te&&ne.type!==ie&&!ne.validator){if("object"===ne.type&&"array"===ie||"number"===ie&&["integer","int","float"].findIndex(ce=>ce===ne.type)>=0)continue;const ve=p.localize("propertyInvalidValueType",{name:K,actualType:ie,type:ne.type});p.log(ve)}}p.defineElementHierarchicalProperties(p._properties,p),p.isCreated=!0},g.registered()}defineElementMethods(h,g){const D=this.constructor.prototype,x=function(E,$){const N=Array.prototype.slice.call(arguments,2);return function(){if(!this.isReady&&"localize"!==$&&"localize"!==$&&"cloneNode"!==$&&"importStyle"!==$&&"log"!==$&&"parseAttributes"!==$){const he=this.localize("elementNotInDOM");this.log(he)}let K=this;for(let he=0;he<this.modulesList.length;he++){let xe=this.modulesList[he];if($ in xe){K=xe;break}}const ne=this.context,te=N.concat(Array.prototype.slice.call(arguments));let ie=null;const ve=function(he,xe){return he===xe||"number"===he&&("int"===xe||"integer"===xe||"float"===xe)||"bool"===he&&"boolean"===xe||"boolean"===he&&"bool"===xe||"object"===he&&"any"===xe||void 0};if(this.methods){const he=this.methods[$];if(he){const xe=he.split(":");ie=xe[xe.length-1].trim();const Ie=[],Ne=he.substring(1+he.indexOf("("),he.lastIndexOf(")")).split(",");let we="";for(let _e=0;_e<Ne.length;_e++){const De=Ne[_e];we+=De,De.indexOf(":")>=0?(Ie.push(we),we=""):we+=","}let Se=Ie.length;for(let _e=0;_e<Ie.length;_e++){const De=Ie[_e].trim().split(":"),ze=De[0].split("=")[0].trim().indexOf("?")>=0,We=De[1].indexOf("?")>=0,Ue=De[1].replace(/\?/gi,"").trim(),Ye=Ue.split("|");let me=De[0].split("=")[1];const Ke=v.Types.getType(te[_e]);if(void 0===te[_e]&&me){switch(me=me.trim(),Ue[0]){case"date":{let Be=me.substring(me.indexOf("(")+1,me.lastIndexOf(")"));Be=Be.length>0?Be.split(",").map(Ae=>parseInt(Ae)):[],me=0===Be.length?new Date:new Date(Be[0],Be[1],Be[2]);break}case"bool":case"boolean":me="true"===me||"1"===me;break;case"int":case"integer":me=parseInt(me);break;case"float":case"number":me=parseFloat(me);break;case"any":case"object":me=me.indexOf("{")>=0?JSON.parse(me):me}te.push(me)}else ze&&Se--;if(Ue!==Ke&&Ke){let Be=!0;for(let Ae=0;Ae<Ye.length;Ae++)if(ve(Ke,Ye[Ae])){Be=!1;break}if(Be&&(null!==te[_e]||!We)){const Ae=this.localize("methodInvalidValueType",{name:$,actualType:Ke,type:Ue,argumentIndex:_e});this.log(Ae)}}if(te.length<Se){const Be=this.localize("methodInvalidArgumentsCount",{name:$,actualArgumentsCount:te.length,argumentsCount:Se});this.log(Be)}}}}this.context=this;const ce=E.apply(K,te);if(ie){const he=void 0===v.Types.getType(ce)?"void":v.Types.getType(ce);if(!ve(he,ie)){const xe=this.localize("methodInvalidReturnType",{name:$,actualType:he,type:ie});this.log(xe)}}return this.context=ne,ce}},p=["constructor","ready","created","render","attached","detached","appendChild","insertBefore","removeChild","connect","disconnectedCallback","connectedCallback","attributeChangedCallback","propertyChangedHandler","enableShadowDOM","isInShadowDOM","addPropertyBindings"];for(let E in h){let $=h[E];$&&$.startsWith&&$.startsWith("_")||void 0!==p.find(N=>N===$)||D.extendedProperties[$]||v.Types.isFunction(g[$])&&(D[$]=x(g[$],$))}}defineElementProperties(h){if(!h)return;const g=this,D=g.constructor.prototype,x=Object.keys(h),p=g.getStaticMember("properties");Object.assign(D.extendedProperties,h),g.updateProperty=function(E,$,N){const U=E;if(!$||$.readOnly)return;if($.allowedValues){let te=!1;for(let ie=0;ie<$.allowedValues.length;ie++)if($.allowedValues[ie]===N){te=!0;break}if(!te){const ie=JSON.stringify($.allowedValues).replace(/\[|\]/gi,"").replace(",",", ").replace(/"/gi,"'"),ce=U.localize("propertyInvalidValue",{name:$.name,actualValue:"'"+N+"'",value:ie});return void U.log(ce)}}const K=$.name,ne=U._properties[K].value;if($.validator&&U[$.validator]){const te=U.context;U.context=U;const ie=U[$.validator](ne,N);void 0!==ie&&(N=ie),U.context=te}if(ne!==N){if(U.propertyChanging){const te=U.propertyChanging(K,ne,N);if(!1===te||null===te)return}if(!$.hasOwnProperty("type")){const te=U.localize("propertyUnknownType",{name:K});U.log(te)}if("array"!==$.type||JSON.stringify(ne)!==JSON.stringify(N)){if(null!=N&&"any"!==$.type&&"propertyObject"!==$.type&&$.type!==v.Types.getType(N)&&!$.validator||null===N&&!$.nullable){let te=!0;if("object"===$.type&&"array"===v.Types.getType(N)&&(te=!1),"number"===v.Types.getType(N)&&["integer","int","float"].findIndex(ie=>ie===$.type)>=0&&(te=!1),te){const ie=U.localize("propertyInvalidValueType",{name:K,actualType:v.Types.getType(N),type:$.type});return void U.error(ie)}}if($.isUpdating=!0,$.isHierarchicalProperty){const te=function(ie,ve){if(!ie)return;const ce=Object.keys(ie);for(let he=0;he<ce.length;he++){const xe=ce[he],Ie=ie[xe];"object"==typeof Ie&&!v.Types.isArray(Ie)&&Ie&&Ie.constructor!==Date?te(Ie,ve+"_"+xe):U[ve+"_"+xe]=Ie}};te(N,K)}else U._properties[K].value=N;if(!$.isUpdatingFromAttribute&&$.reflectToAttribute&&U.$.setAttributeValue($.attributeName,N,$.type),U.isReady&&(!U.ownerElement||U.ownerElement&&U.ownerElement.isReady)){if("wait"===K&&(N||!ne||U.isCompleted||(U.classList.remove("smart-visibility-hidden"),U.ownerElement&&U.ownerElement.updateBoundMappedNodes(),U.updateBoundMappedNodes(),U.complete())),"renderMode"===K)return;if(U.context!==U&&!U.wait){const ie=U.context;U.context=U,U.propertyChangedHandler(K,ne,N),U.context=ie,$.observer&&U[$.observer]&&(U.context=U,U[$.observer](ne,N),U.context=document),U._watch&&U._watch.properties.indexOf(K)>=0&&U._watch.propertyChangedCallback(K,ne,N)}const te=$.notify||U.boundProperties[K];te&&(U.$.fireEvent($.attributeName+"-changed",{context:U.context,oldValue:ne,value:U[K]}),U.boundProperties[K]&&U.updateBoundNodes(K)),te&&U.templateProperties&&U.templateProperties[K]&&U.refreshTemplate(),U.dataContextProperties&&("dataContext"===K?U.applyDataContext():U.dataContextProperties[K]&&U.updateDataContextProperty(K))}$.isUpdating=!1}}};for(let E=0;E<x.length;E+=1){const $=x[E],N=h[$],U=v.Core.toDash($),K=N.type||"any",ne=K.indexOf("?")>=0||"any"===K;ne&&"any"!==K&&(N.type=K.substring(0,K.length-1)),N.nullable=ne,N.attributeName=U.toLowerCase(),N.name=$,N.reflectToAttribute=void 0===N.reflectToAttribute||N.reflectToAttribute,N.inherit&&p[$]&&(N.value=p[$].value),N.extend&&p[$]&&v.Core.assign(N.value,p[$].value),D.hasOwnProperty($)||Object.defineProperty(D,$,{configurable:!1,enumerable:!0,get(){if(this._properties[$])return this._properties[$].value},set(te){this.updateProperty(this,this._properties[$],te)}})}}}let M=[],L=[],F=[],B=!1;const J=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);J&&parseInt(J[2],10)<=50&&(B=!0);class Q{static register(h,g){const D=g.prototype;let x=s.toCamelCase(h).replace(/[a-z]+/,""),p=g.version||window[n].Version;if(window.customElements.get(h)&&window.customElements.get(h).version===p)return;let E=h;for(p=p.split(".");window.customElements.get(h);)h=E+"-"+p.join("."),p[2]=parseInt(p[2])+1;if(!M[h]){if(h.startsWith(n.toLowerCase()))M[h]=window[n][x]=window[n.toLowerCase()+x]=g;else{let $=h.split("-")[0];$=$.substring(0,1).toUpperCase()+$.substring(1),window[n][$]||(window[n][$]={}),M[h]=window[n][$][x]=window[$.toLowerCase()+x]=g,window[n][x]&&(x=s.toCamelCase(h)),window[n][x]=g}D.elementName=x,D.defineElement(),L[h]&&L[h](D),window.customElements.define(h,g)}}static registerElements(){const h=this;if(h.toRegister){h.isRegistering=!0;for(let g=0;g<h.toRegister.length;g++){const D=h.toRegister[g];h.register(D.tagName,D.element)}h.isRegistering=!1}}static get(h){if(M[h])return M[h]}static whenRegistered(h,g){if(!h)throw new Error("Syntax Error: Invalid tag name");const D=L[h],x=this.get(h),p=x?x.modules.length:3;try{D||x?!D&&x?(g(x.prototype),L[h]=void 0):D&&!x?L[h]=function(E){D(E),g(E)}:D&&x&&(x.proto&&(D(x.proto),g(x.proto)),L[h]=void 0):L[h]=function(E){try{g(E)}catch($){const N=$ instanceof Error?$.message:$.toString();console.log(N)}}}catch(E){const $=E instanceof Error?E.message:E.toString();console.log($)}if(x&&p!==x.prototype.modules.length){const E=document.querySelectorAll(h);for(let $=0;$<E.length;$++){const N=E[$];N.isCreated&&N._initElement()}}}}Q.lazyRegister=!1,Q.tagNames=[];class ee{constructor(){const h=this;h.name="observableArray",h.observables=arguments.length<3?null:arguments[2];const g=new Proxy(h,{deleteProperty:function(D,x){return delete D[x],!0},apply:function(D,x,p){return D.apply(x,p)},get:function(D,x){return D[x]||isNaN(parseInt(x))?D[x]:h.getItem(parseInt(x))},set:function(D,x,p){return D[x]||isNaN(parseInt(x))?(D[x]=p,!0):(h.setItem(parseInt(x),p),!0)}});if(h._addArgs={eventName:"change",object:g,action:"add",index:null,removed:new Array,addedCount:1},h._removeArgs={eventName:"change",object:g,action:"remove",index:null,removed:null,addedCount:0},arguments.length>=1&&Array.isArray(arguments[0])){h._array=[];const D=arguments[0];for(let x=0,p=D.length;x<p;x++){const E=h._getItem(h._array.length,D[x]);h._array.push(E)}}else h._array=Array.apply(null,arguments);return 2===arguments.length&&(h.notifyFn=arguments[1]),g}get canNotify(){const h=this;return void 0===h._canNotify&&(h._canNotify=!0),h._canNotify}set canNotify(h){this._canNotify=h}_notify(h){const g=this;g.canNotify&&g.notifyFn&&g.notifyFn(h)}notify(h){h&&(this.notifyFn=h)}toArray(){return this._array}_getItem(h,g){const D=this;return"string"==typeof g||"number"==typeof g||void 0===g?g:new Proxy(g,{deleteProperty:function(x,p){return delete x[p],!0},set:function(x,p,E){const $=x[p];return x[p]=E,!D._canNotify||!1===x.canNotify||(D.observables&&!D.observables[p]||D._notify({eventName:"change",object:D,target:x,action:"update",index:h,path:h+"."+p,oldValue:$,newValue:E,propertyName:p}),!0)}})}getItem(h){return this._array[h]}setItem(h,g){const D=this,x=D._array[h];D._array[h]=D._getItem(h,g),D._notify({eventName:"change",object:D._array,action:"update",index:h,removed:[x],addedCount:1})}get length(){return this._array.length}set length(h){const g=this;a.isNumber(h)&&g._array&&g._array.length!==h&&g.splice(h,g._array.length-h)}toString(){return this._array.toString()}toLocaleString(){return this._array.toLocaleString()}concat(){const h=this;h._addArgs.index=h._array.length;const g=h._array.concat.apply(h._array,arguments);return new Smart.ObservableArray(g)}join(h){return this._array.join(h)}pop(){const h=this;h._removeArgs.index=h._array.length-1,delete h[h._array.length-1];const g=h._array.pop();return h._removeArgs.removed=[g],h._notify(h._removeArgs),h._notifyLengthChange(),g}push(){const h=this;if(h._addArgs.index=h._array.length,1===arguments.length&&Array.isArray(arguments[0])){const g=arguments[0];for(let D=0,x=g.length;D<x;D++){const p=h._getItem(h._array.length,g[D]);h._array.push(p)}}else{const g=h._getItem(h._addArgs.index,arguments[0]);h._array.push.apply(h._array,[g])}return h._addArgs.addedCount=h._array.length-h._addArgs.index,h._notify(h._addArgs),h._notifyLengthChange(),h._array.length}_notifyLengthChange(){const h=this;if(!h.canNotify)return;const g=h._createPropertyChangeData("length",h._array.length);h._notify(g)}_createPropertyChangeData(h,g,D){return{eventName:"change",object:this,action:h,value:g,oldValue:D}}reverse(){return this._array.reverse()}shift(){const h=this,g=h._array.shift();return h._removeArgs.index=0,h._removeArgs.removed=[g],h._notify(h._removeArgs),h._notifyLengthChange(),g}slice(h,g){return this._array.slice(h,g)}sort(h){return this._array.sort(h)}splice(h,g,D){const x=this,p=x._array.length;let E;if(D&&D.length)for(let $=0;$<D.length;$++)E=x._array.splice(h+$,g,D[$]);else E=x._array.splice.apply(x._array,arguments);if(D){let $=x.canNotify;if(x.canNotify=!1,D.length)for(let N=0;N<D.length;N++)x.setItem(h+N,D[N]);else x.setItem(h,D);x.canNotify=$,x._notify({eventName:"change",object:this,action:"add",index:h,added:E,addedCount:x._array.length>p?x._array.length-p:0})}else x._notify({eventName:"change",object:this,action:"remove",index:h,removed:E,addedCount:x._array.length>p?x._array.length-p:0});return x._array.length!==p&&x._notifyLengthChange(),E}unshift(){const h=this,g=h._array.length,D=h._array.unshift.apply(h._array,arguments);return h._addArgs.index=0,h._addArgs.addedCount=D-g,h._notify(this._addArgs),h._notifyLengthChange(),D}indexOf(h,g){const D=this;for(let x=g||0,p=D._array.length;x<p;x++)if(D._array[x]===h)return x;return-1}lastIndexOf(h,g){const D=this;for(let x=g||D._array.length-1;x>=0;x--)if(D._array[x]===h)return x;return-1}find(h,g){return this._array.find(h,g)}findIndex(h,g){return this._array.findIndex(h,g)}every(h,g){return this._array.every(h,g)}some(h,g){return this._array.some(h,g)}forEach(h,g){this._array.forEach(h,g)}map(h,g){return this._array.map(h,g)}filter(h,g){return this._array.filter(h,g)}reduce(h,g){return void 0!==g?this._array.reduce(h,g):this._array.reduce(h)}reduceRight(h,g){return void 0!==g?this._array.reduceRight(h,g):this._array.reduceRight(h)}move(h,g){this.splice(g,0,this.splice(h,1)[0])}}let se={};window[n]&&(se=window[n]),window[n]=function(k,h){let g=k;if(k){if(k.indexOf("#")>=0||k.indexOf(".")>=0)return u[k]?u[k]:h?(u[k]=new h,function(D,x){const p=x.properties;x._properties=[];const E=function(N,U){const K=Object.keys(N);for(let ne=0;ne<K.length;ne++){const te=K[ne],ie=N[te];x._properties[U+te]=ie,Array.isArray(ie)?x._properties[U+te]=new ee(ie,function(ve){const ce=te+"."+ve.path,he=ve.newValue,xe=document.querySelector(D);if(xe){const Ie=ce.split(".");let Ne=xe;for(let we=0;we<Ie.length;we++)Ne=Ne[Ie[we]];Ne=he}}):(Object.defineProperty(N,te,{configurable:!1,enumerable:!0,get:()=>x._properties[U+te],set(ve){x._properties[U+te]=ve}}),ie&&"DataAdapter"===ie.constructor.name||ie&&"object"==typeof ie&&Smart.DataAdapter&&ie instanceof Smart.DataAdapter||"object"==typeof ie&&ie&&Object.keys(ie).length>0&&E(ie,U+te+"."))}};E(p,""),Object.defineProperty(x,"properties",{configurable:!1,enumerable:!0,get:()=>p});const $=document.querySelector(D);if($&&$.isReady)for(let N in p)$[N]=p[N];else if($){$.props={};for(let N in p)$.props[N]=p[N]}}(k,u[k]),u[k]):void 0;if(h){if(Q.tagNames[k]=h,Q.lazyRegister){Q.toRegister||(Q.toRegister=[]);const D=s.toCamelCase(g).replace(/[a-z]+/,"");return window[n][D]=h,void Q.toRegister.push({tagName:g,element:h})}Q.register(g,h)}}},window.addEventListener("load",function(){const k=window[n].Elements.tagNames;let h=[];for(let g in k){const D=k[g];let x=document.querySelectorAll("["+g+"]");for(let E=0;E<x.length;E++){const $=x[E];$ instanceof HTMLDivElement&&($.__proto__=D.prototype,$.created(),$.connectedCallback()),$.classList.add("smart-element-ready")}let p=D.name;"Item"===p&&(p="ListItem"),x=document.querySelectorAll('[is="'+n.toLocaleLowerCase()+p+'"]');for(let E=0;E<x.length;E++)h.push(x[E])}if(h.length>0){const g=D=>{let x=[],p=D.parentNode;for(;p&&9!==p.nodeType;)p instanceof HTMLElement==1&&x.push(p),p=p.parentNode;return x};h.sort(function(D,x){let p=g(D).length,E=g(x).length;return p<E?1:p>E?-1:0});for(let D=0;D<h.length;D++){const x=h[D],p=x.getAttribute("is");let E;E="smartItem"===p?new window.smartListItem(x):new window[p](x),E.removeAttribute("is")}}});const pe=function(){if("complete"===document.readyState&&"manual"!==window[n].RenderMode){F.sort(function(k,h){let g=k.element.parents.length,D=h.element.parents.length;return g<D?-1:g>D?1:0});for(let k=0;k<F.length;k++)window[n].RenderMode="",F[k].element.isLoading=!1,F[k].callback(),window[n].RenderMode="";F=[],document.removeEventListener("readystatechange",pe)}};Object.assign(window[n],{Elements:Q,Modules:[],BaseElement:class extends z{static get observedAttributes(){let k=this,h=["external-style"];for(let g in k.prototype.extendedProperties)h.push(k.prototype.extendedProperties[g].attributeName);return h}static get styleUrls(){return[]}static get styles(){return""}get styleUrl(){return this._styleUrl}set styleUrl(k){this._styleUrl=k}get isInShadowDOM(){const k=this,h=k.getRootNode();return!k.hasAttribute("smart-blazor")&&h!==document&&h!==k}getShadowRootOrBody(){const k=this;return k.isInShadowDOM&&k.getRootNode().host?k.getRootNode().host.shadowRoot:document.body}get enableShadowDOM(){return window[n].EnableShadowDOM}importStyle(k,h){this._importStyle(k,h)}_importStyle(k,h){const g=this;if(!g.shadowRoot||!k)return;const D=E=>{const $=g.shadowRoot.children;for(let U=0;U<$.length;U++){const K=$[U];if(K instanceof HTMLLinkElement&&K.href===E)return h&&h(),null}const N=document.createElement("link");return N.rel="stylesheet",N.type="text/css",N.href=E,N.onload=h,N},x=(()=>{const E=g.shadowRoot.children;let $=null;for(let N=0;N<E.length;N++){const U=E[N];U instanceof HTMLLinkElement&&($=U)}return $})(),p=(E,$)=>{$.parentNode.insertBefore(E,$.nextSibling)};if(Array.isArray(k)){const E=document.createDocumentFragment();for(let $=0;$<k.length;$++){const N=D(k[$]);N&&E.appendChild(N)}x?p(E,x):g.shadowRoot.insertBefore(E,g.shadowRoot.firstChild)}else{const E=D(k);if(!E)return;x?p(E,x):g.shadowRoot.insertBefore(E,g.shadowRoot.firstChild)}}attributeChanged(k,h,g){"style-url"===k&&(this.styleUrl=g)}attributeChangedCallback(k,h,g){this.isReady&&super.attributeChangedCallback(k,h,g)}constructor(k,h){super();const g=this;if(k){h&&(g._initProperties=h);const D=x=>{if("string"==typeof x?document.querySelector(x):x){const p="string"==typeof x?document.querySelector(x):x;if(p instanceof HTMLDivElement){const E=document.createElement(g.tagName);for(let $ of p.attributes)E.setAttribute($.name,p.getAttribute($.name));for(;p.childNodes.length;)E.appendChild(p.firstChild);return"string"==typeof x&&(E.id=x.substring(1)),E._initProperties=h,p.parentNode&&p.parentNode.replaceChild(E,p),E}if(h){const E=p.context;if(p._initProperties=h,p.isReady){p.context=p;const $={},N={};for(let U in h)$[U]=p[U],N[U]=h[U];Object.getOwnPropertyNames(h).length>0&&(p.initProperties(),p.propertyChangedHandler(h,$,N)),p.context=E}}return p}};if("string"==typeof k){const x=document.querySelectorAll(k),p=[];if(x.length>1){for(let E=0;E<x.length;E++){const $=D(x[E]);p.push($)}return p}}else if(k&&k.length>0){const x=k;if(x.length>1){for(let p=0;p<x.length;p++){const E=D(x[p]);M.push(E)}return M}}return D(k)}g._styleUrl="",g.isUtilityElement||g.created()}_getRootShadowParent(){let k=this.shadowParent;for(;k;){if(!k.shadowParent)return k;k=k.shadowParent}return k||this.shadowParent}_getStyleUrl(k){let h=v.Core.getScriptLocation()+window[n].StyleBaseUrl+k;return this.shadowParent&&(h=h.replace("scoped/","")),h}_getStyleUrls(){const k=this;k.nodeName.startsWith(n);const h=k.getStaticMember("styleUrls","array"),g=[];for(let D=0;D<h.length;D++){const p=k._getStyleUrl(h[D]);g.push(p)}return g}_setupShadowRoot(){const k=this;k.classList.add("smart-element-init");const h=g=>{g.$.root&&(g.$.root.classList.add(n.toLowerCase()+"-element"),g.$.root.classList.add(k.nodeName.toLowerCase())),g.setup(),g.classList.remove("smart-element-init")};if(document.adoptedStyleSheets)if(window[n].AdoptedStyleSheets)window[n].AdoptedStyleSheetsLoaded?(k.shadowRoot.adoptedStyleSheets=window[n].AdoptedStyleSheets,h(k)):(k.shadowRoot.adoptedStyleSheets=window[n].AdoptedStyleSheets,window[n].AdoptedStyleSheetsLoadedQueue||(window[n].AdoptedStyleSheetsLoadedQueue=[]),window[n].AdoptedStyleSheetsLoadedQueue.push(k));else{const g=new CSSStyleSheet;let D=v.Core.getScriptLocation()+"/styles/smart.default.css";g.replace('@import url("'+D+'")').then(()=>{if(h(k),window[n].AdoptedStyleSheetsLoaded=!0,window[n].AdoptedStyleSheetsLoadedQueue){const x=window[n].AdoptedStyleSheetsLoadedQueue;for(let p=0;p<x.length;p++)h(x[p]);delete window[n].AdoptedStyleSheetsLoadedQueue}}).catch(x=>{console.error("Failed to load:",x)}),window[n].AdoptedStyleSheets=[g],document.adoptedStyleSheets=[g],k.shadowRoot.adoptedStyleSheets=window[n].AdoptedStyleSheets}}connect(){const k=this;window[n].EnableShadowDOM&&!k.shadowRoot&&!0!==k.isInShadowDOM&&(k.attachShadow({mode:"open"}),k.shadowRoot&&k.$.root&&(k.shadowRoot.appendChild(k.$.root),k.$.root.classList.add(k.nodeName.toLowerCase()))),k.shadowRoot||k.shadowParent?k.shadowRoot?k._setupShadowRoot():(k.shadowParent&&window,k.setup()):k.setup()}connectedCallback(){const k=this;if(k.isLoading||k.isUtilityElement)return;k.classList.add("smart-element-init");const h=function(){k.classList.remove("smart-element-init")};if("complete"===document.readyState&&(void 0===window[n].isAngular&&(window[n].isAngular=null!==document.body.querySelector("[ng-version]")),window[n].isAngular))for(let g=0;g<k.parents.length&&!k.parents[g].nodeName.toLowerCase().startsWith(n.toLowerCase()+"-");g++)if(k.parents[g].hasAttribute("ng-version")&&!k.classList.contains("smart-angular")){window[n].RenderMode="manual";break}if("complete"===document.readyState&&"manual"!==window[n].RenderMode){const g=k.parents;g.length&&"HTML"===g[g.length-1].nodeName||k.getRootNode().host?(k.checkIsInDomTimer&&clearInterval(k.checkIsInDomTimer),h(),k.connect()):(k.checkIsInDomTimer&&clearInterval(k.checkIsInDomTimer),g.length>0&&(k.checkIsInDomTimer=setInterval(()=>{const D=k.parents;0===D.length&&clearInterval(k.checkIsInDomTimer),D.length>0&&"HTML"===D[D.length-1].nodeName&&(clearInterval(k.checkIsInDomTimer),h(),k.connect())},100)))}else k.isLoading=!0,F.push({element:this,callback:function(){this.isReady||(h(),this.connect())}.bind(k)})}disconnectedCallback(){const k=this;k.isAttached?(k.shadowParent=null,k.detached()):k._resetShadowParent()}adoptedCallback(){this.setup()}appendTemplate(k){const h=this;h.shadowRoot?h.shadowRoot.appendChild(k):h.appendChild(k)}_resetShadowParent(){const k=this;if(!window[n].EnableShadowDOM||null===k.shadowParent)return;const h=[];let g=k.parentNode;for(;g&&9!==g.nodeType;){if(g instanceof HTMLElement==1)h.push(g);else if(11===g.nodeType&&g.host){g=g.host;continue}g=g.parentNode}for(let D=0;D<h.length;D++)if(h[D]===k.shadowParent)return;h.length>0&&"HTML"===h[h.length-1].nodeName&&(k.shadowParent=null)}},Utilities:v,Import:function(k,h){let g=0;const D=function(x,p){return new Promise(E=>{const $=document.createElement("script");$.src=x,$.onload=E;for(let N=0;N<document.head.children.length;N++){const U=document.head.children[N];if(U.src&&U.src.toString().indexOf(p)>=0)return void E()}document.head.appendChild($)})};return new Promise(x=>{const p=v.Core.getScriptLocation(),E=function($){k[$]&&D(p+"/"+k[$],k[$]).then(function(){g++,g===k.length&&x(),E($+1)})};if(h)for(let $=0;$<k.length;$++)D(p+"/"+k[$],k[$]).then(function(){g++,g===k.length&&x()});else E(0)})},ObservableArray:ee,Observable:class{constructor(k,h){const g=this;var D;return this.name="observable",k&&Object.assign(g,k),D=k,Object.getOwnPropertyNames(Object.getPrototypeOf(D)).forEach(x=>"constructor"===x||!!x.startsWith("_")||void(g[x]=D[x])),new Proxy(g,{deleteProperty:function(x,p){return delete x[p],!0},get:function(x,p){return x[p]},set:function(x,p,E){const $=x[p];return $===E||(x[p]=E,!("notifyFn"!==p&&!p.startsWith("_")&&"canNotify"!==p&&(!h||-1!==h.indexOf(p))&&g.canNotify&&(g._notify({target:x,propertyName:p,oldValue:$,newValue:E}),0)))}})}get canNotify(){const k=this;return void 0===k._canNotify&&(k._canNotify=!0),k._canNotify}set canNotify(k){this._canNotify=k}_notify(k){const h=this;if(h.canNotify&&h.notifyFn)for(let g=0;g<h.notifyFn.length;g++)h.notifyFn[g](k)}notify(k){const h=this;k&&(h.notifyFn||(h.notifyFn=[]),h.notifyFn.push(k))}},Component:class{constructor(k,h){const g=this.name;let D=null;return k?D=new window[g](k,h):(D=new window[g],D._initProperties=h),this._element=D,D}get name(){return"Component"}get element(){return this._element}},Theme:se.Theme||"",EnableShadowDOM:se.ShadowDom||!1,BaseUrl:"./",StyleBaseUrl:"/styles/default/",Version:e,Templates:t,RenderMode:se.RenderMode||"auto",Render:function(){const k=()=>{window[n].RenderMode="",pe()};"complete"===document.readyState?k():(window.removeEventListener("load",k),window.addEventListener("load",k))},Data:u,Mode:se.Mode||"production",License:"Evaluation"});let fe=window[n].Theme;"manual"!==window[n].RenderMode&&document.addEventListener("readystatechange",pe),Object.defineProperty(window[n],"Theme",{configurable:!1,enumerable:!0,get:()=>fe,set(k){const h=fe;fe=k,S.fireEvent("theme-changed",{oldValue:h,newValue:k},{bubbles:!0,cancelable:!0})}}),window[n]("smart-base-element",window[n].BaseElement),window[n]("smart-content-element",class extends window[n].BaseElement{static get properties(){return{content:{type:"any",reflectToAttribute:!1},innerHTML:{type:"string",reflectToAttribute:!1}}}template(){return"<div inner-h-t-m-l='[[innerHTML]]'></div>"}ready(){super.ready(),this.applyContent()}refresh(){}clearContent(){const k=this;for(;k.$.content.firstChild;)k.$.content.removeChild(k.$.content.firstChild)}applyContent(){const k=this;if(void 0===k.content)return void(k.content=k.$.content);if(""===k.content||null===k.content)return void k.clearContent();if(k.content instanceof HTMLElement)return k.clearContent(),void k.$.content.appendChild(k.content);const h=document.createDocumentFragment();let g=document.createElement("div");h.appendChild(g),k.content instanceof HTMLElement?g.appendChild(k.content):g.innerHTML=k.content;let D=Array.from(g.childNodes);g.parentNode.removeChild(g);for(let x=0;x<D.length;x++)h.appendChild(D[x]);k.clearContent(),k.$.content.appendChild(h)}propertyChangedHandler(k,h,g){super.propertyChangedHandler(k,h,g);const D=this;h!==g&&("innerHTML"===k&&(D.content=g,D.applyContent(),D.innerHTML=D.content=v.Core.html(D.$.content)),"content"===k&&D.applyContent())}}),window[n]("smart-scroll-viewer",class extends window[n].ContentElement{static get properties(){return{autoRefresh:{type:"boolean",value:!1},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},touchScrollRatio:{type:"any",value:null},touchVelocityCoefficient:{type:"number",value:50},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{touchmove:"_touchmoveHandler",touchstart:"_touchstartHandler",wheel:"_mouseWheelHandler","document.up":"_upHandler"}}static get styleUrls(){return["smart.scrollviewer.css"]}template(){return'<div id="container" class="smart-container" role="presentation">\n                        <div id="scrollViewerContainer" class="smart-scroll-viewer-container" role="presentation">\n                            <div id="scrollViewerContentContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-scroll-viewer-content-container" role="presentation">\n                                <content></content>\n                            </div>\n                        </div>\n                        <smart-scroll-bar id="verticalScrollBar" theme="[[theme]]"  animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]" orientation="vertical"></smart-scroll-bar>\n                        <smart-scroll-bar id="horizontalScrollBar" theme="[[theme]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]"></smart-scroll-bar>\n                    </div>'}appendChild(k){const h=this;if(k){if(!h.isCompleted||k.classList&&k.classList.contains("smart-resize-trigger-container")){const g=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(h,g.concat(Array.prototype.slice.call(arguments)))}h.$.scrollViewerContentContainer.appendChild(k)}}removeChild(k){const h=this;if(k){if(!h.isCompleted||k.classList&&k.classList.contains("smart-resize-trigger-container")){const g=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(h,g.concat(Array.prototype.slice.call(arguments)))}h.$.scrollViewerContentContainer.removeChild(k)}}removeAll(){this.isCompleted&&(this.$.scrollViewerContentContainer.innerHTML="")}_horizontalScrollbarHandler(k){const h=this;h.$.scrollViewerContentContainer.style.left=(h.rightToLeft?1:-1)*h.scrollLeft+"px",k.stopPropagation&&k.stopPropagation(),h.onHorizontalChange&&h.onHorizontalChange(k)}_verticalScrollbarHandler(k){const h=this;h.$.scrollViewerContentContainer.style.top=-h.scrollTop+"px",k.stopPropagation&&k.stopPropagation(),h.onVerticalChange&&h.onVerticalChange(k)}_touchmoveHandler(k){const h=this;if(h._touchmoveInside&&k.cancelable)return k.preventDefault(),void k.stopPropagation();const g=h.scrollHeight>0,x=h._touchCoords;if(!g&&!(h.scrollWidth>0)||!x)return;const p=k.touches[0];let E,$,N,U;h._touchCoords=[p.pageX,p.pageY],g?(E=h.scrollTop,$=h.scrollHeight,N=p.pageY,U=x[1]):(E=h.scrollLeft,$=h.scrollWidth,N=p.pageX,U=x[0]);const K=parseFloat(N.toFixed(5)),ne=parseFloat(U.toFixed(5));0===E&&K>=ne||E===$&&K<=ne||(N!==U&&(h._touchmoveInside=!0),k.cancelable&&(k.preventDefault(),k.stopPropagation()))}_touchstartHandler(k){const h=k.touches[0];this._touchCoords=[h.pageX,h.pageY]}_mouseWheelHandler(k){const h=this;if(!h.disabled&&(h.computedHorizontalScrollBarVisibility||h.computedVerticalScrollBarVisibility)){if(k.shiftKey&&h.computedHorizontalScrollBarVisibility){const g=h.scrollLeft;return 0===g&&k.deltaX<0||g===h.scrollHeight&&k.deltaX>0?void 0:(k.stopPropagation(),k.preventDefault(),void(h.scrollWidth>0&&h.scrollTo(void 0,h.scrollLeft+h._getScrollCoefficient(k,h.offsetWidth))))}if(h.computedVerticalScrollBarVisibility){const g=h.scrollTop;if(0===g&&k.deltaY<0||g===h.scrollHeight&&k.deltaY>0)return;k.stopPropagation(),k.preventDefault(),h.scrollHeight>0&&h.scrollTo(h.scrollTop+h._getScrollCoefficient(k,h.offsetHeight))}}}_overriddenHandler(){}_upHandler(){delete this._touchCoords,delete this._touchmoveInside}_getScrollCoefficient(k,h){const g=k.deltaMode,D=Math.abs(k.deltaY);let x;return 0===g?x=D<33.333333333333336?D:h:1===g?x=D<1?33.333333333333336*D:h:2===g&&(x=h),k.deltaY<0?-x:x}applyContent(){super.applyContent(),this.refresh()}get computedHorizontalScrollBarVisibility(){const k=this;return k._scrollView&&k._scrollView.hScrollBar?!k._scrollView.hScrollBar.$.hasClass("smart-hidden"):null}get computedVerticalScrollBarVisibility(){const k=this;return k._scrollView&&k._scrollView.vScrollBar?!k._scrollView.vScrollBar.$.hasClass("smart-hidden"):null}scrollTo(k,h){const g=this;g._scrollView&&(void 0!==k&&g._scrollView.scrollTo(k),void 0!==h&&g._scrollView.scrollTo(h,!1))}refreshScrollBarsVisibility(){const k=this;k._scrollView&&(k._scrollView.hScrollBar.disabled=k.disabled,k._scrollView.vScrollBar.disabled=k.disabled,"disabled"===k.horizontalScrollBarVisibility&&(k._scrollView.hScrollBar.disabled=!0),"disabled"===k.verticalScrollBarVisibility&&(k._scrollView.vScrollBar.disabled=!0),k.scrollWidth>0?k._scrollView.hScrollBar.$.removeClass("smart-hidden"):"visible"!==k.horizontalScrollBarVisibility&&k._scrollView.hScrollBar.$.addClass("smart-hidden"),k.scrollHeight>0?k._scrollView.vScrollBar.$.removeClass("smart-hidden"):"visible"!==k.verticalScrollBarVisibility&&k._scrollView.vScrollBar.$.addClass("smart-hidden"),"hidden"===k.horizontalScrollBarVisibility&&k._scrollView.hScrollBar.$.addClass("smart-hidden"),"hidden"===k.verticalScrollBarVisibility&&k._scrollView.vScrollBar.$.addClass("smart-hidden"),"visible"===k.horizontalScrollBarVisibility&&k._scrollView.hScrollBar.$.removeClass("smart-hidden"),"visible"===k.verticalScrollBarVisibility&&(k._scrollView.vScrollBar.$.removeClass("smart-hidden"),k.disabled||(k._scrollView.vScrollBar.disabled=k.scrollHeight<=0)),k.computedHorizontalScrollBarVisibility&&k.computedVerticalScrollBarVisibility?(k._scrollView.hScrollBar.$.addClass("bottom-corner"),k._scrollView.vScrollBar.$.addClass("bottom-corner")):(k._scrollView.hScrollBar.$.removeClass("bottom-corner"),k._scrollView.vScrollBar.$.removeClass("bottom-corner")))}ready(){super.ready();const k=this;k.$.verticalScrollBar.onChange=h=>{h.detail=h,k._verticalScrollbarHandler(h)},k.$.horizontalScrollBar.onChange=h=>{h.detail=h,k._horizontalScrollbarHandler(h)},k.$.verticalScrollBar.setAttribute("aria-controls",k.id),k.$.horizontalScrollBar.setAttribute("aria-controls",k.id),k._customScrollView||(k._scrollView=new Smart.Utilities.Scroll(k,k.$.horizontalScrollBar,k.$.verticalScrollBar)),k.refresh()}refresh(){const k=this;function h(){const p=k.$.scrollViewerContainer.classList.contains("vscroll");k.$.scrollViewerContainer.classList.remove("vscroll");const E=k.$.scrollViewerContentContainer.offsetWidth-k.$.scrollViewerContainer.offsetWidth;return E>0&&"hidden"!==k.horizontalScrollBarVisibility||"visible"===k.horizontalScrollBarVisibility?k.$.scrollViewerContainer.classList.add("hscroll"):k.$.scrollViewerContainer.classList.remove("hscroll"),p&&k.$.scrollViewerContainer.classList.add("vscroll"),E}function g(){let p;const E=k.$.scrollViewerContainer.classList.contains("hscroll");if(k.$.scrollViewerContainer.classList.remove("hscroll"),Smart.Utilities.Core.Browser.Safari){const $=k.$.scrollViewerContentContainer.getBoundingClientRect().height,N=k.$.scrollViewerContainer.getBoundingClientRect().height;p=$&&N?parseInt($)-parseInt(N):k.$.scrollViewerContentContainer.offsetHeight-k.$.scrollViewerContainer.offsetHeight}else p=k.$.scrollViewerContentContainer.offsetHeight-k.$.scrollViewerContainer.offsetHeight;return k.virtualScrollHeight&&(p=k.virtualScrollHeight),p>0&&"hidden"!==k.verticalScrollBarVisibility||"visible"===k.verticalScrollBarVisibility?k.$.scrollViewerContainer.classList.add("vscroll"):k.$.scrollViewerContainer.classList.remove("vscroll"),E&&k.$.scrollViewerContainer.classList.add("hscroll"),p}if(!k.$.scrollViewerContentContainer)return;"hidden"===k.verticalScrollBarVisibility&&k.$.scrollViewerContentContainer.setAttribute("disable-vertical",""),"hidden"===k.horizontalScrollBarVisibility&&k.$.scrollViewerContentContainer.setAttribute("disable-horizontal","");let D=k.scrollWidth,x=k.scrollHeight;k.scrollWidth=h(),k.scrollHeight=g(),k.scrollHeight&&x===k.scrollHeight||(k.scrollWidth=h()),k.scrollWidth&&D===k.scrollWidth||(k.scrollHeight=g()),k.computedVerticalScrollBarVisibility&&(k.scrollHeight+=k._scrollView.hScrollBar.offsetHeight),k.computedHorizontalScrollBarVisibility&&(k.scrollWidth+=k._scrollView.vScrollBar.offsetWidth),0===k.scrollHeight&&k.scrollWidth>0&&k.$.container.offsetHeight-k.$.content.offsetHeight<5&&(k.$.container.style.paddingBottom=k._scrollView.hScrollBar.offsetHeight+"px"),k.autoRefresh&&(k.$.scrollViewerContainer.scrollLeft=0,k.$.scrollViewerContainer.scrollTop=0)}attached(){const k=this;super.attached(),k._scrollView||k._customScrollView||(k._scrollView=new Smart.Utilities.Scroll(k,k.$.horizontalScrollBar,k.$.verticalScrollBar))}detached(){const k=this;super.detached(),k._scrollView&&(k._scrollView.unlisten(),delete k._scrollView)}get scrollWidth(){const k=this;return k._scrollView&&k._scrollView.hScrollBar?1===k._scrollView.hScrollBar.max&&"visible"===k.horizontalScrollBarVisibility?0:k._scrollView.hScrollBar.max:-1}set scrollWidth(k){const h=this;k<0&&(k=0),h._scrollView&&h._scrollView.hScrollBar&&(h._scrollView.hScrollBar.max=0===k&&"visible"===h.horizontalScrollBarVisibility?0:k,h.refreshScrollBarsVisibility())}get scrollHeight(){const k=this;return k._scrollView&&k._scrollView.vScrollBar?1===k._scrollView.vScrollBar.max&&"visible"===k.verticalScrollBarVisibility?0:k._scrollView.vScrollBar.max:0}set scrollHeight(k){const h=this;k<0&&(k=0),h._scrollView&&h._scrollView.vScrollBar&&(h._scrollView.vScrollBar.max=0===k&&"visible"===h.verticalScrollBarVisibility?1:k,h.refreshScrollBarsVisibility())}get scrollLeft(){const k=this;return k._scrollView&&k._scrollView.hScrollBar?k._scrollView.hScrollBar.value:0}set scrollLeft(k){const h=this;k<0&&(k=0),h._scrollView&&h._scrollView.hScrollBar&&(h._scrollView.hScrollBar.value=k)}get scrollTop(){const k=this;return k._scrollView&&k._scrollView.vScrollBar?k._scrollView.vScrollBar.value:0}set scrollTop(k){const h=this;k<0&&(k=0),h._scrollView&&h._scrollView.vScrollBar&&(h._scrollView.vScrollBar.value=k)}propertyChangedHandler(k,h,g){super.propertyChangedHandler(k,h,g),"animation"!==k&&"theme"!==k&&this.refresh()}}),window[n].Utilities.Assign("PositionDetection",class{constructor(k,h,g,D){const x=this;if(h){const p="dropDown"+Math.floor(65536*(1+Math.random())).toString(16).substring(1);h.id=p,k.setAttribute("aria-owns",p)}x.context=k,x.dropDown=h,x.defaultParent=g,x.closeMethod=D}handleAutoPositioning(){const k=this,h=k.context;if("auto"!==h.dropDownPosition||h.disabled||h.isHidden)return;const g=window.requestAnimationFrame;let D,x=Date.now();return D=g(function p(){h.isHidden||document.hidden||(D=g(p),"auto"===h.dropDownPosition&&!h.disabled&&(h.isInShadowDOM?document.body.contains(h.shadowParent):document.body.contains(h))||cancelAnimationFrame(D),h.isHidden&&cancelAnimationFrame(D),Date.now()-x>=200&&(k.scrollHandler(),x=Date.now()))})}checkBrowserBounds(k){const h=this.context;if("auto"===h.dropDownPosition&&!h.disabled)switch(k){case"vertically":this.checkBrowserBoundsVertically();break;case"horizontally":this.checkBrowserBoundsHorizontally();break;default:this.checkBrowserBoundsVertically(),this.checkBrowserBoundsHorizontally()}}checkBrowserBoundsHorizontally(){const k=this.context,h=this.dropDown;let g,D=0;s.isMobile||window.innerWidth===document.documentElement.clientWidth||(D=window.innerWidth-document.documentElement.clientWidth),null!==k._dropDownParent?g=!0:h.style.left="";const x=window.innerWidth-D;let p=k.getBoundingClientRect().left;if(p<0&&(h.style.left=(g?0:Math.abs(p))+"px",p=parseFloat(h.style.left)),p+h.offsetWidth>x){let E=p-Math.abs(x-p-h.offsetWidth);g&&(E+=window.pageXOffset),h.style.left=(g?E:E-p)+"px",window.innerWidth===document.documentElement.clientWidth&&(h.style.left=parseFloat(h.style.left)+D+"px"),g&&window.innerHeight===document.documentElement.clientHeight&&this.positionDropDown(!0)}}checkBrowserBoundsVertically(k){const h=this.context,g=this.dropDown,D=h._dropDownListPosition;k||(k=h.getBoundingClientRect()),0!==k.height&&(h._dropDownListPosition=document.documentElement.clientHeight-Math.abs(k.top+k.height+g.offsetHeight)>=0?"bottom":k.top-g.offsetHeight>=0?"top":"overlay-center",this.updatePositionAttribute(D,h._dropDownListPosition))}scrollHandler(){const k=this.context;if(!k.parentElement)return;const h=k.getBoundingClientRect();if(h.top===k._positionTop)return;const g=k._dropDownListPosition;this.checkBrowserBoundsVertically(h),k._dropDownListPosition!==g&&this.positionDropDown(),k._positionTop=h.top}getDropDownParent(k){const h=this.context,g=this.dropDown;let D=h.dropDownAppendTo;h._positionedParent=null,null===D?h._dropDownParent=null:"body"===D||D===document.body?h._dropDownParent=h.getRootNode().host?h.getRootNode().host.shadowRoot:document.body:D instanceof HTMLElement?h._dropDownParent=D:"string"==typeof D?(D=document.getElementById(D),D instanceof HTMLElement?h._dropDownParent=D:(h.dropDownAppendTo=null,h._dropDownParent=null)):(h.dropDownAppendTo=null,h._dropDownParent=null);let x=h._dropDownParent;if(null!==x){for(;x&&x instanceof HTMLElement&&"static"===window.getComputedStyle(x).position&&x!==h.getShadowRootOrBody();)x=x.parentElement;h._positionedParent=x===document.body?null:x,g&&(g.setAttribute("animation",h.animation),""!==h.theme&&g.$.addClass(h.theme),k&&(h._dropDownParent.appendChild(g),g.$.addClass("smart-drop-down-repositioned")),-1===h.detachedChildren.indexOf(g)&&h.detachedChildren.push(g))}}dropDownAppendToChangedHandler(){const k=this.context,h=this.dropDown,g=k._dropDownParent;this.getDropDownParent(),k._dropDownParent!==g&&(k[this.closeMethod](),["left","top","font-size","font-family","font-style","font-weight"].forEach(D=>h.style[D]=null),null===k._dropDownParent?(this.defaultParent.appendChild(h),h.$.removeClass("smart-drop-down-repositioned")):(k._dropDownParent.appendChild(h),h.$.addClass("smart-drop-down-repositioned")))}dropDownPositionChangedHandler(){const k=this;k.dropDown.style.transition="none",k.context[k.closeMethod](),k.setDropDownPosition(),k.handleAutoPositioning()}dropDownAttached(k){const h=this.context;null!==h._dropDownParent&&(h._dropDownParent.appendChild(this.dropDown),this.handleAutoPositioning(),k&&h[k]())}dropDownDetached(){const k=this.context;null!==k._dropDownParent&&document.body.contains(this.dropDown)&&document.body.contains(k._dropDownParent)&&k._dropDownParent.removeChild(this.dropDown)}setDropDownPosition(){const k=this.context,h=k.dropDownPosition,g=k._dropDownListPosition;"auto"===h?this.checkBrowserBounds():k._dropDownListPosition=h,this.updatePositionAttribute(g,k._dropDownListPosition)}updatePositionAttribute(k,h){const g=this.context,D=this.dropDown;g.$.dropDownButton&&!g.$.dropDownButton.hasAttribute(h)&&(g.$.dropDownButton.removeAttribute(k),g.$.dropDownButton.setAttribute(h,"")),D.hasAttribute(h)||(D.style.transition="none",D.removeAttribute(k),D.setAttribute(h,""),requestAnimationFrame(function(){D.style.transition=null}))}positionDropDown(k){const h=this.context,g=this.dropDown;if(!h.opened||null===h._dropDownParent)return;const D=h.getBoundingClientRect();let x,p;if(this.customPositionDropDown){const $=this.customPositionDropDown(D);x=$.left,p=$.top}else switch(x=D.left,p=D.top,h._dropDownListPosition){case"bottom":p+=h.$.container.offsetHeight-1;break;case"center-bottom":p+=h.$.container.offsetHeight-1,x+=h.offsetWidth-g.offsetWidth/2;break;case"center-top":p-=g.offsetHeight-1,x+=h.offsetWidth-g.offsetWidth/2;break;case"top":p-=g.offsetHeight-1;break;case"overlay-bottom":break;case"overlay-center":p-=g.offsetHeight/2-h.offsetHeight/2;break;case"overlay-top":p-=g.offsetHeight-h.offsetHeight}const E=this.getDropDownOffset();g.style.top=p+E.y+"px",k||(g.style.left=x+E.x+"px")}getDropDownOffset(){const k=this.context._positionedParent;let h,g;if(k&&"#document-fragment"!==k.nodeName){const D=k.getBoundingClientRect();h=-D.left,g=-D.top}else h=window.pageXOffset,g=window.pageYOffset;return{x:h,y:g}}placeOverlay(){const k=this.context;if(!k.dropDownOverlay||k._overlay)return;const h=document.createElement("div");h.classList.add("smart-drop-down-overlay"),h.style.width=document.documentElement.scrollWidth+"px",h.style.height=document.documentElement.scrollHeight+"px",document.body.appendChild(h),k._overlay=h}removeOverlay(k){const h=this,g=h.context;g._overlay&&(g.hasAnimation&&k?requestAnimationFrame(function D(){h.dropDown.getBoundingClientRect().height>0?requestAnimationFrame(D):(document.body.removeChild(g._overlay),delete g._overlay)}):(document.body.removeChild(g._overlay),delete g._overlay))}}),window.Smart.Color=class{constructor(k){if(window.Smart._colors||(window.Smart._colors=[]),window.Smart._colors[k]){const g=window.Smart._colors[k];return this.hex=g.hex,this.r=g.r,this.g=g.g,void(this.b=g.b)}this.r=this.g=this.b=0,this.hex="";const h=this.getStandardizedColor(k);h&&(this.setHex(h.substring(1)),window.Smart._colors[k]={hex:this.hex,r:this.r,g:this.g,b:this.b})}getStandardizedColor(k){const h=document.createElement("canvas").getContext("2d");return h.fillStyle=k,h.fillStyle}getInvertedColor(){return""===this.hex?"transparent":255-(.299*this.r+.587*this.g+.114*this.b)<105?"Black":"White"}hexToRgb(k){let h="00",g="00",D="00";return 6===(k=this.validateHex(k)).length?(h=k.substring(0,2),g=k.substring(2,4),D=k.substring(4,6)):(k.length>4&&(h=k.substring(4,k.length),k=k.substring(0,4)),k.length>2&&(g=k.substring(2,k.length),k=k.substring(0,2)),k.length>0&&(D=k.substring(0,k.length))),{r:this.hexToInt(h),g:this.hexToInt(g),b:this.hexToInt(D)}}validateHex(k){return(k=(k=new String(k).toUpperCase()).replace(/[^A-F0-9]/g,"0")).length>6&&(k=k.substring(0,6)),k}webSafeDec(k){return 51*Math.round(k/51)}hexToWebSafe(k){let h,g,D;return 3===k.length?(h=k.substring(0,1),g=k.substring(1,1),D=k.substring(2,1)):(h=k.substring(0,2),g=k.substring(2,4),D=k.substring(4,6)),this.intToHex(this.webSafeDec(this.hexToInt(h)))+this.intToHex(this.webSafeDec(this.hexToInt(g)))+this.intToHex(this.webSafeDec(this.hexToInt(D)))}rgbToWebSafe(k){return{r:this.webSafeDec(k.r),g:this.webSafeDec(k.g),b:this.webSafeDec(k.b)}}rgbToHex(k){return this.intToHex(k.r)+this.intToHex(k.g)+this.intToHex(k.b)}intToHex(k){let h=parseInt(k).toString(16);return 1===h.length&&(h="0"+h),h.toUpperCase()}hexToInt(k){return parseInt(k,16)}setRgb(k,h,g){let D=function(x){return x<0||x>255||isNaN(parseInt(x))?0:x};this.r=D(k),this.g=D(h),this.b=D(g),this.hex=this.rgbToHex(this)}setHex(k){this.hex=k;let h=this.hexToRgb(this.hex);this.r=h.r,this.g=h.g,this.b=h.b}}}()},6802:()=>{Smart.Utilities.Assign("DataExporter",class{constructor(e,t,n,i){const a=this;e||(e={}),a.style=e.style,a.header=e.header,a.exportHeader=void 0===e.exportHeader||e.exportHeader,a.hierarchical=e.hierarchical,a.expandChar=e.expandChar||"+",a.collapseChar=e.collapseChar||"-",a.pageOrientation=e.pageOrientation,a.allowNull=e.allowNull||!1,!a.hierarchical&&t&&t.length>0?a.groupBy=t:a.mergedCells=e.mergedCells,!a.groupBy&&n&&Object.keys(n).length>0&&(a.filterBy=n),i&&(a.conditionalFormatting=i),a.timeBetween1900And1970=new Date(1970,0,1,0,0,0).getTime()-new Date(1900,0,1,0,0,0).getTime()}downloadFile(e,t,n){let i;if(!n)return e;if(i=e instanceof Blob?e:new Blob([e],{type:t}),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,n);else{const a=document.createElement("a"),r=URL.createObjectURL(i);a.href=r,a.download=n,a.style.position="absolute",a.style.visibility="hidden",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(r)},100)}}exportData(e,t,n,i){const a=this;if(a.actualHierarchy=a.hierarchical,t=t.toLowerCase(),a.exportHeader&&(a.header?(0===(e=e.slice(0)).length&&(a.actualHierarchy=!1),a.processComplexHeader(a.header,e,t)):1===e.length&&(a.actualHierarchy=!1)),0===e.length)return void console.warn("No data to export.");"xlsx"===t&&(a.xlsxStartIndex=a.complexHeader?a.complexHeader.length:+a.exportHeader),a.actualHierarchy&&(e=a.processHierarchicalData(e,t)),a.getDatafields(e),n&&n.slice(n.length-t.length-1,n.length)!=="."+t&&(n+="."+t);let r=null;switch(t){case"csv":r=a.exportToCSVAndTSV(e,{delimiter:", ",MIME:"text/csv",toRemove:2},n);break;case"html":r=a.exportToHTML(e,n);break;case"jpeg":case"png":a.exportToImage(e,n,t,i);break;case"json":r=a.exportToJSON(e,n);break;case"pdf":r=a.exportToPDF(e,n);break;case"tsv":r=a.exportToCSVAndTSV(e,{delimiter:"\t",MIME:"text/tab-separated-values",toRemove:1},n);break;case"xlsx":r=a.exportToXLSX(e,n);break;case"xml":r=a.exportToXML(e,n);break;case"md":r=a.exportToMD(e,n)}return i&&r&&i(r),delete a.complexHeader,r}exportToCSVAndTSV(e,t,n){const i=this,a=i.datafields;let r="";for(let o=0;o<e.length;o++){const s=e[o];let l="";for(let d=0;d<a.length;d++)l+=i.actualHierarchy&&0===d?('""'+t.delimiter).repeat(s._level-1)+'"'+s[a[d]]+'"'+t.delimiter+('""'+t.delimiter).repeat(i.maxLevel-s._level):'"'+s[a[d]]+'"'+t.delimiter;l=l.slice(0,l.length-t.toRemove)+"\n",r+=l}return this.downloadFile(r,t.MIME,n)}exportToHTML(e,t){const n=this,i=n.datafields,a=n.style;let r="",o=0,s="";e=n.processGroupingInformation(e),n.data=e,n.exportHeader&&(r=n.getHTMLHeader(i,e),o=1),arguments[2]&&(s=`<script type="text/javascript" src="${Array.from(document.getElementsByTagName("script")).find(m=>-1!==m.src.indexOf("html2canvas")).src}"><\/script>`);let l=`<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="UTF-8">\n    <style type="text/css">\n${n.getRowStyle()}${n.getColumnStyle()}\n    </style>${s}${n.toggleableFunctionality()}\n</head>\n<body>\n    <table${n.getTableStyle()}>${r}\n        <tbody>\n`;const d={},c={},u=[];n.getMergedCellsInfo(d,c);e:for(let m=o;m<e.length;m++){const y=e[m],b=m-o;let f=n.getAlternationIndex(b," rowN"),w="",v="",S="",_=0;if(n.actualHierarchy)y._collapsed&&(w=" collapsed"),v=` level="${y._level}"`;else if(n.groupBy)for(let z=0;z<n.groupBy.length;z++){const M=n.groupBy[z],L=y[M],F=n.groups[M][L];if(S+=L,-1===u.indexOf(S)){l+=`            <tr class="row">\n                <td class="column group" style="padding-left: ${25*_}px;" colspan="${n.datafields.length}">${F}</td>\n            </tr>`,u.push(S),m--;continue e}_++}let T=`            <tr class="row row${b}${f}${w}"${v}`;t||(T+=' style="page-break-inside: avoid;"'),T+=">\n";for(let z=0;z<i.length;z++){const M=z+","+b;let L=1,F=1;if(d[M])L=d[M].colspan,F=d[M].rowspan;else if(c[M])continue;const B=i[z];let J=y[B],Q="";if(n.actualHierarchy&&0===z){let se="";y._expanded?se=n.collapseChar:!1===y._expanded&&(se=n.expandChar),Q=`<div class="toggle-element" style="margin-left: ${25*(y._level-1)+5}px;" expanded>${se}</div>`}J=n.getFormattedValue(J,B);let ee="";if(a&&a.columns&&a.columns[B]&&a.columns[B][b]){const se=a.columns[B][b];ee+=`border-color: ${se.border}; background-color: ${se.background}; color: ${se.color};"`}0===z&&_>1&&(ee+=`padding-left: ${25*(_-1)}px;"`),ee&&(ee=` style="${ee}"`),T+=`                <td class="column column${B}"${ee} colspan="${L}" rowspan="${F}">${Q+J}</td>\n`}l+=T+"            </tr>\n"}return l+="        </tbody>\n    </table>\n</body>\n</html>",arguments[2]?l:this.downloadFile(l,"text/html",t)}exportToImage(e,t,n,i){try{html2canvas}catch{throw new Error("smart-grid: Missing reference to 'html2canvas.min.js'.")}let a=null;const r=this.exportToHTML(e,t,!0),o=document.createElement("iframe");return o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.border="none",o.style.width="100%",o.style.height="100%",o.style.opacity=0,o.style.pointerEvents="none",document.body.appendChild(o),o.contentDocument.write(r),function s(){o.contentDocument.body&&o.contentDocument.body.firstElementChild?o.contentWindow.html2canvas(o.contentDocument.body.firstElementChild).then(l=>{const d=new Smart.Utilities.Draw(document.createElement("div"));a=l.toDataURL("image/png"),i?i(a):(document.body.appendChild(l),d.exportImage(void 0,l,n,t)),o.remove(),l.remove()}):requestAnimationFrame(s)}(),a}getMergedCellsInfo(e,t,n){const i=this;if(!i.mergedCells)return;const a=n&&0!==n[i.datafields.length-1];i.mergedCellsPDF=i.mergedCells.slice(0);for(let r=0;r<i.mergedCellsPDF.length;r++){const o=i.mergedCellsPDF[r];let s=o.colspan,l=o.rowspan;if(l<2&&s<2)continue;const d=o.cell[1];let c=o.cell[0];if(a&&s>1){const u=n[c],m=n[c+s-1],y=[];if(m>u){let b=u,f=c,w=0;e:for(let v=u;v<=m;v++){let S=f,_=0;for(;n[f]===b;)if(f++,w++,_++,w===s){y.push({start:S,span:_});break e}y.push({start:S,span:_}),b=n[f]}s=y[0].span;for(let v=1;v<y.length;v++)i.mergedCellsPDF.push({cell:[y[v].start,d],colspan:y[v].span,rowspan:l,originalCell:c})}}for(let u=c;u<c+s;u++)for(let m=d;m<d+l;m++){const y=u+","+m;u!==c||m!==d?t[y]=!0:e[y]={colspan:s,rowspan:l,originalCell:o.originalCell}}}}getAlternationIndex(e,t){if(!this.style)return"";const n=this.style.rows;return n&&n.alternationCount&&((void 0===n.alternationStart||e>=n.alternationStart)&&(void 0===n.alternationEnd||e<=n.alternationEnd)||n.alternationStart===n.alternationEnd)?t+e%n.alternationCount:""}getFormattedValue(e,t){const n=this,i=n.style;if(null===e)return n.allowNull?"null":"";if(t&&i&&i.columns&&i.columns[t]&&i.columns[t].format){if("number"==typeof e)return n.formatNumber(e,i.columns[t].format);if(e instanceof Date)return n.formatDate(e,i.columns[t].format)}else if(e instanceof Date)return n.formatDate(e,"d");return e}exportToJSON(e,t){return this.downloadFile(JSON.stringify(e,this.datafields.concat("rows")),"application/json",t)}exportToMD(e,t){const n=this.datafields;let i="";for(let a=0,r=e.length;a<r;a+=1)for(let o=0,s=n.length;o<s;o+=1){const l=e[a][n[o]];"string"==typeof l&&(i+=l)}return this.downloadFile(i,"application/text",t)}exportToPDF(e,t){try{pdfMake}catch{throw new Error("Missing reference to 'pdfmake.min.js'.")}const n=this,i=n.datafields,a=+n.exportHeader,r=[],o={},s={},l={},d=a?n.complexHeader?n.complexHeader.length:1:0,c={pageOrientation:n.pageOrientation||"portrait"};let u,m=[],y=[];function b(){let w=[];for(let v=0;v<u.length;v++)w.push([]);return w}e=n.processGroupingInformation(e),n.data=e,n.headerRows=d,n.getPDFStyle();const f=n.styleInfo;u=f?n.wrapPDFColumns(c,l):[{body:m,datafields:i}],a&&(m=n.getPDFHeader(i,u,l)),n.getMergedCellsInfo(o,s,l);e:for(let w=a;w<e.length;w++){const v=e[w];let S="",_=0;if(n.groupBy)for(let L=0;L<n.groupBy.length;L++){const F=n.groupBy[L],B=v[F],J=n.groups[F][B];if(S+=B,-1===r.indexOf(S)){n.createGroupHeaderRow(u,{text:J,style:["row","cell","group"],marginLeft:7.5*_}),r.push(S),w--;continue e}_++}const T=b(),z=w-a;let M=n.getAlternationIndex(z,"");for(let L=0;L<i.length;L++){const F=i[L],B={style:["row","row"+z,"cell","cell"+F]},J=l[L]||0;if(void 0!==M&&B.style.splice(1,0,"rowN"+M),n.mergedCellsPDF){const ee=L+","+z,se=o[ee];if(se){if(B.colSpan=se.colspan,B.rowSpan=se.rowspan,void 0!==se.originalCell){B.text="",B.style[B.style.length-1]="cell"+i[se.originalCell],T[J].push(B);continue}}else if(s[ee]){T[J].push({});continue}}const Q=n.getFormattedValue(v[F],F);B.text=Q.toString(),n.getUniqueStylePDF(B,F,z),n.setIndentation(B,{j:L,currentRecord:v,value:Q,outlineLevel:_}),T[J].push(B)}for(let L=0;L<u.length;L++)u[L].body.push(T[L])}if(f){for(let w=0;w<u.length;w++){const v=u[w].body;for(let S=d-1;S>=0;S--)v.unshift(m[w][S]);y.push({table:{headerRows:d,widths:u[w].widths,heights:function(S){return f.heights[S]?f.heights[S]:f.defaultHeight?f.defaultHeight:void 0},body:v},pageBreak:"after"})}delete y[u.length-1].pageBreak,c.styles=f.styles}else{const w=u[0].body;for(let v=d-1;v>=0;v--)w.unshift(m[0][v]);y=[{table:{headerRows:d,body:w}}],c.styles={header:{bold:!0},group:{bold:!0}}}c.content=y,pdfMake.createPdf(c).download(t),delete n.mergedCellsPDF,delete n.styleInfo}getPDFStyle(){const e=this,t=e.style;if(!t)return"";const n=e.data[0],i=t.header,a=t.columns,r=t.rows,o={heights:[],widths:Array(e.datafields.length).fill("*"),styles:{header:{},row:{},cell:{},group:{fillColor:"#FFFFFF",color:"#000000",bold:!0}}};function s(l,d){if(l)for(let c in l)if(Object.prototype.hasOwnProperty.call(l,c))if(void 0===n[c])if("height"===c&&"header"===d)for(let u=0;u<e.headerRows;u++)o.heights[u]=parseInt(l[c],10)/e.headerRows/1.4;else e.storePDFStyle({prop:c,value:l[c],toUpdate:d});else for(let u in l[c]){if(!isNaN(u)||!Object.prototype.hasOwnProperty.call(l[c],u))continue;const m=l[c][u],y=e.datafields.indexOf(c);"width"===u&&"*"===o.widths[y]?o.widths[y]=m:e.storePDFStyle({prop:u,value:m,toUpdate:d+c})}}if(e.styleInfo=o,s(i,"header"),s(a,"cell"),r){for(let l in r){if(!Object.prototype.hasOwnProperty.call(r,l)||-1!==l.indexOf("alt"))continue;const d=r[l];if(isNaN(l))"height"===l?o.defaultHeight=parseFloat(d)/1.4:e.storePDFStyle({prop:l,value:d,toUpdate:"row"});else for(let c in d)Object.prototype.hasOwnProperty.call(d,c)&&("height"===c?o.heights[parseFloat(l)+e.headerRows]=parseFloat(d[c])/1.4:e.storePDFStyle({prop:c,value:d[c],toUpdate:"row"+l}))}if(r.alternationCount)for(let l=0;l<r.alternationCount;l++){const d={};r[`alternationIndex${l}Color`]&&(d.color=r[`alternationIndex${l}Color`]),r[`alternationIndex${l}BackgroundColor`]&&(d.fillColor=r[`alternationIndex${l}BackgroundColor`]),o.styles["rowN"+l]=d}}}storePDFStyle(e){let n=this.styleInfo.styles[e.toUpdate];n||(n={},this.styleInfo.styles[e.toUpdate]=n);let i=e.value;switch(e.prop){case"backgroundColor":n.fillColor=i;break;case"color":n.color=i;break;case"fontSize":n.fontSize=parseFloat(i);break;case"fontStyle":"italic"===i&&(n.italics=!0);break;case"fontWeight":"bold"===i&&(n.bold=!0);break;case"textAlign":n.alignment=i}}wrapPDFColumns(e,t){const n=this,i=this.styleInfo,a="portrait"===e.pageOrientation?655:1155,r=[];let o=0;for(let s=0;s<i.widths.length;s++){let l,d=i.widths[s];if("*"===d?l=a/6:"string"==typeof d&&-1!==d.indexOf("%")?(l=Math.min(a,Math.floor(parseFloat(d)/100*a)),l===a&&(d="*")):(d=parseFloat(d),d>=a?(l=a,d="*"):(l=d,d/=1.4)),void 0===r[o]){r[o]={body:[],width:l,widths:[d],datafields:[n.datafields[s]]},t[s]=o;continue}const c=r[o];c.width+l>a?(o++,s--):(t[s]=o,c.width+=l,c.widths.push(d),c.datafields.push(n.datafields[s]))}return r}getPDFHeader(e,t,n){const i=this,a=[],r=i.headerRows,o=[],s=[];let l,d,c=[];i.complexHeader?(l=i.complexHeader,d=i.complexDataFieldsHeader):(l=[Object.values(i.data[0])],d=l);for(let m=0;m<r;m++){const y=l[m],b=d[m];for(let f=0;f<y.length;f++){let w=n[f]||0;o[w]||(o[w]=[],s[w]=[]),o[w][m]||(o[w][m]=[],s[w][m]=[]),o[w][m].push(y[f]),s[w][m].push(b[f])}}function u(m,y,b,f){for(let w=0;w<r;w++){const v=m[w],S=y[w],_=[];for(let T=0;T<v.length;T++){const z=S[T];let M=1,L=1;if(S[T-1]&&S[T-1]===z||y[w-1]&&y[w-1][T]===z){_.push({});continue}let F=T+1;for(;S[F]&&S[F]===S[F-1];)M++,F++;for(F=w+1;y[F]&&y[F][T]===z;)L++,F++;const B=w===r-1||L+w===r?f.datafields[T]:null,J={text:v[T],colSpan:M,rowSpan:L};B?J.style=["header","header"+B]:(J.alignment="center",J.style="header"),_.push(J)}b.push(_)}}for(let m=0;m<t.length;m++)c=[],u(o[m],s[m],c,t[m]),a.push(c);return a}createGroupHeaderRow(e,t){for(let n=0;n<e.length;n++){const i=Object.assign({},t),a=e[n].datafields.length,r=[i];i.colSpan=a,r.length=a,r.fill({},1,a-1),e[n].body.push(r)}}getUniqueStylePDF(e,t,n){const i=this.style;if(!i||!i.columns||!i.columns[t])return;const a=i.columns[t][n];a&&(e.fillColor=function(r){const o=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(r.replace(/\s/g,""));if(null===o)return r;const s=parseFloat(o[1]).toString(16).toUpperCase(),l=parseFloat(o[2]).toString(16).toUpperCase(),d=parseFloat(o[3]).toString(16).toUpperCase();return"#"+"0".repeat(2-s.length)+s+"0".repeat(2-l.length)+l+"0".repeat(2-d.length)+d}(a.background),e.color=a.color.toLowerCase())}setIndentation(e,t){if(0!==t.j)return;const n=this;if(n.actualHierarchy){const i=t.currentRecord;void 0!==i._expanded?(e.marginLeft=25*(i._level-1),e.text=n.collapseChar+" "+t.value):e.marginLeft=25*(i._level-1)+6}else t.outlineLevel>1&&(e.marginLeft=7.5*(t.outlineLevel-1))}exportToXLSX(e,t){try{JSZip}catch{throw new Error("Missing reference to 'jszip.min.js'.")}const n=this;let i=n.style;if(e=n.processGroupingInformation(e,!0),n.data=e,n.getColumnsArray(),n.complexHeaderMergedCells=[],n.complexHeaderMergeInfo)for(let v in n.complexHeaderMergeInfo)if(Object.prototype.hasOwnProperty.call(n.complexHeaderMergeInfo,v)){const S=n.complexHeaderMergeInfo[v];if(S.from[0]===S.to[0]&&S.from[1]===S.to[1])continue;n.complexHeaderMergedCells.push({from:n.columnsArray[S.from[1]]+(S.from[0]+1),to:n.columnsArray[S.to[1]]+(S.to[0]+1)})}n.getConditionalFormatting(),i||(i=n.generateDefaultStyle(e));const a=n.generateSharedStrings(e),r=a.collection,o=a.xml,s=n.generateStyles(i),l=n.groupBy?n.generateSheet1WithGrouping(e,r):n.generateSheet1(e,r),d=n.generateAuxiliaryFiles(),c=new JSZip,u=c.folder("_rels"),m=c.folder("docProps"),y=c.folder("xl"),b=y.folder("_rels"),f=y.folder("theme"),w=y.folder("worksheets");u.file(".rels",d._relsRels),m.file("app.xml",d.docPropsAppXml),m.file("core.xml",d.docPropsCoreXml),b.file("workbook.xml.rels",d.xl_relsWorkbookXmlRels),f.file("theme1.xml",d.xlThemeTheme1Xml),w.file("sheet1.xml",l),y.file("sharedStrings.xml",o),y.file("styles.xml",s),y.file("workbook.xml",d.xlWorkbookXml),c.file("[Content_Types].xml",d.Content_TypesXml),c.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}).then(function(v){return n.downloadFile(v,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t)}),delete n.conditionalFormattingXLSX,delete n.complexHeaderMergeInfo,delete n.defaultRowHeight,delete n.rowHeight}processGroupingInformation(e,t){const n=this;if(!n.groupBy)return e;let i;if(e=e.slice(0),n.exportHeader&&(t&&n.complexHeader?(i=e.slice(0,n.complexHeader.length),e.splice(0,n.complexHeader.length)):(i=[e[0]],e.splice(0,1))),e.length>1){const a=function(r,o){let s;switch(o||typeof r){case"string":s=(new Intl.Collator).compare;break;case"number":s=function(l,d){return l-d};break;case"boolean":case"bool":s=function(l,d){return l===d?0:!1===l?-1:1};break;case"date":case"time":case"dateTime":r instanceof Date?s=function(l,d){return l.getTime()-d.getTime()}:(r instanceof Smart.Utilities.DateTime||r instanceof Smart.Utilities.BigNumber)&&(s=function(l,d){return l.compare(d)});break;case"object":if(r instanceof Date)s=function(l,d){return l.getTime()-d.getTime()};else if(r instanceof Smart.Utilities.DateTime||r instanceof Smart.Utilities.BigNumber)s=function(l,d){return l.compare(d)};else if(r instanceof Smart.Utilities.Complex||window.NIComplex&&r instanceof window.NIComplex){const l=new Smart.Utilities.ComplexNumericProcessor;s=function(d,c){return l.compareComplexNumbers(d,c)}}}return s};!function(r,o,s,l){if(!r||!Array.isArray(r)||0===r.length||!o||Array.isArray(o)&&0===o.length)return;"string"==typeof o&&(o=[o]);const d=[],c=[];void 0===s&&(s=[]);for(let u=0;u<o.length;u++)d[u]=void 0===s[u]||"asc"===s[u]||"ascending"===s[u]?1:-1,c[u]=a(r[0][o[u]]);r.sort(function(u,m){for(let y=0;y<o.length;y++){const b=c[y](u[o[y]],m[o[y]]);if(0===b){if(o[y+1])continue;return void 0!==u._index?(u._index-m._index)*d[y]:0}return b*d[y]}})}(e,n.groupBy)}return i&&(e=i.concat(e)),n.getGroupLabels(e),e}exportToXML(e,t){const n=this.datafields.slice(0);let i='<?xml version="1.0" encoding="UTF-8" ?>\n<table>\n';return-1===n.indexOf("rows")&&n.push("rows"),i+=function a(r,o){let s="";for(let l=0;l<r.length;l++){const d=r[l];s+=o+"<row>\n";for(let c=0;c<n.length;c++){const u=n[c];if("rows"!==u)s+=o+`    <${u}>${d[u]}</${u}>\n`;else{if(!d.rows)continue;s+=`${o}    <rows>\n${a(d.rows,o+"        ")}${o}    </rows>\n`}}s+=o+"</row>\n"}return s}(e,"    ")+"</table>",this.downloadFile(i,"application/xml",t)}formatDate(e,t){if(!Smart.Utilities.DateTime)return e;try{return new Smart.Utilities.DateTime(e).toString(t)}catch{return e}}formatNumber(e,t){if(!Smart.Utilities.NumberRenderer)return e;const n=(new Smart.Utilities.NumberRenderer).formatNumber(e,t);return void 0===n?e:n}generateAuxiliaryFiles(){const e=(new Date).toISOString();return{_relsRels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',docPropsAppXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="1" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr></vt:vector></TitlesOfParts><Company></Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>',docPropsCoreXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>Smart HTML Elements</dc:creator><cp:lastModifiedBy>Smart HTML Elements</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${e}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${e}</dcterms:modified></cp:coreProperties>`,xl_relsWorkbookXmlRels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId4" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/></Relationships>',xlThemeTheme1Xml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="44546A"/></a:dk2><a:lt2><a:srgbClr val="E7E6E6"/></a:lt2><a:accent1><a:srgbClr val="4472C4"/></a:accent1><a:accent2><a:srgbClr val="ED7D31"/></a:accent2><a:accent3><a:srgbClr val="A5A5A5"/></a:accent3><a:accent4><a:srgbClr val="FFC000"/></a:accent4><a:accent5><a:srgbClr val="5B9BD5"/></a:accent5><a:accent6><a:srgbClr val="70AD47"/></a:accent6><a:hlink><a:srgbClr val="0563C1"/></a:hlink><a:folHlink><a:srgbClr val="954F72"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Calibri Light" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="\u6e38\u30b4\u30b7\u30c3\u30af Light"/><a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/><a:font script="Hans" typeface="\u7b49\u7ebf Light"/><a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="\u6e38\u30b4\u30b7\u30c3\u30af"/><a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/><a:font script="Hans" typeface="\u7b49\u7ebf"/><a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:lumMod val="110000"/><a:satMod val="105000"/><a:tint val="67000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="103000"/><a:tint val="73000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="109000"/><a:tint val="81000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:satMod val="103000"/><a:lumMod val="102000"/><a:tint val="94000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:satMod val="110000"/><a:lumMod val="100000"/><a:shade val="100000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="99000"/><a:satMod val="120000"/><a:shade val="78000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="6350" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="12700" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="19050" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="57150" dist="19050" dir="5400000" algn="ctr" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="63000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:solidFill><a:schemeClr val="phClr"><a:tint val="95000"/><a:satMod val="170000"/></a:schemeClr></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="93000"/><a:satMod val="150000"/><a:shade val="98000"/><a:lumMod val="102000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:tint val="98000"/><a:satMod val="130000"/><a:shade val="90000"/><a:lumMod val="103000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="63000"/><a:satMod val="120000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri="{05A4C25C-085E-4340-85A3-A5531E510DB2}"><thm15:themeFamily xmlns:thm15="http://schemas.microsoft.com/office/thememl/2012/main" name="Office Theme" id="{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}" vid="{4A3C46E8-61CC-4603-A589-7422A47A8E4A}"/></a:ext></a:extLst></a:theme>',xlWorkbookXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15 xr xr6 xr10 xr2" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr6="http://schemas.microsoft.com/office/spreadsheetml/2016/revision6" xmlns:xr10="http://schemas.microsoft.com/office/spreadsheetml/2016/revision10" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2"><fileVersion appName="xl" lastEdited="7" lowestEdited="7" rupBuild="20325"/><workbookPr defaultThemeVersion="166925"/><mc:AlternateContent xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"><mc:Choice Requires="x15"><x15ac:absPath url="C:UsersjqwidgetsDesktop" xmlns:x15ac="http://schemas.microsoft.com/office/spreadsheetml/2010/11/ac"/></mc:Choice></mc:AlternateContent><xr:revisionPtr revIDLastSave="0" documentId="13_ncr:1_{0DEDCB6D-5403-4CD8-AAA5-59B6D238A8B6}" xr6:coauthVersionLast="34" xr6:coauthVersionMax="34" xr10:uidLastSave="{00000000-0000-0000-0000-000000000000}"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="19200" windowHeight="6950" xr2:uid="{0CB664E6-3800-4A88-B158-B46A682E7484}"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets><calcPr calcId="179021"/><extLst><ext uri="{140A7094-0E35-4892-8432-C4D2E57EDEB5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:workbookPr chartTrackingRefBase="1"/></ext></extLst></workbook>',Content_TypesXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="bin" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings"/><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/></Types>'}}generateDefaultStyle(e){const t=this,n={},i=t.datafields,a=t.complexHeader?e[t.complexHeader.length]:e[+t.exportHeader];if(!a)return n;for(let r=0;r<i.length;r++)a[i[r]]instanceof Date&&(n.columns||(n.columns=[]),n.columns[i[r]]={format:"d"});return n}generateGroupRow(e){const t=e.rowNumber,n="A"+t,i=`        <row r="${t}" outlineLevel="${e.outlineLevel}" spans="1:${e.numberOfColumns}"${this.getCustomRowHeight(t-1)} x14ac:dyDescent="0.45">\n            <c r="${n}" t="s" s="0">\n                <v>${e.sharedStringIndex}</v>\n            </c>\n        </row>\n`;return e.mergedCells.push({from:n,to:this.columnsArray[e.numberOfColumns-1]+t}),i}generateSharedStrings(e){const t=this,n=t.datafields,i=[];let a="",r=0,o=0;function s(l){r++,-1===i.indexOf(l)&&(o++,i.push(l),l=(l=(l=(l=(l=l.replace(/&(?!amp;)/g,"&amp;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;"),a+=`<si><t>${l}</t></si>`)}for(let l=0;l<e.length;l++){const d=e[l];for(let c=0;c<n.length;c++){let u=d[n[c]];null!==u||t.allowNull||(u=""),"string"==typeof u&&s(u)}}if(t.groupLabels)for(let l=0;l<t.groupLabels.length;l++)s(t.groupLabels[l]);return a=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${r}" uniqueCount="${o}">${a}</sst>`,{collection:i,xml:a}}generateSheet1(e,t){const n=this,i=n.columnsArray.length,r=n.columnsArray[i-1]+e.length,o=n.datafields,s=n.getFilters(),l=[].concat(n.complexHeaderMergedCells);let d=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">\n    <sheetPr filterMode="${""!==s}" />\n    <dimension ref="A1:${r}" />\n    <sheetViews>\n        <sheetView tabSelected="1" workbookViewId="0" />\n    </sheetViews>\n    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${n.getCustomColumnWidths()}\n    <sheetData>\n`;function c(u,m){return n.columnsArray[u]+m}for(let u=0;u<=e.length;u++){const m=e[u],y=u+1;let b="";if(n.actualHierarchy){const w=e[u-1];w&&w._collapsed&&(!m||w._level>m._level)&&(b=' collapsed="true"')}if(u===e.length){b&&(d+=`        <row r="${y}" outlineLevel="${Math.max(e[u-1]._level-2,0)}" hidden="false" collapsed="true" />\n`);break}let f=`        <row r="${y}"${n.getOutlineLevel(m)} hidden="${m._hidden||m._collapsed||!1}"${b} spans="1:${i}"${n.getCustomRowHeight(y-1)} x14ac:dyDescent="0.45">\n`;for(let w=0;w<o.length;w++){const v=n.getXLSXCellStyle(c(w,y));f+=n.getActualCellData(m[o[w]],{r:c(w,y),s:v},t)}f+="        </row>\n",d+=f}return d+=`    </sheetData>${n.conditionalFormattingXLSX.conditions}${s}${n.getMergedCells(l)}\n    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />\n</worksheet>`,d}generateSheet1WithGrouping(e,t){const n=this,i=n.columnsArray.length,r=n.columnsArray[i-1]+e.length,o=n.datafields,s=[].concat(n.complexHeaderMergedCells);let l=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">\n    <dimension ref="A1:${r}" />\n    <sheetViews>\n        <sheetView tabSelected="1" workbookViewId="0" />\n    </sheetViews>\n    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${n.getCustomColumnWidths()}\n    <sheetData>\n`,d=0,c=[];function u(m,y){return n.columnsArray[m]+y}e:for(let m=0;m<e.length;m++){const y=e[m],b=m+1+d;let f=0,w="";if(!n.exportHeader||!n.complexHeader&&0!==m||n.complexHeader&&m>=n.complexHeader.length){let S="";for(let _=0;_<n.groupBy.length;_++){const T=n.groupBy[_],z=y[T],M=n.groups[T][z];if(S+=z,-1===c.indexOf(S)){let L=t.indexOf(M);l+=n.generateGroupRow({rowNumber:b,outlineLevel:f,numberOfColumns:i,sharedStringIndex:L,mergedCells:s}),c.push(S),m--,d++;continue e}f++}w=` outlineLevel="${f}"`}let v=`        <row r="${b}"${w} spans="1:${i}"${n.getCustomRowHeight(b-1)} x14ac:dyDescent="0.45">\n`;for(let S=0;S<o.length;S++){const _=n.getXLSXCellStyle(u(S,m+1));v+=n.getActualCellData(y[o[S]],{r:u(S,b),s:_},t)}v+="        </row>\n",l+=v}return l+=`    </sheetData>${n.getMergedCells(s)}\n    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />\n</worksheet>`,l}getActualCellData(e,t,n){const i=t.r,a=t.s||' s="0"';return null!==e||this.allowNull||(e=""),"string"==typeof e?`            <c r="${i}" t="s"${a}>\n                <v>${n.indexOf(e)}</v>\n            </c>\n`:"boolean"==typeof e?`            <c r="${i}" t="b"${a}>\n                <v>${+e}</v>\n            </c>\n`:e instanceof Date?`            <c r="${i}"${a}>\n                <v>${2+Math.round(this.timeBetween1900And1970/864e5)+(e.getTime()-60*e.getTimezoneOffset()*1e3)/864e5}</v>\n            </c>\n`:`            <c r="${i}"${a}>\n                <v>${e}</v>\n            </c>\n`}getColumnsArray(){const e=this.datafields.length,t=[];function n(i){return i<26?"":String.fromCharCode(64+Math.floor(i/26))}for(let i=0;i<e;i++)t.push(n(i)+String.fromCharCode(65+(i<26?i:i%26)));this.columnsArray=t}getColumnStyle(){const e=this,t=e.style;if(!t)return"        .header { border: 1px solid black; padding: 5px; }\n        .column { border: 1px solid black; padding: 5px; }\n        .group { background-color: #FFFFFF; color: #000000; font-weight: bold; }";let n;n=t.removeDefault?{header:"",column:"",group:""}:{header:"border: 1px solid black; padding: 5px; ",column:"white-space: nowrap; overflow: hidden; border: 1px solid black; padding: 5px; ",group:"background-color: #FFFFFF; color: #000000; font-weight: bold; "};const i=e.data[0];let a="";const r=t.header||{};for(let s in r){if(!Object.prototype.hasOwnProperty.call(r,s))continue;const l=r[s];if(i[s]){n["header"+s]||(n["header"+s]="");for(let d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const c=Smart.Utilities.Core.toDash(d)+": "+l[d]+"; ";n["header"+s]+=c,"width"===d&&(n["column"+s]||(n["column"+s]=""),n["column"+s]+=c)}}else n.header+="height"===s&&e.complexHeader?"height: "+parseInt(r[s],10)/e.complexHeader.length+"px; ":Smart.Utilities.Core.toDash(s)+": "+r[s]+"; "}const o=t.columns||{};for(let s in o){if(!Object.prototype.hasOwnProperty.call(o,s))continue;const l=o[s];if(i[s]){n["column"+s]||(n["column"+s]="");for(let d in l)isNaN(d)&&Object.prototype.hasOwnProperty.call(l,d)&&"format"!==d&&(n["column"+s]+=Smart.Utilities.Core.toDash(d)+": "+l[d]+"; ")}else n.column+=Smart.Utilities.Core.toDash(s)+": "+l+"; "}for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(a+=`        .${s} { ${n[s]}}\n`);return t.custom&&(a+=`${t.custom}\n`),a}getCustomColumnWidths(){const e=this;if(!e.style||!e.columnWidth||0===e.columnWidth.length)return"";let t="\n    <cols>\n";for(let n=0;n<e.columnWidth.length;n++){let i=e.columnWidth[n];void 0!==i&&(i=Math.round(parseFloat(i))/7,t+=`        <col min="${n+1}" max="${n+1}" width="${i}" customWidth="1" />\n`)}return t+="    </cols>",t}getCustomFilter(e,t){let n,i="equal";switch(e instanceof Date&&(e=(e.getTime()+this.timeBetween1900And1970)/864e5+2),t=t.toUpperCase()){case"EMPTY":n="";break;case"NOT_EMPTY":n="",i="notEqual";break;case"CONTAINS":case"CONTAINS_CASE_SENSITIVE":n=`*${e}*`;break;case"DOES_NOT_CONTAIN":case"DOES_NOT_CONTAIN_CASE_SENSITIVE":n=`*${e}*`,i="notEqual";break;case"STARTS_WITH":case"STARTS_WITH_CASE_SENSITIVE":n=`${e}*`;break;case"ENDS_WITH":case"ENDS_WITH_CASE_SENSITIVE":n=`*${e}`;break;case"EQUAL":case"EQUAL_CASE_SENSITIVE":n=e;break;case"NULL":n=null;break;case"NOT_NULL":n=null,i="notEqual";break;case"NOT_EQUAL":n=e,i="notEqual";break;case"LESS_THAN":n=e,i="lessThan";break;case"LESS_THAN_OR_EQUAL":n=e,i="lessThanOrEqual";break;case"GREATER_THAN":n=e,i="greaterThan";break;case"GREATER_THAN_OR_EQUAL":n=e,i="greaterThanOrEqual"}return`                <customFilter val="${n}" operator="${i}"/>\n`}getCustomRowHeight(e){const t=this;return t.style&&(t.rowHeight[e]||t.defaultRowHeight)||""}getDatafields(e){const t=e[0],n=[];for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&"_"!==i.charAt(0)&&n.push(i);this.datafields=n}getFilters(){const e=this,t=e.filterBy;if(!t)return"";let n="";for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const a=e.datafields.indexOf(i);if(-1===a)continue;const r=t[i],o=r.filters;n+=`        <filterColumn colId="${a}">\n            <customFilters and="${!r.operator}">\n`;for(let s=0;s<o.length;s++)n+=e.getCustomFilter(o[s].value,o[s].condition);n+="            </customFilters>\n        </filterColumn>"}return n?(n=`\n    <autoFilter ref="A1:${e.columnsArray[e.columnsArray.length-1]+e.data.length}">\n${n}\n    </autoFilter>`,n):""}getGroupLabels(e){const t=this,n=void 0!==t.xlsxStartIndex?t.xlsxStartIndex:+t.exportHeader,i={},a=[];for(let r=n;r<e.length;r++){const o=e[r];for(let s=0;s<t.groupBy.length;s++){const l=t.groupBy[s],d=o[l];let c=i[l];void 0===c&&(i[l]={},c=i[l]),void 0===c[d]&&(c[d]=(t.exportHeader?e[n-1][l]:l)+": "+d,a.push(c[d]))}}t.groups=i,t.groupLabels=a}getHTMLHeader(e,t){const n=this;let i="\n        <thead>\n";if(!n.complexHeader){i+="            <tr>\n";for(let a=0;a<e.length;a++){const r=e[a];i+=`                <th class="header header${r}">${t[0][r]}</th>\n`}return i+="            </tr>\n        </thead>",i}for(let a=0;a<n.complexDataFieldsHeader.length;a++){const r=n.complexDataFieldsHeader[a];i+="            <tr>\n";for(let o=0;o<r.length;o++){const s=r[o];let l=1,d=1;if(r[o-1]&&r[o-1]===s||n.complexDataFieldsHeader[a-1]&&n.complexDataFieldsHeader[a-1][o]===s)continue;let c=o+1;for(;r[c]&&r[c]===r[c-1];)l++,c++;for(c=a+1;n.complexDataFieldsHeader[c]&&n.complexDataFieldsHeader[c][o]===s;)d++,c++;i+=`                <th class="header${a===n.complexHeader.length-1||d+a===n.complexHeader.length?" header"+e[o]:""}" colspan="${l}" rowspan="${d}">${n.complexHeader[a][o]}</th>\n`}i+="            </tr>\n"}return i+="        </thead>",i}getConditionalFormatting(){const e=this,t=e.conditionalFormatting;if(!t)return void(e.conditionalFormattingXLSX={conditions:"",styles:""});const n=[];let i="",a="";for(let r=t.length-1;r>=0;r--){const o=t[r],s=e.columnsArray[e.datafields.indexOf(o.column)],l=s+(e.xlsxStartIndex+1),d=l+":"+s+e.data.length,c=o.background+o.color,u=e.getConditionalAttributes(o,l);let m=n.indexOf(c);-1===m&&(a+=`        <dxf>\n            <font>\n                <b val="0"/>\n                <i val="0"/>\n                <color rgb="${"White"===o.color?"FFFFFFFF":"FF000000"}"/>\n                <sz val="10"/>\n            </font>\n            <fill>\n                <patternFill>\n                    <bgColor rgb="${e.toARGB(o.background)}"/>\n                </patternFill>\n            </fill>\n        </dxf>\n`,m=n.length,n.push(c)),i+=`    <conditionalFormatting sqref="${d}">\n        <cfRule dxfId="${m}" text="${u.text}" rank="${u.rank}" percent="${u.percent}" bottom="${u.bottom}" equalAverage="${u.equalAverage}" aboveAverage="${u.aboveAverage}"${u.operator}${u.timePeriod} priority="${r+2}" type="${u.type}">\n${u.formula}        </cfRule>\n    </conditionalFormatting>\n`}a=`    <dxfs count="${n.length}">\n${a}    </dxfs>`,e.conditionalFormattingXLSX={conditions:i,styles:a}}getConditionalAttributes(e,t){let i=e.comparator,a="",r=0,o=0,s=0,l=0,d="",c="",u="",m="";switch(e.condition){case"equal":d="equal",u="cellIs",m=`            <formula>${i}</formula>\n`;break;case"lessThan":d="lessThan",u="cellIs",m=`            <formula>${i}</formula>\n`;break;case"greaterThan":d="greaterThan",u="cellIs",m=`            <formula>${i}</formula>\n`;break;case"notEqual":d="notEqual",u="cellIs",m=`            <formula>${i}</formula>\n`;break;case"between":d="between",u="cellIs",m=`            <formula>${e.min}</formula>\n            <formula>${e.max}</formula>\n`;break;case"duplicate":u="duplicateValues",m="            <formula>0</formula>\n";break;case"topNItems":r=i,u="top10";break;case"bottomNItems":r=i,s=1,u="top10";break;case"topNPercent":r=i,o=1,u="top10";break;case"bottomNPercent":r=i,o=1,s=1,u="top10";break;case"aboveAverage":l=1,u="aboveAverage",m="            <formula>0</formula>\n";break;case"belowAverage":u="aboveAverage",m="            <formula>0</formula>\n";break;case"contains":a=i,d="containsText",u="containsText",m=`            <formula>NOT(ISERROR(SEARCH("${i}",${t})))</formula>\n`;break;case"doesNotContain":a=i,d="notContains",u="notContainsText",m=`            <formula>ISERROR(SEARCH("${i}",${t}))</formula>\n`;break;case"dateOccur":c=` timePeriod="${i}"`,u="timePeriod"}return d&&(d=` operator="${d}" `),{text:a,rank:r,percent:o,bottom:s,equalAverage:0,aboveAverage:l,operator:d,timePeriod:c,type:u,formula:m}}getMergedCells(e){const t=this;let n="";for(let i=0;i<e.length;i++)e[i].from!==e[i].to&&(n+=`\n        <mergeCell ref="${e[i].from}:${e[i].to}" />\n`);if(t.mergedCells)for(let i=0;i<t.mergedCells.length;i++){const a=t.mergedCells[i];a.rowspan<2&&a.colspan<2||(n+=`\n        <mergeCell ref="${t.columnsArray[a.cell[0]]+(a.cell[1]+t.xlsxStartIndex+1)}:${t.columnsArray[a.cell[0]+a.colspan-1]+(a.cell[1]+t.xlsxStartIndex+a.rowspan)}" />\n`)}return n&&(n=`\n    <mergeCells count="${e.length}">${n}    </mergeCells>`),n}getNumFmtIndex(e,t){let n=t.collection.indexOf(e);return-1===n?(n=t.collection.length+100,t.collection.push(e),t.xml+=`<numFmt numFmtId="${n}" formatCode="${e}"/>`):n+=100,n}getOutlineLevel(e){return this.actualHierarchy&&1!==e._level?` outlineLevel="${e._level-1}"`:""}getRowStyle(){const e=this.style;if(!e)return"";const t=e.rows;if(!t)return"";const n={row:""};let i="";for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r)||"alternationCount"===r||"alternationStart"===r||"alternationEnd"===r)continue;const o=t[r];if(-1===r.indexOf("alt"))if(isNaN(r))n.row+=Smart.Utilities.Core.toDash(r)+": "+t[r]+"; ";else{n["row"+r]||(n["row"+r]="");for(let s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n["row"+r]+=Smart.Utilities.Core.toDash(s)+": "+o[s]+"; ")}else{const s=r.slice(16,17),l=r.slice(17);n["rowN"+s]||(n["rowN"+s]=""),n["rowN"+s]+="Color"===l?"color : "+o+"; ":"BorderColor"===l?"border-color : "+o+"; ":"background-color : "+o+"; "}}let a=Object.keys(n);a.sort(function(r,o){if("row"===r)return-1;if("row"===o)return 1;const s=!isNaN(r.slice(3)),l=!isNaN(o.slice(3));return s&&!l?1:!s&&l?-1:+(r<o)});for(let r=0;r<a.length;r++)i+=`        .${a[r]} { ${n[a[r]]}}\n`;return i}getTableStyle(){const e=this.style;if(!e)return' style="table-layout: fixed; border: 1px solid black; border-collapse: collapse;"';let t="table-layout: fixed; ";for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===["header","columns","rows","removeDefault","custom"].indexOf(n)&&(t+=Smart.Utilities.Core.toDash(n)+": "+e[n]+"; ");return t&&(t=' style="'+t+'"'),t}getXLSXCellStyle(e){return void 0!==this.cellStyleMapping[e]?` s="${this.cellStyleMapping[e]}"`:""}getXLSXFormat(e,t){if("number"==typeof t){if(!/^([a-zA-Z]\d*)$/g.test(e))return e;let n=parseFloat(e.slice(1))||0,i=n>0?"."+"0".repeat(n):"";switch(e=e.slice(0,1)){case"C":case"c":return"$#,0"+i;case"D":case"d":return n?"0".repeat(n):"0";case"E":case"e":return"0"+i+e+"000";case"F":case"f":return"0"+i;case"N":case"n":return"#,0"+i;case"P":case"p":return"#,0"+i+" %";default:return}}else if(t instanceof Date){switch(e){case"d":return"m/d/yyyy";case"D":return"nnnnmmmm dd, yyyy";case"t":return"h:m AM/PM";case"T":return"h:mm:ss AM/PM";case"f":return"nnnnmmmm dd, yyyy h:m AM/PM";case"F":return"nnnnmmmm dd, yyyy h:mm:ss AM/PM";case"M":return"mmmm d";case"Y":return"yyyy mmmm";case"FP":case"PP":return"yyyy-mm-dd hh:mm:ss";case"FT":case"PT":return"hh:mm:ss"}return(e=(e=(e=e.replace(/f|u|n|p|e|a|x|o/gi,"")).replace(/tt/gi,"AM/PM")).replace(/:{2,}|:\s|:$|\.$/g,"")).trim()}}processColumnStyle(e){const t=this,n=e.header,i=e.columns,a=t.data[0],r=t.xlsxStartIndex;if(t.columnWidth=[],r&&n)for(let o=0;o<t.columnsArray.length;o++){const s=t.columnsArray[o],l=s+r,d=n[t.datafields[o]];for(let c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&void 0===a[c])if(t.complexHeader)for(let u=0;u<t.complexHeader.length;u++)"height"!==c?t.storeCellStyle(s+(u+1),c,n[c]):t.rowHeight[u]=` ht="${parseFloat(n.height)/t.complexHeader.length/2}"`;else{if("height"===c){t.rowHeight[0]=` ht="${parseFloat(n.height)/2}"`;continue}t.storeCellStyle(l,c,n[c])}if(d)for(let c in d)if(Object.prototype.hasOwnProperty.call(d,c)){if("width"===c){t.columnWidth[o]=d.width;continue}t.storeCellStyle(l,c,d[c])}}else if(n)for(let o=0;o<t.columnsArray.length;o++){const s=n[t.datafields[o]];s&&void 0!==s.width&&(t.columnWidth[o]=s.width)}if(!i)return"";for(let o=r;o<t.data.length;o++)for(let s=0;s<t.columnsArray.length;s++){const l=t.columnsArray[s]+(o+1),d=t.datafields[s],c=i[d];for(let u in i)Object.prototype.hasOwnProperty.call(i,u)&&void 0===a[u]&&t.storeCellStyle(l,u,i[u]);if(c)for(let u in c)isNaN(u)&&Object.prototype.hasOwnProperty.call(c,u)&&t.storeCellStyle(l,u,c[u],t.data[o][d])}}processComplexHeader(e,t,n){const i=this,a={},r=-1!==["html","jpeg","pdf","png","xlsx"].indexOf(n)&&e.columngroups,o=[],s={},l={},d=[],c=[];let u=0;function m(b){for(let f=0;f<e.columngroups.length;f++){const w=e.columngroups[f];if(w.name===b)return w}}function y(b,f){const w=[];for(;b;){if(w.unshift(b[f]),!b.parentGroup)return w;b=m(b.parentGroup)}}if(r){for(let b=0;b<e.columngroups.length;b++){const f=e.columngroups[b],w=y(f,"label");s[f.name]=w,l[f.name]=y(f,"name"),u=Math.max(u,w.length)}u++;for(let b=0;b<u;b++)d[b]=[],c[b]=[]}for(let b=0;b<e.columns.length;b++){const f=e.columns[b];if(a[f.dataField]=f.label,!r||(o[b]=f.dataField,d[u-1][b]=f.label,c[u-1][b]=f.dataField,!f.columnGroup))continue;const w=s[f.columnGroup],v=l[f.columnGroup];if(w)for(let S=0;S<w.length;S++)d[S][b]=w[S],c[S][b]=v[S]}if(d.length>1){const b=Object.keys(a).length;for(let f=0;f<u-1;f++){const w={};for(let v=0;v<b;v++){if(void 0===d[f][v]){let S=f+1;for(;void 0===d[S][v];)S++;d[f][v]=d[S][v],c[f][v]=c[S][v]}w[o[v]]=d[f][v]}"xlsx"===n&&t.splice(f,0,w)}if(i.complexHeader=d,i.complexDataFieldsHeader=c,"xlsx"!==n)t.unshift(a);else{t.splice(u-1,0,a);const f={};for(let w=0;w<u;w++)for(let v=0;v<b;v++){const S=c[w][v];if(f[S]){const _=f[S].to;if(w-_[0]>1||v-_[1]>1){f[S+Math.random().toString(36)]=f[S],f[S]={from:[w,v],to:[w,v]};continue}f[S].to=[w,v]}else f[S]={from:[w,v]},f[S].to=f[S].from}i.complexHeaderMergeInfo=f}}else t.unshift(a)}processHierarchicalData(e,t){const n=this,i="xlsx"!==t?+n.exportHeader:n.xlsxStartIndex,a={},r=[];let o=0,s=!1;if(void 0===e[i]._keyDataField)return n.processNestedData(e,t,i);for(let l=i;l<e.length;l++){const d=Object.assign({},e[l]);let c=d._parentDataField;void 0===c&&(c=null),void 0===a[c]?a[c]=[d]:a[c].push(d)}if(i)for(let l=0;l<i;l++)r.push(Object.assign({},e[l])),-1===["json","pdf","xml"].indexOf(t)&&(r[l]._level=1);return"json"!==t&&"xml"!==t?function l(d,c,u){const m=a[d];if(o=Math.max(o,c),void 0!==m)for(let y=0;y<m.length;y++){const b=m[y],f=b._keyDataField;b._collapsed=u,b._level=c,r.push(b),a[f]&&(s=!0,b._expanded=void 0===b._expanded||b._expanded,l(f,c+1,u||!b._expanded))}}(null,1,!1):function l(d,c,u){const m=a[d];if(o=Math.max(o,c),void 0!==m)for(let y=0;y<m.length;y++){const b=m[y],f=b._keyDataField;let w;if("json"===t){w={};for(let v in b)Object.prototype.hasOwnProperty.call(b,v)&&"_"!==v.charAt(0)&&(w[v]=b[v])}else w=Object.assign({},b);u.push(w),a[f]&&(s=!0,w.rows=[],l(f,c+1,w.rows))}}(null,1,r),s||(n.actualHierarchy=!1),n.maxLevel=o,r}processNestedData(e,t,n){const a=[];let r=0,o=!1;if(n)for(let s=0;s<n;s++)a.push(Object.assign({},e[s])),-1===["json","pdf","xml"].indexOf(t)&&(a[s]._level=1);return"json"!==t&&"xml"!==t?function s(l,d,c,u){r=Math.max(r,c);for(let m=l;m<d.length;m++){const y=Object.assign({},d[m]);y._collapsed=u,y._level=c,a.push(y),y.children&&y.children.length>0&&(o=!0,y._expanded=void 0===y._expanded||y._expanded,s(0,y.children,c+1,u||!y._expanded)),delete y.children}}(n,e,1,!1):function s(l,d,c,u){r=Math.max(r,u);for(let m=l;m<d.length;m++){const y=Object.assign({},d[m]);1===u?a[m]=y:c[m]=y,y.children&&y.children.length>0&&(o=!0,y.rows=[],s(0,y.children,y.rows,u+1)),delete y.children}}(n,e,void 0,1),o||(this.actualHierarchy=!1),this.maxLevel=r,a}processRowStyle(e){const t=this,n=e.rows;if(t.rowHeight=[],!n)return;const i=t.xlsxStartIndex;function a(r,o,s){for(let l=0;l<t.columnsArray.length;l++)t.storeCellStyle(t.columnsArray[l]+(r+1+i),o,s)}n.height&&(t.defaultRowHeight=` ht="${parseFloat(n.height)/2}"`);for(let r=i;r<t.data.length;r++){const o=r-i;for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&-1===s.indexOf("alt")&&isNaN(s)&&"height"!==s&&a(o,s,n[s]);if(n.alternationCount&&((void 0===n.alternationStart||o>=n.alternationStart)&&(void 0===n.alternationEnd||o<=n.alternationEnd)||n.alternationStart===n.alternationEnd)){const s=(o-(n.alternationStart||0))%n.alternationCount;n[`alternationIndex${s}Color`]&&a(o,"color",n[`alternationIndex${s}Color`]),n[`alternationIndex${s}BorderColor`]&&a(o,"borderColor",n[`alternationIndex${s}BorderColor`]),n[`alternationIndex${s}BackgroundColor`]&&a(o,"backgroundColor",n[`alternationIndex${s}BackgroundColor`])}if(n[o])for(let s in n[o])if(Object.prototype.hasOwnProperty.call(n[o],s)){if("height"===s){t.rowHeight[r]=` ht="${parseFloat(n[o].height)/2}"`;continue}a(o,s,n[o][s])}}}storeCellStyle(e,t,n){const i=this.styleMap[e];switch(t){case"backgroundColor":i.fills.fgColor=n;break;case"color":i.fonts.color=n;break;case"fontFamily":i.fonts.name=n.replace(/"/g,"'");break;case"fontSize":i.fonts.sz=parseFloat(n);break;case"fontStyle":"italic"===n?i.fonts.i=!0:delete i.fonts.i;break;case"fontWeight":"bold"===n?i.fonts.b=!0:delete i.fonts.b;break;case"numFmt":i.numFmt=n;break;case"textAlign":i.alignment.horizontal=n;break;case"textDecoration":"underline"===n?i.fonts.u=!0:delete i.fonts.u;break;case"verticalAlign":"middle"===n&&(n="center"),i.alignment.vertical=n}}toARGB(e){e=e.replace(/\s/g,"");const t=/rgb\((\d+),(\d+),(\d+)\)/gi.exec(e);if(null!==t){const a=parseFloat(t[1]).toString(16).toUpperCase(),r=parseFloat(t[2]).toString(16).toUpperCase(),o=parseFloat(t[3]).toString(16).toUpperCase();return"FF"+"0".repeat(2-a.length)+a+"0".repeat(2-r.length)+r+"0".repeat(2-o.length)+o}const n=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(e);if(null!==n){const a=Math.round(255*parseFloat(n[4])).toString(16).toUpperCase(),r=parseFloat(n[1]).toString(16).toUpperCase(),o=parseFloat(n[2]).toString(16).toUpperCase(),s=parseFloat(n[3]).toString(16).toUpperCase();return"0".repeat(2-a.length)+a+"0".repeat(2-r.length)+r+"0".repeat(2-o.length)+o+"0".repeat(2-s.length)+s}const i=/^#(.)(.)(.)$/gi.exec(e);if(null!==i){const a=i[1].toUpperCase(),r=i[2].toUpperCase(),o=i[3].toUpperCase();return"FF"+a+a+r+r+o+o}return"FF"+e.toUpperCase().slice(1)}toggleableFunctionality(){const e=this;return e.actualHierarchy?`\n    <style type="text/css">\n        .toggle-element {\n            width: 5px;\n            height: 1px;\n            padding-right: 5px;\n            float: left;\n            text-align: right;\n            cursor: pointer;\n            user-select: none;\n        }\n\n        .collapsed {\n            display: none;\n        }\n    </style>\n    <script type="text/javascript">\n        window.onload = function () {\n            var expandChar = '${e.expandChar}',\n                collapseChar = '${e.collapseChar}',\n                toggleElements = document.getElementsByClassName('toggle-element');\n\n            function getParent(child) {\n                var prevSibling = child.previousElementSibling;\n\n                while (prevSibling) {\n                    if (child.getAttribute('level') > prevSibling.getAttribute('level')) {\n                        return prevSibling;\n                    }\n\n                    prevSibling = prevSibling.previousElementSibling;\n                }\n\n            }\n\n            function getFirstCollapsedAncestor(child) {\n                var parent = getParent(child);\n\n                while (parent) {\n                    if (parent.firstElementChild.firstElementChild.innerHTML === expandChar) {\n                        return parent;\n                    }\n\n                    parent = getParent(parent);\n                }\n            }\n\n            for (var i = 0; i < toggleElements.length; i++) {\n                toggleElements[i].addEventListener('click', function (event) {\n                    var expanded = this.innerHTML === collapseChar,\n                        row = this.parentElement.parentElement,\n                        sibling = row.nextElementSibling;\n\n                    if (expanded) {\n                        this.innerHTML = expandChar;\n                    }\n                    else {\n                        this.innerHTML = collapseChar;\n                    }\n\n                    while (sibling && row.getAttribute('level') < sibling.getAttribute('level')) {\n                        if (expanded) {\n                            sibling.style.display = 'none';\n                        }\n                        else {\n                            var firstCollapsedAncestor = getFirstCollapsedAncestor(sibling);\n\n                            if (!firstCollapsedAncestor || firstCollapsedAncestor === row) {\n                                sibling.classList.remove('collapsed');\n                                sibling.style.display = null;\n                            }\n\n                        }\n\n                        sibling = sibling.nextElementSibling;\n                    }\n                });\n            }\n        }\n    <\/script>`:""}generateStyles(e){const t=this;if(t.cellStyleMapping={},0===Object.keys(e).length&&!t.complexHeader)return`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision"><fonts count="1" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><charset val="204"/><scheme val="minor"/></font></fonts><fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${t.conditionalFormattingXLSX.styles||'<dxfs count="0"/>'}<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`;t.styleMap={};for(let s=0;s<t.data.length;s++)for(let l=0;l<t.columnsArray.length;l++)t.styleMap[t.columnsArray[l]+(s+1)]={numFmts:{},fonts:{},fills:{},borders:{},alignment:{}};if(e&&e.columns)for(let s=0;s<t.columnsArray.length;s++){const l=t.datafields[s];if(!e.columns[l]||!e.columns[l].format)continue;const d=t.getXLSXFormat(e.columns[l].format,t.data[1][l]),c=t.getXLSXFormat(e.columns[l].format,t.data[t.data.length-1][l]);c?e.columns[l].numFmt=c:d&&(e.columns[l].numFmt=d)}t.processRowStyle(e),t.processColumnStyle(e);const n={};for(let s=0;s<t.complexHeaderMergedCells.length;s++){const l=t.complexHeaderMergedCells[s];parseFloat(l.to[1])!==t.complexHeader.length?(t.styleMap[l.from].alignment.horizontal="center",t.styleMap[l.from].alignment.vertical="center"):n[l.to]=l.from}const i={xml:'<font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><charset val="204" /><scheme val="minor" /></font>',collection:["default"]},a={xml:'<fill><patternFill patternType="none" /></fill><fill><patternFill patternType="gray125" /></fill>',collection:["default","gray125"]},r={xml:"",collection:[]},o={xml:'<xf fontId="0" fillId="0" borderId="1"/>',collection:["default"]};for(let s=0;s<t.data.length;s++)for(let l=0;l<t.columnsArray.length;l++){const d=t.columnsArray[l]+(s+1),c=t.styleMap[d];let u="",m="",y="",b=[],f=[],w=[],v=[];for(let _ in c.fonts)if(Object.prototype.hasOwnProperty.call(c.fonts,_)){const T=c.fonts[_];switch(_){case"color":b[0]=T,u+=`<color rgb="${t.toARGB(T)}" />`;break;case"name":b[1]=T,u+=`<name val="${T}" />`;break;case"sz":b[2]=T,u+=`<sz val="${T}" />`;break;case"i":b[3]=T,u+="<i />";break;case"b":b[4]=T,u+="<b />";break;case"u":b[5]=T,u+="<u />"}}for(let _ in c.fills)if(Object.prototype.hasOwnProperty.call(c.fills,_)){const T=c.fills[_];"fgColor"===_&&(f[0]=T,m+=`<fgColor rgb="${t.toARGB(T)}" />`)}for(let _ in c.alignment)if(Object.prototype.hasOwnProperty.call(c.alignment,_)){const T=c.alignment[_];switch(_){case"horizontal":w[0]=T,y+=`horizontal="${T}" `;break;case"vertical":w[1]=T,y+=`vertical="${T}" `}}if(b=b.toString(),f=f.toString(),""!==u){let _=i.collection.indexOf(b);-1===_&&(_=i.collection.length,i.xml+="<font>"+u+"</font>",i.collection.push(b)),v[0]=_}if(""!==m){let _=a.collection.indexOf(f);-1===_&&(_=a.collection.length,a.xml+='<fill><patternFill patternType="solid">'+m+"</patternFill></fill>",a.collection.push(f)),v[1]=_}w.length>0&&(v[2]=y),void 0!==c.numFmt&&(v[3]=t.getNumFmtIndex(c.numFmt,r));const S=v.toString();if(""!==S){let _=o.collection.indexOf(S);if(-1===_){let T="<xf ";_=o.collection.length,void 0!==v[0]&&(T+=`fontId="${v[0]}" `),void 0!==v[1]&&(T+=`fillId="${v[1]}" `),void 0!==v[3]&&(T+=`numFmtId="${v[3]}" `),T+=void 0!==v[2]?`applyAlignment="1" borderId="1"><alignment ${y}/></xf>`:' borderId="1"/>',o.xml+=T,o.collection.push(S)}t.cellStyleMapping[n[d]||d]=_}}return r.collection.length&&(r.xml=`<numFmts count="${r.collection.length}">${r.xml}</numFmts>`),`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision">${r.xml}<fonts count="${i.collection.length}" x14ac:knownFonts="1">${i.xml}</fonts><fills count="${a.collection.length}">${a.xml}</fills><borders count="2"><border><left/><right/><top/><bottom/></border><border><left style="hair"/><right style="hair"/><top style="hair"/><bottom style="hair"/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="${o.collection.length}">${o.xml}</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${t.conditionalFormattingXLSX.styles}<dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`}})},8588:()=>{Smart("smart-input",class extends Smart.BaseElement{static get properties(){return{autoCompleteDelay:{value:100,type:"number"},dataSource:{type:"any",value:[],reflectToAttribute:!1},dropDownClassList:{value:[],type:"array",reflectToAttribute:!1},dropDownDataSource:{type:"any",value:[]},dropDownHeight:{type:"any",value:200},dropDownOpenMode:{allowedValues:["default","manual"],value:"default",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownWidth:{type:"any",value:null},dropDownButtonPosition:{allowedValues:["none","left","right"],value:"none",type:"string"},dropDownOpenPosition:{allowedValues:["bottom","top","auto"],value:"bottom",type:"string"},hint:{type:"string",value:""},inputPurpose:{type:"string",value:"off"},items:{type:"number",value:8},minLength:{type:"number",value:1},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},query:{type:"string",value:""},queryMode:{allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string",value:"containsIgnoreCase"},placeholder:{value:"",type:"string"},readonly:{type:"boolean",value:!1},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},selectedIndex:{type:"number",value:-1},selectedValue:{type:"any",value:""},selectedValues:{value:[],type:"array"},type:{type:"string"},value:{type:"string",value:""},innerHTML:{type:"string",reflectToAttribute:!1}}}static get styleUrls(){return["smart.textbox.css"]}template(){return'<div id="inputContainer" role="presentation"><div id="optionsContainer" inner-h-t-m-l=\'{{innerHTML}}\' class="smart-hidden"></div><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' value=\'{{value::keyup}}\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}static get listeners(){return{"input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","input.paste":"_pasteHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}get selectedIndexes(){return this.isCompleted?[this.selectedIndex]:[]}set selectedIndexes(e){if(!this.isCompleted)return;const t=this;if(e&&void 0!==e[0]){if(this.selectedIndex=e[0],null===this.dataSource)return;const n=this.dataSource[this.selectedIndex];if(!n)return;const i=this.context;this.context=this,this.$.input.dataValue=this.selectedValue="string"==typeof n?n:n.value,this.setAttribute("data-value",this.$.input.dataValue);let a=t.dataSource;"string"==typeof a&&(a=t.$.deserialize(a,"array"));for(let r=0;r<a.length;r++){let o=a[r];"string"!=typeof o&&"number"!=typeof o&&(o.selected=o.value===t.$.input.dataValue)}this.context=i}else{const n=this.context;this.context=this,this.$.input.dataValue=this.selectedValue="",this.setAttribute("data-value",this.$.input.dataValue),this.selectedIndex=-1;let i=t.dataSource;if("string"==typeof i&&(i=t.$.deserialize(i,"array")),i&&Array.isArray(i))for(let a=0;a<i.length;a++){let r=i[a];"string"!=typeof r&&(r.selected=r.value===t.$.input.dataValue)}this.context=n}}focus(){this.$.input.focus()}select(){const e=this;e.readonly?e.$.input.focus():e.$.input.select()}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;n!==t&&n!==t.$.dropDownButton&&n!==t.$.input&&n!==t.$.arrow?t.$.scrollView.contains(n.shadowParent||n)?t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()):(t.opened&&(t._preventLookup=!0),"manual"===t.dropDownOpenMode||t._isPointerDown||t.close(),t._isPointerDown=!1):t._isPointerDown=!1}_focusHandler(){const e=this;e.setAttribute("focus",""),e.readonly||0!==e.minLength||0!==e.$.input.value.length||e._preventLookup?(e.$.fireEvent("focus"),delete e._preventLookup):e._lookup()}_blurHandler(){const e=this;e.opened||e.removeAttribute("focus"),e.opened||e.$.fireEvent("blur"),e._refreshSelectedIndex(),delete e._preventLookup}_pasteHandler(e){const t=this,n=t.$.input,i=n.value,a=n.selectionStart,r=n.selectionEnd;if(!e.clipboardData&&!window.clipboardData)return;const o=(e.clipboardData||window.clipboardData).getData("text");let s=i.slice(0,a)+o,l=s.length;s+=i.slice(r),e.preventDefault(),t.set("value",s),t.setAttribute("data-value",s),n.setSelectionRange(l,l),t._refreshSelectedIndex()}_refreshSelectedIndex(){const e=this;let t=e.dataSource;if(t){let n=-1,i=null;if(e.dataSource instanceof Promise||"function"==typeof e.dataSource)return;"string"==typeof t&&(t=e.$.deserialize(t,"array"));for(let a=0;a<t.length;a++){let r=t[a];if("number"!=typeof r&&"boolean"!=typeof r||(r=""+r),"string"==typeof r){if(r===e.value){n=a,i=e.value;break}}else r&&(delete r.selected,r.label===e.value&&(n=a,i=r.value,r.selected=!0))}e.set("selectedIndex",n,!1),e.set("selectedValue",i,!1),-1===e.selectedIndex&&(e.$.input.dataValue=null)}}selectItem(e){const t=this;let n=t.dataSource;if("string"==typeof n&&(n=t.$.deserialize(n,"array")),n)for(let i=0;i<n.length;i++){const a=n[i];if(t.set("selectedIndex",-1),t.set("value",""),t.$.input.dataValue=null,"string"==typeof a){if(a===e)return t.set("selectedIndex",i,!1),t.set("value",t.$.input.dataValue=e),void t.setAttribute("data-value",t.$.input.dataValue)}else if(a.value===e)return t.set("selectedIndex",i,!1),t.set("value",a.label),t.$.input.dataValue=e,void t.setAttribute("data-value",t.$.input.dataValue)}else t.set("value",t.$.input.dataValue=e),t.setAttribute("data-value",t.$.input.dataValue),t.set("selectedIndex",-1,!1)}getItem(e){const t=this;if(t.dataSource)for(let n=0;n<t.dataSource.length;n++){const i=t.dataSource[n];if(i.value===e)return i}return null}getPrevItem(){const e=this,t=e.getSelectedItem();if(e.dataSource&&t)for(let n=0;n<e.dataSource.length;n++)if(e.dataSource[n].value===t.value)return e.dataSource[n-1];return null}getNextItem(){const e=this,t=e.getSelectedItem();if(e.dataSource&&t)for(let n=0;n<e.dataSource.length;n++)if(e.dataSource[n].value===t.value)return e.dataSource[n+1];return null}getSelectedItem(){const e=this;return e.dataSource&&0===e.dataSource.length?{label:e.value,value:e.$.input.dataValue?e.$.input.dataValue:e.value}:{label:e.value,value:void 0!==e.$.input.dataValue?e.$.input.dataValue:e.value}}_refreshMenu(){const e=this;e.$.menu.classList.remove("scroll"),e.$.scrollView.computedVerticalScrollBarVisibility&&e.$.menu.classList.add("scroll")}_performSelect(){const e=this,t=e.$.menu.querySelector(".active");let n="",i="";t&&(n=t.getAttribute("data-label"),i=t.dataValue);let a=e.value,r=e.$.input.dataValue;e.set("value",n),e.$.input.dataValue=i,e.setAttribute("data-value",i),t&&e.set("selectedIndex",t.index),e.set("selectedValues",[e.$.input.dataValue]),e.set("selectedValue",e.$.input.dataValue);let o=e.dataSource;if("string"==typeof o&&(o=e.$.deserialize(o,"array")),o&&Array.isArray(o))for(let s=0;s<o.length;s++){let l=o[s];"string"!=typeof l&&"number"!=typeof l&&(l.selected=l.value===e.$.input.dataValue)}e.close(),n===a&&i===r||(e.$.fireEvent("change",{value:i,label:n,oldValue:r,oldLabel:a}),e._updateTargetValue())}_open(){const e=this;if(e.opened)return;const t=window.scrollX,n=window.scrollY;let i=e.getBoundingClientRect(),a=0,r=0;if(e.timer&&clearTimeout(e.timer),e.getRootNode()&&e.getRootNode().host)e.getRootNode().host.shadowRoot.appendChild(e.$.scrollView);else if(e.dropDownAppendTo){if("body"===e.dropDownAppendTo||e.dropDownAppendTo===document.body)document.body.appendChild(e.$.scrollView);else if(e.dropDownAppendTo instanceof HTMLElement)e.dropDownAppendTo.appendChild(e.$.scrollView);else if("string"==typeof dropDownAppendTo){let o=document.getElementById(e.dropDownAppendTo);o instanceof HTMLElement?o.appendChild(e.$.scrollView):document.body.appendChild(e.$.scrollView)}}else document.body.appendChild(e.$.scrollView);if(e.setAttribute("aria-owns",e.$.scrollView.id),e.readonly||e.$.input.setAttribute("aria-controls",e.$.scrollView.id),e.$.scrollView.enableShadowDOM&&!e._importedStyle&&(e.$.scrollView.importStyle(e._getStyleUrl("smart.textbox.css")),e._importedStyle=!0),"static"!==getComputedStyle(document.body).position){const o=document.body.getBoundingClientRect();a=o.left,r=o.top}if(e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.style.left=-3+i.left+t-a+"px",e.$.scrollView.classList.remove("open"),e.$.scrollView.removeAttribute("top"),"bottom"===e.dropDownOpenPosition)e.$.scrollView.style.top=i.bottom+n-r+1+"px";else if("top"===e.dropDownOpenPosition)e.$.scrollView.style.top=i.top-e.$.scrollView.offsetHeight+n-r-2+"px",e.$.scrollView.setAttribute("top","");else if("auto"===e.dropDownOpenPosition){e.$.scrollView.style.top=i.bottom+n-r+1+"px";const o=i.top-e.$.scrollView.offsetHeight+n-r-2;window.innerHeight<parseInt(e.$.scrollView.style.top)+e.$.scrollView.offsetHeight-n?o>=0&&(e.$.scrollView.style.top=o+"px",e.$.scrollView.setAttribute("top","")):e.$.scrollView.style.top=i.bottom+n-r+1+"px"}if(e.dropDownAppendTo&&"body"!==e.dropDownAppendTo){e.$.scrollView.style.position="absolute",e.$.scrollView.style.width="auto",e.$.scrollView.style.height="auto";const o=e.$.scrollView.parentNode.getBoundingClientRect();e.$.scrollView.style.top=i.bottom-o.top+"px","top"===e.dropDownOpenPosition&&(e.$.scrollView.style.top=i.top-o.top-e.$.scrollView.offsetHeight+"px"),e.$.scrollView.style.left=-3+i.left-o.left+"px",e.dropDownHeight&&(e.$.scrollView.style.height=e.dropDownHeight),e.dropDownWidth&&(e.$.scrollView.style.width=e.dropDownWidth)}e.opening=!0,e._positionTimer&&clearInterval(e._positionTimer),e.dropDownAppendTo||(e._positionTimer=setInterval(()=>{const o=e.getBoundingClientRect();if(e.opening)e.opening=!1,i=o;else if(Math.abs(parseInt(o.top)-parseInt(i.top))>=10||Math.abs(parseInt(o.left)-parseInt(i.left))>=10){const s=window.scrollX,l=window.scrollY;return e.$.scrollView.style.left=-3+o.left+s-a+"px",void("bottom"===e.dropDownOpenPosition?e.$.scrollView.style.top=o.bottom+l-r+1+"px":"top"===e.dropDownOpenPosition?e.$.scrollView.style.top=o.top-e.$.scrollView.offsetHeight+l-r+1+"px":"auto"===e.dropDownOpenPosition&&(e.$.scrollView.removeAttribute("top"),e.$.scrollView.style.top=o.bottom+l-r+1+"px",window.innerHeight<parseInt(e.$.scrollView.style.top)+e.$.scrollView.offsetHeight-l?(e.$.scrollView.style.top=o.top-e.$.scrollView.offsetHeight+l-r+1+"px",e.$.scrollView.setAttribute("top","")):e.$.scrollView.style.top=o.bottom+l-r+1+"px"))}},50)),e.$.scrollView.onpointerdown=function(){e._isPointerDown=!0},requestAnimationFrame(function(){const o=e.dropDownWidth;if(e.$.scrollView.refresh&&e.$.scrollView.refresh(),e._refreshMenu(),e.$.scrollView.setAttribute("open",""),e.setAttribute("open",""),e.$.dropDownButton.setAttribute("open",""),e.$.input.setAttribute("open",""),o&&"string"==typeof o&&-1!==o.indexOf("%")){const s=parseFloat(o)/100;e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",e.offsetWidth*s+"px")}else if("auto"!==o&&o)e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",parseFloat(o)+"px");else if("auto"===o){if(e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.$.scrollViewerContainer.classList.contains("vscroll")){const s=e.$.scrollView.offsetWidth+parseFloat(getComputedStyle(e.$.scrollView).getPropertyValue("--smart-scroll-bar-size"));e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",s+"px")}}else{e.$.menu.style.width="auto";let s=e.$.menu.offsetWidth;const l=e.$.menu.querySelectorAll("li");for(let d=0;d<l.length;d++)e._maxDropDownWidth=Math.max((l[d].firstElementChild||l[d]).offsetWidth,e._maxDropDownWidth);e.$.scrollView.computedVerticalScrollBarVisibility&&(s+=e.$.scrollView.$&&e.$.scrollView.$.verticalScrollBar?e.$.scrollView.$.verticalScrollBar.offsetWidth:30),e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",Math.max(s,e.offsetWidth-8)+"px"),e.$.menu.style.width=""}(e.shadowRoot||e.isInShadowDOM)&&e.$.scrollView._scrollView&&Smart.ScrollBar&&requestAnimationFrame(()=>{e.$.scrollView._scrollView&&e.$.scrollView._scrollView.vScrollBar.refresh()})}),e.$.scrollView.refresh&&e.$.scrollView.refresh(),e._refreshMenu(),e.set("opened",!0),e.setAttribute("aria-expanded",!0),e.$.fireEvent("open")}close(){const e=this;return!!e.opened&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.$.scrollView.parentNode&&!e.opened&&(e.$.scrollView.remove(),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))},1e3),e._positionTimer&&clearInterval(e._positionTimer),e.$.scrollView.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.set("opened",!1),e.setAttribute("aria-expanded",!1),e.$.input.focus(),e.$.fireEvent("close"),!0)}refresh(){const e=this;e.$.scrollView.refresh&&e.$.scrollView.refresh(),e._getDataSourceFromOption(),e.close()}_lookup(e){const t=this;if(t.query=t.$.input.value,t.$.input.readonly&&(t._incrementalSearchQuery||(t._incrementalSearchQuery=""),t._incrementalSearchQuery+=e.key,t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t.query=t._incrementalSearchQuery,t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},700)),t.query.length<t.minLength)return void t.close();const n=function(i){clearTimeout(t._autoCompleteTimeout),t._autoCompleteTimeout=setTimeout(()=>{const a=t.context;t.context=t,t._process(i),t.context=a},t.autoCompleteDelay)};"function"==typeof t.dataSource?t.dataSource(t.query,n):n(t.dataSource)}_downHandler(e){this.readonly&&this._dropDownButtonDownHandler(e)}_dropDownButtonDownHandler(e){const t=this;return"manual"!==t.dropDownOpenMode&&t._toggle(),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),t._isPointerDown=!0,!1}_toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this;function t(n){e._process(n);const i=e.$.menu.querySelector(".active");if(i){const a=e.$.input.dataValue;for(let r=0;r<e.$.menu.children.length;r++){const o=e.$.menu.children[r],s=o.getAttribute("data-label"),l=o.dataValue;if(void 0!==a&&l===a||void 0===a&&s===e.$.input.value){i.classList.remove("active"),o.classList.add("active"),e._setActiveDescendant(o),e.$.input.dataValue=l,e.setAttribute("data-value",l);break}}}e.ensureVisible(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}e.dropDownDataSource&&(Array.isArray(e.dropDownDataSource)&&e.dropDownDataSource.length>0||"function"==typeof e.dropDownDataSource)?(e.query="","function"==typeof e.dropDownDataSource?e.dropDownDataSource(e.query,t):t(e.dropDownDataSource)):(e.query="","function"==typeof e.dataSource?e.dataSource(e.query,t):t(e.dataSource))}_process(e){const t=this;"string"==typeof e&&(e=t.$.deserialize(e,"array")),e=e.filter(t.readonly?function(){return!0}:function(n){return""===n||(t.matcher?t.matcher(n):t._matcher(n))}),e=t._sorter(e),t.sorted&&(e.sort((n,i)=>void 0!==n.label?n.label.localeCompare(i.label):n.localeCompare(i)),"desc"===t.sortDirection&&e.reverse()),!e.length&&t.opened&&t.close(),0===e.length&&!0!==t.allowItemsAdd||(t._render(t.query.length>0?e.slice(0,t.items):e),t._open(),t.$.scrollView.refresh&&t.$.scrollView.refresh(),t._refreshMenu(),t.ensureVisible())}_matcher(e){const t=this.query;switch(null===e&&(e="null"),e=""+(e=e.label||e),this.queryMode){case"startsWith":return e.startsWith(t);case"startsWithIgnoreCase":return e.toLowerCase().startsWith(t.toLowerCase());case"doesNotContain":return e.indexOf(t)<0;case"doesNotContainIgnoreCase":return e.toLowerCase().indexOf(t.toLowerCase())<0;case"contains":return e.indexOf(t)>-1;default:case"containsIgnoreCase":return~e.toLowerCase().indexOf(t.toLowerCase());case"equals":return 0===e.localeCompare(t);case"equalsIgnoreCase":return 0===e.toLowerCase().localeCompare(t.toLowerCase());case"endsWith":return e.endsWith(t);case"endsWithIgnoreCase":return e.toLowerCase().endsWith(t.toLowerCase())}}_sorter(e){const t=this;let n,i=[],a=[],r=[];if(e&&""===e[0])return e;for(;n=e.shift();){let o=n.label||n;o=""+o,o.toLowerCase().indexOf(t.query.toLowerCase())?~o.indexOf(t.query)?a.push(n):r.push(n):i.push(n)}return i.concat(a,r)}_highlighter(e){const t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return this.query?e.replace(new RegExp("("+t+")","ig"),function(n,i){return"<strong>"+i+"</strong>"}):e}_render(e){const t=this;let n=0,i=-1,a=null;const r=e.map(function(s){let l=s,d=s;"object"==typeof s&&(l=s.label,d=void 0!==s.value?s.value:l),l=""+l,l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;");const c=document.createElement("li"),u=document.createElement("a");if(u.href="#",c.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),c.setAttribute("data-label",l),c.index=n++,c.dataValue=d,c.setAttribute("value","string"==typeof d?d:JSON.stringify(d)),c.setAttribute("role","option"),c.setAttribute("aria-label",l),void 0!==s.menuLabel?(l=s.menuLabel,u.innerHTML=l):u.innerHTML=t.highlighter?t.highlighter(l):t._highlighter(l),u.setAttribute("aria-hidden",!0),s.disabled&&c.classList.add("smart-disabled"),s.icon&&(u.classList.add("icon"),u.classList.add(s.icon)),s.prefix){const m=document.createElement("span");m.innerHTML=s.prefix,u.classList.add("has-prefix"),u.innerHTML=m.innerHTML+u.innerHTML}if(s.suffix){const m=document.createElement("span");m.innerHTML=s.suffix,u.classList.add("has-suffix"),u.innerHTML=u.innerHTML+m.innerHTML}if(s.dataset)for(let m in s.dataset)c.setAttribute("data-"+m,s.dataset[m]);if(s.className){const m=s.className.split(" ");for(let y=0;y<m.length;y++)c.classList.add(m[y].trim())}return void 0!==t.selectedValue&&void 0!==s.value&&""!==t.selectedValue&&t.selectedValue===s.value&&(s.selected=!0,a=s,i=c.index,c.classList.add("active")),c.appendChild(u),c});function o(){const s=t.$.menu.getElementsByClassName("active");s[0]&&s[0].classList.remove("active"),this.classList.add("active"),t._setActiveDescendant(this)}-1===i&&r.length>0&&(r[0].classList.add("active"),t._setActiveDescendant(r[0])),a&&(t.$.input.value=a.label,t.$.input.dataValue=a.value,t.setAttribute("data-value",t.$.input.dataValue)),t.$.menu.innerHTML="";for(let s=0;s<r.length;s++){const l=r[s];t.$.menu.appendChild(l),l.onmouseenter=o,l.onmouseleave=function(){this.classList.remove("active"),t._setActiveDescendant(null)},l.onclick=o}}ensureVisible(){const e=this,t=e.$.menu.querySelector(".active");t&&(t.offsetTop+t.offsetHeight>=e.$.scrollView.scrollTop+e.$.scrollView.offsetHeight&&(e.$.scrollView.scrollTop=t.offsetTop+t.offsetHeight),(t.offsetTop<=e.$.scrollView.scrollTop||t.offsetTop>=e.$.scrollView.scrollTop+e.$.scrollView.offsetHeight)&&(e.$.scrollView.scrollTop=t.offsetTop),0===[...e.$.menu.children].indexOf(t)?e.$.scrollView.scrollTop=0:[...e.$.menu.children].indexOf(t)===e.$.menu.children.length-1&&(e.$.scrollView.scrollTop=e.$.scrollView.scrollHeight))}_next(){const e=this,t=e.$.menu.querySelector(".active");if(!t){const i=e.$.menu.firstElementChild;return i.classList.add("active"),void e._setActiveDescendant(i)}t.classList.remove("active");let n=t.nextElementSibling;n||(n=e.$.menu.firstElementChild),n.classList.add("active"),e._setActiveDescendant(n),e.ensureVisible()}_prev(){const e=this,t=e.$.menu.querySelector(".active");if(!t){const i=e.$.menu.firstElementChild;return i.classList.add("active"),void e._setActiveDescendant(i)}t.classList.remove("active");let n=t.previousElementSibling;n||(n=e.$.menu.lastElementChild),n.classList.add("active"),e._setActiveDescendant(n),e.ensureVisible()}_move(e){const t=this;if(t.readonly&&!t.opened){if("ArrowUp"===e.key){const n=t.getPrevItem();n&&t.selectItem(n.value),e.preventDefault()}if("ArrowDown"===e.key){const n=t.getNextItem();n&&t.selectItem(n.value),e.preventDefault()}}if(t.opened){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),t._prev();break;case 40:e.preventDefault(),t._next()}e.stopPropagation()}}_keyDownHandler(e){const t=this;t._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(e.keyCode),t._oldValue=t.$.input.value,e.shiftKey||e.altKey||e.ctrlKey||t._move(e)}_keyPressHandler(e){this._suppressKeyPressRepeat||e.shiftKey||e.altKey||e.ctrlKey||this._move(e)}_keyUpHandler(e){const t=this;if(!e.shiftKey&&"F2"!==e.key)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 9:case 13:if(!t.opened)return;t._performSelect(),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault()),t.$.fireEvent("changing",{value:t.$.input.value,oldValue:t._oldValue}),t.$.input.dataValue=t.$.input.value,t.setAttribute("data-value",t.$.input.dataValue),t._updateTargetValue()}}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;if("innerHTML"===e&&(i._getDataSourceFromOption(),i._setSelection(!1)),"selectedValue"===e){let a=-1;if(i.dataSource&&Array.isArray(i.dataSource)&&i.dataSource.forEach((r,o)=>{"string"==typeof r?r===n&&(a=o):r&&r.value===n&&(a=o)}),a>=0){const r=i.context;i.context=i,i.selectedIndex=a,i.context=r}i._setSelection()}if("selectedIndex"===e){let a=i.dataSource;if(i.selectedValue=null,a&&Array.isArray(a))for(let r=0;r<a.length;r++){let o=a[r];"string"!=typeof o&&"number"!=typeof o&&(o.selected=!1)}i._setSelection()}else if("dataSource"===e){if(i.dataSource&&Array.isArray(i.dataSource)){let a=-1;if(i.dataSource.forEach((r,o)=>{r.selected&&(a=o)}),a>=0){const r=i.context;i.context=i,i.selectedIndex=a,i.context=r}}i._setSelection(!1)}else if("dropDownClassList"===e){const a=i.$.scrollView;for(let r=0,o=t.length;r<o;r+=1)a.classList.remove(t[r]);for(let r=0,o=n.length;r<o;r+=1)a.classList.add(n[r])}else if("dropDownHeight"===e)i.$.scrollView.style.setProperty("--smart-input-drop-down-menu-height","auto"!==i.dropDownHeight?i.dropDownHeight+"px":"auto");else if("opened"===e)i.opened=t,n?i.open():i.close();else if("placeholder"===e){if(i.readonly){const a=i.getAttribute("aria-label");if(a&&a!==t)return;n?i.setAttribute("aria-label",n):i.removeAttribute("aria-label")}}else if("selectedValues"===e)if(null===n)i.$.input.value="",i.$.input.dataValue=n,i.setAttribute("data-value",n),i._refreshSelectedIndex();else{const a=n.join(","),r=i.value;i.$.input.dataValue=a,i._setSelection(),i.propertyChangedHandler("value",r,i.value)}else"value"===e?(i.displayMember!==i.valueMember&&"string"!=typeof n?(i.set("value",n[i.displayMember]),i.$.input.dataValue=n[i.valueMember],i.setAttribute("data-value",i.$.input.dataValue)):(i.$.input.value=i.$.input.dataValue=n,i.setAttribute("data-value",n)),i._refreshSelectedIndex()):"readonly"===e?(i._setAriaRelations(),i._setInputPurpose()):"theme"===e||"rightToLeft"===e?i.$.scrollView[e]=n:"inputPurpose"===e?i._setInputPurpose():"inverted"===e?n?i.$.scrollView.setAttribute("inverted",""):i.$.scrollView.removeAttribute("inverted"):"disabled"!==e&&"unfocusable"!==e||i._setFocusable()}_updateTargetValue(){const e=this;if(e.dataset.target){const t=document.querySelector(e.dataset.target);if(t){const n=e.dataset.property,i=e.value;n&&void 0!==t[n]&&(t[n]=i)}}}detached(){super.detached(),this.close(),this.removeAttribute("focus")}_getDataSourceFromOption(){const e=this;if(e.innerHTML.indexOf("<option")>=0){e.$.optionsContainer.innerHTML=e.innerHTML.trim();const t=e.querySelectorAll("option");let n=[];for(let i=0;i<t.length;i++){const a=t[i],r=a.hasAttribute("selected")||a.hasAttribute("is-selected")&&"false"!==a.getAttribute("is-selected");let o=(""+a.textContent).trim();const s=(""+a.innerHTML).trim(),l=a.hasAttribute("value")?a.getAttribute("value"):o,d=a.hasAttribute("disabled"),c=a.hasAttribute("label")?a.getAttribute("label"):null;c&&(o=c),n.push({label:o,menuLabel:s,value:l,disabled:d,selected:r,className:a.className,dataset:a.dataset}),a.classList.add("smart-hidden")}e.dataSource=n}}render(){const e=this,t=e.dropDownClassList;if(e._getDataSourceFromOption(),e.selectedValues&&e.selectedValues.length){const r=e.selectedValues.join(",");e.value=r}e._createElement&&e._createElement();const n=e.$.scrollView;for(let r=0,o=t.length;r<o;r+=1)n.classList.add(t[r]);e.opened&&(e.opened=!1,e.open());const i=e.$.menu;i&&(i.setAttribute("role","presentation"),n.appendChild(i)),n.style.setProperty("--smart-input-drop-down-menu-height","auto"!==e.dropDownHeight?e.dropDownHeight+"px":"auto"),n.classList.add("smart-input-drop-down-menu");for(let r=0;r<e.classList.length;r++){const o=e.classList[r];"smart-element"!==o&&"smart-input"!==o&&n.classList.add(o+"-drop-down-menu")}n.id=e.id+"_"+e.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),n.ownerElement=e;let a=e.dataSource;if("string"==typeof a&&(a=e.$.deserialize(a,"array")),a&&a.length&&Array.isArray(a)){let r=-1;a.forEach((o,s)=>{o.selected&&(r=s)}),r>=0&&(e.selectedIndex=r,e.selectedValue="string"==typeof a[r]?a[r]:a[r].value)}e._setAriaRelations(),e._setInputPurpose(),e._setSelection(),e.isInitialized=!0,super.render()}_setSelection(e){const t=this;let n=t.dataSource;if("string"==typeof n&&(n=t.$.deserialize(n,"array")),t.selectedIndex>=0&&n&&n.length>0){let i=n[t.selectedIndex];if("number"!=typeof i&&"boolean"!=typeof i||(i=""+i),"string"==typeof i){let a=t.$.input.dataValue,r=t.value;t.set("value",i),t.$.input.dataValue=i,t.$.input.setAttribute("data-value",i),t.selectedValues=[t.$.input.dataValue],t.isInitialized&&!1!==e&&(t.$.fireEvent("change",{value:t.value,label:t.label,oldValue:a,oldLabel:r}),t._updateTargetValue())}else{let a=t.$.input.dataValue,r=t.value;i&&(void 0!==i.value?(t.set("value",void 0!==i.value?i.value+"":""),t.$.input.dataValue=i.value,t.$.input.setAttribute("data-value",i.value),t.selectedValues=[t.$.input.dataValue]):i.label&&(t.selectedValues=[i.value]),i.label&&t.set("value",i.label)),t.isInitialized&&!1!==e&&(t.$.fireEvent("change",{value:t.$.input.dataValue,label:i.value,oldValue:a,oldLabel:r}),t._updateTargetValue())}}}_createElement(){const e=this,t=document.createElement("ul"),n=document.createElement("smart-scroll-viewer");n.rightToLeft=e.rightToLeft,n.theme=e.theme,n.horizontalScrollBarVisibility="hidden",e.inverted?n.setAttribute("inverted",""):n.removeAttribute("inverted"),e.$.scrollView=n,e.$.menu=t,e._setFocusable();const i=e.$.input;e.$.menu.onclick=function(a){const r=a.target.closest("li");a.stopPropagation(),a.preventDefault(),e._performSelect(),r&&e.$.fireEvent("itemClick",{index:[...r.parentNode.children].indexOf(r),item:r,label:r.getAttribute("aria-label"),value:r.dataValue}),i.focus()}}_setAriaRelations(){const e=this,t=e.getAttribute("aria-label");e.readonly?(e.setAttribute("role","button"),!t&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.removeAttribute("aria-readonly"),e.$.input.setAttribute("aria-hidden",!0),e.$.input.removeAttribute("aria-activedescendant"),e.$.input.removeAttribute("aria-controls"),e.$.dropDownButton.setAttribute("aria-hidden",!0)):(e.setAttribute("role","combobox"),t&&t===e.placeholder&&e.removeAttribute("aria-label"),e.$.input.setAttribute("role","searchbox"),e.$.input.removeAttribute("aria-hidden",!0),e.$.dropDownButton.removeAttribute("aria-hidden")),e.setAttribute("aria-expanded",e.opened),e.setAttribute("aria-haspopup","listbox"),e.setAttribute("aria-owns",e.$.scrollView.id),e.$.scrollView.setAttribute("role","listbox")}_setActiveDescendant(e){const t=this;t.readonly||(e?t.setAttribute("aria-activedescendant",e.id):t.removeAttribute("aria-activedescendant"))}_setInputPurpose(){const e=this;e.readonly?e.$.input.removeAttribute("autocomplete"):e.$.input.setAttribute("autocomplete",e.inputPurpose)}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.$.input.setAttribute("tabindex",-1):e.$.input.removeAttribute("tabindex")}})},5707:()=>{Smart("smart-list-item",class extends Smart.ContentElement{static get properties(){return{alternationIndex:{value:-1,type:"int"},color:{value:"",type:"string"},displayMode:{allowedValues:["plain","checkBox","radioButton"],value:"plain",type:"string"},grouped:{value:!1,type:"boolean"},selected:{value:!1,type:"boolean"},value:{value:"",type:"string"},label:{value:"",type:"string"},details:{value:"",type:"string"},group:{value:"",type:"string"},hidden:{value:!1,type:"boolean"},readonly:{value:!1,type:"boolean"}}}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}get _focused(){const e=this;return void 0===e.__focused&&(e.__focused=!1),e.__focused}set _focused(e){const t=this;t.__focused=e,e?(t.setAttribute("focus",""),t.ownerListBox&&t.ownerListBox.ownerElement&&Smart.ComboBox&&t.ownerListBox.ownerElement instanceof Smart.ComboBox&&t.ownerListBox.ownerElement.$.input.setAttribute("aria-activedescendant",t.id)):t.removeAttribute("focus")}template(){return'<div id="container">\n                   <span id=\'itemInput\' class=\'smart-input smart-hidden\'></span>\n                    <span class="smart-overlay" id="overlay"></span>\n                    <div id="itemContainer" class="smart-content smart-list-item-container"><span class="smart-content-label" inner-h-t-m-l=\'[[innerHTML]]\' role="presentation"><content></content></span><span inner-h-t-m-l=\'[[details]]\' id="details" class="smart-content-details"></span></div>\n                </div>'}appendChild(e){const t=this;if(!t.isCompleted||e.classList&&e.classList.contains("smart-ripple")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}window.smartBlazor?t.$.itemContainer.appendChild(e):(t.$.itemContainer.innerHTML="",e instanceof HTMLElement&&t.$.itemContainer.appendChild(e))}insertBefore(e,t){const n=this;if(!n.isCompleted){const i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,i.concat(Array.prototype.slice.call(arguments)))}t.parentNode.insertBefore(e,t)}removeChild(e){const t=this;if(!t.isCompleted||e.classList.contains("smart-ripple")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.itemContainer.removeChild(e)}attached(){super.attached(),this.ownerListBox=this.getListBox()}static get listeners(){return{mouseenter:"_itemOnMouseEnter",mouseleave:"_itemOnMouseLeave"}}ready(){super.ready();const e=this;if(e.setAttribute("role","option"),""!==e.label){let n=e.label;n&&"string"==typeof n&&(n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")),e.innerHTML=n}else""!==e.innerHTML&&(e.label=e.innerHTML);e._setDisplayMode(e.displayMode),e._setItemColor(),e.$.container.noRipple=!0;const t=e.closest("smart-list-box");if(t&&t.isRendered){if(cancelAnimationFrame(Smart.ListBox.processTimer),t._inLazyInit||t._isUpdating)return;Smart.ListBox.processTimer=requestAnimationFrame(()=>{t._lazyInitItems()})}}propertyChangedHandler(e,t,n){const i=this;if(super.propertyChangedHandler(e,t,n),"hidden"===e)n?i.$.addClass("smart-hidden"):i.$.removeClass("smart-hidden");else if("color"===e)i._setItemColor();else if("displayMode"===e)i._setDisplayMode(n);else if("label"===e||"value"===e){const a=i.context;i.context=document,"label"===e&&(i.innerHTML=n);const r=i.getListBox();r&&(r._applyTemplate(i),r.onItemUpdated(i)),i.context=a}else if("details"===e){const a=i.context;i.context=document,i.$.details.innerHTML=n;const r=i.getListBox();r&&r.onItemUpdated(i),i.context=a}else if("innerHTML"===e){const a=i.getListBox();a&&a.onItemUpdated(i)}else if("selected"===e)if(n)i.setAttribute("aria-selected",!0);else{const a=i.getListBox();i.readonly||i.disabled||!a||-1===["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox"].indexOf(a.selectionMode)?i.removeAttribute("aria-selected"):i.setAttribute("aria-selected",!1)}}getListBox(){const e=this;if(!Smart.ListBox)return e.getRootNode().host;let t=e.parentNode;for(;t instanceof Smart.ListBox==0&&null!==t;)t=t.parentNode;return!t&&Smart.EnableShadowDOM?e.getRootNode().host:t}_itemOnMouseEnter(){const e=this;!e.disabled&&e.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&e.ownerListBox.allowDrop&&(Smart.ListBox.DragDrop.DropDetails={item:e,position:"bottom"}),e.ownerListBox.$.verticalScrollBar.thumbCapture||e.ownerListBox.$.horizontalScrollBar.thumbCapture||e.setAttribute("hover",""))}_itemOnMouseMove(e){const t=this;if(t.ownerListBox&&Smart.ListBox.DragDrop.Dragging&&t.ownerListBox.allowDrop&&!Smart.Utilities.Core.isMobile){const n=[].slice.call(t.ownerListBox.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let a=0;a<n.length;a++)n[a].$.removeClass("smart-list-item-line-feedback"),n[a].$.removeClass("smart-list-item-bottom-line-feedback");if(Smart.ListBox.DragDrop.DropDetails={item:t,position:"top"},!t.ownerListBox._areCSSVarsSupported){if(t.ownerListBox._indexOf(t)===t.ownerListBox._items.length-1||t.parentNode.lastElementChild===t){const a=t.getBoundingClientRect();e.pageY-window.pageYOffset>a.top+a.height/2-1&&(Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"})}return}if(t.$.removeClass("smart-list-item-line-feedback"),t.$.removeClass("smart-list-item-bottom-line-feedback"),t.ownerListBox.sorted&&t.ownerListBox.autoSort)return;const i=t.ownerListBox._items.filter(a=>!a.hidden);if(i.indexOf(t)===i.length-1||t.parentNode.lastElementChild===t){const a=t.getBoundingClientRect();e.pageY-window.pageYOffset>a.top+a.height/2-1?(t.$.addClass("smart-list-item-bottom-line-feedback"),Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"}):arguments[1]||t.$.addClass("smart-list-item-line-feedback")}else arguments[1]||t.$.addClass("smart-list-item-line-feedback")}}_itemOnMouseLeave(){const e=this;e.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&(e.$.removeClass("smart-list-item-line-feedback"),e.$.removeClass("smart-list-item-bottom-line-feedback")),e.removeAttribute("hover"))}_setDisplayMode(e){const t=this,n=t.getListBox();n&&(t.displayMode=e="checkBox"===n.selectionMode||"radioButton"===n.selectionMode?n.selectionMode:"plain"),"plain"!==e?t.$itemInput.removeClass("smart-hidden"):t.$itemInput.addClass("smart-hidden")}_setItemColor(){const e=this,t=e.querySelector(".smart-content-label"),n=/(^#[0-9A-F]{3}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{8}$)/i.test(e.color)?e.color:"";t.style.backgroundColor=n,t.style.color=e._getContrastColor(n)}_getContrastColor(e){if(!e)return"";let t=(n=e.slice(1,3),i=e.slice(3,5),a=e.slice(5,7),[parseInt(n,16),parseInt(i,16),parseInt(a,16)]);var n,i,a;return parseFloat(((.299*t[0]+.61*t[1]+.114*t[2])/255).toFixed(2))>.65?"#000000":"#FFFFFF"}}),Smart("smart-list-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"}}}get enableShadowDOM(){return!1}template(){return'<div id="container" role="presentation">\n                 <span id="itemsLabel" class="smart-list-items-group-label">[[label]]</span>\n                 <div id="listItemsGroupContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-list-items-group-container" role="presentation">\n                    <content></content>\n                 </div>\n               </div>'}appendChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.appendChild(e)}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.removeChild(e)}getListBox(){let e=this.parentNode;for(;e instanceof Smart.ListBox==0&&null!==e;)e=e.parentNode;return e}attached(){const e=this;super.attached(),e.ownerListBox||(e.ownerListBox=e.getListBox()),e.setAttribute("role","group"),e.$.itemsLabel.id||(e.$.itemsLabel.id=e.id+"Label"),e.setAttribute("aria-labelledby",e.$.itemsLabel.id)}}),Smart("smart-list-box",class extends Smart.ScrollViewer{static get properties(){return{allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},autoSort:{value:!0,type:"boolean"},dataSource:{value:null,type:"any?",reflectToAttribute:!1},dragFeedbackFormatFunction:{value:null,type:"function?"},dragOffset:{value:[10,10],type:"array"},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},shadowDomMode:{allowedValues:["light","shadow"],value:"shadow",type:"string"},dropAction:{value:"move",type:"string",allowedValues:["copy","move","none"]},editable:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterCallback:{value:null,type:"function?"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},filterInputPlaceholder:{value:"",type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemMeasureMode:{value:"auto",allowedValues:["auto","precise"],type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{overridingProperties:'{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The "{{property1}}" property is used by default.',invalidIndex:'{{elementType}}: "{{method}}" method accepts an index of type number or an Array of numbers.',indexOutOfBound:'{{elementType}}: Out of bound index/indexes in "{{method}}" method.',invalidItem:'{{elementType}}: "{{method}}" method accepts an object or an array of objects as it\'s second parameter.',invalidSettings:'{{elementType}}: "{{method}}" method accepts a string or an object as it\'s second parameter.'}},type:"object"},name:{value:"",type:"string"},placeholder:{value:"No Items",type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},selectionMode:{value:"oneOrManyExtended",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","zeroAndOne","one","checkBox","radioButton"],type:"string"},selectionChangeAction:{value:"release",allowedValues:["press","release"],type:"string"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},topVisibleIndex:{value:-1,type:"int"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}static get styleUrls(){return["smart.listbox.css","smart.dropdown.css","smart.scrollbar.css"]}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler","container.wheel":"_mouseWheelHandler","editInput.change":"_editInputEventHandler","editInput.blur":"_editInputEventHandler","editInput.keydown":"_editInputEventHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","itemsInnerContainer.down":"_downHandler","itemsInnerContainer.dblclick":"_dblclickEventHandler","itemsInnerContainer.move":"_itemsContainerMoveHandler","itemsContainer.mouseleave":"_mouseLeaveHandler","itemsInnerContainer.touchmove":"_touchmoveHandler","itemsInnerContainer.touchstart":"_touchstartHandler","document.move":"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler",touchmove:"_overriddenHandler",touchstart:"_overriddenHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}template(){return'<div id="container" class="smart-container" role="presentation">\n                    <div class="smart-list-box-filter-input-container smart-hidden" id="filterInputContainer" role="presentation"><input id="filterInput" disabled="[[disabled]]" placeholder=\'[[filterInputPlaceholder]]\' role="searchbox" aria-label="[[filterInputPlaceholder]]"></div>\n                    <div id="itemsContainer" class="smart-list-items-container" role="presentation">\n                        <div id="placeholder" class="smart-placeholder" role="presentation" aria-hidden="true">[[placeholder]]</div>\n                        <div id="itemsInnerContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-list-items-inner-container" role="presentation">\n                            <content></content>\n                        </div>\n                        <input type="text" id="editInput" class= "smart-hidden"/>\n                    </div>\n                    <smart-scroll-bar wait theme="[[theme]]" right-to-left="[[rightToLeft]]" id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>\n                    <smart-scroll-bar wait theme="[[theme]]" right-to-left="[[rightToLeft]]" id="horizontalScrollBar" disabled="[[disabled]]"></smart-scroll-bar>\n                    <div id="loadingIndicatorContainer" class="smart-loader-container" role="presentation">\n                        <span id="loadingIndicator" class="smart-loader" role="img" aria-label="[[loadingIndicatorPlaceholder]]"></span>\n                        <span id="loadingIndicatorPlaceHolder" class="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>\n                    </div>\n                    <input id="hiddenInput" type="hidden" name="[[name]]">\n                </div>'}get value(){const e=this;return e.isRendered&&e._selectedItems.length>0?e._selectedItems.map(t=>({label:t.label,value:t.value})):null}set value(e){const t=this;if(Array.isArray(e)){const i=t.context;t.context=t,t._isUpdating++,t.selectedValues=[],t.clearSelection();for(let a=0;a<e.length;a++){const o=t.getItem(e[a]);o&&("oneOrManyExtended"===t.selectionMode?t._select(o):t.select(o))}return t.context=i,void t._isUpdating--}const n=t.getItem(e);n&&t.select(n)}get _selectedItems(){const e=this,t=[];if(e.isRendered)for(let n=0;n<e._items.length;n++){const i=e._items[n];i.selected&&t.push(i)}return t}_mouseLeaveHandler(){const e=[].slice.call(this.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let t=0;t<e.length;t++)e[t].$.removeClass("smart-list-item-line-feedback"),e[t].$.removeClass("smart-list-item-bottom-line-feedback")}_downHandler(e){const t=this;if(t.disabled||t.displayLoadingIndicator||t.readonly)return;let n=e.originalEvent.target,i=null;if(!(n instanceof Smart.ListItem)||n.disabled||n.hidden||n instanceof Smart.ListItemsGroup)for(;n.parentElement;){if(n instanceof Smart.ListItem&&!n.disabled&&!n.hidden&&!(n instanceof Smart.ListItemsGroup)){i=n.dataItem;break}n=n.parentElement}else i=n.dataItem;Smart.ListBox.DragDrop.StartTime=new Date,Smart.ListBox.DragDrop.StartPosition={left:e.pageX,top:e.pageY},i&&(e.stopPropagation(),t.hasRippleAnimation&&(i.readonly||i.disabled||Smart.Utilities.Animation.Ripple.animate(n.$.overlay,e.pageX,e.pageY)),Smart.Utilities.Core.isMobile||"press"!==t.selectionChangeAction||(t._focus(i),t.select(i)),!Smart.ListBox.DragDrop.Feedback&&t.allowDrag&&(Smart.ListBox.DragDrop.DraggedFrom=t,Smart.ListBox.DragDrop.Feedback=document.createElement("span"),t.rightToLeft?Smart.ListBox.DragDrop.Feedback.setAttribute("right-to-left",!0):Smart.ListBox.DragDrop.Feedback.removeAttribute("right-to-left"),t.dragFeedbackFormatFunction?Smart.ListBox.DragDrop.Feedback.innerHTML=t.dragFeedbackFormatFunction(i):Smart.ListBox.DragDrop.Feedback.appendChild(i.offsetHeight?i.cloneNode(!0):t._createItem(i)),Smart.ListBox.DragDrop.Item=i,Smart.Utilities.Extend(Smart.ListBox.DragDrop.Feedback).addClass("smart-popup smart-list-item smart-list-item-feedback")))}_dblclickEventHandler(e){const t=this;if(!t.editable)return;const n=e.target.closest("smart-list-item");n instanceof Smart.ListItem&&!n.disabled&&!n.readonly?(t.$.editInput.dir=t.rightToLeft?"rtl":"ltr",t.$.editInput.style.width=t.$.itemsInnerContainer.offsetWidth+"px",t.$.editInput.owner=n,t.$.editInput.value=n.label,t.$.editInput.style.height=n.offsetHeight+"px",t.$.editInput.style.top=n.offsetTop+t.$.itemsInnerContainer.offsetTop+"px",t.$.editInput.setAttribute("aria-label","Edit item "+n.label),t.$editInput.hasClass("smart-hidden")&&t.$editInput.removeClass("smart-hidden"),t.$.editInput.focus({preventScroll:!0})):t.$editInput.addClass("smart-hidden")}_editInputEventHandler(e){const t=this;if("blur"===e.type||"keydown"===e.type&&"Escape"===e.key)return t.$editInput.hasClass("smart-hidden")||t.$editInput.addClass("smart-hidden"),void t.focus();if("keydown"===e.type||t.$editInput.hasClass("smart-hidden"))return;const n=e.target;if(e.stopPropagation(),n.owner.label!==n.value&&(n.owner.label=n.value,t.itemTemplate&&t._applyTemplate(n.owner),t.dataSource)){const a=t.dataSource[n.owner.dataIndex];a&&(t.displayMember?a[t.displayMember]=n.value:a.label=n.value)}t.$editInput.addClass("smart-hidden"),t.$.fireEvent("itemLabelChange",{selected:n.owner.selected,disabled:n.owner.disabled,index:t._indexOf(n.owner),label:n.owner.label,value:n.owner.value})}_pointerUpHandler(e){const t=this;let n=e.originalEvent,i=n.target;(t.shadowRoot||t.isInShadowDOM)&&(i=n.originalEvent?n.originalEvent.composedPath()[0]:n.composedPath()[0]);const a=r=>{const o=r.ownerListBox;o.disabled||o!==t||o.displayLoadingIndicator||"none"===o.selectionMode||r.grouped||r.readonly||(o._focus(r),o.select(r),Smart.ListBox.DragDrop.StartPosition=null,t.$.fireEvent("itemClick",{selected:i.selected,disabled:i.disabled,index:t._indexOf(i),label:i.label,value:i.value}))};if(!(n.target instanceof Smart.ListItem)||n.target.disabled||n.target instanceof Smart.ListItemsGroup){for(;i.parentElement;){if(i instanceof Smart.ListItem&&!i.disabled&&!(i instanceof Smart.ListItemsGroup))return void a(i.dataItem);i=i.parentElement}if(this.shadowRoot&&"shadow"===this.shadowDomMode){const r=n.composedPath();for(let o=0;o<r.length;o++){const s=r[o];s instanceof Smart.ListItem&&!s.disabled&&a(s.dataItem)}}}else a(i.dataItem)}_upHandler(e){const t=this;if(super._upHandler(),!t.disabled&&!t.readonly&&Smart.ListBox.DragDrop.StartPosition){if(Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging){const n=Math.abs(e.pageX-Smart.ListBox.DragDrop.StartPosition.left),i=Math.abs(e.pageY-Smart.ListBox.DragDrop.StartPosition.top);let a=n>=0&&n<=3&&i>=0&&i<=3;if(Smart.Utilities.Core.isMobile&&new Date-Smart.ListBox.DragDrop.StartTime>=300&&(a=!1,Smart.ListBox.DragDrop.StartTime=null),a){const r=e.originalEvent.target.closest("smart-list-box");r?r._pointerUpHandler(e):t._pointerUpHandler(e),Smart.ListBox.DragDrop.StartPosition=null}else{let r=e.originalEvent.target;if(!(e.target instanceof Smart.ListItem)||r.readonly||e.target.disabled||e.target instanceof Smart.ListItemsGroup)for(;r.parentElement;){if(r instanceof Smart.ListItem&&!r.readonly&&!r.disabled&&!(r instanceof Smart.ListItemsGroup)){e.stopPropagation();break}r=r.parentElement}else e.stopPropagation()}}else if(!Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging&&"release"===t.selectionChangeAction){const n=(t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target).closest("smart-list-box");setTimeout(()=>{n?n._pointerUpHandler(e):t._pointerUpHandler(e)})}if(Smart.ListBox.DragDrop.Feedback){let n;if(Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback),Smart.ListBox.DragDrop.Feedback=null,Smart.Utilities.Core.isMobile&&Smart.ListBox.DragDrop.Dragging)for(let i=0;i<Smart.ListBox.DragDrop.ListBoxes.length;i++){const a=Smart.ListBox.DragDrop.ListBoxes[i],r=a.getBoundingClientRect();if(a.allowDrop&&!a.closest(".smart-visibility-hidden")&&r.left<=e.clientX&&e.clientX<=r.left+r.width&&r.top<=e.clientY&&e.clientY<=r.top+r.height){n=a;const o=a._items.filter(s=>!s.hidden);for(let s=0;s<o.length;s++){const l=o[s],d=l.getBoundingClientRect();if((o.indexOf(l)===o.length-1||l.parentNode.lastElementChild===l)&&e.clientY>=r.top+l.offsetTop-a.scrollTop+d.height/2&&e.clientY<=r.top-a.scrollTop+l.offsetTop+d.height){Smart.ListBox.DragDrop.DropDetails={item:l,position:"bottom"};break}if(e.clientY>=r.top+l.offsetTop-a.scrollTop&&e.clientY<=r.top+l.offsetTop+d.height-a.scrollTop){Smart.ListBox.DragDrop.DropDetails={item:l,position:"top"};break}}}}if(Smart.ListBox.DragDrop.Dragging){if(Smart.ListBox.DragDrop.DropDetails){let i=Smart.ListBox.DragDrop.DropDetails.item,a=Smart.ListBox.DragDrop.Item;const r=a.ownerListBox;let o=e.originalEvent.target;if(t.isInShadowDOM&&(o=e.originalEvent?e.originalEvent.composedPath()[0]:e.composedPath()[0]),n=!n&&o.closest?o.closest("smart-list-box"):n,document.body.classList.remove("smart-dragging"),i.$.removeClass("smart-list-item-line-feedback"),i.$.removeClass("smart-list-item-bottom-line-feedback"),n&&i.ownerListBox!==n&&n.items.length>0&&(i=n.items[n.items.length-1]),Smart.ListBox.DragDrop.Item===i||n!==i.ownerListBox&&!Smart.Utilities.Core.isMobile)n&&0===n._items.length&&"none"!==n.dropAction&&("move"===n.dropAction?Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item):"copy"===n.dropAction&&(a=a.cloneNode(!0)),n.appendChild(a));else if("none"!==a.ownerListBox.dropAction){i.ownerListBox!==a.ownerListBox&&"move"===a.ownerListBox.dropAction&&Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item),"copy"===a.ownerListBox.dropAction&&(a=a.cloneNode(!0)),Smart.ListBox.DragDrop.Item.group=i.group;const d=i.ownerListBox;"checkBox"!==d.selectionMode&&"radioButton"!==d.selectionMode&&d.clearSelection(),"top"===Smart.ListBox.DragDrop.DropDetails.position?d.insertBefore(a,i):i.parentNode.lastElementChild===i?d.appendChild(a):d.appendChild(a,i),d.ensureVisible(a),"checkBox"===d.selectionMode||"radioButton"===d.selectionMode?(d._focus(a),d._refreshSelection()):(d.clearSelection(),d.select(a))}a.selected&&n!==r&&r._refreshSelection();const s=Smart.ListBox.DragDrop.Item,l=s.ownerListBox;s.displayMode="checkBox"===l.selectionMode||"radioButton"===l.selectionMode?l.selectionMode:"plain",l.$.fireEvent("dragEnd",{item:s,target:i,data:Smart.ListBox.DragDrop,previousContainer:r,container:n,originalEvent:e}),l._focus(s)}else{const i=Smart.ListBox.DragDrop.Item,a=i.ownerListBox;i.displayMode="checkBox"===a.selectionMode||"radioButton"===a.selectionMode?a.selectionMode:"plain",document.body.classList.remove("smart-dragging"),a.$.fireEvent("dragEnd",{item:i,target:null,data:Smart.ListBox.DragDrop,previousContainer:a,container:a,originalEvent:e}),a._focus(i)}e.preventDefault()}delete Smart.ListBox.DragDrop.DraggedFrom,Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}for(let n=0;n<Smart.ListBox.DragDrop.ListBoxes.length;n++){const i=Smart.ListBox.DragDrop.ListBoxes[n];i._dragInterval&&clearInterval(i._dragInterval)}}}_itemsContainerMoveHandler(e){if(Smart.ListBox.DragDrop.Dragging)return this._applyItemFeedback(e),this._moveHandler(e),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}_touchmoveHandler(e){if(Smart.ListBox.DragDrop.Dragging&&e.cancelable)return e.preventDefault(),void e.stopPropagation();super._touchmoveHandler(e)}_applyItemFeedback(e){const t=this,n=e.originalEvent.target,i=n.closest?n.closest("smart-list-item"):n;Smart.Utilities.Core.isMobile?Smart.ListBox.DragDrop.DropDetails={item:Smart.ListBox.DragDrop.Item,position:"bottom"}:0!==t.items.length&&(i?i._itemOnMouseMove(e):t.items[t.items.length-1]._itemOnMouseMove(e,!0))}_moveHandler(e){const t=this;if(!Smart.ListBox.DragDrop.Feedback||Smart.ListBox.DragDrop.DraggedFrom!==t)return;const n=t.dragOffset;if(Smart.ListBox.DragDrop.Dragging){Smart.ListBox.DragDrop.Feedback.style.left=n[0]+e.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=n[1]+e.pageY+"px",t.$.fireEvent("dragging",{item:Smart.ListBox.DragDrop.Item,data:Smart.ListBox.DragDrop,originalEvent:e.originalEvent});for(let i=0;i<Smart.ListBox.DragDrop.ListBoxes.length;i++){const a=Smart.ListBox.DragDrop.ListBoxes[i];a._dragInterval&&clearInterval(a._dragInterval),a._dragInterval=setInterval(function(){const r=a.getBoundingClientRect();r.left<=e.clientX&&r.left+r.width>=e.clientX&&(e.clientY>=r.top&&e.clientY<=r.top+20?a.scrollTop-=2:e.clientY>=r.top+r.height-20&&e.clientY<=r.top+r.height&&(a.scrollTop+=2))},1)}return e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}{const i=Math.abs(e.pageX-Smart.ListBox.DragDrop.StartPosition.left),a=Math.abs(e.pageY-Smart.ListBox.DragDrop.StartPosition.top),r=new Date-Smart.ListBox.DragDrop.StartTime;let o=i>=5&&i<=15||a>=5&&a<=15;if(Smart.Utilities.Core.isMobile&&(r<300||r>1e3)&&(o=!1),o){Smart.ListBox.DragDrop.Dragging=!0,Smart.ListBox.DragDrop.Feedback.style.left=n[0]+e.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=n[1]+e.pageY+"px",t.getShadowRootOrBody().appendChild(Smart.ListBox.DragDrop.Feedback),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation();const s=Smart.ListBox.DragDrop.Item,l=s.ownerListBox;l.$.fireEvent("dragStart",{item:s,data:Smart.ListBox.DragDrop,container:l,previousContainer:l,originalEvent:e.originalEvent}),document.body.classList.add("smart-dragging")}}}_focusHandler(){this._focused=!0,this.setAttribute("focus","")}_blurHandler(){this._focused=!1,this.removeAttribute("focus")}appendChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}t.isVirtualized?(t._items.indexOf(e)>-1&&t._items.splice(t._items.indexOf(e),1),t._items.push(e)):(e.dataItem=e,t.shadowRoot&&"light"===t.shadowDomMode?t.appendChild(e):t.$.itemsInnerContainer.appendChild(e),t._items.indexOf(e)>-1&&t._items.splice(t._items.indexOf(e),1),t._items.push(e)),t._refreshItems(),t._refreshSelection()}insertBefore(e,t){const n=this;if(!n.isCompleted){const i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,i.concat(Array.prototype.slice.call(arguments)))}n.isVirtualized?(n._items.indexOf(e)>-1&&n._items.splice(n._items.indexOf(e),1),n._items.splice(n._indexOf(t),0,e)):(e.dataItem=e,t.parentNode.insertBefore(e,t),n._items.indexOf(e)>-1&&n._items.splice(n._items.indexOf(e),1),n._items.splice(n._indexOf(t),0,e)),n._refreshItems(),n._refreshSelection()}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}if(t.isVirtualized)t._items.splice(t._indexOf(e),1);else if(e.parentNode){const n=t.selectedIndexes.slice(0),i=t.selectedValues.slice(0),a=n.indexOf(e.dataIndex);e.parentNode.removeChild(e),a>-1&&(n.splice(a,1),i.splice(a,1),t.selectedIndexes=n,t.selectedValues=i)}t._refreshItems()}propertyChangedHandler(e,t,n){if("dataSource"===e&&(!n||n&&Array.isArray(n)&&0===n.length))return void this.clearItems();super.propertyChangedHandler(e,t,n);const i=this;switch(e){case"innerHTML":i.clearSelection(),i._dataBind(),i.innerHTML=i.content=Smart.Utilities.Core.html(i.$.content);break;case"dataSource":case"valueMember":case"groupMember":case"displayMember":i.clearSelection(),i._dataBind(),i._applyDefaultSelection();break;case"disabled":case"unfocusable":i._setFocusable();break;case"displayLoadingIndicator":i._setLoadingIndicatorVisibility();break;case"filterable":i._refreshFilter(),i._refreshLayout();break;case"grouped":if(n?i._group():i._ungroup(),"radioButton"===i.selectionMode){if(i.selectedValues.length>0){const a=i.selectedValues;i.clearSelection(),i.select(a[0])}}else i._refreshSelection();i._refreshLayout();break;case"itemTemplate":{if(null===n||""===n)return i._items.map(o=>o.innerHTML=o.label),delete i._bindingDetails,void i._refreshLayout();const a=i.querySelectorAll("smart-list-item"),r=function(){i._handleItemTemplate(n)&&(i._items.map(o=>i._applyTemplate(o)),i._refreshLayout()),i.ownerElement&&i.ownerElement._setDropDownSize&&i.ownerElement._setDropDownSize(),i.$.fireEvent("bindingComplete")};0===a.length?r():i._ensureItemsReady(a,r);break}case"selectedIndexes":case"selectedValues":{let a=i.selectedIndexes.slice(0),r=i.selectedValues.slice(0);if(!i._items||0===i._items.length)return i.selectedIndexes=[],i.selectedValues=[],void(i.$.hiddenInput.value=i.selectedValues.toString());if(i._propertyChanging=!0,"selectedIndexes"===e){a=t.slice(0),i.clearSelection();for(let o=0;o<n.length;o++){const l=i._items[n[o]];l&&("oneOrManyExtended"===i.selectionMode||"oneOrMany"===i.selectionMode?(i.selectedIndexes.length>0&&0===o&&i.clearSelection(),i._select(l)):i.select(l))}}else{r=t.slice(0),i.selectedValues=[],i.clearSelection();for(let o=0;o<n.length;o++){const l=i.getItem(n[o]);l&&("oneOrManyExtended"===i.selectionMode?i._select(l):i.select(l))}}if(i.selectedIndexes.length>0&&i._focus(i._items[i.selectedIndexes[0]]),i._propertyChanging=!1,JSON.stringify(r)!==JSON.stringify(i.selectedValues.slice(0))){let o=[],s=[];for(let d=0;d<a.length;d++)i.selectedIndexes.indexOf(a[d])<0&&s.push(i._items[a[d]]);for(let d=0;d<i.selectedIndexes.length;d++)a.indexOf(i.selectedIndexes[d])<0&&o.push(i._items[i.selectedIndexes[d]]);let l={addedItems:o,removedItems:s};if(i.selectedIndexes.length>0){const d=i._items[i.selectedIndexes[i.selectedIndexes.length-1]];void 0!==d&&(l.selected=d.selected,l.disabled=d.disabled,l.index=i._indexOf(d),l.label=d.label,l.value=d.value)}else l.selected=!1,l.disabled=!1,l.index=-1,l.label="",l.value="";i.$.fireEvent("change",l),i._updateTargetValue()}break}case"selectionMode":{const a="checkBox"===i.selectionMode||"radioButton"===i.selectionMode?i.selectionMode:"plain",r=i.selectedIndexes.slice(0),o=i.selectedValues.slice(0);i._propertyChanging=!0;const s=i.selectedValues;i.setAttribute("aria-multiselectable",-1!==["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox","radioButton"].indexOf(n)),i.selectedValues=[],i.clearSelection();for(let l=0;l<s.length;l++){const c=i.getItem(s[l]);c&&("oneOrManyExtended"===i.selectionMode?i._select(c):i.select(c))}if(i._items.forEach(l=>l.displayMode=a),i._recycle(),i._propertyChanging=!1,JSON.stringify(o)!==JSON.stringify(i.selectedValues.slice(0))){let l=[],d=[];for(let u=0;u<r.length;u++)i.selectedIndexes.indexOf(r[u])<0&&d.push(i._items[r[u]]);for(let u=0;u<i.selectedIndexes.length;u++)r.indexOf(i.selectedIndexes[u])<0&&l.push(i._items[i.selectedIndexes[u]]);let c={addedItems:l,removedItems:d};if(r.length>0){const u=i._items[r[r.length-1]];u&&(c.selected=u.selected,c.disabled=u.disabled,c.index=i._indexOf(u),c.label=u.label,c.value=u.value)}i.$.fireEvent("change",c),i._updateTargetValue()}i._applyAriaSelected(),"checkBox"!==n&&"radioButton"!==n&&"checkBox"!==t&&"radioButton"!==t||i._refreshLayout();break}case"topVisibleIndex":i._setTopVisibleIndex(n);break;case"autoSort":i._canSort=n;break;case"alternationStart":case"alternationEnd":case"alternationCount":i._refreshItems(),i._refreshLayout();break;case"sortDirection":case"sorted":{i._canSort=!0,n?i._sort():i._unsort();const a=i.selectedValues;i.selectedValues=[],i._refreshSelection();for(let r=0;r<a.length;r++){const s=i.getItem(a[r]);s&&("oneOrManyExtended"===i.selectionMode?i._select(s):i.select(s))}i._refreshLayout(),i._canSort=i.autoSort;break}}}_refreshSelection(){const e=this;if(!e._items||0===e._items.length)return;const t=e.selectedValues;e.selectedIndexes=[],e.selectedValues=[];for(let n=0;n<e._items.length;n++){const i=e._items[n];i.selected=!1,t.indexOf(i.value)>-1&&e.select(i)}e._recycle()}clearSelection(){const e=this;if(!e._items||0===e._items.length)return;let t=[];for(let i=0;i<e._items.length;i++)e._items[i].selected&&t.push(e._items[i]);e._items.map(i=>i.selected=!1),e.selectedValues.slice(0);const n=e.selectedIndexes.slice(0);if(e.selectedIndexes=[],e.selectedValues=[],e.$.hiddenInput.value=e.selectedValues.toString(),e._recycle(),e.context!==e){let i={addedItems:[],removedItems:t};if(n.length>0){const a=e._items[n[n.length-1]];a&&(i.selected=a.selected,i.disabled=a.disabled,i.index=e._indexOf(a),i.label=a.label,i.value=a.value)}e.$.fireEvent("change",i),e._updateTargetValue()}}ensureVisible(e){const t=this;if(e)return!("string"==typeof e&&!(e=t.getItem(e))||(t.isVirtualized||t.$.itemsContainer.scrollTop===t.scrollTop||(t.scrollTop=t.$.itemsContainer.scrollTop),e.top+e.height>=t.scrollTop+t.offsetHeight&&(t.scrollTop=t.scrollTop+e.height,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),(e.top<=t.scrollTop||e.top>=t.scrollTop+t.$.itemsContainer.offsetHeight)&&(t.scrollTop=e.top,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),0===t._indexOf(e)||1===t._indexOf(e)&&t._items.length>1&&t._items[0].grouped?(t.scrollTop=0,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)):t._indexOf(e)===t._items.length-1&&(t.scrollTop=t.scrollHeight,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),0))}get items(){const e=this;if(!window.__karma__&&!window.karma&&e instanceof Element&&e.isRendered&&e.hasAttribute&&e.hasAttribute("smart-blazor")){let t=[];for(let n=0;n<e._items.length;n++){const i=e._items[n];t.push({label:i.label,value:i.value})}return t}return e._filteredItems?e._filteredItems:e._items}getItems(){const e=this,t=e._filteredItems?e._filteredItems:e._items;let n=[];if(t&&t.length>0)for(let i=0;i<t.length;i++){const a=t[i];n.push({label:a.label,value:a.value})}return n}ready(){super.ready();const e=this;if(e.shadowRoot&&"light"===e.shadowDomMode){const i=document.createDocumentFragment();[].slice.call(e.$.itemsInnerContainer.children).map(a=>i.appendChild(a)),e.appendChild(i),e.$.itemsInnerContainer.appendChild(document.createElement("slot"))}e._areCSSVarsSupported=Smart.Utilities.Core.CSSVariablesSupport(),e.isUpdating=0,e._scrollView&&(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar),e._scrollView.hScrollBar.$.addClass("smart-hidden"),e._scrollView.vScrollBar.$.addClass("smart-hidden"));const t=e._scrollView.vScrollBar,n=e._scrollView.hScrollBar;t.hasStyleObserver=!1,n.hasStyleObserver=!1,t.hasResizeObserver=!1,n.hasResizeObserver=!1,t.wait=!1,n.wait=!1,e._setFocusable()}render(){const e=this;e.setAttribute("role","listbox"),e.setAttribute("aria-orientation","vertical"),e.$.verticalScrollBar.setAttribute("aria-controls",e.id),e.$.horizontalScrollBar.setAttribute("aria-controls",e.id),e._keysPressed={},e._incrementalSearchQuery="",e._incrementalSearchItems=[],e._canSort=!0,e._previousEntry="",e._setLoadingIndicatorVisibility(),e._refreshFilter(),e._initializeInnerHTML(),e._dataBind(),e._applyDefaultSelection(),e.enableShadowDOM&&HTMLElement.prototype.appendChild.apply(e,[e.$.hiddenInput]),e.setAttribute("aria-multiselectable",-1!==["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox","radioButton"].indexOf(e.selectionMode)),super.render()}_lazyInitItems(){const e=this;if(e._inLazyInit)return cancelAnimationFrame(Smart.ListBox.processTimer),void delete Smart.ListBox.processTimer;e._inLazyInit=!0,e.dataSource||(e.clearSelection(),e._dataBind(),e._applyDefaultSelection()),cancelAnimationFrame(Smart.ListBox.processTimer),delete Smart.ListBox.processTimer,e._inLazyInit=!1}_applyDefaultSelection(){const e=this;!e._focusedItem&&e._items&&e._items.length>0&&0===e.selectedIndexes.length&&("one"!==e.selectionMode&&"oneOrMany"!==e.selectionMode&&"oneOrManyExtended"!==e.selectionMode||e.select(e._items[0]))}attached(){const e=this;super.attached(),Smart.ListBox.DragDrop||(Smart.ListBox.DragDrop={ListBoxes:[]}),Smart.ListBox.DragDrop.ListBoxes.push(e),e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.selectedIndexes.length>0&&e._items&&e.ensureVisible(e._items[e.selectedIndexes[0]])}detached(){const e=this;if(super.detached(),e._scrollView&&(e._scrollView.unlisten(),delete e._scrollView),Smart.ListBox.DragDrop&&Smart.ListBox.DragDrop.ListBoxes){const t=Smart.ListBox.DragDrop.ListBoxes.indexOf(e);Smart.ListBox.DragDrop.ListBoxes.splice(t,1)}}_createItem(e,t,n){const i=this,a="checkBox"===i.selectionMode||"radioButton"===i.selectionMode?i.selectionMode:"plain",r=n?{}:document.createElement("smart-list-item");r.ownerListBox=i,"number"==typeof e&&(e=""+e);const o=function(c,u){return void 0!==e[c]?""+e[c]:e[u]};let s="string"==typeof e?e:o(i.displayMember,"label"),l="string"==typeof e?e:o(i.valueMember,"value"),d=o(i.groupMember,"group");return void 0===s&&(s=void 0!==t?""+t:""),r.label=r.innerHTML=""+s,void 0===l&&(l=void 0!==t?""+t:s),e.color&&(r.color=e.color),r.value=""+l,r.displayMode=a,r.selected=!!e.selected&&e.selected,r.disabled=!!e.disabled&&e.disabled,r.dataItem=r,void 0!==t&&(r.dataIndex=t),i._alternateItem(r),e.title&&(r.title=e.title),d&&(r.group=""+d),r}_alternateItem(e){const t=this,n=t.alternationStart,i=t.alternationEnd>0?t.alternationEnd:1/0;t.alternationCount<=0||(void 0===t._alternationIndexCounter&&(t._alternationIndexCounter=0),e.dataIndex>=n&&e.dataIndex<=i&&(e.alternationIndex=t._alternationIndexCounter++,t._alternationIndexCounter===t.alternationCount&&(t._alternationIndexCounter=0)))}_beginUpdate(){this.isUpdating++}_isUpdating(){return this.isUpdating>0}_endUpdate(){this.isUpdating--}get _scrollHeight(){const e=this;if(0===e._items.length||e._items.filter(n=>!n.hidden).length<1)return 0;let t=0;if(e.isVirtualized){if(e.__scrollHeight)return e.__scrollHeight;if(0===e._items.length)return 0;e.isUpdating++;const n=e._createItem(e.dataSource[0]);e.$.itemsInnerContainer.appendChild(n);for(let i=0;i<e._items.length;i++){const a=e._items[i];a.hidden?(a.height=0,a.top=t):(e.itemHeight?(e.itemHeight<32&&(e.itemHeight=32),a.height=e.itemHeight):(n.$&&n.$.itemContainer?n.$.itemContainer.firstElementChild.innerHTML=a.label:n.label=a.label,a.height=n.offsetHeight),a.top=t,t+=a.height)}e.$.itemsInnerContainer.removeChild(n),e.__scrollHeight=t-e.$.itemsInnerContainer.offsetHeight,e.filterable&&(e.__scrollHeight+=e.$.filterInput.offsetHeight),t=e.__scrollHeight,e.isUpdating--}else{for(let n=0;n<e._items.length;n++){const i=e._items[n];i.hidden?(i.height=0,i.top=t):(e.itemHeight?"auto"!==e.itemHeight&&(i.height=e.itemHeight,i.style.height=i.height+"px"):i.height=i.offsetHeight,i.top=i.offsetTop,t+=i.height)}t=e.$.itemsInnerContainer.scrollHeight-e.$.itemsInnerContainer.offsetHeight,e.filterable&&t>0&&(t+=e.$.filterInput.offsetHeight),e.__scrollHeight=t}return t}_initializeRecyclingItems(){const e=this;if(!e.dataSource||e.dataSource&&0===e.dataSource.length||!e.isVirtualized)return;let t=0,n=e.offsetHeight||400;e.$.itemsInnerContainer.innerHTML="",e._recyclingItems=[];const i=function(){for(let r=0;r<e.dataSource.length;r++){const s=e._createItem(e.dataSource[r]);if(e.itemHeight&&"auto"!==e.itemHeight&&(s.style.height=e.itemHeight+"px"),e.$.itemsInnerContainer.appendChild(s),t+=s.offsetHeight,s.dataItem=e._items[r],e._recyclingItems.push(s),t>1.5*n)break}};i();let a=0;for(;t<1.5*n&&++a<5;)i()}_dataBind(){const e=this;if(e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),"function"==typeof e.dataSource&&(e._items=[],delete e._filteredItems),"string"==typeof e.dataSource&&(e.dataSource=JSON.parse(e.dataSource)),null!==e.dataSource&&Array.isArray(e.dataSource)){e.isUpdating++;const i=a=>{e._items=[],e._groups=[],delete e._filteredItems;const r=e.dataSource;for(let o=0;o<r.length;o++){const l=e._createItem(r[o],o,!a);e._items[o]=l,a&&a.appendChild(l)}};if(e.isVirtualized)i(),e._initializeRecyclingItems();else{const a=document.createDocumentFragment();e.$.itemsInnerContainer.innerHTML="",i(a),e.$.itemsInnerContainer.appendChild(a)}e.isUpdating--}const t=e.shadowRoot?e.shadowRoot.querySelectorAll("smart-list-item"):e.querySelectorAll("smart-list-item"),n=function(){e.isUpdating++,e.dataSource||(e._initializeHtmlListItems(),e._initializeHtmlListGroups()),e.grouped&&e._group(),e.sorted&&e._sort(),e._refreshLayout(),e._initializeSelection(),e.isInitialized=!0,e._canSort=e.autoSort,e.isUpdating--,e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&(e._items.map(i=>e._applyTemplate(i)),e._refreshLayout()),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted()),e.topVisibleIndex>-1&&e._setTopVisibleIndex(e.topVisibleIndex),e.$.fireEvent("bindingComplete"),e._updateTopVisibleIndex(),0===e._items.length&&e.clearItems(),e._applyAriaSelected()};0===t.length?n():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(t,n))}_ensureItemsReady(e,t){const n=this,i=function(){const a=function(r){for(let o=0;o<e.length;o++)e[o].context="node"===r?e[o]:document};a("node"),t(),a()};if(0===e.length)i();else{n._nodesReadyListeners=0;for(let a=0;a<e.length;a++){const r=e[a],o=function(){n._nodesReadyListeners--,0===n._nodesReadyListeners&&(i(),delete n._nodesReadyListeners)}.bind(n);r.isCompleted||(n._nodesReadyListeners++,r._onCompleted=o)}0===n._nodesReadyListeners&&i()}}_initializeInnerHTML(){const e=this;e.$.itemsInnerContainer.innerHTML.indexOf("<option")>=0?e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<optgroup/gi,"<smart-list-items-group").replace(/<\/optgroup/gi,"</smart-list-items-group").replace(/<option/gi,"<smart-list-item").replace(/<\/option/gi,"</smart-list-item"):e.$.itemsInnerContainer.innerHTML.indexOf("<ul")>=0&&(e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<ul/gi,"<smart-list-items-group").replace(/<\/ul/gi,"</smart-list-items-group").replace(/<li/gi,"<smart-list-item").replace(/<\/li/gi,"</smart-list-item"))}_initializeHtmlListItems(){const e=this,t=e.shadowRoot&&"shadow"===e.shadowDomMode?e.shadowRoot.querySelectorAll("smart-list-item"):e.querySelectorAll("smart-list-item"),n="checkBox"===e.selectionMode||"radioButton"===e.selectionMode?e.selectionMode:"plain",i=function(r,o,s){return void 0!==r[o]?""+r[o]:r[s]};e._items=[];let a=0;for(let r=0;r<t.length;r++){const o=t[r];o.dataIndex=r,o.label=o.innerHTML,o.dataItem=o,o.top||(o.top=a),o.height||(o.height=o.offsetHeight),a+=o.height,o.value||(o.value=""+r);const s=i(o,e.displayMember,"label"),l=i(o,e.valueMember,"value"),d=i(o,e.groupMember,"group");o.label!==s&&(o.label=s),o.value!==l&&(o.value=l),o.group!==d&&(o.group=d);const c=o.context;o.context=document,o.displayMode=n,o.context=c,e._alternateItem(o),o.selected&&(e.selectedIndexes.push(r),e.selectedValues.push(o.value)),e._items.push(o)}e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._items.map(r=>e._applyTemplate(r))}_group(){const e=this;e.isUpdating++;let t=[],n=[];e._canSort&&e._unsort();for(let i=0;i<e._items.length;i++){const a=e._items[i];let r=a.group?a.group.trim():a.innerHTML.charAt(0)||a.label.charAt(0);r+=" ",t[r]?t[r].items.push(a):t[t.length++]=t[r]={items:[a],label:r}}if(e.isVirtualized){e._groups=[];for(let i=0;i<t.length;i++){const a=t[i];a.dataIndex=i,a.grouped=!0,a.hidden=!1,a.displayMode="plain",n.push(a);for(let r=0;r<t[i].items.length;r++){const o=a.items[r];o.group=a,n.push(o)}}e._groups=t,e._items=n}else{for(;e.$.itemsInnerContainer.firstChild;)e.$.itemsInnerContainer.removeChild(e.$.itemsInnerContainer.firstChild);const i=document.createDocumentFragment();e._groups=[];for(let a=0;a<t.length;a++){const r=t[a],o=document.createElement("smart-list-items-group");o.label=r.label,o.dataIndex=a;for(let s=0;s<t[a].items.length;s++){const l=r.items[s];n.push(l),l.group=r.label,o.appendChild(l)}e._groups.push(o),i.appendChild(o)}e._items=n,/Trident|Edge/.test(navigator.userAgent)?setTimeout(function(){e.$.itemsInnerContainer.appendChild(i)},50):e.$.itemsInnerContainer.appendChild(i)}e.sorted&&e._sort(),e.isUpdating--}_ungroup(){const e=this;e.isUpdating++,e._groups=[],e._canSort&&e._unsort();let t=[];if(e.isVirtualized)for(let n=0;n<e._items.length;n++){const i=e._items[n];i.grouped||t.push(i)}else{const n=document.createDocumentFragment();for(let i=0;i<e._items.length;i++){const a=e._items[i];n.appendChild(a),t.push(a)}t.length>0&&(e.$.itemsInnerContainer.innerHTML="",e.$.itemsInnerContainer.appendChild(n))}e._items=t,e.sorted&&e._sort(),e.isUpdating--}_initializeHtmlListGroups(){const e=this,t=e.$.itemsInnerContainer.querySelectorAll("smart-list-items-group");e._groups=[];for(let n=0;n<t.length;n++){const i=t[n];i.dataIndex=n,e._groups.push(i)}}_initializeSelection(){const e=this,t=e.selectedIndexes.slice(0),n=e.selectedValues.slice(0);e.clearSelection(),"oneOrManyExtended"===e.selectionMode&&(e._keysPressed.Control=!0);for(let i=0;i<e._items.length;i++){const a=e._items[i];(t.indexOf(i)>=0||n.indexOf(a.value||a.label)>=0)&&(e._focusedItem&&(e._focusedItem._focused=!1),e._focusedItem=null,e.select(a))}"oneOrManyExtended"===e.selectionMode&&(e._keysPressed.Control=!1)}onItemUpdated(){const e=this;e.isInitialized&&!e._isUpdating()&&(e.isUpdating++,e._refreshLayout(),e.isUpdating--)}_refreshItems(){const e=this;if(e.isInitialized&&!e._isUpdating()){if(e.isUpdating++,e.grouped?e._ungroup():e.sorted&&e._canSort&&e._unsort(),!e.isVirtualized){e._items=[];const t=e.shadowRoot?e.shadowRoot.querySelectorAll("smart-list-item"):e.querySelectorAll("smart-list-item");for(let n=0;n<t.length;n++)t[n].dataIndex=n,e._alternateItem(t[n]),e._items.push(t[n])}e.grouped?e._group():e.sorted&&e._sort(),e._refreshLayout(),e.isUpdating--}}_applyIncrementalSearch(e){const t=this;null===t.incrementalSearchDelay||isNaN(t.incrementalSearchDelay)||["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control","Home","End","PageUp","PageDown"].indexOf(e)>-1||(0!==t._incrementalSearchQuery.indexOf(e)&&(t._incrementalSearchQuery+=e),t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t._incrementalSearch(),t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},t.incrementalSearchDelay))}select(e){const t=this;if(("string"!=typeof e||(e=t.getItem(e)))&&("number"!=typeof e||(e=t.getItem(e)))&&!(e.grouped||e.readonly||!t._items.length||e instanceof HTMLElement&&!t.contains(e))){if("none"===t.selectionMode)return t.selectedIndexes=[],void(t.selectedValues=[]);switch(!t._focusedItem!==e&&"none"!==t.selectionMode&&(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=e,e._focused=!0),t.selectionMode){case"one":case"zeroAndOne":return(1!==t.selectedIndexes.length||t.selectedIndexes[0]!==t._indexOf(e))&&(t._previouslySelectedIndexes=t.selectedIndexes,t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),delete t._previouslySelectedIndexes,!0);case"zeroOrOne":return 1===t.selectedIndexes.length&&t.selectedIndexes[0]===t._indexOf(e)?(t.unselect(e),!0):(t._previouslySelectedIndexes=t.selectedIndexes,t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),delete t._previouslySelectedIndexes,!0);case"radioButton":if(t._previouslySelectedIndexes=t.selectedIndexes,t.$.itemsInnerContainer.querySelectorAll("smart-list-items-group").length>0){const n=e.parentNode;if(!e.selected){for(let i in n.children){const a=n.children[i];a.selected&&t.unselect(a)}t._select(e)}return delete t._previouslySelectedIndexes,!0}if(t.isVirtualized&&t._groups.length>0){const n=e.group;if(!e.selected){for(let i in n.items){const a=n.items[i];a.selected&&t.unselect(a)}t._select(e)}return delete t._previouslySelectedIndexes,!0}return e.selected||(t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e)),delete t._previouslySelectedIndexes,!0;case"oneOrMany":return e.selected?t.selectedIndexes.length>1&&t.unselect(e):t._select(e),!0;case"zeroOrMany":case"checkBox":return e.selected?t.unselect(e):t._select(e),!0;case"oneOrManyExtended":{const n=t.selectedValues;if(t._keysPressed.Control)return t.selectedIndexes.length>1&&e.selected?(t.unselect(e),t._focus(t._items[t.selectedIndexes[0]])):t._select(e),!0;if(t._keysPressed.Shift){const i=t._items[t.selectedIndexes[0]];let a;t.clearSelection();const r=n.indexOf(i.value)>=0||i.selected;if(t._select(i,r),t._indexOf(i)>t._indexOf(e))for(a=t._indexOf(i)-1;a>=t._indexOf(e);){const s=t._items[a],l=n.indexOf(s.value)>=0||s.selected;t._select(s,l),a--}else for(a=t._indexOf(i)+1;a<=t._indexOf(e);){const s=t._items[a],l=n.indexOf(s.value)>=0||s.selected;t._select(s,l),a++}const o=[];for(let s=0;s<n.length;s++)o.push(t.getItem(n[s]));if(o.length>0&&!t._propertyChanging){let s=[];for(let l=0;l<t.selectedValues.length;l++){const d=t.selectedValues[l];n.indexOf(d)<0&&s.push(t.getItem(d))}t.$.fireEvent("change",{addedItems:s,removedItems:o,selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value}),t._updateTargetValue()}return!0}for(let i=0;i<n.length;i++){const r=t.getItem(n[i]);e!==r&&t.unselect(r)}return t.clearSelection(),t._select(e,n.indexOf(e.value)>=0),!0}}return!1}}_applyTemplate(e,t){const n=this;if(null===n.itemTemplate)return;if("function"==typeof n.itemTemplate)return void n.itemTemplate(e,{label:e.label,value:e.value,index:n._items.indexOf(e)});if(!n._bindingDetails||0===n._bindingDetails.length)return;const i=n._bindingDetails.length;let a,r,o=document.importNode(n._template.content,!0);for(let s=0;s<i;s++){a=o.childNodes[n._bindingDetails[s].childNodeIndex],r=n._bindingDetails[s].bindingString.length;for(let l=0;l<r;l++){const d=n._bindingDetails[s].bindingString[l],c=d.indexOf("label")>=0?e.label:e.value;a.innerHTML=a.innerHTML.replace(d,c)}}e.innerHTML="";for(let s=0;s<o.childNodes.length;s++)o.childNodes[s].outerHTML&&(e.innerHTML+=o.childNodes[s].outerHTML);!1!==t&&(n._scrollHeightTimer&&(clearInterval(n._scrollHeightTimer),n._scrollHeightCounter=0),n._scrollHeightTimer=setInterval(function(){n._lastScrollHeight===n.$.itemsInnerContainer.scrollHeight&&10!==n._scrollHeightCounter||(n._refreshLayout(),clearInterval(n._scrollHeightTimer)),n._lastScrollHeight=n.$.itemsInnerContainer.scrollHeight,n._scrollHeightCounter++},50))}_filterItems(e,t,n){const i=this,a=i.$.filterInput.value;let r,o;const s=function(){if(0===o.length)return i._filteredItems=[],void(t&&t());r=i._queryItems(a,i.filterMode);for(let d=0;d<o.length;d++)o[d].hidden=!0,o[d].$&&o[d].$.addClass("smart-hidden");for(let d=0;d<r.length;d++){const c=r[d];c.hidden=!1,o[d].$&&c.$.removeClass("smart-hidden")}if(i.grouped&&i.isVirtualized)for(let d=0;d<i._groups.length;d++){const c=i._groups[d],u=c.items;let m=!0;for(let y=0;y<u.length;y++)u[y].hidden||(m=!1);m&&(c.hidden=!0)}if(i.grouped&&!i.isVirtualized)for(let d=0;d<i._groups.length;d++){const c=i._groups[d],u=[].concat(...c.querySelectorAll("smart-list-item"));let m=!0;for(let y=0;y<u.length;y++)u[y].$.hasClass("smart-hidden")||(m=!1);m?c.$.addClass("smart-hidden"):c.$.removeClass("smart-hidden")}if(i._filteredItems=r,i._refreshLayout(),t&&t(),e)return;const l=i._propertyChanging;i._propertyChanging=!0,i._refreshSelection(),i._propertyChanging=l};if("function"==typeof i.dataSource)if(a||n){const l=function(c){(a||n)&&i.isAttached&&(i._updateListBoxAfterQuery=function(){r=o=i._items,s()},i.clearItems(),i.insert(0,c))},d=i.dataSource(a,l);if(d){if(!a&&!n)return;i._updateListBoxAfterQuery=function(){r=o=i._items,s()},i.clearItems(),i.insert(0,d)}}else i.clearItems(),r=o=i._items,s(),i.$.fireEvent("bindingComplete");else{if(o=i._items,0===o.length)return;s()}}_getNextItem(e){const t=this._items,n=this._items.length;let i=Math.max(e+1,0);for(;i<n;){const a=t[i];if(!(a.disabled||a.hidden||a.grouped||a.readonly))return a;i++}return t[e]}_getPreviousItem(e){const t=this._items;let n=Math.max(e-1,0);for(;n>-1;){const i=t[n];if(!(i.disabled||i.hidden||i.grouped||i.readonly))return i;n--}return t[e]}get _scrollWidth(){const e=this,t=e._items;return e.__scrollWidth||(e.__scrollWidth=(()=>{const n=this,i=n.virtualized,a=n.itemMeasureMode;let r=0,o="";function s(l){const d=n._createItem({label:l});d.style.position="absolute",n.$.itemsContainer.appendChild(d),d.label=l,d.style.width="auto",d.isCompleted&&(d.$.itemContainer.style.width="auto");const c=getComputedStyle(d),u=parseInt(c.paddingLeft)+parseInt(c.paddingRight),m=d.$.itemContainer||d,y=m.offsetWidth+m.offsetLeft+u;return d.parentNode.removeChild(d),y}for(let l=0;l<t.length;l++){const d=t[l];if(!d.hidden)if("auto"===a){const c=i?d.label:d.textContent.trim();c.length>o.length&&(o=c)}else r=Math.max(r,s(d.label))}return"auto"===a?s(o):r})()),e.__scrollWidth}update(e,t){const n=this,i=n._items[e];if(i){if("string"==typeof t)i.label=t,void 0===i.value&&(i.value=t);else for(let a in t)"selected"===a&&i[a]!==t[a]?n.select(i):i[a]=t[a],"group"===a&&n._refreshItems();(n.sorted||n.grouped||n.isVirtualized)&&(n._refreshItems(),n._refreshSelection())}else n.error(n.localize("indexOutOfBound",{elementType:n.nodeName.toLowerCase(),method:"update"}))}insert(e,t){const n=this;let i=[];if((!e||e<0)&&(e=0),Array.isArray(t)){n.isUpdating++;for(let a=0;a<t.length;a++){const o=n._createItem(t[a]);i.push(o),e>=n._items.length||0===n._items.length?n.appendChild(o):n.insertBefore(o,n._items[e])}n.isUpdating--}else{const a=n._createItem(t);i.push(a),e>=n._items.length||0===n._items.length?n.appendChild(a):n.insertBefore(a,n._items[e])}i.length>0?(i.map(a=>n._applyTemplate(a)),n._ensureItemsReady(i,function(){n._refreshItems(),0!==n._items.length&&(n._updateListBoxAfterQuery&&(n._updateListBoxAfterQuery(),delete n._updateListBoxAfterQuery),n._refreshSelection(),n.$.fireEvent("bindingComplete"))})):n._updateListBoxAfterQuery&&(n._updateListBoxAfterQuery(),delete n._updateListBoxAfterQuery)}removeAt(e){const t=this,n=t._items[e];n?(n.selected&&t.unselect(n),t.isVirtualized?t._items.splice(e,1):n.parentNode.removeChild(n),t._refreshItems(),t._refreshSelection(),0===t.selectedIndexes.length&&t._items.length>0&&("oneOrMany"!==t.selectionMode&&"one"!==t.selectionMode&&"oneOrManyExtended"!==t.selectionMode||t.select(t._items[0]))):t.error(t.localize("indexOutOfBound",{elementType:t.nodeName.toLowerCase(),method:"remove"}))}_queryItems(e,t){const n=this,i=[],a=function(r,o){if(r.grouped)return r;switch(t){case"startsWith":if(0===r.label.indexOf(o))return r;break;case"startsWithIgnoreCase":if(0===r.label.toLowerCase().indexOf(o.toLowerCase()))return r;break;case"doesNotContain":if(r.label.indexOf(o)<0)return r;break;case"doesNotContainIgnoreCase":if(r.label.toLowerCase().indexOf(o.toLowerCase())<0)return r;break;case"contains":if(r.label.indexOf(o)>-1)return r;break;case"containsIgnoreCase":if(r.label.toLowerCase().indexOf(o.toLowerCase())>-1)return r;break;case"equals":if(0===r.label.localeCompare(o))return r;break;case"equalsIgnoreCase":if(0===r.label.toLowerCase().localeCompare(o.toLowerCase()))return r;break;case"endsWith":if(r.label.endsWith(o))return r;break;case"endsWithIgnoreCase":if(r.label.toLowerCase().endsWith(o.toLowerCase()))return r;break;case"custom":if(n.filterCallback(r,e))return r}return null};if(0===e.length)return n._items;for(let r=0;r<n._items.length;r++){const o=a(n._items[r],e);o&&i.push(o)}return i}_select(e,t){const n=this,i=n.selectedIndexes.indexOf(n._indexOf(e)),a=n.selectedIndexes.slice(0),r=n.selectedValues.slice(0);if(e.selected=!0,-1!==i)return n._recycle(),!1;if(a.push(n._indexOf(e)),r.push(e.value||e.label),n.selectedIndexes=a,n.selectedValues=r,n._recycle(),n.$.hiddenInput.value=r.toString(),!n.isCompleted||t||!n.isInitialized||n._propertyChanging)return;let o=[];if(n._previouslySelectedIndexes){for(let s=0;s<n._previouslySelectedIndexes.length;s++)n.selectedIndexes.indexOf(n._previouslySelectedIndexes[s])<0&&o.push(n._items[n._previouslySelectedIndexes[s]]);delete n._previouslySelectedIndexes}return n.$.fireEvent("change",{addedItems:[e],removedItems:o,selected:e.selected,disabled:e.disabled,index:n._indexOf(e),label:e.label,value:e.value}),n._updateTargetValue(),!0}_updateTargetValue(){const e=this;if(e.dataset.target){const t=document.querySelector(e.dataset.target);if(t){const n=e.dataset.property,i=e.value;n&&void 0!==t[n]&&(t[n]=i)}}}_setTopVisibleIndex(e){const t=this;if("number"==typeof e&&(t.topVisibleIndex=Math.max(0,e),e=t._items[t.topVisibleIndex]),!e)return!1;e.top!==t.scrollTop&&(t.scrollTop=e.top,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop),t.scrollHeight===t.scrollTop&&t._updateTopVisibleIndex())}_updateTopVisibleIndex(){const e=this,t=e.scrollTop+e._scrollView.verticalScrollBar.offsetHeight-e.offsetHeight;let n;if(e.scrollTop<e.scrollHeight/2){for(let i=0;i<e._items.length;i++)if(e._items[i].top>=t){n=e._items[i];break}}else for(let i=e._items.length-1;i>=0&&!(e._items[i].top<t);i--)n=e._items[i];if(n){const i=e.context;e.context=e,e.topVisibleIndex=n.dataIndex,e.context=i}}unselect(e){const t=this;if(!e||"string"==typeof e&&!(e=t.getItem(e)))return;if("none"===t.selectionMode)return void t.clearSelection();const n=t.selectedIndexes.indexOf(t._indexOf(e)),i=t.selectedIndexes.slice(0),a=t.selectedValues.slice(0);return e.selected=!1,n>=0&&(i.splice(n,1),a.splice(n,1),t.selectedIndexes=i,t.selectedValues=a,t.$.hiddenInput.value=a.toString(),t.isCompleted&&!t._propertyChanging?(t.$.fireEvent("change",{addedItems:[],removedItems:[e],selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value}),t._updateTargetValue(),t._recycle(),!0):void 0)}_handleItemTemplate(e){if(null===e||!e)return;if("function"==typeof e)return e;const t=this;if(!("content"in document.createElement("template")))return t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()})),void(t.itemTemplate=null);if(null===(e=document.getElementById(e))||!("content"in e))return t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"itemTemplate"})),void(t.itemTemplate=null);const n=e.content,i=n.childNodes.length,a=/{{\w+}}/g;let r,o;t._bindingDetails=[],t._template=e;for(let s=0;s<i;s++){for(o=[];r=a.exec(n.childNodes[s].innerHTML);)o.push(r[0]);o.length>0&&t._bindingDetails.push({childNodeIndex:s,bindingString:o})}return!0}_handleKeyStrokes(e){const t=this,n="radioButton"===t.selectionMode||"checkBox"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode;let i=t._items;if(t.filterable&&t.$.filterInput.value.length>0&&(i=t._filteredItems),!t.disabled&&!t.readonly&&i.length){switch(e){case"ArrowLeft":case"ArrowUp":t._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":t._handleArrowKeys(!1);break;case" ":{if(t.selectedIndexes.length<1&&!t._focusedItem)return;const a=t._focusedItem?t._focusedItem:t._items[t.selectedIndexes[t.selectedIndexes.length-1]],r=o=>{o.selected&&"radioButton"!==t.selectionMode?t.unselect(o):t.select(o)};if("oneOrMany"===t.selectionMode)return void(a.selected&&t.selectedIndexes.length>1?r(a):a.selected||r(a));r(a);break}case"Home":if(0===i.length)return;n||(t._keysPressed.Shift||t.clearSelection(),t.select(i[0])),t._focus(i[0]),t.scrollTop=0;break;case"End":if(0===i.length)return;n||(t._keysPressed.Shift||t.clearSelection(),t.select(i[i.length-1])),t._focus(i[i.length-1]),t.scrollTop=t.scrollHeight;break;case"PageUp":t._pageUpKeyHandler(i);break;case"PageDown":t._pageDownKeyHandler(i)}t._recycle()}}_horizontalScrollbarHandler(e){const t=this;e&&e.stopPropagation&&e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollLeft=t._getScrollLeft(e.detail.value)}_getScrollLeft(e,t){const n=this;if(!n.rightToLeft)return e;if(Smart.Utilities.Core.Browser.Chrome){if(!t){const i=2*(parseInt(getComputedStyle(n.$.itemsInnerContainer).getPropertyValue("--smart-list-item-horizontal-offset"))||0);t=n._scrollWidth-n.$.itemsContainer.offsetWidth-i}e=t-e}else e*=-1;return e}_unsort(){const e=this;e.isUpdating++;const t=function(n,i){let a=n.dataIndex,r=i.dataIndex;return a<r?-1:a>r?1:0};if(e.isVirtualized)if(e._groups.length>0){e._groups.sort(t);let n=[];for(let i=0;i<e._groups.length;i++){const a=e._groups[i],r=[].concat(...a.items);r.sort(t),n.push(a),n=n.concat(r)}e._items=n}else e._items.sort(t);else{if(e._groups.length>0){e._groups.sort(t);let n=[];for(let i=0;i<e._groups.length;i++){const r=[].concat(...e._groups[i].querySelectorAll("smart-list-item"));r.sort(t),n=n.concat(r)}e._items=n}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}_applySortOrder(){const e=function(t){for(let n=0;n<t.length;n++){const i=t[n],a=i.parentNode;a&&a.appendChild(i)}};e(this._items),e(this._groups)}_sort(){const e=this;if(!e._canSort)return;e.isUpdating++;const t=function(n,i){let a=n.label,r=i.label;if("asc"===e.sortDirection){if(a<r)return-1;if(a>r)return 1}else{if(a<r)return 1;if(a>r)return-1}return 0};if(e._groups.sort(t),e.isVirtualized)if(e._groups.length>0){let n=[];for(let i=0;i<e._groups.length;i++){const a=e._groups[i],r=[].concat(...a.items);n.push(a),r.sort(t),n=n.concat(r)}e._items=n}else e._items.sort(t);else{if(e._groups.length>0){let n=[];for(let i=0;i<e._groups.length;i++){const r=[].concat(...e._groups[i].querySelectorAll("smart-list-item"));r.sort(t),n=n.concat(r)}e._items=n}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}getItem(e){const t=this;for(let n=0;n<t._items.length;n++)if(t._items[n].value===e)return t._items[n];return null}_focus(e){const t=this;!e||"none"===t.selectionMode||t.disabled||t.readonly||(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=e,t._focusedItem._focused=!0)}_keyDownHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement;let i=e.key;if(e.metaKey&&(i="Control"),!t.disabled&&!t.readonly&&(!t.filterable||t.$.filterInput!==n)&&t._focused&&0!==t._items.length&&!t.disabled&&!t.displayLoadingIndicator){if(t.editable){if("F2"===i)return void t._dblclickEventHandler({target:t._focusedItem});if(t.$.editInput===n)return}if("none"!==t.selectionMode){switch(e.stopPropagation(),i){case"Down":case"Right":case"Left":case"Up":i="Arrow"+i}if(t.filterable)switch(i){case"ArrowLeft":case"ArrowRight":return;case"ArrowUp":case"ArrowDown":e.preventDefault()}if(t._applyIncrementalSearch(i),!(["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","Home","End","PageUp","PageDown"].indexOf(i)<0))if(e.preventDefault(),!t._focusedItem&&t._items.length>0)"one"===t.selectionMode||"oneOrMany"===t.selectionMode||"oneOrManyExtended"===t.selectionMode?t.select(t._items[0]):t._focus(t._items[0]);else switch(t.selectionMode){case"one":case"zeroAndOne":if("Shift"===i||"Control"===i||" "===i)return;t._handleKeyStrokes(i);break;case"oneOrMany":case"zeroOrOne":case"zeroOrMany":case"radioButton":case"checkBox":if("Shift"===i||"Control"===i)return;t._handleKeyStrokes(i);break;case"oneOrManyExtended":if(" "===i)return;t._keysPressed[i]="keydown"===e.type,t._handleKeyStrokes(i)}}}}_keyUpHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement;if(!t.editable||t.$.editInput!==n){if(t.filterable&&t.$.filterInput===n)return t._filterTimer&&clearTimeout(t._filterTimer),void(t._filterTimer=setTimeout(function(){const i=t.context;t.context=t,t._filterItems(),t.scrollTop=t.$.itemsContainer.scrollTop=0,t.scrollLeft=t.$.itemsContainer.scrollLeft=t._getScrollLeft(0),t.context=i},300));if(t._focused){if(t._focusedItem&&t._focusedItem.hidden&&t._filteredItems.length>0){let i=t._filteredItems[0];i.grouped&&t._filteredItems.length>1&&(i=t._filteredItems[1]),t._focus(i),t._recycle()}e.stopPropagation(),e.preventDefault(),t.disabled||("Escape"===e.key&&Smart.ListBox.DragDrop.Dragging&&t._cancelDrag(),["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","PageUp","PageDown"].indexOf(e.key)<0||(t._keysPressed[e.key]=!1))}}}_cancelDrag(){if(!Smart.ListBox.DragDrop.Dragging)return;Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback);const e=Smart.ListBox.DragDrop.Item,t=e.ownerListBox;if(t.$.fireEvent("dragCancel",{item:e,data:Smart.ListBox.DragDrop,container:t,previousContainer:t}),Smart.ListBox.DragDrop.Feedback=null,Smart.ListBox.DragDrop.DropDetails){let n=Smart.ListBox.DragDrop.DropDetails.item;n&&(n.$.removeClass("smart-list-item-line-feedback"),n.$.removeClass("smart-list-item-bottom-line-feedback"))}document.body.classList.remove("smart-dragging"),delete Smart.ListBox.DragDrop.DraggedFrom,Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}_mouseWheelHandler(e){const t=this;if((t.computedHorizontalScrollBarVisibility||t.computedVerticalScrollBarVisibility)&&!t.disabled&&t.computedVerticalScrollBarVisibility){const n=t.scrollTop;if(0===n&&e.deltaY<0||n===t.scrollHeight&&e.deltaY>0)return;e.stopPropagation(),e.preventDefault(),t.scrollTo(n+t._getScrollCoefficient(e,t.offsetHeight))}}_pageDownKeyHandler(e){const t=this;if(0===e.length)return;let n,i=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];if("checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._focusedItem&&(i=t._focusedItem),!i)return;const a=t._indexOf(i);let r=i.top+t.$.itemsContainer.offsetHeight-i.height;for(let o=a;o<e.length;o++)if(e[o].top>=r){n=e[o];break}n||(n=e[e.length-1]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(n):n.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(n),t._focus(n)),(n.height+n.top>t.$.itemsContainer.scrollTop+t.$.itemsContainer.offsetHeight||n.top<t.$.itemsContainer.scrollTop)&&(t.scrollTop=n.top-t.$.itemsContainer.offsetHeight+n.height)}_pageUpKeyHandler(e){const t=this;if(0===e.length)return;let n=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];if("checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._focusedItem&&(n=t._focusedItem),!n)return;const i=n.top-t.$.itemsContainer.offsetHeight;let a;for(let r=t._indexOf(n);r>0;r--)if(e[r].top<=i){a=e[r];break}a||(a=e[0]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(a):a.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(a),t._focus(a)),t.scrollTop=a.top,0===t._indexOf(a)&&(t.scrollTop=0)}clearItems(){const e=this;e.clearSelection(),e.$.itemsInnerContainer.innerHTML="",e._items=[],delete e._focusedItem,e.$placeholder.removeClass("smart-hidden"),e.refresh()}_resizeHandler(e){this.refresh(e)}refresh(e){const t=this;if(!e&&!t._isUpdatingScrollBars&&t.isInitialized)return t._isUpdatingScrollBars=!0,t._initializeRecyclingItems(),t._refreshLayout(),void(t._isUpdatingScrollBars=!1);e&&e.target===t&&!t._isUpdatingScrollBars&&(t._isUpdatingScrollBars=!0,t._initializeRecyclingItems(),t._refreshLayout(),t._isUpdatingScrollBars=!1)}_indexOf(e){const t=this;if(!e)return-1;let n=t._items.indexOf(e);return-1===n&&(n=t._items.indexOf(t.getItem(e.value))),n}_incrementalSearch(){const e=this,t="radioButton"!==e.selectionMode&&"checkBox"!==e.selectionMode&&"zeroOrMany"!==e.selectionMode&&"oneOrMany"!==e.selectionMode&&"zeroOrOne"!==e.selectionMode;let n,i=0;switch(e.incrementalSearchMode){case"containsIgnoreCase":case"equalsIgnoreCase":case"startsWithIgnoreCase":case"endsWithIgnoreCase":n=e._incrementalSearchQuery.toLowerCase();break;default:n=e._incrementalSearchQuery}const a=function(o){o.grouped||o.readonly||(t?(e.selectedIndexes.length>0&&e.clearSelection(),e._focus(o),e.select(o)):e._focus(o),(o.height+o.top>e.$.itemsContainer.scrollTop+e.$.itemsContainer.offsetHeight||o.top<e.scrollTop)&&(e.scrollTop=o.top),0===e._indexOf(o)&&(e.scrollTop=0),e._indexOf(o)===e._items.length-1&&(e.scrollTop=e.scrollHeight))};0!==e._previousEntry.localeCompare(n)&&(e._incrementalSearchItems=e._queryItems(e._incrementalSearchQuery,e.incrementalSearchMode),delete e._itemPosition),e._previousEntry=n;const r=e._incrementalSearchItems.length;if(0!==r)if(1!==r)for(void 0!==e._itemPosition?e._itemPosition<r-1?i=e._itemPosition:(i=0,t?(e._incrementalSearchItems[e._itemPosition].selected=!1,e.selectedIndexes=[],e.selectedValues=[]):e._incrementalSearchItems[e._itemPosition]._focused=!1):t&&e.clearSelection();i<r;i++)if(e._incrementalSearchItems[i].selected&&t)e._incrementalSearchItems[i].selected=!1,e.selectedIndexes=[],e.selectedValues=[];else{if(t||!e._incrementalSearchItems[i]._focused)return a(e._incrementalSearchItems[i]),void(e._itemPosition=i);e._incrementalSearchItems[i]._focused=!1}else a(e._incrementalSearchItems[0])}_selectStartHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement;t.$.filterInput!==n&&t.$.editInput!==n&&e.preventDefault()}_handleArrowKeys(e){const t=this,n="radioButton"!==t.selectionMode&&"checkBox"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode;if(t.disabled||t.readonly)return;let i;if(t._focusedItem&&!t._keysPressed.Shift)i=t._indexOf(t._focusedItem),t._focusedItem._focused=!1;else{if(0===t.selectedIndexes.length)return;i=t.selectedIndexes[t.selectedIndexes.length-1]}const a=e?t._getPreviousItem(i):t._getNextItem(i);t._focus(a),n&&(t._keysPressed.Shift?t.select(a):t._items[i]!==a&&(t.clearSelection(),t.select(a))),t.ensureVisible(a)}_refreshFilter(){const e=this;if(e.filterable)return e.$.filterInput.disabled=!(!e.disabled&&!e.displayLoadingIndicator),e.$filterInputContainer.removeClass("smart-hidden"),void e.$itemsContainer.addClass("filter");e.$.filterInput.disabled=!0,e.$filterInputContainer.addClass("smart-hidden"),e.$itemsContainer.removeClass("filter")}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.removeAttribute("tabindex"):e.tabIndex=e.tabIndex>0?e.tabIndex:0}_setLoadingIndicatorVisibility(){const e=this;e.displayLoadingIndicator?e.$loadingIndicatorContainer.hasClass("smart-visibility-hidden")?e.$loadingIndicatorContainer.removeClass("smart-visibility-hidden"):e.$loadingIndicatorContainer.removeClass("smart-hidden"):e.$loadingIndicatorContainer.addClass(e._areCSSVarsSupported?"smart-hidden":"smart-visibility-hidden")}_refreshLayout(){const e=this,t=e._filteredItems||e._items;if(e.__scrollHeight=null,e.__scrollWidth=null,e._height=null,e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.$itemsContainer.removeClass("hscroll"),e.$itemsContainer.removeClass("vscroll"),!t||null===t||0===t.length)return e.scrollWidth=0,e.scrollHeight=0,e.$filterInputContainer.removeClass("vscroll"),e.$placeholder.removeClass("smart-hidden"),e.isVirtualized&&e._recycle(),void(e.$.itemsInnerContainer.style.width="");e.$placeholder.addClass("smart-hidden");const n=2*(parseInt(getComputedStyle(e.$.itemsContainer).getPropertyValue("--smart-list-item-horizontal-offset"))||0);let i=e._scrollWidth-e.$.itemsContainer.offsetWidth-n,a=e._scrollHeight;if(e._refreshHorizontalScrollBarVisibility(i),e._refreshVerticalScrollBarVisibility(a),e.$.itemsInnerContainer.style.width="",e.$.itemsInnerContainer.style.width="hidden"===e.horizontalScrollBarVisibility?e.$.itemsContainer.offsetWidth-n:Math.max(e.$.itemsContainer.offsetWidth-n,-n+e.__scrollWidth)+"px",e.computedVerticalScrollBarVisibility)return i=e._scrollWidth-e.$.itemsContainer.offsetWidth-n,e._refreshHorizontalScrollBarVisibility(i),"hidden"!==e.horizontalScrollBarVisibility&&(e.$.itemsInnerContainer.style.width="",e.$.itemsInnerContainer.style.width=Math.max(e.$.itemsContainer.offsetWidth-n,-n+e.__scrollWidth)+"px"),e.computedHorizontalScrollBarVisibility&&(("visible"!==e.horizontalScrollBarVisibility||0!==e.scrollWidth||"visible"===e.horizontalScrollBarVisibility)&&(e.__scrollHeight+=e._scrollView.hScrollBar.offsetHeight),e.scrollHeight=e.__scrollHeight,e._scrollView.hScrollBar.$.hasClass("bottom-corner")&&e._scrollView.hScrollBar.refresh()),void(e.isVirtualized&&e._recycle());i=e._scrollWidth-e.$.itemsContainer.offsetWidth-n,e._refreshHorizontalScrollBarVisibility(i),e.computedHorizontalScrollBarVisibility&&(e.scrollHeight=e._scrollHeight,e._refreshVerticalScrollBarVisibility(e.scrollHeight),e.computedVerticalScrollBarVisibility&&(i=e._scrollWidth-e.$.itemsContainer.offsetWidth-e._scrollView.vScrollBar.offsetWidth,e._refreshHorizontalScrollBarVisibility(i)),e._scrollView.vScrollBar.$.hasClass("bottom-corner")&&e._scrollView.vScrollBar.refresh(),e._scrollView.hScrollBar.$.hasClass("bottom-corner")&&e._scrollView.hScrollBar.refresh()),e.isVirtualized&&e._recycle();const r=/Trident|Edge/.test(navigator.userAgent);!e.isRefreshing&&r&&setTimeout(function(){e.isRefreshing=!0,e._refreshLayout(),e.isRefreshing=!1},50)}_styleChangedHandler(){this._refreshLayout()}_swipeLeftHandler(){}_swipeRightHandler(){}_refreshHorizontalScrollBarVisibility(e){const t=this;t.scrollWidth=e,t.computedHorizontalScrollBarVisibility?(t.scrollLeft=t._getScrollLeft(t.$.itemsContainer.scrollLeft,e),t.$itemsContainer.addClass("hscroll")):t.$itemsContainer.removeClass("hscroll")}_refreshVerticalScrollBarVisibility(e){const t=this;t.scrollHeight=e,t.computedVerticalScrollBarVisibility?(t.$itemsContainer.addClass("vscroll"),t.$filterInputContainer.addClass("vscroll")):(t.$itemsContainer.removeClass("vscroll"),t.$filterInputContainer.removeClass("vscroll"))}_validateTemplate(e,t){if(null===t||!t)return;const n=this;return"content"in document.createElement("template")?null!==(t=document.getElementById(t))&&"content"in t?t:(n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:e})),void(n[e]=null)):(n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()})),void(n[e]=null))}_getItemIndexByPosition(e){const t=this;return(n=>{let i=0,a=n.length-1;if(e<=0)return 0;if(n[n.length-1].top<=e)return n.length-1;for(;;){const r=Math.floor((i+a)/2),o=n[r];if(t._isItemInPosition(o,e))return r;o.top<e?i=r+1:o.top>e&&(a=r-1)}})(t.filterable&&t.$.filterInput.value.length>0?t._filteredItems:t._items)}_isItemInPosition(e,t){return e.top<=t&&e.top+e.height>t}get isVirtualized(){const e=this;return e.virtualized&&e.dataSource&&e.dataSource.length>0}_recycle(){const e=this;if(!e._recyclingItems)return;let t=e._height;e._height||(t=e._height=e.$.itemsContainer.offsetHeight);let n=0;const i=e.scrollTop,a=e._getItemIndexByPosition(i),r=e.filterable&&e.$.filterInput.value.length>0?e._filteredItems:e._items,o=r[a];let s=o?o.top:0;if(e.$.itemsInnerContainer.style.left=-e.scrollLeft+"px",e.$.itemsInnerContainer.style.top=-i+s+"px",e.isUpdating++,a>=0){const l=r.length;for(let d=a;d<l;d++){const c=r[d];if(0!==c.height){if(!(s+c.height>=i&&s<=i+t))break;{const u=e._recyclingItems[n++];if(!u)break;u.setAttribute("aria-setsize",l),u.setAttribute("aria-posinset",d),u.context=document,u.dataItem=c,u.label=c.label,u.value=c.value,u.selected=c.selected,u._focused=c._focused,u.hidden=c.hidden,u.grouped=c.grouped,u.readonly=c.readonly,u.style.height=c.height+"px",e._alternateItem(u),u.title=c.title?c.title:"",u.displayMode=c.grouped?"plain":c.displayMode,e.scrollWidth>0&&(u.style.width=e.$.itemsInnerContainer.offsetWidth+e.scrollWidth+"px"),e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._applyTemplate(u,!1)}s+=c.height}}}if(n<e._recyclingItems.length)for(let l=n;l<e._recyclingItems.length;l++){const d=e._recyclingItems[n++],c=d.context;d.context=document,d.hidden=!0,d.context=c}e.isUpdating--}_verticalScrollbarHandler(e){const t=this,n=e.detail.value;e&&e.stopPropagation&&e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollTop=n,t._updateTopVisibleIndex(),e.context.max!==e.context.value?e.context.min===e.context.value&&t.$.fireEvent("scrollTopReached"):t.$.fireEvent("scrollBottomReached")}_applyAriaSelected(){const e=this,t=e.isVirtualized?e._recyclingItems:e._items,n=e.selectionMode;for(let i=0;i<t.length;i++){const a=t[i];a.selected?a.setAttribute("aria-selected",!0):a.readonly||a.disabled||-1===["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox"].indexOf(n)?a.removeAttribute("aria-selected"):a.setAttribute("aria-selected",!1)}}})},8687:()=>{(()=>{let e;try{e=!0}catch{e=!1}Smart.Utilities.Assign("BigNumber",class{constructor(t,n,i){var a,r=this;if(Smart.Utilities.BigNumber.bigIntSupport){if(t instanceof Smart.Utilities.BigNumber){if(!Array.isArray(t._d))return new Smart.Utilities.BigNumber(t._d);t=(t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0")+(t._f!=t._d.length?"."+t._d.slice(t._f).join(""):"")}try{r._d=null===t?BigInt(0):"string"==typeof t&&-1!==t.toLowerCase().indexOf("e")?BigInt(parseFloat(t)):BigInt(t)}catch{try{const y=t.toString().split(".");let b=BigInt(y[0]),f=parseInt(y[1].charAt(0));if(b>=0&&f>=5)b+=BigInt(1);else if(b<0)if(f>5)b-=BigInt(1);else if(5===f){let w=1,v=y[1].charAt(w),S=!1;for(;""!==v;)if(w++,v=y[1].charAt(w),"0"!==v){S=!0;break}S&&(b-=BigInt(1))}r._d=b}catch{r._d=BigInt(0)}}return r._f=r._d.toString().replace("-","").length,void(r._s=r._d<0)}if(t instanceof Smart.Utilities.BigNumber){if("bigint"==typeof t._d)return new Smart.Utilities.BigNumber(t._d.toString());for(a in{precision:0,roundType:0,_s:0,_f:0})r[a]=t[a];return r._d=t._d.slice(),void(t._s&&1===t._d.length&&0===t._d[0]&&(r._s=!1))}if(void 0!==t&&("-0"===t&&(t="0"),new RegExp(/e/i).test(t))){var o=t.toString().toLowerCase(),s=o.indexOf("e"),l=new Smart.Utilities.BigNumber(o.slice(0,s)),d=o.slice(s+2),c=o.slice(s+1,s+2),u=new Smart.Utilities.BigNumber(10).pow(c+d);t=l.multiply(u).toString()}for(r.precision=isNaN(n=Math.abs(n))?Smart.Utilities.BigNumber.defaultPrecision:n,r.roundType=isNaN(i=Math.abs(i))?Smart.Utilities.BigNumber.defaultRoundType:i,r._s="-"==(t+="").charAt(0),r._f=((t=t.replace(/[^\d.]/g,"").split(".",2))[0]=t[0].replace(/^0+/,"")||"0").length,a=(t=r._d=(t.join("")||"0").split("")).length;a;t[--a]=+t[a]);r.round()}static get defaultPrecision(){return 40}static get defaultRoundType(){return 4}static get bigIntSupport(){return e&&!0!==Smart.Utilities.BigNumber.ignoreBigIntNativeSupport}add(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d+new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);if(t=n.normalizeOperand(t),n.isZero()&&n._s&&(n._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(n);if(n._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,n.subtract(t);var i,a,r=new Smart.Utilities.BigNumber(n),o=r._d,s=t._d,l=r._f,d=t._f;for(t=Math.max(l,d),l!=d&&((d=l-d)>0?r._zeroes(s,d,1):r._zeroes(o,-d,1)),i=(l=o.length)==(d=s.length)?o.length:((d=l-d)>0?r._zeroes(s,d):r._zeroes(o,-d)).length,a=0;i;a=(o[--i]=o[i]+s[i]+a)/10>>>0,o[i]%=10);return a&&++t&&o.unshift(a),r._f=t,r.round()}subtract(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d-new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);if(t=n.normalizeOperand(t),n.isZero()&&n._s&&(n._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(n);if(n._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,n.add(t);var i,a,r=new Smart.Utilities.BigNumber(n),o=r.abs().compare(t.abs())+1,s=o?r:t,l=o?t:r,d=s._f,c=l._f,u=d;for(s=s._d,l=l._d,d!=c&&((c=d-c)>0?r._zeroes(l,c,1):r._zeroes(s,-c,1)),i=(d=s.length)==(c=l.length)?s.length:((c=d-c)>0?r._zeroes(l,c):r._zeroes(s,-c)).length;i;){if(s[--i]<l[i]){for(a=i;a&&!s[--a];s[a]=9);--s[a],s[i]+=10}l[i]=s[i]-l[i]}return o||(r._s^=1),r._f=u,r._d=l,r.round()}multiply(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);t=n.normalizeOperand(t);var i,a,r,o=new Smart.Utilities.BigNumber(n),s=o._d.length>=(t=new Smart.Utilities.BigNumber(t))._d.length,l=(s?o:t)._d,d=(s?t:o)._d,c=l.length,u=d.length,m=new Smart.Utilities.BigNumber;for(i=u;i;s&&r.unshift(s),m.set(m.add(new Smart.Utilities.BigNumber(r.join("")))))for(r=new Array(u- --i).join("0").split(""),s=0,a=c;a;s+=l[--a]*d[i],r.unshift(s%10),s=s/10>>>0);return o._s=o._s!=t._s,o._f=((s=c+u-o._f-t._f)>=(a=(o._d=m._d).length)?n._zeroes(o._d,s-a+1,1).length:a)-s,o.round()}divide(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d/new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);if(t=n.normalizeOperand(t),"0"==(t=new Smart.Utilities.BigNumber(t)))throw new Error("Division by 0");if("0"==n)return new Smart.Utilities.BigNumber;var i,a,r,o=new Smart.Utilities.BigNumber(n),s=o._d,l=t._d,d=s.length-o._f,c=l.length-t._f,u=new Smart.Utilities.BigNumber,m=0,y=1,b=0,f=0;for(u._s=o._s!=t._s,u.precision=Math.max(o.precision,t.precision),u._f=+u._d.pop(),d!=c&&o._zeroes(d>c?l:s,Math.abs(d-c)),t._f=l.length,(l=t)._s=!1,l=l.round(),t=new Smart.Utilities.BigNumber;"0"==s[0];s.shift());e:do{for(r=b=0,"0"==t&&(t._d=[],t._f=0);m<s.length&&-1==t.compare(l);++m){if(r=m+1==s.length,(!y&&++b>1||(f=r&&"0"==t&&"0"==s[m]))&&(u._f==u._d.length&&++u._f,u._d.push(0)),"0"==s[m]&&"0"==t||(t._d.push(s[m]),++t._f),f)break e;if(r&&-1==t.compare(l)&&(u._f==u._d.length&&++u._f,1)||(r=0))for(;u._d.push(0),t._d.push(0),++t._f,-1==t.compare(l););}if(y=0,-1==t.compare(l)&&!(r=0))for(;r?u._d.push(0):r=1,t._d.push(0),++t._f,-1==t.compare(l););var w;for(a=new Smart.Utilities.BigNumber,i=0;t.compare(w=a.add(l))+1&&++i;a.set(w));t.set(t.subtract(a)),!r&&u._f==u._d.length&&++u._f,u._d.push(i)}while((m<s.length||"0"!=t)&&u._d.length-u._f<=u.precision);return u.round()}mod(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d%new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);t=n.normalizeOperand(t);var i=n.subtract(n.divide(t).intPart().multiply(t));return i.isZero()&&i._s&&(i._s=!i._s),i}pow(t){if(Smart.Utilities.BigNumber.bigIntSupport){let r=BigInt(1);for(let o=BigInt(0);o<new Smart.Utilities.BigNumber(t)._d;o+=BigInt(1))r*=this._d;return new Smart.Utilities.BigNumber(r)}let n=this.normalizeOperand(this);t=n.normalizeOperand(t);var i,a=new Smart.Utilities.BigNumber(n);if(0==(t=new Smart.Utilities.BigNumber(t).intPart()))return a.set(1);for(i=Math.abs(t);--i;a.set(a.multiply(n)));return t<0?a.set(new Smart.Utilities.BigNumber(1).divide(a)):a}set(t){return t=new Smart.Utilities.BigNumber(t),this._d=t._d,this._f=t._f,this._s=t._s,this}compare(t){if(Smart.Utilities.BigNumber.bigIntSupport){const u=new Smart.Utilities.BigNumber(t)._d;return this._d===u?0:this._d>u?1:-1}let n=this.normalizeOperand(this);t=n.normalizeOperand(t);var i,a,r,o=n,s=n._f,l=new Smart.Utilities.BigNumber(t),d=l._f,c=[-1,1];if(o.isZero()&&l.isZero())return 0;if(o._s!=l._s)return o._s?-1:1;if(s!=d)return c[s>d^o._s];for(s=(r=o._d).length,d=(l=l._d).length,i=-1,a=Math.min(s,d);++i<a;)if(r[i]!=l[i])return c[r[i]>l[i]^o._s];return s!=d?c[s>d^o._s]:0}negate(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*BigInt(-1));let t=this.normalizeOperand(this);var n=new Smart.Utilities.BigNumber(t);return n._s^=1,n}abs(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d<0?this._d*BigInt(-1):this._d);let t=this.normalizeOperand(this);var n=new Smart.Utilities.BigNumber(t);return n._s=0,n}intPart(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d);let t=this.normalizeOperand(this);return new Smart.Utilities.BigNumber((t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0"))}valueOf(t,n){return this.normalizeOperand(this).toString(t,n)}toString(t,n,i){function a(l){var d,c,u=new Smart.Utilities.BigNumber(2),m=[];c=void 0===l?r:l;do{d=c.mod(u),m.push(d.toString()),c=c.subtract(d).divide(u).intPart()}while(1===c.compare(new Smart.Utilities.BigNumber(0)));return m.reverse().join("")}let r,o,s;if(Smart.Utilities.BigNumber.bigIntSupport?(r=this,o=Array.isArray(r._d)?(r._s?"-":"")+(r._d.slice(0,r._f).join("")||"0")+(r._f!=r._d.length?"."+r._d.slice(r._f).join(""):""):this._d.toString()):(r=this.normalizeOperand(this),o=(r._s?"-":"")+(r._d.slice(0,r._f).join("")||"0")+(r._f!=r._d.length?"."+r._d.slice(r._f).join(""):"")),void 0===t||10===t)return o;if(r.compare(0)>-1)switch(t){case 2:s=a(),i&&(s=s.padStart(n,"0"));break;case 8:s=function(l){for(var d="";l.length%3!=0;)l="0"+l;for(var c=l.length/3;c>=1;c--)d=parseInt(l[3*c-3]+""+l[3*c-2]+l[3*c-1],2).toString(8)+""+d;return d}(a());break;case 16:s=function(l){for(var d="";l.length%4!=0;)l="0"+l;for(var c=l.length/4;c>=1;c--)d=parseInt(l[4*c-4]+""+l[4*c-3]+l[4*c-2]+l[4*c-1],2).toString(16)+""+d;return d}(a()).toUpperCase(),i&&(s=s.padStart(n/4,"0"))}else s=function(l,d,c){var u="";for(String.prototype.repeat&&(l="0".repeat(c-l.length)+l);l.length<c;)l="0"+l;for(var m=!0,y="",b=(u=(u=(u=(u=l.replace(/0/g,"a")).replace(/1/g,"b")).replace(/a/g,"1")).replace(/b/g,"0")).length-1;b>=0;b--){var f;"0"===u.charAt(b)?!0===m?(f="1",m=!1):f="0":f=!0===m?"0":"1",y=f+""+y}switch(d){case 2:return y;case 8:var w,v;switch(c){case 8:w=3,v="0";break;case 16:w=6,v="00";break;case 32:w=11,v="0";break;case 64:w=22,v="00"}y=v+y;for(var S="",_=w;_>=1;_--)S=parseInt(y[3*_-3]+""+y[3*_-2]+y[3*_-1],2).toString(8)+""+S;return S;case 16:var z;switch(c){case 8:z=2;break;case 16:z=4;break;case 32:z=8;break;case 64:z=16}for(var M="",L=z;L>=1;L--)M=parseInt(y[4*L-4]+""+y[4*L-3]+y[4*L-2]+y[4*L-1],2).toString(16)+""+M;return M.toUpperCase()}}(a(r.negate()),t,n);return s}_zeroes(t,n,i){var a=["push","unshift"][i||0];for(++n;--n;t[a](0));return t}round(){if("_rounding"in this)return this;var t,n,i,a,r=Smart.Utilities.BigNumber,o=this.roundType,s=this._d;for(this._rounding=!0;this._f>1&&!s[0];--this._f,s.shift());for(i=s[n=this.precision+(t=this._f)];s.length>t&&!s[s.length-1];s.pop());return a=(this._s?"-":"")+(n-t?"0."+this._zeroes([],n-t-1).join(""):"")+1,s.length>n&&(i&&o!=r.DOWN&&(o==r.UP||(o==r.CEIL?!this._s:o==r.FLOOR?this._s:o==r.HALF_UP?i>=5:o==r.HALF_DOWN?i>5:o==r.HALF_EVEN&&i>=5&&1&s[n-1]))&&this.add(a),s.splice(n,s.length-n)),delete this._rounding,this}isZero(){return 1===this._d.length&&0===this._d[0]}normalizeOperand(t){return t instanceof Smart.Utilities.BigNumber&&"bigint"==typeof t._d?new Smart.Utilities.BigNumber(t._d.toString()):t}})})()},9264:()=>{Smart("smart-multi-input",class extends Smart.Input{static get properties(){return{dropDownButtonPosition:{allowedValues:["none","left","right"],defaultReflectToAttribute:!0,value:"right",type:"string"},separator:{value:", ",type:"string"},selectedValues:{value:[],type:"array"}}}_performSelect(e){const t=this;if(!e)return void t.close();const n=e.target?e.target.closest("li"):e;if(!n)return;t._selectedItems||(t._selectedItems=[]),n.classList.toggle("active");const i=n.classList.contains("active"),a={label:n.getAttribute("data-label"),value:n.getAttribute("value")};if(i)t._selectedItems.push(a),n.setAttribute("aria-selected",!0),t._setActiveDescendant(n);else{const c=t._selectedItems.findIndex(u=>u.label===a.label&&u.value===a.value);c>-1&&t._selectedItems.splice(c,1),n.setAttribute("aria-selected",!1)}n.setAttribute("aria-selected",i);const r=t._selectedItems,o=t.value,s=t.$.input.dataValue;let[l,d]=[[],[]];for(let c=0;c<r.length;c++){const u=r[c];l.push(u.label),d.push(u.value)}t.set("selectedValues",r.map(c=>c.value)),l=l.join(t.separator),t.set("value",l),t.$.input.dataValue=d=d.join(t.separator),l===o&&d===s||(t.$.fireEvent("change",{value:d,label:l,oldValue:s,oldLabel:o}),t._updateTargetValue())}close(){const e=this;return!!e.opened&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.$.scrollView.parentNode&&!e.opened&&(e.$.scrollView.remove(),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))},1e3),e.$.scrollView.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.opened=!1,e.setAttribute("aria-expanded",!1),e.$.input.focus(),!0)}open(){const e=this;let t;if(e.dropDownDataSource?(e.query="",t="function"==typeof e.dataSource?e.dataSource(e.query):e.dataSource):t="function"==typeof e.dropDownDataSource?e.dropDownDataSource(e.query):e.dropDownDataSource,e._tempItems){t=JSON.parse(JSON.stringify(t));for(let n=0;n<e._tempItems.length;n++){const i=e._tempItems[n];-1===t.indexOf(i)&&t.push(i)}}e._process(t),e.ensureVisible(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}_render(e){const t=this,n=e.map(function(s){let l=s,d=s;"object"==typeof s&&(l=s.label,d=void 0!==s.value?s.value:l);const c=document.createElement("li"),u=document.createElement("a");return u.href="#",c.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),c.setAttribute("data-label",l),c.setAttribute("value",d),c.setAttribute("role","option"),c.setAttribute("aria-selected",!1),c.setAttribute("aria-label",l),void 0!==s.menuLabel&&(l=s.menuLabel),u.innerHTML=t.highlighter?t.highlighter(l):t._highlighter(l),u.setAttribute("aria-hidden",!0),s.icon&&(u.classList.add("icon"),u.classList.add(s.icon)),c.appendChild(u),c});t.$.menu.innerHTML="";let i=[],a=[],r=t._selectedItems;r||(r=t._selectedItems=[]);const o=r.length;r.length&&r.forEach(s=>{a.push(s.label),i.push(s.value)}),i=i.concat((t.$.input.dataValue||t.$.input.value).split(",").map(s=>s.trim())),a=a.concat(t.$.input.value.split(",").map(s=>s.trim()));for(let s=0;s<n.length;s++){const l=n[s],d=l.getAttribute("value"),c=l.getAttribute("data-label"),u=o?i.indexOf(d):a.indexOf(c);u>-1&&a[u]===c&&(l.classList.add("active"),l.setAttribute("aria-selected",!0),t._setActiveDescendant(l),r.findIndex(m=>m.label===c&&m.value===d)<0&&r.push({label:l.getAttribute("data-label"),value:l.getAttribute("value")})),t.$.menu.appendChild(l)}t.set("selectedValues",r.map(s=>s.value))}_next(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n)return void e._performSelect(e.$.menu.firstElementChild);e._selectedItems&&(e._selectedItems=[]);const i=e.$.menu.children;for(let r=0;r<i.length;r++)i[r].classList.remove("active"),i[r].setAttribute("aria-selected",!1);e._setActiveDescendant();let a=n.nextElementSibling;a||(a=e.$.menu.firstElementChild),e._performSelect(a),e.ensureVisible()}_prev(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n)return void e._performSelect(e.$.menu.firstElementChild);e._selectedItems&&(e._selectedItems=[]);const i=e.$.menu.children;for(let r=0;r<i.length;r++)i[r].classList.remove("active"),i[r].setAttribute("aria-selected",!1);e._setActiveDescendant();let a=n.previousElementSibling;a||(a=e.$.menu.lastElementChild),e._performSelect(a),e.ensureVisible()}_keyUpHandler(e){const t=this;if(!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 9:case 13:if(!t.opened)return;t._performSelect(),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault()),t.readonly||(t.$.input.dataValue=t.$.input.value)}}propertyChangedHandler(e,t,n){const i=this;if("value"===e){i.displayMember!==i.valueMember&&"string"!=typeof n?(i.value=n[i.displayMember],i.$.input.dataValue=n[i.valueMember]):i.$.input.dataValue=i.$.input.value=n,i._selectedItems=[],i.set("selectedValues",[]);const a=i.$.menu.children;for(let r=0;r<a.length;r++)a[r].classList.remove("active"),a[r].setAttribute("aria-selected",!1);i._setActiveDescendant()}else"separator"===e?(i.set("value",i.value.replace(new RegExp(t,"g"),n)),i.$.input.dataValue&&(i.$.input.dataValue=i.$.input.dataValue.replace(new RegExp(t,"g"),n))):super.propertyChangedHandler(e,t,n)}_createElement(){const e=this,t=document.createElement("ul"),n=document.createElement("smart-scroll-viewer");n.rightToLeft=e.rightToLeft,n.theme=e.theme,n.horizontalScrollBarVisibility="hidden",n.classList.add("smart-multi-input-drop-down-menu"),e.inverted?n.setAttribute("inverted",""):n.removeAttribute("inverted"),e.classList.add("smart-input"),t.setAttribute("aria-multiselectable",!0),e.$.scrollView=n,e.$.menu=t,e.$.menu.onclick=function(i){const a=i.target.closest("li");i.stopPropagation(),i.preventDefault(),e._performSelect(i),a&&e.$.fireEvent("itemClick",{index:[...a.parentNode.children].indexOf(a),item:a,label:a.getAttribute("aria-label"),value:a.dataValue}),e.$.input.focus()}}_setSelection(){const e=this;let t=e.dataSource;"string"==typeof t&&(t=e.$.deserialize(t,"array"));const n=e.selectedValues;if(t){e._selectedItems=[],t.forEach(n.length>0?a=>{void 0!==a.selected&&delete a.selected}:a=>{"number"!=typeof a&&"boolean"!=typeof a||(a=""+a),a.selected&&n.push(void 0!==a.value?a.value:a)});let i=[];for(let a=0;a<n.length;a++){const r=n[a];t.find(o=>{if("string"==typeof o||"number"==typeof o)o===r&&(e._selectedItems.push(o),i.push(o));else{let s=o.value;"number"==typeof r&&(s=parseFloat(s)),s===r&&(e._selectedItems.push(o),i.push(o.label))}})}i=i.join(e.separator),e.set("value",i),e.$.input.dataValue=n.join(e.separator)}}_setActiveDescendant(e){const t=this;t.readonly||(e?t.setAttribute("aria-activedescendant",e.id):t.removeAttribute("aria-activedescendant"))}})},2066:()=>{Smart("smart-number-input",class extends Smart.Input{template(){return'<div id="inputContainer" role="presentation"><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="nav smart-drop-down-button" role="button" aria-label="Toggle popup"></div></div>'}static get properties(){return{numberFormat:{value:{},type:"any"},min:{value:-9999999999,type:"number"},max:{value:9999999999,type:"number"},step:{value:1,type:"number"},value:{value:0,type:"any"}}}static get listeners(){return{"input.change":"_changeHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler"}}getFormattedValue(e,t){if(null===t)return parseFloat(e);if(null===e)return"";"{}"===JSON.stringify(t)&&(t={style:"decimal"}),Smart.Utilities.Core.Browser.Safari&&"unit"===t.style&&(t.style="decimal");const n=t.locale||this.locale;if("currency"===t.style){const i=void 0!==t.maximumFractionDigits?t.maximumFractionDigits:2,a=(new Smart.Utilities.CurrencyFormatter).format(e,{decimalPlaces:i,currency:t.currency});return"accounting"===t.currencySign&&e<0?"("+a.replace("-","")+")":a}return new Intl.NumberFormat(n,t).format(""+e)}setValue(e){this.value=e}getValue(){return this.value}_updateTargetValue(){const e=this;if(e.dataset.target){const t=document.querySelector(e.dataset.target);if(t){const n=e.dataset.property,i=e.value;n&&void 0!==t[n]&&(t[n]=i)}}}render(){const e=this;super.render(),e.context=e,e.classList.add("smart-input");const t=e.$.input,n=document.createElement("div"),i=document.createElement("div");t.value=null!==e.value?e.getFormattedValue(Math.min(Math.max(e.min,e.value),e.max),e.numberFormat):"",n.tabIndex=i.tabIndex=-1,t.classList.add("smart-input"),n.classList.add("up"),i.classList.add("down");const a=function(s){if(s&&s.ctrlKey&&"ArrowDown"===s.key)i.click();else if(s&&s.ctrlKey&&"ArrowUp"===s.key)n.click();else if("keydown"===s.type){let l=t.value.toString(),d=1.1;d=d.toLocaleString(e.numberFormat.locale||e.locale).substring(1,2);const u=l.indexOf(d);if(s.keyCode>=65&&s.keyCode<=90)return s.ctrlKey?void 0:(s.stopPropagation(),void s.preventDefault());if(" "===s.key)return s.stopPropagation(),void s.preventDefault();if("-"===s.key){const b=r();return o(-b),s.stopPropagation(),void s.preventDefault()}switch(s.key){case"'":case'"':case"/":case"\\":case"`":case"=":case"(":case")":return s.stopPropagation(),void s.preventDefault()}if(","===s.key&&","!==d||"."===s.key&&"."!==d)return s.stopPropagation(),void s.preventDefault();const m=[...l];let y=m[t.selectionStart];if((y===d||void 0===y||-1===u)&&s.keyCode>=48&&s.keyCode<=57&&"0"===m[t.selectionStart-1]){const b=e.getFormattedValue(r(),e.numberFormat),f=t.selectionStart-1;(u>=0||-1===u&&0===r())&&t.value.length===b.length&&(t.value=b.substring(0,t.selectionStart-1)+b.substring(t.selectionStart),t.selectionStart=t.selectionEnd=f)}if(s.key===d){if(-1===e.getFormattedValue(r(),e.numberFormat).indexOf(d))return s.stopPropagation(),void s.preventDefault();if(u>=0)return s.stopPropagation(),s.preventDefault(),void(t.selectionStart=t.selectionEnd=u+1)}else if(s.keyCode>=48&&s.keyCode<=57&&t.selectionStart<u&&t.selectionEnd-t.selectionStart<=1){if(isNaN(parseInt(y)))for(let b=t.selectionStart;b<m.length;b++){let f=parseInt(m[b]);if(!isNaN(f)){t.selectionStart=t.selectionEnd=b;break}}}else{if(u>=0&&t.selectionStart>u&&s.keyCode>=48&&s.keyCode<=57){const b=t.selectionStart,f=e.getFormattedValue(r(),e.numberFormat);let w=0;if(f&&-1!==f.indexOf(d))for(let S=f.indexOf(d);S<f.length;S++)!isNaN(parseInt(f.substring(S,S+1)))&&w++;let v=t.value.toString();return v=v.substring(0,t.selectionStart)+s.key.toString()+v.substring(t.selectionStart+1),v.substring(u+1,u+1+w).length<=w&&t.selectionStart<=u+w&&(t.value=v,t.selectionStart=t.selectionEnd=b+1),e._oldValue=e.getValue(),s.stopPropagation(),void s.preventDefault()}if("Backspace"===s.key||"Delete"===s.key){const b=t.selectionStart,f=u>=0&&t.selectionStart>u,w=e.getFormattedValue(r(),e.numberFormat);let v=0;if(w&&-1!==w.indexOf(d))for(let T=w.indexOf(d);T<w.length;T++)!isNaN(parseInt(w.substring(T,T+1)))&&v++;let S=t.value.toString(),_=!1;if("Delete"===s.key&&t.selectionStart<=u+v){S=S.substring(0,t.selectionStart)+"0"+S.substring(t.selectionStart+1);const T=S.substring(u+1,u+1+v);-1===S.indexOf(d)&&u>=0?(t.selectionStart=t.selectionEnd=b+1,_=!0):f&&T.length<=v&&(t.value=S,t.selectionStart=t.selectionEnd=b+1,_=!0)}else if("Backspace"===s.key){S=S.substring(0,t.selectionStart-1)+"0"+S.substring(t.selectionStart);const T=S.substring(u+1,u+1+v);-1===S.indexOf(d)&&u>=0?(t.selectionStart=t.selectionEnd=b-1,_=!0):f&&T.length<=v&&(t.value=S,t.selectionStart=t.selectionEnd=b-1,_=!0)}return e._oldValue=e.getValue(),void(_&&(s.stopPropagation(),s.preventDefault()))}}}};e.$.dropDownButton.appendChild(n),e.$.dropDownButton.appendChild(i),e.dropDownButtonPosition="right";const r=function(){let s=t.value;if(""===s)return null;let l=1.1;l=l.toLocaleString(e.numberFormat.locale||e.locale).substring(1,2);let c=!1;s.indexOf("(")>=0&&(c=!0,s=s.replace("(","").replace(")",""));let u=[...s],m="";for(let b=0;b<u.length;b++){const f=u[b];switch(f===l&&(m+=f),f){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":m+=f}}m=m.replace(l,"."),s=m;let y=parseFloat(s);return e.numberFormat&&e.numberFormat.style&&"percent"===e.numberFormat.style&&(y/=100),c&&(y=-y),isNaN(y)||y===1/0||y===-1/0?0:(y=Math.min(Math.max(e.min,y),e.max),e._number=y,y)};e.getValue=r;const o=function(s){const l=parseFloat(s);if("-"===s){const d=r();return o(-d),void(e._preventFocus||(t.selectionStart=t.selectionEnd=1,t.selectionEnd=t.value.length))}if(!isNaN(l)){if(e.numberFormat){let d=parseFloat(s);const c=e.getFormattedValue(d,e.numberFormat),u=isNaN(parseFloat(c.substring(0,1)))?1:0,m=s>0?0:1;t.value=c,e._preventFocus||(t.selectionStart=t.selectionEnd=1+u+m),e._number=d}else t.value=l,e._number=l;"number"==typeof s&&(e._preventFocus||(t.selectionStart=0,t.selectionEnd=t.value.length)),e.set("value",""+e._number,!1)}};e.setValue=o,this._attach=function(){t.addEventListener("keydown",a),n.onkeydown=a,i.onkeydown=a;const s=c=>e.numberFormat?e.getFormattedValue(c,e.numberFormat):c,l=function(c){c.interval&&clearInterval(c.interval),c.timer&&clearTimeout(c.timer),c.interval=c.timer=null,c.removeAttribute("active")},d=c=>{c.onmouseleave=c.onmouseup=()=>{l(c)},c.onpointerdown=()=>{e._captured=!0,c.timer=setTimeout(()=>{c.interval=setInterval(()=>{c.click(),c.setAttribute("active","")},50)},100)}};n.onclick=function(){let c=r();if(e._captured||l(n),isNaN(c))return;let u=e.max;if(e.numberFormat&&e.numberFormat.style&&"percent"===e.numberFormat.style){if(c<u||""===u){t.value=s(Math.min(u,c+e.step/100));const m=e.getValue();e.value=100*m,e.$.fireEvent("change",{value:r(),oldValue:c}),e._updateTargetValue()}}else if(c<u||""===u){t.value=s(Math.min(u,c+e.step));const m=e.getValue();e.value=m,e.$.fireEvent("change",{value:r(),oldValue:c}),e._updateTargetValue()}},i.onclick=function(){const c=r();if(e._captured||l(i),!isNaN(c))if(e.numberFormat&&e.numberFormat.style&&"percent"===e.numberFormat.style){if(c>e.min||""===e.min){t.value=s(Math.max(e.min,c-e.step/100));const m=e.getValue();e.value=100*m,e.$.fireEvent("change",{value:r(),oldValue:c}),e._updateTargetValue()}}else if(c>e.min||""===e.min){t.value=s(Math.max(e.min,c-e.step));const m=e.getValue();e.value=m,e.$.fireEvent("change",{value:r(),oldValue:c}),e._updateTargetValue()}},d(n),d(i)},e._detach=function(){t.removeEventListener("keydown",a),n.onclick=i.onclick=null,n.onkeydown=i.onkeydown=null},e.setValue(e.getValue(),e.numberFormat),e.context=document}_focusHandler(){super._focusHandler(),this._oldValue=this.getValue()}_keyDownHandler(){}_keyUpHandler(e){const t=this;switch(t._oldValue||(t._oldValue=0),e.keyCode){case 40:case 38:case 16:case 17:case 18:case 9:case 13:case 27:e.stopPropagation(),e.preventDefault();break;default:{const n=t.getValue();t.value=n,t.$.fireEvent("changing",{value:n,oldValue:t._oldValue}),t._updateTargetValue()}}}_changeHandler(e){const t=this;e.stopPropagation(),t._oldValue||(t._oldValue=0),t._oldValue=t.getFormattedValue(t._oldValue,null);const n=t.getValue();t.value=n,t.$.fireEvent("change",{value:n,oldValue:t._oldValue}),t._updateTargetValue(),t._oldValue=t.getValue()}_blurHandler(){const e=this;super._blurHandler(),e._preventFocus=!0,e.setValue(e.getValue(),e.numberFormat),e._preventFocus=!1}attached(){this._attach()}detached(){this._detach()}_documentUpHandler(e){this._captured=!1,super._documentUpHandler(e)}propertyChangedHandler(e,t,n){const i=this;super.propertyChangedHandler(e,t,n),"locale"===e&&i.setValue(i._number||i.getValue(),i.numberFormat),"value"!==e&&"numberFormat"!==e&&"max"!==e&&"min"!==e||i.setValue(i.getValue(),i.numberFormat)}}),Smart.Utilities.Assign("CurrencyFormatter",class{constructor(){this.symbols={AED:"\u062f.\u0625.\u200f",AFN:"\u060b",ALL:"Lek\xeb",AMD:"\u058f",ANG:"Naf",AOA:"Kz",ARS:"$",AUD:"$",AWG:"Afl.",AZN:"\u20bc",BAM:"KM",BBD:"$",BDT:"\u09f3",BGN:"\u043b\u0432.",BHD:"\u062f.\u0628.\u200f",BIF:"FBu",BMD:"$",BND:"$",BOB:"Bs",BRL:"R$",BSD:"$",BTN:"Nu.",BWP:"P",BYN:"p.",BYR:"\u0440.",BZD:"$",CAD:"$",CDF:"FC",CHF:"CHF",CLP:"$",CNY:"\uffe5",COP:"$",CRC:"\u20a1",CUC:"$",CUP:"$",CVE:"\u200b",CZK:"K\u010d",DJF:"Fdj",DKK:"kr",DOP:"$",DZD:"DA",EGP:"\xa3",ERN:"Nfk",ETB:"Br",EUR:"\u20ac",FJD:"$",FKP:"\xa3",GBP:"\xa3",GEL:"\u20be",GHS:"GH\u20b5",GIP:"\xa3",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"HK$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"\u20aa",INR:"\u20b9",IQD:"\u062f.\u0639.\u200f",IRR:"\u0631\u06cc\u0627\u0644",ISK:"kr",JMD:"$",JOD:"\u062f.\u0623.\u200f",JPY:"\xa5",KES:"Ksh",KGS:"\u0441\u043e\u043c",KHR:"\u17db",KMF:"CF",KPW:"\u20a9",KRW:"\u20a9",KWD:"\u062f.\u0643.\u200f",KYD:"$",KZT:"\u20b8",LAK:"\u20ad",LBP:"L\xa3",LKR:"Rs",LRD:"$",LSL:"lLS",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MDL:"L",MGA:"Ar",MKD:"den",MMK:"K",MNT:"\u20ae",MOP:"MOP$",MRO:"UM",MRU:"UM",MUR:"Rs",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MTn",NAD:"$",NGN:"\u20a6",NIO:"C$",NOK:"kr",NPR:"Rs",NZD:"$",OMR:"\u0631.\u0639.\u200f",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"\u20b1",PKR:"\u0631",PLN:"z\u0142",PYG:"\u20b2",QAR:"\u0631.\u0642.\u200f",RSD:"\u0434\u0438\u043d.",RUB:"\u20bd",RWF:"RF",SAR:"\u0631.\u0633.\u200f",SBD:"$",SCR:"SR",SDG:"\u062c.\u0633.",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",SOS:"S",SRD:"$",SSP:"\xa3",STD:"Db",STN:"Db",SYP:"\xa3",SZL:"E",THB:"\u0e3f",TMT:"\u0422\u041c\u0422",TND:"DT",TOP:"T$",TRY:"\u20ba",TTD:"$",TWD:"$",TZS:"TSh",UAH:"\u20b4",UGX:"USh",USD:"$",UYU:"$",UZS:"\u0441\u045e\u043c",VEF:"Bs",VND:"\u20ab",VUV:"VT",WST:"WS$",XAF:"FCFA",XCD:"$",XOF:"CFA",XPF:"CFP",YER:"\u0631.\u064a.\u200f",ZAR:"R",ZMW:"K"},this.defaultLocales={AED:"ar_AE",AFN:"fa_AF",ALL:"sq",AMD:"hy",ANG:"nl",AOA:"pt_AO",ARS:"es_AR",AUD:"en",AWG:"nl_AW",AZN:"az",BAM:"bs",BBD:"en_BB",BDT:"bn_BD",BGN:"bg",BHD:"ar_BH",BIF:"fr_BI",BMD:"en_BM",BND:"ms_BN",BOB:"es_BO",BRL:"pt_BR",BSD:"en_BS",BTN:"dz",BWP:"en_BW",BYN:"be",BYR:"be",BZD:"en_BZ",CAD:"en_CA",CDF:"fr_CD",CHF:"de_CH",CLP:"es_CL",CNY:"zh_Hans_CN",COP:"es_CO",CRC:"es_CR",CUP:"es_CU",CVE:"pt_CV",CZK:"cs",DJF:"fr_DJ",DKK:"da_DK",DOP:"es_DO",DZD:"ar_DZ",EGP:"ar_EG",ERN:"ti_ER",ETB:"am",EUR:"de",FJD:"en_FJ",FKP:"en_FK",GBP:"en",GEL:"ka",GHS:"en_GH",GIP:"en_GI",GMD:"en_GM",GNF:"fr_GN",GTQ:"es_GT",GYD:"en_GY",HKD:"zh_Hans_HK",HNL:"es_HN",HRK:"hr_HR",HTG:"en",HUF:"hu_HU",IDR:"id",ILS:"he",INR:"en_IN",IQD:"ar_IQ",IRR:"fa_IR",ISK:"is",JMD:"en_JM",JOD:"ar_JO",JPY:"ja",KES:"en_KE",KGS:"ky",KHR:"km",KMF:"ar",KPW:"ko_KP",KRW:"ko_KR",KWD:"ar_KW",KYD:"en_KY",KZT:"kk",LAK:"lo",LBP:"ar_LB",LKR:"si",LRD:"en_LR",LSL:"en_LS",LYD:"ar_LY",MAD:"ar",MDL:"ro",MGA:"fr_MG",MKD:"mk",MMK:"my",MNT:"mn",MOP:"zh",MRO:"ar_MR",MRU:"ar_MR",MUR:"en_MU",MVR:"en",MWK:"en",MXN:"es_MX",MYR:"ms_MY",MZN:"pt_MZ",NAD:"en_NA",NGN:"en_NG",NIO:"es_NI",NOK:"nb_NO",NPR:"ne",NZD:"en_NZ",OMR:"ar_OM",PAB:"es_PA",PEN:"es_PE",PGK:"en_PG",PHP:"fil",PKR:"ur_PK",PLN:"pl",PYG:"es_PY",QAR:"ar_QA",RON:"ro",RSD:"sr",RUB:"ru",RWF:"rw",SAR:"ar_SA",SBD:"en_SB",SCR:"en_SC",SDG:"ar_SD",SEK:"sv_SE",SGD:"en_SG",SHP:"en_SH",SLL:"en_SL",SOS:"so_SO",SRD:"nl_SR",SSP:"en",STD:"pt_ST",STN:"pt_ST",SYP:"ar_SY",SZL:"en_SZ",THB:"th",TJS:"en",TMT:"tk",TND:"ar_TN",TOP:"to",TRY:"tr_TR",TTD:"en_TT",TWD:"zh_Hant_TW",TZS:"sw_TZ",UAH:"uk",UGX:"en_UG",USD:"en_US",UYU:"es_UY",UZS:"uz",VEF:"es_VE",VND:"vi",VUV:"en_BI",WST:"en_AS",XAF:"fr",XCD:"en",XOF:"fr",XPF:"fr_PF",YER:"ar_YE",ZAR:"zu",ZMW:"en_ZM",ZWL:"en_ZW"},this.locales={af:{p:"!#,##0.00",g:"\xa0",d:","},af_NA:{h:"af"},af_ZA:{h:"af"},agq:{p:"#,##0.00!",g:"\xa0",d:","},agq_CM:{h:"agq"},ak:{p:"!#,##0.00",g:",",d:"."},ak_GH:{h:"ak"},am:{p:"!#,##0.00",g:",",d:"."},am_ET:{h:"am"},ar:{p:"!\xa0#,##0.00",g:",",d:"."},ar_001:{h:"ar"},ar_AE:{h:"ar"},ar_BH:{p:"!\xa0#,##0.000",g:",",d:"."},ar_DJ:{h:"ar"},ar_DZ:{p:"!\xa0#,##0.00",g:".",d:","},ar_EG:{h:"ar"},ar_EH:{h:"ar"},ar_ER:{h:"ar"},ar_IL:{h:"ar"},ar_IQ:{p:"!\xa0#,##0.000",g:",",d:"."},ar_JO:{p:"!\xa0#,##0.000",g:",",d:"."},ar_KM:{h:"ar"},ar_KW:{p:"!\xa0#,##0.000",g:",",d:"."},ar_LB:{p:"!\xa0#,##0.00",g:".",d:","},ar_LY:{p:"!\xa0#,##0.000",g:".",d:","},ar_MA:{p:"!\xa0#,##0.00",g:".",d:","},ar_MR:{p:"!\xa0#,##0.00",g:".",d:","},ar_OM:{p:"!\xa0#,##0.000",g:",",d:"."},ar_PS:{h:"ar"},ar_QA:{h:"ar"},ar_SA:{h:"ar"},ar_SD:{h:"ar"},ar_SO:{h:"ar"},ar_SS:{h:"ar"},ar_SY:{h:"ar"},ar_TD:{h:"ar"},ar_TN:{p:"!\xa0#,##0.000",g:".",d:","},ar_YE:{h:"ar"},as:{p:"!\xa0#,##,##0.00",g:",",d:"."},as_IN:{h:"as"},asa:{p:"#,##0.00\xa0!",g:",",d:"."},asa_TZ:{h:"asa"},ast:{p:"#,##0.00\xa0!",g:".",d:","},ast_ES:{h:"ast"},az:{p:"!\xa0#,##0.00",g:".",d:","},az_Cyrl:{h:"az"},az_Cyrl_AZ:{h:"az"},az_Latn:{h:"az"},az_Latn_AZ:{h:"az"},bas:{p:"#,##0.00\xa0!",g:"\xa0",d:","},bas_CM:{h:"bas"},be:{p:"#,##0.00\xa0!",g:"\xa0",d:","},be_BY:{h:"be"},bem:{p:"!#,##0.00",g:",",d:"."},bem_ZM:{h:"bem"},bez:{p:"#,##0.00!",g:",",d:"."},bez_TZ:{h:"bez"},bg:{p:"#,##0.00\xa0!",g:"\xa0",d:","},bg_BG:{h:"bg"},bm:{p:"!#,##0.00",g:",",d:"."},bm_ML:{h:"bm"},bn:{p:"#,##,##0.00!",g:",",d:"."},bn_BD:{h:"bn"},bn_IN:{h:"bn"},bo:{p:"!\xa0#,##0.00",g:",",d:"."},bo_CN:{h:"bo"},bo_IN:{h:"bo"},br:{p:"#,##0.00\xa0!",g:"\xa0",d:","},br_FR:{h:"br"},brx:{p:"!\xa0#,##,##0.00",g:",",d:"."},brx_IN:{h:"brx"},bs:{p:"#,##0.00\xa0!",g:".",d:","},bs_Cyrl:{h:"bs"},bs_Cyrl_BA:{h:"bs"},bs_Latn:{h:"bs"},bs_Latn_BA:{h:"bs"},ca:{p:"#,##0.00\xa0!",g:".",d:","},ca_AD:{h:"ca"},ca_ES:{h:"ca"},ca_ES_VALENCIA:{h:"ca"},ca_FR:{h:"ca"},ca_IT:{h:"ca"},ce:{p:"#,##0.00\xa0!",g:",",d:"."},ce_RU:{h:"ce"},cgg:{p:"!#,##0.00",g:",",d:"."},cgg_UG:{h:"cgg"},chr:{p:"!#,##0.00",g:",",d:"."},chr_US:{h:"chr"},ckb:{p:"!#,##0.00",g:",",d:"."},ckb_IQ:{h:"ckb"},ckb_IR:{h:"ckb"},cs:{p:"#,##0.00\xa0!",g:"\xa0",d:","},cs_CZ:{h:"cs"},cu:{p:"#,##0.00\xa0!",g:"\xa0",d:","},cu_RU:{h:"cu"},cy:{p:"!#,##0.00",g:",",d:"."},cy_GB:{h:"cy"},da:{p:"#,##0.00\xa0!",g:".",d:","},da_DK:{h:"da"},da_GL:{h:"da"},dav:{p:"!#,##0.00",g:",",d:"."},dav_KE:{h:"dav"},de:{p:"#,##0.00\xa0!",g:".",d:","},de_AT:{p:"!\xa0#,##0.00",g:"\xa0",d:","},de_BE:{h:"de"},de_CH:{p:"!\xa0#,##0.00;!-#,##0.00",g:"'",d:"."},de_DE:{h:"de"},de_LI:{p:"!\xa0#,##0.00",g:"'",d:"."},de_LU:{h:"de"},dje:{p:"#,##0.00!",g:"\xa0",d:"."},dje_NE:{h:"dje"},dsb:{p:"#,##0.00\xa0!",g:".",d:","},dsb_DE:{h:"dsb"},dua:{p:"#,##0.00\xa0!",g:"\xa0",d:","},dua_CM:{h:"dua"},dyo:{p:"#,##0.00\xa0!",g:"\xa0",d:","},dyo_SN:{h:"dyo"},dz:{p:"!#,##,##0.00",g:",",d:"."},dz_BT:{h:"dz"},ebu:{p:"!#,##0.00",g:",",d:"."},ebu_KE:{h:"ebu"},ee:{p:"!#,##0.00",g:",",d:"."},ee_GH:{h:"ee"},ee_TG:{h:"ee"},el:{p:"#,##0.00\xa0!",g:".",d:","},el_CY:{h:"el"},el_GR:{h:"el"},en:{p:"!#,##0.00",g:",",d:"."},en_001:{h:"en"},en_150:{p:"#,##0.00\xa0!",g:".",d:","},en_AG:{h:"en"},en_AI:{h:"en"},en_AS:{h:"en"},en_AT:{p:"!\xa0#,##0.00",g:",",d:"."},en_AU:{h:"en"},en_BB:{h:"en"},en_BE:{p:"#,##0.00\xa0!",g:".",d:","},en_BI:{h:"en"},en_BM:{h:"en"},en_BS:{h:"en"},en_BW:{h:"en"},en_BZ:{h:"en"},en_CA:{h:"en"},en_CC:{h:"en"},en_CH:{p:"!\xa0#,##0.00;!-#,##0.00",g:",",d:"."},en_CK:{h:"en"},en_CM:{h:"en"},en_CX:{h:"en"},en_CY:{h:"en"},en_DE:{h:"en"},en_DG:{h:"en"},en_DK:{h:"en"},en_DM:{h:"en"},en_ER:{h:"en"},en_FI:{p:"!#,##0.00",g:"\xa0",d:"."},en_FJ:{h:"en"},en_FK:{h:"en"},en_FM:{h:"en"},en_GB:{h:"en"},en_GD:{h:"en"},en_GG:{h:"en"},en_GH:{h:"en"},en_GI:{h:"en"},en_GM:{h:"en"},en_GU:{h:"en"},en_GY:{h:"en"},en_HK:{h:"en"},en_IE:{h:"en"},en_IL:{h:"en"},en_IM:{h:"en"},en_IN:{p:"!\xa0#,##,##0.00",g:",",d:"."},en_IO:{h:"en"},en_JE:{h:"en"},en_JM:{h:"en"},en_KE:{h:"en"},en_KI:{h:"en"},en_KN:{h:"en"},en_KY:{h:"en"},en_LC:{h:"en"},en_LR:{h:"en"},en_LS:{h:"en"},en_MG:{h:"en"},en_MH:{h:"en"},en_MO:{h:"en"},en_MP:{h:"en"},en_MS:{h:"en"},en_MT:{h:"en"},en_MU:{h:"en"},en_MW:{h:"en"},en_MY:{h:"en"},en_NA:{h:"en"},en_NF:{h:"en"},en_NG:{h:"en"},en_NL:{p:"!\xa0#,##0.00;!\xa0-#,##0.00",g:",",d:"."},en_NR:{h:"en"},en_NU:{h:"en"},en_NZ:{h:"en"},en_PG:{h:"en"},en_PH:{h:"en"},en_PK:{h:"en"},en_PN:{h:"en"},en_PR:{h:"en"},en_PW:{h:"en"},en_RW:{h:"en"},en_SB:{h:"en"},en_SC:{h:"en"},en_SD:{h:"en"},en_SE:{p:"!#,##0.00",g:"\xa0",d:"."},en_SG:{h:"en"},en_SH:{h:"en"},en_SI:{h:"en"},en_SL:{h:"en"},en_SS:{h:"en"},en_SX:{h:"en"},en_SZ:{h:"en"},en_TC:{h:"en"},en_TK:{h:"en"},en_TO:{h:"en"},en_TT:{h:"en"},en_TV:{h:"en"},en_TZ:{h:"en"},en_UG:{h:"en"},en_UM:{h:"en"},en_US:{h:"en"},en_US_POSIX:{p:"!\xa0#0.00",g:",",d:"."},en_VC:{h:"en"},en_VG:{h:"en"},en_VI:{h:"en"},en_VU:{h:"en"},en_WS:{h:"en"},en_ZA:{p:"!#,##0.00",g:"\xa0",d:","},en_ZM:{h:"en"},en_ZW:{h:"en"},eo:{p:"!#,##0.00",g:"\xa0",d:","},eo_001:{h:"eo"},es:{p:"#,##0.00\xa0!",g:".",d:","},es_419:{p:"!#,##0.00",g:",",d:"."},es_AR:{p:"!\xa0#,##0.00",g:".",d:","},es_BO:{h:"es"},es_BR:{h:"es"},es_CL:{p:"!#,##0;!-#,##0",g:".",d:","},es_CO:{p:"!\xa0#,##0.00",g:".",d:","},es_CR:{p:"#,##0.00\xa0!",g:"\xa0",d:","},es_CU:{h:"es"},es_DO:{h:"es"},es_EA:{h:"es"},es_EC:{p:"!#,##0.00;!-#,##0.00",g:".",d:","},es_ES:{h:"es"},es_GQ:{p:"!#,##0.00",g:".",d:","},es_GT:{h:"es"},es_HN:{h:"es"},es_IC:{h:"es"},es_MX:{h:"es"},es_NI:{h:"es"},es_PA:{h:"es"},es_PE:{h:"es"},es_PH:{h:"es"},es_PR:{h:"es"},es_PY:{p:"!\xa0#,##0;!\xa0-#,##0",g:".",d:","},es_SV:{h:"es"},es_US:{h:"es"},es_UY:{p:"!\xa0#,##0.00",g:".",d:","},es_VE:{p:"!#,##0.00;!-#,##0.00",g:".",d:","},et:{p:"#,##0.00\xa0!",g:"\xa0",d:","},et_EE:{h:"et"},eu:{p:"#,##0.00\xa0!",g:".",d:","},eu_ES:{h:"eu"},ewo:{p:"#,##0.00\xa0!",g:"\xa0",d:","},ewo_CM:{h:"ewo"},fa:{p:"\u200e!#,##0.00",g:",",d:"."},fa_AF:{h:"fa"},fa_IR:{h:"fa"},ff:{p:"#,##0.00\xa0!",g:"\xa0",d:","},ff_CM:{h:"ff"},ff_GN:{h:"ff"},ff_MR:{h:"ff"},ff_SN:{h:"ff"},fi:{p:"#,##0.00\xa0!",g:"\xa0",d:","},fi_FI:{h:"fi"},fil:{p:"!#,##0.00",g:",",d:"."},fil_PH:{h:"fil"},fo:{p:"#,##0.00\xa0!",g:".",d:","},fo_DK:{h:"fo"},fo_FO:{h:"fo"},fr:{p:"#,##0.00\xa0!",g:"\xa0",d:","},fr_BE:{p:"#,##0.00\xa0!",g:".",d:","},fr_BF:{h:"fr"},fr_BI:{h:"fr"},fr_BJ:{h:"fr"},fr_BL:{h:"fr"},fr_CA:{h:"fr"},fr_CD:{h:"fr"},fr_CF:{h:"fr"},fr_CG:{h:"fr"},fr_CH:{p:"!\xa0#,##0.00;!-#,##0.00",g:"\xa0",d:"."},fr_CI:{h:"fr"},fr_CM:{h:"fr"},fr_DJ:{h:"fr"},fr_DZ:{h:"fr"},fr_FR:{h:"fr"},fr_GA:{h:"fr"},fr_GF:{h:"fr"},fr_GN:{p:"#,##0\xa0!",g:"\xa0",d:","},fr_GP:{h:"fr"},fr_GQ:{h:"fr"},fr_HT:{h:"fr"},fr_KM:{h:"fr"},fr_LU:{p:"#,##0.00\xa0!",g:".",d:","},fr_MA:{p:"#,##0.00\xa0!",g:".",d:","},fr_MC:{h:"fr"},fr_MF:{h:"fr"},fr_MG:{h:"fr"},fr_ML:{h:"fr"},fr_MQ:{h:"fr"},fr_MR:{h:"fr"},fr_MU:{h:"fr"},fr_NC:{h:"fr"},fr_NE:{h:"fr"},fr_PF:{h:"fr"},fr_PM:{h:"fr"},fr_RE:{h:"fr"},fr_RW:{h:"fr"},fr_SC:{h:"fr"},fr_SN:{h:"fr"},fr_SY:{h:"fr"},fr_TD:{h:"fr"},fr_TG:{h:"fr"},fr_TN:{h:"fr"},fr_VU:{h:"fr"},fr_WF:{h:"fr"},fr_YT:{h:"fr"},fur:{p:"!\xa0#,##0.00",g:".",d:","},fur_IT:{h:"fur"},fy:{p:"!\xa0#,##0.00;!\xa0#,##0.00-",g:".",d:","},fy_NL:{h:"fy"},ga:{p:"!#,##0.00",g:",",d:"."},ga_IE:{h:"ga"},gd:{p:"!#,##0.00",g:",",d:"."},gd_GB:{h:"gd"},gl:{p:"#,##0.00\xa0!",g:".",d:","},gl_ES:{h:"gl"},gsw:{p:"#,##0.00\xa0!",g:"\u2019",d:"."},gsw_CH:{h:"gsw"},gsw_FR:{h:"gsw"},gsw_LI:{h:"gsw"},gu:{p:"!#,##,##0.00",g:",",d:"."},gu_IN:{h:"gu"},guz:{p:"!#,##0.00",g:",",d:"."},guz_KE:{h:"guz"},gv:{p:"!#,##0.00",g:",",d:"."},gv_IM:{h:"gv"},ha:{p:"!\xa0#,##0.00",g:",",d:"."},ha_GH:{h:"ha"},ha_NE:{h:"ha"},ha_NG:{h:"ha"},haw:{p:"!#,##0.00",g:",",d:"."},haw_US:{h:"haw"},he:{p:"#,##0.00\xa0!",g:",",d:"."},he_IL:{h:"he"},hi:{p:"!#,##,##0.00",g:",",d:"."},hi_IN:{h:"hi"},hr:{p:"#,##0.00\xa0!",g:".",d:","},hr_BA:{h:"hr"},hr_HR:{h:"hr"},hsb:{p:"#,##0.00\xa0!",g:".",d:","},hsb_DE:{h:"hsb"},hu:{p:"#,##0.00\xa0!",g:"\xa0",d:","},hu_HU:{h:"hu"},hy:{p:"!\xa0#,##0.00",g:".",d:","},hy_AM:{h:"hy"},id:{p:"!#,##0.00",g:".",d:","},id_ID:{h:"id"},ig:{p:"!#,##0.00",g:",",d:"."},ig_NG:{h:"ig"},ii:{p:"!#,##0.00",g:",",d:"."},ii_CN:{h:"ii"},is:{p:"#,##0\xa0!",g:".",d:","},is_IS:{h:"is"},it:{p:"#,##0.00\xa0!",g:".",d:","},it_CH:{p:"!\xa0#,##0.00;!-#,##0.00",g:"'",d:"."},it_IT:{h:"it"},it_SM:{h:"it"},ja:{p:"!#,##0",g:",",d:"."},ja_JP:{h:"ja"},jgo:{p:"!\xa0#,##0.00",g:".",d:","},jgo_CM:{h:"jgo"},jmc:{p:"!#,##0.00",g:",",d:"."},jmc_TZ:{h:"jmc"},ka:{p:"#,##0.00\xa0!",g:"\xa0",d:","},ka_GE:{h:"ka"},kab:{p:"#,##0.00!",g:"\xa0",d:","},kab_DZ:{h:"kab"},kam:{p:"!#,##0.00",g:",",d:"."},kam_KE:{h:"kam"},kde:{p:"!#,##0.00",g:",",d:"."},kde_TZ:{h:"kde"},kea:{p:"#,##0.00\xa0!",g:"\xa0",d:","},kea_CV:{h:"kea"},khq:{p:"#,##0.00!",g:"\xa0",d:"."},khq_ML:{h:"khq"},ki:{p:"!#,##0.00",g:",",d:"."},ki_KE:{h:"ki"},kk:{p:"#,##0.00\xa0!",g:"\xa0",d:","},kk_KZ:{h:"kk"},kkj:{p:"!#,##0.00",g:".",d:","},kkj_CM:{h:"kkj"},kl:{p:"!#,##0.00;!-#,##0.00",g:".",d:","},kl_GL:{h:"kl"},kln:{p:"!#,##0.00",g:",",d:"."},kln_KE:{h:"kln"},km:{p:"!#,##0.00",g:".",d:","},km_KH:{h:"km"},kn:{p:"!#,##0.00",g:",",d:"."},kn_IN:{h:"kn"},ko:{p:"!#,##0",g:",",d:"."},ko_KP:{h:"ko"},ko_KR:{h:"ko"},kok:{p:"!\xa0#,##,##0.00",g:",",d:"."},kok_IN:{h:"kok"},ks:{p:"!\xa0#,##,##0.00",g:",",d:"."},ks_IN:{h:"ks"},ksb:{p:"#,##0.00!",g:",",d:"."},ksb_TZ:{h:"ksb"},ksf:{p:"#,##0.00\xa0!",g:"\xa0",d:","},ksf_CM:{h:"ksf"},ksh:{p:"#,##0.00\xa0!",g:"\xa0",d:","},ksh_DE:{h:"ksh"},kw:{p:"!#,##0.00",g:",",d:"."},kw_GB:{h:"kw"},ky:{p:"#,##0.00\xa0!",g:"\xa0",d:","},ky_KG:{h:"ky"},lag:{p:"!#,##0.00",g:",",d:"."},lag_TZ:{h:"lag"},lb:{p:"#,##0.00\xa0!",g:".",d:","},lb_LU:{h:"lb"},lg:{p:"#,##0.00!",g:",",d:"."},lg_UG:{h:"lg"},lkt:{p:"!#,##0.00",g:",",d:"."},lkt_US:{h:"lkt"},ln:{p:"#,##0.00\xa0!",g:".",d:","},ln_AO:{h:"ln"},ln_CD:{h:"ln"},ln_CF:{h:"ln"},ln_CG:{h:"ln"},lo:{p:"!#,##0.00;!-#,##0.00",g:".",d:","},lo_LA:{h:"lo"},lrc:{p:"!\xa0#,##0.00",g:",",d:"."},lrc_IQ:{h:"lrc"},lrc_IR:{h:"lrc"},lt:{p:"#,##0.00\xa0!",g:"\xa0",d:","},lt_LT:{h:"lt"},lu:{p:"#,##0.00!",g:".",d:","},lu_CD:{h:"lu"},luo:{p:"#,##0.00!",g:",",d:"."},luo_KE:{h:"luo"},luy:{p:"!#,##0.00;!-\xa0#,##0.00",g:",",d:"."},luy_KE:{h:"luy"},lv:{p:"#0.00\xa0!",g:"\xa0",d:","},lv_LV:{h:"lv"},mas:{p:"!#,##0.00",g:",",d:"."},mas_KE:{h:"mas"},mas_TZ:{h:"mas"},mer:{p:"!#,##0.00",g:",",d:"."},mer_KE:{h:"mer"},mfe:{p:"!#,##0.00",g:"\xa0",d:"."},mfe_MU:{h:"mfe"},mg:{p:"!#,##0.00",g:",",d:"."},mg_MG:{h:"mg"},mgh:{p:"!#,##0.00",g:".",d:","},mgh_MZ:{h:"mgh"},mgo:{p:"!\xa0#,##0.00",g:",",d:"."},mgo_CM:{h:"mgo"},mk:{p:"!\xa0#,##0.00",g:".",d:","},mk_MK:{h:"mk"},ml:{p:"!#,##0.00",g:",",d:"."},ml_IN:{h:"ml"},mn:{p:"!\xa0#,##0.00",g:",",d:"."},mn_MN:{h:"mn"},mr:{p:"!#,##0.00",g:",",d:"."},mr_IN:{h:"mr"},ms:{p:"!#,##0.00",g:",",d:"."},ms_BN:{p:"!\xa0#,##0.00",g:".",d:","},ms_MY:{h:"ms"},ms_SG:{h:"ms"},mt:{p:"!#,##0.00",g:",",d:"."},mt_MT:{h:"mt"},mua:{p:"!#,##0.00",g:".",d:","},mua_CM:{h:"mua"},my:{p:"!\xa0#,##0.00",g:",",d:"."},my_MM:{h:"my"},mzn:{p:"!#,##0.00",g:",",d:"."},mzn_IR:{h:"mzn"},naq:{p:"!#,##0.00",g:",",d:"."},naq_NA:{h:"naq"},nb:{p:"!\xa0#,##0.00",g:"\xa0",d:","},nb_NO:{h:"nb"},nb_SJ:{h:"nb"},nd:{p:"!#,##0.00",g:",",d:"."},nd_ZW:{h:"nd"},ne:{p:"!\xa0#,##0.00",g:",",d:"."},ne_IN:{h:"ne"},ne_NP:{h:"ne"},nl:{p:"!\xa0#,##0.00;!\xa0-#,##0.00",g:".",d:","},nl_AW:{h:"nl"},nl_BE:{p:"#,##0.00\xa0!",g:".",d:","},nl_BQ:{h:"nl"},nl_CW:{h:"nl"},nl_NL:{h:"nl"},nl_SR:{h:"nl"},nl_SX:{h:"nl"},nmg:{p:"#,##0.00\xa0!",g:"\xa0",d:","},nmg_CM:{h:"nmg"},nn:{p:"#,##0.00\xa0!",g:"\xa0",d:","},nn_NO:{h:"nn"},nnh:{p:"!\xa0#,##0.00",g:".",d:","},nnh_CM:{h:"nnh"},nus:{p:"!#,##0.00",g:",",d:"."},nus_SS:{h:"nus"},nyn:{p:"!#,##0.00",g:",",d:"."},nyn_UG:{h:"nyn"},om:{p:"!#,##0.00",g:",",d:"."},om_ET:{h:"om"},om_KE:{h:"om"},or:{p:"!\xa0#,##,##0.00",g:",",d:"."},or_IN:{h:"or"},os:{p:"!\xa0#,##0.00",g:"\xa0",d:","},os_GE:{h:"os"},os_RU:{h:"os"},pa:{p:"!\xa0#,##,##0.00",g:",",d:"."},pa_Arab:{h:"pa"},pa_Arab_PK:{h:"pa"},pa_Guru:{h:"pa"},pa_Guru_IN:{h:"pa"},pl:{p:"#,##0.00\xa0!",g:"\xa0",d:","},pl_PL:{h:"pl"},prg:{p:"#,##0.00\xa0!",g:"\xa0",d:","},prg_001:{h:"prg"},ps:{p:"#,##0.00\xa0!",g:".",d:","},ps_AF:{h:"ps"},pt:{p:"!#,##0.00",g:".",d:","},pt_AO:{h:"pt"},pt_BR:{h:"pt"},pt_CH:{h:"pt"},pt_CV:{h:"pt"},pt_GQ:{h:"pt"},pt_GW:{h:"pt"},pt_LU:{h:"pt"},pt_MO:{h:"pt"},pt_MZ:{h:"pt"},pt_PT:{p:"#,##0.00\xa0!",g:"\xa0",d:","},pt_ST:{h:"pt"},pt_TL:{h:"pt"},qu:{p:"!\xa0#,##0.00",g:",",d:"."},qu_BO:{p:"!\xa0#,##0.00",g:".",d:","},qu_EC:{h:"qu"},qu_PE:{h:"qu"},rm:{p:"#,##0.00\xa0!",g:"\u2019",d:"."},rm_CH:{h:"rm"},rn:{p:"#,##0.00!",g:".",d:","},rn_BI:{h:"rn"},ro:{p:"#,##0.00\xa0!",g:".",d:","},ro_MD:{h:"ro"},ro_RO:{h:"ro"},rof:{p:"!#,##0.00",g:",",d:"."},rof_TZ:{h:"rof"},root:{p:"!\xa0#,##0.00",g:",",d:"."},ru:{p:"#,##0.00\xa0!",g:"\xa0",d:","},ru_BY:{h:"ru"},ru_KG:{h:"ru"},ru_KZ:{h:"ru"},ru_MD:{h:"ru"},ru_RU:{h:"ru"},ru_UA:{h:"ru"},rw:{p:"!#,##0.00",g:".",d:","},rw_RW:{h:"rw"},rwk:{p:"#,##0.00!",g:",",d:"."},rwk_TZ:{h:"rwk"},sah:{p:"!#,##0.00",g:",",d:"."},sah_RU:{h:"sah"},saq:{p:"!#,##0.00",g:",",d:"."},saq_KE:{h:"saq"},sbp:{p:"#,##0.00!",g:",",d:"."},sbp_TZ:{h:"sbp"},se:{p:"#,##0.00\xa0!",g:"\xa0",d:","},se_FI:{h:"se"},se_NO:{h:"se"},se_SE:{h:"se"},seh:{p:"#,##0.00!",g:".",d:","},seh_MZ:{h:"seh"},ses:{p:"#,##0.00!",g:"\xa0",d:"."},ses_ML:{h:"ses"},sg:{p:"!#,##0.00;!-#,##0.00",g:".",d:","},sg_CF:{h:"sg"},shi:{p:"#,##0.00!",g:"\xa0",d:","},shi_Latn:{h:"shi"},shi_Latn_MA:{h:"shi"},shi_Tfng:{h:"shi"},shi_Tfng_MA:{h:"shi"},si:{p:"!#,##0.00",g:",",d:"."},si_LK:{h:"si"},sk:{p:"#,##0.00\xa0!",g:"\xa0",d:","},sk_SK:{h:"sk"},sl:{p:"#,##0.00\xa0!",g:".",d:","},sl_SI:{h:"sl"},smn:{p:"!#,##0.00",g:",",d:"."},smn_FI:{h:"smn"},sn:{p:"!#,##0.00",g:",",d:"."},sn_ZW:{h:"sn"},so:{p:"!#,##0.00",g:",",d:"."},so_DJ:{h:"so"},so_ET:{h:"so"},so_KE:{h:"so"},so_SO:{h:"so"},sq:{p:"#,##0.00\xa0!",g:"\xa0",d:","},sq_AL:{h:"sq"},sq_MK:{h:"sq"},sq_XK:{h:"sq"},sr:{p:"#,##0.00\xa0!",g:".",d:","},sr_Cyrl:{h:"sr"},sr_Cyrl_BA:{h:"sr"},sr_Cyrl_ME:{h:"sr"},sr_Cyrl_RS:{h:"sr"},sr_Cyrl_XK:{h:"sr"},sr_Latn:{h:"sr"},sr_Latn_BA:{h:"sr"},sr_Latn_ME:{h:"sr"},sr_Latn_RS:{h:"sr"},sr_Latn_XK:{h:"sr"},sv:{p:"#,##0.00\xa0!",g:"\xa0",d:","},sv_AX:{h:"sv"},sv_FI:{h:"sv"},sv_SE:{h:"sv"},sw:{p:"!#,##0.00",g:",",d:"."},sw_CD:{p:"!#,##0.00",g:".",d:","},sw_KE:{h:"sw"},sw_TZ:{h:"sw"},sw_UG:{h:"sw"},ta:{p:"!\xa0#,##,##0.00",g:",",d:"."},ta_IN:{h:"ta"},ta_LK:{h:"ta"},ta_MY:{p:"!\xa0#,##0.00",g:",",d:"."},ta_SG:{p:"!\xa0#,##0.00",g:",",d:"."},te:{p:"!#,##,##0.00",g:",",d:"."},te_IN:{h:"te"},teo:{p:"!#,##0.00",g:",",d:"."},teo_KE:{h:"teo"},teo_UG:{h:"teo"},th:{p:"!#,##0.00",g:",",d:"."},th_TH:{h:"th"},ti:{p:"!#,##0.00",g:",",d:"."},ti_ER:{h:"ti"},ti_ET:{h:"ti"},tk:{p:"#,##0.00\xa0!",g:"\xa0",d:","},tk_TM:{h:"tk"},to:{p:"!\xa0#,##0.00",g:",",d:"."},to_TO:{h:"to"},tr:{p:"#,##0.00\xa0!",g:".",d:","},tr_CY:{h:"tr"},tr_TR:{h:"tr"},twq:{p:"#,##0.00!",g:"\xa0",d:"."},twq_NE:{h:"twq"},tzm:{p:"#,##0.00\xa0!",g:"\xa0",d:","},tzm_MA:{h:"tzm"},ug:{p:"!#,##0.00",g:",",d:"."},ug_CN:{h:"ug"},uk:{p:"#,##0.00\xa0!",g:"\xa0",d:","},uk_UA:{h:"uk"},ur:{p:"!\xa0#,##,##0.00",g:",",d:"."},ur_IN:{h:"ur"},ur_PK:{h:"ur"},uz:{p:"#,##0.00\xa0!",g:"\xa0",d:","},uz_Arab:{p:"#,##0.00\xa0!",g:".",d:","},uz_Arab_AF:{h:"uz"},uz_Cyrl:{p:"!\xa0#,##0.00",g:"\xa0",d:","},uz_Cyrl_UZ:{h:"uz"},uz_Latn:{h:"uz"},uz_Latn_UZ:{h:"uz"},vai:{p:"!#,##0.00",g:",",d:"."},vai_Latn:{h:"vai"},vai_Latn_LR:{h:"vai"},vai_Vaii:{h:"vai"},vai_Vaii_LR:{h:"vai"},vi:{p:"#,##0 !",g:".",d:","},vi_VN:{h:"vi"},vo:{p:"!#,##0.00",g:",",d:"."},vo_001:{h:"vo"},vun:{p:"!#,##0.00",g:",",d:"."},vun_TZ:{h:"vun"},wae:{p:"!#,##0.00",g:"\u2019",d:","},wae_CH:{h:"wae"},xog:{p:"#,##0.00\xa0!",g:",",d:"."},xog_UG:{h:"xog"},yav:{p:"#,##0.00\xa0!",g:"\xa0",d:","},yav_CM:{h:"yav"},yi:{p:"!#,##0.00",g:",",d:"."},yi_001:{h:"yi"},yo:{p:"!#,##0.00",g:",",d:"."},yo_BJ:{h:"yo"},yo_NG:{h:"yo"},yue:{p:"!#,##0.00",g:",",d:"."},yue_HK:{h:"yue"},zgh:{p:"#,##0.00!",g:"\xa0",d:","},zgh_MA:{h:"zgh"},zh:{p:"!#,##0.00",g:",",d:"."},zh_Hans:{h:"zh"},zh_Hans_CN:{h:"zh"},zh_Hans_HK:{h:"zh"},zh_Hans_MO:{h:"zh"},zh_Hans_SG:{h:"zh"},zh_Hant:{h:"zh"},zh_Hant_HK:{h:"zh"},zh_Hant_MO:{h:"zh"},zh_Hant_TW:{h:"zh"},zu:{p:"!#,##0.00",g:",",d:"."},zu_ZA:{h:"zu"}}}getFormatDetails(e){var t,n,a=this.locales,r=this.defaultLocales,o=this.symbols;return n=((e=e||{}).currency||"USD").toUpperCase(),void 0!==(t=a[e.locale||r[n]]).h&&(t=a[t.h]),{pattern:e.pattern||t.p,decimal:e.decimal||t.d,group:e.group||t.g,symbol:void 0===e.symbol?o[n]||n:null===e.symbol?"":e.symbol,valueOnError:void 0===e.valueOnError?0:e.valueOnError,postFormatFunction:e.postFormatFunction}}toFixed(e,t){return(Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)}getFormatter(e){const t=this;var n=this.getFormatDetails(e),a=n.decimal,r=n.group,o=n.symbol,s=n.valueOnError,l=n.postFormatFunction,d=function(f){var w=f.trim().match(/[#0,\.]+/)[0],v=w.split("."),_=v[1],T=v[0].split(","),z=T.map(function(B){return B.length}),M=(T[T.length-1].match(/0/g)||[]).length,L=void 0===_?0:_.length,F=f.split(w);return{pattern:f,decimalPlaces:L,frontPadding:F[0],backPadding:F[1],groupLengths:z,zeroLength:M}},c=function(f,w){var B,J,v=t.toFixed(Math.abs(f),w.decimalPlaces),S=v.split("."),_="",T=S[0].length,z=w.groupLengths.length-1,M=z;if(z>0){for(;T>0;){M<1&&(M=1);var L=w.groupLengths[M];_=S[0].substring(T-L,T)+w.group+_,T-=L,--M}_=_.substring(0,_.length-1)}else _=S[0];return _.length<w.zeroLength&&(B=_,_=(B+="").length>=(J=w.zeroLength)?B:new Array(J-B.length+1).join("0")+B),(v=w.frontPadding+_+(void 0===S[1]?"":w.decimal+S[1])+w.backPadding).replace(/\!/g,o).trim()},u=n.pattern.split(";"),m=d(u[0]);m.symbol=o,m.decimal=a,m.group=r;var y=d(void 0===u[1]?"-"+u[0]:u[1]);y.symbol=o,y.decimal=a,y.group=r,void 0!==e.decimalPlaces&&(m.decimalPlaces=y.decimalPlaces=e.decimalPlaces);var b=void 0===u[2]?c(0,m):u[2];return function(f){return isNaN(f)?s:(w=(f=Number(f))>0?c(f,m):0===f?b.replace("!",o):c(f,y),"function"==typeof l?l(f,w):w);var w}}format(e,t){return this.getFormatter(t)(e)}parse(e,t){var n=this.getFormatDetails(t).decimal,i=e.indexOf("-")>=0?-1:1;return Math.abs(Number(e.replace(new RegExp(`[^0-9${n}]`,"g"),"").replace(n,".")))*i}})},2754:()=>{Smart.Utilities.Assign("NumericProcessor",class{constructor(e,t){switch(e[t]){case"integer":return new Smart.Utilities.IntegerNumericProcessor(e,t);case"floatingPoint":return new Smart.Utilities.DecimalNumericProcessor(e,t);case"complex":return new Smart.Utilities.ComplexNumericProcessor(e,t)}}}),Smart.Utilities.Assign("BaseNumericProcessor",class{constructor(e,t){const n=this;n.context=e,n._longestLabelSize=0,n.numericFormatProperty=t,n.regexScientificNotation=new RegExp(/^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)(Y|Z|E|P|T|G|M|k|m|u|n|p|f|a|z|y){1}$/),n.regexNoLeadingZero=new RegExp(/^(-)?[.]\d+$/),n.regexLeadingZero=new RegExp(/^[+\-]?(0+)[1-9]+|^[+\-]?(0{2,})[.]|^(0{2,})$/),n.prefixesToPowers={Y:24,Z:21,E:18,P:15,T:12,G:9,M:6,k:3,m:-3,u:-6,n:-9,p:-12,f:-15,a:-18,z:-21,y:-24},n.complexConstructor=window.NIComplex?window.NIComplex:Smart.Utilities.Complex}prepareForValidation(e,t,n){const i=this.context,a=e||void 0!==t;if(n=(n=n.toString()).replace(/\s/g,""),n=i._discardDecimalSeparator(n),this.regexLeadingZero.test(n)){const s=this.regexLeadingZero.exec(n);n=s[1]?n.replace(s[1],""):n.replace(s[2]?s[2]:s[3],"0")}this.regexNoLeadingZero.test(n)?n="-"===n.charAt(0)?"-0"+n.slice(1):"0"+n:("integer"===i[this.numericFormatProperty]&&(10===i._radixNumber||a)||"floatingPoint"===i[this.numericFormatProperty])&&this.regexScientificNotation.test(n)&&(n=this.scientificToDecimal(n));let r,o=!1;if("complex"===i[this.numericFormatProperty]&&!1===i._regexSpecial.nonNumericValue.test(n))try{if(i._regexSpecial.exaValue.test(n)){const s=n.indexOf("E"),l=parseFloat(n.slice(0,s))*Math.pow(10,18),d=parseFloat(n.slice(s+1,-1));r=new this.complexConstructor(l,d)}else r=new this.complexConstructor(n);o=!0}catch{o=!1}if(!1!==o||!(!a&&!1===i._regex[i._radixNumber].test(n)||a&&!1===i._regex[10].test(n)))return{value:n,enteredComplexNumber:r};i._handleNonNumericValue(e,t,n)}isENotation(e){return new RegExp(/e/i).test(e.toString())}scientificToDecimal(e){const t=this.regexScientificNotation.exec(e),i=t[2];return parseFloat(t[1])*Math.pow(10,this.prefixesToPowers[i])}_createMeasureLabel(){const e=this.context,t=document.createElement("div");return t.className="smart-label",t.style.position="absolute",t.style.visibility="hidden",e._measureLabelScale="far"!==e.scalePosition?e.$.scaleNear:e.$.scaleFar,e._measureLabelScale.appendChild(t),t}_addMajorTickAndLabel(e,t,n,i,a){const r=this.context,o=r._settings.leftOrTop,s=this.valueToPx(i);let l="",d="";if(parseInt(s)>parseInt(r._measurements.trackLength))return{tick:l,label:d};if(r.logarithmicScale&&(e=r._formatLabel(Math.pow(10,i))),"smart-tank"===r.nodeName.toLowerCase()||r._intervalHasChanged){let c=r._tickIntervalHandler.labelsSize;if(a){r._labelDummy.innerHTML=e;let u=this.valueToPx(i),m=this.valueToPx(r._drawMax),y=this.valueToPx(r._drawMin),b=r._labelDummy[r._settings.size],f="vertical"===r.orientation?r._labelDummy.offsetWidth:r._labelDummy.offsetHeight,w=(b+c.minLabelSize)/2,v=(b+c.maxLabelSize)/2;n=r._normalLayout?u+v<m&&u-w>y:u-v>m&&u+w<y,f>this._longestLabelSize&&(this._longestLabelSize=f)}else this._longestLabelSize=Math.max(c.minLabelOtherSize,c.maxLabelOtherSize,this._longestLabelSize)}return r._tickValues.push(i),l='<div style="'+o+": "+s+'px;" class="smart-tick"></div>',!1!==n&&(void 0===t&&(r._labelDummy.innerHTML=e,t=r._labelDummy[r._settings.size]),d+='<div class="smart-label'+(a?" smart-label-middle":"")+'" style="'+o+": "+(s-t/2)+'px;">'+e+"</div>"),{tick:l,label:d}}getWordLength(e){switch(this.context._unsigned="u"===e.charAt(0),e){case"int8":case"uint8":return 8;case"int16":case"uint16":return 16;case"int32":case"uint32":return 32;case"int64":case"uint64":return 64}}getAngleByValue(e,t,n){const i=this.context;!1!==t&&i.logarithmicScale&&(e=Math.log10(e));const a=(e-i._drawMin)*i._angleRangeCoefficient;let r;return r=void 0===i.inverted||!i.inverted&&!i.rightToLeft||i.rightToLeft&&i.inverted?i.endAngle-a:i.startAngle+a,n?r:r*Math.PI/180+Math.PI/2}getValueByAngle(e,t){const n=this.context;let i,a,r;for(void 0===n.inverted||!n.inverted&&!n.rightToLeft||n.rightToLeft&&n.inverted?(i=n.endAngle,a=e):(i=e,a=n._normalizedStartAngle);i<a;)i+=360;if(r=(i-a)/n._angleDifference*n._range+parseFloat(n._drawMin),n.logarithmicScale){if(n.customInterval)return parseFloat(Math.pow(10,this.getCoercedValue(r,!0)).toFixed(12));r=Math.pow(10,r)}return t&&!n.coerce?Math.round(r):(r=this.createDescriptor(r,void 0,!0,!0),this.getCoercedValue(r,!1))}updateGaugeValue(e){const t=this.context,n=t.value;t.value=e,t._drawValue=t.logarithmicScale?Math.log10(e).toString():e,t._number=this.createDescriptor(t.value),t.$.digitalDisplay.value=e,t.$.fireEvent("change",{value:e,oldValue:n}),t._setAriaValue("valuenow"),delete t._valueBeforeCoercion}validateColorRange(e){const t=this.context;return Math.min(Math.max(e,t.min),t.max)}getActualValue(e){return this.context.logarithmicScale?Math.pow(10,e):e}drawGaugeLogarithmicScaleMinorTicks(e,t,n){const i=this.context;let a;t instanceof Smart.Utilities.BigNumber&&(t=parseFloat(t.toString()));for(let r in e)if(a=r,r>=0&&r%1==0)break;for(let r=parseFloat(a);r<i._drawMax;r+=t)for(let o=2;o<=9;o++){const s=o*Math.pow(10,r+t-1);s<i.max&&n(s)}for(let r=parseFloat(a);r>i._drawMin;r-=t)for(let o=2;o<=9;o++){const s=o*Math.pow(10,r-1);s>i.min&&n(s)}}_getAngleDifference(e,t){const n=Math.abs(t-e)%360;return n>180?360-n:n}addCustomTicks(){const e=this,t=e.context,n=!t.logarithmicScale;let i="",a="";function r(o){const s=t.customTicks[o],l=n?e.createDescriptor(s):Math.log10(s),d=o>0&&o<t.customTicks.length-1,c=e._addMajorTickAndLabel(t._formatLabel(s),void 0,!0,l,d);i+=c.tick,a+=c.label}if(e._longestLabelSize=0,t._tickValues=[],t._labelDummy=e._createMeasureLabel(),t._normalLayout)for(let o=0;o<t.customTicks.length;o++)r(o);else for(let o=t.customTicks.length-1;o>=0;o--)r(o);"smart-tank"===t.nodeName.toLowerCase()&&t._updateScaleWidth(e._longestLabelSize),t._appendTicksAndLabelsToScales(i,a)}addGaugeCustomTicks(){const e=this,t=e.context,n=t._distance,i=t._measurements.radius-n.majorTickDistance;let a,r;function o(s){const l=t.customTicks[s],d=e.createDescriptor(l),c=e.getAngleByValue(d,!0),u=s>0&&s<t.customTicks.length-1;a(c),r(c,l,u)}a="none"!==t.ticksVisibility&&!1!==t._plotTicks?function(s){t._drawTick(s,i,"major")}:function(){},r="none"!==t.labelsVisibility&&!1!==t._plotLabels?function(s,l,d){t._drawLabel(s,l,n.labelDistance,d)}:function(){};for(let s=t.customTicks.length-1;s>=0;s--)o(s)}}),Smart.Utilities.Assign("IntegerNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t);const n=this;n.context=e,n.defaultMins={int8:"-128",uint8:"0",int16:"-32768",uint16:"0",int32:"-2147483648",uint32:"0",int64:"-9223372036854775808",uint64:"0"},n.defaultMaxs={int8:"127",uint8:"255",int16:"32767",uint16:"65535",int32:"2147483647",uint32:"4294967295",int64:"9223372036854775807",uint64:"18446744073709551615"}}createDescriptor(e,t,n,i,a){const r=this.context;let o;if(e.constructor!==Smart.Utilities.BigNumber){let s=!a&&r._radixNumber?r._radixNumber:10;10===s&&t&&e.constructor!==Smart.Utilities.BigNumber&&this.isENotation(e)&&(e=Smart.Utilities.BigNumber.bigIntSupport?new Smart.Utilities.BigNumber(Math.round(e)):new Smart.Utilities.NumberRenderer(e).largeExponentialToDecimal()),o=r._toBigNumberDecimal?r._toBigNumberDecimal(e.toString(s,r._wordLengthNumber),s):new Smart.Utilities.BigNumber(e)}else o=new Smart.Utilities.BigNumber(e);return n&&(r._unsigned&&-1===o.compare(0)&&(o=o.set(0)),i&&(o=this.validate(o,r._minObject,r._maxObject)),o=this.round(o)),o}round(e){const t=this.context;if(e instanceof window.Smart.Utilities.BigNumber&&"bigint"==typeof e._d)return e;if(e instanceof window.Smart.Utilities.BigNumber==0||!t._wordLengthNumber||t._wordLengthNumber<64)return new Smart.Utilities.BigNumber(Math.round(e.toString()));const n=e.mod(1);return 1===n._d.length&&0===n._d[0]||((e=e.intPart())._s?(n._d[1]>5||5===n._d[1]&&n._d[2])&&(e=e.add(-1)):n._d[1]>4&&(e=e.add(1))),e}validate(e,t,n){let i;return i=-1===e.compare(t)?t:1===e.compare(n)?n:e,i}validateMinMax(e,t){const n=this.context;let i=this.defaultMins[n.wordLength],a=new Smart.Utilities.BigNumber(i),r=this.defaultMaxs[n.wordLength],o=new Smart.Utilities.BigNumber(r),s="date"!==n.mode;if(void 0===n._numberRenderer&&(n._numberRenderer=new Smart.Utilities.NumberRenderer),e&&s){null!==n.min&&(n.min=n.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.min)&&(n.min=this.scientificToDecimal(n.min)));let l=this.round(new Smart.Utilities.BigNumber(n.min));null===n.min||n._minIsNull&&n._initialized||!(l.compare(a)>=0)?(n._minIsNull=!0,n.min=i,n._minObject=a):n._minObject=l}if(t&&s){null!==n.max&&(n.max=n.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.max)&&(n.max=this.scientificToDecimal(n.max)));let l=this.round(new Smart.Utilities.BigNumber(n.max));null===n.max||n._maxIsNull&&n._initialized||!(l.compare(o)<=0)?(n._maxIsNull=!0,n.max=r,n._maxObject=o):n._maxObject=l}s||(n._minObject=new Smart.Utilities.BigNumber(n.min),n._maxObject=new Smart.Utilities.BigNumber(n.max)),this.compare(n._minObject,n._maxObject)||(n._minObject=a,n._maxObject=o,n._drawMin=n.logarithmicScale?0:i,n._drawMax=n.logarithmicScale?10:r,n.min=i,n.max=r),s||(n._minDate=Smart.Utilities.DateTime.fromFullTimeStamp(n.min),n._maxDate=Smart.Utilities.DateTime.fromFullTimeStamp(n.max))}valueToPx(e){const t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const n=this.context,i=new Smart.Utilities.BigNumber(n._measurements.trackLength).divide(new Smart.Utilities.BigNumber(n._range));let a;if(n._normalLayout){const r=n._drawMin instanceof Smart.Utilities.BigNumber?n._drawMin:new Smart.Utilities.BigNumber(n._drawMin);e=new Smart.Utilities.BigNumber(e),a=parseFloat(i.multiply(e.subtract(r)).toString())}else{const r=n._drawMax instanceof Smart.Utilities.BigNumber?n._drawMax:new Smart.Utilities.BigNumber(n._drawMax);a=parseFloat(this.round(r.subtract(e).multiply(i)).toString())}return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t,a}pxToValue(e){const t=this.context,n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let i;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,i=t._valuePerPx.multiply(t._normalLayout?e-t._trackStart:t._trackEnd-e),i=this.round(i).toString(),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,t.logarithmicScale){let a=parseFloat(i)+parseFloat(t._drawMin);return new Smart.Utilities.BigNumber(Math.round(Math.pow(10,a)))}return this.createDescriptor(t._minObject.add(i),!1,!0,!0)}compare(e,t,n){if((null===e||null===t)&&e!==t)return!0;e.constructor!==Smart.Utilities.BigNumber&&(e=new Smart.Utilities.BigNumber(e));const i=e.compare(t);return!0!==n?0!==i:i}incrementDecrement(e,t,n){const i=this.context;let a;if(e.constructor!==Smart.Utilities.BigNumber&&(e=new Smart.Utilities.BigNumber(e)),"add"===t){if(a=e.add(n),void 0!==i._drawMax)return a.compare(i._drawMax)>0?new Smart.Utilities.BigNumber(i._drawMax):a}else if(a=e.subtract(n),void 0!==i._drawMin)return a.compare(i._drawMin)<0?new Smart.Utilities.BigNumber(i._drawMin):a;return a}render(e,t){const n=this.context;if(!n.scientificNotation&&!0===t)return new Smart.Utilities.NumberRenderer(new Smart.Utilities.BigNumber(e)).bigNumberToExponent(n.significantDigits);let i=e;return n.scientificNotation&&!0===t?i=new Smart.Utilities.NumberRenderer(i).toScientific(n.significantDigits,n.precisionDigits):"string"!=typeof e&&(i=e.toString(n._radixNumber,n._wordLengthNumber,n.leadingZeros)),i}addTicksAndLabels(){const e=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const t=this.context,n=t._measurements.trackLength,i=t._normalLayout,a=t._majorTicksInterval,r=this.round(new Smart.Utilities.BigNumber(t._range).divide(a)),o=n/r,s=new Smart.Utilities.BigNumber(t._drawMin),l=new Smart.Utilities.BigNumber(t._drawMax);let d,c,u,m,y,b,f,w,v,S="",_="";t._tickValues=[],this._longestLabelSize=0,i?(d=s,c=a.add(d.subtract(d.mod(a))),u=c.subtract(d),y=t._formatLabel(s),b=t._tickIntervalHandler.labelsSize.minLabelSize,m=l,f=t._formatLabel(l),w=t._tickIntervalHandler.labelsSize.maxLabelSize):(d=l,c=d.subtract(d.mod(a)),u=d.subtract(c),y=t._formatLabel(l),b=t._tickIntervalHandler.labelsSize.maxLabelSize,m=s,f=t._formatLabel(s),w=t._tickIntervalHandler.labelsSize.minLabelSize),t._labelDummy=this._createMeasureLabel(),v=this._addMajorTickAndLabel(y,b,!0,d),S+=v.tick,_+=v.label;const T=u.divide(a).multiply(o);if(0!==c.compare(t.max)&&T.compare(n)<0){const z=t._formatLabel(c.toString()),M=T.compare(b)>0;v=this._addMajorTickAndLabel(z,void 0,M,c,!0),S+=v.tick,_+=v.label}v=this.addMiddleMajorTicks(r,o,T,u,i,a),S+=v.tick,_+=v.label,v=this._addMajorTickAndLabel(f,w,!0,m),S+=v.tick,_+=v.label,"date"!==t.mode&&(S+=this.addMinorTicks(i)),t._measureLabelScale.removeChild(t._labelDummy),delete t._labelDummy,delete t._measureLabelScale,"smart-tank"===t.nodeName.toLowerCase()&&t._updateScaleWidth(this._longestLabelSize),t._appendTicksAndLabelsToScales(S,_),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=e}addMiddleMajorTicks(e,t,n,i,a,r){const o=this.context;let s,l="",d="";for(let c=1;c<e;c++){let u,m=n.add(c*t);if(a?u=r.multiply(c).add(i.add(new Smart.Utilities.BigNumber(o._drawMin))):(u=new Smart.Utilities.BigNumber(o._drawMax).subtract(i).subtract(r.multiply(c)),c===e-1&&0===u.compare(0)&&(o._numberRenderer.numericValue=o._tickIntervalHandler.nearestPowerOfTen,s=o._numberRenderer.bigNumberToExponent(1))),0!==u.compare(o._drawMax)){let y=o._formatLabel(u.toString()),b=!0;o._labelDummy.innerHTML=s||y,m.add(o._labelDummy[o._settings.size]).compare(e*t)>=0&&(b=!1);const w=this._addMajorTickAndLabel(y,void 0,b,u,!0);l+=w.tick,d+=w.label}}return{tick:l,label:d}}addMinorTicks(e){function t(u){-1===i.indexOf(u)&&u%r==0&&(c+='<div style="'+o+": "+n._numericProcessor.valueToPx(u)+'px;" class="smart-tick smart-tick-minor"></div>')}const n=this.context,i=n._tickValues,a=n._tickIntervalHandler.nearestPowerOfTen,r=n._minorTicksInterval,o=n._settings.leftOrTop;let s,l,d,c="";if(e?(s=i[0],l=i[1],d=i[i.length-1]):(s=i[i.length-1],l=i[i.length-2],d=i[0]),n.logarithmicScale)!function(){let u=n._measurements.trackLength/i.length,m=.1;u<20?m=1:u>=20&&u<40?m=l-s>1?1:.5:u>=40&&u<80&&(m=.2);let y=Math.floor(n._drawMax),b=n._drawMax-y,f=n._drawMax-n._drawMin>i.length;for(let w=n._drawMax;w>0;w-=1){let v=b>0?Math.pow(10,w-b+1):Math.pow(10,w),S=v*m;for(let _=v;_>0;_-=S)if(_<n.max&&_>n.min){let T=new Smart.Utilities.BigNumber(Math.log10(_));(T%1==0&&f||!f)&&(c+='<div style="'+o+": "+n._numericProcessor.valueToPx(T)+'px;" class="smart-tick smart-tick-minor"></div>')}}}();else{for(let u=l;s.compare(u)<0;u=u.subtract(a))t(u);for(let u=l.add(a);d.compare(u)>0;u=u.add(a))t(u)}return c}validateCustomTicks(){const e=this.context,t="date"!==e.mode;let n=[];for(let i=0;i<e.customTicks.length;i++){let a=e.customTicks[i];t?a=this.createDescriptor(a,!1,!0):void 0===a._d&&(a=Smart.Utilities.DateTime.validateDate(a).getTimeStamp()),a.compare(e._minObject)>=0&&a.compare(e._maxObject)<=0&&n.push(a)}if(n.sort(function(i,a){return i.compare(a)}),t){for(let i=0;i<n.length;i++)n[i]=n[i].toString();n=n.filter(function(i,a,r){return!a||i!==r[a-1]})}e.customTicks=n.slice(0)}addGaugeTicksAndLabels(){const e=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const t=this.context,n=this,i=Math.max(t._tickIntervalHandler.labelsSize.minLabelSize,t._tickIntervalHandler.labelsSize.maxLabelSize),a=t._majorTicksInterval,r=t._minorTicksInterval,o={},s=t._distance,l=t._measurements.radius,d=l-s.majorTickDistance,c=l-s.minorTickDistance,u=new Smart.Utilities.BigNumber(t._drawMin),m=new Smart.Utilities.BigNumber(t._drawMax);let y,b,f,w,v,S;"none"!==t.ticksVisibility&&!1!==t._plotTicks?(y=function(M){t._drawTick(M,d,"major")},b=function(M){t._drawTick(n.getAngleByValue(M,!0),c,"minor")}):(y=function(){},b=function(){}),f="none"!==t.labelsVisibility&&!1!==t._plotLabels?function(M,L,F){t._drawLabel(M,L,s.labelDistance,F)}:function(){},void 0===t.inverted||!t.inverted&&!t.rightToLeft||t.rightToLeft&&t.inverted?(v=t.endAngle,S=t.startAngle):(v=t.startAngle,S=t.endAngle),w=n.getAngleByValue(u,!1),y(w),o[t._drawMin.toString()]=!0,f(w,t.min,!1);let _,T,z=u.subtract(u.mod(a));-1!==u.compare(0)&&(z=z.add(a));for(let M=new Smart.Utilities.BigNumber(z);-1!==M.compare(u);M=M.subtract(r))_=M;for(w=n.getAngleByValue(z,!1),y(w),o[z.toString()]=!0,2*Math.PI*t._measurements.innerRadius*(this._getAngleDifference(v,n.getAngleByValue(z,!1,!0))/360)>i&&f(w,this.getActualValue(z),-1===z.compare(m)),T=z.add(a);-1===T.compare(m.subtract(a));T=T.add(a))w=n.getAngleByValue(T,!1),y(w),o[T.toString()]=!0,f(w,this.getActualValue(T),!0);if(void 0===o[T.toString()]&&1!==T.compare(m)&&(w=n.getAngleByValue(T,!1),y(w),o[T.toString()]=!0,2*Math.PI*t._measurements.innerRadius*(this._getAngleDifference(S,n.getAngleByValue(T,!1,!0))/360)>=i&&f(w,this.getActualValue(T),!0),t._normalizedStartAngle!==t.endAngle&&(w=n.getAngleByValue(m,!1),y(w),2*Math.PI*t._measurements.innerRadius*(this._getAngleDifference(S,v)/360)>=i&&f(w,t.max,!1))),"date"!==t.mode){if(t.logarithmicScale)this.drawGaugeLogarithmicScaleMinorTicks(o,a,b);else for(let M=_;-1===M.compare(m);M=M.add(r))o[M.toString()]||b(M);Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=e}else Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=e}updateToolTipAndValue(e,t,n){const i=this.context,a=i.logarithmicScale;i._updateTooltipValue(e.toString()),a&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(11)));const r=(e=e instanceof Smart.Utilities.BigNumber?e:new Smart.Utilities.BigNumber(e)).toString();i._number=e,i._drawValue=a?Math.log10(r):e,0!==e.compare(t)&&n&&("numeric"===i.mode?(i.value=r,e=r):(t=i._valueDate,i._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(r),i.value=e,e=i._valueDate),i._programmaticValueIsSet||i.$.fireEvent("change",{value:e,oldValue:t}),i.$.hiddenInput&&(i.$.hiddenInput.value=e),i._setAriaValue("valuenow"))}validateInterval(e){const t=this.context,n=t._maxObject.subtract(t._minObject);t._validInterval=new Smart.Utilities.BigNumber(e),t._validInterval=this.round(t._validInterval),t._validInterval.compare(0)<=0&&(t._validInterval=new Smart.Utilities.BigNumber(1)),1===t._validInterval.compare(n)&&(t._validInterval=n),t.interval=t._validInterval.toString()}getCoercedValue(e,t,n){const i=this.context;if(!i.coerce)return e;const a=!i.logarithmicScale;let r,o;if(e=e instanceof Smart.Utilities.BigNumber?e:new Smart.Utilities.BigNumber(e),i.customInterval){const m=i.customTicks;if(0===m.length)return e;let y,b;if(a||n){r=i._minObject,y=r.subtract(e).abs(),b=r;for(let f=0;f<m.length;f++){const w=this.createDescriptor(m[f]),v=w.subtract(e).abs();-1===v.compare(y)&&(y=v,b=w)}}else{r=i._drawMin,y=Math.abs(r-parseFloat(e.toString())),b=r;for(let f=0;f<m.length;f++){const w=Math.log10(m[f]),v=Math.abs(w-e);v<y&&(y=v,b=w)}b=new Smart.Utilities.BigNumber(b)}return b}let s=i._validInterval;if("date"===i.mode){if("addYears"===i._dateIncrementMethod)return this.coerceYear(e);if("addMonths"===i._dateIncrementMethod)return this.coerceMonth(e);s=new Smart.Utilities.BigNumber(i._dateIntervalNumber).multiply(s)}!1!==t?(r=new Smart.Utilities.BigNumber(i._drawMin),o=new Smart.Utilities.BigNumber(i._drawMax)):(r=new Smart.Utilities.BigNumber(i.min),o=new Smart.Utilities.BigNumber(i.max));let l=e.subtract(r),d=l.mod(s);if(0===d.compare(0))return e;let c=l.subtract(d),u=c.add(s);if(l.subtract(c).abs().compare(l.subtract(u).abs())<0)return c.add(r);{const m=u.add(r);return m.compare(o)<=0?m:c.add(r)}}coerceMonth(e){const t=this.context,n=parseFloat(t._validInterval),i=Smart.Utilities.DateTime.fromFullTimeStamp(e),a=i.year(),r=i.month(),o=i.day(),s=t._minDate.year(),l=t._minDate.month(),d=12*(t._maxDate.year()-s-1)+12-l+t._maxDate.month();let c=12*(a-1-s)+(12-l)+r;1===n&&(-1!==[1,3,5,7,8,10,12].indexOf(r)?(o>16||16===o&&i.hour()>11)&&c++:2===r?i.isLeapYear(a)?(o>15||15===o&&i.hour()>11)&&c++:o>14&&c++:o>15&&c++),c=this.getCoercedTimePart(0,d,c,n);let u=t._minDate.addMonths(c,!0);return 1===u.compare(t._maxDate)&&(u=t._minDate.addMonths(c-n,!0)),t._drawValue=new Smart.Utilities.BigNumber(u.getTimeStamp()),t._drawValue}coerceYear(e){const t=this.context,n=parseFloat(t._validInterval),i=Smart.Utilities.DateTime.fromFullTimeStamp(e),a=t._maxDate.year(),r=Smart.Utilities.DateTime.getConstructorParameters(t._minDate);let o=i.year();i.month()>6&&o++;let s=this.getCoercedTimePart(t._minDate.year(),a,o,n);s>a&&(s-=n),r[0]=s,r.unshift(null);const l=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,r));return t._drawValue=new Smart.Utilities.BigNumber(l.getTimeStamp()),t._drawValue}getCoercedTimePart(e,t,n,i){let a=n-e,r=a%i;if(0===r)return n;let o=parseFloat((a-r).toFixed(12)),s=o+i;if(t-e<=i)return n>=e+(t-e)/2?t:e;if(Math.abs(a-o)<Math.abs(a-s))return o+e;{const l=s+e;return l>t?o+e:l}}updateValue(e){const t=this.context;e=e instanceof Smart.Utilities.BigNumber?e:new Smart.Utilities.BigNumber(e);const n=this.validate(e,t._minObject,t._maxObject);let i,a,r=t.value;t._number=n,t._drawValue=t.logarithmicScale?Math.log10(n):n,"numeric"===t.mode?(i=e.toString(),t.value=i,a=this.compare(e,r)):(r=Smart.Utilities.DateTime.fromFullTimeStamp(r),t._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(e),t.value=e,i=e=t._valueDate,a=0!==e.compare(r)),t._programmaticValueIsSet||!a&&!t._scaleTypeChangedFlag||t.$.fireEvent("change",{value:i,oldValue:r}),t.$.hiddenInput&&(t.$.hiddenInput.value=e),t._setAriaValue("valuenow"),t._moveThumbBasedOnValue(t._drawValue)}getValuePerPx(e,t){const n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const i=new Smart.Utilities.BigNumber(e).divide(t);return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,i}restrictValue(e){e[1].constructor===Smart.Utilities.BigNumber?-1===e[1].compare(e[0])&&e[1].set(e[0]):e[1]<e[0]&&(e[1]=e[0])}getAngleByValue(e,t,n){const i=this.context,a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,i._wordLengthNumber<64)return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,super.getAngleByValue(parseFloat(e.toString()),t,n);e instanceof Smart.Utilities.BigNumber==0&&(e=new Smart.Utilities.BigNumber(e)),!1!==t&&i.logarithmicScale&&(e=new Smart.Utilities.BigNumber(Math.log10(e.toString())));const r=e.subtract(i._drawMin).multiply(i._angleRangeCoefficient);let o;return o=void 0===i.inverted||!i.inverted&&!i.rightToLeft||i.rightToLeft&&i.inverted?r.multiply(-1).add(i.endAngle):r.add(i.startAngle),o=parseFloat(o.toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,n?o:o*Math.PI/180+Math.PI/2}getValueByAngle(e){const t=this.context;if(t._wordLengthNumber<64)return super.getValueByAngle(e,!0);const n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let i,a,r,o;for(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,void 0===t.inverted||!t.inverted&&!t.rightToLeft||t.rightToLeft&&t.inverted?(i=t.endAngle,a=e):(i=e,a=t._normalizedStartAngle);i<a;)i+=360;return r=new Smart.Utilities.BigNumber((i-a)/t._angleDifference).multiply(t._range).add(t._drawMin),t.logarithmicScale&&(r=new Smart.Utilities.BigNumber(Math.pow(10,r.toString()))),o=t.coerce?this.getCoercedValue(r,!1):this.round(r),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,new Smart.Utilities.BigNumber(o)}updateGaugeValue(e){if(e instanceof Smart.Utilities.BigNumber==0)return super.updateGaugeValue(e);const t=this.context,n=t._getEventValue();"numeric"===t.mode?(t.value=e.toString(),t.$.digitalDisplay.value=t.value):(t._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(e),t.value=e),t._drawValue=t.logarithmicScale?Math.log10(t.value).toString():t.value,t._number=e,t.$.fireEvent("change",{value:t._getEventValue(),oldValue:n}),t._setAriaValue("valuenow")}validateColorRange(e){const t=this.context;if(t._wordLengthNumber<64)return super.validateColorRange(e);e="numeric"===t.mode?new Smart.Utilities.BigNumber(e):(e=Smart.Utilities.DateTime.validateDate(e)).getTimeStamp();const n=new Smart.Utilities.BigNumber(t.min),i=new Smart.Utilities.BigNumber(t.max);return-1===e.compare(n)&&(e=n),1===e.compare(i)&&(e=i),e}lockRotation(e,t){const n=this.context;if(t instanceof Smart.Utilities.BigNumber==0&&(t=new Smart.Utilities.BigNumber(t)),e&&-1===t.compare(n._number)){if(n._lockCW=!0,-1===t.compare(n._maxObject))return new Smart.Utilities.BigNumber(n._maxObject)}else if(!e&&1===t.compare(n._number)&&(n._lockCCW=!0,1===t.compare(n._minObject)))return new Smart.Utilities.BigNumber(n._minObject)}getAngleRangeCoefficient(){const e=this.context,t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,e._angleRangeCoefficient=new Smart.Utilities.BigNumber(e._angleDifference).divide(e._range),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t}}),Smart.Utilities.Assign("DecimalNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t),this.context=e}getPreciseModulo(e,t,n){const i=e>=0?1:-1;if(e=Math.abs(e),t=Math.abs(t),void 0===n){const a=e.toExponential(),r=t.toExponential(),o=parseInt(a.slice(a.indexOf("e")+1),10),s=parseInt(r.slice(r.indexOf("e")+1),10),l=o<0?Math.abs(o):0,d=s<0?Math.abs(s):0,c=Math.max(l,d);if(this.roundCoefficient=c,e<t)return i*e;if(e===t)return 0;if((e<-1||e>1)&&(t<-1||t>1||1===t)){if(e%1==0&&t%1==0)return i*(e%t);{const m=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const y=i*parseFloat(new Smart.Utilities.BigNumber(e).mod(t).toString());return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=m,y}}const u=Math.pow(10,c);return i*(e*u%(t*u)/u)}return i*(Math.round(e*n)%Math.round(t*n))}createDescriptor(e,t,n,i){let a=parseFloat(e);return i&&(a=this.validate(a,this.context._minObject,this.context._maxObject)),a}round(e){return Math.round(e)}validate(e,t,n){let i;return i=e<t?t:e>n?n:e,i}validateMinMax(e,t){const n=this.context,i=void 0!==n._regexSpecial&&n._regexSpecial.inf.test(n.min),a=void 0!==n._regexSpecial&&n._regexSpecial.inf.test(n.max);e&&(null===n.min||i?(n.min=-1/0,n._minObject=-1/0):(n.min=n.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.min)&&(n.min=this.scientificToDecimal(n.min)),n._minObject=n._discardDecimalSeparator(n.min))),t&&(null===n.max||a?(n.max=1/0,n._maxObject=1/0):(n.max=n.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.max)&&(n.max=this.scientificToDecimal(n.max)),n._maxObject=n._discardDecimalSeparator(n.max))),this.compare(n._minObject,n._maxObject)||(n._maxObject=parseFloat(n._maxObject)+1,n.max=n._maxObject)}valueToPx(e){const t=this.context,n=t._measurements.trackLength/t._range;let i;return i=t._normalLayout?n*(e-t._drawMin):n*(t._drawMax-e),Math.round(i)}pxToValue(e){const t=this.context;let n;if(n=t._normalLayout?(e-t._trackStart)*t._valuePerPx:(t._trackEnd-e)*t._valuePerPx,t.logarithmicScale){const i=n+parseFloat(t._drawMin);return Math.pow(10,i)}return this.validate(n+t._minObject,t._minObject,t._maxObject)}compare(e,t,n){return e=parseFloat(e),t=parseFloat(t),!0!==n?e!==t:e<t?-1:e>t?1:0}incrementDecrement(e,t,n){const i=this.context;let a;if("add"===t){if(a=parseFloat(e)+parseFloat(n),void 0!==i._drawMax)return a>parseFloat(i._drawMax)?i._drawMax:a}else if(a=parseFloat(e)-parseFloat(n),void 0!==i._drawMin)return a<parseFloat(i._drawMin)?i._drawMin:a;return a}render(e){const t=this.context;if(void 0!==t._regexSpecial&&t._regexSpecial.nonNumericValue.test(e))return e;{const n=new Smart.Utilities.NumberRenderer(e);return t.scientificNotation?n.toScientific(t.significantDigits,t.precisionDigits):n.toDigits(t.significantDigits,t.precisionDigits)}}addTicksAndLabels(){const e=this.context,t=e._measurements.trackLength,n=e._normalLayout,i=e._majorTicksInterval,a=Math.round(e._range/parseFloat(i.toString())),r=t/a,o=parseFloat(e._drawMin),s=parseFloat(e._drawMax);let l,d,c,u,m,y,b,f,w,v="",S="";e._tickValues=[],this._longestLabelSize=0,n?(l=o,d=e.logarithmicScale&&o<0&&-1!==o?parseFloat(l-this.getPreciseModulo(l,i)):parseFloat(l-this.getPreciseModulo(l,i)+parseFloat(i)),c=d-l,m=e._formatLabel(o),y=e._tickIntervalHandler.labelsSize.minLabelSize,u=s,b=e._formatLabel(s),f=e._tickIntervalHandler.labelsSize.maxLabelSize):(l=s,d=parseFloat(l-this.getPreciseModulo(l,i)),c=l-d,m=e._formatLabel(s),y=e._tickIntervalHandler.labelsSize.maxLabelSize,u=o,b=e._formatLabel(o),f=e._tickIntervalHandler.labelsSize.minLabelSize),e._labelDummy=this._createMeasureLabel(),w=this._addMajorTickAndLabel(m,y,!0,l),v+=w.tick,S+=w.label;const _=c/i*r;if(d.toString()!==e._drawMax.toString()&&_<t){const T=e._formatLabel(d.toString());w=this._addMajorTickAndLabel(T,void 0,y<_,d,!0),v+=w.tick,S+=w.label}w=this.addMiddleMajorTicks(a,r,_,c,n,i),v+=w.tick,S+=w.label,w=this._addMajorTickAndLabel(b,f,!0,u),v+=w.tick,S+=w.label,v+=this.addMinorTicks(n),e._measureLabelScale.removeChild(e._labelDummy),delete e._labelDummy,delete e._measureLabelScale,"smart-tank"===e.nodeName.toLowerCase()&&e._updateScaleWidth(this._longestLabelSize),e._appendTicksAndLabelsToScales(v,S)}addMiddleMajorTicks(e,t,n,i,a,r){const o=this.context;let s="",l="";for(let d=1;d<e;d++){let c,u=d*t+n;if(c=a?parseFloat(o._drawMin)+r*d+i:parseFloat(o._drawMax)-r*d-i,c.toString()!==o._drawMax.toString()){let m=o._formatLabel(c.toString()),y=!0;o._labelDummy.innerHTML=m,u+o._labelDummy[o._settings.size]>=e*t&&(y=!1);const b=this._addMajorTickAndLabel(m,void 0,y,c,!0);s+=b.tick,l+=b.label}}return{tick:s,label:l}}addMinorTicks(e){function t(b){return parseFloat(b.toFixed(s))}function n(b){-1===a.indexOf(b)&&0===i._numericProcessor.getPreciseModulo(b,o,l)&&(y+='<div style="'+d+": "+i._numericProcessor.valueToPx(b)+'px;" class="smart-tick smart-tick-minor"></div>')}const i=this.context,a=i._tickValues,r=i._tickIntervalHandler.nearestPowerOfTen,o=i._minorTicksInterval,s=Math.log10(r)<0?Math.round(Math.abs(Math.log10(r))):0,l=Math.pow(10,s),d=i._settings.leftOrTop;let c,u,m,y="";if(e?(c=a[0],u=a[1],m=a[a.length-1]):(c=a[a.length-1],u=a[a.length-2],m=a[0]),i.logarithmicScale)!function(){let b=i._measurements.trackLength/a.length,f=.1;b<20?f=1:b>=20&&b<40?f=u-c>1?1:.5:b>=40&&b<80&&(f=.2);let w=Math.floor(i._drawMax),v=i._drawMax-w,S=i._drawMax-i._drawMin>a.length;for(let _=i._drawMax;_>i._drawMin-1;_-=1){let T=v>0?Math.pow(10,_-v+1):Math.pow(10,_),z=T*f;for(let M=T;M>0;M-=z)if(M<i.max&&M>i.min){let L=new Smart.Utilities.BigNumber(Math.log10(M));(L%1==0&&S||!S)&&(y+='<div style="'+d+": "+i._numericProcessor.valueToPx(L)+'px;" class="smart-tick smart-tick-minor"></div>')}}}();else{for(let b=u;b>c;b=t(b-r))n(b);for(let b=t(u+r);b<m;b=t(b+r))n(b)}return y}validateCustomTicks(){const e=this.context;let t=[];for(let n=0;n<e.customTicks.length;n++){const a=this.createDescriptor(e.customTicks[n]);a>=e._minObject&&a<=e._maxObject&&t.push(a.toString())}t.sort(function(n,i){return n-i}),t=t.filter(function(n,i,a){return!i||n!==a[i-1]}),e.customTicks=t.slice(0)}addGaugeTicksAndLabels(){const e=this.context,t=this,n=Math.max(e._tickIntervalHandler.labelsSize.minLabelSize,e._tickIntervalHandler.labelsSize.maxLabelSize),i=e._majorTicksInterval,a=e._minorTicksInterval,r={},o=e._distance,s=e._measurements.radius,l=s-o.majorTickDistance,d=s-o.minorTickDistance;let c,u,m,y,b,f;"none"!==e.ticksVisibility&&!1!==e._plotTicks?(c=function(_){e._drawTick(_,l,"major")},u=function(_){e._drawTick(t.getAngleByValue(_,!0),d,"minor")}):(c=function(){},u=function(){}),m="none"!==e.labelsVisibility&&!1!==e._plotLabels?function(_,T,z){e._drawLabel(_,T,o.labelDistance,z)}:function(){},void 0===e.inverted||!e.inverted&&!e.rightToLeft||e.rightToLeft&&e.inverted?(b=e.endAngle,f=e.startAngle):(b=e.startAngle,f=e.endAngle),y=t.getAngleByValue(e._drawMin,!1),c(y),r[e._drawMin]=!0,m(y,e.min,!1);let w,v,S=e._drawMin-t.getPreciseModulo(e._drawMin,i);e._drawMin>=0&&(S+=i);for(let _=S;_>=e._drawMin;_-=a)w=_;for(y=t.getAngleByValue(S,!1),c(y),r[S]=!0,2*Math.PI*e._measurements.innerRadius*(this._getAngleDifference(b,t.getAngleByValue(S,!1,!0))/360)>n&&m(y,this.getActualValue(S),S<e._drawMax),v=S+i;v<e._drawMax-i;v+=i)y=t.getAngleByValue(v,!1),c(y),r[v]=!0,m(y,this.getActualValue(v),!0);if(void 0===r[v]&&v<=e._drawMax&&(y=t.getAngleByValue(v,!1),c(y),r[v]=!0,2*Math.PI*e._measurements.innerRadius*(this._getAngleDifference(f,t.getAngleByValue(v,!1,!0))/360)>=n&&m(y,this.getActualValue(v),!0),e._normalizedStartAngle!==e.endAngle&&(y=t.getAngleByValue(e._drawMax,!1),c(y),r[e._drawMax]=!0,2*Math.PI*e._measurements.innerRadius*(this._getAngleDifference(f,b)/360)>=n&&m(y,e.max,!1))),e.logarithmicScale)this.drawGaugeLogarithmicScaleMinorTicks(r,i,u);else for(let _=w;_<e._drawMax;_+=a)r[_]||u(_)}updateToolTipAndValue(e,t,n){const i=this.context,a=i.logarithmicScale;i._updateTooltipValue(e),a&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(11)));const r=e.toString();i._number=e,i._drawValue=a?Math.log10(r):e,r!==t&&n&&(i.value=i._discardDecimalSeparator(r),i._programmaticValueIsSet||i.$.fireEvent("change",{value:i.value,oldValue:t}),i.$.hiddenInput&&(i.$.hiddenInput.value=i.value),i._setAriaValue("valuenow"))}validateInterval(e){const t=this.context,n=t._maxObject-t._minObject;e<=0&&(e=1),t._validInterval=Math.min(parseFloat(e),n),t.interval=t._validInterval}getCoercedValue(e,t,n){const i=this.context;if(!i.coerce)return e;let a,r,o=!i.logarithmicScale;if(i.customInterval){const m=i.customTicks;if(0===m.length)return e;o=o||n,a=!1!==t?parseFloat(i._drawMin):i._minObject;let y=Math.abs(a-e),b=a;for(let f=0;f<m.length;f++){const w=this.createDescriptor(m[f]),v=o?w:Math.log10(w),S=Math.abs(v-e);S<y&&(y=S,b=v)}return b}!1!==t?(a=parseFloat(i._drawMin),r=parseFloat(i._drawMax)):(a=parseFloat(i.min),r=parseFloat(i.max));let s=e-a,l=this.getPreciseModulo(s,parseFloat(i.interval)),d=this.roundCoefficient;if(0===l)return e;0===this.roundCoefficient&&(d=12);let c=parseFloat((s-l).toFixed(d)),u=c+parseFloat(i.interval);if(i.max-i.min<=parseFloat(i.interval)&&o){let m=a,y=r;return e>=m+(y-m)/2?y:m}if(Math.abs(s-c)<Math.abs(s-u))return c+a;{const m=u+a;return m>r?c+a:m}}updateValue(e){const t=this.context,n=this.validate(e,t._minObject,t._maxObject),i=t.value;e.toString()!==i.toString()||t._scaleTypeChangedFlag?(t.value=e.toString(),t._number=n,t._programmaticValueIsSet||t.$.fireEvent("change",{value:t.value,oldValue:i})):t.value="string"==typeof e?e:e.toString(),t._drawValue=t.logarithmicScale?Math.log10(n).toString():n.toString(),t._moveThumbBasedOnValue(t._drawValue),t.$.hiddenInput&&(t.$.hiddenInput.value=t.value),t._setAriaValue("valuenow")}getValuePerPx(e,t){return parseFloat(e)/t}restrictValue(e){e[1]<e[0]&&(e[1]=e[0])}lockRotation(e,t){const n=this.context;if(e&&t<n._number){if(n._lockCW=!0,t<n._maxObject)return n._maxObject}else if(!e&&t>n._number&&(n._lockCCW=!0,t>n._minObject))return n._minObject}getAngleRangeCoefficient(){const e=this.context;e._angleRangeCoefficient=e._angleDifference/e._range}}),Smart.Utilities.Assign("ComplexNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t),this.context=e}createDescriptor(e,t,n,i,a,r){let o;return o=r||(e.constructor===this.complexConstructor?new this.complexConstructor(e.realPart,e.imaginaryPart):new this.complexConstructor(e)),i&&(o=this.validate(o,this.context._minObject,this.context._maxObject)),o}validate(e,t,n){let i=e;return t!==-1/0?-1===this.compareComplexNumbers(e,t)&&(i=new this.complexConstructor(t.realPart,t.imaginaryPart)):n!==1/0&&1===this.compareComplexNumbers(e,n)&&(i=new this.complexConstructor(n.realPart,n.imaginaryPart)),i}compare(e,t,n){return!0!==n?0!==this.compareComplexNumbers(e,t):this.compareComplexNumbers(e,t)}validateMinMax(e,t){const n=this.context;e&&(null===n.min||n._regexSpecial.inf.test(n.min)?(n.min=-1/0,n._minObject=-1/0):n._minObject=new this.complexConstructor(n.min)),t&&(null===n.max||n._regexSpecial.inf.test(n.max)?(n.max=1/0,n._maxObject=1/0):n._maxObject=new this.complexConstructor(n.max))}incrementDecrement(e,t){let n=new this.complexConstructor(e.realPart,e.imaginaryPart),i=this.context._spinButtonsStepObject;return"add"===t?(n.realPart+=i.realPart,n.imaginaryPart+=i.imaginaryPart):(n.realPart-=i.realPart,n.imaginaryPart-=i.imaginaryPart),n}render(e){let t=e;if(!1===this.context._regexSpecial.nonNumericValue.test(e)){let n,i=t.realPart,a=t.imaginaryPart,r=this.context.significantDigits,o=this.context.precisionDigits;a>=0?n="+":(n="-",a=Math.abs(a));const s=new Smart.Utilities.NumberRenderer(i),l=new Smart.Utilities.NumberRenderer(a);this.context.scientificNotation?(i=s.toScientific(r,o),a=l.toScientific(r,o)):(i=s.toDigits(r,o),a=l.toDigits(r,o)),t=`${i} ${n} ${a}i`}return t}compareComplexNumbers(e,t){if(e instanceof this.complexConstructor==0||t instanceof this.complexConstructor==0)return-1;const n=e.realPart,i=t.realPart;if(n<i)return-1;if(n>i)return 1;{const a=e.imaginaryPart,r=t.imaginaryPart;return a<r?-1:a>r?1:0}}}),Smart.Utilities.Assign("NumberRenderer",class{constructor(e){const t=this;t.numericValue=e,t.powersToPrefixes={24:"Y",21:"Z",18:"E",15:"P",12:"T",9:"G",6:"M",3:"k",0:"","-3":"m","-6":"u","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},t.localizationObject={currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",defaultPrecision:2}}isENotation(e){return new RegExp(/e/i).test(e)}largeExponentialToDecimal(e){let t;void 0===e&&(e=this.numericValue,t=!0);let n=e.toString().toLowerCase(),i=n.indexOf("e"),a=new Smart.Utilities.BigNumber(n.slice(0,i)),r=n.slice(i+1,i+2);"+"!==r&&"-"!==r&&(n=n.slice(0,i)+"e+"+n.slice(i+1),r="+");let o=n.slice(i+2),s=new Smart.Utilities.BigNumber(10).pow(r+(t?Math.min(20,o):o));return a.multiply(s).toString()}bigNumberToExponent(e,t){let n=this.numericValue;n.constructor!==Smart.Utilities.BigNumber&&(n=new Smart.Utilities.BigNumber(n));const i=n._f;let a=n.toString();if(i<=10)return t?parseFloat(a).toExponential(null!==e?e-1:void 0):new Smart.Utilities.NumberRenderer(parseFloat(a)).toDigits(e);if(e>=i&&!t)return a;{let r;!1===n._s?r="":(r="-",a=a.slice(1)),parseFloat(a.slice(e,e+1))>=5&&(a=new Smart.Utilities.BigNumber(a.slice(0,e)).add(1).toString());let o=a.slice(1,e);if(t)e--,o.length>0&&e>o.length?o+="0".repeat(e-o.length):0===o.length&&(o="0".repeat(e));else for(;o.length>0&&"0"===o.charAt(o.length-1);)o=o.slice(0,o.length-1);const s=o.length>0?".":"",l=i-1;return r+a.slice(0,1)+s+o+"E+"+l}}toScientific(){const e=this;let t;if(t=e.numericValue._d?e.bigNumberToExponent(null!==arguments[0]?arguments[0]:arguments[1]+1,!0).toLowerCase():e.numericValue<=-1||e.numericValue>=1?Number(e.toDigits(arguments[0],arguments[1])).toExponential():Number(e.numericValue).toExponential(),isNaN(t))return t;const n=t.indexOf("e");let i=parseInt(t.slice(n+1),10),a=parseFloat(t.slice(0,n)),r=new Smart.Utilities.NumberRenderer(a);if(i<0){let u=r.toDigits(arguments[0],arguments[1]);if(u=parseFloat(u).toExponential(),"0"===u.charAt(u.length-1)){let m=0;for(;i%3!=0;)i--,m++;if(m){const b=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,a=parseFloat(new Smart.Utilities.BigNumber(a).multiply(Math.pow(10,m)).toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=b}r.numericValue=a,a=r.toDigits(arguments[0],arguments[1]),r.numericValue=a/1e3;const y=r.toDigits(arguments[0],arguments[1]);return y>=1&&(a=y,i+=3),a+e.powersToPrefixes[i.toString()]}}let o=0;if(o=Math.abs(i)>24?i-i/Math.abs(i)*24:i%3,o>0)for(let u=0;u<o;u++)a*=10;else if(o<0){const u=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,a=parseFloat(new Smart.Utilities.BigNumber(a).multiply(Math.pow(10,o)).toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=u}if(i>0){const m=t.slice(a>=0?0:1,n).length-o-2;m>=0&&(a=a.toFixed(m))}let s=Number(a).toExponential();s=parseFloat(s.charAt(s.length-1)),r.numericValue=a,a=r.toDigits(arguments[0],arguments[1]);let l=Number(a).toExponential(),d=0;return l=parseFloat(l.charAt(l.length-1)),l!==s&&l%3==0&&(a=parseFloat(a)/Math.pow(10,l),r.numericValue=a,a=r.toDigits(arguments[0],arguments[1]),d=l),a+e.powersToPrefixes[(i-o+d).toString()]}bigNumberToScientific(){const e=this,t=e.numericValue._f-1,n=parseInt(t,10)%3,i=parseInt(t,10)-n;let a,r,o=e.numericValue.toString();if("-"===o.charAt(0)?(a="-",o=o.slice(1)):a="",null!==arguments[0])for(r=o.slice(0,arguments[0]),parseFloat(o.slice(arguments[0],arguments[0]+1))>=5&&(r=new Smart.Utilities.BigNumber(r).add(1).toString());r.length>1+n&&"0"===r.charAt(r.length-1);)r=r.slice(0,r.length-1);else null!==arguments[1]&&(r=o.slice(0,arguments[1]+1),parseFloat(o.slice(arguments[1]+1,arguments[1]+2))>=5&&(r=new Smart.Utilities.BigNumber(r).add(1).toString()),arguments[1]+n>r.length-1&&(r+="0".repeat(arguments[1]+n-r.length+1)));return r.length>1+n&&(r=r.slice(0,1+n)+"."+r.slice(1+n)),a+r+e.powersToPrefixes[i.toString()]}toDigits(e,t){const n=this;let i;return i=null!==e?n.applySignificantDigits(e):null!==t?n.applyPrecisionDigits(t):n.applySignificantDigits(8),i}applySignificantDigits(e){function n(a){for(;"0"===a.charAt(a.length-1);)a=a.slice(0,-1);return"."===a.charAt(a.length-1)&&(a=a.slice(0,-1)),a}e=Math.max(1,Math.min(e,21));let i=parseFloat(this.numericValue).toPrecision(e).toUpperCase();if(-1!==i.indexOf("."))if(this.isENotation(i)){const a=i.indexOf("."),r=i.indexOf("E");let o=i.slice(a,r);o=n(o),i=i.slice(0,a)+o+i.slice(r)}else i=n(i);return i}applyPrecisionDigits(e){const t=this;e=Math.max(0,Math.min(e,20));let n=parseFloat(t.numericValue).toFixed(e);return t.isENotation(n)&&(n=t.largeExponentialToDecimal(n)+"."+"0".repeat(e)),n}getLogarithm(e){const t=this.numericValue;let n;if(void 0===e&&(e=10),10===e)try{n=Math.log10(t)}catch{n=Math.log(t)/Math.log(10)}else n=Math.log(t)/Math.log(e);return n}applySeparators(e,t){const n=this,i=(e=e.toString()).indexOf(".");if(-1!==i){const a=e.slice(0,i),r=e.slice(i+1);return n.applyThousandsSeparator(a,t)+n.localizationObject.decimalseparator+r}return n.applyThousandsSeparator(e,t)}applyThousandsSeparator(e,t){if(t)return e;let n="";"-"===(e=e.toString()).charAt(0)&&(n="-",e=e.slice(1));let i=e.split("").reverse();for(let a=2;a<i.length-1;a+=3)i[a]=this.localizationObject.thousandsseparator+i[a];return i.reverse(),i=i.join(""),n+i}formatNumber(e,t,n){const i=this;if(void 0===arguments[3]&&delete i._ignoreMinus,delete i._wordLengthNumber,!/^([a-zA-Z]\d*)$/g.test(t))try{return i.applyCustomFormat(e,t)}catch{return e.toString()}const a=t.slice(0,1);let r=t.slice(1);if(""!==r&&(isNaN(parseFloat(r))||parseFloat(r)<0||parseFloat(r)>99?r="":parseFloat(r)%1!=0&&(r=Math.round(r))),e._d)i.inputFormat="integer";else{if(e.imaginaryPart)return i.formatComplexNumber(e,t,a,r);i.inputFormat="floatingPoint"}let o,s=new Smart.Utilities.NumericProcessor(i,"inputFormat"),l=s.createDescriptor(e);switch(i._wordLengthNumber=s.getWordLength(n||"int32"),"integer"===i.inputFormat&&(l=s.round(l)),i.numericValue=l,a){case"C":case"c":return""===r&&(r=i.localizationObject.defaultPrecision),r=parseFloat(r),o="floatingPoint"===i.inputFormat?i.applyPrecisionDigits(r):l.toString()+(r>0?"."+"0".repeat(r):""),o=i.applySeparators(o),"before"===i.localizationObject.currencysymbolposition?"-"===o.charAt(0)?"-"+i.localizationObject.currencysymbol+o.slice(1):i.localizationObject.currencysymbol+o:o+" "+i.localizationObject.currencysymbol;case"D":case"d":{if(o=l,"floatingPoint"===i.inputFormat&&(o=Math.round(l)),o=o.toString(),""===r)return o;let d="";"-"===o.charAt(0)&&(d="-",o=o.slice(1));const c=r-o.length;return c>0&&(o="0".repeat(c)+o),d+o}case"E":case"e":case"U":case"u":{""===r&&(r=6),o="floatingPoint"===i.inputFormat?l.toExponential(r):i.bigNumberToExponent(parseFloat(r)+1,!0).toLowerCase();const d=o.indexOf("e"),c=o.slice(d+2).length;return c<3&&(o=o.slice(0,d+2)+"0".repeat(3-c)+o.slice(d+2)),"u"===a.toLowerCase()?i.exponentialToSuperscript(i.applySeparators(o,!0)):("E"===a&&(o=o.toUpperCase()),i.applySeparators(o,!0))}case"F":case"f":case"N":case"n":return""===r&&(r=i.localizationObject.defaultPrecision),r=parseFloat(r),o="floatingPoint"===i.inputFormat?i.applyPrecisionDigits(r):l.toString()+(r>0?"."+"0".repeat(r):""),i.applySeparators(o,"f"===a.toLowerCase());case"G":case"g":{if(""===r||"0"===r)if("floatingPoint"===i.inputFormat)r=15;else switch(n){case"int8":case"uint8":r=3;break;case"int16":case"uint16":r=5;break;case"int64":r=19;break;case"uint64":r=20;break;default:r=10}r=parseFloat(r);let d=i.formatNumber(e,"E"+r,n),c=d.indexOf("E");const u=parseInt(d.slice(c+1),10);if(u>-5&&u<r)return"floatingPoint"===i.inputFormat?i.applySeparators(i.applySignificantDigits(r),!0):l.toString();if(u>-100&&u<100&&(d=d.slice(0,c+2)+d.slice(c+3)),-1!==d.indexOf(i.localizationObject.decimalseparator)){for(;"0"===d.charAt(c-1);)d=d.slice(0,c-1)+d.slice(c),c=d.indexOf("E");d.charAt(c-1)===i.localizationObject.decimalseparator&&(d=d.slice(0,c-1)+d.slice(c))}return"g"===a&&(d=d.toLowerCase()),d}case"P":case"p":return""===r&&(r=i.localizationObject.defaultPrecision),r=parseFloat(r),"floatingPoint"===i.inputFormat?(i.numericValue=100*l,o=i.applyPrecisionDigits(r)):o=l.multiply(100).toString()+(r>0?"."+"0".repeat(r):""),i.applySeparators(o)+" %";case"B":case"b":case"O":case"o":case"X":case"x":{let d;switch("integer"!==i.inputFormat&&(i.inputFormat="integer",s=new Smart.Utilities.NumericProcessor(i,"inputFormat"),l=s.round(s.createDescriptor(e))),a){case"B":case"b":d=2;break;case"O":case"o":d=8;break;default:d=16}if(o=l.toString(d,i._wordLengthNumber),""!==r){const c=parseFloat(r)-o.length;c>0&&(o="0".repeat(c)+o)}return"x"===a&&(o=o.toLowerCase()),o}case"S":case"s":return""===r&&(r=i.localizationObject.defaultPrecision),r=parseFloat(r),i.toScientific(null,r).replace(".",i.localizationObject.decimalseparator);default:return e.toString()}}formatComplexNumber(e,t,n){const i=this;switch(n){case"E":case"e":case"U":case"u":case"F":case"f":case"G":case"g":case"N":case"n":case"S":case"s":return e.imaginaryPart>=0?i.formatNumber(e.realPart,t)+" + "+i.formatNumber(e.imaginaryPart,t)+"i":i.formatNumber(e.realPart,t)+" - "+i.formatNumber(Math.abs(e.imaginaryPart),t)+"i";default:return e.toString()}}toString(e,t,n){return t?this.formatNumber(e,t,n):e.toString()}applyCustomFormat(e,t){const n=this,i=(t=(t=t.replace(/_.|\[\w*\]|\*/g,"")).replace(/\?/g,"#")).split(";");if("string"==typeof e&&isNaN(e))return i[i.length-1].replace(/"/g,"").replace(/@/g,e.toString());if(e._d)n.inputFormat="integer";else{if(e.imaginaryPart)return e.toString();e=parseFloat(e),n.inputFormat="floatingPoint"}let a=new Smart.Utilities.NumericProcessor(n,"inputFormat"),r=a.createDescriptor(e);"integer"===n.inputFormat&&(r=a.round(r)),n.numericProcessor=a;const o=n.getRelevantFormatSection(i,r);if(void 0===o)return e.toString();if(-1!==o.indexOf("@"))return i[i.length-1].replace(/"/g,"").replace(/@/g,e.toString());const s=-1!==o.replace(/".*"/g,"").indexOf("%"),l=n.getTextParts(o);if(-1!==l.main.toLowerCase().indexOf("e"))return n.applyCustomExponentialFormat(r,l,a);if(-1!==l.main.indexOf("/"))return n.applyCustomFractionalFormat(r,l,a);if(s&&("integer"===n.inputFormat?r=r.multiply(100):r*=100),""===l.main){if(!s)return l.suffix;let T=r.toString();return n._ignoreMinus&&"-"===T.charAt(0)&&(T=T.slice(1)),T+l.suffix}let d=l.main.replace(/[^0#,. \/]/g,""),c=d.indexOf(".");for(-1!==c&&(d=d.substring(0,c+1)+d.substring(c+1).replace(/\./g,""),"."===d.charAt(d.length-1)&&(d=d.slice(0,d.length-1)),0===c&&(d="#"+d));","===d.charAt(d.length-1);)d=d.slice(0,d.length-1),"floatingPoint"===n.inputFormat?r/=1e3:r=r.multiply(.001);"integer"===n.inputFormat&&(r=a.round(r));const u=-1!==d.indexOf(",");d=d.replace(/,/g,"");const m=d.split("."),y=m[0];let b=m[1],f="";if(1===m.length)return"floatingPoint"===n.inputFormat&&(r=a.round(r)),f=r.toString(),n.setTextParts(n.formatWholeNumber(f,y,u),l);f=r.toString();let w=f.split("."),v=n.formatWholeNumber(w[0],y,u),S=w[1]||"";if(b.length<=S.length&&(f=parseFloat(r.toFixed(b.length)).toString(),w=f.split("."),v=n.formatWholeNumber(w[0],y,u),S=w[1]||"",S))return n.setTextParts(v+n.localizationObject.decimalseparator+S.slice(0,b.length),l);b=b.slice(S.length-b.length);let _=b.lastIndexOf("0");return n.setTextParts(-1===_?""===S?v:v+n.localizationObject.decimalseparator+S:v+n.localizationObject.decimalseparator+S+"0".repeat(_+1),l)}getRelevantFormatSection(e,t){const n=this,i=n.numericProcessor.compare(t,0,!0);if(1===i)return e[0];let a,r;return e.length>=3?(n._ignoreMinus=!0,a=1,r=2):2===e.length?(n._ignoreMinus=!0,r=0,a=1):1===e.length&&(r=0,a=0),0===i?e[r]:-1===i?e[a]:void 0}getTextParts(e){const t=e.replace(/"[^"]*"/g,""),n=e.match(/"[^"]*"/g),i=t.search(/0|#|\./g),a=Math.max(t.lastIndexOf("0"),t.lastIndexOf("#"),t.lastIndexOf("."),t.lastIndexOf(",")),r=t.slice(i,a+1);if(""===r)return{prefix:"",main:"",suffix:e.replace(/"/g,"")};let o=e.indexOf(r),s=o+r.length;if(n)for(let l=0;l<n.length;l++){const d=e.indexOf(n[l]);o>=d&&s<=d+n[l].length&&(o=e.indexOf(r,d+n[l].length),s=o+r.length)}return{prefix:e.slice(0,o).replace(/"/g,""),main:r,suffix:e.slice(s).replace(/"/g,"")}}applyCustomExponentialFormat(e,t,n){const i=this;let a,r=t.main;const o=-1!==r.indexOf(",");r=r.replace(/[^0#.eE+-]/g,"");const s=r.toLowerCase().indexOf("e");r=r.substring(0,s+1)+r.substring(s+1).replace(/[eE\.]/g,"");const l=r.charAt(s),d=r.indexOf(".");-1!==d&&(r=r.substring(0,d+1)+r.substring(d+1).replace(/\./g,"")),"."===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1));const c=r.split(l);let u=c[0];const m=u.split("."),y=m[0],b=m[1],f=c[1];let w=e.toString().split(".")[0].replace(/-/,""),v=0;if("0"===w&&n.compare(e,0)){let S=y.length-1;for(;0===parseInt(e);)v++,e*=10;w=e.toString().split(".")[0].replace(/-/,""),v+=S,e*=Math.pow(10,S)}if(o&&(u=u.slice(0,1)+","+u.slice(1)),w.length<=y.length)a=i.formatNumber(e,u,void 0,!0)+l+i.formatExponent(0-v,f);else{const S=w.length-y.length;let _="floatingPoint"===i.inputFormat?e/Math.pow(10,S):e.divide(Math.pow(10,S));b||(a=i.applyThousandsSeparator(n.round(_).toString(),!o)+l+i.formatExponent(S-v,f));let T=_.toString().split(".")[1]||"";T.length===b.length?a=i.applySeparators(_,!o)+l+i.formatExponent(S-v,f):T.length<b.length?a=i.formatNumber(_,u,void 0,!0)+l+i.formatExponent(S-v,f):(_="floatingPoint"===i.inputFormat?_.toFixed(b.length):_=n.round(e.divide(Math.pow(10,S-b.length))).divide(Math.pow(10,b.length)),a=i.formatNumber(parseFloat(_),u,void 0,!0)+l+i.formatExponent(S-v,f))}return i.setTextParts(a,t)}formatExponent(e,t){let n;return-1!==["+","-"].indexOf(t.charAt(0))&&(n=t.charAt(0),(e>0&&"-"===n||e<0&&"+"===n)&&(n=void 0)),e<0&&(e=Math.abs(e),n="-"),t=t.replace(/[+-]/g,""),(n||"")+this.formatNumber(e,t,void 0,!0)}formatWholeNumber(e,t,n){const i=this;let a="";if("-"===e.charAt(0)&&(i._ignoreMinus||(a="-"),e=e.slice(1)),"0"===e){if(t==="#".repeat(t.length))return a;e=""}if(t.length<=e.length)return a+i.applyThousandsSeparator(e,!n);for(let r=(t=t.slice(0,t.length-e.length)).length-1;r>=0;r--)"0"===t.charAt(r)&&(e="0"+e);return a+i.applyThousandsSeparator(e,!n)}setTextParts(e,t){return t.prefix+e+t.suffix}applyCustomFractionalFormat(e,t,n){const i=this,a=/^([0#,]+[ ]+)?([0#,]+\/[0#,]+)$/;let r,o=t.main.trim();if(!a.test(o))return e.toString();const s=a.exec(o);if(s[2]=s[2].replace(/,/g,""),"integer"===i.inputFormat){const l=s[2].split("/");return void 0===s[1]?r=i.formatNumber(e,l[0],void 0,!0)+"/"+i.formatNumber(1,l[1],void 0,!0):(r=i.formatNumber(e,s[1].trim(),void 0,!0),-1!==s[2].indexOf("0")&&(r+=" "+i.formatNumber(0,l[0],void 0,!0)+"/"+i.formatNumber(1,l[1],void 0,!0))),i.setTextParts(r,t)}if(void 0===s[1])r=(e<0?"-":"")+i.formatAsFraction(Math.abs(e),s[2]);else{const l=s[1].trim(),d=s[2];r=i.formatNumber(parseInt(e,10),l,void 0,!0)+" "+i.formatAsFraction(n.getPreciseModulo(Math.abs(e),1),d)}return i.setTextParts(r.trim(),t)}formatAsFraction(e,t){const n=this,i=t.split("/");if(0===e)return-1===t.indexOf("0")?"":n.formatNumber(0,i[0],void 0,!0)+"/"+n.formatNumber(1,i[1],void 0,!0);if(e%1==0)return n.formatNumber(e,i[0],void 0,!0)+"/"+n.formatNumber(1,i[1],void 0,!0);const a=[];n.approximateFractions(e,a);const r=i[1].length>=2?2:1;let o=[],s=[];a.forEach(function(d,c){const u=d.denominator.toString().length,m=Math.abs(e-d.numerator/d.denominator);if(void 0===o[u])return s[u]=c,void(o[u]=m);m<o[u]&&(s[u]=c,o[u]=m)});let l=s[r]?a[s[r]]:a[s[1]];return n.formatNumber(l.numerator,i[0],void 0,!0)+"/"+n.formatNumber(l.denominator,i[1],void 0,!0)}approximateFractions(e,t){const n=[0,1],i=[1,0],a=this.getMaxNumerator(e);let r,o=e,s=NaN;for(let l=2;l<1e3;l++){const d=Math.floor(o);if(n[l]=d*n[l-1]+n[l-2],Math.abs(n[l])>a||(i[l]=d*i[l-1]+i[l-2],r=n[l]/i[l],r===s)||(t.push({numerator:n[l],denominator:i[l]}),r===e))return;s=r,o=1/(o-d)}}getMaxNumerator(e){let t=null,n=e.toString().indexOf("E");-1===n&&(n=e.toString().indexOf("e")),t=-1===n?e.toString():e.toString().substring(0,n);let i=null;const a=t.toString().indexOf(".");-1===a?i=t:0===a?i=t.substring(1,t.length):a<t.length&&(i=t.substring(0,a)+t.substring(a+1,t.length));let r=i;const o=r.toString().length,s=e;let l=s.toString().length;0===s&&(l=0);const d=o-l;for(let c=d;c>0&&r%2==0;c--)r/=2;for(let c=d;c>0&&r%5==0;c--)r/=5;return r}exponentialToSuperscript(e){const t=e.indexOf("e"),n=e.slice(t+1).replace(/0{1,2}/,"");let i=e.slice(0,t+1);return i=i.replace("e","\xd710"),i+=this.toSuperscript(n),i=i.replace("+",""),i}toSuperscript(e,t){const n="-0123456789",i="\u207b\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079";let a="";for(let r=0;r<e.length;r++)if(!0===t){const o=i.indexOf(e.charAt(r));a+=-1!==o?n[o]:e[r]}else{const o=n.indexOf(e.charAt(r));a+=-1!==o?i[o]:e[r]}return a}})},8649:()=>{Smart("smart-radio-button",class extends Smart.ToggleButton{static get properties(){return{checkMode:{value:"both",allowedValues:["both","input","label"],type:"string"},type:{value:"radio",type:"string",defaultReflectToAttribute:!0,readonly:!0},groupName:{value:"",type:"string"}}}template(){return"<div  id='container' class='smart-container'>\n                 <div class ='smart-overlay'></div>\n                 <span id='radioButtonInput' class ='smart-input'></span>\n                 <span id='radioButtonLabel' inner-h-t-m-l='[[innerHTML]]' class ='smart-label'><content></content></span>\n                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>\n               </div>"}static get listeners(){return{down:"_downHandler","document.up":"_documentUpHandler",mouseenter:"_elementMouseEnterHandler","radioButtonInput.mouseenter":"_radioMouseEnterHandler","radioButtonInput.mouseleave":"_radioMouseLeaveHandler",focus:"_focusHandler",blur:"_blurHandler"}}static get styleUrls(){return["smart.toggle.css"]}_radioMouseEnterHandler(){this.$.setAttributeValue("hover",!0)}_radioMouseLeaveHandler(){this.$.setAttributeValue("hover",!1)}_focusHandler(){this.$.setAttributeValue("focus",!0)}_blurHandler(){this.$.setAttributeValue("focus",!1)}_mouseEnterHandler(){this.$.setAttributeValue("hover",!0)}_mouseLeaveHandler(){this.$.setAttributeValue("hover",!1)}ready(){const e=this;super.ready(),e.classList.add("smart-toggle-box"),e._handleMultipleCheckedInstances(),e._updateHidenInputNameAndValue(),e._updateGroupValue()}_downHandler(e){const t=this,n=t.enableShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(!(t.disabled||t.readonly||"input"===t.checkMode&&n!==t.$.radioButtonInput||"label"===t.checkMode&&n!==t.$.radioButtonLabel)){if(t.$.setAttributeValue("active",!0),t.hasRippleAnimation){const i=t.$.radioButtonInput.getBoundingClientRect(),a=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset;Smart.Utilities.Animation.Ripple.animate(t.$.radioButtonInput,i.left+i.width/2+a,i.top+i.height/2+r)}t._preventAction?t._preventAction=!1:("release"!==t.clickMode&&"pressAndRelease"!==t.clickMode||(t._pressed=!0),"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||("pressAndRelease"===t.clickMode&&(t._checkedBeforeChange=""===t.groupName?t.parentNode.querySelector("smart-radio-button[checked]"):document.querySelector('smart-radio-button[group-name="'+t.groupName+'"][checked]')),t._handleMouseInteraction()))}}_elementMouseEnterHandler(){const e=this;"hover"!==e.clickMode||e.disabled||e.readonly||e._handleMouseInteraction()}_documentUpHandler(e){const t=this,n=t.enableShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;!t._pressed||t.disabled||t.readonly||"input"===t.checkMode&&n!==t.$.radioButtonInput||"label"===t.checkMode&&n!==t.$.radioButtonLabel||"pointercancel"===e.originalEvent.type||("release"===t.clickMode?t._handleMouseInteraction():(null===t._checkedBeforeChange?(t.$.fireEvent("change",{value:!1,oldValue:!0,changeType:"pointer"}),t.$.fireEvent("uncheckValue",{changeType:"pointer"}),t.checked=!1):t._checkedBeforeChange._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()),t.$.setAttributeValue("active",!1),t._pressed=!1)}_handleMouseInteraction(){const e=this;e._handleTextSelection(),e._changeCheckState("pointer"),e.focus(),e._updateHidenInputNameAndValue()}_handleMultipleCheckedInstances(){const e=Array.from(document.querySelectorAll('smart-radio-button[group-name="'+this.groupName+'"][checked]')),t=Array.from(document.querySelectorAll('smart-ui-radio-button[group-name="'+this.groupName+'"][checked]')),n=e.length+t.length;n<2||e.concat(...t).forEach((i,a)=>a<n-1&&(i.checked=!1))}_changeCheckState(e){const t=this;let n=document.querySelectorAll('smart-radio-button[group-name="'+t.groupName+'"]'),i=document.querySelectorAll('smart-ui-radio-button[group-name="'+t.groupName+'"]'),a=Array.from(n).concat(...i);if(!0===t.checked&&"api"===e||!1===t.checked)if(a.length>0)t._changeCheckStateInGroup(a,e);else{let r=t.parentNode;t.getRootNode().host?(r=t.getRootNode().host.parentNode,n=r.querySelectorAll("smart-radio-button:not([group-name])"),i=r.querySelectorAll("smart-ui-radio-button:not([group-name])"),a=Array.from(n).concat(...i)):a=r.querySelectorAll("smart-radio-button:not([group-name])"),t._changeCheckStateInGroup(a,e)}}_updateGroupValue(){const e=this;if(e.dataset.target){const t=document.querySelector(e.dataset.target);if(t&&e.checked){const n=e.dataset.property,i=e.dataset.value;if(n&&void 0!==t[n]){let a=i;"true"===a&&(a=!0),"false"===a&&(a=!1),t[n]=a}else e.name?(t.value=e.name,e.id&&t.setAttribute("data-id",e.id)):e.id&&(t.value=e.id),e._targetDispatchTimer&&clearTimeout(e._targetDispatchTimer),e._targetDispatchTimer=setTimeout(()=>{t.dispatchEvent(new Event("change"))},100)}}}_changeCheckStateInGroup(e,t){const n=this,i=n.getRootNode().host?n.getRootNode().host:n;for(let a=0;a<e.length;a++)e[a]._isUpdating=!0,e[a]===i?i.checked=!0:e[a].checked&&(e[a].checked=!1),e[a]._isUpdating=!1;i.nativeElement?(i.nativeElement.$.fireEvent("change",{value:!0,oldValue:!1,changeType:t}),i.nativeElement.$.fireEvent("checkValue",{changeType:t})):(i.$.fireEvent("change",{value:!0,oldValue:!1,changeType:t}),i.$.fireEvent("checkValue",{changeType:t})),n._updateGroupValue()}propertyChangedHandler(e,t,n){const i=this;switch(e){case"value":i._updateHidenInputNameAndValue();break;case"checked":i._isUpdating||i._changeCheckState("api"),i._updateHidenInputNameAndValue();break;case"name":i._updateHidenInputName();break;default:super.propertyChangedHandler(e,t,n)}}})},6670:()=>{Smart("smart-scheduler",class extends Smart.ScrollViewer{static get properties(){return{available:{value:[],type:"array"},autoHeightAllDayCells:{value:!1,type:"boolean"},autoScrollStep:{value:30,type:"number"},colorScheme:{value:["#D50000","#E67C73","#F4511E","#F6BF26","#33B679","#0B8043","#039BE5","#3F51B5","#7986CB","#8E24AA","#616161",""],type:"array"},currentTimeIndicator:{value:!1,type:"boolean"},currentTimeIndicatorInterval:{value:1,validator:"_currentTimeIndicatorIntervalValidator",type:"number"},contextMenuDataSource:{value:null,type:"any",reflectToAttribute:!1},contextMenuClipboardActions:{value:!1,type:"boolean"},eventTemplate:{value:null,type:"any",reflectToAttribute:!1},eventCollectorTemplate:{value:null,type:"any"},eventRenderMode:{allowedValues:["classic","modern"],value:"modern",type:"string"},eventTooltipTemplate:{value:null,type:"any"},cellTemplate:{value:null,type:"any",reflectToAttribute:!1},dateCurrent:{value:new Date,type:"any",validator:"_dateValidator"},dataExport:{value:{header:{value:!0,type:"boolean"},columns:{value:[],type:"array"},style:{value:null,type:"object"},fileName:{value:"smartScheduler",type:"string?"},pageOrientation:{value:"portrait",type:"string"}},type:"object"},dataSource:{value:[],type:"any",reflectToAttribute:!1},dateSelectorFormatFunction:{value:null,reflectToAttribute:!1,type:"function?"},dayFormat:{value:"numeric",allowedValues:["2-digit","numeric"],type:"string"},disableAutoScroll:{value:!1,type:"boolean"},disableDrag:{value:!1,type:"boolean"},disableDrop:{value:!1,type:"boolean"},disableResize:{value:!1,type:"boolean"},disableSelection:{value:!1,type:"boolean"},disableWindowEditor:{value:!1,type:"boolean"},disableContextMenu:{value:!1,type:"boolean"},disableEventMenu:{value:!1,type:"boolean"},disableViewMenu:{value:!1,type:"boolean"},disableDateMenu:{value:!1,type:"boolean"},dragFeedbackFormatFunction:{value:null,type:"function?",reflectToAttribute:!1},dragOffset:{value:[10,10],type:"array"},filterable:{value:!1,type:"boolean"},filter:{value:null,type:"any"},filterMode:{value:"equals",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},firstDayOfWeek:{value:0,type:"number",defaultValue:0,validator:"_firstDayOfWeekValidator"},footerTemplate:{value:null,type:"any",reflectToAttribute:!1},groupByDate:{value:!1,type:"boolean"},groupOrientation:{allowedValues:["horizontal","vertical"],value:"horizontal",type:"string"},groupTemplate:{value:null,type:"any",reflectToAttribute:!1},groups:{value:[],type:"array"},hourEnd:{value:23,type:"number",validator:"_hourValidator"},hourStart:{value:0,type:"number",validator:"_hourValidator"},hourFormat:{value:"numeric",allowedValues:["numeric","2-digit"],type:"string"},headerTemplate:{value:null,type:"any",reflectToAttribute:!1},headerDatePosition:{value:"near",allowedValues:["near","far"],type:"string"},headerNavigationStyle:{value:"flat",allowedValues:["flat","raised"],type:"string"},headerViewPosition:{value:"far",allowedValues:["near","far"],type:"string"},hideAllDay:{value:!1,type:"boolean"},hideNonworkingWeekdays:{value:!1,type:"boolean"},hideOtherMonthDays:{value:!1,type:"boolean"},hideTodayButton:{value:!1,type:"boolean"},hideViewMenuCheckableItems:{value:!1,type:"boolean"},hideWeekend:{value:!1,type:"boolean"},legendLocation:{allowedValues:["header","footer"],value:"footer",type:"string"},legendPosition:{allowedValues:["near","far"],value:"near",type:"string"},legendLayout:{allowedValues:["auto","","menu"],value:"auto",type:"string"},legendLayoutMenuBreakpoint:{value:10,type:"number"},max:{value:new Date(2100,0,1),type:"any",validator:"_dateValidator"},maxEventsPerCell:{value:null,type:"number?"},min:{value:new Date(1900,0,1),type:"any",validator:"_dateValidator"},messages:{extend:!0,value:{en:{invalidValue:"{{elementType}}: Invalid {{property}} value. {{property}} should be of type {{typeOne}} or {{typeTwo}}.",invalidTimeZone:"{{elementType}}: Invalid timeZone value. TimeZone should be the id of an allowed timeZone value.",incorrectArgument:"{{elementType}}: Incorrect argument {{argumentName}} in method {{methodName}}.",exceptionExists:"{{elementType}}: Trying to add an exception via {{methodName}} that already exists. Cannot have duplicate exception of the same event on same date.",noId:"smartScheduler requires an id in order to save/load/clear a state.",agenda:"Agenda",agendaPlaceholder:"No events to display",day:"Day",week:"Week",month:"Month",allDay:"All Day",timelineDay:"Timeline Day",timelineWeek:"Timeline Week",timelineMonth:"Timeline Month",newEvent:"New Event",ok:"Ok",cancel:"Cancel",delete:"Delete",label:"Label",dateStart:"Start Date",dateEnd:"End Date",repeat:"Repeat",description:"Description",repeatFreq:"Repeat",repeatInterval:"Repeat Every",repeatOn:"Repeat On",repeatEnd:"End Repeat",repeatEndOption:"Never",repeatEndOnOption:"On",repeatEndAfterOption:"After",repeatEndAfter:"occurrence(s)",hidden:"Hidden",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly",repeatConfirm:"Do you want to edit only the current event or the whole series ?",repeatConfirmLabel:"Edit Repeating Event",create:"Create new",edit:"Edit",cut:"Cut",copy:"Copy",paste:"Paste",editEvent:"Edit event",editSeries:"Edit series",eventException:"Event Exception",collector:"more",repeatEveryHour:"hours",repeatEveryDay:"days",repeatEveryWeek:"weeks",repeatEveryMonth:"months",repeatEveryYear:"years",backgroundColor:"Background Color",status:"Status",resources:"Resources",selectPlaceholder:"Select...",none:"None",free:"Free",busy:"Busy",tentative:"Tentative",outOfOffice:"Out of Office",exceptions:"Exceptions",resetExceptions:"Reset Exceptions",notifications:"Notification(s)",notificationMessage:"is starting on",today:"Today",agendaShortcut:"A",dayShortcut:"D",weekShortcut:"W",monthShortcut:"M",timelineDayShortcut:"T+D",timelineWeekShortcut:"T+W",timelineMonthShortcut:"T+M",showWeekends:"Show weekends",beforeAt:"before at",days:"days",weeks:"weeks",placeholder:"Add notification",placeholderLink:"Add video conferencing",placeholderSetLink:"Set video conferencing link",invalidConferenceLink:"Invalid video conference link.",now:"Now",dateTabLabel:"DATE",timeTabLabel:"TIME",hours:"Hours",minutes:"Minutes",am:"am",pm:"pm",loadingIndicatorPlaceholder:"Loading...",duplicate:"Copy",deleteConfirm:"Do you want to delete only the current event or the whole repeating series ?",deleteConfirmLabel:"Delete Repeating Event",deleteConfirmEvent:"Delete Event",deleteConfirmSeries:"Delete Series",joinWith:"Join with {{value}}",join:"Join the meeting"}},type:"object"},minuteFormat:{value:"2-digit",allowedValues:["numeric","2-digit"],type:"string"},monthFormat:{value:"long",allowedValues:["2-digit","numeric","long","short","narrow"],type:"string"},mouseWheelStep:{value:50,type:"number"},nonworkingDays:{value:[],type:"array",validator:"_nonworkingDayValidator"},nonworkingHours:{value:[],type:"array",validator:"_nonworkingTimeValidator"},notificationInterval:{value:60,validator:"_currentTimeIndicatorIntervalValidator",type:"number"},resizeHandlesVisibility:{allowedValues:["auto","hidden","visible"],value:"auto",type:"string"},resizeInterval:{value:0,type:"number"},resources:{value:[],type:"any",reflectToAttribute:!1},restrictedDates:{value:[],type:"array",validator:"_datesValidator"},restricted:{value:[],type:"array"},restrictedHours:{value:[],type:"array",validator:"_nonworkingTimeValidator"},scrollButtonsPosition:{value:"near",allowedValues:["near","far","both"],type:"string"},shadeUntilCurrentTime:{value:!1,type:"boolean"},showLegend:{value:!1,type:"boolean"},sortBy:{value:null,type:"string?"},sortFunction:{value:null,type:"function?"},sortOrder:{allowedValues:["asc","desc","custom"],value:"asc",type:"string"},spinButtonsDelay:{value:80,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},statuses:{value:[{label:"None",value:void 0},{label:"Free",value:"free"},{label:"Tentative",value:"tentative"},{label:"Busy",value:"busy"},{label:"Out of Office",value:"outOfOffice"}],type:"array"},timelineHeaderFormatFunction:{value:null,type:"function?",reflectToAttribute:!1},timelineDayScale:{value:"hour",allowedValues:["hour","halfHour","quarterHour","tenMinutes","fiveMinutes"],type:"string"},timeRulerTicks:{value:!1,type:"boolean"},timeZone:{value:"local",type:"string",validator:"_timeZoneValidator"},timeZones:{value:[],type:"array",validator:"_timeZonesValidator"},tooltipDelay:{value:0,type:"number"},tooltipOffset:{value:[],type:"array"},undoRedoSteps:{value:100,type:"number"},view:{value:"day",type:"string",validator:"_viewValidator"},viewType:{allowedValues:["agenda","day","week","month","timelineDay","timelineWeek","timelineMonth"],defaultReflectToAttribute:!0,value:"day",type:"string",validator:"_viewTypeValidator"},views:{value:["day","week","month"],type:"array",validator:"_viewsValidator"},viewSelectorType:{allowedValues:["auto","tabs","menu"],value:"menu",type:"string"},viewStartDay:{value:"firstDayOfWeek",type:"string",allowedValues:["dateCurrent","firstDayOfWeek"]},weekdayFormat:{value:"short",allowedValues:["long","short","narrow"],type:"string"},yearFormat:{value:"numeric",allowedValues:["2-digit","numeric"],type:"string"},windowCustomizationFunction:{value:null,reflectToAttribute:!1,type:"function?"}}}template(){return'<div id="container" role="presentation">\n                    <div id="header" class="smart-scheduler-header" role="heading" aria-level="1">\n                        <div id="dateSelectorContainer" class="smart-scheduler-date-nav" role="presentation">\n                            <smart-button today id="todayDate" right-to-left="[[rightToLeft]]" class="smart-scheduler-nav"></smart-button>\n                            <smart-repeat-button prev id="previousDate" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]"\n                             aria-label="Previous date" class="smart-scheduler-nav"></smart-repeat-button>\n                             <smart-repeat-button next id="nextDate" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]"\n                              aria-label="Next date" class="smart-scheduler-nav"></smart-repeat-button>\n                            <smart-button current id="currentDate" right-to-left="[[rightToLeft]]" class="smart-scheduler-nav"></smart-button>\n                        </div>\n                        <div id="viewSelectorContainer" class="smart-scheduler-view-nav" role="presentation">\n                            <div id="viewItemsContainer" class="smart-scheduler-items-container" role="listbox" aria-label="View Items"></div>\n                            <smart-button id="viewItemsButton" class="smart-scheduler-view-items-button smart-visibility-hidden"\n                            aria-label="View Selector DropDown" right-to-left="[[rightToLeft]]"></smart-button>\n                        </div>\n                    </div>\n                    <div class="smart-scheduler-view-container" id="viewContent" role="presentation">\n                        <div id="timeline" class="smart-scheduler-view">\n                                <div id="timelineHeaderHorizontal" class="smart-scheduler-view-header-horizontal" role="rowgroup">\n                                    <div class="smart-scheduler-view-time-container" id="timelineViewCellsContainer" role="row">\n                                        <div class="smart-scheduler-view-label-container" id="timelineViewCellsLabelContainer" role="presentation"></div>\n                                        <div class="smart-scheduler-view-header-horizontal-content" id="timelineHeaderHorizontalContent" role="presentation">\n                                            <div class="smart-scheduler-view-details" role="row"></div>\n                                            <div class="smart-scheduler-view-time" role="row">\n                                                <div class="smart-scheduler-cells" role="presentation"></div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="smart-scheduler-view-all-day" id="timelineViewAllDay" role="row">\n                                        <div class="smart-scheduler-view-all-day-label-container" id="timelineAllDayLabelContainer" role="presentation">\n                                            <div class="smart-scheduler-view-all-day-label" id="timelineViewAllDaylabel" role="presentation"></div>\n                                            <div class="smart-scheduler-time-zone-container" id="timelineTimeZoneLabelContainer"></div>\n                                        </div>\n                                        <div class="smart-scheduler-view-all-day-content" id="timelineViewAllDayContent" role="presentation">\n                                            <div class="smart-scheduler-cells-container" id="timelineViewAllDayCellsContainer" role="row"></div>\n                                            <div class="smart-scheduler-events-container" id="allDayEventsContainer" role="menu"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div id="timelineHeaderVertical" class="smart-scheduler-view-header-vertical" role="rowgroup">\n                                    <div class="smart-scheduler-view-header-vertical-content" id="timelineHeaderVerticalContent" role="presentation">\n                                        <div class="smart-scheduler-view-time" role="row">\n                                            <div class="smart-scheduler-cells" role="presentation"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div id="timelineContainer" class="smart-scheduler-scrollable-container" role="rowgroup">\n                                    <div id="timelineContent" class="smart-scheduler-content" role="presentation">\n                                        <div id="timelineCellsContainer" class="smart-scheduler-cells-container" role="presentation"></div>\n                                        <div id="timelineEventsContainer" class="smart-scheduler-events-container" role="menu"></div>\n                                        <div id="timelineIndicatorsContainer" class="smart-scheduler-indicators-container" role="presentation"></div>\n                                    </div>\n                                </div>\n                        </div>\n                        <smart-scroll-bar wait id="verticalScrollBar" class="smart-scheduler-view-scroll-bar" orientation="vertical"\n                        right-to-left="[[rightToLeft]]" aria-controls="[[id]]" animation="[[animation]]"></smart-scroll-bar>\n                        <smart-scroll-bar wait id="horizontalScrollBar" class="smart-scheduler-view-scroll-bar"\n                        right-to-left="[[rightToLeft]]" aria-controls="[[id]]" animation="[[animation]]"></smart-scroll-bar>\n                    </div>\n                    <div id="footer" class="smart-scheduler-footer"></div>\n                    <smart-tooltip id="tooltip" class="smart-scheduler-tooltip" role="presentation" position="auto" arrow open-mode="manual"\n                        right-to-left="[[rightToLeft]]"  delay="[[tooltipDelay]]" offset="[[tooltipOffset]]"></smart-tooltip>\n                </div>'}static get listeners(){return{down:"_downHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.dragstart":"_dragStartHandler","container.click":"_containerClickHandler","container.contextmenu":"_containerContextMenuHandler","container.wheel":"_mouseWheelHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","verticalScrollBar.change":"_verticalScrollbarHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",move:"_moveHandler",dragover:"_dragoverHandler",drop:"_dropHandler",resize:"_resizeEventHandler","tooltip.open":"_tooltipVisibilityHandler","tooltip.opening":"_tooltipVisibilityHandler","tooltip.closing":"_tooltipVisibilityHandler","tooltip.close":"_tooltipVisibilityHandler","tooltip.change":"_tooltipChangeHandler","tooltip.click":"_tooltipClickHandler","tooltip.keydown":"_tooltipKeyDownHandler","tooltip.keyup":"_tooltipKeyUpHandler","tooltip.down":"_tooltipDownHandler","tooltip.contextmenu":"_tooltipContextMenuHandler","timeline.focus":"_timelineFocusHandler","timeline.focusin":"_timelineFocusHandler","timeline.focusout":"_timelineFocusHandler"}}static get styleUrls(){return["smart.scheduler.css"]}static get requires(){return{"Smart.Window":"smart.window.js","Smart.Calendar":"smart.calendar.js","Smart.Tooltip":"smart.tooltip.js"}}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;switch(e){case"contextMenuClipboardActions":{const a=i.$.tooltip;a.visible&&a.contains(i._contextList)&&i._getContextMenu(a.selector);break}case"dataSource":i._handleDataAdapter(),i._createEvents(),i._createTimeline(),i.closeWindow();break;case"disabled":case"unfocusable":i._setFocusable(),i._refreshEvents();break;case"disableSelection":i._handleCellSelection();break;case"disableContextMenu":case"disableDateMenu":case"disableEventMenu":case"disableViewMenu":i.$.tooltip.close();break;case"disableWindowEditor":i.closeWindow();break;case"currentTimeIndicator":case"shadeUntilCurrentTime":i._setCurrentTimeIndicators();break;case"eventRenderMode":case"maxEventsPerCell":i._refreshEvents();break;case"filter":case"filterable":case"filterMode":if("filter"===e){const a=i._legend;a&&i.$.container.contains(a)&&a.querySelectorAll(".smart-scheduler-legend-res-item").forEach(r=>{r.removeAttribute("unselected"),r.setAttribute("aria-selected",!0)}),delete i._eventsBetween,i._createTimeline()}else i._refreshTimelineEvents();break;case"autoHeightAllDayCells":case"firstDayOfWeek":case"viewStartDay":case"max":case"min":i._calendar&&(i._calendar[e]=n),i._createTimeline(),i._refreshDateNavButtons();break;case"hideAllDay":["day","week"].indexOf(i.viewType)>-1&&i._createTimeline();break;case"hideOtherMonthDays":i._refreshTimelineEvents();break;case"hideWeekend":case"hideNonworkingWeekdays":i._checkHideWekendItem(),i.viewType.toLowerCase().indexOf("day")<0&&i._createTimeline();break;case"hideViewMenuCheckableItems":case"views":i._refreshViewSelector();break;case"timeZone":i._events.forEach(a=>i._setEventTimeZone(a,t)),i._createTimeline();break;case"timeZones":case"sortBy":case"sortOrder":case"sortFunction":i._createTimeline();break;case"dateCurrent":case"groups":case"groupOrientation":case"hourStart":case"hourEnd":case"nonworkingDays":case"nonworkingHours":case"timelineDayScale":case"resources":case"rightToLeft":{const a=i.$.schedulerWindow;if([i.$.toast,i.$.tooltip,i._calendar,i._list,a,i.$.confirmSchedulerWindow].forEach(o=>o?o[e]=n:void 0),a&&a.opened){const o=a.querySelectorAll(".smart-element[event-editor]"),s=n?"left":"right";for(let l=0;l<o.length;l++){const d=o[l];d[e]=n,d.calendarButtonPosition?d.calendarButtonPosition=s:"none"!==d.dropDownButtonPosition&&(d.dropDownButtonPosition=s)}}"resources"===e&&i._setLegend(),i._createTimeline(),i._refreshDateSelector();break}case"undoRedoSteps":delete i._undoRedoHistory;break;case"view":i._handleViewSelection(),i._createTimeline(),i._refreshDateSelector(),i._scrollToView(),i.$.fireEvent("viewChange",{oldValue:t,value:n});break;case"viewSelectorType":i._setHeader();break;case"headerTemplate":i._setHeader(),i._createTimeline();break;case"footerTemplate":i._setFooter(),i._createTimeline();break;case"cellTemplate":case"groupTemplate":i._templates&&delete i._templates[e],i._createTimeline();break;case"hourFormat":case"minuteFormat":case"dayFormat":case"monthFormat":case"weekdayFormat":case"yearFormat":case"dateSelectorFormatFunction":case"timelineHeaderFormatFunction":case"messages":case"locale":{i._createTimeline(),i._setHeader(),i._calendar&&"locale"===e&&(i._calendar[e]=n);const a=i.$.schedulerWindow,r=i.$.confirmSchedulerWindow;if(a&&a.opened){const o=a._target;a.close(),i._openWindow(o.event,o.originalTarget)}else if(r&&r.opened){const o=r._target;r.close(),i._openWindow(o.event,o.originalTarget)}break}case"legendLocation":case"showLegend":i._setLegend(),i._createTimeline();break;case"restrictedDates":case"restrictedHours":delete i._eventsBetween,i._createTimeline();break;case"windowCustomizationFunction":{const a=i.$.schedulerWindow||i.$.confirmSchedulerWindow;if(!a)return;null===n?a.clear():a.opened&&i.windowCustomizationFunction(a,a===i.$.confirmSchedulerWindow?"confirm":"",i._cloneObject(a._target));break}}}attached(){const e=this;super.attached(),e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e.$.timeline,e.$.horizontalScrollBar,e.$.verticalScrollBar));const t=[e.$.schedulerWindow,e.$.confirmSchedulerWindow],n=e.$.tooltip;n.visible&&e.getShadowRootOrBody().appendChild(n);for(let i=0;i<t.length;i++){const a=t[i];if(a&&a.opened){const r=e.$schedulerWindow;e._handleModal(!0),r.listen("open",e._windowOpenHandler.bind(e)),r.listen("close",e._windowCloseHandler.bind(e)),r.listen("closing",e._windowClosingHandler.bind(e)),r.listen("click",e._windowClickHandler.bind(e)),r.listen("change",e._windowChangeHandler.bind(e)),r.listen("keydown",e._windowKeyDownHandler.bind(e)),a.hasAnimation&&a.listen("transitionend",e._windowTransitionendHandler.bind(e)),e.getShadowRootOrBody().appendChild(a)}}e.$.container.contains(e.$.toast)||e._checkNotifications(!0)}detached(){const e=this;super.detached(),e._scrollView&&(e._scrollView.unlisten(),e._scrollView.disableSwipeScroll=!1,delete e._scrollView),e._touchmoveInside=!1,delete e._dragDetails,Smart.Scheduler.schedulerStart===e&&(Smart.Scheduler.feedback.remove(),delete Smart.Scheduler.schedulerStart,delete Smart.Scheduler.hoveredCell,delete Smart.Scheduler.hoveredScheduler,delete Smart.Scheduler.feedback);const t=[e.$.schedulerWindow,e.$.confirmSchedulerWindow],n=e.$.tooltip;e.$.container.contains(n)||e.$.container.appendChild(n),e._removeToast();for(let i=0;i<t.length;i++){const a=t[i];if(e._handleModal(),a){a.remove();const r=a===e.$.schedulerWindow?e.$schedulerWindow:e.$confirmSchedulerWindow;r.unlisten("open"),r.unlisten("close"),r.unlisten("closing"),r.unlisten("click"),r.unlisten("change"),r.unlisten("keydown"),r.unlisten("transitionend")}}}ready(){this._customScrollView=!0,super.ready()}render(){const e=this,t=e.viewType.toLowerCase();0!==e.firstDayOfWeek&&t.indexOf("week")>-1&&e.dateCurrent&&e.dateCurrent.getDay()!==e.firstDayOfWeek&&(e.dateCurrent=e.dateCurrent.setDate(e.dateCurrent.getDate()-e.dateCurrent.getDay()-7+e.firstDayOfWeek)),e._isViewUpdated=!0,e._setViewType(e.view),delete e._isViewUpdated,e.hasAttribute("role")||e.setAttribute("role","grid"),window.rrule&&window.rrule.RRule||e.error(e.localize("missingReference",{elementType:e.nodeName.toLowerCase(),files:"rrule.min.js"})),e._rRule=window.rrule.RRule,Smart.Utilities.Core.isMobile&&(e._isMobile=!0,e.$.timeline.setAttribute("mobile","")),e._handleDataAdapter(),e._setFocusable(),e._setScrollBars(),e._setHeader(),e._setFooter(),e._createEvents(),e._createTimeline(),e.checkLicense(),super.render()}get events(){const e=this,t=e._events;return e.isReady&&t&&t.length?t.map(n=>e._cloneObject(n)):[]}addEvent(e){this.insertEvent(e)}containsEvent(e){return!!this._containsEvent(e)}clearState(){const e=this;e.id?window.localStorage.removeItem("smartScheduler"+e.id):e.warn(e.localize("noId"))}getState(){const e=this,t=e._events||[];return{dateCurrent:e.dateCurrent.toISOString(),dataSource:JSON.parse(JSON.stringify(t.map(n=>e._cloneObject(n,!0)))),timeZone:e.timeZone}}loadState(e){const t=this;if(!e){if(!t.id)return;e=JSON.parse(window.localStorage.getItem("smartScheduler"+t.id))}if(!e)return;let n=JSON.parse(JSON.stringify(e.dataSource)),i=new Date(e.dateCurrent),a=e.timeZone;i instanceof Date&&!isNaN(i.getTime())&&(t.set("dateCurrent",i),t._refreshDateSelector()),Array.isArray(n)&&(t.set("dataSource",n),t._createEvents(void 0,a),t._createTimeline())}saveState(e){const t=this;t.id?(e||(e=t.getState()),window.localStorage.setItem("smartScheduler"+t.id,JSON.stringify(e))):t.warn(t.localize("noId"))}createEvent(e,t,n,i,a,r=""){this.addEvent({label:e,value:t,id:t,dateStart:n,dateEnd:i,description:r,allDay:a})}insertEvent(e,t){const n=this,i=n._events;if(i.indexOf(e)>-1||n._containsEvent(e))return;const a=n._createEvents(Array.isArray(e)?e:[e])[0];if(!a)return;const r=n._cloneObject(a);n.$.fireEvent("itemChanging",{type:"inserting",item:r}).defaultPrevented||("number"==typeof t?i.splice(Math.max(0,Math.min(i.length,t)),0,a):i.push(a),n._isUpdating||(n._refreshTimelineEvents(),n._updateUndoRedo(void 0,n._cloneObject(a),"itemInsert"),n.$.fireEvent("itemInsert",{item:r}),n.$.fireEvent("itemChange",{type:"insert",item:r})))}updateEvent(e,t){const n=this,i=n._events;if(!(e="number"==typeof e&&i?i[e]:n._containsEvent(e)))return;const a=n._cloneObject(e);if(!n.$.fireEvent("itemChanging",{type:"updating",item:a}).defaultPrevented){for(let r in t)e[r]=t[r];e.dateStart=n._dateValidator(void 0,e.dateStart),e.dateEnd=n._dateValidator(void 0,e.dateEnd),e.dateEnd=new Date(Math.max(e.dateStart.getTime(),e.dateEnd.getTime())),n._isUpdating||(n._refreshTimelineEvents(),n.$.fireEvent("itemUpdate",{item:a}),n.$.fireEvent("itemChange",{type:"update",item:a}))}}removeEvent(e){const t=this,n=t._events;if(!(e="number"==typeof e&&n?n[e]:t._containsEvent(e)))return;const i=t._cloneObject(e);t.$.fireEvent("itemChanging",{type:"removing",item:i}).defaultPrevented||(n.splice(n.indexOf(e),1),t._isUpdating||(t._refreshTimelineEvents(),t._updateUndoRedo(t._cloneObject(e),void 0,"itemRemove"),t.$.fireEvent("itemRemove",{item:i}),t.$.fireEvent("itemChange",{type:"remove",item:i})))}getEventExceptions(e){const n=this._events;if(!(e="number"==typeof e&&n?n[e]:this._containsEvent(e))||!e.repeat)return[];const i=e.repeat.exceptions;return i&&i.length?i:[]}addEventException(e,t){const n=this,i=n._events;if(!(e="number"==typeof e&&i?i[e]:n._containsEvent(e))||!e.repeat)return[];if(!(t&&"object"==typeof t&&t.date instanceof Date))return;const a=t.date;let r=e.repeat.exceptions;r||(r=e.repeat.exceptions=[]),delete t.repeat;for(let o=0,s=r.length;o<s;o+=1)if(r[o].date.getTime()===a.getTime())return void n.error(n.localize("exceptionExists",{elementType:n.nodeName.toLowerCase(),elementMethod:"addEventException"}));n.$.fireEvent("itemChanging",{type:"exceptionInserting",item:n._cloneObject(e)}).defaultPrevented||(r.push(t),n._isUpdating||(n._refreshTimelineEvents(),n.$.fireEvent("itemChange",{type:"exceptionInsert",item:n._cloneObject(e)})))}updateEventException(e,t,n){const i=this,a=i._events;if(!(e="number"==typeof e&&a?a[e]:i._containsEvent(e))||!e.repeat||null==t||!n||"object"!=typeof n)return[];const r=e.repeat.exceptions;if(!r||!r.length)return[];let o;if("number"==typeof t&&(o=r.indexOf(t)),!o){const s=t instanceof Date?t:new Date(n.date);for(let l=0,d=r.length;l<d;l+=1){const c=r[l];if(l===t&&(o=c),c.id===t||c.date.getTime()===s.getTime()){o=c;break}}}if(o){if(i.$.fireEvent("itemChanging",{type:"exceptionUpdating",item:i._cloneObject(e)}).defaultPrevented)return;for(let s in n)"date"!==s&&"repeat"!==s&&"$"!==s&&(o[s]="dateStart"===s||"dateEnd"===s?i._dateValidator(void 0,n[s]):n[s]);if(o.dateEnd=new Date(Math.max(o.dateStart.getTime(),o.dateEnd.getTime())),i._isUpdating)return;i._refreshTimelineEvents(),i.$.fireEvent("itemChange",{type:"exceptionUpdate",item:i._cloneObject(e)})}}removeEventException(e,t){const n=this,i=n._events;if(!(e="number"==typeof e&&i?i[e]:n._containsEvent(e))||!e.repeat)return;const a=e.repeat.exceptions;if(!a||!a.length)return;let r=a.indexOf(t);if(r<0){const o=new Date(t);for(let s=0,l=a.length;s<l;s+=1){const d=a[s];if(s===t&&(r=s),d.id===t||d.date.getTime()===o.getTime()){r=s;break}}}if(r>-1){if(n.$.fireEvent("itemChanging",{type:"exceptionRemoving",item:n._cloneObject(e)}).defaultPrevented||(a.splice(r,1),a.length||delete e.repeat.exceptions,n._isUpdating))return;n._refreshTimelineEvents(),n.$.fireEvent("itemChange",{type:"exceptionRemove",item:n._cloneObject(e)})}}exportData(e,t){const n=this;if(!Smart.Utilities.DataExporter)return void n.error(n.localize("missingReference",{elementType:n.nodeName.toLowerCase(),methodName:"exportData",files:"smart.export.js"}));try{new JSZip}catch{return void n.error(n.localize("missingReference",{elementType:n.nodeName.toLowerCase(),methodName:"exportData",files:"jszip.min.js"}))}if("pdf"===e&&!window.pdfMake)return void n.error(n.localize("missingReference",{elementType:n.nodeName.toLowerCase(),methodName:"exportData",files:"pdfMake.min.js"}));const i=n._events;if(!i||!i.length)return;if("ical"===(e+"").toLowerCase())return n._exportToICal(t);const a=new Smart.Utilities.DataExporter({exportHeader:n.dataExport.header,pageOrientation:n.dataExport.pageOrientation,style:n.dataExport.style}),r=n._getExportRecord();let o={columns:[]};for(let l in r)o.columns.push({label:r[l],dataField:l});a.header=o,n._setExportStyles(a,e);let s=[];for(let l=0;l<i.length;l++)s.push(n._getExportRecord(i[l]));return a.exportData(s,e,n.dataExport.fileName,t)}getDataSource(){const e=this,t=e._events;return t&&t.length?JSON.parse(JSON.stringify(t.map(n=>e._cloneObject(n,!0)))):""}getResources(){const e=this.resources;return e&&e.length?JSON.parse(JSON.stringify(e)):""}print(){const e=this,t=e.dataExport.fileName;e.dataExport.fileName=null;const n=e.exportData("html"),i=window.open("","","width=800,height=500"),a=i.document.open(),r='<!DOCTYPE html><html><head><meta charset="utf-8" /><title>'+t+"</title></head><body>"+n+"</body></html>";try{a.write(r),a.close(),setTimeout(function(){i.print(),i.close()},100)}catch{}e.dataExport.fileName=t}refresh(e){const t=this;e?t.isRendered&&t._createTimeline():t._refresh()}beginUpdate(){const e=this;e._isUpdating||(e._isUpdating=!0,e.$.fireEvent("beginUpdate"))}endUpdate(){const e=this;e._isUpdating&&(e._refreshTimelineEvents(),e.$.fireEvent("endUpdate"))}addView(e,t,n,i,a,r){const o=this;o.views.push({label:t,type:e,value:n,hideWeekend:i,hideNonworkingWeekdays:a,additionalDays:r}),o._refreshViewSelector(),o.refresh()}setView(e){const t=this,n=t.view,i=t.views.find(a=>a.value&&a.value===e);e!==n&&(t.set("view",e),e=i?i.type:e,t._createTimeline(),t._refreshDateSelector(),t._checkHideWekendItem(),t._scrollToView(i),t._handleViewSelection(),t.$.fireEvent("viewChange",{oldValue:n,value:e}))}scrollToDate(e,t,n){const i=this;if(e instanceof Date)e=new Date(e);else{if(e instanceof HTMLElement&&(!e.classList.contains("smart-scheduler-cell")||!i.$.timeline.contains(e)))return;if("object"==typeof e){const a=new Date(i.dateCurrent);e.year=void 0!==e.year?e.year:a.getFullYear(),e.month=void 0!==e.month?e.month:a.getMonth(),e.date=void 0!==e.date?e.date:a.getDate(),e=new Date(e.year,e.month,e.date,e.hours,e.getMinutes)}else if("string"==typeof e){if(e.indexOf("Date")>=0){e=(e=e.replace("new Date(","").replace(")","")).split(", ");let a="";for(let r=0;r<e.length;r++)a+=e[r],r<2?a+="-":2===r?a+=" ":r<e.length-1&&(a+=":");e=a}e=new Date(e)}}e&&!isNaN(e.getTime())&&i._scrollTo(e,t,n)}scrollToEvent(e){const t=this,n=t._events;(e="number"==typeof e&&n?n[e]:t._containsEvent(e))&&t._scrollTo(e)}openNotification(e,t){const n=this;if(!(e+=""))return;n._setToast();const i=n.$.toast;if(i){if("object"==typeof t)for(let a in t)i[a]=t[a];n._appendToast(),i.open(e)}}closeNotifications(){this._checkNotifications(!0)}openWindow(e){const t=this;let n=e;if(void 0===e||"object"==typeof e){if(e=t._containsEvent(e))return void t._openWindow(e);e=new Date(t.dateCurrent)}else if("string"==typeof e){if(n=t._events.find(i=>i.id+""===e),n)return void t._openWindow(n);n||(n=new Date(e))}else if("number"==typeof e)return n=t._events[e],void(n&&t._openWindow(n));if(e instanceof Date){if(isNaN(e.getTime()))return;e={dateStart:new Date(t.dateCurrent)}}"object"!=typeof e||e.dateStart||(e.dateStart=new Date(t.dateCurrent)),(e=t._createEvents([e]))&&t._openWindow(e[0])}closeWindow(){const e=this.$.confirmSchedulerWindow,t=this.$.schedulerWindow;t&&(t.close(),delete t._target),e&&(e.close(),delete e._target)}occurrences(e,t=100){const n=this,i=n._events,a=n._rRule;if("number"==typeof e&&i)e=i[e];else{const o=n._containsEvent(e);o&&(e=o)}if(!e)return;const r=n._getEventRepeatOptions(e);return r?(t=parseInt(t),t=isNaN(t)?100:t,new a(r).all((o,s)=>!(!r.count&&s===t)).map(o=>new Date(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds()))):void 0}occurrencesBetween(e,t,n){const i=this,a=i._events,r=i._rRule;if("number"==typeof e&&a)e=a[e];else{const s=i._containsEvent(e);s&&(e=s)}if(!e||isNaN(new Date(t).getTime())||isNaN(new Date(n).getTime()))return;const o=i._getEventRepeatOptions(e);return o?(t=new Date(Math.min(t.getTime(),n.getTime())),n=new Date(Math.max(t.getTime(),n.getTime())),new r(o).between(new Date(Date.UTC(...i._getDateArgs(t))),new Date(Date.UTC(...i._getDateArgs(n))),!0).map(s=>new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds()))):void 0}occurrenceAfter(e,t){return this._occurrence(e,t,"after")}occurrenceBefore(e,t){return this._occurrence(e,t,"before")}getCellDateRange(e){if(e&&this.$.timelineCellsContainer.contains(e)&&e.classList.contains("smart-scheduler-cell"))return e.classList.contains("scale")&&(e=e.children[0]),this._getCellDateRange(e)}undo(e){return this._handleUndoRedo("undo",e)}redo(e){return this._handleUndoRedo("redo",e)}deleteUndoRedoHistory(){this._updateUndoRedo()}canUndo(){return this._isUndoPossible()}canRedo(){return this._isRedoPossible()}_occurrence(e,t,n){const i=this,a=i._rRule;if(!a||!e||isNaN(new Date(t).getTime()))return;const r=i._getEventRepeatOptions(e);if(!r)return;const o=new a(r)[n](new Date(Date.UTC(...i._getDateArgs(t))),!0);return o?new Date(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds()):void 0}openEventTooltip(e){const t=this,n=t.$.tooltip,i=t._events;if((e="number"==typeof e&&i?i[e]:t._containsEvent(e))&&n){const a=t.$.timeline.querySelectorAll(".smart-scheduler-event");for(let r=0;r<a.length;r++){const o=a[r].$?[a[r]]:void 0;if(o&&o.some(s=>{const l=s.$?s.$.event:void 0;return l&&(l===e||l.$&&l.$.event===e)})){delete t._openEventMenu,t._handleTooltipContent(o[0]);break}}}}closeEventTooltip(){const e=this.$.tooltip;e.visible&&e.contains(this._eventList)&&e.close()}isEventRestricted(e){return e&&e.classList&&e.classList.contains("smart-scheduler-event")&&(e=e.$?e.$.event:void 0),!!(e&&e.dateStart instanceof Date&&e.dateEnd instanceof Date)&&this._isEventRestricted(e)}isDateRestricted(e){return e&&e.classList&&e.classList.contains("smart-scheduler-cell")&&(e=e.$&&e.$.cellObj?new Date(e.$.cellObj.time):void 0),!(!e||void 0===e.getTime||isNaN(e.getTime()))&&this._isDateRestricted(e)}isHourRestricted(e){return e&&e.classList&&e.classList.contains("smart-scheduler-cell")&&(e=e.$&&e.$.cellObj?new Date(e.$.cellObj.time):void 0),this._isHourRestricted(e)}_checkDoubleClick(e){const t=this;if(void 0===t._dblClickDetails&&(t._dblClickDetails={clicks:0}),clearTimeout(t._dblClickDetails.timeOut),e!==t._dblClickDetails.target&&(t._dblClickDetails.clicks=0),t._dblClickDetails.target=e,t._dblClickDetails.clicks++,t._dblClickDetails.timeOut=setTimeout(function(){t._dblClickDetails&&(t._dblClickDetails.clicks=0),t._openEventMenu&&(t._handleTooltipContent(t._openEventMenu),delete t._openEventMenu)},250),2===t._dblClickDetails.clicks)return t._doubleClickHandler(e),t._dblClickDetails.clicks=0,delete t._openEventMenu,!0}_cloneObject(e,t,n){const i=this;let a={};for(let r in e){let o=e[r];if(o instanceof Date)a[r]=t?o.toISOString():new Date(o);else if("repeat"===r){if(a[r]=Object.assign({},o),a[r].exceptions){const s=a[r].exceptions=a[r].exceptions.slice();for(let l=0;l<s.length;l++)s[l]=i._cloneObject(s[l])}}else a[r]=o}return n||(delete a.$,a.repeat&&a.repeat.exceptions&&a.repeat.exceptions.forEach(r=>delete r.$)),a}_doubleClickHandler(e){const t=this;if(t.disabled||t.disableWindowEditor)return;const n=t.$.tooltip;let i=e.closest?e.closest(".smart-scheduler-cell:not(.scale)"):void 0;if(t.$.timelineContainer.contains(i)||t.$.timelineViewAllDay.contains(i))t._openWindow();else if(i=e.classList.contains("smart-scheduler-event")?e:e.closest(".smart-scheduler-event-content"),i&&(t.$.timeline.contains(i)||n.contains(i))){i=i.closest(".smart-scheduler-event");let a=i&&i.$?i.$:void 0;if(!a||a.events)return;a=a.event;const r=a.$?a.$.event:void 0,o=r&&r.repeat?r.repeat.exceptions:void 0;let s;if(o&&o.indexOf(a)>-1)s=a;else{const l=i.$;s=r?Object.assign({},a,{dateStart:l.dateStart,dateEnd:l.dateEnd}):a}n.close(),t._openWindow(s,r?i:void 0)}}_createEventFromSelection(e){const t=this;if(e||(e=t._selectedCellObj),e instanceof HTMLElement&&e.$&&(e={from:e.$.cellObj,to:e.$.cellObj}),!e||!e.from)return;const n=e.from,i=e.to;if(t.hideOtherMonthDays&&new Date(n.time).getMonth()!==new Date(t.dateCurrent).getMonth())return;const a=new Date(Math.min(n.time,i.time)),r=new Date(Math.max(n.time,i.time)),o=n.horizontal.group||n.vertical.group;!n.allDay&&t.viewType.toLowerCase().indexOf("month")<0?r.setHours(r.getHours(),r.getMinutes()+60/t._getCellsScaleCount(),0,0):r.setHours(23,59,59,999);const s={allDay:!!n.allDay,dateStart:a,dateEnd:r};if(o)for(let l in o)s[l]=o[l];return t._isEventRestricted(s)?void 0:s}_downHandler(e){const t=this,n=t.$.tooltip,i=e.originalEvent;let a=t.shadowRoot||t.isInShadowDOM?i.composedPath()[0]:i.target;if(e.stopPropagation(),0===e.button&&n.contains(t._contextList)&&a&&a.closest&&!a.closest(".smart-scheduler-nav[current]")&&!a.closest(".smart-scheduler-view-items-button")&&!n.contains(a)&&n.close(),t._dragDetails)return t._endDrag(),t._endResize(),delete t._dragDetails,clearInterval(t._scrollInterval),void delete t._scrollInterval;if(!t.$.timeline.contains(a)&&!t.$.tooltip.contains(a)||(t._isMobile&&(t.$.timelineContent.classList.add("hide-overlay"),a=(t.shadowRoot||document).elementFromPoint(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset),t.$.timelineContent.classList.remove("hide-overlay")),!a||!a.closest))return;t._dragDetails={target:a,button:e.button,timestamp:Date.now()};const r=a.closest(".smart-scheduler-cell:not(.scale)");if(r&&r.$&&(t.$.timelineContainer.contains(r)||t.$.timelineViewAllDay.contains(r))){const s=r.$.cellObj;if(!s||(t._dragDetails.timelineCellObj=Object.assign({},s),0===e.button&&t._checkDoubleClick(a))||t._isMobile)return;if(0===e.button&&e.shiftKey&&t._selectedCellObj)t._handleCellSelection(t._selectedCellObj.from,s);else{if(0!==e.button&&t._isCellObjSelected(s))return;t._handleCellSelection(s)}return void(t._dragDetails.selectedCellObj=Object.assign({},t._selectedCellObj))}const o=a.closest(".smart-scheduler-event");if(o){if(0===e.button&&t._checkDoubleClick(a))return;t._dragDetails.schedulerEvent=o,t._dragDetails.coordinates={x:e.pageX,y:e.pageY},t._dragDetails.originialEvent=e,("visible"===t.resizeHandlesVisibility||t._isMobile&&"auto"===t.resizeHandlesVisibility)&&t._checkEventResizability(e)}}_dropHandler(e){const t=this,n=Smart.Scheduler.hoveredScheduler,i=Smart.Scheduler.hoveredCell,a=document.body;delete Smart.Scheduler.hoveredScheduler,delete Smart.Scheduler.hoveredCell,delete Smart.Scheduler.schedulerStart,delete Smart.Scheduler.feedback,n&&(n.removeAttribute("dragged"),clearInterval(n._scrollInterval),delete n._scrollInterval,i&&i.classList.remove("smart-scheduler-feedback")),i&&t.$.fireEvent("dropoverCell",{target:e.target,allDay:i.hasAttribute("all-day"),date:i.getAttribute("date")}),a.classList.remove("smart-dragging"),a.classList.remove("smart-dragging-disabled"),t._scrollView.disableSwipeScroll=t._touchmoveInside=!1,t._list&&(t._list.disableSwipeScroll=t._list._touchmoveInside=!1),delete t._dragDetails}_dragoverHandler(e){this._setDropTarget(e)}_documentMoveHandler(e){const t=this,n=e.originalEvent,i=t._dragDetails,a=Smart.Scheduler.schedulerStart;let r=t.shadowRoot||t.isInShadowDOM?n.composedPath()[0]:n.target;if(a)t._setDropTarget(e);else if(!i)return void t._checkEventResizability(e);if(i&&0===i.button)if(t.$.timeline.getAttribute("event-hovered"))t._handleEventResize(e);else if(t.disableDrag||!i.schedulerEvent||a){if(a===t){const o=t.dragOffset,s=Smart.Scheduler.feedback;return s?(s.parentElement||document.body.appendChild(s),s.style.left=t.rightToLeft?e.pageX-o[0]-s.offsetWidth+"px":e.pageX+o[0]+"px",void(s.style.top=e.pageY+o[1]+"px")):void 0}if(t._isMobile){const o=t.$.tooltip;a===t&&o.visible&&o.close()}else if(!t.disableSelection&&"agenda"!==t.viewType&&!e.shiftKey){Smart.Utilities.Core.Browser.Firefox&&(r=(t.shadowRoot||document).elementFromPoint(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset));const o=i.timelineCellObj,s=t.$.timeline.contains(r)?r.closest(".smart-scheduler-cell:not(.scale)"):void 0;o&&s&&t._selectCell(o,s)}}else t._setDragStart(e)}_documentUpHandler(e){const t=this,n=e.originalEvent,i=t._dragDetails,a=n.pageX-window.pageXOffset,r=n.pageY-window.pageYOffset;let o=t.shadowRoot||t.isInShadowDOM?n.composedPath()[0]:n.target;if(t._isMobile&&(t.$.timelineContent.classList.add("hide-overlay"),o=(t.shadowRoot||document).elementFromPoint(a,r),t.$.timelineContent.classList.remove("hide-overlay")),t._upHandler(),clearInterval(t._scrollInterval),delete t._scrollInterval,i&&Smart.Scheduler.schedulerStart)return void t._endDrag(e,o);if(i&&t.hasAttribute("resized"))return void t._endResize(e);const s=t.$.tooltip;if(!s.visible||s.contains(o)||(t.shadowRoot||t).contains(o)||s.close(),o&&o.closest){if(!i){const l=t.$.schedulerWindow;return void(t.contains(o)&&o.classList.contains("smart-scheduler-window-modal")&&l&&l.focus())}{const l=o.closest(".smart-scheduler-event");if(i.schedulerEvent===l){t._handleCellSelection(),t.$.fireEvent("itemClick",{item:l,type:"event",itemObj:t._cloneObject(l.$.event)});const d=!t._isMobile||Date.now()-i.timestamp<250;!s.contains(o)&&d&&0===i.button&&(t._dblClickDetails&&0===t._dblClickDetails.clicks?(t._handleTooltipContent(l),delete t._openEventMenu):t.disableEventMenu?delete t._openEventMenu:t._openEventMenu=l)}else{delete t._openEventMenu;const d=s.selector;0!==i.button||e.shiftKey&&t._selectedCellObj||s.contains(o)&&d&&d.classList.contains("smart-scheduler-cell")||t._handleCellSelection(i.timelineCellObj,o)}}}delete t._dragDetails}_handleDataAdapter(){const e=this;if(e.dataSource&&e.dataSource instanceof Smart.DataAdapter){const t=e.querySelector(".smart-loader-container");if(t&&t.remove(),e.dataSource.url){const n=document.createElement("div");n.classList.add("smart-loader-container","smart-scheduler-loading-container"),n.innerHTML=`<span id='loadingIndicator' class='smart-scheduler-loader smart-loader'></span>\n                <span id='loadingIndicatorPlaceholder' class ='smart-loader-label'>${e.localize("loadingIndicatorPlaceholder")}</span>`,e.appendChild(n)}e.dataSource.notify(function(n){if(e.dataSource._updating)return;const i=e.querySelector(".smart-loader-container");i&&i.remove();let a=n.data,r=n.index;switch(n.action){case"add":case"insert":a=e._parseAdapterData(a.length?a:[a]),e.insertEvent(a,r);break;case"update":a=e._parseAdapterData(a.length?a:[a]),e.updateEvent(r,a);break;case"remove":case"removeLast":e.removeEvent(void 0!==r?r:e._events.length-1);break;case"bindingComplete":e.dataSource.canNotify=!1,e.dataSource.dataSource=e._parseAdapterData(e.dataSource.toArray()).filter(o=>void 0!==o),e.dataSource.canNotify=!0,e._createEvents(),e._createTimeline(),e.closeWindow()}})}}_parseAdapterData(e){const t=this,n=["month","agenda"].indexOf(t.viewType.toLowerCase())>-1;Array.isArray(e)||(e=Array.from(e));for(let i=0;i<e.length;i++){const a=e[i],r=a.dateStart,o=a.dateEnd;let s=[];if(!n&&r instanceof Date&&o instanceof Date&&o.getTime()-r.getTime()>=864e5&&(a.allDay=!0),a.rrule&&t._parseIcalRrule(a),a.extdate){let l=a.extdate;l.indexOf("EXDATE:")>=0&&(l=l.substring(l.indexOf("EXDATE:")+7)),l.indexOf(",")>=0?s=l.split(","):s.push(l)}if(a.reccurenceId){const l=e.find(d=>d.uid===a.uid&&!d.reccurenceId);if(!l)continue;t._parseICalReccurenceId(a,l,s),e[i]=void 0}a.alarm&&t._parseICalAlarm(a),a.categories&&t._parseICalCategories(a)}return e}_parseIcalRrule(e){const t=this,n=t._rRule;if(!n)return;const i=n.parseString(e.rrule);let a;if(i){let r;switch(n.FREQUENCIES[i.freq].toLowerCase()){case"weekly":void 0!==i.byweekday&&(r=(Array.isArray(i.byweekday)?i.byweekday:Array.from(i.byweekday)).map(o=>(o.weekday+1+7)%7));break;case"monthly":void 0!==i.bymonthday&&(r=i.bymonthday);break;case"yearly":void 0!==i.bymonth&&void 0!==i.bymonthday&&(r={month:i.bymonth-1,date:i.bymonthday})}e.repeat={repeatFreq:n.FREQUENCIES[i.freq].toLowerCase(),repeatInterval:i.interval,repeatOn:r},i.until instanceof Date?a=new Date(Date.UTC(...t._getUTCDateArgs(i.until))):"number"==typeof i.count&&(a=i.count),void 0!==a&&(e.repeat.repeatEnd=a)}}_parseICalReccurenceId(e,t,n){const i=e.reccurenceId;if(!e)return;const a=this._cloneObject(e);delete a.repeat,a.date=(r=>{let o;r.indexOf("VALUE=DATE:")>-1&&(r=r.replace("VALUE=DATE:",""),o=!0);const s=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(r);if(!s)throw new Error("Invalid DATE value: "+r);return o?new Date(s[1],s[2]-1,s[3],0,0,0,0):new Date(Date.UTC(s[1],s[2]-1,s[3],s[5]||0,s[6]||0,s[7]||0))})(i),n.indexOf(a.date)>-1&&(a.hidden=!0),t.repeat&&(t.repeat.exceptions||(t.repeat.exceptions=[]),t.repeat.exceptions.push(a))}_parseICalAlarm(e){if(!e)return;const t=JSON.parse(e.alarm),n=e.dateStart.getTime();if(Array.isArray(t)){let i=[],a=/^(-)?P(\d+)DT(\d{1,2})H(\d{1,2})M(\d{1,2})S$/;for(let r=0;r<t.length;r++){const o=t[r],s=o.TRIGGER;if(a.test(s)){const l=a.exec(s);if(!l)continue;let d,c=parseInt(l[2]),u="-"===l[1]?-1:1,m=new Date(n);m.setDate(m.getDate()+u*c),m=new Date(m.getTime()+u*(1e3*(l[3]||0)*60*60+1e3*(l[4]||0)*60+1e3*(l[5]||0))),c>28?(c=Math.round(c/7),d="weeks"):d="days",i.push({interval:c,type:d,time:[m.getHours(),m.getMinutes()],message:o.description||""})}}delete e.alarm,e.notifications=i}}_parseICalCategories(e){e&&(e.categories.split(",").forEach(t=>{const n=t.split("/");void 0!==n[1]&&(e[n[0]]=parseInt(n[1]))}),delete e.categories)}_exportToICal(e){const t=this,n=t.id,i=t._rRule,a=t.resources,r=t._getUTCDate(new Date),o=t._events;let s=`BEGIN:VCALENDAR\r\nPRODID:-//HTMLElements//Smart Scheduler//EN\r\nVERSION:2.0\r\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\r\nX-WR-CALNAME:${n}\r\nX-WR-TIMEZONE:${t.timeZone}\r\n`;for(let d=0;d<o.length;d++){const c=o[d],u=t._getEventRepeatOptions(c,!0),m=a.filter(f=>c[f.value]),y=c.status,b=c.id?c.id:n+Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(s+="BEGIN:VEVENT\r\n",s+=t._getICalEventDates(c),s+=`DTSTAMP:${r}\r\nUID:${b}\r\nCREATED:${r}\r\nDESCRIPTION:${c.description||""}\r\nTRANSP:${y&&"free"!==y?"OPAQUE":"TRANSPARENT"}\r\nSEQUENCE:0\r\nSTATUS:${t._getICalStatus(c.status)}\r\nSUMMARY:${c.label||""}\r\n`,m.length&&(s+=`CATEGORIES:${m.map(f=>`${f.value}/${c[f.value]}`).toString()}\r\n`),s+=t._getICalNotifications(c),u){const f=c.repeat.exceptions;if(delete u.dtstart,s+=new i(u).toString()+"\r\n",f&&f.length){for(let w=0;w<f.length;w++){const v=f[w];v.hidden&&(s+=`EXDATE;VALUE=DATE:${t._getUTCDate(v.date,c.allDay)}\r\n`)}s+="END:VEVENT\r\n";for(let w=0;w<f.length;w++){const v=f[w];if(!v.hidden&&v.dateStart&&v.dateEnd){const S=a.filter(_=>v[_.vlaue]);s+="BEGIN:VEVENT\r\n",s+=t._getICalEventDates(v),s+=`DTSTAMP:${r}\r\nUID:${b}\r\nRECURRENCE-ID${c.allDay?";VALUE=DATE":""}:${t._getUTCDate(v.date,c.allDay)}\r\nCREATED:${r}\r\nDESCRIPTION:${v.description||""}\r\nSEQUENCE:1\r\nSTATUS:${t._getICalStatus(v.status)}\r\nSUMMARY:${v.label||""}\r\n`,S.length&&(s+=`CATEGORIES:${S.map(_=>`${_.value}/${v[_.value]}`).toString()}\r\n`),s+="END:VEVENT\r\n"}}continue}}s+="END:VEVENT\r\n"}s+="END:VCALENDAR";const l=(new Smart.Utilities.DataExporter).downloadFile(s,"text/calendar",t.dataExport.fileName);return e&&l&&e(l),l}_getICalEventDates(e){const t=this;if(!e.dateStart||!e.dateEnd)return"";if(e.allDay||e.$&&e.$.event.allDay){const n=new Date(e.dateEnd);return n.setDate(n.getDate()+1),`DTSTART;VALUE=DATE:${t._getUTCDate(e.dateStart,!0)}\r\nDTEND;VALUE=DATE:${t._getUTCDate(n,!0)}\r\n`}return`DTSTART:${t._getUTCDate(e.dateStart)}\r\nDTEND:${t._getUTCDate(e.dateEnd)}\r\n`}_getICalNotifications(e){let t="";if(!e)return t;const n=e.notifications;if(n&&n.length){const i=e.dateStart.getTime();for(let a=0;a<n.length;a++){const r=n[a],s=r.time,l=new Date(i-24*("days"===r.type||0===r.type?r.interval:7*r.interval)*60*60*1e3);l.setHours(s[0]%23,s[1]%60,0,0);let d=l.getTime()-i;const c=d<0?"-":"";d=Math.abs(d);const u=Math.max(0,Math.floor(d/864e5));d-=1e3*u*60*60*24;const m=Math.max(0,Math.floor(d/36e5));d-=1e3*m*60*60;const y=Math.max(0,Math.floor(d/6e4));t+=`BEGIN:VALARM\r\nACTION:DISPLAY\r\nDESCRIPTION:${r.message}\r\nTRIGGER:${c}P${u}DT${m}H${y}M0S\r\nEND:VALARM\r\n`}}return t}_getUTCDate(e,t){function n(i){return i<10?`0${i}`:`${i}`}return e instanceof Date||(e=new Date(e)),t?`${e.getFullYear()}${e.getMonth()+1}${e.getDate()}`:`${e.getUTCFullYear()}${n(e.getUTCMonth()+1)}${n(e.getUTCDate())}T${n(e.getUTCHours())}${n(e.getUTCMinutes())}${n(e.getUTCSeconds())}Z`}_getICalStatus(e){switch(e){case"tentative":return"TENTATIVE";case"canceled":return"CANCELED";case"draft":return"DRAFT";case"final":return"FINAL";case"in-process":return"IN-PROCESS";case"needs-action":return"NEEDS-ACTION";default:return"CONFIRMED"}}_setDropTarget(e){const t=this,n=e.originalEvent?e.originalEvent:e;let i,a=t.shadowRoot||t.isInShadowDOM?n.composedPath()[0]:n.target,r=Smart.Scheduler.hoveredCell,o=Smart.Scheduler.hoveredScheduler;if((t.shadowRoot||t).contains(a)&&(o&&o!==t&&(o.removeAttribute("dragged"),clearInterval(o._scrollInterval),delete o._scrollInterval),Smart.Scheduler.hoveredScheduler=o=t,t.setAttribute("dragged","")),t._isMobile&&o&&(o.$.timelineContent.classList.add("hide-overlay"),a=(t.shadowRoot||document).elementFromPoint(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset),o.$.timelineContent.classList.remove("hide-overlay")),a&&a.closest&&!a.closest(".smart-scheduler-groups-container")&&(i=a.closest(".smart-scheduler-cell:not(.scale)")),i&&i!==r&&(t.shadowRoot||t).contains(i)){const s=document.body;r&&r.classList.remove("smart-scheduler-feedback"),t.disableDrop&&delete Smart.Scheduler.hoveredCell,Smart.Scheduler.hoveredCell=i,i.hasAttribute("restricted")?(s.classList.remove("smart-dragging"),s.classList.add("smart-dragging-disabled")):(i.classList.add("smart-scheduler-feedback"),s.classList.remove("smart-dragging-disabled"),s.classList.add("smart-dragging")),Smart.Scheduler.hoveredScheduler=o=t}else i||(o!==t||t.$.container.contains(a)||(t.removeAttribute("dragged"),clearInterval(t._scrollInterval),delete t._scrollInterval,delete Smart.Scheduler.hoveredScheduler),r&&(r.classList.remove("smart-scheduler-feedback"),delete Smart.Scheduler.hoveredCell));o&&o._autoScroll(n)}_setDragStart(e){const t=this,n=t.$.tooltip,i=t._dragDetails;let a=!0;if(t._isMobile&&(a=Date.now()-i.timestamp>=250,n.contains(i.schedulerEvent)&&t._list?t._list.disableSwipeScroll=t._list._touchmoveInside=a:t._scrollView.disableSwipeScroll=t._touchmoveInside=a),!a||Math.abs(e.pageX-i.coordinates.x)<5&&Math.abs(e.pageY-i.coordinates.y)<5||i.schedulerEvent.hasAttribute("collector")||"agenda"===t.viewType||i.resizeDetails)return;const r=i.schedulerEvent.$.event;if(!r||r.disableDrag)return;const o=t._cloneObject(r);if(t.$.fireEvent("dragStart",{target:i.schedulerEvent,item:o,itemDateRange:{dateStart:new Date(o.dateStart),dateEnd:new Date(o.dateEnd)},originalEvent:i.originialEvent}).defaultPrevented)return;i.originalBodyOverflow={overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY,overflow:document.body.style.overflow};const s=(document.scrollingElement||document.documentElement).scrollHeight>document.documentElement.clientHeight,l=(document.scrollingElement||document.documentElement).scrollWidth>document.documentElement.clientWidth;document.body.style.overflow=document.body.style.overflowX=document.body.style.overflowY="",s&&!l?document.body.style.overflowX="hidden":l&&!s?document.body.style.overflowY="hidden":l||s||(document.body.style.overflow="hidden"),n.contains(i.schedulerEvent)&&t._list&&(t._list.disableSwipeScroll=t._list._touchmoveInside=!0),n.close(),Smart.Scheduler.schedulerStart=t,Smart.Scheduler.feedback=t._createDragFeedback(o),t._dragDetails.schedulerEventObj=o,t._scrollView.disableSwipeScroll=t._touchmoveInside=!0,t.setAttribute("dragged",""),document.body.classList.add("smart-dragging")}_endDrag(e,t){const n=this;if(!Smart.Scheduler.schedulerStart)return;const i=n._dragDetails,a=Smart.Scheduler.schedulerStart,r=Smart.Scheduler.schedulerStart._dragDetails.schedulerEvent,o=Smart.Scheduler.schedulerStart._dragDetails.schedulerEventObj,s=Smart.Scheduler.hoveredScheduler,l=Smart.Scheduler.hoveredCell,d=document.body;if(a!==n)return;let c={};if(Smart.Scheduler.feedback.remove(),delete Smart.Scheduler.hoveredScheduler,delete Smart.Scheduler.hoveredCell,delete Smart.Scheduler.schedulerStart,delete Smart.Scheduler.feedback,i.originalBodyOverflow&&(d.style.overflow=i.originalBodyOverflow.overflow,d.style.overflowX=i.originalBodyOverflow.overflowX,d.style.overflowY=i.originalBodyOverflow.overflowY),s&&(s.removeAttribute("dragged"),clearInterval(s._scrollInterval),delete s._scrollInterval,l)){const m={event:e,schedulerEvent:r,hoveredCell:l,hoveredScheduler:s,schedulerEventObj:o};l.classList.remove("smart-scheduler-feedback"),n._setEventDropDates(m),n._completeEventDragDrop(m),c.dateStart=m.newDateStart,c.dateEnd=m.newDateEnd,i.schedulerEventObj=m.schedulerEventObj}e&&(n.$.fireEvent("dragEnd",{target:t,item:i.schedulerEventObj,itemDateRange:c,originalEvent:e}),n.$.fireEvent("itemChange",{type:"drag",item:i.schedulerEventObj})),d.classList.remove("smart-dragging"),d.classList.remove("smart-dragging-disabled"),a.removeAttribute("dragged"),n._scrollView.disableSwipeScroll=n._touchmoveInside=!1,n._list&&(n._list.disableSwipeScroll=n._list._touchmoveInside=!1);const u=n._handleEventFocus({type:"focusin",target:r});u&&u.focus({preventScroll:!0}),delete n._dragDetails}_endResize(e){const t=this,n=t._dragDetails,i=n?n.resizeDetails:void 0;if(t.removeAttribute("resized"),!n||!i)return;const a=n.schedulerEvent;let r={};a.removeAttribute("resized"),e?(t._setEventResizeDates(r),t._completeEventResize(r),i.schedulerEventObj.dateStart=r.dateStart,i.schedulerEventObj.dateEnd=r.dateEnd,t.$.fireEvent("resizeEnd",{target:n.schedulerEvent,item:i.schedulerEventObj,itemDateRange:r,originalEvent:e.originialEvent||e}),t.$.fireEvent("itemChange",{type:"resize",item:i.schedulerEventObj})):(a.style.left=i.originalPosition.x+"px",a.style.top=i.originalPosition.y+"px",a.style.width=i.originalSize.width+"px",a.style.height=i.originalSize.height+"px"),t._scrollView.disableSwipeScroll=t._touchmoveInside=!1,delete t._dragDetails,t._handleEventHover(),t._refreshTimelineEvents(),a.focus({preventScroll:!0}),t._handleEventFocus({type:"focusin",target:a})}_completeEventResize(e){const t=this,n=t._dragDetails,i=n.resizeDetails,r=e.dateStart,o=e.dateEnd;if(!(i.cellObj&&e&&r&&o))return;const s=n.schedulerEvent;let l=s.$.event;if(!s||!l||i.otherMonthDate||l.dateStart.getTime()===r.getTime()&&l.dateEnd.getTime()===o.getTime()||t._isEventRestricted({dateStart:r,dateEnd:o}))return;const d=l.$&&l.$.event?l.$.event:void 0;let c;d?(c=t._cloneObject(d),t._handleEventExceptionDrop(l)):c=t._cloneObject(l);const u=l.dateStart.getTime()!==r.getTime();l.dateStart=new Date(r),l.dateEnd=new Date(o),["day","week"].indexOf(t.viewType)>-1&&l.allDay&&!i.isAllDay&&delete l.allDay,u&&(s.$.cellTime=r.getTime()),t._validateEventDateRange(l),t._updateUndoRedo(c,t._cloneObject(d||l),"resizeEnd")}_setEventResizeDates(e){const t=this,n=t._dragDetails,i=n.resizeDetails,a=i.cellObj;if(!a)return;const r=i.side,o=n.schedulerEvent,[s,l]="left"===r||"right"===r?["x","width"]:["y","height"];let d=o.$.event;if(!i.resizeFromMiddle&&i.originalPosition[s]===i.position[s]&&i.originalSize[l]===i.size[l])return e.dateStart=new Date(d.dateStart),void(e.dateEnd=new Date(d.dateEnd));const c=t.viewType,u=t.rightToLeft,m=60/t._getCellsScaleCount(),y=a.date,b=i.scaleIndex||0;let f,w;if("top"===r)w="dateStart",f=new Date(d.dateStart),f.setHours(y.getHours(),y.getMinutes()+m*b,0,0);else if("bottom"===r)w="dateEnd",f=new Date(d.dateEnd),f.setHours(y.getHours(),y.getMinutes()+m*(b+1),0,0);else{w="left"===r&&!u||"right"===r&&u?"dateStart":"dateEnd";const v=d[w];if("month"===c){const S=t._getCellObjOffset(o,i.position,"dateStart"===w?"bottom":"top").cellObj;f=new Date(v);const _=f.getHours(),T=f.getMinutes(),z="dateEnd"===w&&0===_&&0===T;f=new Date(S.date),f.setDate(f.getDate()+(y.getDay()-t.firstDayOfWeek+7)%7),z?f.setDate(f.getDate()+1):f.setHours(v.getHours(),v.getMinutes(),v.getSeconds())}else if(f=new Date(y),"timelineMonth"===c)"dateEnd"===w&&0===f.getHours()&&0===f.getMinutes()?(f.setDate(f.getDate()+1),f.setHours(0,0,0,0)):f.setHours(v.getHours(),v.getMinutes(),v.getSeconds());else if(["day","week"].indexOf(c)>-1&&i.isAllDay)f=new Date(y),"dateEnd"===w&&f.setHours(23,59,59,999);else{const S=t.view,_=t.views.find(T=>T.value&&T.value===S)||{};"timelineWeek"===c&&_&&_.hideHours?"dateEnd"===w?f.setHours(23,59,59,999):f.setHours(0,0,0,0):f.setMinutes(y.getMinutes()+m*(b+("dateStart"===w?0:1)),0,0)}}"dateStart"===w?(e.dateStart=f,e.dateEnd=new Date(d.dateEnd)):(e.dateStart=new Date(d.dateStart),e.dateEnd=f),t.hideOtherMonthDays&&e.dateStart.getMonth()!==t.dateCurrent.getMonth()&&(i.otherMonthDate=!0)}_completeEventDragDrop(e){const t=this,n=e.event,i=e.schedulerEvent,a=e.hoveredCell,r=e.hoveredScheduler,o=e.schedulerEventObj,s=e.newDateStart,l=e.newDateEnd,d=t.view,c=t.views.find(z=>z.value&&z.value===d)||{},m=i.$.event,y=m.$?m.$.event:void 0,b=a.$.cellObj,f=b[c&&c.groupOrientation?c.groupOrientation:t.groupOrientation].group,w=m.dateStart.getTime(),v=a.$.cellObj.time;let S,_;const T=JSON.parse(JSON.stringify(o));T.dateStart=s,T.dateEnd=l;for(let z in f)T[z]=f[z];if(!(r.disableDrop||n&&"keydown"===n.type&&"Escape"===n.key||e.otherMonthDate)&&s&&l&&!t._isEventRestricted(T)){if(r===t?(_=t._cloneObject(y||m),S=m):S=o,r===t&&w===v||t._handleEventExceptionDrop(m,S),S.dateStart=new Date(s),S.dateEnd=new Date(l),["day","week"].indexOf(t.viewType)>-1&&(S.allDay=!!b.allDay),w!==v&&(i.$.cellTime=v),S.allDay||delete S.allDay,f&&!t._isEventPartOfGroup(m,f)){t.groups.forEach(z=>delete S[z]);for(let z in f)S[z]=f[z]}r===t?(t._validateEventDateRange(S),t._refreshTimelineEvents(),e.schedulerEventObj=t._cloneObject(y||S),t._updateUndoRedo(_,t._cloneObject(y||S),"dragEnd")):(y||t.removeEvent(m),r.insertEvent(S))}}_setEventDropDates(e){const t=this,i=e.hoveredScheduler,a=e.hoveredCell,r=e.schedulerEvent.$.event,o=a.$.cellObj,s=r.dateStart.getTime(),l=a.$.cellObj.time,d=o[t.groupOrientation].group;if(i===t&&s===l&&!!o.allDay==!!r.allDay&&(!d||t._isEventPartOfGroup(r,d)))return e.newDateStart=new Date(r.dateStart),void(e.newDateEnd=new Date(r.dateEnd));const c=e.schedulerEventObj,u=["day","week"].indexOf(t.viewType)>-1,m=i===t?r:c;let y,b;if(y=new Date(l),u&&!!m.allDay!=!!o.allDay)b=t._getCellDateRange(o).dateEnd;else{const f=m.dateEnd.getTime()-m.dateStart.getTime();b=new Date(y.getTime()+f)}u&&o.allDay&&(y.setHours(0,0,0,0),0!==b.getHours()&&0!==b.getMinutes()&&0!==b.getSeconds()&&b.setHours(23,59,59,999)),e.newDateStart=y,e.newDateEnd=b,t.hideOtherMonthDays&&y.getMonth()!==t.dateCurrent.getMonth()&&(e.otherMonthDate=!0)}_checkEventResizability(e){const t=this,i=e.originalEvent||e;let a=i.target;if(t._isMobile){if(!t._dragDetails)return;t.$.timelineContent.classList.add("hide-overlay"),a=(t.shadowRoot||document).elementFromPoint(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset),t.$.timelineContent.classList.remove("hide-overlay")}else t.shadowRoot&&a===t&&(a=e.originalEvent.composedPath()[0]);const r=t.$.timeline;let o=a&&a.closest&&!t.disabled?a.closest(".smart-scheduler-event"):void 0;if(t._handleEventHover(o),!o||t.disableResize||"agenda"===t.viewType)return;const s=o.$?o.$.event:void 0;if(!r.contains(o)||o.hasAttribute("collector")||!s||s.disableResize)return;const l=t.viewType,d=t.$.timelineViewAllDay.contains(o),c=e.pageX-window.pageXOffset,u=e.pageY-window.pageYOffset,m="visible"===t.resizeHandlesVisibility||t._isMobile?20:5,y=o.getBoundingClientRect();if(l.toLowerCase().indexOf("timeline")>-1||"month"===l||d){if(Math.round(y.left)+m>=c&&Math.round(y.left)-m<=c)return void r.setAttribute("event-hovered","left");if(Math.round(y.right)+m>=c&&Math.round(y.right)-m<=c)return void r.setAttribute("event-hovered","right")}else{if(Math.round(y.top)+m>=u&&Math.round(y.top)-m<=u)return void r.setAttribute("event-hovered","top");if(Math.round(y.bottom)+m>=u&&Math.round(y.bottom)-m<=u)return void r.setAttribute("event-hovered","bottom")}r.hasAttribute("event-hovered")&&r.setAttribute("event-hovered","")}_handleEventHover(e){const t=this,n=t.$.timeline;if(!e&&!n.hasAttribute("event-hovered")||e&&e.hasAttribute("hover"))return;const i=e&&e.$?e.$.event:void 0;let a=[].concat(Array.from(t.$.timelineEventsContainer.children),Array.from(t.$.allDayEventsContainer.children));t._eventList&&(a=a.concat(Array.from(t._eventList.children)));for(let r=0;r<a.length;r++){const o=a[r],s=o.$.event;o===e||i&&i===s?o.setAttribute("hover",""):o.removeAttribute("hover")}i||e?n.setAttribute("event-hovered",""):n.removeAttribute("event-hovered")}_handleEventResize(e){const t=this,n=t._dragDetails,i=n?n.schedulerEvent:void 0;if(t.disableResize||!n||!i||"agenda"===t.viewType||t._isMobile&&Date.now()-n.timestamp<250)return;t.hasAttribute("resized")||t._setResizeStart(i);const a=n.resizeDetails;if(!a)return;const r=e.pageX-window.pageXOffset,o=e.pageY-window.pageYOffset,s=a.side,l=t.$.timelineContainer.getBoundingClientRect();let d;d=a.rightToLeft?l.right-r:r-l.left;const c={x:Math.max(0,d+t.scrollLeft),y:Math.max(0,o-l.top+t.scrollTop)},u=t._getCellObjOffset(i,c,s);if(t._autoScroll(e),u)if(a.cellObj=u.cellObj,a.scaleIndex=u.scaleIndex,"left"===s||"right"===s){if(!t._resizeEventHorizontal(u,s))return}else if(!t._resizeEventVertical(u,s))return}_setResizeStart(e){const t=this,n=t._dragDetails,i=e.$.event,a=t.$.timeline,r=t._eventList;if(!i||i.disableResize||Smart.Scheduler.schedulerStart||r&&r.contains(e))return;const o=t._cloneObject(i);if(t.$.fireEvent("resizeStart",{target:n.schedulerEvent,item:o,itemDateRange:{dateStart:new Date(i.dateStart),dateEnd:new Date(i.dateEnd)},originalEvent:n.originialEvent}).defaultPrevented)return;t.$.tooltip.close(),t.setAttribute("resized",""),e.setAttribute("resized",""),t._scrollView.disableSwipeScroll=t._touchmoveInside=!0;const s=t.rightToLeft,l=parseFloat(e.style[s?"right":"left"]),d=parseFloat(e.style.top),c={width:parseFloat(e.style.width),height:parseFloat(e.style.height)},u=a.getAttribute("event-hovered"),m={x:l,y:d},y=e.closest(".smart-scheduler-events-container").children;let b;for(let f=0;f<y.length;f++){const w=y[f],v=w.$?w.$.event:void 0,S=parseFloat(w.style.left),_=parseFloat(w.style.top);v===i&&e!==w&&("left"===u&&(_<d||_===d&&S<l)||"right"===u&&(_>d||_===d&&S>l))&&(w.classList.add("smart-hidden"),b=!0)}n.resizeDetails={side:u,originalSize:c,originalPosition:m,position:{x:m.x,y:m.y},size:{width:c.width,height:c.height},isAllDay:t.$.timelineViewAllDay.contains(e),rightToLeft:s,resizeFromEnd:"bottom"===u||"right"===u&&!s||"left"===u&&s,resizeFromMiddle:b,schedulerEventObj:o}}_resizeEventHorizontal(e,t){const n=this._dragDetails,i=n.schedulerEvent,a=this.rightToLeft,r=n.resizeDetails;let o,s=r.position.x,l=e.offset;if("left"===t&&!a||"right"===t&&a){const d=r.originalPosition.x;if(s===l||(s<l?(l=s<d?Math.min(d,l):l,o=r.size.width-(l-s)):(l=s>d?Math.max(d,l):l,o=r.size.width+(s-l)),o<=0))return;r.position.x=l,a?(i.style.left="",i.style.right=l+"px"):(i.style.right="",i.style.left=l+"px")}else if(s+=r.size.width,l+=e.size,s===l||(o=s<l?r.size.width+(l-s):r.size.width-(s-l),o<=0))return;return r.size.width=o,i.style.width=r.size.width+"px",!0}_resizeEventVertical(e,t){const n=this._dragDetails,i=n.schedulerEvent,a=n.resizeDetails;let r,o=a.position.y,s=e.offset;if("top"===t){const l=a.originalPosition.y;if(o===s||(o<s?(s=o<l?Math.min(l,s):s,r=a.size.height-(s-o)):(s=o>l?Math.max(l,s):s,r=a.size.height+(o-s)),r<=0))return;a.position.y=s,i.style.top=s+"px"}else if(o+=a.size.height,s+=e.size,o===s||(r=o<s?a.size.height+(s-o):a.size.height-(o-s),r<=0))return;return a.size.height=r,i.style.height=a.size.height+"px",!0}_getCellObjOffset(e,t,n){const i=this,a=i._dragDetails.resizeDetails,r=i._timelineCells,o=e.$.event,s=a.isAllDay?1:i._getCellsScaleCount(),[l,d,c,u]="right"===n||"left"===n?["width","left","horizontal","x"]:["height","top","vertical","y"],m=a.resizeFromEnd,y=r[c],b=a.originalSize[l];let f,w,v,S,_,T=a.originalPosition[u],z=T,M=t[u];m?(T=parseFloat((T+b).toFixed(2)),M=Math.max(z,M),S=z):(z=parseFloat((z+b).toFixed(2)),M=Math.min(z,M),_=z);for(let J=0;J<y.length;J++){const Q=y[J];if(Q.group&&!i._isEventPartOfGroup(o,Q.group))continue;const ee=parseFloat((Q[d]+Q[l]).toFixed(2));w||(void 0===S?ee>M&&(w=Q):ee>S&&(w=Q)),void 0===_?Q[d]<=M&&(v=Q):Q[d]<_&&(v=Q),M!==z&&Q[d]<=M&&ee>=M&&(f=Q)}if(f||(f=m&&z===M||!m&&z!==M?w:v),!f)return;let L,F=f[d],B=parseFloat((f[l]/s).toFixed(2));for(let J=0;J<s;J++){const Q=parseFloat((f[d]+B*J).toFixed(2));(z!==M&&Q===M||Q+B===M||Q<M&&Q+B>=M)&&(F=Q,L=J)}return T>F&&T<parseFloat((F+B).toFixed(2))&&(m&&M<=T?B=T-F:!m&&M>=T&&(F=T)),{offset:F,size:B,cellObj:f,scaleIndex:L}}_handleEventExceptionDrop(e,t){const n=e.$?e.$.event:void 0;if(t||(t=e),e!==t)return delete t.repeat,void delete t.date;if(!n)return;const i=n.repeat;if(t.date||(t.date=new Date(t.dateStart)),delete t.repeat,i){const a=i.exceptions;a?a.indexOf(t)<0&&a.push(t):i.exceptions=[t]}}_dragStartHandler(e){const t=this,n=e.target.closest;if((t._dragDetails||n&&n.call(t,"smart-scheduler")===t)&&e.target){let i=e.target;for(;i;){if(i.className&&i.className.indexOf("smart-scheduler")>=0)return void e.preventDefault();i=i.parentNode}}}_autoScroll(e){const t=this,n=t.$.timelineContainer,a=t.autoScrollStep,r=t._dragDetails,o=t.rightToLeft;function s(c,u){u?(t.scrollTop-=a*c,r&&(r.coordinates.y+=a*c)):(t.scrollLeft-=(o?-1:1)*a*c,r&&(r.coordinates.x+=a*c)),t.hasAttribute("resized")&&t._handleEventResize(e)}if(t.disableAutoScroll||!e||!n.contains((e.originalEvent||e).target)||!t.hasAttribute("dragged")&&!t.hasAttribute("resized"))return void clearInterval(t._scrollInterval);clearInterval(t._scrollInterval);const l=n.getBoundingClientRect(),d=!(!r||!r.resizeDetails)&&r.resizeDetails.isAllDay;t._scrollInterval=setInterval(function(){(t.scrollLeft||o)&&e.clientX<=l.left+50?s(1):t.scrollLeft!==(o?0:t.scrollWidth)&&e.clientX>=l.left+l.width-50?s(-1):d||(t.scrollTop&&e.clientY<=l.top+50?s(1,!0):t.scrollTop!==t.scrollHeight&&e.clientY>=l.top+l.height-50?s(-1,!0):(clearInterval(t._scrollInterval),t._scrollInterval=void 0))},1)}_createDragFeedback(e){const t=this,n=t.theme,i=t.rightToLeft,a=t._dragDetails.schedulerEvent;let r=document.createElement("div");return t.dragFeedbackFormatFunction?r.innerHTML=t.dragFeedbackFormatFunction(e)||"":(r=a.cloneNode(!0),r.setAttribute("view-type",t.viewType),r.setAttribute("event-render-mode",t.eventRenderMode)),r.classList.remove("smart-scheduler-event"),r.classList.add("smart-scheduler-drag-feedback"),r.setAttribute("parent-scheduler-id",t.id),t._isMobile&&r.setAttribute("mobile",""),n&&r.setAttribute("theme",n),i&&r.setAttribute("right-to-left",""),r}_containsEvent(e){const t=this._events;if(!e)return;if(t.indexOf(e)>-1)return e;const n=["label","description"],i=this.groups,a="string"==typeof e?e:e.id;for(let r=0;r<t.length;r++){const o=t[r];if(void 0!==o.id&&o.id+""===a||(void 0===o.id||o.id+""==a+"")&&n.every(s=>o[s]instanceof Date?new Date(o[s]).getTime()===new Date(e[s]).getTime():o[s]===e[s])&&(!i.length||i.every(s=>e[s]===o[s])))return o}}_keyDownHandler(e){const t=this;if(t.readonly||t.hasAttribute("modal"))return void delete t._keyPressed;const n=t.$.tooltip,i=e.key,a=t.$.viewItemsContainer,r=e.target;switch(i){case"End":case"Home":case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"PageDown":case"PageUp":e.preventDefault(),t._handleKeyNavigation(e);break;case"Enter":case"Escape":if("Enter"===i){if(n.contains(r)){const o=n.querySelector("[selected]");if(!o)return;if(r===a){const s=t.$.showWeekendItem;s&&s.hasAttribute("selected")&&t._checkHideWekendItem(s),n.close(),t.$.viewItemsButton.focus({preventScroll:!0})}else r.classList.contains("smart-scheduler-event-button")?(t._deleteEventViaWindow(r.closest(".smart-scheduler-event").$.event),n.close(),t.$.timeline.focus({preventScroll:!0})):o.classList.contains("smart-scheduler-event")?t._doubleClickHandler(o):o.classList.contains("smart-scheduler-context-menu-item")&&t._handleContextMenuItemClick(o);e.preventDefault()}else if(r.classList.contains("smart-scheduler-event"))t._doubleClickHandler(r);else if(r.classList.contains("smart-scheduler-legend-res-item")){if(!t.filterable)return;t._handleLegendItemClick(r)}else r===t.$.timeline&&(t._openWindow(),e.preventDefault());break}"Escape"===i&&(Smart.Scheduler.schedulerStart===t?(t._endDrag(e,t),e.preventDefault()):t.hasAttribute("resized")&&(t._endResize(),e.preventDefault())),n.close(),n.selector&&n.selector.focus({preventScroll:!0});break;case"Tab":{const o=r;let s;if((o.classList.contains("smart-scheduler-event")||o.classList.contains("smart-scheduler-view"))&&(s=Array.from(t.$.timeline.querySelectorAll(".smart-scheduler-event"))),!s)break;const l=s.indexOf(o),d=l<0?s[0]:s[l+(e.shiftKey?-1:1)];if(n.visible&&n.contains(o))return;d&&(e.preventDefault(),d.focus({preventScroll:!0}));break}case"c":case"C":case"x":case"X":!t._dragDetails&&e.ctrlKey&&r.classList.contains("smart-scheduler-event")&&(t._updateClipboard(r.$.event,"c"===i?"copy":"cut"),t._handleEventCut(r));break;case"z":case"Z":case"y":case"Y":{const o=t.getRootNode(),s=o?o.activeElement.classList:void 0;if(!s.contains("smart-scheduler-event")&&!s.contains("smart-scheduler-view")&&!s.contains("smart-scheduler"))return;!t._dragDetails&&e.ctrlKey&&t._handleUndoRedo("z"===i?"undo":"redo");break}case"v":case"V":!t._dragDetails&&e.ctrlKey&&r.classList.contains("smart-scheduler-view")&&t._selectedCellObj&&t._pasteEvent(t._selectedCellObj.from);break;case"Delete":if(!t._dragDetails&&r.classList.contains("smart-scheduler-event")&&!r.hasAttribute("collector")){if(t.$.fireEvent("eventShortcutKey",{key:i,target:r,eventObj:t._cloneObject(r.$.event)}).defaultPrevented)return;e.preventDefault(),t._handleEventMenuDelete(r)}break;case" ":t.filterable&&r.classList.contains("smart-scheduler-legend-res-item")&&t._handleLegendItemClick(r);break;default:if(r===a||r.closest(".smart-scheduler-view-items-button")){let o=t._keyPressed;o||(o=t._keyPressed={}),o[i.toLowerCase()]=!0;const s=Object.keys(o),l=Array.from(a.children).find(d=>{const c=(d.getAttribute("shortcut-key")||"").toLowerCase().split("+");return c.forEach(u=>u.trim()),s.length===c.length&&s.every(u=>c.indexOf(u)>-1)});l&&(t._handleViewSelection(l),e.preventDefault(),n.close())}}}_keyUpHandler(e){const t=this;if(t.disabled||t.readonly)return void delete t._keyPressed;let n=t._keyPressed;n&&(delete n[e.key.toLowerCase()],Object.keys(n).length||delete t._keyPressed)}_handleContextMenuItemClick(e){const t=this,n=t.$.tooltip,i=n.selector,a=e.getAttribute("value");let r;switch(a){case"create":if(i.classList.contains("smart-scheduler-cell"))if(t._selectedCellObj)r=t._createEventFromSelection();else{const o=t._getCellDateRange(i),s=i.$.cellObj,l=s.vertical.group||s.horizontal.group;if(r={dateStart:o.dateStart,dateEnd:o.dateEnd,allDay:i.hasAttribute("all-day")},l)for(let d in l)r[d]=l[d]}else if(i.classList.contains("smart-scheduler-event")){const o=Object.assign({},i.$.event);r={dateStart:new Date(o.dateStart),dateEnd:new Date(o.dateEnd),allDay:o.allDay}}t._openWindow(r);break;case"edit":t._doubleClickHandler(i);break;case"copy":case"cut":i.classList.contains("smart-scheduler-event")&&!i.hasAttribute("collector")&&(t._updateClipboard(i.$.event,a),t._handleEventCut(i));break;case"paste":if(e.hasAttribute("disabled"))return;i.classList.contains("smart-scheduler-cell")&&t._pasteEvent(i);break;case"delete":if(!i.classList.contains("smart-scheduler-event")||i.hasAttribute("collector"))return;t._handleEventMenuDelete(i)}if(e instanceof HTMLElement){const o={item:e,type:"context",value:e.getAttribute("value")};r&&(o.itemObj=t._cloneObject(r)),t.$.fireEvent("itemClick",o)}n.close()}_updateClipboard(e,t){const n=this;if(!e||!t)return void delete n._clipboard;n._clipboard={target:e,action:t};let i=[],a=[];const r=n.locale,o={year:n.yearFormat,month:n.monthFormat,day:n.dayFormat,hour:n.hourFormat,minute:n.minuteFormat},s=[{label:"id",value:"Id"},{label:"label",value:"Label"},{label:"description",value:"Description"},{label:"dateStart",value:"Date Start"},{label:"dateEnd",value:"Date End"},{label:"allDay",value:"All Day"},{label:"repeat",value:"Repeat"},{label:"notifications",value:"Notifications"}];for(let l=0;l<s.length;l++){const d=s[l].label;if(void 0!==e[d]){let c=e[d];c instanceof Date?c=new Intl.DateTimeFormat(r,o).format(new Date(c)):"repeat"===d?c=(Object.keys(c).length>0)+"":"notifications"===d&&(c=(Array.isArray(c)&&c.length>0)+""),a.push(s[l].value),i.push(c+"")}}if(i=a.join(",")+"\n"+i.join(","),navigator.clipboard)navigator.clipboard.writeText(i);else if(document.execCommand){const l=document.createElement("textarea"),d=n.getRootNode().activeElement;return l.value=i,l.style.position="fixed",document.body.appendChild(l),l.focus({preventScroll:!0}),l.select(),document.execCommand("copy"),document.body.removeChild(l),void(d&&d.focus({preventScroll:!0}))}}_handleEventCut(e){const t=this,n=t._clipboard,i=Array.from(t.$.timelineEventsContainer.children).concat(Array.from(t.$.allDayEventsContainer.children));let a;if(n&&"cut"===n.action||(e=void 0),e?a=e.$.event:!e&&n&&"cut"===n.action&&(a=n.target),a&&a.$&&a.$.event){const r=a.$.event;r&&r.repeat&&(!r.repeat.exceptions||r.repeat.exceptions.indexOf(a)<0)&&(a=void 0)}for(let r=0;r<i.length;r++){const o=i[r];a&&o.$&&o.$.event===a?o.setAttribute("cut",""):o.removeAttribute("cut")}}_pasteEvent(e){const t=this,n=t._clipboard;if(!n)return;let i=n.target;if(!i||!(e=e instanceof HTMLElement?e.$.cellObj:e))return;const a=i.$&&i.$.event?i.$.event:void 0;if(a&&a.repeat&&(!a.repeat.exceptions||a.repeat.exceptions.indexOf(i)<0))return;const r=t.view,o=t.views.find(b=>b.value&&b.value===r)||{},s=e[o&&o.groupOrientation?o.groupOrientation:t.groupOrientation].group,l=["day","week"].indexOf(t.viewType)>-1;let d,c,u,m;switch(n.action){case"copy":{if(a)return;const b=t.localize("duplicate"),f=new RegExp(`\\s?-\\s?${b}\\s?(\\(([0-9]+)\\))?$`,"g"),w=t._events;let v=(i.label+"").replace(f,""),S=0;i=t._cloneObject(i);for(let _=0;_<w.length;_++){const T=w[_];if(T.label.indexOf(v)>-1&&(f.lastIndex=0,f.test(T.label))){f.lastIndex=0;const z=f.exec(T.label);S=Math.max(S,parseInt(z[2])||1)+1}}i.label=S>1?`${v} - ${b} (${S})`:`${v} - ${b}`,delete i.id,t._events.push(i),u="itemInsert";break}case"cut":m=t._cloneObject(a||i),s&&!t._isEventPartOfGroup(i,s)&&t.groups.forEach(b=>delete i[b]),t._updateClipboard(),u="itemUpdate"}if(d=new Date(e.time),c=l&&!!i.allDay!=!!e.allDay?t._getCellDateRange(e).dateEnd:new Date(d.getTime()+(i.dateEnd.getTime()-i.dateStart.getTime())),l&&(e.allDay&&(d.setHours(0,0,0,0),0!==c.getHours()&&0!==c.getMinutes()&&0!==c.getSeconds()&&c.setHours(23,59,59,999)),i.allDay=!!e.allDay),i.allDay||delete i.allDay,i.dateStart=d,i.dateEnd=c,s)for(let b in s)i[b]=s[b];t._validateEventDateRange(i),t._refreshTimelineEvents(),t._updateUndoRedo("itemInsert"===u?void 0:m,t._cloneObject(a||i),u);const y=t._cloneObject(a||i);t.$.fireEvent(u,{item:y}),t.$.fireEvent("itemChange",{item:y})}_handleKeyNavigation(e){const t=this,n=t.viewType.toLowerCase(),i=n.indexOf("timeline")>-1,a=t.$.tooltip,r=t.rightToLeft,o=e.key;let s=t.enableShadowDOM?e.composedPath()[0]:e.target;if(a.visible){const l=a.$.content instanceof HTMLElement?a.$.content.querySelector("[tabindex]"):null;l&&(l.focus({preventScroll:!0}),s=l)}if(s===t.$.timeline){const l=t.$.timelineContent,d=t.$.timelineViewAllDay,c=d.offsetHeight>0;if(!t._selectedCellObj)return t._handleCellSelection((c?d:l).querySelector(".smart-scheduler-cell:not(.scale)")),void(t._selectedCellObj&&t._scrollTo(t._selectedCellObj.to));const u=t._selectedCellObj[e.shiftKey?"to":"from"],m=t._getCellsScaleCount(),y=u.scaleIndex||0,b=m-1;let f,w,[v,S,_]=[u.horizontal,u.vertical,y],T=u.allDay;switch(o){case"Home":case"End":f=t._timelineCells[i?"horizontal":"vertical"],[w,_,T]="Home"===o?[f[0],0,!e.shiftKey&&c]:[f[f.length-1],b,!1],[v,S]=i?[w,S]:[v,w];break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{const M=["ArrowUp","ArrowDown"].indexOf(o)>-1,L=r&&"ArrowRight"===o||!r&&"ArrowLeft"===o||"ArrowUp"===o?-1:1;[f,w]=M?[t._timelineCells.vertical,S]:[t._timelineCells.horizontal,v],M&&i||!M&&!i?w=f[f.indexOf(w)+L]:(_+=L,(_<0||_>b)&&(w=f[f.indexOf(w)+L],_=_>b?0:b)),[v,S]=M?[v,w]:[w,S];break}case"PageDown":case"PageUp":{if(i||u.allDay)break;const M=u.vertical.top+t._scrollViewSize.height*("PageUp"===o?-1:1),L=t._timelineCells.vertical;S=t._timelineCells.vertical.find(F=>F.top>=M),S||(S="PageUp"===o?L[0]:L[L.length-1]);break}}e.shiftKey||(T&&"ArrowDown"===o?(S=t._timelineCells.vertical[0],_=0,T=!1):"ArrowUp"!==o||S||(T=c));const z=t._getCellByObj({horizontal:v,vertical:S,scaleIndex:_,allDay:T});if(z){const M=t._selectedCellObj.from;t._handleCellSelection("agenda"!==n&&e.shiftKey&&!!M.allDay==!!T?M:z,z)}}else if(s===t.$.viewItemsContainer){const l=t.$.viewItemsContainer.children,d=Array.from(l).find(u=>u.hasAttribute("selected"));let c;d&&"Home"!==o?"End"===o?c=l[l.length-1]:(t.$.tooltip.contains(s)&&("ArrowUp"===o||"ArrowDown"===o)||t.$.header.contains(s)&&("ArrowLeft"===o||"ArrowRight"===o))&&(c=d["ArrowUp"===o||"ArrowLeft"===o&&!r||"ArrowRight"===o&&r?"previousElementSibling":"nextElementSibling"]):c=l[0],c&&d!==c&&t._handleViewSelection(c)}else if(s===t._list){const l=(t._list.contains(t._eventList)?t._eventList:t._contextList).children,d=Array.from(l).find(u=>u.hasAttribute("selected"));let c;d&&"Home"!==o?"End"===o?c=l[l.length-1]:"ArrowUp"!==o&&"ArrowDown"!==o||(c=d["ArrowUp"===o?"previousElementSibling":"nextElementSibling"]):c=l[0],c&&d!==c&&t._handleEventItemSelection(l,c)}}_handleEventItemSelection(e,t){const n=this;if((n._eventList||n._contextList)&&(n._list.contains(n._eventList)?n._eventList:n._contextList)){e||(e=(n._list.contains(n._eventList)?n._eventList:n._contextList).children);for(let i=0;i<e.length;i++){const a=e[i];a===t?a.setAttribute("selected",""):a.removeAttribute("selected")}}}_getCellByObj(e){const t=this;if(!e||!t._scrollTo(e))return;const n=e.allDay,a=Array.from((n?t.$.timelineViewAllDay:t.$.timelineCellsContainer).querySelectorAll(".smart-scheduler-cell:not(.scale)"));n&&delete e.vertical;const r=Object.keys(e);return a.find(o=>r.every(s=>e[s]===o.$.cellObj[s]||void 0===o.$.cellObj[s]))}_scrollTo(e,t,n){const i=this,a=i._getCellsScaleCount(),r=i.viewType.toLowerCase().indexOf("timeline")>-1;let o,s,l,d,c,u,m,y;if(e instanceof HTMLElement&&e.classList.contains("smart-scheduler-event")||i._events&&i._events.indexOf(e)>-1){const f=i._scrollToEvent(e);if(!f)return;[o,s,l,d]=[f.hCell,f.vCell,f.scaleIndex,f.allDay]}else if(e instanceof Date){let f=i._getCellObjByDate(e);if(!f&&(i.navigateToDate(e),f=i._getCellObjByDate(e),!f))return;[o,s,l,d]=[f.hCell,f.vCell,f.scaleIndex,f.allDay]}else{if(e instanceof HTMLElement&&e.$&&(e=e.$.cellObj),!e)return;o=e.horizontal||e,s=e.vertical||e,l=e.scaleIndex||0,d=e.allDay}const b=()=>{const f=i[c];t||f>y?(i[c]=y,i.isCompleted||(i.$.timelineContainer[c]=i[c],i._recycle())):f+m<y+u&&(i[c]=Math.max(0,y+u-m),i.isCompleted||(i.$.timelineContainer[c]=i[c],i._recycle()))};return o&&([c,u,m]=["scrollLeft",o.width/(r?a:1),i._scrollViewSize.width],y=o.left+u*(r?l:0),b()),s&&!d&&([c,u,m]=["scrollTop",s.height/(r?1:a),i._scrollViewSize.height],y=s.top+u*(r?0:l),n&&(t&&(y=Math.max(0,y+u-m)),y+=(i._scrollViewSize.height-u)/2),b()),!0}_scrollToEvent(e){const t=this;if(!e)return;e instanceof HTMLElement&&e.classList.contains("smart-scheduler-event")&&!t.$.timeline.contains(e)&&(e=e.$?e.$.event:void 0);const n=t._events;if(!e||!n||n.indexOf(e)<0)return;const i=t._getEventHorizontallCellObjs(e),a=t._getEventVerticalCellObjs(e),r=i.start||i.first,o=a.start||a.first;let s=0;return e.allDay||(s=t._getEventScaleIndex(e,t.viewType.indexOf("timeline")>-1?r:o).start),{hCell:r,vCell:a,scaleIndex:s,allDay:e.allDay}}_getCellObjByDate(e){if(!(e instanceof Date)||!e||isNaN(e.getTime()))return;const t=this,n=t.viewType.toLowerCase(),i=t._timelineCells.horizontal,a=t._timelineCells.vertical,r=n.indexOf("month")>-1;let o,s,l,[d,c,u,m,y]=[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getDay()];if("agenda"===n){if(s=a.find(b=>{const f=b.date;return f.getFullYear()===d&&f.getMonth()===c&&f.getDate()===u}),!s)return}else if(n.indexOf("timeline")<0){if(o=i.find(b=>{const f=b.date;return r&&f.getDay()===y||f.getFullYear()===d&&f.getMonth()===c&&f.getDate()===u}),r&&(l=new Date,l.setDate(l.getDate()-l.getDay()+t.firstDayOfWeek),[d,c,u,m,y]=[l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getDay()]),s=a.find(b=>{const f=b.date;return r?f.getFullYear()===d&&f.getMonth()===c&&f.getDate()===u&&f.getHours()===m:f.getHours()===m}),!o||!s)return}else if(o=i.find(b=>{const f=b.date;return f.getFullYear()===d&&f.getMonth()===c&&f.getDate()===u&&(r||f.getHours()===m)}),!o)return;return{hCell:o,vCell:s,scaleIndex:Math.floor(e.getMinutes()/60*t._getCellsScaleCount())}}_mouseWheelHandler(e){const t=this,n=e.target;t.$.viewSelectorContainer.contains(n)?t._handleViewNavigation(e):t.disabled||n.closest(".smart-scheduler-window-modal")||(e.shiftKey&&t.computedHorizontalScrollBarVisibility?t._handleHorizontalScroll(e):t.computedVerticalScrollBarVisibility&&t._handleVerticalScroll(e))}_handleCellSelection(e,t){const n=this,i=n._dragDetails?n._dragDetails.selectedCellObj:n._selectedCellObj;let a,r,o,s;i&&(a=i.from,r=i.to),n.disableSelection?n._selectCell():n._selectCell(e,t),n._selectedCellObj&&(o=n._selectedCellObj.from,s=n._selectedCellObj.to);const l={dateStart:void 0,dateEnd:void 0,group:void 0};let d,c,u,m,y,b;a&&(d=new Date(a.time),c=new Date(r.time),y=a.horizontal.group||a.vertical.group),o&&(u=new Date(o.time),b=o.horizontal.group||o.vertical.group,l.dateStart=u,l.group=b,m=new Date(s.time),l.dateEnd=m),(a&&!o||!a&&o||d&&(d.getTime()!==u.getTime()||c.getTime()!==m.getTime()||y!==b))&&n.$.fireEvent("change",l)}_selectCell(e,t){const n=this;function i(){const f=n.$.timeline.querySelectorAll(".smart-scheduler-cell[selected]");for(let w=0;w<f.length;w++)f[w].removeAttribute("selected");delete n._selectedCellObj}if(t||(t=e),!e||"agenda"===n.viewType)return void i();let a=e,r=t;if(e.closest){const f=e.closest(".smart-scheduler-cell:not(.scale)");if(!f||!n.$.timeline.contains(f))return;a=f.$?f.$.cellObj:void 0}if(t.closest){const f=t.closest(".smart-scheduler-cell:not(.scale)");if(!f||!n.$.timeline.contains(f))return;r=f.$?f.$.cellObj:void 0}if(!a||!r||n._isMobile&&Object.keys(a).some(f=>a[f]!==r[f])||void 0===a.time||void 0===r.time)return;if(a.allDay&&!r.allDay){const f=n.$.timelineViewAllDayCellsContainer.children;for(let w=0;w<f.length;w++){const v=f[w];if(!v.$)continue;const S=v.$.cellObj;if(S.horizontal===r.horizontal){r=S;break}}}if(a.allDay!==r.allDay)return;const o=n.view,s=n.views.find(f=>f.value&&f.value===o)||{},l=s&&s.groupOrientation?s.groupOrientation:n.groupOrientation,d=(a[l]||a).group;if(d!==(r[l]||r).group)return;i();let c,[u,m]=[a.time,r.time];if("agenda"===n.viewType&&u!==m)return;let y={};if(u>m){const f=u;u=m,m=f}y.from=Object.assign({},a),y.to=Object.assign({},r),n._selectedCellObj=y;const b=(a.allDay?n.$.timelineViewAllDay:n.$.timelineContent).querySelectorAll(".smart-scheduler-cell:not(.scale)");for(let f=0;f<b.length;f++){if(c=b[f],c.removeAttribute("selected"),!c.$)continue;const w=c.$.cellObj;if((w[l]||w).group!==d)continue;const v=w.time,S=Object.keys(w);v>=u&&v<=m&&c.setAttribute("selected",a===r||S.every(_=>w[_]===a[_])?"start":"")}n._scrollTo(r)}_isCellObjSelected(e){const t=this,n=t._selectedCellObj;if(!n||!e)return;const i=n.from,a=n.to,r=t.view,o=t.views.find(u=>u.value&&u.value===r)||{},s=o&&o.groupOrientation?o.groupOrientation:t.groupOrientation;if((i[s]||i).group!==(e[s]||e).group)return;const l=Math.min(i.time,a.time),d=Math.max(i.time,a.time),c=e.time;return c>=l&&c<=d||void 0}_getCellTime(e){if(!e)return 0;const t=this,n=t.viewType;let i,a;if(e instanceof HTMLElement&&e.closest(".smart-scheduler-cell:not(.scale)")){if(!e.$||!e.$.cellObj)return 0;i=e.$.cellObj}else i=e;if("agenda"===n)return i.vertical.date.getTime();if("month"===n){a=new Date(i.vertical.date);const s=new Date(i.horizontal.date).getDay()-t.firstDayOfWeek;return a.setDate(a.getDate()+(s<0?7+s:s)),a.getTime()}const r=i.scaleIndex||0,o=60/t._getCellsScaleCount()*60*1e3;return n.indexOf("timeline")<0?(a=new Date(i.horizontal.date),i.allDay||a.setHours(i.vertical.date.getHours())):a=new Date(i.horizontal.date),a.getTime()+o*r}_handleVerticalScroll(e){const t=this;if(!t.computedVerticalScrollBarVisibility)return!0;const n=t.scrollTop;0===n&&e.deltaY<0||n===t.scrollHeight&&e.deltaY>0?e.stopPropagation():(e.preventDefault(),t.mouseWheelStep>0?t.scrollTop=n+(e.deltaY<0?-t.mouseWheelStep:t.mouseWheelStep):t.scrollTo(n+t._getScrollCoefficient(e,t.offsetHeight)))}_handleHorizontalScroll(e){const t=this;if(!t.computedHorizontalScrollBarVisibility)return!0;const n=t.scrollLeft;0===n&&e.deltaY<0||n===t.scrollWidth&&e.deltaY>0?e.stopPropagation():(e.preventDefault(),t.scrollWidth>0&&t.scrollTo(void 0,t.scrollLeft+t._getScrollCoefficient(e,t.offsetWidth)))}_horizontalScrollbarHandler(e){const t=this;t._hscrollTimer&&clearTimeout(t._hscrollTimer),t.$.timelineContainer.scrollLeft=t._getScrollLeft(e.detail.value),t.dataSource&&t.dataSource.length>100?(t._recycle(e,!1),t._hscrollTimer=setTimeout(()=>{t._recycle(e)},25)):t._recycle(e)}_verticalScrollbarHandler(e){const t=this;t._scrollTimer&&clearTimeout(t._scrollTimer),t.$.timelineContainer.scrollTop=Math.round(e.detail.value),t.dataSource&&t.dataSource.length>100?(t._recycle(e,!1),t._scrollTimer=setTimeout(()=>{t._recycle(e)},25)):t._recycle(e)}_recycle(e,t){const n=this,i=n._timelineCells,a=n.$.tooltip;if(i.vertical&&i.horizontal){if(a.visible&&n.$.timeline.contains(a.selector)&&a.close(),!e)return n._recycleHeaderCells(n.$.timelineHeaderHorizontalContent),n._recycleHeaderCells(n.$.timelineHeaderVerticalContent),n._refreshTimelineContentCells(),n._refreshTimelineAllDayCells(),void(!1!==t&&n._refreshEvents());if("horizontal"===e.context.orientation)return n._recycleHeaderCells(n.$.timelineHeaderHorizontalContent),n._refreshTimelineContentCells(),n._refreshTimelineAllDayCells(),void(!1!==t&&n._refreshEvents());n._recycleHeaderCells(n.$.timelineHeaderVerticalContent),n._refreshTimelineContentCells(),!1!==t&&n._refreshEvents()}}_recycleHeaderCells(e){const t=this,n=t.rightToLeft,[i,a,r,o]=e===t.$.timelineHeaderHorizontalContent?["horizontal","left","width","scrollLeft"]:["vertical","top","height","scrollTop"],s=e.querySelector(".smart-scheduler-view-time"),l=t._timelineCells[i];if(!l||!l.length)return;const d=t._getFirstCellObjInView(i),c=t._getTimelineVisibleCellsCount(i),u=s.children;for(let m=0;m<u.length;m++){const y=u[m],b=y.children;let f=document.createDocumentFragment();for(;b.length;)f.appendChild(y.firstElementChild);t._recycleContainerCells({fragment:f,cellsNeeded:c});let w=l.indexOf(d);for(let v=0;v<f.children.length;v++){const S=f.children[v],_=l[w];if(S.$={cellObj:_},!_)break;"horizontal"===i?n?(S.style.left="",S.style.right=_.left+"px"):(S.style.right="",S.style.left=_.left+"px"):S.style[a]=_[a]+"px",S.style[r]=_[r]+"px",S.innerHTML=`<div>${_.noLabel?"":t._getDateString({date:new Date(_.date),timeZone:u[m].timeZone},i)}</div>`,_.weekend?S.setAttribute("weekend",""):S.removeAttribute("weekend"),_.nonworking?S.setAttribute("nonworking",""):S.removeAttribute("nonworking"),_.separator?S.setAttribute("separator",""):S.removeAttribute("separator"),_.groupSeparator?S.setAttribute("group-separator",""):S.removeAttribute("group-separator"),_.showLabel?S.setAttribute("show-label",_.showLabel):S.removeAttribute("show-label"),_.restricted?S.setAttribute("restricted",""):S.removeAttribute("restricted"),w++}y.appendChild(f)}t._refreshHeaderDetailCells(i),t._refreshHeaderGroupCells(i),e[o]="scrollLeft"===o?t._getScrollLeft(t[o]):t[o]}_moveHandler(e){const t=this;t._isMobile||e.stopPropagation(),(t.hasAttribute("dragged")||t.hasAttribute("resized"))&&"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_getScrollLeft(e){return this.rightToLeft?e*=-1:e}_containerClickHandler(e){const t=this;if(t.readonly||t.hasAttribute("modal"))return;const n=t.$.tooltip;let i=(e||e.originalEvent).target;if(t.$.dateSelectorContainer.contains(i)){const a=i.closest(".smart-scheduler-nav");return a&&a.hasAttribute("current")&&t.disableDateMenu?void n.close():void t._handleDateSelection(a)}if(!n.contains(i)){if(i.closest(".smart-scheduler-view-items-button")){if(t.disableViewMenu)return void n.close();const a=n.visible&&!n.contains(t.$.viewItemsContainer);return t._handleTooltipContent(t.$.viewItemsButton),void(a||n.toggle())}if(i.classList.contains("smart-scheduler-legend-res-item"))t._handleLegendItemClick(i);else if(t._isMobile&&(t.$.timelineContent.classList.add("hide-overlay"),i=(t.shadowRoot||document).elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset),t.$.timelineContent.classList.remove("hide-overlay")),!i.closest(".smart-scheduler-event")&&(n.close(),t.$.viewSelectorContainer.contains(i))){const a=i.closest(".smart-scheduler-nav");if(a)return void t._handleViewNavigation(a);const r=i.closest(".smart-scheduler-item");r===t.$.showWeekendItem?t._checkHideWekendItem(r):t._handleViewSelection(r)}}}_handleLegendItemClick(e){const t=this,n=t._legend;if(!t.filterable||!n)return;e.hasAttribute("unselected")?(e.removeAttribute("unselected"),e.setAttribute("aria-selected",!0)):(e.setAttribute("unselected",""),e.setAttribute("aria-selected",!1));const i=n.querySelectorAll(".smart-scheduler-legend-res-item[unselected]");let a=[],r={};for(let o=0;o<i.length;o++){const s=i[o],l=s.getAttribute("resource"),d=s.getAttribute("resource-id");r[l]||(r[l]=[]),r[l].push(d+"")}for(let o in r)a.push({name:o,value:s=>!r[o].includes(s+"")});t.set("filter",null),a.length&&t.set("filter",a),t._refreshTimelineEvents()}_containerContextMenuHandler(e){const t=this;let n=e.target;if(t.disableContextMenu)return;const i=e.pageX-window.pageXOffset,a=e.pageY-window.pageYOffset;if(t._isMobile&&(t.$.timelineContent.classList.add("hide-overlay"),n=(t.shadowRoot||document).elementFromPoint(i,a),t.$.timelineContent.classList.remove("hide-overlay")),t.$.timelineContent.contains(n)||t.$.timelineViewAllDayContent.contains(n)){if(e.preventDefault(),n=n.closest(".smart-scheduler-event")||n.closest(".smart-scheduler-cell"),!n||t.disableContextMenu)return;n.classList.contains("smart-scheduler-event")&&t._handleCellSelection(),t._handleTooltipContent(n,{x:e.pageX,y:e.pageY})}else t.$.tooltip.close()}_handleViewNavigation(e){const t=this;let n;if(!e)return;const i=t.$.viewItemsContainer;n=e instanceof Smart.RepeatButton?10*(e.hasAttribute("prev")?-1:1):e.deltaY,i.scrollLeft+=t._getScrollLeft(n);const a=t._viewButtons;if(!a)return;n=i.scrollLeft;const o=a.next;a.prev.disabled=!n,o.disabled=i.offsetWidth+Math.abs(n)===i.scrollWidth}_handleDateSelection(e){const t=this,n=t.$.tooltip;if(e instanceof HTMLElement)if(e.hasAttribute("prev"))n.close(),t._navigateDate(-1);else if(e.hasAttribute("current")){const i=n.visible&&!n.contains(t._calendar);t._handleTooltipContent(t.$.currentDate),i||n.toggle()}else e.hasAttribute("next")?(n.close(),t._navigateDate(1)):e.hasAttribute("today")&&(n.close(),t._navigateDate())}navigateToDate(e){const t=this;if(e instanceof Date)e=new Date(e);else{if(e instanceof HTMLElement&&(!e.classList.contains("smart-scheduler-cell")||!t.$.timeline.contains(e)))return;if("object"==typeof e){const i=new Date(t.dateCurrent);e.year=void 0!==e.year?e.year:i.getFullYear(),e.month=void 0!==e.month?e.month:i.getMonth(),e.date=void 0!==e.date?e.date:i.getDate(),e=new Date(e.year,e.month,e.date,e.hours,e.getMinutes)}else if("string"==typeof e){if(e.indexOf("Date")>=0){e=(e=e.replace("new Date(","").replace(")","")).split(", ");let i="";for(let a=0;a<e.length;a++)i+=e[a],a<2?i+="-":2===a?i+=" ":a<e.length-1&&(i+=":");e=i}e=new Date(e)}}let n=e;t._refreshDateNavButtons(n),n.getTime()>t.max||n.getTime()<t.min||(t.set("dateCurrent",n),t.dateCurrent.getTime()!==n.getTime()&&t.$.fireEvent("dateChange",{oldValue:new Date(t.dateCurrent),value:new Date(n)}),t._calendar&&(t._calendar.selectedDates=[new Date(n)],t.$.tooltip.contains(t._calendar))||(t._createTimeline(),t._refreshDateSelector()))}_navigateDate(e){const t=this,n=t.viewType.toLowerCase();let i=t.dateCurrent,a=new Date(i);if(void 0===e)a=new Date;else{if(a.setHours(0,0,0,0),n.includes("day"))a.setDate(a.getDate()+e);else if(n.includes("week")||"agenda"===n){a.setDate(a.getDate()+7*e);const r=t.views.find(o=>o.value&&o.value===t.view)||{};if(r.additionalDays){let o=new Smart.Utilities.DateTime(i);o=o.addDays(e*(6+r.additionalDays)),a=o.toDate(),a.setHours(0,0,0,0)}}else{let r=new Date(a);e>0&&(r.setDate(1),r.setMonth(r.getMonth()+2)),r.setDate(0),a.setMonth(a.getMonth()+e),a.getMonth()!==r.getMonth()&&(a=r)}a.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())}t._refreshDateNavButtons(a),a.getTime()>t.max||a.getTime()<t.min||(t.set("dateCurrent",a),i.getTime()!==a.getTime()&&t.$.fireEvent("dateChange",{oldValue:new Date(i),value:new Date(a)}),t._calendar&&(t._calendar.selectedDates=[new Date(a)],t.$.tooltip.contains(t._calendar))||(t._createTimeline(),t._scrollTo(a),t._refreshDateSelector()))}_refreshDateNavButtons(e){const t=this;e||(e=t.dateCurrent);const n=t.$.dateSelectorContainer,i=n.querySelector(".smart-scheduler-nav[prev]"),a=n.querySelector(".smart-scheduler-nav[next]");i&&(i.disabled=e.getTime()<=t.min),a&&(a.disabled=e.getTime()>=t.max)}_handleTooltipContent(e,t){const n=this,i=n.$.tooltip;if(e){if(e===n.$.currentDate){i.selector=e,i.position="auto",i.arrow=!0;let r=n._calendar;r||(r=document.createElement("smart-calendar"),r.firstDayOfWeek=n.firstDayOfWeek,r.selectionMode="oneExtended",r.selectedDates=[new Date(n.dateCurrent)],r.max=n.max,r.min=n.min,r.rightToLeft=n.rightToLeft,r.locale=n.locale,r.id=n.id+"Calendar",r.classList.add("smart-scheduler-calendar-popup"),n._calendar=r),a(r)}else if(e===n.$.viewItemsButton)i.selector=e,i.position="auto",i.arrow=!0,a(n.$.viewItemsContainer),n._handleViewSelection(),n._checkHideWekendItem();else if(e.classList.contains("smart-scheduler-event")||e.classList.contains("smart-scheduler-cell")){let r,o=n._list;if(o||(n._list=o=document.createElement("smart-scroll-viewer"),o.horizontalScrollBarVisibility="hidden"),o.theme=n.theme,o.tabIndex=n.tabIndex,o.rightToLeft=n.rightToLeft,n.inverted?o.setAttribute("inverted",""):o.removeAttribute("inverted"),r=t?n._getContextMenu(e):n._getEventList(e),!r||!r.innerHTML)return;if(n._handleEventItemSelection(),o.contains(r)){if(i.selector===e&&i.contains(o)){if(t){const s=n.getBoundingClientRect();return i.style.top=Math.min(t.y+1,s.bottom+window.pageYOffset-i.offsetHeight)+"px",i.style.left=Math.min(t.x+1,s.right+window.pageXOffset-i.offsetWidth)+"px",i.visible&&n._fireTooltipVisibilityEvent({type:"opening",detail:{owner:i.selector}})?(n._skipEventFiring=!0,i.close(),void delete n._skipEventFiring):void i.open()}return i.visible&&i.selector&&i.selector.focus({preventScroll:!0}),o.refresh(),void i.toggle()}}else o.isCompleted&&o.removeAll(),o.appendChild(r);if(i.selector=e,a(o),o.refresh(),t){const s=n.getBoundingClientRect();i.style.top=Math.min(t.y+1,s.bottom+window.pageYOffset-i.offsetHeight)+"px",i.style.left=Math.min(t.x+1,s.right+window.pageXOffset-i.offsetWidth)+"px"}if(i.visible)return n._fireTooltipVisibilityEvent({type:"opening",detail:{owner:i.selector}})?(n._skipEventFiring=!0,i.close(),void delete n._skipEventFiring):void(t||i.reposition());i.visible||i.open()}}else i.close();function a(r){r&&!i.contains(r)&&(i.clear(),i.appendChild(r))}}_getContextMenu(e){const t=this,n=t.$.tooltip;let i,a,r=t._contextList,o=t.contextMenuDataSource;if(e.classList.contains("smart-scheduler-event")&&!e.hasAttribute("collector")){const u=e.$?e.$.event:void 0;u&&u.$&&u.$.event&&(a=!0),o||(o=["create","edit","delete"],t.contextMenuClipboardActions&&["copy","cut"].forEach(m=>o.push(m)))}else{if(!e.classList.contains("smart-scheduler-cell"))return void n.close();i=!0,o||(o=["create"],t.contextMenuClipboardActions&&o.push("paste"))}n.position="absolute",n.arrow=!1,r||(t._contextList=r=document.createElement("div"),r.classList.add("smart-scheduler-context-menu"),r.setAttribute("role","listbox"),r.setAttribute("aria-label","Context Menu"));const s=document.createDocumentFragment(),l=Array.from(r.children),d=t.hideOtherMonthDays;let c=["copy","cut"];for(let u=0;u<l.length;u++){const m=l[u];o.indexOf(m.getAttribute("value"))<0&&m.remove()}for(let u=0;u<o.length;u++){const m=o[u];let y,b,f=l[u];"object"==typeof m?(y=m.label,b=m.value):y=b=m+"",f||(f=document.createElement("div"),f.classList.add("smart-scheduler-context-menu-item"),f.setAttribute("role","option")),f.parentElement||s.appendChild(f),e.hasAttribute("restricted")||d&&e.hasAttribute("other-month")?f.setAttribute("disabled",""):i&&"paste"===b?t._clipboard?f.removeAttribute("disabled"):f.setAttribute("disabled",""):a&&c.indexOf(b)>-1?f.setAttribute("disabled",""):f.removeAttribute("disabled"),f.innerHTML=t.localize(y)||y,f.setAttribute("value",b)}return r.appendChild(s),r}_getEventList(e){const t=this;if(!e.classList.contains("smart-scheduler-event")||!e.$)return;const n=e.hasAttribute("collector"),i=n?e.$.events:[e.cloneNode(!0)];let a=t._eventList;if(!i||!i.length)return void(a&&(a.innerHTML=""));const r=t.$.tooltip;r.position="auto",r.arrow=!0,a||(a=document.createElement("div"),a.classList.add("smart-scheduler-collector-event-list"),a.setAttribute("role","menu"),a.id=t.id+"EventMenu",t._eventList=a),a._target=e;const o=document.createDocumentFragment(),s=Array.from(a.children),l={isAllDayEvent:t.$.timelineViewAllDay.contains(e),isTooltipEvent:!0};for(let d=0;d<s.length;d++){const c=s[d];i.indexOf(c)<0&&c.remove()}for(let d=0;d<i.length;d++){const c=i[d];n||(c.$=e.$),l.eventObj=c.$.event,l.isAllDayEvent=l.eventObj.allDay,t._setEventCellContent(c,l),o.appendChild(i[d])}return a.appendChild(o),a}_tooltipVisibilityHandler(e){const t=this,n=e.type,i=t.$.tooltip,a=t.getRootNode().host||t.getRootNode();e.stopPropagation(),t._skipEventFiring||!t._fireTooltipVisibilityEvent(e)?(a===document||document.body.contains(a))&&("opening"===n?(i.classList.remove("smart-visibility-hidden"),t.getShadowRootOrBody().appendChild(i)):"closing"===n&&(t.hasAnimation?i.addEventListener("animationend",()=>{i.visible||(i.classList.add("smart-visibility-hidden"),i.style.top=i.style.left=0,t.$.container.appendChild(i))},{once:!0}):t.$.container.appendChild(i))):e.preventDefault()}_fireTooltipVisibilityEvent(e){const t=this,n=e.type,i=t.$.tooltip,a=i.contains(t._contextList),r=i.contains(t._eventList),o=e.detail.owner;let s,l={target:i,owner:o};if(a)if(o.classList.contains("smart-scheduler-event"))l.eventObj=[t._cloneObject(o.$.event)];else{let d,c;if(t._selectedCellObj){const u=t._selectedCellObj.from,m=t._selectedCellObj.to,y=Math.min(u.time,m.time),b=Math.max(u.time,m.time);d=y===b?[new Date(y)]:[new Date(y),new Date(b)],c=u.vertical.group||u.horizontal.group}else{const u=o.$.cellObj;d=[new Date(u.time)],c=u.vertical.group||u.horizontal.group}l.cellObj={date:d},c&&(l.group=c)}else r&&(o.$.events?l.eventObj=o.$.events.map(d=>t._cloneObject(d.$.event)):o.$.event&&(l.eventObj=[t._cloneObject(o.$.event)]));if("open"===n||"close"===n){a?s="contextMenu":r?s="eventMenu":i.contains(t._calendar)?s="dateMenu":i.contains(t.$.viewItemsContainer)&&(s="viewMenu");let d=(t.getAttribute("aria-owns")||"")+" "+i.id;return"open"===n?t.setAttribute("aria-owns",d.trim()):t.hasAttribute("aria-owns")&&(d=t.getAttribute("aria-owns").replace(i.id,"").trim(),d?t.setAttribute("aria-owns",d):t.removeAttribute("aria-owns")),void(s&&t.$.fireEvent(s+("open"===n?"Open":"Close"),l))}if(a?s="opening"===n?"contextMenuOpening":"contextMenuClosing":r&&(s="opening"===n?"eventMenuOpening":"eventMenuClosing"),s&&t.$.fireEvent(s,l).defaultPrevented)return!0}_tooltipChangeHandler(e){const t=this,n=t._calendar;if(e.target===n){e.stopPropagation();const i=t.dateCurrent;return t.set("dateCurrent",n.selectedDates[0]||t.dateCurrent),t.dateCurrent.getTime()!==i.getTime()&&t.$.fireEvent("dateChange",{oldValue:new Date(t.dateCurrent),value:new Date(i)}),t._refreshDateSelector(),t._createTimeline(),void e.context.close()}}_tooltipClickHandler(e){const t=this,n=t.$.tooltip,i=t.isInShadowDOM?(e||e.originalEvent).composedPath()[0]:(e||e.originalEvent).target;if(t.$.viewItemsContainer.contains(i)){const o=i.closest(".smart-scheduler-item");return o===t.$.showWeekendItem?t._checkHideWekendItem(o):t._handleViewSelection(o),void n.close()}const a=i.closest(".smart-scheduler-event");if(a)return i.closest(".smart-scheduler-event-button")?void t._handleEventMenuDelete(a):void t._doubleClickHandler(i);const r=i.closest(".smart-scheduler-context-menu-item");r&&t._handleContextMenuItemClick(r)}_handleEventMenuDelete(e){const t=this,i=e.$?e.$.event:void 0;if(t.$.tooltip.close(),!i)return void t.$.timeline.focus({preventScroll:!0});const a=i.$?i.$.event:void 0;if(a){const r=a&&a.repeat?a.repeat.exceptions:void 0;t._openWindow(r&&r.indexOf(i)>-1?i:Object.assign({},i,{dateStart:e.$.dateStart,dateEnd:e.$.dateEnd}),e,"deleteConfirm")}else t._deleteEventViaWindow(i),t.$.timeline.focus({preventScroll:!0})}_tooltipKeyDownHandler(e){this._keyDownHandler(e)}_tooltipKeyUpHandler(e){this._keyUpHandler(e)}_tooltipDownHandler(e){e.stopPropagation(),this._downHandler(e)}_tooltipContextMenuHandler(e){const t=e.target;t&&t.closest&&t.closest(".smart-scheduler-event")&&e.preventDefault()}_timelineFocusHandler(e){const t=this;if("focusin"===e.type||"focusout"===e.type)return void t._handleEventFocus(e);if(t.readonly||t.hasAttribute("modal"))return;const n=t.$.timelineViewAllDay,i=n.offsetHeight>0;if(!(t._isMobile||t._dragDetails&&t._dragDetails.timelineCellObj))if(t._selectedCellObj){const a=e.relatedTarget,r=t.$.schedulerWindow,o=t.$.confirmWindow;if(r&&r.contains(a)||o&&o.contains(a))return;t._selectedCellObj.from.time!==t._selectedCellObj.to.time&&t._handleCellSelection(t._selectedCellObj.from)}else t._handleCellSelection((i?n:t.$.timelineContent).querySelector(".smart-scheduler-cell:not(.scale)"))}_handleEventFocus(e){const t=e&&"focusin"===e.type?e.target:void 0,n=t&&t.$?t.$.event:void 0,i=this.$.timeline.querySelectorAll(".smart-scheduler-event");let a;for(let r=0;r<i.length;r++){const o=i[r],s=o.$.event;o===t||n&&n===s?(o.setAttribute("focus",""),a=o):o.removeAttribute("focus")}return a}_handleViewSelection(e){const t=this,n=t.$.showWeekendItem,i=t.$.viewItemsContainer.children,a=t.view;let r;if(e instanceof HTMLElement&&(r=e.$?e.$.value:null),r||(r=t.view),r===a||!t.$.fireEvent("viewChanging",{oldValue:a,value:r}).defaultPrevented){for(let o=0;o<i.length;o++){const s=i[o];s.removeAttribute("selected"),!e&&s.$&&s.$.value===r&&(e=s)}e&&e.setAttribute("selected",""),e!==n&&(r!==a&&(t.set("view",r),t._createTimeline(),t._refreshDateSelector(),t._checkHideWekendItem(),t._scrollToView(e),t.$.fireEvent("viewChange",{oldValue:a,value:r})),t.$.viewItemsButton.innerHTML=`<span>${e?e.textContent.trim():t.localize(r)||r}</span>`)}}_checkHideWekendItem(e){const t=this,n=t.viewType.toLowerCase().indexOf("day")<0,i=t.view,a=t.views.find(l=>l.value&&l.value===i)||{},r=a&&void 0!==a.hideWeekend?a.hideWeekend:void 0,o=r&&a.hideWeekend||t.hideWeekend;if(!e)return(e=t.$.showWeekendItem)&&e.parentElement?(e&&(o&&n?e.removeAttribute("checked"):e.setAttribute("checked","")),void(t.viewType.toLowerCase().indexOf("day")>-1?e.setAttribute("disabled",""):e.removeAttribute("disabled"))):void 0;if(!e||!e.parentElement||e!==t.$.showWeekendItem)return;e.hasAttribute("checked")?(e.removeAttribute("checked"),t.set("hideWeekend",!0)):(e.setAttribute("checked",""),t.set("hideWeekend",!1));const s=t.hideWeekend;void 0!==r&&(a.hideWeekend=s),o!==s&&n&&t._createTimeline()}_scrollToView(e){const t=this;if("tabs"!==t.viewSelectorType)return;const n=t.$.viewItemsContainer;if(!(e=e||n.querySelector(".smart-scheduler-item[selected]")))return;const i=n.offsetWidth,a=e.offsetLeft,r=a+e.offsetWidth;let o=n.scrollLeft;o>a?o=n.scrollLeft=a:o+i<r&&(o=n.scrollLeft=r-i);const s=t._viewButtons;s&&(s.prev.disabled=!o,s.next.disabled=Math.abs(o)+i===n.scrollWidth)}_resizeEventHandler(e){const t=this;function n(){if(t._noResizeHandler)return void delete t._noResizeHandler;t._refreshHeaderControlsVisibility();const i=t.$.tooltip;t._positionWindow(),t._createTimeline(),i.visible&&(i.contains(t._contextList)?i.close():i.reposition()),t._refreshViewSelector(),t._resizeLegend&&t._resizeLegend()}(e?t.enableShadowDOM?e.composedPath()[0]:e.target:void 0)===t&&(clearTimeout(t._resizeTimeout),t.resizeInterval?t._resizeTimeout=setTimeout(n.bind(t),t.resizeInterval):n())}_setScrollBars(){const e=this;e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e.$.timeline,e.$.horizontalScrollBar,e.$.verticalScrollBar));const t=e._scrollView.vScrollBar,n=e._scrollView.hScrollBar;n.$.addClass("smart-hidden"),t.$.addClass("smart-hidden"),t.hasStyleObserver=!1,n.hasStyleObserver=!1,t.hasResizeObserver=!1,n.hasResizeObserver=!1,n.wait=!1,t.wait=!1,e._refresh()}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return e.removeAttribute("tabindex"),e.$.timeline.removeAttribute("tabindex"),void e.$.viewItemsContainer.removeAttribute("tabindex");const t=e.tabIndex>0?e.tabIndex:0;e.tabIndex=t,e.$.tooltip.tabIndex=t,e.$.timeline.tabIndex=t,e.$.viewItemsContainer.tabIndex=t}_toHex(e){function t(n){const i=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");return isNaN(n)?"00":i[(n-n%16)/16]+i[n%16]}return(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?"#"+t(e[1])+t(e[2])+t(e[3]).toUpperCase():"#ffffff"}_setExportStyles(e,t){const n=this;if(e.style)return;const i=e.header.columns,a=window.getComputedStyle(n),r={height:a.getPropertyValue("--smart-scheduler-timeline-header-horizontal-cells-size"),border:"1px solid "+n._toHex(a.borderColor),fontFamily:"Helvetica",fontSize:a.fontSize,color:n._toHex(a.color),backgroundColor:n._toHex(a.backgroundColor),fontWeight:"400"},o={border:"1px solid "+n._toHex(a.borderColor),fontFamily:a.fontFamily,fontSize:a.fontSize},s=n._timelineCells;let l,d;s&&s.vertical&&s.horizontal&&(l=s.vertical[0]?s.vertical[0].height:void 0,d=s.horizontal[0]?s.horizontal[0].width:void 0),void 0===l&&(l=Math.max(parseFloat(a.getPropertyValue("--smart-scheduler-timeline-cell-height"))||0,parseFloat(a.getPropertyValue("--smart-scheduler-timeline-cell-min-height")||0))),void 0===d&&(d=Math.max(parseFloat(a.getPropertyValue("--smart-scheduler-timeline-cell-width"))||0,parseFloat(a.getPropertyValue("--smart-scheduler-timeline-cell-min-width")||0))),"pdf"===t?d=100/i.length+"%":d+="px",l+="px";for(let c=0;c<i.length;c++){const u=i[c];r[u.dataField]={textAlign:"center",width:d},o[u.dataField]={textAlign:"start",format:u.dataField.indexOf("date")>-1?"f":""}}e.style={border:"1px solid "+n._toHex(a.borderColor),borderCollapse:"collapse",header:r,columns:o,rows:{height:l}}}_getExportRecord(e){const t=this,n=t.locale,i=t._events,a=t.resources,o=t.yearFormat,s=t.monthFormat,l=t.dayFormat,d=t.hourFormat,c=t.minuteFormat;let u=t.dataExport.columns,m={};if(!u||!u.length){const y=["id","label","description","dateStart","dateEnd"];u=Object.keys(i[0]).filter(b=>y.indexOf(b)>-1),a.forEach(b=>u.push(b.value))}for(let y=0;y<u.length;y++){const b=u[y],f=a.find(w=>w.value===b);if(e){if(f&&e[f.value]){if(f&&f.dataSource){const w=f.dataSource.find(v=>v.id===e[f.value]);m[b]=w&&w.label||""}}else{const w=e[b];m[b]=w instanceof Date?new Intl.DateTimeFormat(n,{year:o,month:s,day:l,hour:d,minute:c}).format(w):w||""}m._keyDataField=i.indexOf(e)}else m[b]=(f?f.label:t.localize(b)||b)||""}return m}_refresh(){const e=this;function t(){const s=e.$.timelineContent.offsetWidth-e.$.timelineContainer.offsetWidth;return s>0&&"hidden"!==e.horizontalScrollBarVisibility||"visible"===e.horizontalScrollBarVisibility?e.$container.addClass("hscroll"):e.$container.removeClass("hscroll"),s}function n(){const s=e.$.timelineContent.offsetHeight-e.$.timelineContainer.offsetHeight;return s>0&&"hidden"!==e.verticalScrollBarVisibility||"visible"===e.verticalScrollBarVisibility?e.$container.addClass("vscroll"):e.$container.removeClass("vscroll"),s}const i=e.scrollWidth,a=e.scrollHeight;let r=t(),o=n();o&&a===o||(r=t()),r&&i===r||(o=n()),e.scrollWidth=r,e.scrollHeight=o,e.$.horizontalScrollBar.refresh(),e.$.verticalScrollBar.refresh()}_setHeader(){const e=this,t=e.$.header,n=e.$.todayDate;if(e.headerTemplate)e._applyTemplate("headerTemplate",t);else{const i=e.$.dateSelectorContainer;t.contains(i)||(t.innerHTML="",t.appendChild(i),t.appendChild(e.$.viewSelectorContainer)),e._setLegend(t)}t.contains(n)&&(n.innerHTML=`<span>${e.localize("today")}</span>`),e._refreshDateSelector(),e._refreshViewSelector(),e._refreshHeaderControlsVisibility()}_refreshHeaderControlsVisibility(){const e=this,t=e.viewSelectorType;if("tabs"===t||"auto"===t&&!e._isMobile)return;const n=e.offsetWidth,i=e.$.todayDate,a=e.$.currentDate;n<=500?i.classList.add("smart-hidden"):i.classList.remove("smart-hidden"),n<=320?a.classList.add("smart-hidden"):a.classList.remove("smart-hidden")}_setFooter(){const e=this,t=e.$.footer;if(null===e.footerTemplate)return t.innerHTML=null,e._setLegend(t),void(t.children.length||e.$.container.removeAttribute("show-footer"));e.$.container.setAttribute("show-footer",""),e._applyTemplate("footerTemplate",t)}_setLegend(e){const t=this,n=t.$.footer,i="header"===t.legendLocation?t.$.header:n;if(e&&e!==i)return;let a=t._legend;if(!t.showLegend)return a&&(a.innerHTML="",a.remove()),void(i!==n||n.children.length||t.$.container.removeAttribute("show-footer"));a||(a=t._legend=document.createElement("div"),a.classList.add("smart-scheduler-legend"),a.setAttribute("role","presentation"));const r=t.resources,o=1===r.length,s=a.children;for(let l=0;l<r.length;l++)r[l].dataSource.length&&t._refreshLegendItems(l,o);for(;r.length<s.length;)s.lastElementChild.remove();i.contains(a)||i.appendChild(a)}_refreshLegendItems(e,t){const n=this,i=n.resources[e],a=n._legend;let r,o,s=a.children[e];s||(s=document.createElement("div"),s.classList.add("smart-scheduler-legend-item"),s.setAttribute("role","listbox")),s.setAttribute("resource",i.value+"");const l=s.children;for(let d=0;d<l.length;d++){const c=l[d];c.classList.contains("smart-scheduler-legend-res-label")?r=c:c.classList.contains("smart-scheduler-legend-res-items")&&(o=c)}r||t?r&&t&&r.remove():(r=document.createElement("label"),r.classList.add("smart-scheduler-legend-res-label"),r.id=n.id+"LegendResourceLabel"),r&&(r.textContent=i.label||"",s.setAttribute("aria-labelledby",r.id)),o||(o=document.createElement("div"),o.classList.add("smart-scheduler-legend-res-items"),o.setAttribute("role","presentation")),n._refereshLegendResItems(i,o),s.contains(o)||s.appendChild(o),t||s.contains(r)||s.insertBefore(r,o),a.contains(s)||a.appendChild(s)}_refereshLegendResItems(e,t){const n=this,i=n.filter,a=t.children,r=Math.max(n.tabIndex,0),o=e.dataSource,s=e.value;let l=0;for(let d=0;d<o.length;d++){const c=o[d];let u=a[d];if(u||(u=document.createElement("div"),u.classList.add("smart-scheduler-legend-res-item"),u.setAttribute("role","option")),u.innerHTML=`<span>${c.label||""}</span>`,u.title=c.label,l+=c.label.length,u.setAttribute("aria-label",c.label),u.setAttribute("resource",s+""),u.setAttribute("resource-id",c.id+""),i&&Array.isArray(i)){let m=i.find(y=>y.name===s);m&&"function"==typeof m.value&&!m.value(c.id)?u.setAttribute("unselected",""):u.removeAttribute("unselected")}else u.removeAttribute("unselected");c.disabled?(u.setAttribute("disabled",""),u.removeAttribute("tabindex"),u.removeAttribute("aria-selected")):(u.removeAttribute("disabled"),u.setAttribute("tabindex",r),u.hasAttribute("unselected")?u.setAttribute("aria-selected",!1):u.setAttribute("aria-selected",!0)),c.backgroundColor?u.style.setProperty("--smart-scheduler-legend-item-background",c.backgroundColor):u.style.removeProperty("--smart-scheduler-legend-item-background"),t.contains(u)||t.appendChild(u)}for(;o.length<a.length;)t.lastElementChild.remove();n._resizeLegend=()=>{let d=14*l*.52;const c=[...t.querySelectorAll(".smart-scheduler-legend-res-item")];c.forEach(u=>{u.classList.remove("smart-hidden")}),"auto"===this.legendLayout?d>n.offsetWidth?(t.querySelectorAll("span").forEach(u=>{u.classList.add("smart-hidden")}),n.offsetWidth<550||c.length>n.legendLayoutMenuBreakpoint?(c.forEach(u=>{u.classList.add("smart-hidden")}),n._legendList.close(),n._legendList.classList.remove("smart-hidden")):(n._legendList.close(),n._legendList.classList.add("smart-hidden"))):(n._legendList.close(),n._legendList.classList.add("smart-hidden"),t.querySelectorAll("span").forEach(u=>{u.classList.remove("smart-hidden")})):""===this.legendLayout?(n._legendList.close(),n._legendList.classList.add("smart-hidden"),t.querySelectorAll("span").forEach(u=>{u.classList.remove("smart-hidden")})):"menu"===this.legendLayout&&(t.querySelectorAll("span").forEach(u=>{u.classList.add("smart-hidden")}),c.forEach(u=>{u.classList.add("smart-hidden")}),n._legendList.close(),n._legendList.classList.remove("smart-hidden"))},(()=>{const d=document.createElement("smart-check-input");d.classList.add("smart-scheduler-legend-list"),d.dataSource=o.map(c=>({label:c.label,color:c.backgroundColor,value:""+c.id})),d.readonly=!0,d.dropDownHeight=d.dataSource.length>10?200:"auto",d.dropDownOpenPosition="auto",d.dropDownButtonPosition="none",d.checkAll(),d.onItemClick=c=>{t.children[c.detail.index].click()},t.appendChild(d),n._legendList=d,d.classList.add("smart-hidden")})(),n._resizeLegend()}_refreshDateSelector(){const e=this,t=e.locale,n=e.$.currentDate;if(!e.$.header.contains(n))return;let i=new Smart.Utilities.DateTime(new Date(e.dateCurrent)).toDate(e.timeZone);isNaN(i.getTime())&&(i=new Date);let a="";if(e.dateSelectorFormatFunction)a=e.dateSelectorFormatFunction(i)+"";else{const r=e.viewType.toLowerCase(),o=e.dayFormat,s=e.monthFormat,l=e.yearFormat;if(r.indexOf("day")>-1)a=new Intl.DateTimeFormat(t,{day:o}).format(i);else if(r.indexOf("week")>-1||"agenda"===r){let d=new Date(i);"agenda"!==r&&d.setDate(d.getDate()-d.getDay()+e.firstDayOfWeek),"dateCurrent"===e.viewStartDay&&(d=new Date(i));let c=new Date(d);c.setDate(c.getDate()+6);const u=e.views.find(m=>m.value&&m.value===e.view)||{};if(u.additionalDays){let m=new Smart.Utilities.DateTime(d);m=m.addDays(6+u.additionalDays),c=m.toDate()}a=new Intl.DateTimeFormat(t,{day:o}).format(d),d.getMonth()!==c.getMonth()&&(a+=" "+new Intl.DateTimeFormat(t,{month:s}).format(d)),d.getFullYear()!==c.getFullYear()&&(a+=" "+new Intl.DateTimeFormat(t,{year:l}).format(d)),a+="-"+new Intl.DateTimeFormat(t,{day:o}).format(c),i=c}a+=" "+new Intl.DateTimeFormat(t,{month:s}).format(i)+" "+new Intl.DateTimeFormat(t,{year:l}).format(i)}n.innerHTML=a}_refreshViewSelector(){const e=this,t=e.views,n=e.viewSelectorType,i=e.$.viewSelectorContainer,a=e.$.viewItemsContainer,r=e.$.viewItemsButton,o=e.$.tooltip,s=o.contains(a);let l=e.$.showWeekendItem;if(!e.$.header.contains(r))return;for(i.classList.add("smart-visibility-hidden"),r.classList.add("smart-visibility-hidden"),i.classList.remove("no-overflowing"),a.remove(),l&&l.remove();t.length<a.children.length;)a.firstElementChild.remove();for(;t.length>a.children.length;){const u=document.createElement("div");u.classList.add("smart-scheduler-item"),u.setAttribute("role","option"),a.appendChild(u)}const d=a.children;for(let u=0;u<d.length;u++){const m=d[u],y=t[u];let b,f;if("string"==typeof t[u])m.innerHTML="<div>"+e.localize(b=t[u])+"</div>";else{const w=y.label;b=y.value,m.innerHTML="<div>"+("string"!=typeof w&&isNaN(w)?e.localize(b):w)+"</div>",f=y.shortcutKey}void 0===f&&(f=e.localize(b+"Shortcut")),f?m.setAttribute("shortcut-key",e.localize(f)||f):m.removeAttribute("shortcut-key"),m.$={value:b}}if(i.appendChild(a),e._viewButtons)for(let u in e._viewButtons)e._viewButtons[u].remove();const c=i.offsetWidth-a.offsetWidth<0;if("tabs"===n){let u,m;return s&&o.close(),c&&(e._viewButtons||(u=document.createElement("smart-repeat-button"),m=document.createElement("smart-repeat-button"),u.classList.add("smart-scheduler-nav"),m.classList.add("smart-scheduler-nav"),u.setAttribute("prev",""),m.setAttribute("next",""),u.setAttribute("aria-label","Previous View"),m.setAttribute("aria-label","Next View"),e._viewButtons={prev:u,next:m}),u=e._viewButtons.prev,m=e._viewButtons.next,i.classList.add("no-overflowing"),i.insertBefore(u,a),i.appendChild(m),e._scrollToView()),i.removeAttribute("show-menu"),i.classList.remove("smart-visibility-hidden"),void e._handleViewSelection()}delete e._viewButtons,"menu"===n||c?(e.hideViewMenuCheckableItems?l&&l.remove():a.contains(l)||(l||(l=e.$.showWeekendItem=document.createElement("div"),l.classList.add("smart-scheduler-item"),l.setAttribute("checkable",""),l.setAttribute("separator","")),l.innerHTML="<div>"+e.localize("showWeekends")+"</div>",e._checkHideWekendItem(),a.appendChild(l)),s?(o.clear(),o.appendChild(a)):a.remove(),i.setAttribute("show-menu",""),r.classList.remove("smart-visibility-hidden")):(i.removeAttribute("show-menu"),s&&o.close()),i.classList.remove("smart-visibility-hidden"),e._handleViewSelection()}_checkNotifications(e){const t=this,n=t._events,i=t.$.toast;if(e&&(i&&i.isCompleted&&i.items.forEach(r=>{r.classList.contains("smart-scheduler-event-notification")&&i.closeItem(r)}),delete t._notificationObj,delete t._notificationsInterval),clearInterval(t._notificationsInterval),!n)return t._removeToast(),delete t._notificationsInterval,void delete t._notificationObj;let a=t._notificationObj;if(a||(a=t._notificationObj={events:n.filter(r=>Array.isArray(r.notifications))}),!a.events)return t._removeToast(),void delete t._notificationsInterval;t._notificationsInterval||t._refreshNotifications(),t._notificationsInterval=setInterval(t._refreshNotifications.bind(t),1e3*t.notificationInterval)}_removeToast(){const e=this,t=e.$.toast;if(t){const n=e.$toast;n.unlisten("open"),n.unlisten("close"),t.remove()}}_appendToast(){const e=this,t=e.$.toast;if(!e.$.container.contains(t)){const n=e.$toast;n.listen("open",e._toastVisibilityHandler.bind(e)),n.listen("close",e._toastVisibilityHandler.bind(e)),e.$.container.appendChild(t)}}_toastVisibilityHandler(e){e.target===this.$.toast&&(e.stopPropagation(),this.$.fireEvent("open"===e.type?"notificationOpen":"notificationClose",e.detail))}_refreshNotifications(){const e=this,t=e._notificationObj;if(!t)return void clearInterval(e._notificationsInterval);const n=t.events;let i=new Date;if(i.setSeconds(0,0),i=i.getTime(),t.time===i)return;t.time=i;const a=e._getNotificationEvents(n,i);let r=[];for(let o=0;o<a.length;o++){const s=a[o],l=s.dateStart.getTime(),d=s.notifications;Array.isArray(d)&&d.forEach(c=>{const m=c.time,y=new Date(l-(c.interval||0)*("days"===c.type||0===c.type?1:7)*24*60*60*1e3);y.setHours(m[0]%23,m[1]%60,0,0),y.getTime()===i&&r.push({dateStart:s.dateStart,label:s.label,message:c.message,iconType:c.iconType})})}e._notifyForUpcomingEvents(r)}_getNotificationEvents(e,t){const n=this;let i=[];const a=t+24192e5,r=n._rRule,o={isMonthView:!0,hourStart:n.hourStart,hourEnd:n.hourEnd,restrictedDates:n.restrictedDates,restrictedHours:n.restrictedHours,dateStart:new Date(t),dateEnd:new Date(a),rRule:r,targetEvents:i};for(let s=0;s<e.length;s++){const l=e[s],d=l.dateStart,c=l.dateEnd;if(!d||!c)continue;const u=d.getTime(),m=c.getTime();if(l.repeat&&r){const y=n._getEventRepeatOptions(l);if(y){o.event=l,o.repeatObj=l.repeat,o.options=y,o.eventTimeStart=u,o.eventTimeEnd=m,n._setRepeatingEvents(o);continue}}else u>=t&&u<=a&&i.push(l)}return i}_notifyForUpcomingEvents(e){const t=this;if(!e.length)return;t._setToast();const n=t.$.toast;t._appendToast();const i=t.dayFormat,a=t.monthFormat,r=t.weekdayFormat,o=t.locale,s=t.hourFormat,l=t.minuteFormat,d=Smart.Utilities.DateTime,c=t.timeZone;for(let u=0;u<e.length;u++){const m=e[u],y=new d(m.dateStart).toDate(c),b=m.message?m.message:m.label+" "+t.localize("notificationMessage")+" "+new Intl.DateTimeFormat(o,{day:i,weekday:r,month:a}).format(y)+" at "+new Intl.DateTimeFormat(o,{hour:s,minute:l}).format(y);n.open(b,m.iconType)}}_setToast(){const e=this;let t=e.$.toast;t||(e.$.toast=t=document.createElement("smart-toast"),t.appendTo=e.$.timeline,t.showCloseButton=!0,t.itemClass="smart-scheduler-event-notification",e.$toast=Smart.Utilities.Extend(t)),t.rightToLeft=e.rightToLeft,t.theme=e.theme,t.animation=e.animation}_createEvents(e,t){const n=this;let i=void 0!==e;if(i||(e=n.dataSource,n._clearEvents()),n.dataSource instanceof Smart.DataAdapter&&(e="ics"===n.dataSource.dataSourceType?n.dataSource.dataSource:n.dataSource.toArray()),!Array.isArray(e)||!e.length)return;const a=n.viewType;let r=[];for(let o=0;o<e.length;o++){const s=e[o];if(!s)continue;let l,d,c=s.allDay;if("string"==typeof c&&(c="true"===c),c=!!c,l=n._dateValidator(void 0,s.dateStart),d=n._dateValidator(void 0,s.dateEnd),!l||!l.getTime())continue;switch(d&&d.getTime()||(d=new Date(l),d.setHours(d.getHours(),d.getMinutes()+60/n._getCellsScaleCount(),0,0)),d=new Date(Math.max(l.getTime(),d.getTime())),a){case"week":case"day":case"timelineWeek":case"timelineDay":c&&d.setHours(23,59,59,999);break;default:c&&0===d.getHours()&&0===d.getMinutes()&&0===d.getSeconds()&&0===d.getMilliseconds()&&(d=new Date(d.getTime()-1))}const u=Object.assign({},s,{dateStart:l,dateEnd:d,allDay:c,label:s.label||""});let m=u.repeat;if(m){m=u.repeat=Object.assign({},m);const y=["hourly","daily","weekly","monthly","yearly"];for(let b in m)if("repeatFreq"===b&&y.indexOf(m[b])<0)m[b]=y[0];else if("repeatInterval"===b)m[b]=isNaN(m[b])?1:m[b];else if("exceptions"===b){let f=m[b];f=Array.isArray(f)?f.slice():[f];for(let w=0;w<f.length;w++){let v=f[w];void 0===v.date?v={date:n._parseDate(v)}:(v=Object.assign({},v),v.date?v.date instanceof Date||(v.date=n._parseDate(v.date)):v.date=new Date(v.dateStart)),v.dateStart?v.dateStart instanceof Date||(v.dateStart=n._parseDate(v.dateStart)):v.dateStart=new Date(v.date),v.dateEnd?v.dateEnd instanceof Date||(v.dateEnd=n._parseDate(v.dateEnd)):v.dateEnd=new Date(v.dateStart.getTime()+u.dateEnd.getTime()-u.dateStart.getTime()),delete v.$,f[w]=v}f&&(m[b]=f)}}n._containsEvent(u)||(n._setEventTimeZone(u,t),r.push(u))}if(i)return r;n._removeToast(),delete n._notificationsInterval,delete n._notificationObj,n._events=r}_setEventTimeZone(e,t="local"){const n=(new Smart.Utilities.DateTime).timeZones,i=this.timeZone.toLowerCase(),a=(t||this.timeZone).toLowerCase();if(!e||!e.dateStart||!e.dateEnd||t&&i===a)return;const r=n.find(f=>f.id.toLowerCase()===i);if(!r)return;let o=n.find(f=>f.id.toLowerCase()===a),s=new Date(e.dateStart),l=new Date(e.dateEnd);const d=n.find(f=>"local"===f.id.toLowerCase());o||(o=d);const c=d.offset,u=60*(-1*s.getTimezoneOffset()-d.offset)*1e3,m=60*(-1*l.getTimezoneOffset()-d.offset)*1e3,y=60*o.offset*1e3,b=60*r.offset*1e3;if(e.allDay||(e.dateStart=new Date(s.getTime()-u-y+b),e.dateEnd=new Date(l.getTime()-m-y+b)),e.repeat&&e.repeat.exceptions){const f=e.repeat.exceptions;for(let w=0;w<f.length;w++){const v=f[w];if(v.allDay)continue;const S=60*(-1*v.date.getTimezoneOffset()-c)*1e3,_=60*(-1*v.dateStart.getTimezoneOffset()-c)*1e3,T=60*(-1*v.dateEnd.getTimezoneOffset()-c)*1e3;v.date=new Date(v.date.getTime()-S-y+b),v.dateStart=new Date(v.dateStart.getTime()-_-y+b),v.dateEnd=new Date(v.dateEnd.getTime()-T-y+b)}}}_clearEvents(){const e=this;e._events=[],e._eventList&&(e._eventList.innerHTML=null),e.$.timelineEventsContainer.innerHTML="",e.$.allDayEventsContainer.innerHTML="",delete e._eventsBetween,e.rendered&&e._refreshTimelineEvents()}_refreshEvents(){const e=this,n=e.$.timelineEventsContainer,i=e.$.allDayEventsContainer,a=e._timelineCells;if(!(e._events&&a.horizontal&&a.horizontal.length&&a.vertical&&a.vertical.length))return n.innerHTML="",i.innerHTML="",void delete e._eventsBetween;let r=e._eventsBetween?e._eventsBetween.eventCellDetails:void 0,o=[],s={};const l=e.view,d=e.views.find(y=>y.value&&y.value===l)||{},c=d?parseFloat(d.maxEventsPerCell):NaN;if(isNaN(c)?null!==e.maxEventsPerCell&&(s.maxEventsPerCell=e.maxEventsPerCell):s.maxEventsPerCell=c,r){const y=r.eventGroups,b=r.cellRanges,f=r.allDayEventGroups,w=r.allDayEventCellRanges;for(let v=0;v<y.length;v++)s.events=y[v],s.eventCells=b[v],o=o.concat(e._createTimelineEvents(s));for(let v=0;v<f.length;v++)s.events=f[v],s.eventCells=w[v],s.isAllDay=!0,o=o.concat(e._createTimelineEvents(s))}else o=e._createViewEvents();if(e.hasAttribute("resized"))return;const u=Array.from(n.children).concat(Array.from(i.children)),m=e._eventList;for(let y=0;y<u.length;y++){const b=u[y];o.indexOf(b)<0&&(b.remove(),m&&m._target===b&&(m.innerHTML="",delete m._target))}e._handleEventCut()}_createViewEvents(){const e=this,t=e._events,n=e._timelineCells.groups,i=e._getViewEvents();let a=[];const r=e.$.timeline.querySelectorAll(".smart-scheduler-event[collector]");for(let o=0;o<r.length;o++)r[o].$&&(r[o].$.events=r[o].$.events.reduce((s,l)=>(t.indexOf(l)>-1&&s.push(l),s),[]));return a=n&&n.length>0?e._createGroupedEvents(i,n):e._createNonGroupedEvents(i),a}_createNonGroupedEvents(e){const t=this;let n=[],i={};const a={eventGroups:[],cellRanges:[],allDayEventGroups:[],allDayEventCellRanges:[]},r=t.view,o=t.views.find(c=>c.value&&c.value===r)||{},s=o?parseFloat(o.maxEventsPerCell):NaN;isNaN(s)?null!==t.maxEventsPerCell&&(i.maxEventsPerCell=t.maxEventsPerCell):i.maxEventsPerCell=s;const l=t._getTimelineEventCells(e,[]),d=t._separateAllDayEvents(e,l);return d.events.length&&(i.events=d.events,i.eventCells=d.eventCells,a.eventGroups.push(d.events),a.cellRanges.push(d.eventCells),n=n.concat(t._createTimelineEvents(i))),d.allDayEvents.length&&(i.events=d.allDayEvents,i.eventCells=d.allDayEventCells,i.isAllDay=!0,a.allDayEventGroups.push(d.allDayEvents),a.allDayEventCellRanges.push(d.allDayEventCells),n=n.concat(t._createTimelineEvents(i))),t._eventsBetween.eventCellDetails=a,n}_createGroupedEvents(e,t){const n=this;let i=[],a={};const r=n.view,o=n.views.find(y=>y.value&&y.value===r)||{},s=o?parseFloat(o.maxEventsPerCell):NaN;isNaN(s)?null!==n.maxEventsPerCell&&(a.maxEventsPerCell=n.maxEventsPerCell):a.maxEventsPerCell=s;const l={eventGroups:[],cellRanges:[],allDayEventGroups:[],allDayEventCellRanges:[]};let d=[];const c=t[t.length-1].cells;let u={events:[],eventCells:[]};for(let y=0;y<c.length;y++){const b=e.filter(v=>n._isEventPartOfGroup(v,c[y])),f=n._getTimelineEventCells(b,d),w=n._separateAllDayEvents(b,f);u.events=u.events.concat(w.allDayEvents),u.eventCells=u.eventCells.concat(w.allDayEventCells),w.events.length&&(a.events=w.events,a.eventCells=w.eventCells,l.eventGroups.push(w.events),l.cellRanges.push(w.eventCells),i=i.concat(n._createTimelineEvents(a)))}const m=u.events.slice();n._sortEventCellObjs(u.events,["day","week"].indexOf(n.viewType)>-1),u.eventCells=u.events.map(y=>u.eventCells[m.indexOf(y)]);for(let y=0;y<u.events.length;y++)a.events=u.events,a.eventCells=u.eventCells,a.isAllDay=!0,l.allDayEventGroups.push(u.events),l.allDayEventCellRanges.push(u.eventCells),i=i.concat(n._createTimelineEvents(a));return n._eventsBetween.eventCellDetails=l,i}_separateAllDayEvents(e,t){let[n,i,a,r]=[[],[],[],[]];if(["day","week"].indexOf(this.viewType)<0)a=e,r=t;else for(let o=0;o<e.length;o++){const s=e[o];s.allDay||s.dateEnd.getTime()-s.dateStart.getTime()>=864e5?(n.push(s),i.push(t[o])):(a.push(s),r.push(t[o]))}return{allDayEvents:n,allDayEventCells:i,events:a,eventCells:r}}_getViewEvents(){const e=this,t=e.viewType.toLowerCase(),n=e.dateCurrent,i=e.firstDayOfWeek;let a=new Date(n),r=new Date(n);if("agenda"===t)a.setHours(0,0,0,0),r.setDate(r.getDate()+6),r.setHours(23,59,59,999);else if(t.indexOf("month")>-1)if(a.setDate(1),e.hideOtherMonthDays)a.setHours(0,0,0,0),r=new Date(a),r.setDate(32),r.setDate(0),r.setHours(23,59,59,999);else{a.setDate(a.getDate()-(a.getDay()-i+7)%7),a.setHours(0,0,0,0),r=new Date(a);for(let o=0;o<5;o++)r.setDate(r.getDate()+7);r.setDate(r.getDate()+6),r.setHours(23,59,59,999)}else if(t.indexOf("week")>-1){"dateCurrent"!==e.viewStartDay&&a.setDate(a.getDate()-a.getDay()+i),r.setDate(a.getDate()+6),a.setHours(0,0,0,0);const o=e.views.find(s=>s.value&&s.value===e.view)||{};if(o.additionalDays){let s=new Smart.Utilities.DateTime(a);s=s.addDays(6+o.additionalDays),r=s.toDate()}r.setHours(23,59,59,999)}else t.indexOf("day")>-1&&(a.setHours(0,0,0,0),r.setHours(23,59,59,999));return e._getEventsBetween(a,r)}_refreshTimelineEvents(){const e=this;delete e._eventsBetween,"agenda"===e.viewType?e._createTimeline():(e._refreshEvents(),e._checkNotifications(!0))}_getTimelineEventCells(e,t){const n=this,i=["day","week"].indexOf(n.viewType)>-1,a=n.hideAllDay;let r=[];for(let o=0;o<e.length;o++){const s=e[o];let l,d=[];i&&(s.allDay||s.dateEnd.getTime()-s.dateStart.getTime()>=864e5)&&(l=!0),s.hidden||l&&a?r.push(d):(d=n._getEventTimelineCells(s,t,l),r.push(n._getEventTimelineCellRanges(d,l)))}return r}_createTimelineEvents(e){const t=this,n=e.events,i=e.eventCells,a=e.isAllDay,r=t.viewType,o=t.view,s=t.views.find(w=>w.value&&w.value===o)||{},l=t.eventRenderMode,d=e.maxEventsPerCell,c="classic"===l?"month"===r?t._monthViewNumberSize:0:t._eventCollectorSize,u=["day","week"].indexOf(r)>-1,m=t._getCellSize(),y=m[u?"width":"height"]-c,b=void 0!==d?y/d:Math.min(y,t._eventSize);let f={events:n,eventCells:i,viewType:r,viewDetails:s,isAllDayEvent:a,isMobile:t.$.timeline.hasAttribute("mobile"),isDayOrWeekView:u,rightToLeft:t.rightToLeft,eventRenderMode:l,eventSize:b,collectorSize:c,usedEventCells:[],eventIndexes:[],maxEventsPerCell:d};return a?(f.cellSize={height:t._allDayCellSize,width:m.width},f.spaceAvailable=t._allDayCellSize-c,f.currentEvents=t.$.allDayEventsContainer.children,void 0!==d&&(f.eventSize=f.spaceAvailable/d),t._setVerticalTimelineEvents(f)):(f.cellSize=m,f.spaceAvailable=y,f.currentEvents=t.$.timelineEventsContainer.children,u?t._setHorizontalTimelineEvents(f):t._setVerticalTimelineEvents(f)),f.usedEventCells}_setHorizontalTimelineEvents(e){const t=this,n=e.events,i=e.eventCells,a=e.eventRenderMode;if("modern"===a&&e.isMobile)return t._setAgendaOrMobileEvents(e);const r=e.eventIndexes,o=e.spaceAvailable,s="classic"===a?1:void 0!==e.maxEventsPerCell?e.eventSize:t._eventSize,[l,d]=[t.scrollTop,t.scrollLeft],[c,u]=[l+t._scrollViewSize.height,d+t._scrollViewSize.width],m=t._getEventsCollisionIndexes(e),y=m.eventOverlaps,b=m.eventCollisionsCount;for(let f=0;f<n.length;f++){const w=i[f],v=n[f];let S=b[f];for(let _=0;_<w.length;_++){const T=w[_],z=T[0];if(!z)continue;const M=T[T.length-1],[L,F]=[z.vertical,M.vertical],[B,J]=[z.horizontal,M.horizontal];if(F.top+F.height<l||L.top>c||J.left+J.width<d||B.left>u)continue;const Q=r[f],ee=y.filter(pe=>pe.indexOf(v)>-1);for(let pe=0;pe<ee.length;pe++){const fe=ee[pe].reduce((k,h)=>Math.max(k,b[n.indexOf(h)]||1),1);S=Math.max(S,fe)}"modern"===a&&(S=Math.min(Math.floor(o/s),S));let se=1;for(let pe=Q+1;pe<S&&ee.every(fe=>fe.map(k=>r[n.indexOf(k)]).indexOf(pe)<0);pe++)se++;e.eventObj=v,e.cellEventsCount=S,e.cellRange=T,e.eventIndex=Q,e.eventSize=o/S*se,"modern"===a&&(Q+1)*s>o?t._addEventToCollector(e):t._setEventCell(e)}}return e.usedEventCells}_getAllEventCollisions(e,t,n){const i=this;n||(n=t);for(let a=0;a<n.length;a++){let r=e.filter(o=>n[a].some(s=>o.indexOf(s)>-1)&&t.indexOf(o)<0);r.length&&(t=i._getAllEventCollisions(e,t.concat(r),r))}return t}_getEventsCollisionIndexes(e){const t=this,n=e.events,i=e.eventCells,a=e.eventIndexes;let r=[],o=[],s=0;for(let l=0;l<n.length;l++){const d=n[l];if(!i[l].length)continue;e.eventObj=d;const c=t._getEventsInCollision(e);let u=r.filter(m=>c.some(y=>m.indexOf(y)>-1));if(o[l]=c.length,u.length){s!==o[l]&&(u=t._getAllEventCollisions(r,u)),u.sort((y,b)=>b.length-y.length);let m=Math.max(c.length,u[0].length);u.forEach(y=>y.forEach(b=>{const f=n.indexOf(b);o[f]=Math.max(o[f]||0,m)}))}s=Math.max(s,o[l]),r[l]=c,a[l]=c.indexOf(d)}return{eventOverlaps:r,eventCollisionsCount:o}}_getEventsInCollision(e){const t=this,n=t._getEventCellDetails(e),i=n.eventCellStartTime,a=n.eventCellEndTime,o=n.vCellGroup,s=e.isDayOrWeekView&&void 0!==o?void 0:o||n.hCellGroup;let l=e.events,d=[],c=[];for(let u=0;u<l.length;u++){const m=l[u];if(s&&!t._isEventPartOfGroup(m,s))continue;const y=m.dateStart.getTime(),b=m.dateEnd.getTime();y>=i&&y<=a?d.push(m):b>i&&y<a&&c.push(m)}return!d.length&&c.length&&(d=c,c=[]),t._sortEventCellObjs(d,e.isDayOrWeekView),t._getOrderedEventCollision(e,d,c)}_sortEventCellObjs(e,t){e.sort(t?(n,i)=>{const a=n instanceof HTMLElement?n.$.event:n,r=i instanceof HTMLElement?i.$.event:i,o=a.dateStart.getTime(),s=r.dateStart.getTime();return o===s?r.dateEnd.getTime()-a.dateEnd.getTime():o-s}:(n,i)=>{const a=n instanceof HTMLElement?n.$.event:n,r=i instanceof HTMLElement?i.$.event:i;a.dateStart.getTime(),r.dateStart.getTime()})}_getOrderedEventCollision(e,t,n){const i=e.events,a=e.eventIndexes,r=Math.max(e.eventsInCollision||1,t.length+n.length);let o=[];if(n.length){const s=n.map(l=>a[i.indexOf(l)]);for(let l=0;l<r;l++){const d=n[s.indexOf(l)];if(d)o.push(d);else{const c=t.find(u=>o.indexOf(u)<0);c&&o.push(c)}}n.forEach(l=>o.indexOf(l)<0?o.push(l):null)}else o=t;return o}_getEventCellDetails(e){const t=this,n=t.viewType;if("month"===n)return t._getMonthEventCellDetails(e);const i=t.view,a=t.views.find(v=>v.value&&v.value===i)||{},r=e.eventObj,o=r.dateStart,s=r.dateEnd,l=t._getEventHorizontallCellObjs(r),d=t._getEventVerticalCellObjs(r),c=d.start||d.first,u=c.group;let m,y,b,f=l.start,w=0;if(f||(f=l.first),y=f.group,m=f.date,e.isAllDayEvent)m>o.getTime()&&(m=new Date(o),m.setHours(m.getHours(),0,0,0)),b=new Date(m),b.setHours(23,59,59,999),m=m.getTime(),b=b.getTime();else{let v=t._getCellsScaleCount();w=t._getEventScaleIndex(r,n.indexOf("timeline")>-1?f:c).start,m=t._getCellTime({horizontal:f,vertical:c,scaleIndex:w}),m>o.getTime()?(m=new Date(o),m.setHours(m.getHours(),0,0,0),m=m.getTime(),v=1):m<o.getTime()&&(m=new Date(m),m.setMinutes(o.getMinutes()),m=m.getTime()),b=m,b+="timelineMonth"===n||"timelineWeek"===n&&a&&a.hideHours?86399999:60/v*60*1e3-1,b>s.getTime()&&(b=new Date(b),b.setMinutes(s.getMinutes()),b=b.getTime())}return{eventCellStartTime:m,eventCellEndTime:b,hCellGroup:y,vCellGroup:u}}_getMonthEventCellDetails(e){const t=this,n=e.eventObj,i=n.dateStart,a=n.dateEnd,r=t._getEventVerticalCellObjs(n);let o,s,l,d,c,u=r.start||r.first;u=r.start,d=u.group;const m=new Date(u.date),y=new Date(u.date),b=Object.assign({},n);y.setDate(y.getDate()+6),y.setHours(23,59,59,999),m.setHours(0,0,0,0),b.dateStart=new Date(Math.max(i.getTime(),m.getTime())),b.dateEnd=new Date(Math.min(a.getTime(),y.getTime()));const f=t._getEventHorizontallCellObjs(b);return o=f.start,o||(o=f.first),l=o.group,s=o.date,s=t._getCellTime({horizontal:o,vertical:u,scaleIndex:0}),s>i.getTime()&&(s=new Date(i),s=s.getTime()),c=s+864e5-1,c>a.getTime()&&(c=new Date(c),c.setMinutes(a.getMinutes()),c=c.getTime()),{eventCellStartTime:s,eventCellEndTime:c,hCellGroup:l,vCellGroup:d}}_getEventScaleIndex(e,t){const n=this,i=n._getCellsScaleCount(),a=60/i,r=e.dateStart,o=e.dateEnd;let s,l,d,c,u=0,m=a;if(t){const y=t.date;let b=new Date(y),f=new Date(y);n.viewType.indexOf("timeline")<0&&(b=new Date(r),f=new Date(o),b.setHours(y.getHours(),y.getMinutes(),0,0),f.setHours(y.getHours(),y.getMinutes(),0,0)),b=b.getTime(),f=b+36e5,r.getTime()<=b&&(d=!0,s=0),o.getTime()>=f&&(c=!0,l=i-1)}if(void 0===s||void 0===l){const y=r.getMinutes(),b=o.getMinutes();for(let f=0;f<i;f++)!d&&u<=y&&m>=y&&(s=f),!c&&u<b&&m>=b&&(l=f),u+=a,m+=a}return{start:s||0,end:l||0}}_getEventVisibleDateRange(e){const t=this,n=e.dateStart,i=e.dateEnd;if(t.viewType.toLowerCase().indexOf("day")>-1)return{dateStart:n,dateEnd:i};const a=t.view,r=t.views.find(u=>u.value&&u.value===a)||{};let o,s,l=new Date(n),d=new Date(i),c=[];if(0===d.getHours()&&0===d.getMinutes()&&0===d.getSeconds()&&(d.setDate(d.getDate()-1),d.setHours(23,59,59,999)),(t.hideNonworkingWeekdays||r.hideNonworkingWeekdays)&&(t.nonworkingDays||r.nonworkingDays).forEach(u=>c.push(u)),(t.hideWeekend||r.hideWeekend)&&[0,6].forEach(u=>c.push(u)),![0,1,2,3,4,5,6].every(u=>c.indexOf(u)>-1)){for(;c.indexOf(l.getDay())>-1;)l.setDate(l.getDate()+1),o=!0;for(;c.indexOf(d.getDay())>-1;)d.setDate(d.getDate()-1),s=!0;return l.getTime()<=d.getTime()?{dateStart:o?l:n,dateEnd:s?d:i}:void 0}}_getEventHorizontallCellObjs(e){const t=this,n=t.hourStart,i=t.hourEnd,a=t._getEventVisibleDateRange(e);if(!a)return;const r=a.dateStart,o=a.dateEnd,s=r.getHours(),l=o.getHours(),d=r.getMinutes()+r.getSeconds()+r.getMilliseconds()===0,c=o.getMinutes()+o.getSeconds()+o.getMilliseconds()===0,u=o.getTime()>r.getTime()&&c,m=t.viewType,y=t.view,b=t.views.find(w=>w.value&&w.value===y)||{},f=r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()&&r.getDate()===o.getDate();return t._getEventCellObjs(e,function(w,v){let S;arguments.length?(S=!0,v||(v=w)):(w=r,v=o);let _=new Date(w),T=new Date(v);switch(m){case"agenda":_=r,T=o;break;case"day":case"week":case"timelineMonth":if(S)_.setHours(0,0,0,0),T.setHours(23,59,59,999);else{if(e.allDay||"day"!==m)T=new Date(o);else{const z=new Date(r);z.setHours(23,59,59,999),T=new Date(Math.min(o.getTime(),z.getTime()))}T.setHours(T.getHours(),T.getMinutes(),0,0),u&&(T=new Date(T.getTime()-1),T.setHours(T.getHours(),59,59,999))}break;case"timelineDay":case"timelineWeek":if("timelineWeek"===m&&b&&b.hideHours)return!S&&u&&(T=new Date(o.getTime()-1),T.setHours(T.getHours(),59,59,999)),{start:_.getDay(),end:T.getDay()};if(S){const z=w.getHours(),M=v.getHours();f&&(s<n&&(l<n||l===n&&c)||(s>i||s===n&&d)&&l>i)?(_.setHours(z,0,0,0),T.setHours(M,59,59,999)):(_.setHours(z===n&&s<n?s:z,0,0,0),T.setHours(M===i&&l>i?l:M,59,59,999))}else if(u&&(T=new Date(T.getTime()-1),T.setHours(T.getHours(),59,59,999)),!f){if(s>i){_.setHours(0),_.setDate(_.getDate()+1),_.setHours(n);const z=t._getEventVisibleDateRange({dateStart:_,dateEnd:T});_=z&&z.dateStart.getTime()<T.getTime()?z.dateStart:new Date(w)}if(l<n||l===n&&c){T.setHours(0),T.setDate(T.getDate()-1),T.setHours(i);const z=t._getEventVisibleDateRange({dateStart:_,dateEnd:T});T=z&&z.dateEnd.getTime()>_.getTime()?z.dateEnd:new Date(v)}l>i&&T.setHours(i)}break;case"month":return!S&&u&&(T=new Date(o.getTime()-1),T.setHours(T.getHours(),59,59,999)),{start:_.getDay(),end:T.getDay()}}return _=_.getTime(),T=T.getTime(),{start:_,end:T}},"horizontal")}_getEventVerticalCellObjs(e){const t=this,n=t.hourStart,i=t.hourEnd,a=t._getEventVisibleDateRange(e);if(!a)return;const r=a.dateStart,o=a.dateEnd,s=r.getHours(),l=o.getHours(),d=o.getTime()>r.getTime()&&o.getMinutes()+o.getSeconds()+o.getMilliseconds()===0,c=t.viewType;return t._getEventCellObjs(e,function(u,m){let y;arguments.length?(y=!0,m||(m=u)):(u=r,m=o);let b=new Date(u),f=new Date(m);switch(c){case"day":case"week":if(b=new Date(r),f=new Date(o),y){f=new Date(b);const w=u.getHours(),v=m.getHours();l<=n&&s<=n||s>=i&&l>=i?(b.setHours(w,0,0,0),f.setHours(v,59,59,999)):(b.setHours(w===n&&s<n?s:w,0,0,0),f.setHours(v===i&&l>i?l:v,59,59,999))}else b.setHours(b.getHours(),b.getMinutes(),0,0),f.setHours(f.getHours(),f.getMinutes(),0,0),d&&(f=new Date(f.getTime()-1),f.setHours(f.getHours(),59,59,999));break;case"agenda":y&&(b.setHours(0,0,0,0),f.setHours(23,59,59,999));break;case"month":y?(b.setHours(0,0,0,0),f=new Date(u),f.setDate(f.getDate()+6),f.setHours(23,59,59,999)):d&&(f=new Date(f.getTime()-1),f.setHours(f.getHours(),59,59,999));break;case"timelineDay":case"timelineWeek":case"timelineMonth":return{start:0,end:0}}return b=b.getTime(),f=f.getTime(),{start:b,end:f}},"vertical")}_getEventCellObjs(e,t,n="horizontal"){const i=this,a=i._timelineCells;if(!a||!a[n])return;const r=a[n],o=t(),s=o.start,l=o.end;let d,c,u,m,y,b;for(let f=0;f<r.length;f++){const w=r[f],v=w.date,S=w.group;if(S&&!i._isEventPartOfGroup(e,S))continue;const _=t(v,v),T=_.start,z=_.end;!d&&s>=T&&s<=z&&(d=w),l>=T&&l<=z&&(c=w),u||(u=w,y=T),m=w,b=T}return!d&&s<=y&&l>y&&(d=u),!c&&d&&(c=l>=y&&l<=b?d:m),{start:d,end:c,first:u,last:m}}_setVerticalTimelineEvents(e){const t=this,n=e.events,i=e.eventCells,a=e.eventRenderMode;if("agenda"===e.viewType||"modern"===a&&e.isMobile)return t._setAgendaOrMobileEvents(e);const r=e.isAllDayEvent,o=e.spaceAvailable,s=e.eventSize,l=Math.floor(o/s),d=e.eventIndexes,[c,u]=[t.scrollTop,t.scrollLeft],[m,y]=[c+t._scrollViewSize.height,u+t._scrollViewSize.width];let b,f;if("classic"===a||t.autoHeightAllDayCells){const w=t._getEventsCollisionIndexes(e,"vertical");b=w.eventOverlaps,f=w.eventCollisionsCount}t.autoHeightAllDayCells&&(t._allDayCellSize=t.__allDayCellSize);for(let w=0;w<n.length;w++){const v=i[w],S=n[w];e.eventObj=S;for(let _=0;_<v.length;_++){const T=v[_],z=T[0];if(!z)continue;e.cellRange=T;let M=d[w];if(void 0===M){const L=t._getEventsInCollision(e);e.cellEventsCount=L.length,d[w]=L.indexOf(S)}if(!r){const L=T[T.length-1],[F,B]=[z.vertical,L.vertical],[J,Q]=[z.horizontal,L.horizontal];if(B.top+B.height<c||F.top>m||Q.left+Q.width<u||J.left>y)continue}if(e.eventIndex=M=d[w],!t.autoHeightAllDayCells&&"modern"===a&&(M+1)*s>o)t._addEventToCollector(e);else{if("classic"===a||t.autoHeightAllDayCells){const L=b.filter(J=>J.indexOf(S)>-1),F=b[w].reduce((J,Q)=>Math.max(J,f[n.indexOf(Q)]||1),1);let B=1;for(let J=M+1;J<F&&L.every(Q=>Q.map(ee=>d[n.indexOf(ee)]).indexOf(J)<0);J++)B++;e.isMaxSizeReached=F>l,e.cellEventsCount=F,e.eventSize=Math.min(s,o/F*B),t.autoHeightAllDayCells&&(e.eventSize=s,t._allDayCellSize=Math.max(t._allDayCellSize,25+s*F),t.style.setProperty("--smart-scheduler-timeline-header-all-day-cells-size",t._allDayCellSize+"px"),t._refresh())}t._setEventCell(e)}}}}_setAgendaOrMobileEvents(e){const t=this,n=e.events,i=e.isAllDayEvent,a=e.eventCells,r="agenda"===e.viewType;let o,s,l,d;i||([o,s]=[t.scrollTop,t.scrollLeft],[l,d]=[o+t._scrollViewSize.height,s+t._scrollViewSize.width]);for(let c=0;c<n.length;c++){const u=a[c];e.eventObj=n[c],u.forEach(y=>{if(y[0])if(e.cellRange=y,i)r?t._setEventCell(e):t._addEventToCollector(e);else{const b=y[0],f=y[y.length-1],[w,v]=[b.vertical,f.vertical],[S,_]=[b.horizontal,f.horizontal];v.top+v.height>=o&&w.top<=l&&_.left+_.width>=s&&S.left<=d&&(r?t._setEventCell(e):t._addEventToCollector(e))}})}return e.usedEventCells}_addEventToCollector(e){const t=this,n=e.viewType,i=n.indexOf("timeline")>-1,a=e.eventObj,r=e.cellRange,o=e.usedEventCells,l=e.isAllDayEvent,d=e.isDayOrWeekView,c="month"===n,u=l?t.$.allDayEventsContainer:t.$.timelineEventsContainer,m=t._getCellsScaleCount(),y=t._setEventCell(e,!0),b=r.length,f=t.hasAttribute("tabindex")?t.tabIndex:void 0;let w=document.createDocumentFragment(),v={tabIndex:f};e:for(let S=0;S<b;S++){const _=r[S],T=_.scaleIndex,z=_.vertical.group||_.horizontal.group;let M;M=l?1:1===b?t._getEventScaleIndex(a,i?_.horizontal:_.vertical).end+1:S===b-1?T+1:m;for(let L=0===S&&T||0;L<M;L++){_.scaleIndex=L;const F=t._getCellTime(_);let B=t._findCollector(e,F,z);if(B){const J=B.$.events;J.map(Q=>Q.$.event).indexOf(a)<0&&(J.push(y),t._sortEventCellObjs(J,d))}else B=document.createElement("div"),B.classList.add("smart-scheduler-event"),B.setAttribute("collector",""),B.setAttribute("role","menuitem"),B.setAttribute("aria-haspopup",!0),B.$={group:z,cellTime:F,collector:!0,events:[y]},w.appendChild(B);if(c&&1===new Date(F).getDate()?B.setAttribute("first-month-day",""):B.removeAttribute("first-month-day"),v.eventCollector=B,v.cellObj=_,t._setEventCollectorStyles(e,v),t._setEventCellContent(B,e),o.indexOf(B)<0&&o.push(B),d&&!l)break e}_.scaleIndex=T}w.children.length&&u.appendChild(w)}_findCollector(e,t,n){const i=this;if(!e)return;const a=e.currentEvents;for(let r=0;r<a.length;r++){const o=a[r];if(o.$.events&&o.$.cellTime===t&&(!n||i._isEventPartOfGroup(o.$.group,n)))return o}}_setEventCollectorStyles(e,t){const i=e.cellSize,a=e.eventRenderMode,r=t.eventCollector,s=t.tabIndex,l=e.isMobile,d=e.rightToLeft?"right":"left",c=e.isAllDayEvent,u=e.isDayOrWeekView,m=this._getCellOffset(t.cellObj);let y=e.collectorSize;r.style[e.rightToLeft?"left":"right"]="","modern"===a&&l?(y=Math.min(i.width,i.height),r.style.width=r.style.height=y+"px",r.style[d]=m.left+(i.width-y)/2+"px",r.style.top=m.top+(i.height-y)/2+"px"):(r.style.top=m.top+"px",r.style.height=this._eventCollectorSize+"px",u&&!c?(r.style[d]=m.left+i.width-y+"px",r.style.width=y+"px"):(r.style[d]=m.left+"px",r.style.width=Math.max(0,i.width)+"px")),void 0!==s?r.tabIndex=s:r.removeAttribute("tabindex")}_removeEventFromCollector(e){const t=this,n=e.eventObj,i=e.cellRange;let a;for(let r=0;r<i.length;r++){const o=i[r],s=o.vertical.group||o.horizontal.group,l=t._getCellTime(o),d=t._findCollector(e,l,s);if(d){const c=d.$.events,u=c.map(m=>m.$.event).indexOf(n);u>-1&&(a=c.splice(u,1)[0]),c.length?t._setEventCellContent(d,e):d.remove()}}return a}_findEventElement(e,t,n){if(!e)return;const i=e.currentEvents;for(let a=0;a<i.length;a++){const r=i[a];if(r.$.event===n&&r.$.cellTime===t)return r}}_setEventCell(e,t){const n=this,i=e.viewType,a=e.eventObj,r=e.usedEventCells,o=a.$?a.$.event:void 0,s=a.dateStart,l=a.dateEnd,d=a.status,c=n._getCellTime(e.cellRange[0]),u=e.isAllDayEvent?n.$.allDayEventsContainer:n.$.timelineEventsContainer,m=n._dragDetails,y=n.tabIndex;let b,f,w=n._findEventElement(e,c,a);if(!t){const v=n._removeEventFromCollector(e);!w&&v&&(w=v)}if(!w||!n.hasAttribute("resized")||w!==m.schedulerEvent){if(w?w.classList.remove("smart-hidden"):(w=document.createElement("div"),w.classList.add("smart-scheduler-event"),w.setAttribute("role","menuitem"),w.setAttribute("aria-haspopup",!0)),n._setEventCellStyles(e,{eventCell:w}),"agenda"===i?(b=new Date(c),b.setHours(s.getHours(),s.getMinutes())):b=new Date(s),w.$||(w.$={}),f=w.$,f.cellTime=c,f.dateStart=b,f.dateEnd=new Date(b.getTime()+l.getTime()-s.getTime()),f.event=a,n.resources.forEach(v=>{void 0!==a[v.value]&&w.setAttribute(v.value,a[v.value])}),d&&n.statuses.some(v=>v.value===d)?w.setAttribute("status",d):w.removeAttribute("status"),o){const v=o.repeat.exceptions;w.setAttribute("repeating",""),v&&v.indexOf(a)>-1?w.setAttribute("exception",""):w.removeAttribute("exception")}else w.removeAttribute("repeating"),w.removeAttribute("exception");if(a.allDay?w.setAttribute("all-day",""):w.removeAttribute("all-day"),t)return w;n._setEventCellContent(w,e),n.hasAttribute("tabindex")?w.tabIndex=y:w.removeAttribute("tabindex"),a.disableResize?w.setAttribute("disable-resize",""):w.removeAttribute("disable-resize"),w.setAttribute("title",a.label),r.indexOf(w)<0&&r.push(w),u.contains(w)||u.appendChild(w)}}_setEventCellStyles(e,t){const n=this,i=e.viewType,a=e.eventObj,r=e.eventIndex,o=t.eventCell,s=e.collectorSize,l=e.cellRange,d=e.cellSize,c=l[0],u=l[l.length-1],m=n._getCellOffset(c),y=e.isDayOrWeekView,b=e.isAllDayEvent,f=e.rightToLeft?"right":"left",w=i.indexOf("timeline")>-1,v=e.viewDetails,S=["timelineDay","timelineWeek"].indexOf(i)>-1,_=a.class?Array.isArray(a.class)?a.class:[a.class]:[];let T=a.backgroundColor,z=a.color;if(!T||!z){const M=n.resources.find(L=>void 0!==a[L.value]);if(M&&M.dataSource){const L=M.dataSource.find(F=>F.id===a[M.value]);L&&(T=T||L.backgroundColor,z=z||L.color)}}if(o.style[e.rightToLeft?"left":"right"]="",o.style.setProperty("--smart-scheduler-event-background",n._getRGBA(T)),o.style.setProperty("--smart-scheduler-event-focus",n._getRGBA(T,-1)),o.style.setProperty("--smart-scheduler-event-hover",n._getRGBA(T,-2)),o.style.setProperty("--smart-scheduler-event-color",n._getRGBA(z)),o.style.setProperty("--smart-scheduler-event-color-hover",n._getRGBA(z)),o.style.setProperty("--smart-scheduler-event-color-focus",n._getRGBA(z)),"agenda"===i)o.style.top=m.top+"px",o.style[f]=m.left+"px",o.style.width=d.width+"px",o.style.height=d.height+"px";else{const M=e.cellEventsCount,L=u.scaleIndex;let F,B=0,J=0,Q=e.eventSize;if((S||y)&&(B=n._getEventCellOffset(a,c)),c===u&&(u.scaleIndex=n._getEventScaleIndex(a,w?u.horizontal:u.vertical).end),F=n._getCellOffset(u),y&&!b){B=parseFloat((d.height*B).toFixed(2)),J=parseFloat((d.height*n._getEventCellOffset(a,u,!0)).toFixed(2));const ee=J+F.top-m.top-B;o.style.height=(0===ee?d.height:ee)+"px",o.style.width=Q+"px",o.style.top=m.top+B+"px",o.style[f]=m.left+r*((d.width-s)/M)+"px"}else{"timelineDay"!==i&&("timelineWeek"!==i||v&&v.hideHours)?(J=d.width,B=0):(B=parseFloat((d.width*B).toFixed(2)),J=parseFloat((d.width*n._getEventCellOffset(a,u,!0)).toFixed(2)));const ee=J+F.left-m.left-B;o.style.height=Q+"px",o.style.width=(0===ee?d.width:ee)+"px",o.style[f]=m.left+B+"px",o.style.top="classic"===n.eventRenderMode&&e.isMaxSizeReached?m.top+s+r*((d.height-s)/M)+"px":m.top+s+r*Q+"px"}_.length?_.forEach(ee=>o.classList.add(ee)):"smart-scheduler-event"!==o.className&&(o.className="smart-scheduler-event"),void 0!==a.id?o.id=a.id+"":delete a.id,u.scaleIndex=L}}_getEventCellOffset(e,t,n){if(void 0===t.scaleIndex)return 0;const i=["day","week"].indexOf(this.viewType)>-1?"vertical":"horizontal",a=60/this._getCellsScaleCount()*60*1e3;let r=n?e.dateEnd:e.dateStart,o=t[i].date;return o=new Date(o.getTime()+a*t.scaleIndex),"vertical"===i&&(o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),o.getHours(),o.getMinutes(),0,0),o.getHours()!==r.getHours())?n?1:0:(o=o.getTime(),r=r.getTime(),Math.max(0,Math.min(1,o>r?n?1:0:parseFloat(((r-o)/a).toFixed(2)))))}_getRGBA(e,t){if(!e)return"";const n=/^#(.)(.)(.)$/gi.exec(e),i=void 0!==t&&t<0?parseFloat((1+t/10).toFixed(2)):void 0;let a,r,o,s;if(n)a=parseInt(n[1]+n[1],16),r=parseInt(n[2]+n[2],16),o=parseInt(n[3]+n[3],16),t<0&&(t=parseFloat((1+t/10).toFixed()));else{const l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);if(!l)return"";a=parseInt(l[1],16),r=parseInt(l[2],16),o=parseInt(l[3],16),s=parseInt(l[4],16)/255,isNaN(s)||(t=parseFloat((void 0!==t&&t<0?s+t/10:s).toFixed(2)))}return void 0!==t&&t<0&&(t=i),`rgba(${a},${r},${o},${t||1})`}_getCellRanges(e,t="horizontal"){if(!e)return[];const n=this._timelineCells[t],r=e.first,o=e.last;if(!e.start&&!e.end||!r&&!o)return[];const l=e.end||o,d=n.indexOf(e.start||r),c=n.indexOf(l),u=n.indexOf(r),m=n.indexOf(o);let y=[];return y=d>c?[{fromIndex:d,toIndex:m},{fromIndex:u,toIndex:c}]:[{fromIndex:d,toIndex:c}],y}_getEventTimelineCells(e,t,n){const i=this,a=i.viewType,r="agenda"===a,o=new Date(e.dateStart),s=new Date(e.dateEnd),l=i._timelineCells.horizontal,d=i._timelineCells.vertical;let c=[];if("month"===a)return i._getEventTimelineCellsMonth(e);if(n){const f={height:i._allDayCellSize,top:0,date:new Date(i.dateCurrent)};return f.date.setHours(0,0,0,0),i._getCellRanges(i._getEventHorizontallCellObjs(e)).forEach(w=>{const S=w.toIndex;for(let _=w.fromIndex;_<=S;_++){const T=l[_],z=T.group;z&&!i._isEventPartOfGroup(e,z)||c.push({allDay:!0,horizontal:T,vertical:f})}}),c}const u=Object.assign({},e),m=a.indexOf("timeline")>-1;let y,b;return i._getCellRanges(i._getEventHorizontallCellObjs(e)).forEach(f=>{const w=f.fromIndex,v=f.toIndex;for(let S=w;S<=v;S++){const _=l[S],T=new Date(_.date),z=_.group;let M,L=new Date(_.date);if(!z||i._isEventPartOfGroup(e,z)){if(o.getTime()>=T.getTime()&&T.setHours(o.getHours(),o.getMinutes()),L.setHours(s.getHours(),s.getMinutes()),L.getTime()<T.getTime())if("timelineWeek"===a||"timelineDay"===a)for(;L.getTime()<T.getTime();){const F=L.getHours();L.setHours(F+1,0,0,0),F===L.getHours()&&L.setHours(L.getHours()+2,0,0,0)}else L.setDate(L.getDate()+1),L.setHours(0,0,0,0);r||(u.dateStart=T,u.dateEnd=L),i._getCellRanges(i._getEventVerticalCellObjs(u),"vertical").forEach(F=>{const B=F.fromIndex,J=F.toIndex;for(let Q=B;Q<=J;Q++){const ee=d[Q],se=ee.group;if(se&&!i._isEventPartOfGroup(u,se)||r&&(M&&M.date.getTime()===ee.date.getTime()||t.some(fe=>fe.horizontal===_&&fe.vertical===ee)))continue;const pe={horizontal:_,vertical:ee};m&&S!==w||Q!==B?m&&S!==v||Q!==J||(void 0===b&&(b=i._getEventScaleIndex(e,m?_:ee).end),pe.scaleIndex=b):(void 0===y&&(y=i._getEventScaleIndex(e,m?_:ee).start),pe.scaleIndex=y),M=ee,c.push(pe),t.push(pe)}})}}}),c}_getEventTimelineCellsMonth(e){const t=this,n=new Date(e.dateStart),i=new Date(e.dateEnd),a=t._timelineCells.horizontal,r=t._timelineCells.vertical,o=Object.assign({},e);let s=[];return t._getCellRanges(t._getEventVerticalCellObjs(e),"vertical").forEach(l=>{const d=l.fromIndex,c=l.toIndex;for(let u=d;u<=c;u++){const m=r[u],y=new Date(m.date),b=new Date(m.date),f=m.group;f&&!t._isEventPartOfGroup(e,f)||(b.setDate(b.getDate()+6),b.setHours(23,59,59,999),y.setHours(0,0,0,0),o.dateStart=new Date(Math.max(n.getTime(),y.getTime())),o.dateEnd=new Date(Math.min(i.getTime(),b.getTime())),t._getCellRanges(t._getEventHorizontallCellObjs(o)).forEach(w=>{const S=w.toIndex;for(let _=w.fromIndex;_<=S;_++){const T=a[_],z=m.group;if(z&&!t._isEventPartOfGroup(e,z))continue;const M={horizontal:T,vertical:m};u!==d&&u!==c||(M.scaleIndex=0),s.push(M)}}))}}),s}_getEventTimelineCellRanges(e,t){const n=this,i=n.viewType;if(!e.length)return[];if("agenda"===i)return e.map(a=>[a]);{let a,r=[],o=[];const s=["day","week"].indexOf(i)>-1&&!t;for(let l=0;l<e.length;l++){const d=e[l];if(!a){r.push(a=d);continue}const c=d.horizontal,u=d.vertical,m=a.horizontal,y=a.vertical,b=n._getCellOffset(d,void 0===u.scaleIndex),f=n._getCellOffset(a,void 0===u.scaleIndex);!s&&(u!==y||f.right!==b.left)||s&&(c!==m||f.bottom!==b.top)?(o.push(r),r=[d]):r.push(d),a=d}return r.length&&o.push(r),o}}_getCellSize(e){const t=this,n=t.viewType;let i,a;if(e){let l=e;if(e instanceof HTMLElement&&(l=e.$?e.$.cellObj:void 0),!l)return{width:0,height:0};i=l.vertical,a=l.horizontal}else{const l=t._timelineCells,d=l.vertical,c=l.horizontal;if(!d.length||!c.length)return{width:0,height:0};i=d[0],a=c[0]}const r=t._getCellsScaleCount();let o,s;switch(n){case"agenda":case"month":case"timelineMonth":o=a.width,s=i.height;break;case"day":case"week":o=a.width,s=i.height/r;break;case"timelineDay":case"timelineWeek":o=a.width/r,s=i.height}return{width:o,height:s}}_getCellOffset(e,t){const n=this.viewType;let i,a,r=e;if(!e)return{left:0,top:0};if(e instanceof HTMLElement&&(r=e.$?e.$.cellObj:void 0),!r)return{left:0,top:0};i=r.vertical,a=r.horizontal;const o=this._getCellsScaleCount(),s=t||r.allDay?0:r.scaleIndex||0;let l,d;switch(n){case"agenda":case"month":case"timelineMonth":l=a.left,d=i.top;break;case"day":case"week":l=a.left,d=parseFloat((i.top+i.height/o*s).toFixed(2));break;case"timelineDay":case"timelineWeek":l=parseFloat((a.left+a.width/o*s).toFixed(2)),d=i.top}return{left:l,right:parseFloat((l+a.width).toFixed(2)),top:d,bottom:parseFloat((d+i.height).toFixed(2))}}_getCellDateRange(e){const t=this;let n=e;if(e instanceof HTMLElement&&(n=e&&e.$?e.$.cellObj:void 0),!n)return;const i=t.viewType;let a=new Date(n.time?n.time:t._getCellTime(n)),r=new Date(a);switch(i){case"agenda":case"month":case"timelineMonth":r.setHours(23,59,59,999);break;case"week":case"day":case"timelineWeek":case"timelineDay":n.allDay?r.setHours(23,59,59,999):r=new Date(r.getTime()+60/t._getCellsScaleCount()*60*1e3)}return{dateStart:a,dateEnd:r}}_setEventCellContent(e,t){const n=this,i=t.eventObj;if(!e||!i)return;const a=t.isDayOrWeekView,r=t.isAllDayEvent;let o=e.querySelector(".smart-scheduler-event-content");if(e.$&&e.$.events){const d=e.$.events;if(o||(e.innerHTML='<div class="smart-scheduler-event-content"><div></div></div>',o=e.firstElementChild),n.eventCollectorTemplate)n._applyTemplate("eventCollectorTemplate",o,d.map(c=>n._cloneObject(c)));else{const c=n.eventRenderMode,u=n.$.timeline.hasAttribute("mobile"),m=d.length+(u||"modern"===c&&a&&!r?"":" "+n.localize("collector"));o.firstElementChild.textContent=m}return}o||(e.innerHTML='<div class="smart-scheduler-event-content"></div><div class="smart-scheduler-event-button"></div>',o=e.firstElementChild);const s=e.querySelector(".smart-scheduler-event-button");let l;if(s&&(s.tabIndex=t.tabIndex),t.isTooltipEvent&&n.eventTooltipTemplate)n._applyTemplate("eventTooltipTemplate",o,n._cloneObject(i));else if(n.eventTemplate)n._applyTemplate("eventTemplate",o,n._cloneObject(i));else{const d=void 0!==t.isMonthView?t.isMonthView:["timelineMonth","month"].indexOf(n.viewType)>-1;let c=o.querySelector(".smart-scheduler-event-time"),u=i.label;l=o.querySelector(".smart-scheduler-event-label");const m=n.locale,y=i.dateStart,b=i.dateEnd;let f;if(t.isAllDayEvent||d){const w="short",v=n.dayFormat;if(y.getFullYear()===b.getFullYear()&&y.getMonth()===b.getMonth()&&y.getDate()===b.getDate())f=new Intl.DateTimeFormat(m,{day:v,month:w}).format(y);else{const S=new Intl.DateTimeFormat(m,{day:v,month:w});f=S.format(y)+" - "+S.format(b)}}else{const w=new Intl.DateTimeFormat(m,{hour:n.hourFormat,minute:n.minuteFormat});f=w.format(y)+" - "+w.format(b)}if(c&&l||(o.innerHTML=i.label+""?'\n                            <div role="presentation"><label class="smart-scheduler-event-label"></label></div>\n                            <div role="presentation"><label class="smart-scheduler-event-time"></label></div>':'<div role="presentation"><label class="smart-scheduler-event-time"></label></div>',l=o.querySelector(".smart-scheduler-event-label"),c=o.querySelector(".smart-scheduler-event-time")),l&&(l.textContent=u),c&&(c.textContent=f,l&&d&&t.eventSize<45?o.setAttribute("single-line",""):o.removeAttribute("single-line")),t.isTooltipEvent&&i.conference&&/^(ftp|http|https):\/\/[^ "]+$/.test(i.conference)){const w=document.createElement("div");w.innerHTML=`<a target="_blank" href="${i.conference}" class="info">${n.localize("join")}</a>`,w.classList.add("meeting");const v=i.conference;v.startsWith("https://zoom.us/")?w.innerHTML=`<a target="_blank" href="${i.conference}" class="info">${n.localize("joinWith",{value:"Zoom"})}</a>`:v.startsWith("https://meet.google.com/")?w.innerHTML=`<a target="_blank" href="${i.conference}" class="info">${n.localize("joinWith",{value:"Google Meet"})}</a>`:v.startsWith("https://teams.microsoft.com/")&&(w.innerHTML=`<a target="_blank" href="${i.conference}" class="info">${n.localize("joinWith",{value:"Microsoft Teams"})}</a>`),o.appendChild(w)}}}_createTimeline(){const e=this,t=e.resizeTrigger,n=e.scrollTop,i=e.scrollLeft,a=e.$.timeline;let r,o;t&&(r=t.offsetWidth,o=t.offsetHeight,t.style.display="none"),delete e._selectedCellObj,delete e._eventsBetween,e._createTimelineHeader(),e._refreshTimelineContentCells(),e._handleMenuAria(),a.classList.contains("no-agenda")?a.setAttribute("agenda-placeholder",e.localize("agendaPlaceholder")):a.removeAttribute("agenda-placeholder"),e.scrollTop=n,e.scrollLeft=i,t&&(t.style.display=null,r===t.offsetWidth&&o===t.offsetHeight||(e._noResizeHandler=!0)),e._refreshEvents(),e._checkNotifications()}_createTimelineHeader(){const e=this,t=e.$.timelineContent;if(t.style.width=t.style.height=null,Smart.Utilities.Core.Browser.Chrome){const n=e.$.timelineHeaderVertical;n.style.display="none",n.style.display=null}e._validateEventDateRange(),e._createTimelineCellsObj(),e._createTimelineHeaderCells("horizontal"),e._createTimelineHeaderCells("vertical"),e._refreshTimelineHeaderCells(),e._refreshTimelineAllDayCells(),e._refresh()}_validateEventDateRange(e){const t=this.viewType;if(["month","agenda"].indexOf(t.toLowerCase())>-1)return;const n="day"===t||"week"===t,i=e?[e]:this._events;for(let a=0;a<i.length;a++){const r=i[a],o=r.dateStart,s=r.dateEnd;n&&s.getTime()-o.getTime()>=864e5&&(r.allDay=!0),r.allDay&&(r.dateStart.setHours(0,0,0,0),r.dateEnd.setHours(23,59,59,999))}}_handleMenuAria(){const e=this,n=e.$.viewItemsButton,i=e.$.tooltip;e.$.currentDate.setAttribute("aria-haspopup",!0),n.setAttribute("aria-controls",i.id),n.setAttribute("aria-haspopup",!0)}_handleTimelineGroupHeader(e){const t=this,n=t._timelineCells.groups;let i=t.$.groupsContainer;if(!n||!n.length||"agenda"===t.viewType&&!Object.keys(e.vertical).length)return void(i&&i.remove());i||(i=document.createElement("div"),i.classList.add("smart-scheduler-groups-container"),i.innerHTML='\n                        <div class="smart-scheduler-view-groups-label-container" role="presentation"></div>\n                        <div class="smart-scheduler-view-groups-content" role="presentation">\n                            <div class="smart-scheduler-view-header-groups-container" role="presentation"></div>\n                        </div>',t.$.groupsContainer=i);const a=t.view,r=t.views.find(s=>s.value&&s.value===a)||{},o="vertical"!==(r&&r.groupOrientation?r.groupOrientation:t.groupOrientation)?t.$.timelineHeaderHorizontal:t.$.timelineHeaderVertical;o.contains(i)||o.insertBefore(i,o.firstElementChild)}_handleTimeZoneHeader(e){const t=this;e||(e="horizontal",t._handleTimeZoneHeader("vertical"));const n=t.viewType.toLowerCase(),i=n.indexOf("timeline")>-1,a=("vertical"===e?t.$.timelineHeaderVerticalContent:t.$.timelineHeaderHorizontalContent).querySelector(".smart-scheduler-view-time"),r=a.children,o=t.$.timelineViewCellsLabelContainer,s=!i&&"agenda"!==n&&"vertical"===e||"horizontal"===e&&i;let l=t.timeZones.slice(0);const d=t.$.viewDetailsLabel,c=t.$.timelineViewAllDay,u=t.$.timelineTimeZoneLabelContainer;if(u.remove(),d&&d.remove(),t._recycleContainerCells({fragment:a,cellsNeeded:1+(s&&n.indexOf("month")<0?l.length:0),className:"smart-scheduler-cells"}),l.push(t.timeZone),(i&&s||!i)&&t._recycleContainerCells({fragment:o,cellsNeeded:!i&&n.indexOf("month")<0&&"agenda"!==n?l.length:0,className:"smart-scheduler-time-zone"}),c.offsetHeight&&o.offsetHeight&&(t.$.timelineViewAllDaylabel.style.maxWidth=o.offsetWidth+"px"),s){const m=u.parentElement;t._recycleContainerCells({fragment:u,cellsNeeded:1===r.length?0:r.length,className:"smart-scheduler-time-zone"}),r.length&&m&&m.appendChild(u)}}_createTimelineHeaderCells(e="vertical"){const t=this,n=t.viewType.toLowerCase(),i=n.indexOf("timeline")>-1,a="vertical"===e?t.$.timelineHeaderVerticalContent:t.$.timelineHeaderHorizontalContent,r=a.querySelector(".smart-scheduler-view-time"),o=a.querySelector(".smart-scheduler-view-details"),s=r.children,l=!i&&"agenda"!==n&&"vertical"===e||"horizontal"===e&&i;let d=t.timeZones.slice(0);const c=t._getTimelineVisibleCellsCount(e),u=t.timeZone,m=s.length;d.push(t.timeZone);for(let y=0;y<m;y++){const b=s[y],f=d[y];b.timeZone=1===m?u:f.id||f,t._recycleContainerCells({fragment:b,cellsNeeded:c})}if(o&&t._recycleContainerCells({fragment:o,cellsNeeded:t._getTimelineVisibleCellsCount({orientation:e,type:"details"})}),t._createTimelineHeaderGroupCells(e),l){const y=t.$.timelineTimeZoneLabelContainer,b=t.$.timelineViewCellsLabelContainer;y.remove();const f=t.$.timelineAllDayLabelContainer;let w=t.$.viewDetailsLabel;if(i&&n.indexOf("week")>-1&&o?(w||(w=document.createElement("div"),w.classList.add("smart-scheduler-view-details-label"),t.$.viewDetailsLabel=w),w.parentElement||b.appendChild(w)):w&&w.parentElement&&w.remove(),!y.children.length)return;!i&&f.offsetHeight?f.appendChild(y):b.offsetHeight&&b.appendChild(y)}}_createTimelineHeaderGroupCells(e){const t=this,n=t.view,i=t.viewType,a=i.indexOf("timeline")>-1,r=t.views.find(b=>b.value&&b.value===n)||{},o=t._timelineCells,s=o.groups,l=r&&r.groupOrientation?r.groupOrientation:t.groupOrientation;let d=t.$.groupsContainer;if("vertical"===e&&"vertical"!==l||("horizontal"===e&&"day"!==i||!e)&&"vertical"===l||(d&&d.remove(),!s||!s.length||"agenda"===i&&!o.vertical.length))return;const c=t._timelineCells.groups,u=d.querySelector(".smart-scheduler-view-header-groups-container"),m=u.children;t._recycleContainerCells({fragment:u,cellsNeeded:c.length,className:"smart-scheduler-cell-container",role:"row"});for(let b=0;b<m.length;b++)t._recycleContainerCells({fragment:m[b],cellsNeeded:t._getTimelineVisibleCellsCount({orientation:e,type:"groups",resource:c[b].resource})});let y="vertical"===e||i.toLowerCase().indexOf("month")>-1?0:t.timeZones.length+("month"===i?0:1);if(a&&(y=y>1?1:0),"agenda"===i&&(y="vertical"!==l&&t._timelineCells.vertical.length?1:0),t._recycleContainerCells({fragment:d.querySelector(".smart-scheduler-view-groups-label-container"),cellsNeeded:y,className:"smart-scheduler-time-zone"}),!d.parentElement&&e===l){const b="horizontal"===e?t.$.timelineHeaderHorizontal:t.$.timelineHeaderVertical;b.insertBefore(d,b.firstElementChild)}}_recycleContainerCells(e){const n=e.fragment;if(!n)return;const i=n.children,a=n.children.length,r=e.cellsNeeded,o=e.className,s=e.role,l=e.isBackwards?"lastElementChild":"firstElementChild";if(a>r)for(;i.length&&i.length!==r;)n.removeChild(n[l]);else a<r&&n.appendChild(this._createCells(r-a,o,s))}_createTimelineCellsObj(){const e=this,t=e.viewType,n=t.indexOf("timeline")>-1,i=e._getCellsCount(),a=e._getCellsScaleCount(),r=window.getComputedStyle(e);e.timeZones.length>0&&n&&"timelineMonth"!==t?e.$.timeline.setAttribute("show-vertical-header",""):e.$.timeline.removeAttribute("show-vertical-header");let o=Math.max(parseFloat(r.getPropertyValue("--smart-scheduler-timeline-cell-height"))||0,parseFloat(r.getPropertyValue("--smart-scheduler-timeline-cell-min-height")||0)),s=Math.max(parseFloat(r.getPropertyValue("--smart-scheduler-timeline-cell-width"))||0,parseFloat(r.getPropertyValue("--smart-scheduler-timeline-cell-min-width")||0));e._eventSize=parseFloat(r.getPropertyValue("--smart-scheduler-event-size"))||0,e._allDayCellSize=parseFloat(r.getPropertyValue("--smart-scheduler-timeline-header-all-day-cells-size"))||e.$.timelineViewAllDay.offsetHeight,e.__allDayCellSize||(e.__allDayCellSize=e._allDayCellSize),e._eventCollectorSize=parseFloat(r.getPropertyValue("--smart-scheduler-event-collector-size"))||0,e._monthViewNumberSize="month"!==t?0:parseFloat(r.getPropertyValue("--smart-scheduler-month-view-number-size"))||0,t.indexOf("timeline")>-1?s*=a:o*=a,e._timelineCells={},e._scrollViewSize={},e.groups.length&&(e._timelineCells.groups=e._getTimelineCellsObjGroups()),e._handleTimelineGroupHeader(i),e._handleTimeZoneHeader(),e._refresh(),e._handleTimelineContentSize(i,o,"height");let l=e.$.timelineContainer.offsetHeight;e._handleTimelineContentSize(i,s,"width"),l!==(l=e.$.timelineContainer.offsetHeight)&&e._handleTimelineContentSize(i,o,"height"),e._scrollViewSize.height=l,e._scrollViewSize.width=e.$.timelineContainer.offsetWidth,e._timelineCells.horizontal=e._getTimelineCellsObjHorizontal(i.horizontal,s),e._timelineCells.vertical=e._getTimelineCellsObjVertical(i.vertical,o),"timelineWeek"===t&&(e._timelineCells.details=e._getTimelineCellsObjDetails())}_getResourceGroups(){const e=this,t=e.groups,n=e.resources;let i,a=[];if(!t.length||!n.length)return[];for(let o=0;o<t.length;o++){const s=n.find(d=>d.value===t[o]);if(!s||!s.dataSource.length)continue;const l=e._getResourceData(s);if(Object.keys(l).length){const d=Object.values(l),c=i?i.cells.length:1;let u=[];e._applyResourceSorting(s,d);for(let m=0;m<c;m++)for(let y=0;y<d.length;y++){const b={resource:s.value,label:d[y].label,group:i?Object.assign({},i.cells[m].group):{},groupSeparator:!0};b.group[s.value]=d[y].id,u.push(b)}a.push(i={resource:s.value,groups:d,cells:u})}}return a}_getResourceData(e){const t=e?e.dataSource:void 0;if(!t||!t.length)return;let n={};for(let i=0;i<t.length;i++){const a=t[i];n[a.id]={id:a.id,label:a.label,color:a.color}}return n}_applyResourceSorting(e,t){const n=this,i=e.sortFunction?e.sortFunction:n.sortFunction,a=e.sortBy?e.sortBy:n.sortBy;if(!a)return;const o=(s,l)=>{const d=s[a],c=l[a];return"string"==typeof d&&"string"==typeof c?d.toLowerCase().localeCompare(c.toLowerCase()):"boolean"==typeof d&&"boolean"==typeof c?d===c:d instanceof Date&&c instanceof Date?d.getTime()-c.getTime():d-c};switch(e.sortOrder?e.sortOrder:n.sortOrder){case"asc":case"ascending":t.sort((s,l)=>o(s,l));break;case"desc":case"descending":t.sort((s,l)=>o(l,s));break;case"custom":"function"==typeof i&&t.sort(i);break;default:return}}_getTimelineCellsObjGroups(){const e=this,t=e._getResourceGroups();let n=[];if(!t.length)return n;for(let i=t.length-1;i>-1;i--){const a=t[i];if(n.length){const r=n.slice(0);n=[],a.groups.forEach(o=>{r.forEach(s=>{const l=Object.assign({},s);l.group=Object.assign({},l.group),l.group[a.resource]=o.id,n.push(l)})})}else a.groups.forEach(r=>{const o={label:r.label,color:r.color,group:{},resource:a.resource,groupSeparator:!0};o.group[a.resource]=r.id,n.push(o)})}if(n.length){const i=e.view,a=e.views.find(o=>o.value&&o.value===i)||{};e.$.timeline.setAttribute("show-group-header",a&&a.groupOrientation?a.groupOrientation:e.groupOrientation)}else e.$.timeline.removeAttribute("show-group-header");return t[t.length-1].cells=n,t}_getTimelineCellsObjHorizontal(e,t){const n=this,i=n.view,a=n.viewType,r=i.indexOf("timeline")>-1,o=n.views.find(u=>u.value&&u.value===i)||{},s=new Date(n.dateCurrent);s.setHours(r?n.hourStart:0,0,0,0);const l=n.firstDayOfWeek;let d,c;switch(a){case"week":case"timelineWeek":"dateCurrent"!==n.viewStartDay&&s.setDate(s.getDate()-s.getDay()+l),c=n.hideWeekend||o.hideWeekend,d=n.hideNonworkingWeekdays||o.hideNonworkingWeekdays;break;case"month":case"timelineMonth":s.setDate(1),r||"dateCurrent"!==n.viewStartDay&&s.setDate(s.getDate()-s.getDay()+l),s.setHours(0,0,0,0),c=n.hideWeekend||o.hideWeekend,d=n.hideNonworkingWeekdays||o.hideNonworkingWeekdays}return n._getCellsObject({orientation:"horizontal",cells:[],cellSize:t,cellCount:e,date:s,hideWeekend:c,hideNonworkingWeekdays:d,hourStart:n.hourStart,hourEnd:n.hourEnd,viewSize:n.$.timelineContent.offsetWidth,viewDetails:o,offset:0})}_getCellsObject(e){const t=this,n=t.view,i=t.viewType,a=e.viewDetails||t.views.find(f=>f.value&&f.value===n)||{},r=t._timelineCells.groups,o=a&&a.groupOrientation?a.groupOrientation:t.groupOrientation,s=e.cellCount,l=e.viewSize,d=e.orientation,c=e.cells;let u,m=e.cellSize,[y,b]="horizontal"===d?["width","left"]:["height","top"];if(e.restrictedDates=t.restrictedDates,e.restrictedHours=t.restrictedHours,r&&r.length&&(u=r[r.length-1].cells),!u||!u.length||"horizontal"===d&&"vertical"===o||"vertical"===d&&"vertical"!==o)s*m<l&&(m=l/s),e.cellSize=parseFloat(m.toFixed(2)),"agenda"===i&&u&&u.length&&(e.groups=u),t._createCellObjects(e);else{const f=u.length;if(1===s){let w=l/f;w>=m&&(m=w)}else{const w=s*f;w*m<l&&(m=l/w)}if(e.cellSize=parseFloat(m.toFixed(2)),t.groupByDate&&d===o)e.groupHeader=r[r.length-1],t._createCellObjects(e);else{for(let w=0;w<u.length;w++){const v=u[w];v[b]=e.offset,e.size=0,e.group=v.group,t._createCellObjects(e),v[y]=e.size||0,t._refreshGroupHeaderCells(d,v)}c.length||t._createCellObjects(e)}}return c}_refreshGroupHeaderCells(e="horizontal",t){const n=t.group,i=this._timelineCells.groups;if(!i)return;let a=t.date,r=a?"cellsByDate":"cells";const[o,s]="horizontal"===e?["width","left"]:["height","top"];i.forEach(l=>{if(l.resource!==t.resource){const d=l[r];for(let c=0;c<d.length;c++){const u=d[c],m=u.group;a&&a.getTime()!==u.date.getTime()||Object.keys(m).every(y=>m[y]===n[y])&&(u[o]=(void 0===u[o]?0:u[o])+t[o],void 0===u[s]&&(u[s]=t[s]))}}})}_createCellObjects(e){"horizontal"===e.orientation?this._createCellsObjectHorizontal(e):this._createCellsObjectVertical(e)}_createCellsObjectHorizontal(e){if(!e)return[];const t=this,n=t.viewType,i=n.indexOf("timeline")>-1,a=e.cells,r=new Date(e.date),o=e.cellSize,s=e.cellCount,l=e.hideWeekend,d=e.hideNonworkingWeekdays,c=e.hourStart,u=e.hourEnd,m=e.group,y=e.groupHeader,b=e.viewDetails,f=["timelineDay","timelineWeek"].indexOf(n)>-1;let w,v,S,_,T,z=e.offset,M=0;"agenda"===n?v=S=_=T=[]:(v=t.nonworkingDays,S=t.nonworkingHours,_=e.restrictedDates,T=e.restrictedHours),f?r.setHours(c):r.setHours(0,0,0,0);for(let L=0;L<s;L++){if(w={width:o},d){let F=0;const B=r.getHours();for(;F<7&&v.indexOf(r.getDay())>-1;)r.setDate(r.getDate()+1),F++;r.setHours(B)}if(l&&[0,6].indexOf(r.getDay())>-1){const F=r.getHours();r.setDate(r.getDate()+1),r.setHours(F)}if(w.restricted=t._isDateRestricted(r,_),!w.restricted&&i&&(w.restricted=t._isHourRestricted(r,T)),t.restricted)for(let F=0;F<t.restricted.length;F++){const B=t.restricted[F];t._isDateRestricted(r,[B.date])&&0===B.hours.length&&(w.restricted=!0)}if("agenda"===n?w.noLabel=!0:w.weekend=0===r.getDay()||6===r.getDay(),w.nonworking=v.indexOf(r.getDay())>-1,f&&(w.nonworking=w.nonworking||S.indexOf(r.getHours())>-1),y?(e.offset=z,e.date=r,t._createCellsObjByDate(w,e),z=e.offset):(m&&(w.group=m),w.left=z,w.date=new Date(r),a.push(w),z=parseFloat((z+o).toFixed(2))),!i||"timelineMonth"===n||"timelineWeek"===n&&b&&b.hideHours)r.setDate(r.getDate()+1),r.setHours(0,0,0,0);else{const F=r.getHours();"timelineWeek"===n&&F===u?(r.setDate(r.getDate()+1),r.setHours(c)):(r.setHours(r.getHours()+1),F===r.getHours()&&r.setHours(r.getHours()+2))}M+=o}w&&m&&(w.groupSeparator=!0),e.offset=z,e.size=M}_getTimelineCellsObjVertical(e,t){const n=this;return n._getCellsObject({orientation:"vertical",cells:[],date:new Date(n.dateCurrent),cellSize:t,cellCount:e,viewSize:n._scrollViewSize.height,offset:0})}_isEventPartOfGroup(e,t){if(e)return t=t.group||t,Object.keys(t).every(n=>e[n]&&e[n]===t[n])}_createCellsObjByDate(e,t){const n=this,i=t.groupHeader;if(!i)return;const[a,r]="horizontal"===t.orientation?["width","left"]:["height","top"],o=i.cells,s=t.date,l=e[a],d=t.cells,c=t.agendaItem;let u=t.offset;n._createGroupCellsByDate(t,c);const m=i.cellsByDate,y=o.length,b=y%2==0?"center":"offset";for(let f=0;f<y;f++){const w=o[f],v=w.group;if(c&&!n._isEventPartOfGroup(c,v))continue;const S=Object.assign({},e),_=m.find(T=>T.date.getTime()===s.getTime()&&Object.keys(v).every(z=>v[z]===T.group[z]));_&&(_[r]=void 0===_[r]?u:_[r],_[a]=S[a]+(c&&_[a]||0),S[r]=u,S.date=new Date(s),S.group=w.group,c||(f===y-1&&(S.groupSeparator=!0),f===Math.round(y/2)&&(S.showLabel=b)),n._refreshGroupHeaderCells(t.orientation,_),d.push(S),u=parseFloat((u+l).toFixed(2)))}t.offset=u}_createGroupCellsByDate(e,t){const n=this,i=e.date,a=n._timelineCells.groups;if(i)for(let r=0;r<a.length;r++){const o=a[r];let s=o.cellsByDate;s||(s=o.cellsByDate=[]);const l=o.cells;for(let d=0;d<l.length;d++){let c;if(t){if(!n._isEventPartOfGroup(t,l[d]))continue;c=s.find(u=>u.date.getTime()===i.getTime()&&u.group[u.resource]===t[u.resource])}c=c||Object.assign({},l[d]),c.date||(c.date=new Date(i)),c.separator=!!e.separator,c.groupSeparator=t?!c.separator:d===l.length-1,s.includes(c)||s.push(c)}}}_createCellsObjectVertical(e){const t=this;if(!e)return;const n=t.firstDayOfWeek,i=t.viewType,a=i.indexOf("timeline")>-1,r=e.cells,o=new Date(e.date),s=e.cellCount,l=e.viewSize,d=t.nonworkingHours,c=e.group,u=e.groups,m=e.groupHeader;let y,b=e.offset,f=0,w=e.cellSize;if("agenda"===i){const v=Object.keys(s).sort((S,_)=>parseInt(S)-parseInt(_));for(let S of v){let _=s[S],T=w;if(c)_=_.filter(L=>t._isEventPartOfGroup(L,c));else if(u)_=t._getAgendaGroupEvents(_);else if(m){const L=m.cells;let F=_.slice(0);_=[];for(let B=0;B<L.length;B++)_.push(...F.filter(J=>t._isEventPartOfGroup(J,L[B])))}const z=_.length,M=new Date(parseInt(S));z*T<l&&(T=l/z),T=parseFloat(w.toFixed(2));for(let L=0;L<z;L++){const F=M;y={height:T,separator:L===z-1,weekend:0===F.getDay()||6===F.getDay(),nonworking:t.nonworkingDays.indexOf(F.getDay())>-1},L>0&&(y.noLabel=!0),m?(e.offset=b,e.date=F,e.agendaItem=_[L],e.separator=y.separator,t._createCellsObjByDate(y,e),b=e.offset):(c&&(y.group=c),y.top=b,y.date=F,r.push(y),b=parseFloat((b+T).toFixed(2))),f+=T}}t.$.timeline.classList[r.length?"remove":"add"]("no-agenda")}else if(a)for(let v=0;v<s;v++)o.setHours(0,0,0,0),y={height:w,weekend:0===o.getDay()||6===o.getDay()},m?(e.offset=b,e.date=o,t._createCellsObjByDate(y,e),b=e.offset):(c&&(y.group=c),y.top=b,y.date=new Date(o),r.push(y),b=parseFloat((b+w).toFixed(2))),f+=w;else{let v;"month"===i?(o.setDate(1),o.setDate(o.getDate()-(o.getDay()-n+7)%7),o.setHours(0,0,0,0)):(o.setHours(t.hourStart,0,0,0),v=e.restrictedHours);for(let S=0;S<s;S++)y={height:w},m?(e.offset=b,e.date=o,t._createCellsObjByDate(y,e),b=e.offset):(c&&(y.group=c),y.top=b,y.date=new Date(o),r.push(y),b=parseFloat((b+w).toFixed(2))),f+=w,"month"===i?o.setDate(o.getDate()+7):(y.nonworking=d.indexOf(o.getHours())>-1,o.setHours(o.getHours()+1),v&&(y.restricted=t._isHourRestricted(o,v)))}y&&c&&(y.groupSeparator=!0),e.offset=b,e.size=f}_getTimelineCellsObjDetails(){const e=this,t=e.view,n=e.views.find(d=>d.value&&d.value===t);if("timelineWeek"!==e.viewType||n&&n.hideHours)return[];function i(d){let c="";if(!r&&d)for(const u in d)c+=u+d[u];return c}const a=e.hourStart,r=e.groupByDate,o=e._timelineCells.horizontal;let s,l={};for(let d=0;d<o.length;d++){const c=o[d],u=c.date,m=u.getDate()+i(c.group);if(s=l[m],s||(s=l[m]={width:0,left:c.left}),s.width+=c.width,c.groupSeparator&&(s.groupSeparator=c.groupSeparator),!s.date){const y=new Date(u);y.setHours(a,0,0,0),s.date=y}}return l=Object.values(l).sort((d,c)=>d.left-c.left),l}_getAgendaGroupEvents(e){const t=this,n=t._timelineCells.groups;let i;n&&n.length&&(i=n[n.length-1].cells);const a={};let r=0;for(let o=0;o<i.length;o++)a[o]=e.filter(s=>t._isEventPartOfGroup(s,i[o])),a[o].length>a[r].length&&(r=o);return a[r]}_handleTimelineContentSize(e,t,n){const i=this,a=i.view,r=i.viewType,o=i._timelineCells.groups,s=i.views.find(b=>b.value&&b.value===a)||{},l=s&&s.groupOrientation?s.groupOrientation:i.groupOrientation,d="agenda"===r&&Object.keys(e.vertical).length?i.$.timelineHeaderVertical.offsetWidth:Math.max(i.$.timelineViewCellsLabelContainer.offsetWidth,i.$.timelineViewAllDaylabel.offsetWidth),c="width"===n?Math.max(0,i.$.timeline.offsetWidth-d):i.$.timelineContainer.offsetHeight;let u=0,m=[],y=e["width"===n?"horizontal":"vertical"];if(o&&o.length&&(m=o[o.length-1].cells),"agenda"===r&&"height"===n)for(let b in y){let f=y[b];m.length&&(f="horizontal"===l?i._getAgendaGroupEvents(f):f.filter(w=>m.some(v=>i._isEventPartOfGroup(w,v)))),u+=f.length*t}else{let b=1;i.groups.length&&("vertical"!==l&&"width"===n||"vertical"===l&&"height"===n)&&(b=Math.max(m.length,1)),1===y?c<t?u=t*b:(u=c/b,u<t&&(u=t*b)):(y*=b,y*t<c&&(t=c/y),u=y*(t=parseFloat(t.toFixed(2))))}u=Math.max(u,c,t),i.$.timelineContent.style[n]=u===c?"":u+"px",i._refresh()}_createCells(e,t="smart-scheduler-cell",n="gridcell"){let i,a=document.createDocumentFragment();Array.isArray(t)||(t=[t]);for(let r=0;r<e;r++)i=document.createElement("div"),t.forEach(o=>i.classList.add(o)),i.setAttribute("role",n),a.appendChild(i);return a}_refreshTimelineContentCells(){const e=this,t=e._timelineCells;if(!t||!t.vertical||!t.horizontal)return;const n=e.$.timelineContainer,i=e.$.timelineCellsContainer,a=e.$.timelineContent,r=e.view,o=e.viewType,s=e.views.find(u=>u.value&&u.value===r)||{},l=s&&s.groupOrientation?s.groupOrientation:e.groupOrientation,d=e._getVisibleCellObj();if(!d)return;const c={viewType:o,isTimelineView:o.indexOf("timeline")>-1,visibleCellObjs:d,groupOrientation:l,locale:e.locale,timeZone:e.timeZone,isRightToLeft:e.rightToLeft,dateCurrent:e.dateCurrent,restrictedDates:e.restrictedDates,restrictedHours:e.restrictedHours};i.remove(),e._recycleContainerCells({fragment:i,cellsNeeded:d[e.viewType.indexOf("timeline")>-1?"horizontal":"vertical"].length,className:"smart-scheduler-cell-container",role:"row"}),e._refreshContainerCells(i,c),a.insertBefore(i,a.firstElementChild),n.scrollTop=e.scrollTop,n.scrollLeft=e._getScrollLeft(e.scrollLeft),e._setCurrentTimeIndicators()}_getVisibleCellObj(){const e=this,t=e._timelineCells;if(!t||!t.vertical||!t.horizontal)return;const n=t.vertical,i=t.horizontal,[a,r]=[e.scrollTop,e.scrollLeft],[o,s]=[a+e._scrollViewSize.height,r+e._scrollViewSize.width];let[l,d]=[[],[]];for(let c=0;c<n.length;c++){const u=n[c];u.top+u.height>=a&&u.top<=o&&l.push(u)}for(let c=0;c<i.length;c++){const u=i[c];u.left+u.width>=r&&u.left<=s&&d.push(u)}return{vertical:l,horizontal:d}}_refreshContainerCells(e,t){const n=this,i=t.viewType,a=t.groupOrientation,r=t.isTimelineView,o=t.visibleCellObjs,s=e.children,l=e===n.$.timelineCellsContainer,d=t.isRightToLeft,c=t.dateCurrent,u=t.restrictedDates,m=t.restrictedHours,y=new Date;let b,f,w,v,S,_,T;if(l)r?(w=o.horizontal,[S,_,T]=["horizontal","left","width"]):(w=o.vertical,[S,_,T]=["vertical","top","height"]),b=o.vertical,v=n._getCellsScaleCount();else if(r?(b=o.horizontal,w=o.vertical,[S,_,T]=["vertical","top","height"]):(b=o.vertical,w=o.horizontal,[S,_,T]=["horizontal","left","width"]),n._selectedCellObj){const z=n._selectedCellObj.from;if(!z.allDay){const M=n._selectedCellObj.to;f={lastTime:z.time,fromTime:Math.min(z.time,M.time),toTime:Math.max(z.time,M.time),group:z[a]?z[a].group:void 0}}}for(let z=0;z<s.length;z++){const M=s[z],L=w[z];let F;if(L.nonworking?M.setAttribute("nonworking",""):M.removeAttribute("nonworking"),L.weekend?M.setAttribute("weekend",""):M.removeAttribute("weekend"),L.separator?M.setAttribute("separator",""):M.removeAttribute("separator"),F=L.groupSeparator,l)r||"vertical"!==a||(F=b[z].groupSeparator),F&&(r&&"vertical"!==a||!r&&"vertical"===a)?M.setAttribute("group-separator",""):M.removeAttribute("group-separator"),M.$={cellObj:L},n._refreshScaleCells(M,t,v);else{M.$||(M.$={cellObj:{}});const B=M.$.cellObj;B.scaleIndex=e._scaleIndex,r?(B.horizontal=e.$.cellObj,B.vertical=L):(B.horizontal=L,B.vertical=e.$.cellObj);const J=B[a]?B[a].group:void 0;if(J)for(const ee in J)M.setAttribute(ee,J[ee]||"");F&&(!r&&"vertical"!==a||r&&"vertical"===a)?M.setAttribute("group-separator",""):M.removeAttribute("group-separator");const Q=new Date(B.time=n._getCellTime(B));if(n._isDateRestricted(Q,u)||n._isHourRestricted(Q,m)?M.setAttribute("restricted",""):M.removeAttribute("restricted"),n.restricted)for(let ee=0;ee<n.restricted.length;ee++){const se=n.restricted[ee];if(n._isDateRestricted(Q,[se.date])){const pe=Q.getHours();for(let fe=0;fe<se.hours.length;fe++){const k=se.hours[fe];Array.isArray(k)?pe>=k[0]&&pe<=k[1]&&M.setAttribute("restricted",""):pe===k&&M.setAttribute("restricted","")}}}n._refreshAvailableState(L,M,Q),Q.getFullYear()===y.getFullYear()&&Q.getMonth()===y.getMonth()&&Q.getDate()===y.getDate()?M.setAttribute("today",""):M.removeAttribute("today",""),n._setCellContent(M,Q),M.setAttribute("aria-haspopup",!0),"month"===i&&Q.getMonth()!==c.getMonth()?M.setAttribute("other-month",""):M.removeAttribute("other-month"),M.setAttribute("date",Q),M.removeAttribute("selected"),f&&J===f.group&&B.time>=f.fromTime&&B.time<=f.toTime&&M.setAttribute("selected",B.time===f.lastTime?"start":"")}M.style.top=M.style.left=M.style.right=M.style.width=M.style.height="",M.style[T]=L[T]+"px","horizontal"===S?M.style[d?"right":"left"]=L.left+"px":M.style[_]=L[_]+"px"}}getViewDates(){const e=this.querySelectorAll(".smart-scheduler-cell");let t=null,n=null;for(let i=0;i<e.length;i++)!e[i].hasAttribute("all-day")&&e[i].hasAttribute("date")&&(t||(t=e[i]),n=e[i]);if(t&&n){const i=new Date(t.getAttribute("date")),a=new Date(n.getAttribute("date"));return i.setHours(0,0,0,0),a.setHours(23,59,59,999),[i,a]}return null}_refreshScaleCells(e,t,n){const i=this,a=t.visibleCellObjs,r=t.isTimelineView,o=e.children;i._recycleContainerCells({fragment:e,cellsNeeded:n,className:["smart-scheduler-cell","scale"],role:"presentation"});const s=r?"width":"height",l=o.length,d=e.$.cellObj,c=a[r?"vertical":"horizontal"].length;for(let u=0;u<l;u++){const m=o[u];m.$=e.$,m._scaleIndex=u,d.nonworking?m.setAttribute("nonworking",""):m.removeAttribute("nonworking"),m.style.width=m.style.height=null,m.style[s]=100/n+"%",i._recycleContainerCells({fragment:m,cellsNeeded:c}),i._refreshContainerCells(m,t),delete m._scaleIndex}}getDateFromCoordinates(e,t){const n=this.querySelectorAll(".smart-scheduler-cell");for(let i=0;i<n.length;i++){const a=n[i],r=a.getBoundingClientRect();if(a.hasAttribute("date")&&r.left<=e&&r.right>=e&&r.top<=t&&r.bottom>=t){const o=a.getAttribute("date");return new Date(o)}}return null}getIsAllDayCellFromCoordinates(e,t){const n=this.querySelectorAll(".smart-scheduler-cell");for(let i=0;i<n.length;i++){const a=n[i],r=a.getBoundingClientRect();if(a.hasAttribute("date")&&r.left<=e&&r.right>=e&&r.top<=t&&r.bottom>=t&&a.hasAttribute("all-day"))return!0}return!1}_refreshAvailableState(e,t,n){const i=this;if(i.available&&i.available.length){t.setAttribute("restricted",""),e.restricted=!0;for(let a=0;a<i.available.length;a++){const r=i.available[a],o=e.group?Object.keys(e.group)[0]:null;if(!e.group||void 0===r[o]||e.group&&e.group[o]===r[o])if("string"==typeof r.start&&5===r.start.length&&r.start.indexOf(":")>=0){const s=r.start.split(":"),l=parseInt(s[0]),d=parseInt(s[1]),c=r.end.split(":"),u=parseInt(c[0]),m=parseInt(c[1]),y=new Date(n.getFullYear(),n.getMonth(),n.getDate(),l,d,0),b=new Date(n.getFullYear(),n.getMonth(),n.getDate(),u,m,0);y<=n&&n<=b&&(t.removeAttribute("restricted"),e.restricted=!1)}else if("string"==typeof r.start&&r.start.length<=2){const s=parseInt(r.start),l=parseInt(r.end),d=new Date(n.getFullYear(),n.getMonth(),n.getDate(),s,0,0),c=new Date(n.getFullYear(),n.getMonth(),n.getDate(),l,0,0);d<=n&&n<=c&&(t.removeAttribute("restricted"),e.restricted=!1)}else if(r.date){if(r.date.getFullYear()===n.getFullYear()&&r.date.getMonth()===n.getMonth()&&r.date.getDate()===n.getDate()){const s=n.getHours();if(r.hours)for(let l=0;l<r.hours.length;l++){const d=r.hours[l];Array.isArray(d)?s>=d[0]&&s<=d[1]&&(t.removeAttribute("restricted",""),e.restricted=!1):s===d&&(t.removeAttribute("restricted",""),e.restricted=!1)}else t.removeAttribute("restricted",""),e.restricted=!1}}else if("number"==typeof r.start){const s=r.start,l=r.end,d=new Date(n.getFullYear(),n.getMonth(),n.getDate(),s,0,0),c=new Date(n.getFullYear(),n.getMonth(),n.getDate(),l,0,0);d<=n&&n<=c&&(t.removeAttribute("restricted"),e.restricted=!1)}else{const s=new Smart.Utilities.DateTime(r.start).toDate(),l=new Smart.Utilities.DateTime(r.end).toDate();s<=n&&n<=l&&(t.removeAttribute("restricted"),e.restricted=!1)}}}}_refreshTimelineAllDayCells(){const e=this,t=new Date,n=e.restrictedHours,i=e.viewType.toLowerCase(),a=e.$.timelineViewAllDayContent,r=e.$.timelineViewAllDayCellsContainer;if(i.indexOf("timeline")>-1||i.indexOf("month")>-1)return void(r.innerHTML="");r.remove();const o=r.children,s=e.locale,l=e.rightToLeft,d={height:e._allDayCellSize,top:0},c=e.$.timelineHeaderHorizontalContent.querySelector(".smart-scheduler-cells").children;e._recycleContainerCells({fragment:r,cellsNeeded:"agenda"===i?0:c.length});for(let u=0;u<o.length;u++){const m=o[u],y=c[u],b=y.$.cellObj;m.$||(m.$={cellObj:{}});const f=m.$.cellObj;f.horizontal=b,f.vertical=d,f.allDay=!0,m.setAttribute("all-day","");const w=f.horizontal.group;if(w)for(const S in w)m.setAttribute(S,w[S]||"");const v=new Date(f.time=e._getCellTime(f));b.restricted||n.length?m.setAttribute("restricted",""):m.removeAttribute("restricted"),v.getFullYear()===t.getFullYear()&&v.getMonth()===t.getMonth()&&v.getDate()===t.getDate()?m.setAttribute("today",""):m.removeAttribute("today",""),e._setCellContent(m,v),m.setAttribute("date",v.toLocaleDateString(s)),b.groupSeparator?m.setAttribute("group-separator",""):m.removeAttribute("group-separator"),b.weekend?m.setAttribute("weekend",""):m.removeAttribute("weekend"),b.nonworking?m.setAttribute("nonworking",""):m.removeAttribute("nonworking"),e._refreshAvailableState(b,m,v),l?(m.style.left="",m.style.right=y.style.right):(m.style.right="",m.style.left=y.style.left),m.style.width=y.style.width}a.insertBefore(r,a.firstElementChild),a.scrollLeft=e._getScrollLeft(e.scrollLeft)}_getCellsScaleCount(){const e=this,t=e.viewType,n=e.view;if(["timelineMonth","month","agenda"].indexOf(t)>-1)return 1;if("timelineWeek"===t){const i=e.views.find(a=>a.value&&a.value===n)||{};if(i&&i.hideHours)return 1}switch(e.timelineDayScale){case"hour":default:return 1;case"halfHour":return 2;case"quarterHour":return 4;case"tenMinutes":return 6;case"fiveMinutes":return 12}}_getTimelineVisibleCellsCount(e="horizontal"){const t=this,n=e.orientation||e,i=e.type,a=e.resource;let r=t._timelineCells[n];if(i&&(r=a?t._timelineCells.groups.find(m=>m.resource===a)[t.groupByDate?"cellsByDate":"cells"]:t._timelineCells[i]),!r)return 0;const o=t._getFirstCellObjInView({orientation:n,type:i,resource:a});if(!o)return 0;const[s,l,d]="horizontal"===n?["left","width",t.scrollLeft]:["top","height",t.scrollTop];let c;if("vertical"===n?c=t._scrollViewSize.height:(c=t.$.timelineHeaderHorizontalContent.offsetWidth||t.$.timelineViewAllDayContent.offsetWidth,!c&&t.hideAllDay&&"day"===t.viewType&&(c=t.offsetWidth),"agenda"===t.viewType&&t._timelineCells.vertical.length&&(c-=t.$.timelineHeaderVertical.offsetWidth)),i){let m=0;if("details"===i&&("timelineWeek"!==t.viewType||"vertical"===n))return m;for(let y=r.indexOf(o);y<r.length;y++){const b=r[y];b[s]+b[l]>=d&&b[s]<c+d&&m++}return m}const u=1-(o[s]+o[l]-d)/r[0][l];return isNaN(u)||!isFinite(u)?0:Math.min(r.length,Math.ceil(parseFloat((c/o[l]+u).toFixed(2))))}_getFirstCellObjInView(e="horizontal"){const t=this,n=e.orientation||e,i=e.type,a=e.resource,r=t._timelineCells;if(!r)return;let o,s,l;const[d,c,u]="horizontal"===n?["scrollLeft","left","width"]:["scrollTop","top","height"],m=Math.abs(t[d]);l=r[n],i&&(l=a?t._timelineCells.groups.find(y=>y.resource===a)[t.groupByDate?"cellsByDate":"cells"]:t._timelineCells[i]);for(let y=0;y<l.length;y++){const b=l[y];if(b[c]+b[u]>=m){o=b;break}s=b}return!o&&s&&(o=m>s[c]?s:l[0]),o}_getCellsCount(e){const t=this,n=t.dateCurrent,i=new Date(t.dateCurrent);e||(e=t.view);const a=t.viewType,r=t.views.find(y=>y.value&&y.value===e)||{},o=t.nonworkingDays;let[s,l,d,c]=[0,0,0,0,0];const u=t.hideNonworkingWeekdays||r.hideNonworkingWeekdays,m=t.hideWeekend||r.hideWeekend;switch(m&&(c=2,u&&(c-=(o.includes(0)?1:0)+(o.includes(6)?1:0))),a){case"agenda":l=t._getAgendaEvents(i,r),s=1;break;case"day":l=t._getDayHours(i),s=1;break;case"month":case"week":l="month"===a?6:t.hourEnd-t.hourStart+1,s=7-(u?o.length:0)-c,r.additionalDays&&(s+=r.additionalDays);break;case"timelineDay":s=t._getDayHours(i),l=1;break;case"timelineWeek":{const y=t.firstDayOfWeek,b=r&&r.hideHours;let f=new Date(i);l=1,f.setDate(f.getDate()-f.getDay()+y);for(let w=0;w<7;w++)(!m||m&&[0,6].indexOf(f.getDay())<0)&&(!u||u&&o.indexOf(f.getDay())<0)&&(s+=b?1:t._getDayHours(f),d++),f.setDate(f.getDate()+1);break}case"timelineMonth":{const y=new Date(n);y.setDate(1),y.setMonth(y.getMonth()+1),y.setDate(0),s=y.getDate(),l=1;break}}return{horizontal:s,vertical:l,detail:d}}_getAgendaEvents(e,t){const n=this;if(!t){const b=n.view;t=n.views.find(f=>f.value&&f.value===b)||{}}e||(e=new Date(n.currentDate));const i=n.hideNonworkingWeekdays||t.hideNonworkingWeekdays,a=n.hideWeekend||t.hideWeekend,r=n.nonworkingDays,o=new Date(e),s=n.hourStart,l=n.hourEnd;o.setHours(0,0,0,0);const d=new Date(o);d.setDate(o.getDate()+6),d.setHours(23,59,59,999);const[c,u]=[o.getTime(),d.getTime()],m=n._getEventsBetween(c,u);let y={};if(!m||!m.length)return y;for(let b=0;b<m.length;b++){const f=m[b],v=f.dateEnd,S=f.dateStart.getTime(),_=v.getTime();if(!(S>=u||_<=c||f.hidden))for(let T=0;T<7;T++){const z=new Date(o);if(z.setDate(z.getDate()+T),i&&r.indexOf(z.getDay())>-1||a&&[0,6].indexOf(z.getDay())>-1)continue;z.setHours(s,0,0,0);const M=new Date(z);M.setHours(l,59,59,999);const L=z.getTime(),F=M.getTime();if(L<=_&&F>=S){let B=y[L];B||(y[L]=B=[]),B.push(f)}}}for(let b in y)y[b].sort((f,w)=>f.dateStart.getTime()-w.dateStart.getTime());return y}_getEventsBetween(e,t){const n=this;if(!e||!t)return[];e instanceof Date&&(e=e.getTime()),t instanceof Date&&(t=t.getTime());let i=n._eventsBetween;if(n._eventsBetween){if(i.timeStart===e&&i.timeEnd===t)return i.events}else i=n._eventsBetween={timeStart:e,timeEnd:t,events:[]};let a=[];const r=n._events,o=n._rRule,s=n.restrictedDates,l=n.restrictedHours,d={isMonthView:n.viewType.toLowerCase().indexOf("month")>-1,restrictedDates:n.restrictedDates,restrictedHours:n.restrictedHours,hourStart:n.hourStart,hourEnd:n.hourEnd,dateStart:new Date(e),dateEnd:new Date(t),rRule:o,targetEvents:a};for(let c=0;c<r.length;c++){const u=r[c],m=u.repeat,b=u.dateEnd,f=u.dateStart.getTime(),w=b.getTime();if(n._applyFiltering(u)){if(m&&o){const v=n._getEventRepeatOptions(u);if(v){d.event=u,d.repeatObj=m,d.options=v,d.eventTimeStart=f,d.eventTimeEnd=w,n._setRepeatingEvents(d);continue}}else if(n._isEventRestricted(u,s,l)||f>t||w<e)continue;a.push(u)}}return a.sort((c,u)=>c.dateStart.getTime()-u.dateStart.getTime()),i.timeStart=e,i.timeEnd=t,i.events=a}_applyFiltering(e){const t=this;if(!t.filterable)return!0;const n=t.filter;if("function"==typeof n)return!!n(t._cloneObject(e));if(!Array.isArray(n)||!n.length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(void 0===a.name)continue;const r=e[a.name],o=a.value;return"function"==typeof o?!!o(r):t._checkFilterMode(r+"",o+"")}}_checkFilterMode(e,t){switch(this.filterMode){case"startsWith":return 0===e.indexOf(t);case"startsWithIgnoreCase":return 0===e.toLowerCase().indexOf(t.toLowerCase());case"doesNotContain":return e.indexOf(t)<0;case"doesNotContainIgnoreCase":return e.toLowerCase().indexOf(t.toLowerCase())<0;case"contains":return e.indexOf(t)>-1;case"containsIgnoreCase":return e.toLowerCase().indexOf(t.toLowerCase())>-1;case"equals":return 0===e.localeCompare(t);case"equalsIgnoreCase":return 0===e.toLowerCase().localeCompare(t.toLowerCase());case"endsWith":return e.endsWith(t);case"endsWithIgnoreCase":return e.toLowerCase().endsWith(t.toLowerCase())}}_isEventRestricted(e,t,n){const i=this;if(!e)return!1;const a=e.dateStart,r=e.dateEnd,o=a.getTime(),s=r.getTime();let l;if(t||(t=i.restrictedDates),n||(n=i.restrictedHours),n.length){let d=Math.max(1,Math.min(23,Math.floor((r.getTime()-a.getTime())/36e5))),c=a.getHours();if(d>0)for(l=[];d>=0;)l.push(c),c=23===c?0:c+1,d--;if(l&&n.some(u=>l.includes(u)))return!0}for(let d=0;d<t.length;d++){const c=t[d],u=c.getTime();let m=new Date(c);if(m.setHours(23,59,59,999),m=m.getTime(),o<=m&&s>=u)return!0}if(i.restricted)for(let d=0;d<i.restricted.length;d++){const c=i.restricted[d];if(i._isDateRestricted(a,[c.date])){const u=a.getHours();for(let m=0;m<c.hours.length;m++){const y=c.hours[m];if(Array.isArray(y)){if(u>=y[0]&&u<=y[1])return!0}else if(u===y)return!0}}}if(i.available&&i.available.length){let d=!0;for(let c=0;c<i.available.length;c++){const u=i.available[c],m=i.resources.length>0?i.resources[0].value:null;if(!m||void 0===e[m]||m&&e[m]===u[m])if("string"==typeof u.start&&5===u.start.length&&u.start.indexOf(":")>=0){const y=u.start.split(":"),b=parseInt(y[0]),f=parseInt(y[1]),w=u.end.split(":"),v=parseInt(w[0]),S=parseInt(w[1]),_=new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,f,0),T=new Date(a.getFullYear(),a.getMonth(),a.getDate(),v,S,0);_<=a&&a<=T&&(d=!1)}else if("string"==typeof u.start&&u.start.length<=2){const y=parseInt(u.start),b=parseInt(u.end),f=new Date(a.getFullYear(),a.getMonth(),a.getDate(),y,0,0),w=new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,0,0);f<=a&&a<=w&&(d=!1)}else if(u.date){if(u.date.getFullYear()===a.getFullYear()&&u.date.getMonth()===a.getMonth()&&u.date.getDate()===a.getDate()){const y=a.getHours();if(u.hours)for(let b=0;b<u.hours.length;b++){const f=u.hours[b];Array.isArray(f)?y>=f[0]&&y<=f[1]&&(d=!1):y===f&&(d=!1)}else d=!1}}else if("number"==typeof u.start){const y=u.start,b=u.end,f=new Date(a.getFullYear(),a.getMonth(),a.getDate(),y,0,0),w=new Date(a.getFullYear(),a.getMonth(),a.getDate(),b,0,0);f<=a&&a<=w&&(d=!1)}else{const y=new Smart.Utilities.DateTime(u.start).toDate(),b=new Smart.Utilities.DateTime(u.end).toDate();y<=a&&a<=b&&(d=!1)}}return d}return!1}_isDateRestricted(e,t){if(!e||!e.getTime||isNaN(e.getTime()))return!1;const i=e.getFullYear(),a=e.getMonth(),r=e.getDate();t||(t=this.restrictedDates);for(let o=0;o<t.length;o++){const s=t[o],l=s.getFullYear(),d=s.getMonth(),c=s.getDate();if(i===l&&a===d&&r===c)return!0}return!1}_isHourRestricted(e,t){return e instanceof Date&&(e=e.getHours()),void 0!==e&&!isNaN(e)&&(t||(t=this.restrictedHours),t.includes(e))}_setRepeatingEvents(e){const t=this,n=e.isMonthView,i=e.hourStart,a=e.hourEnd,r=e.rRule,o=e.dateStart,s=e.dateEnd,l=e.restrictedDates,d=e.restrictedHours,c=o.getTime(),u=s.getTime(),m=e.event,y=e.options,f=e.eventTimeStart,w=e.eventTimeEnd,v=e.repeatObj.exceptions,S=e.targetEvents,_=m.dateStart,T=m.dateEnd;let z=o;_.getFullYear()===T.getFullYear()&&_.getMonth()===T.getMonth()&&_.getDate()===T.getDate()||(z=m.dateStart);let M=new r(y).between(new Date(Date.UTC(...t._getDateArgs(z))),new Date(Date.UTC(...t._getDateArgs(s))),!0);if(!M.length){const L=new r(y).before(new Date(Date.UTC(...t._getDateArgs(o))));L&&new Date(L.getUTCFullYear(),L.getUTCMonth(),L.getUTCDate(),L.getUTCHours(),L.getUTCMinutes()).getTime()+w-f>=c&&M.push(L)}for(let L=0;L<M.length;L++){let F=M[L];F=new Date(F.getUTCFullYear(),F.getUTCMonth(),F.getUTCDate(),F.getUTCHours(),F.getUTCMinutes());let B,J=new Date(F),Q=new Date(F.getTime()+w-f);if(!(t._isEventRestricted(m,l,d)||J.getTime()>u||Q.getTime()<c)&&(v&&(B=v.find(ee=>{const se=ee.date;return m.allDay&&se.setHours(F.getHours(),F.getMinutes(),F.getSeconds(),F.getMilliseconds()),se.getTime()===F.getTime()})),B&&(J=B.dateStart,Q=B.dateEnd),J&&!isNaN(J.getTime())||(J=new Date(F)),Q&&!isNaN(Q.getTime())||(Q=new Date(J.getTime()+w-f)),n||!(J.getHours()<i&&Q.getHours()<i||J.getHours()>a&&Q.getHours()>a))){if(B)B.dateStart&&!isNaN(B.dateStart.getTime())||(B.dateStart=J),B.dateEnd&&!isNaN(B.dateEnd.getTime())||(B.dateEnd=Q),B.$={event:m};else if(B=t._cloneObject(m,!1,!0),B.dateStart=J,B.dateEnd=Q,B.$={event:m},v){const ee=B.dateStart.getTime(),se=B.dateEnd.getTime();for(let pe=0;pe<v.length;pe++){const fe=v[pe],k=fe.date.getTime();k>ee&&k<=se&&(void 0===fe.dateStart&&(fe.dateStart=new Date(J)),void 0===fe.dateEnd&&(fe.dateEnd=new Date(Q)),S.push(fe))}}S.push(B)}}}_getEventRepeatOptions(e,t){const n=this,i=n._rRule;if(!e||!e.repeat||!i)return;const a=e.repeat,r=a.repeatFreq,o=r?i[r.toUpperCase()]:void 0;if(void 0===o)return;const l=a.repeatEnd;let d={freq:o,wkst:(n.firstDayOfWeek-1+7)%7,interval:a.repeatInterval||1};const c=n._getRepeatOnCondition(r,a.repeatOn);switch(r){case"weekly":d.byweekday=c.map(u=>(u-1+7)%7);break;case"monthly":d.bymonthday=c;break;case"yearly":d.bymonth=c.index+1,d.bymonthday=c.value}return l instanceof Date?d.until=new Date(Date.UTC(...n[t?"_getUTCDateArgs":"_getDateArgs"](l))):"number"!=typeof l||isNaN(l)||(d.count=l),d.dtstart=new Date(Date.UTC(...n[t?"_getUTCDateArgs":"_getDateArgs"](e.dateStart))),d}_getUTCDateArgs(e){if(!isNaN(new Date(e).getTime()))return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()]}_getDateArgs(e){if(!isNaN(new Date(e).getTime()))return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()]}_getRepeatOnCondition(e,t){if(!e||!t)return[];let n;if("weekly"===e){let i=[];Array.isArray(t)||(t=[t]);for(let a=0;a<t.length;a++)n=t[a],"string"==typeof n&&(n=isNaN(parseInt(n))?new Date(n):parseInt(n)),n instanceof Date&&!isNaN(n.getTime())?i.push(n.getDay()):i.push(Math.max(0,Math.min(6,parseInt(t[a])||0)));return i}if("monthly"===e)return Array.isArray(t)&&(t=t[0]),n=t,"string"==typeof n&&(n=isNaN(parseInt(n))?new Date(n):parseInt(n)),n=n instanceof Date&&!isNaN(n.getTime())?n.getDate():Math.max(0,Math.min(31,parseInt(t)||0)),n;if("yearly"===e){let i,a;if(Array.isArray(t)&&(t=t[0]),n=t,"string"==typeof n&&(n=isNaN(parseInt(n))?new Date(n):parseInt(n)),n instanceof Date&&!isNaN(n.getTime()))i=n.getMonth(),a=n.getDate();else{let r=t,o=t;"object"==typeof t&&(r=t.month,o=t.date),i=Math.max(0,Math.min(11,parseInt(r)||0)),a=Math.max(0,Math.min(31,parseInt(o)||0))}return{index:i,value:a}}}_getDayHours(e){const t=this,n=new Date(e||t.dateCurrent),i=n.getDate(),r=t.hourEnd;let o=0;for(n.setHours(t.hourStart,0,0,0);i===n.getDate()&&n.getHours()<=r;){o++;const s=n.getHours();n.setHours(n.getHours()+1,0,0,0),s===n.getHours()&&n.setHours(n.getHours()+2,0,0,0)}return o}_getDateString(e,t="horizontal",n){const i=this,a=i.locale,r=i.view,o=i.viewType,s=i.views.find(u=>u.value&&u.value===r),l=o.indexOf("timeline")>-1,d=e.timeZone||i.timeZone;let c;if(e=e.timeZone&&e.timeZone===i.timeZone?e.date||e:new Smart.Utilities.DateTime(e.date||e).toDate(d),l){if("vertical"===t)return"";c="timelineMonth"===o||"timelineWeek"===o&&(n||s&&s.hideHours)?new Intl.DateTimeFormat(a,{day:i.dayFormat,weekday:i.weekdayFormat}).format(e):new Intl.DateTimeFormat(a,{hour:i.hourFormat,minute:i.minuteFormat}).format(e)}else if("horizontal"===t){if("day"===o)return"";"week"===o?c=new Intl.DateTimeFormat(a,{day:i.dayFormat,weekday:i.weekdayFormat}).format(e):"month"===o&&(c=new Intl.DateTimeFormat(a,{weekday:i.weekdayFormat}).format(e))}else{if("month"===o)return"";c="agenda"===o?new Intl.DateTimeFormat(a,{day:i.dayFormat,weekday:i.weekdayFormat}).format(e):new Intl.DateTimeFormat(a,{hour:i.hourFormat,minute:i.minuteFormat}).format(e)}return i.timelineHeaderFormatFunction?i.timelineHeaderFormatFunction(e,t,n,c):c}_setGroupContent(e){const t=this,n=e.$.cellObj;if(t.groupTemplate)t._applyTemplate("groupTemplate",e,n);else{const i=t.resources.find(o=>o.value===n.resource);if(!i)return void(e.innerHTML="");let a;n.group&&(a=n.label);let r=a||i.label;t.timelineHeaderGroupFormatFunction&&(r=t.timelineHeaderGroupFormatFunction(a,i,r)),e.innerHTML=`<div>${r}</div>`}}_applyTemplate(e,t,n){const i=this;let a,r=i[e];if("groupTemplate"===e){if(a=i.resources.find(m=>m.value===n.resource),a){const m=n.group[n.resource];n=a.dataSource.find(y=>y.id===m)}n||(n=a)}i._templates||(i._templates={});const o=i._templates;if("function"==typeof r)return r.call(i,t,n),void delete o[e];if("string"==typeof r){const m=r;if(r=document.getElementById(r),!r){if(r=m,"object"==typeof n)for(let y in n)r=r.replaceAll("{{"+y+"}}",n[y]);else{const y=/{{\s*\w*\s*}}/gm;let b=[],f=r;if(y.test(f)){const w=f.match(y);b||(b=[]),w&&w.forEach(v=>{b.includes(v)||b.push(v)})}if(b)for(let w=0;w<b.length;w++){const v=b[w];f=f.replace(v,"object"==typeof n?n[v.replace(/{{|}}/gm,"").trim()]||"":n)}r=f}return void(t.innerHTML=r)}}if(!("content"in document.createElement("template")))return i.error(i.localize("htmlTemplateNotSuported",{elementType:i.nodeName.toLowerCase()})),void delete o[e];if(null===r||!("content"in r))return i.error(i.localize("invalidTemplate",{elementType:i.nodeName.toLowerCase(),property:"groupTemplate"})),void delete o[e];let s=o[e];s||(s=o[e]={}),t.innerHTML="";const l=document.importNode(r.content,!0);if("cellTemplate"===e)n=new Intl.DateTimeFormat(i.locale,{day:i.dayFormat}).format(n);else if("eventCollectorTemplate"===e||"headerTemplate"===e||"footerTemplate"===e)return t.innerHTML="",void t.appendChild(l);const d=l.childNodes,c=s.bindings;let u;c&&(u=c);for(let m=0;m<d.length;m++){let y=d[m].outerHTML;if(y){if(!c){const b=/{{\s*\w*\s*}}/gm;if(b.test(y)){const f=y.match(b);u||(u=[]),f&&f.forEach(w=>{u.includes(w)||u.push(w)})}}if(u)for(let b=0;b<u.length;b++){const f=u[b];y=y.replace(f,"object"==typeof n?n[f.replace(/{{|}}/gm,"").trim()]||"":n)}t.innerHTML+=y}}u&&(s.bindings=u)}_setCellContent(e,t){const n=this;t=new Date(t||n.dateCurrent),n.cellTemplate?n._applyTemplate("cellTemplate",e,t):e.innerHTML="month"===n.viewType?1!==t.getDate()||e.hasAttribute("today")?`<div>${new Intl.DateTimeFormat(n.locale,{day:n.dayFormat}).format(t)}</div>`:`<div>${new Intl.DateTimeFormat(n.locale,{month:"short",day:n.dayFormat}).format(t)}</div>`:""}_setCurrentTimeIndicators(){const e=this;clearInterval(e._currentTimeIndicatorInterval),delete e._currentTimeIndicatorInterval,e._refreshIndicators(),(e.currentTimeIndicator||e.shadeUntilCurrentTime)&&(e._currentTimeIndicatorInterval=setInterval(e._refreshIndicators.bind(e),1e3*e.currentTimeIndicatorInterval))}_refreshIndicators(){const e=this,t=e.viewType,n=new Date,i=e.$.timelineCellsContainer,a=60/e._getCellsScaleCount(),r=t.toLowerCase().indexOf("month")>-1,o=i.querySelectorAll(".smart-scheduler-cell:not(.scale)");let s,l=[];for(let d=0;d<o.length;d++){const c=o[d],u=new Date(c.$.cellObj.time);if(c.$&&n.getFullYear()===u.getFullYear()&&n.getMonth()===u.getMonth()&&n.getDate()===u.getDate()){if(!r&&u.getHours()!==n.getHours()||u.getMinutes()+a<n.getMinutes()||u.getMinutes()>n.getMinutes())continue;l.push(c)}}if(l.length){const d=l[0].$.cellObj,c=new Date(d.time),u=d.scaleIndex||0;let m,y;r?(y=60*n.getHours()+n.getMinutes(),m=1440):(y=n.getMinutes(),m=c.getMinutes()+a),s={cells:l,minutes:y,max:m,scaleIndex:u}}e._refreshCurrentTimeIndicator(s),e._refreshCurrentTimeShader(s)}_refreshCurrentTimeIndicatorHeader(){const e=this,t=e.currentTimeIndicator,n=e.timeZone,i=new Date,a=i.getFullYear(),r=i.getMonth(),o=i.getDate(),s=i.getHours(),l=e.viewType.toLowerCase(),d=b=>{let f=new Date(b);for(let w=0;w<6;w++){if(f.getFullYear()===a&&f.getMonth()===r&&f.getDate()===o)return!0;f.setDate(f.getDate()+7)}},c=l.indexOf("agenda")>-1,u=l.indexOf("timeline")>-1,m=l.indexOf("month")>-1;function y(b,f){let w;const v=!c&&!m&&(f&&!u||!f&&u);for(let S=0;S<b.length;S++){const _=b[S];if(_.timeZone===n){w=_.children;break}}if(w)for(let S=0;S<w.length;S++){const _=w[S];if(!_.$||!_.$.cellObj)return;const T=_.$.cellObj.date;if(t){if(m&&!u){d(T)?_.setAttribute("current",""):_.removeAttribute("current");continue}if(T.getDate()===o&&(!v||T.getFullYear()===a&&T.getMonth()===r&&T.getHours()===s)){_.setAttribute("current","");continue}}_.removeAttribute("current")}}y(e.$.timelineHeaderHorizontalContent.querySelectorAll(".smart-scheduler-cells")),y(e.$.timelineHeaderVerticalContent.querySelectorAll(".smart-scheduler-cells"),!0)}_refreshCurrentTimeIndicator(e){const t=this,n=t.viewType,i=t.$.timelineIndicatorsContainer;let a=i.querySelector(".smart-scheduler-current-time");if(t._refreshCurrentTimeIndicatorHeader(),!t.currentTimeIndicator||"agenda"===n||!e)return a&&a.remove(),void(i.firstElementChild||(clearInterval(t._currentTimeIndicatorInterval),delete t._currentTimeIndicatorInterval));const[r,o,s,l]=[e.cells,e.minutes,e.max,e.scaleIndex],d=r.length,c=t._getCellsScaleCount();a||(a=document.createElement("div"),a.classList.add("smart-scheduler-current-time"),a.setAttribute("role","presentation"));const u=a.children;t._recycleContainerCells({fragment:a,cellsNeeded:d,className:"smart-scheduler-current-time-indicator"});for(let m=0;m<u.length;m++){const y=r[m],b=u[m],f=y.closest(".smart-scheduler-cell-container");let w;n.toLowerCase().indexOf("timeline")>-1?(w=parseFloat(f.style.width)/c*(l+1),b.style.width=y.style.width,b.style.height=y.style.height,b.style.left=parseFloat(f.style.left)+w*(o/s)+"px",b.style.top=y.style.top):(w=parseFloat(f.style.height)/c*(l+1),b.style.width=y.style.width,b.style.height=y.style.height,b.style.left=y.style.left,b.style.top=parseFloat(f.style.top)+w*(o/s)+"px"),b.setAttribute("aria-label","Current Time Indicator")}a.parentElement||i.appendChild(a)}_refreshCurrentTimeShader(e){const t=this,n=t.$.timelineIndicatorsContainer;let i=n.querySelector(".smart-scheduler-shader");if(!t.shadeUntilCurrentTime||"agenda"===t.viewType)return i&&i.remove(),void(t.currentTimeIndicator||(clearInterval(t._currentTimeIndicatorInterval),delete t._currentTimeIndicatorInterval));i||(i=document.createElement("div"),i.classList.add("smart-scheduler-shader"));const a=i.children;if(e)t._shadeUntilToday(i,e);else{const r=t._getCellShadeRangesByDate(),o=r.length;if(t._recycleContainerCells({fragment:i,cellsNeeded:o,className:"smart-scheduler-shade"}),!o&&(i.remove(),!n.firstElementChild))return clearInterval(t._currentTimeIndicatorInterval),void delete t._currentTimeIndicatorInterval;for(let s=0;s<o;s++){const l=r[s],d=l.hFrom,c=l.hTo,u=t._getFirstShadeCell(l.vFrom.$.cellObj,!0),m=t._getFirstShadeCell(l.vTo.$.cellObj,!0,!0),y=a[s];t._recycleContainerCells({fragment:y,cellsNeeded:1,className:"smart-scheduler-shade-section"});const b=y.children[0];b.style.width=parseFloat(c.style.left)+parseFloat(c.style.width)-parseFloat(d.style.left)+"px",b.style.height=parseFloat(m.style.top)+parseFloat(m.style.height)-parseFloat(u.style.top)+"px",b.style.left=d.style.left,b.style.top=u.style.top}}i.parentElement||n.insertBefore(i,n.firstElementChild)}_shadeUntilToday(e,t){const n=this;if(!t)return void(e.innerHTML="");const i=e.children,a=n.viewType,r=a.indexOf("month")>-1,o=n._getCellsScaleCount(),[s,l,d,c]=[t.cells,t.minutes,t.max,t.scaleIndex],u=s?s.length:1;n._recycleContainerCells({fragment:e,cellsNeeded:u,className:"smart-scheduler-shade"});for(let m=0;m<u;m++){const y=s[m],b=i[m],f=y.closest(".smart-scheduler-cell-container"),w=y.$.cellObj.horizontal,v=y.$.cellObj.vertical;let S;if(a.toLowerCase().indexOf("timeline")>-1){n._recycleContainerCells({fragment:b,cellsNeeded:1,className:"smart-scheduler-shade-section"});const _=b.children[0],T=n._getFirstShadeCell(w);S=parseFloat(f.style.width)/o*(c+1),_.style.width=parseFloat(f.style.left)-parseFloat(T.style.left)+S*(l/d)+"px",_.style.height=y.style.height,_.style.left=T.style.left,_.style.top=y.style.top}else{n._recycleContainerCells({fragment:b,cellsNeeded:r?3:2,className:"smart-scheduler-shade-section"});const _=b.children[0],T=b.children[1],z=n._getFirstShadeCell(w),M=n._getFirstShadeCell(v,!0),L=n._getFirstShadeCell(v,!0,!0);if(S=parseFloat(f.style.height)/o*(c+1),_.style.top=M.style.top,_.style.left=z.style.left,r){_.style.width=parseFloat(y.style.left)-parseFloat(z.style.left)+"px",_.style.height=parseFloat(f.style.top)-parseFloat(M.style.top)+parseFloat(f.style.height)+"px";const F=n._getFirstShadeCell(w,void 0,!0),B=b.children[2];T.style.width=parseFloat(F.style.left)+parseFloat(F.style.width)-parseFloat(z.style.left)-parseFloat(_.style.width)+"px",T.style.height=parseFloat(f.style.top)-parseFloat(M.style.top)+"px",T.style.top=M.style.top,T.style.left=parseFloat(z.style.left)+parseFloat(_.style.width)+"px",B.style.top=parseFloat(T.style.top)+parseFloat(T.style.height)+"px",B.style.left=T.style.left,B.style.width=y.style.width,B.style.height=S*(l/d)+"px"}else _.style.width=parseFloat(y.style.left)+parseFloat(y.style.width)-parseFloat(z.style.left)+"px",_.style.height=parseFloat(f.style.top)-parseFloat(M.style.top)+S*(l/d)+"px",T.style.top=parseFloat(_.style.top)+parseFloat(_.style.height)+"px",T.style.left=z.style.left,T.style.width=parseFloat(y.style.left)-parseFloat(z.style.left)+"px",T.style.height=parseFloat(L.style.top)+parseFloat(L.style.height)-parseFloat(T.style.top)+"px"}}}_getFirstShadeCell(e,t,n){const i=(t?this.$.timelineHeaderVerticalContent:this.$.timelineHeaderHorizontalContent).querySelectorAll(".smart-scheduler-view-time .smart-scheduler-cell"),a=e.group;if(!a)return n?i[i.length-1]:i[0];let r;for(let o=0;o<i.length;o++){const s=i[o],l=s.$.cellObj.group;if(l&&Object.keys(l).every(d=>l[d]===a[d])&&(r=s,!n))return r}return r}_getCellShadeRangesByDate(){const e=this,t=e.viewType.indexOf("timeline")>-1,n=new Date,i=n.getFullYear(),a=n.getMonth(),r=n.getDate(),o=n.getHours(),s=e.$.timelineHeaderHorizontalContent.querySelectorAll(".smart-scheduler-view-time .smart-scheduler-cell"),l=e.$.timelineHeaderVerticalContent.querySelectorAll(".smart-scheduler-cell"),d=f=>{let w,v;for(let S=0;S<l.length;S++){if(v=l[S],!v.$)continue;const _=new Date(v.$.cellObj.date);_.setDate(f.getDate());const T=_.getTime()||0;if(!w&&T<=n.getTime()&&(w=v),w&&T>n.getTime())break}return w&&v?{from:w,to:v}:void 0},c=f=>f.getFullYear()===i&&f.getMonth()===a&&f.getDate()===r;let u,m,y,b=[];for(let f=0;f<s.length;f++){const w=s[f],v=w.$.cellObj.date;!u&&v.getTime()<=n.getTime()&&(u=w),!c(v)||t&&v.getHours()!==o||(y=d(v),m=y?w:m,m&&(y=d(m.$.cellObj.date),y&&b.push({hFrom:u,hTo:m,vFrom:y.from,vTo:y.to})),u=void 0),m=w}return u&&!b.length&&(m=s[s.length-1],(m.$?m.$.cellObj.date.getTime():0)>n.getTime()&&(m=u),y=m.$?d(m.$.cellObj.date):void 0,y&&b.push({hFrom:u,hTo:m,vFrom:y.from,vTo:y.to})),b}_refreshTimelineHeaderCells(e){const t=this;e||(e="horizontal",t._refreshTimelineHeaderCells("vertical")),"horizontal"===e&&t.$.timelineViewAllDay.offsetHeight&&(t.$.timelineViewAllDaylabel.innerHTML=`<div>${t.localize("allDay")}</div>`);const[n,i,a,r]="horizontal"===e?["scrollLeft","left","width",t.$.timelineHeaderHorizontalContent]:["scrollTop","top","height",t.$.timelineHeaderVerticalContent],o=t.$.timelineTimeZoneLabelContainer,s=t.timeZones,l=t.rightToLeft,d=r.querySelector(".smart-scheduler-view-time"),c=t.viewType,u=c.indexOf("timeline")>-1,m=d.children,y=t[n],b=t._timelineCells[e];let f,w;for(let v=0;v<b.length;v++){const S=b[v];if(y<=S[i]+S[a]){f=v;break}}(o.parentElement&&!u&&"agenda"!==c&&"vertical"===e||u&&"horizontal"===e)&&(w=o.children);for(let v=0;v<m.length;v++){const S=m[v],_=S.children;let T=f;if(w){const z=s.find(M=>M.id===S.timeZone);w[v]&&(w[v].innerHTML=z?`<div>${z.label}</div>`:"")}for(let z=0;z<_.length;z++){const M=_[z],L=b[T];if(!L)break;T++,M.$={cellObj:L},M.innerHTML=`<div>${L.noLabel?"":t._getDateString({date:new Date(L.date),timeZone:S.timeZone},e)}</div>`,M.style[a]=L[a]+"px","horizontal"===e?l?(M.style.left="",M.style.right=L[i]+"px"):(M.style.right="",M.style.left=L[i]+"px"):M.style[i]=L[i]+"px",L.weekend?M.setAttribute("weekend",""):M.removeAttribute("weekend"),L.nonworking?M.setAttribute("nonworking",""):M.removeAttribute("nonworking"),L.separator?M.setAttribute("separator",""):M.removeAttribute("separator"),L.groupSeparator?M.setAttribute("group-separator",""):M.removeAttribute("group-separator"),L.showLabel?M.setAttribute("show-label",L.showLabel):M.removeAttribute("show-label"),L.restricted?M.setAttribute("restricted",""):M.removeAttribute("restricted")}}t._refreshHeaderDetailCells(e),t._refreshHeaderGroupCells(e),r[n]="scrollLeft"===n?t._getScrollLeft(t[n]):t[n]}_refreshHeaderGroupCells(e){const t=this,n=t._timelineCells.groups,i=t.$.groupsContainer,a=t.groupByDate;let r,o,s,l,d;if(!(i&&(d=i.querySelector(".smart-scheduler-view-header-groups-container"),l="horizontal"===e?t.$.timelineHeaderHorizontal:t.$.timelineHeaderVertical,n&&d&&l.contains(d))))return;[r,o,s]="vertical"===e?["top","height","scrollTop"]:["left","width","scrollLeft"];let c=d.children,u=document.createDocumentFragment();for(;c.length;)u.appendChild(d.firstElementChild);c=u.children;for(let m=0;m<c.length;m++){const b=n[m];t._refreshAdditionalHeaderCells({orientation:e,fragment:c[m],type:"groups",offset:r,size:o,cellsObj:b[a?"cellsByDate":"cells"],resource:b.resource})}d.appendChild(u),t.$.groupsContainer.querySelector(".smart-scheduler-view-groups-content")[s]="scrollLeft"===s?t._getScrollLeft(t[s]):t[s]}_refreshHeaderDetailCells(e,t){const n=this,i=n._timelineCells.details;let a,r,o,s;if(!i||"horizontal"!==e||"timelineWeek"!==n.viewType||(o=n.$.timelineHeaderHorizontalContent,s=o.querySelector(".smart-scheduler-view-details"),!s))return;[a,r]=["left","width"];let l=s.children,d=document.createDocumentFragment();for(;l.length;)d.appendChild(s.firstElementChild);n._refreshAdditionalHeaderCells({orientation:e,fragment:d,type:"details",offset:a,size:r,cellsObj:i,refreshContentOnly:t}),s.appendChild(d)}_refreshAdditionalHeaderCells(e){const t=this,n="agenda"===t.viewType,i=e.orientation,a=e.fragment,[r,o,s,l,d]=[e.type,e.offset,e.size,e.cellsObj,e.resource],c=t._getFirstCellObjInView({orientation:i,type:r,resource:d});if(!c)return;t._recycleContainerCells({fragment:a,cellsNeeded:t._getTimelineVisibleCellsCount({orientation:i,type:r,resource:d})});const u=Array.from(a.children),m=l.indexOf(c),y=t.rightToLeft,b="top"===o?o:"left";for(let f=0;f<u.length;f++){const w=u[f],v=l[m+f];if(w.$={cellObj:v},"groups"===r){if(!v[s]&&n){w.remove();continue}t._setGroupContent(w)}else{const S=v.date;w.innerHTML=`<div>${v.noLabel?"":t._getDateString({date:new Date(S)},i,!0)}</div>`}if(v.groupSeparator?w.setAttribute("group-separator",""):w.removeAttribute("group-separator"),v.separator?w.setAttribute("separator",""):w.removeAttribute("separator"),v.group){const S=v.group;for(const _ in S)w.setAttribute(_,S[_]||"")}w.style.top=w.style.left=w.style.width=w.style.height=null,w.style[s]=v[s]+"px","left"===b?y?(w.style.left="",w.style.right=v[o]+"px"):(w.style.right="",w.style.left=v[o]+"px"):(w.style.left="",w.style.right="",w.style[b]=v[o]+"px")}}_createWindow(e){const t=this,n=e?e+"SchedulerWindow":"schedulerWindow";if(t.$[n])return t.$[n];const i=document.createElement("smart-window");return i.classList.add("smart-scheduler-window"),e?(i.classList.add(e),i.id=t.id+"ConfirmWindow"):i.id=t.id+"Window",i.setAttribute("smart-id",n),t.$[n]=i,t["$"+n]=Smart.Utilities.Extend(i),i.rightToLeft=t.rightToLeft,i.theme=t.theme,i.animation=t.animation,i.disableSnap=!0,i.headerButtons=["close"],i}_openWindow(e,t,n){const i=this;if(!e&&!(e=i._createEventFromSelection())||[i.$.schedulerWindow,i.$.confirmSchedulerWindow].some(s=>s&&s.opened)||i.disableWindowEditor)return;const a=t?"confirm":"";function r(){function s(){i._positionWindow(),o.opened?(o.bringToFront(),o._handleActiveState(),o._onOpenCallback&&o._onOpenCallback()):o.open()}if(i.windowCustomizationFunction?i.windowCustomizationFunction(o,a,i._cloneObject(e)):(i._setPopupWindowTemplate("header",a,n),i._setPopupWindowTemplate("footer",a,n),i._setPopupWindowTemplate("content",a,n)),!o.opened){const d=i["$"+(a?a+"SchedulerWindow":"schedulerWindow")];d.unlisten("transitionend"),d.unlisten("open"),d.unlisten("close"),d.unlisten("closing"),d.unlisten("click"),d.unlisten("change"),d.unlisten("keydown"),a||(o._onOpenCallback=()=>{((o.shadowRoot||o).querySelector(".smart-input")||o).focus({preventScroll:!0})}),o.hasAnimation&&d.listen("transitionend",i._windowTransitionendHandler.bind(i)),d.listen("open",i._windowOpenHandler.bind(i)),d.listen("close",i._windowCloseHandler.bind(i)),d.listen("closing",i._windowClosingHandler.bind(i)),d.listen("click",i._windowClickHandler.bind(i)),d.listen("change",i._windowChangeHandler.bind(i)),d.listen("keydown",i._windowKeyDownHandler.bind(i))}o.shadowRoot?(o.importStyle(Smart.Utilities.Core.getScriptLocation()+Smart.StyleBaseUrl.replace("/scoped/","/smart.textbox.css")),i._onShadowDomLoaded(o,"smart.window.css",s)):s();const l=(i.getAttribute("aria-owns")||"")+" "+o.id;i.setAttribute("aria-owns",l.trim())}if(!e)return;const o=i._createWindow(a);i.$.fireEvent("editDialogOpening",{target:o,type:a,item:i._cloneObject(e)}).defaultPrevented||(o._target={event:e,originalTarget:t,windowType:n},o.parentElement||i.getShadowRootOrBody().appendChild(o),o.isCompleted?r():o.whenReady(()=>r()))}_positionWindow(){const e=this,t=e.getShadowRootOrBody(),n=[e.$.schedulerWindow,e.$.confirmSchedulerWindow];for(let i=0;i<n.length;i++){const a=n[i];if(!a||!t.contains(a))continue;const r=e.getBoundingClientRect();if(a.opened||(a.style.left=a.style.top=""),a.querySelector(".smart-scheduler-window-repeat")){const o=a.offsetWidth;!a.hasAttribute("horizontal")&&2*o<=r.width?a.setAttribute("horizontal",""):a.hasAttribute("horizontal")&&o>r.width&&a.removeAttribute("horizontal")}else a.removeAttribute("horizontal");e._isMobile?(a.setAttribute("mobile",""),a.style.left=r.left+window.pageXOffset+"px",a.style.top=r.top+window.pageYOffset+"px",a.style.width=r.width+"px",a.style.height=r.height+"px"):(a.style.left=Math.max(r.left+window.pageXOffset,r.left+window.pageXOffset+r.width/2-a.offsetWidth/2)+"px",a.style.top=Math.max(r.top+window.pageYOffset,r.top+window.pageYOffset+r.height/2-a.offsetHeight/2)+"px")}}_windowTransitionendHandler(e){const t=this,n=e.target;if(!n.classList.contains("smart-scheduler-window"))return;let i,a;n.classList.contains("confirm")?(i=t.$.confirmSchedulerWindow,a=t.$confirmSchedulerWindow):(i=t.$.schedulerWindow,a=t.$schedulerWindow),i.opened||"visibility"!==e.propertyName||(a.unlisten("transitionend"),i.remove())}_windowOpenHandler(e){const t=this,n=e.target;if(!n.classList.contains("smart-scheduler-window"))return;const i=n.classList.contains("confirm")?t.$confirmSchedulerWindow:t.$schedulerWindow,a=n._target.event;i&&(t._handleModal(!0),t.$.fireEvent("editDialogOpen",n===t.$.schedulerWindow?{target:e.target,editors:t._windowEditors,item:t._cloneObject(a)}:{target:e.target,item:t._cloneObject(a)}),i.unlisten("open"))}_windowClosingHandler(e){const t=this,n=e.target;if(!n.classList.contains("smart-scheduler-window"))return;const i=n.classList.contains("confirm")?t.$confirmSchedulerWindow:t.$schedulerWindow;if(i){const a={target:e.target,item:t._cloneObject(e.target._target.event)};if(n===t.$.schedulerWindow&&(a.editors=t._windowEditors),t.$.fireEvent("editDialogClosing",a).defaultPrevented)return void e.preventDefault();if(i.unlisten(e.type),t.hasAttribute("aria-owns")){const r=t.getAttribute("aria-owns").replace(i.id,"").trim();r?t.setAttribute("aria-owns",r):t.removeAttribute("aria-owns")}}}_windowCloseHandler(e){const t=this,n=e.target;if(!n.classList.contains("smart-scheduler-window"))return;const i=n.classList.contains("confirm")?t.$confirmSchedulerWindow:t.$schedulerWindow;if(i){const a=e.target._target.event;t._handleModal(),t.$.fireEvent("editDialogClose",n===t.$.schedulerWindow?{target:e.target,editors:t._windowEditors,item:t._cloneObject(a)}:{target:e.target,item:t._cloneObject(a)}),i.unlisten("close"),i.unlisten("click"),i.unlisten("keydown"),t.hasAttribute("aria-owns")&&t.removeAttribute("aria-owns"),t.hasAnimation||i.remove(),(t._getEventCell(n._target.originalTarget||a)||t.$.timeline).focus({preventScroll:!0})}}_getEventCell(e){if(e instanceof HTMLElement&&(e=e.$.event),!e)return;const t=this.$.timelineEventsContainer.children;for(let n=0;n<t.length;n++){const i=t[n],a=i.$?i.$.event:void 0;if(!a)continue;const r=a.$?a.$.event:void 0;if(a===e||r&&(r===e||e.$&&r===e.$.event))return i}}_windowChangeHandler(e){const t=this,n=e.target,i=n.closest(".smart-scheduler-window.confirm")?t.$.confirmSchedulerWindow:t.$.schedulerWindow;if(e.stopPropagation(),i!==t.$.schedulerWindow)return;const a=n.closest(".smart-scheduler-window-editor"),r=a?a.getAttribute("type"):void 0;if(r)if(r.indexOf("repeatEnd")>-1){const o=n.closest(".smart-scheduler-window-editor[multiple]");if(o){const s=o.children;for(let l=0;l<s.length;l++){const d=s[l],c=d.querySelector("[event-editor]");c&&(c.disabled=!d.contains(n))}}}else if(t._windowEditors&&n.hasAttribute("event-editor"))if("allDay"!==r)if("repeat"!==r){if("repeatFreq"===r)return t._setPopupWindowEditor(t._windowEditors.repeatOn),void t._setPopupWindowEditor(t._windowEditors.repeatInterval);"dateStart"!==r&&"dateEnd"!==r?"resources"!==r||t._setResourceDataEditor(t._windowEditors.resourceData):t._handleEditorDateValidation(n)}else i._target.event&&(t._createWindowEditor("repeat"),t._positionWindow());else t._handleEditorAllDay(n,i)}_windowKeyDownHandler(e){const t=this,n=e.target.closest(".smart-scheduler-window.confirm")?t.$.confirmSchedulerWindow:t.$.schedulerWindow;if(e.stopPropagation(),n!==t.$.schedulerWindow||"Enter"!==e.key)return;const i=n.getRootNode().activeElement,a=t._windowEditors,r=n._target.event;r&&a&&a.label&&a.label.contains(i)&&(t._updateEventViaWindow(r,a),n.close(),delete n._target)}_handleEditorDateValidation(e){const t=this,n=t._windowEditors.dateStart,i=t._windowEditors.dateEnd,a=t._windowEditors.allDay?t._windowEditors.allDay.querySelector("[event-editor]"):void 0;if(!n||!i)return;const r=n.querySelector("[event-editor]"),o=i.querySelector("[event-editor]"),s={dateStart:r.value.toDate(),dateEnd:o.value.toDate(),allDay:!!a&&a.checked};e===r?(s.type="end",o.value=t._getValidDate(s)):e===o&&(s.type="start",r.value=t._getValidDate(s))}_handleEditorAllDay(e){const t=this,n=t._windowEditors.dateStart,i=t._windowEditors.dateEnd;if(!n||!i)return;const a=n.querySelector("[event-editor]"),r=i.querySelector("[event-editor]"),o=e.checked;let s=a.value.toDate(),l=r.value.toDate();if(o){const d={dateStart:s,dateEnd:l,allDay:o,type:"start"};a.formatString="yyyy-MMM-dd",r.formatString="yyyy-MMM-dd",s.setHours(t.hourStart,0,0,0),l.setHours(t.hourEnd,0,0,0),a.value=t._getValidDate(d),d.type="end",r.value=t._getValidDate(d)}else{const d=t.hourStart,c=t.$.schedulerWindow;c&&c._target?(s=c._target.event.dateStart,l=c._target.event.dateEnd):(l=new Date(s),s.setHours(d,0,0,0),l.setHours(d,60/t._getCellsScaleCount(),0,0)),a.value=s,r.value=l,a.formatString="yyyy-MMM-dd HH:mm",r.formatString="yyyy-MMM-dd HH:mm"}}_windowClickHandler(e){const t=this;let n=(e.originalEvent||e).target;n.shadowRoot&&(n=(e.originalEvent||e).composedPath()[0]);const i=n.closest(".smart-scheduler-window.confirm")?t.$.confirmSchedulerWindow:t.$.schedulerWindow,a=n.closest(".smart-scheduler-window-button"),r=t._windowEditors,o=i._target.event,s=i._target.windowType;if(i&&a)if(a.classList.contains("ok")&&r?t._updateEventViaWindow(o,r):a.classList.contains("delete")&&t._deleteEventViaWindow(o),i.close(),delete i._target,a.classList.contains("edit-event")){if(o.date||(o.date=new Date(o.dateStart)),delete o.repeat,"deleteConfirm"===s)return o.hidden=!0,void t._updateEventViaWindow(o);t._openWindow(o)}else if(a.classList.contains("edit-series")&&o.$){if("deleteConfirm"===s)return delete o.$.event.repeat,void t._updateEventViaWindow(o);t._openWindow(o.$.event)}}_deleteEventViaWindow(e){const t=this,n=t._events.indexOf(e),i=e.$?e.$.event:void 0;if(i){const a=i.repeat?i.repeat.exceptions:void 0,r=a?a.indexOf(e):void 0;r>-1&&(a.splice(r,1),t._refreshTimelineEvents())}else if(n>-1){const a=t._cloneObject(e);if(t.$.fireEvent("itemChanging",{type:"removing",item:a}).defaultPrevented)return;t._events.splice(n,1),t._refreshTimelineEvents(),t._updateUndoRedo(t._cloneObject(e),void 0,"itemRemove"),t.$.fireEvent("itemRemove",{item:a}),t.$.fireEvent("itemChange",{type:"remove",item:a})}}_updateEventViaWindow(e,t){const n=this,i=n._events.indexOf(e),a=e.$?e.$.event:void 0,r=i<0;if(!r&&n.$.fireEvent("itemChanging",{type:"updating",item:n._cloneObject(e)}).defaultPrevented||r&&!a&&n.$.fireEvent("itemChanging",{type:"inserting",item:n._cloneObject(e)}).defaultPrevented)return;let o,s="Update";if(t&&n._updateEventSettings(e,t),r)if(a){if(a.repeat){const l=a.repeat;l.exceptions||(l.exceptions=[]);const d=l.exceptions;delete l.repeat,d.indexOf(e)<0&&l.exceptions.push(e),o=n._cloneObject(a)}}else s="Insert",o=n._cloneObject(e),n._events.push(e),n._updateUndoRedo(void 0,o,"itemInsert");else o=n._cloneObject(e);n.$.fireEvent("item"+s,{item:o}),n.$.fireEvent("itemChange",{type:s.toLowerCase(),item:o}),n._validateEventDateRange(e),n._refreshTimelineEvents()}_updateEventSettings(e,t){const n=this,i=Object.keys(t);for(let a=0;a<i.length;a++){const r=i[a],o=t[r].querySelectorAll("[event-editor]"),s=o[0];if(s)switch(r){case"allDay":e[r]=s.checked,s.checked&&(e.dateStart.setHours(0,0,0,0),e.dateEnd.setHours(23,59,59,999),e.dateEnd=n._getValidDate({dateStart:e.dateStart,dateEnd:e.dateEnd,allDay:!0,type:"end"}));break;case"dateEnd":case"dateStart":{const l=s.value.toDate();let d,c;"dateStart"===r?(d=l,c=e.dateEnd):(d=e.dateStart,c=l),c=n._getValidDate({dateStart:d,dateEnd:c,type:"end"}),n._isEventRestricted({dateStart:d,dateEnd:c})||(e.dateStart=d,e.dateEnd=c);break}case"conference":case"description":case"label":e[r]=s.value;break;case"exceptions":e.repeat&&s.checked&&delete e.repeat.exceptions;break;case"notifications":s.value.length?e.notifications=s.value.slice(0):delete e.notifications;break;case"hidden":e.$&&e.$.event&&(e[r]=s.checked);break;case"backgroundColor":e[r]=s.value,e[r]||delete e[r];break;case"resources":n._updateEventResources(e,t,s);break;case"resoruceData":break;case"status":{const l=n.statuses[s.selectedIndex];l&&l.value?e[r]=l.value:delete e[r];break}default:n._updateEventRepeating(e,t,r,o)}}}_updateEventResources(e,t,n){const i=this.resources;if(!n.value)return void i.forEach(s=>delete e[s.value]);const a=t.resourceData.querySelectorAll(".smart-scheduler-window-editor[resource-type]");let r,o=[];for(let s=0;s<a.length;s++){const l=a[s],d=l.querySelector("[event-editor]"),c=l.getAttribute("resource-type");if(!d||d.value&&d.selectedIndex<0){o.push(c);continue}const u=i.find(m=>m.value===c);if(u){const m=u.dataSource[d.selectedIndex];r=!0,m?(e[c]=m.id,o.push(c)):delete e[c]}}r&&i.forEach(s=>{o.indexOf(s.value)<0&&delete e[s.value]})}_updateEventRepeating(e,t,n,i){const a=i[0];if("repeat"===n)a.checked?e.repeat=e.repeat||{}:delete e.repeat;else{if(n.toLowerCase().indexOf("repeat")<0||!e.repeat)return;"object"!=typeof e.repeat&&(e.repeat={});const r=e.repeat;switch(n){case"repeatEnd":case"repeatEndAfter":case"repeatEndOn":{const o=t[n].querySelector(".smart-radio-button");if(o&&o.checked){const s=a.value;r.repeatEnd="repeatEndOn"===n?s.toDate():parseInt(s)}break}case"repeatFreq":r[n]=a.value.toLowerCase();break;case"repeatInterval":r[n]=parseInt(a.value);break;case"repeatOn":switch(r.repeatFreq){case"weekly":r[n]=a.selectedValues;break;case"monthly":r[n]=a.value;break;case"yearly":{const o=i[1]?parseInt(i[1].value):0;r[n]={month:a.selectedIndex,date:o};break}}}}}_updateUndoRedo(e,t,n){const i=this;if(!t&&!e)return void delete i._undoRedoHistory;let a=i._undoRedoHistory;if(a||(a=i._undoRedoHistory={currentStep:1,steps:[]}),n){const r=a.currentStep;r!==a.steps.length&&(a.steps=r<1?[]:a.steps.slice(0,r)),a.steps.length===i.undoRedoSteps&&a.steps.shift(),a.steps.push({oldValue:e,newValue:t,action:n,timeStamp:Date.now()})}a.currentStep=Math.max(1,a.steps.length)}_isUndoPossible(){const e=this._undoRedoHistory;if(e)return e.steps.length&&e.currentStep>0}_isRedoPossible(){const e=this._undoRedoHistory;if(!e)return;const t=e.steps;return t.length&&e.currentStep<t.length}_handleUndoRedo(e="undo",t){const n=this,i=n._undoRedoHistory;if(!i)return;const a=i.steps,r="undo"===e?0:1,o=a[(isNaN(t)?i.currentStep+r:t)-1];if(o){const s=n._events;let l,d,c;switch("undo"===e?o.newValue&&!o.oldValue?(d="delete",l=o.newValue):!o.newValue&&o.oldValue?(d="insert",l=o.oldValue):o.newValue&&o.oldValue&&(d="update",l=o.oldValue):o.newValue&&!o.oldValue?(d="insert",l=o.newValue):!o.newValue&&o.oldValue?(d="delete",l=o.oldValue):o.newValue&&o.oldValue&&(d="update",l=o.newValue),d){case"insert":c=l,s.push(c);break;case"delete":c=n._containsEvent(l),c&&s.splice(s.indexOf(c),1);break;case"update":if(c=n._containsEvent(o.newValue),c){for(let m in c)delete c[m];const u=n._cloneObject(l);for(let m in u)c[m]=u[m]}}if(c)return i.currentStep=Math.max(0,a.indexOf(o)+r),n.$.tooltip.close(),n.closeWindow(),n._refreshTimelineEvents(),n.$.fireEvent(o.action,{operation:e,eventObj:n._cloneObject(c),itemDateRange:{dateStart:new Date(l.dateStart),dateEnd:new Date(l.dateEnd)}}),n.unfocusable||n.$.timeline.focus({preventScroll:!0}),!0}}_getValidDate(e){const[t,n,i,a]=[e.dateStart,e.dateEnd,e.type,e.allDay];let r=new Date(t),o=new Date(n);if(isNaN(r)||isNaN(o)||n.getTime()>t.getTime())return"start"===i?r:o;for("start"===i?r=new Date(o):o=new Date(r);r.getTime()>o.getTime();){const s=r.getTime();"start"===i?(r.setHours(r.getHours()-1),r.getTime()===s&&r.setHours(r.getHours()-2)):(o.setHours(o.getHours()+1),o.getTime()===s&&o.setHours(o.getHours()+2))}return a&&r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()&&r.getDate()===o.getDate()&&(o.setHours(0,0,0,0),o.setDate(o.getDate()+1)),"start"===i?r:o}_handleModal(e){const t=this;let n=(t.shadowRoot||t).querySelector(".smart-scheduler-window-modal");e?(n||(n=document.createElement("div"),n.classList.add("smart-scheduler-window-modal")),n.parentElement||(t.$.container.appendChild(n),t.setAttribute("modal",""))):n&&n.parentElement&&(n.parentElement.removeChild(n),t.removeAttribute("modal"))}_onShadowDomLoaded(e,t,n){requestAnimationFrame(function i(){const a=(e.shadowRoot||e.getRootNode()).querySelectorAll("link");for(let r=0;r<a.length;r++)if(-1!==a[r].href.indexOf(t))return void n();requestAnimationFrame(i)})}_setPopupWindowTemplate(e,t,n){const i=this,a=i.$[t?t+"SchedulerWindow":"schedulerWindow"];if(!a)return;if("content"===e)return void i._setWindowContent(t,n);if(a[e+"Template"]||(a[e+"Template"]=i._createWindowTemplate(e,t)),t)return void i._setWindowTypeSection(e,t,n);const r=a._target.event,o=r.$&&r.$.event,s=i._events.indexOf(r)<0&&!o;let l;if(o&&o.repeat.exceptions&&(l=o.repeat.exceptions.indexOf(r)>-1),"header"===e){const d=(a.shadowRoot||a).querySelector(".smart-scheduler-window-label");r&&d&&(d.innerHTML=s?i.localize("newEvent"):o&&!l?i.localize("eventException"):r.label)}else if("footer"===e){const d=(a.shadowRoot||a).querySelectorAll(".smart-scheduler-window-button");for(let c=0;c<d.length;c++){const u=d[c];u.innerHTML='<span class="smart-icon"></span>',u.theme=i.theme,u.rightToLeft=i.rightToLeft,u.animation=i.animation,u.classList.contains("ok")?(u.innerHTML+=i.localize("ok"),u.setAttribute("aria-label","ok")):u.classList.contains("cancel")?(u.innerHTML+=i.localize("cancel"),u.setAttribute("aria-label","cancel")):u.classList.contains("delete")&&(u.innerHTML+=i.localize("delete"),u.setAttribute("aria-label","delete"),u.classList[s||o&&!l?"add":"remove"]("smart-hidden"));const m=u.querySelector(".smart-ripple");m&&m.parentElement.removeChild(m)}}}_setWindowTypeSection(e,t,n){const i=this,a=i.$[t?t+"SchedulerWindow":"schedulerWindow"];if(t&&a&&"confirm"===t)if("header"===e){const r=(a.shadowRoot||a).querySelector(".smart-scheduler-window-label");r&&(r.innerHTML=i.localize(n?n+"Label":"repeatConfirmLabel")||"")}else if("footer"===e){const r=(a.shadowRoot||a).querySelectorAll(".smart-scheduler-window-button");for(let o=0;o<r.length;o++){const s=r[o];s.theme=i.theme,s.rightToLeft=i.rightToLeft,s.animation=i.animation,s.classList.contains("edit-event")?(s.innerHTML=i.localize(n?n+"Event":"editEvent"),s.setAttribute("aria-label","edit-event")):s.classList.contains("edit-series")&&(s.innerHTML=i.localize(n?n+"Series":"editSeries"),s.setAttribute("aria-label","edit-series"));const l=s.querySelector(".smart-ripple");l&&l.parentElement.removeChild(l)}}}_setWindowContent(e,t){const n=this,i=n.$[e?e+"SchedulerWindow":"schedulerWindow"];if(e){let o=i.querySelector(".smart-scheduler-confirm-label");return!i.content||i.content.innerHTML&&!o?void 0:(o||(o=document.createElement("label"),o.classList.add("smart-scheduler-confirm-label"),i.appendChild(o)),void("confirm"===e&&o&&(o.innerHTML=n.localize(t||"repeatConfirm")||"")))}const a=i._target.event,r=[].slice.call(i.getElementsByClassName("smart-scheduler-window-editor"));i.innerHTML&&!r.length||a&&(n._createWindowEditor(),n._createWindowEditor("repeat"),a.id&&i.setAttribute("aria-controls",a.id))}_createWindowEditor(e="main"){const t=this,n=t.$.schedulerWindow,i=n._target.event,a=t._windowEditors;let r=n.querySelector(".smart-scheduler-window-content-wrapper"),o=n.querySelector(`.smart-scheduler-window-${e}`),s=i.repeat,l=i.$&&i.$.event;if(a&&a.repeat){const c=a.repeat.querySelector("[event-editor]");c&&(s=c.checked)}if(r||(r=document.createElement("div"),r.classList.add("smart-scheduler-window-content-wrapper"),n.appendChild(r)),"repeat"===e&&(!s||l))return void(o&&o.remove());if(!o){if(a){const c="main"===e?a.label:a.repeatFreq;c&&(o=c.closest(`.smart-scheduler-window-${e}`))}o||(o=document.createElement("div"),o.classList.add(`smart-scheduler-window-${e}`),o.innerHTML=t._getWindowEditorTemplate(e))}r.contains(o)||r.appendChild(o);const d=o.querySelectorAll(".smart-scheduler-window-editor[type]");for(let c=0;c<d.length;c++)t._setPopupWindowEditor(d[c])}_getWindowEditorTemplate(e){return e&&"main"!==e?"repeat"===e?'\n                <div class="smart-scheduler-window-editor" type="repeatFreq">\n                    <label></label>\n                    <smart-input readonly event-editor drop-down-button-position="right"></smart-input>\n                </div>\n                <div class="smart-scheduler-window-editor" type="repeatInterval">\n                    <label></label>\n                    <smart-number-input min="1" event-editor></smart-number-input>\n                </div>\n                <div class="smart-scheduler-window-editor" type="repeatOn" multiple>\n                    <label></label>\n                </div>\n                <div class="smart-scheduler-window-editor" multiple>\n                    <div class="smart-scheduler-window-editor" type="repeatEnd">\n                        <label></label>\n                        <smart-radio-button group-name="repeat"></smart-radio-button>\n                    </div>\n                    <div class="smart-scheduler-window-editor" type="repeatEndOn">\n                        <smart-radio-button group-name="repeat"></smart-radio-button>\n                        <smart-date-time-picker calendar-button drop-down-append-to="body" event-editor\n                        enable-mouse-wheel-action drop-down-display-mode="auto"></smart-date-time-picker>\n                    </div>\n                    <div class="smart-scheduler-window-editor" type="repeatEndAfter">\n                        <smart-radio-button group-name="repeat"></smart-radio-button>\n                        <smart-number-input min="1" event-editor></smart-number-input>\n                        <label></label>\n                    </div>\n                </div>\n                <div class="smart-scheduler-window-editor smart-hidden" type="exceptions">\n                    <label></label>\n                    <smart-check-box event-editor></smart-check-box>\n                </div>':void 0:'\n            <div class="smart-scheduler-window-editor" type="label">\n                <label></label>\n                <smart-input event-editor></smart-input>\n            </div>\n            <div class="smart-scheduler-window-editor" multiple>\n                <div class="smart-scheduler-window-editor" type="dateStart">\n                    <label></label>\n                    <smart-date-time-picker calendar-button drop-down-append-to="body" event-editor\n                    enable-mouse-wheel-action drop-down-display-mode="auto"></smart-date-time-picker>\n                </div>\n                <div class="smart-scheduler-window-editor" type="dateEnd">\n                    <label></label>\n                    <smart-date-time-picker calendar-button drop-down-append-to="body" event-editor\n                        enable-mouse-wheel-action drop-down-display-mode="auto"></smart-date-time-picker>\n                </div>\n            </div>\n            <div class="smart-scheduler-window-editor" type="description">\n                <label></label>\n                <smart-text-area event-editor></smart-text-area>\n            </div>\n            <div class="smart-scheduler-window-editor" multiple>\n                <div class="smart-scheduler-window-editor" type="allDay">\n                    <label></label>\n                    <smart-switch-button event-editor></smart-switch-button>\n                </div>\n                <div class="smart-scheduler-window-editor" type="hidden">\n                    <label></label>\n                    <smart-switch-button event-editor></smart-switch-button>\n                </div>\n                <div class="smart-scheduler-window-editor" type="repeat">\n                    <label></label>\n                    <smart-switch-button event-editor></smart-switch-button>\n                </div>\n            </div>\n            <div class="smart-scheduler-window-editor" type="conference">\n                <label></label>\n                <smart-input event-editor></smart-input>\n                <div style="color: var(--smart-error);" class="smart-hidden smart-invalid-conference-link-label"></div>\n                <div class="smart-hidden" class="smart-conference-link"></div>\n            </div>\n            <div class="smart-scheduler-window-editor" type="notifications">\n                <label></label>\n                <smart-notification-panel event-editor></smart-notification-panel>\n            </div>\n            <div class="smart-scheduler-window-editor" multiple>\n                <div class="smart-scheduler-window-editor" type="backgroundColor">\n                    <label></label>\n                    <smart-color-input event-editor></smart-color-input>\n                </div>\n                <div class="smart-scheduler-window-editor" type="status">\n                    <label></label>\n                    <smart-input event-editor></smart-input>\n                </div>\n            </div>\n            <div class="smart-scheduler-window-editor smart-hidden" type="resources">\n                <label></label>\n                <smart-check-input event-editor disabled></smart-check-input>\n            </div>\n            <div class="smart-scheduler-window-editor smart-hidden" multiple type="resourceData"></div>\n            </div>'}_setPopupWindowEditor(e){const t=this,n=e.getAttribute("type"),i=e.querySelector("label"),a=t.$.schedulerWindow._target.event,r=a.$&&a.$.event;let o=e.querySelector("[event-editor]");if(!a)return;t._windowEditors||(t._windowEditors={});const s=t._windowEditors,l=t.rightToLeft;if(s[n]||(s[n]=e),i&&(i.id=t.id+n+"Label",i.innerHTML=t.localize(n)),"label"===n||"description"===n)o.value=void 0!==a[n]?a[n]+"":"";else if(n.indexOf("date")>-1)o.formatString=a.allDay?"yyyy-MMM-dd":"yyyy-MMM-dd HH:mm",o.calendarButtonPosition=l?"left":"right",o.value=new Date(a[n]);else if("allDay"===n||"repeat"===n)o.checked=!!a[n],e.classList["repeat"===n&&r?"add":"remove"]("smart-hidden");else if("notifications"===n)t._setNotificationEditor(e,o);else if("conference"===n){const d=o.nextElementSibling;d.innerHTML=t.localize("invalidConferenceLink"),d.classList.add("smart-hidden");const c=o.nextElementSibling.nextElementSibling;c.innerHTML=`<smart-button class="info">${t.localize("join")}</smart-button>`,c.classList.add("smart-hidden"),i.innerHTML=`<div class="smart-notification-panel">\n               <div class="smart-notification-placeholder" role="button" smart-id="placeholder" tabindex="0">${t.localize("placeholderLink")}</div>\n            </div>`,i.onclick=()=>{o.classList.contains("smart-hidden")&&(o.classList.remove("smart-hidden"),i.innerHTML=`<div class="smart-notification-panel">\n                <div role="button" smart-id="placeholder" tabindex="0">${t.localize("placeholderSetLink")}</div>\n             </div>`,o.focus())},c.onclick=y=>{y.target&&y.target.classList.contains("smart-button")&&window.open(c.getAttribute("link"),"_blank")};const u=()=>{o.value.startsWith("https://zoom.us/")?c.innerHTML=`<smart-button class="info">${t.localize("joinWith",{value:"Zoom"})}</smart-button>`:o.value.startsWith("https://meet.google.com/")?c.innerHTML=`<smart-button class="info">${t.localize("joinWith",{value:"Google Meet"})}</smart-button>`:o.value.startsWith("https://teams.microsoft.com/")&&(c.innerHTML=`<smart-button class="info">${t.localize("joinWith",{value:"Microsoft Teams"})}</smart-button>`),c.setAttribute("link",o.value),c.classList.remove("smart-hidden")},m=()=>{/^(ftp|http|https):\/\/[^ "]+$/.test(o.value)?(d.classList.add("smart-hidden"),u()):(d.classList.remove("smart-hidden"),c.classList.add("smart-hidden"))};o.onchange=o.onkeyup=()=>{const y=/^(ftp|http|https):\/\/[^ "]+$/.test(o.value);t._typing&&clearTimeout(t._typing),t._typing=setTimeout(()=>{y?(d.classList.add("smart-hidden"),u()):(d.classList.remove("smart-hidden"),c.classList.add("smart-hidden"))},300)},o.classList.add("smart-hidden"),a[n]?(o.value=a[n],o.classList.remove("smart-hidden"),i.innerHTML=`<div class="smart-notification-panel">\n                <div role="button" smart-id="placeholder" tabindex="0">${t.localize("placeholderSetLink")}</div>\n             </div>`,u(),m()):o.value=""}else if("repeatFreq"===n){const d=["hourly","daily","weekly","monthly","yearly"],c=a.repeat?(a.repeat.repeatFreq+"").toLowerCase():d[0];o.dataSource=[{label:t.localize(d[0]),value:d[0]},{label:t.localize(d[1]),value:d[1]},{label:t.localize(d[2]),value:d[2]},{label:t.localize(d[3]),value:d[3]},{label:t.localize(d[4]),value:d[4]}],o.value=t.localize(d.indexOf(c)>-1?c:d[0])}else if("repeatInterval"===n){const d=parseInt(a.repeat?a.repeat.repeatInterval:void 0);if(o.value=isNaN(d)?1:d,i&&s.repeatFreq){const c=s.repeatFreq.querySelector("[event-editor]");if(c){const u={hourly:"repeatEveryHour",daily:"repeatEveryDay",weekly:"repeatEveryWeek",monthly:"repeatEveryMonth",yearly:"repeatEveryYear"},m=c.dataSource[Math.max(0,c.selectedIndex)].value||"";i.innerHTML+=` (${t.localize(u[m.toLowerCase()])||""})`}}}else if("repeatOn"===n)t._setRepeatOnEditor(e,o);else if(n.indexOf("repeatEnd")>-1){let d=a.repeat?a.repeat.repeatEnd:void 0,c=d;switch(n){case"repeatEnd":c=!c;break;case"repeatEndOn":c=c instanceof Date;break;case"repeatEndAfter":c="number"==typeof c&&!isNaN(c)}const u=e.querySelector(".smart-radio-button");u&&(u.innerHTML=t.localize(n+"Option"),u.checked=c,t._setEditorCommonProperties(u)),o&&(o instanceof Smart.DateTimePicker?(d=new Date(d),o.formatString="yyyy-MMM-dd",o.calendarButtonPosition=l?"left":"right",o.value=c&&!isNaN(d.getTime())?d:new Date):(d=parseInt(d),o.value=c&&!isNaN(d)?d:1),o.disabled=u&&!u.checked)}else if("exceptions"===n){const d=!r&&a.repeat&&a.repeat.exceptions&&a.repeat.exceptions.length;o.checked=!1,o.innerHTML=t.localize("resetExceptions"),e.classList[d?"remove":"add"]("smart-hidden")}else if("hidden"===n)o.checked=!!a[n],e.classList[r?"remove":"add"]("smart-hidden");else if("backgroundColor"===n){o.dataSource||(o.dataSource=a.colorScheme||t.colorScheme);const d=o.$.scrollView;d&&d.classList.add("smart-scheduler-color-input"),o.valueDisplayMode="colorBox",o.value=a.backgroundColor||""}else"status"===n?t._setStatusEditor(e,o):"resources"===n?t._setResourceEditor(e,o):"resourceData"===n&&t._setResourceDataEditor(e);o&&i&&o.setAttribute("aria-labelledby",i.id),t._setEditorCommonProperties(o)}_setEditorCommonProperties(e){const t=this;if(e){const n=e.messages,i=t.messages,a=t.locale;if(n)for(let r in n.en){const o=i[a][r];void 0!==o&&(n[a]||(n[a]={}),n[a][r]=o)}e.locale=t.locale,e.rightToLeft=t.rightToLeft,e.animation=t.animation,e.theme=t.theme}}_setNotificationEditor(e,t){const n=this,i=n.$.schedulerWindow._target.event;i?(t.value=Array.isArray(i.notifications)?i.notifications.slice():[],t.hourStart=n.hourStart,t.hourFormat=n.hourFormat,t.minuteFormat=n.minuteFormat,t.timeZone=n.timeZone,n._setEditorCommonProperties(t)):t.value=[]}_setStatusEditor(e,t){const n=this,i=n.statuses,a=n.$.schedulerWindow._target.event;if(!a||!i.length)return void e.classList.add("smart-hidden");const r=a.status,o=i.find(s=>s.value===r);e.classList.remove("smart-hidden"),t.dataSource=n.statuses.map(s=>{const l=void 0===s.value?"none":s.value;return s.label=n.localize(l)||l}),t.value=o?n.localize(o.label)||o.label:"",t.readonly=!0,t.placeholder=n.localize("selectPlaceholder"),t.dropDownButtonPosition=n.rightToLeft?"left":"right",n._setEditorCommonProperties(t)}_setResourceEditor(e,t){const n=this,i=n.resources,a=n.$.schedulerWindow._target.event;let r=[],o=[];a&&i.length?(e.classList.remove("smart-hidden"),r=i.map(s=>(s&&a[s.value]&&o.push(s.label),{label:s.label,value:s.value})),t.readonly=!0,t.placeholder=n.localize("selectPlaceholder"),t.dropDownButtonPosition=n.rightToLeft?"left":"right",t.disabled=!i.length,t.dataSource=r,t.value=o.toString(),n._setEditorCommonProperties(t),t.wait&&(t.wait=!1)):e.classList.add("smart-hidden")}_setResourceDataEditor(e){const t=this,n=t.resources,i=t.$.schedulerWindow._target.event;let a,r,o=Array.from(e.querySelectorAll(".smart-scheduler-window-editor")),s=[];if(i&&n.length){t._windowEditors.resources&&(r=t._windowEditors.resources.querySelector("[event-editor]"),r&&r.value&&(a=r.selectedValues));for(let l=0;l<n.length;l++){const d=n[l],c=d.label,u=d.value,m=d.dataSource;if(!m||!a)continue;const y=a.length;if(y&&a.indexOf(u)>-1||!y&&i[u]){const b=m.find(S=>d&&S.id===i[u]);let f,w,v=o.find(S=>S.getAttribute("resource-type")===u);v?(f=v.querySelector("label"),w=v.querySelector("[event-editor]")):(v=document.createElement("div"),f=document.createElement("label"),w=document.createElement("smart-input"),w.setAttribute("event-editor",""),v.appendChild(f),v.appendChild(w),v.classList.add("smart-scheduler-window-editor"),v.setAttribute("resource-type",u),e.appendChild(v)),s.push(v),t._setEditorCommonProperties(w),f.innerHTML=t.localize(c)||c,w.dataSource=d.dataSource.map(S=>Object.create({label:S.label,value:S.value})),w.value=b?b.label:"",w.dropDownButtonPosition=t.rightToLeft?"left":"right",w.readonly=!0,w.placeholder=t.localize("selectPlaceholder")}}for(let l=0;l<o.length;l++)s.indexOf(o[l])<0&&o[l].remove();e.classList.remove("smart-hidden")}else e.classList.add("smart-hidden")}_setRepeatOnEditor(e){const t=this,n=t.$.schedulerWindow._target.event,i=t._windowEditors,a=i.repeatOn,r=i.repeatFreq.querySelector("[event-editor]").value.toLowerCase();let o,s=n.repeat?n.repeat.repeatOn:void 0;if(!n||!r||["weekly","monthly","yearly"].indexOf(r)<0)return void e.classList.add("smart-hidden");a.$||(a.$={});const l=a.$;for(let c in l)c!==r&&l[c]&&l[c].remove();void 0===s&&(s=new Date(n.dateStart));let d=l[r];switch(r){case"weekly":d||(d=document.createElement("smart-button-group"),d.dataSource=t._getWeekDays(),d.selectionMode="zeroOrMany",d.setAttribute("event-editor",""),l[r]=d),t._setEditorCommonProperties(d),d.selectedValues=t._getRepeatOnCondition(r,s).map(c=>c.toString());break;case"monthly":d||(d=document.createElement("smart-number-input"),d.min=1,d.max=31,d.setAttribute("event-editor",""),l[r]=d),t._setEditorCommonProperties(d),d.value=t._getRepeatOnCondition(r,s).toString();break;case"yearly":{let c,u;if(!d){d=document.createElement("div");const m=document.createElement("smart-input"),y=document.createElement("smart-number-input");m.dataSource=t._getMonthNames(),m.dropDownButtonPosition=t.rightToLeft?"left":"right",m.readonly=!0,y.min=1,y.max=31,m.setAttribute("event-editor",""),y.setAttribute("event-editor",""),t._setEditorCommonProperties(m),t._setEditorCommonProperties(y),d.appendChild(m),d.appendChild(y),d.classList.add("smart-scheduler-window-editor"),l[r]=d}c||(c=d.querySelector("smart-input")),u||(u=d.querySelector("smart-number-input")),o=t._getRepeatOnCondition(r,s),c.selectedIndex=o.index,u.value=o.value.toString();break}}d=l[r],e.contains(d)||e.appendChild(d),e.classList.remove("smart-hidden")}_getMonthNames(){const e=[],t=this.monthFormat,n=this.locale,i=new Date;i.setMonth(0);for(let a=0;a<12;a++)e.push({label:new Intl.DateTimeFormat(n,{month:t}).format(i),value:i.getMonth()}),i.setMonth(i.getMonth()+1);return e}_getWeekDays(){const e=this,t=[],n=e.weekdayFormat,i=e.locale,a=new Date;a.setDate(a.getDate()-a.getDay()+e.firstDayOfWeek);for(let r=0;r<7;r++)t.push({label:new Intl.DateTimeFormat(i,{weekday:n}).format(a),value:a.getDay()}),a.setDate(a.getDate()+1);return t}_createWindowTemplate(e,t){const n=this,i=n.animation,a=n.theme,r=n.rightToLeft,o=document.createElement("template");return"footer"===e?t?"confirm"===t&&(o.innerHTML=`\n                    <smart-button class="smart-scheduler-window-button edit-event"\n                        animation="${i}" theme="${a}" ${r?"right-to-left":""}>\n                    </smart-button>\n                    <smart-button class="smart-scheduler-window-button edit-series"\n                        animation="${i}" theme="${a}" ${r?"right-to-left":""}>\n                    </smart-button>`):o.innerHTML=`<smart-button class="smart-scheduler-window-button ok primary"\n                        animation="${i}" theme="${a}" ${r?"right-to-left":""}>\n                    </smart-button>\n                    <smart-button class="smart-scheduler-window-button cancel"\n                        animation="${i}" theme="${a}" ${r?"right-to-left":""}>\n                    </smart-button>\n                    <smart-button class="smart-scheduler-window-button delete secondary"\n                        animation="${i}" theme="${a}" ${r?"right-to-left":""}>\n                    </smart-button>`:"header"===e&&(o.innerHTML='<span class="smart-scheduler-window-label"></span>'),o}_currentTimeIndicatorIntervalValidator(e,t){return Math.max(1,t)}_hourValidator(e,t){return Math.max(0,Math.min(23,t))}_datesValidator(e,t){const n=this;let i=[];for(let a=0;a<t.length;a++){const r=n._parseDate(t[a]);isNaN(r)||(r.setHours(0,0,0,0),i.push(r))}return i}_dateValidator(e,t){return t=this._parseDate(t),this._minMaxDateValidator(isNaN(t)?e:t)}_parseDate(e){let t;if(e instanceof Date)return e;if(Smart.Utilities.DateTime&&e instanceof Smart.Utilities.DateTime)return e.toDate();if("string"==typeof e){const n=/\d+:\d+:\d+/;if("new Date()"===e.trim()||"new Smart.Utilities.DateTime()"===e.trim())return new Date;if(isNaN(Date.parse(e))){const i=/(\d+[,-.\/]{1}\s*\d+[,-.\/]{1}\s*\d+)/;if(i.test(e)){const a=i.exec(e)[0].replace(/[,-.\/]/g,",").split(",");if(3===a.length){const[r,o]=parseInt(a[0])<parseInt(a[2])?[a[0],a[2]]:[a[2],a[0]];if(t=new Date(parseInt(o),parseInt(a[1])-1,parseInt(r)),n.test(e)){const s=n.exec(e)[0].split(":");t.setHours(s[0]||0,s[1]||0,s[2]||0)}e=t}}}else t=new Date(Date.parse(e)),n.test(e)||t.setHours(0,0,0,0),e=t}return new Date(e)}_firstDayOfWeekValidator(e,t){return Math.min(6,Math.max(0,t))}_minMaxDateValidator(e){if(!e||isNaN(e.getTime()))return e;const t=new Date(this.min),n=new Date(this.max);return t&&(e=new Date(Math.max(t.getTime(),e.getTime()))),n&&(e=new Date(Math.min(n.getTime(),e.getTime()))),e}_nonworkingDayValidator(e,t){return this._nonworkingDateTimeValidator(e,t)}_nonworkingTimeValidator(e,t){return this._nonworkingDateTimeValidator(e,t,!0)}_nonworkingDateTimeValidator(e,t,n){let i=[];const[a,r]=[0,n?23:6];for(let o=0;o<t.length;o++){const s=t[o];if("number"!=typeof s||isNaN(s))if(Array.isArray(s)){let l=Math.max(a,Math.min(r,parseInt(s[0]))),d=Math.max(a,Math.min(r,parseInt(s[1])));if(!isNaN(l)&&!isNaN(d)){for(;l!==d;)i.push(l),l=l===r?a:++l;i.push(l)}}else{const l=this._dateValidator(s,s);l instanceof Date&&i.push(n?l.getHours():l.getDay())}else i.push(Math.max(a,Math.min(r,parseInt(s))))}return i}_setViewType(e){const t=this,n=t.views.find(i=>i.value&&i.value===e);t.set("viewType",t.properties.viewType.allowedValues.indexOf(e=n?n.type:e)>-1?e:"day")}_timeZoneValidator(e,t){const n=this,i=(new Smart.Utilities.DateTime).timeZones;t||(t="local"),t=t.toLowerCase();const a=i.find(r=>r.id.toLowerCase()===t);return a?a.id:(n.error(n.localize("invalidTimeZone",{elementType:n.nodeName.toLowerCase()})),e)}_timeZonesValidator(e,t){const n=this;let i=[];for(let a=0;a<t.length;a++){const r=t[a],o=r.id||r;null!==n._timeZoneValidator(null,o)&&i.push({id:o,label:r.label||o})}return i}_viewValidator(e,t){const n=this;return n._isViewUpdated=!0,n._setViewType(t),delete n._isViewUpdated,t}_viewTypeValidator(e,t){return this._isViewUpdated?t:e}_viewsValidator(e,t){const n=this,i=n.properties.viewType.allowedValues;let a=[];for(let r=0;r<t.length;r++){const o=t[r];"string"==typeof o&&i.includes(o)?a.push(o):"object"==typeof o&&i.includes(o.type)&&(o.value=o.value||o.type,o.label=void 0===o.label?n.localize(o.type):o.label+"",a.push(o))}return a}}),Smart("smart-notification-panel",class extends Smart.BaseElement{static get properties(){return{hourStart:{value:0,type:"number"},hourFormat:{value:"numeric",allowedValues:["numeric","2-digit"],type:"string"},messages:{extend:!0,value:{en:{beforeAt:"before at",days:"days",weeks:"weeks",placeholder:"Add notification",hours:"Hours",minutes:"Minutes",am:"am",pm:"pm"}},type:"object"},minuteFormat:{value:"2-digit",allowedValues:["numeric","2-digit"],type:"string"},placeholder:{value:"placeholder",type:"string"},timeZone:{value:"local",type:"string"},value:{value:[],type:"array"}}}template(){return'<div id="container" role="presentation">\n                    <div id="notificationsContainer" class="smart-notification-container" role="group"></div>\n                    <div id="placeholder" class="smart-notification-placeholder" role="button"></div>\n                    <smart-input wait right-to-left="[[rightToLeft]]" readonly id="typeInput" class="smart-notification-editor smart-hidden"></smart-input>\n                    <smart-time-input wait right-to-left="[[rightToLeft]]" id="timeInput" class="smart-notification-editor smart-hidden"></smart-time-input>\n                    <smart-number-input wait right-to-left="[[rightToLeft]]" id="intervalInput" class="smart-notification-editor smart-hidden"></smart-number-input>\n                </div>'}static get listeners(){return{"document.click":"_clickHandler",keydown:"_keyDownHandler","container.change":"_containerChangeHandler"}}static get requires(){return{"Smart.Input":"smart.input.js","Smart.TimeInput":"smart.timeinput.js","Smart.NumberInput":"smart.numberinput.js"}}propertyChangedHandler(e,t,n){const i=this;if("placeholder"!==e){if("rightToLeft"===e){const a=n?"left":"right";i.$.typeInput.dropDownButtonPosition=a,i.$.intervalInput.dropDownButtonPosition=a}else"locale"===e?(i.$.placeholder.textContent=i.localize(i.placeholder),i._handleNotificationEditors()):super.propertyChangedHandler(e,t,n);i._handleNotifications()}else i.$.placeholder.textContent=i.localize(i.placeholder)}render(){const e=this;e.hasAttribute("role")||e.setAttribute("role","dialog"),e.$.placeholder.textContent=e.localize(e.placeholder),e._handleNotifications(),e._handleNotificationEditors(),e._setFocusable(),super.render()}_setFocusable(){const e=this,t=e.$.placeholder;if(e.disabled||e.unfocusable)return e.removeAttribute("tabindex"),void t.removeAttribute("tabindex");const n=e.tabIndex>0?e.tabIndex:0;e.tabIndex=n,t.setAttribute("tabindex",n);const i=e.$.notificationsContainer.children;for(let a=0;a<i.length;a++)Array.from(i[a].children).forEach(o=>{o instanceof HTMLLabelElement||(o.tabIndex=n)})}_keyDownHandler(e){const t=this;if(t.disabled||t.readonly)return;const n=e.target;switch(e.key){case"Enter":(n.closest(".smart-notification-item")||n.closest(".smart-notification-placeholder"))&&(e.preventDefault(),t._clickHandler({target:n}));break;case"Escape":case"Tab":t._hideEditor()}}_clickHandler(e){const t=this;let n=e.target;if(!n||!n.closest||!t.$.container.contains(n)||t.disabled||t.readonly)return void t._hideEditor();if(n.closest(".smart-notificaiton-editor"))return;if(n.closest(".smart-notification-placeholder"))return t._createNotificaiton(),void t._hideEditor();const i=n.closest(".smart-notification-item");if(!i)return t._editor&&!t._editor.classList.contains("smart-hidden")&&n.closest(".smart-notification-editor")?void 0:void t._hideEditor();t._hideEditor();const a=i._notificationObj;if(n.hasAttribute("delete"))return void t._deleteNotification(i);const r=n.closest(".smart-input");if(!r)return;let o;n.hasAttribute("interval")?(o=t.$.intervalInput,o.value=a.interval,o.min=0,o.max="days"===a.type?28:4):n.hasAttribute("type")?(o=t.$.typeInput,o.value=o.dataSource.find(s=>s.value===a.type).label):n.hasAttribute("time")&&(o=t.$.timeInput,o.dateTimeFormat={hour:t.hourFormat,minute:t.minuteFormat},o.value=a.time),o._notificationObj=a,o.classList.remove("smart-hidden"),o.wait=!1,o.style.width=r.offsetWidth+"px",o.style.height=r.offsetHeight+"px",o.style.top=r.offsetTop+"px",o.style.left=r.offsetLeft+"px",o&&o.open(),t._editor=o}_hideEditor(){const e=this,t=e._editor;if(!t)return;const n=e._editor._notificationObj;n&&(t===e.$.timeInput?n.time=t.value:t===e.$.typeInput?n.type=t.value:n.interval=t.value,e._refreshNotificationItem(n)),t.close&&t.close(),e._editor.classList.add("smart-hidden"),delete e._editor}_createNotificaiton(){const e=this,t=e._notifications;t&&(t.push({interval:1,type:"days",time:[e.hourStart,0]}),e._refreshNotificationItems())}_deleteNotification(e){const t=this._notifications;if(!t||!e)return;const n=e._notificationObj;if(delete e._notificationObj,e.remove(),!n)return;const i=t.indexOf(n);i<0||(t.splice(i,1),this._refreshNotificationItems())}_containerChangeHandler(e){const t=this,n=e.target,i=n._notificationObj;n===t.$.timeInput?i.time=n.value:n===t.$.typeInput?i.type=n.dataSource.find(a=>a.label===n.value).value:n===t.$.intervalInput&&(i.interval=n.value),t._refreshNotificationItem(i)}_refreshNotificationItem(e){const t=this,n=t.$.notificationsContainer.children;for(let i=0;i<n.length;i++){const a=n[i];if(a._notificationObj===e){let r=new Date;r.setHours(e.time[0],e.time[1]);const o=a.children;for(let s=0;s<o.length;s++){const l=o[s];l.hasAttribute("interval")?l.textContent=e.interval:l.hasAttribute("type")?l.textContent=t.localize(e.type)||e.type:l.hasAttribute("time")&&(l.textContent=r.toLocaleTimeString(t.locale,{hour:t.hourFormat,minute:t.minuteFormat}))}}}}_refreshNotificationItems(){const e=this,t=e.$.notificationsContainer,n=e._notifications;for(;t.firstElementChild;)delete t.firstElementChild._notificationObj,t.firstElementChild.remove();if(n&&n.length){const i=document.createDocumentFragment();for(let a=0;a<n.length;a++)i.appendChild(e._createNotificationItem(n[a]));i.children.length&&t.appendChild(i)}e._setFocusable(),e.set("value",n)}_handleNotifications(){const e=this,t=e.value;let n;e.$.notificationsContainer.innerHTML="",n=e._notifications=[];for(let i=0;i<t.length;i++){const a=t[i];let r=a.interval,o=a.type,s=a.time;void 0!==r&&void 0!==o&&void 0!==s&&(s instanceof Date?s=[s.getHours(),s.getMinutes()]:Array.isArray(s)||(s=[]),o=o&&"days"!==o?"weeks":"days","days"===o?r=Math.max(0,Math.min(28,r)):(o="weeks",r=Math.max(0,Math.min(4,r))),s[0]=Math.max(0,Math.min(23,s[0]||0)),s[1]=Math.max(0,Math.min(59,s[1]||0)),n.push({interval:r,type:o,time:s}))}e._refreshNotificationItems()}_createNotificationItem(e){const t=this,n=document.createElement("div");n.classList.add("smart-notification-item"),n.setAttribute("role","group");let i=new Smart.Utilities.DateTime(new Date).toDate(t.timeZone);return i.setHours(e.time[0],e.time[1]),n.innerHTML=`\n            <div class="smart-input" interval>${e.interval}</div>\n            <div class="smart-input" type>${t.localize(e.type)||e.type}</div>\n            <label>${t.localize("beforeAt")||""}</label>\n            <div class="smart-input" time>${i.toLocaleTimeString(t.locale,{hour:t.hourFormat,minute:t.minuteFormat})}</div>\n            <div class="smart-button" delete aria-label="Delete" role="button"></div>`,n._notificationObj=e,n}_handleNotificationEditors(){const e=this,t=e.rightToLeft,n=e.locale,i=e.theme,a=e.$.intervalInput,r=e.$.typeInput,o=e.$.timeInput,s=e.messages;[a,r,o].forEach(d=>{const c=d.messages;for(let u in c.en){const m=s[n][u];void 0!==m&&(c[n]||(c[n]={}),c[n][u]=m)}d.rigtToLeft=t,d.locale=n,d.theme=i});const l=t?"left":"right";o.dropDownButtonPosition="none",r.dropDownButtonPosition=l,a.dropDownButtonPosition=l,r.dataSource=[{label:e.localize("days"),value:"days"},{label:e.localize("weeks"),value:"weeks"}]}})},9135:()=>{Smart("smart-scroll-bar",class extends Smart.BaseElement{static get properties(){return{clickRepeatDelay:{type:"integer",value:50},largeStep:{type:"integer",value:100},min:{type:"integer",value:0},max:{type:"integer",value:1e3},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},orientation:{type:"string",value:"horizontal",allowedValues:["horizontal","vertical"]},step:{type:"integer",value:10},showButtons:{type:"boolean",value:!0,defaultReflectToAttribute:!0},value:{type:"integer",value:0}}}static get styleUrls(){return["smart.scrollbar.css"]}template(){return'<div id="container" class="smart-container" role="presentation">\n                    <div id="nearButton" class="smart-scroll-button smart-arrow-left" role="presentation" aria-hidden="true"></div>\n                    <div  id="track" class="smart-track" role="presentation">\n                        <div id="thumb" class="smart-thumb" role="presentation"></div>\n                    </div>\n                    <div id="farButton" class="smart-scroll-button smart-arrow-right" role="presentation" aria-hidden="true"></div>\n            </div>'}static get listeners(){return{"nearButton.click":"_nearButtonClickHandler","nearButton.down":"_startRepeat","nearButton.up":"_stopRepeat","nearButton.pointerenter":"_updateInBoundsFlag","nearButton.pointerleave":"_updateInBoundsFlag","farButton.click":"_farButtonClickHandler","farButton.down":"_startRepeat","farButton.up":"_stopRepeat","farButton.pointerenter":"_updateInBoundsFlag","farButton.pointerleave":"_updateInBoundsFlag","track.down":"_trackDownHandler","track.click":"_trackClickHandler","track.move":"_trackMoveHandler","thumb.down":"_dragStartHandler","document.move":"_dragHandler","document.up":"_dragEndHandler",up:"_dragEndHandler","document.selectstart":"_selectStartHandler",resize:"_resizeHandler"}}_updateInBoundsFlag(e){const n=e.target;n._isPointerInBounds=!0,-1!==e.type.indexOf("leave")&&(n._isPointerInBounds=!1),1!==("buttons"in e?e.buttons:e.which)&&this._stopRepeat(e)}_startRepeat(e){const t=this;if(t.disabled)return;const n=e.target;n._initialTimer||(n._initialTimer=setTimeout(function(){n._repeatTimer=setInterval(()=>{n._isPointerInBounds&&n.$.fireEvent("click",{buttons:"buttons"in e?e.buttons:e.which,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})},t.clickRepeatDelay)},3*t.clickRepeatDelay))}_stopRepeat(e){if(this.disabled)return;const t=e.target;t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null)}_calculateThumbSize(e){const t=this,n=t.max-t.min;let a=0;return n>=1&&("horizontal"===t.orientation?t.$.track.offsetWidth>10:t.$.track.offsetHeight>10)?(a=e/(n+e)*e,t.$.thumb.className.indexOf("smart-hidden")>=0&&t.$thumb.removeClass("smart-hidden")):t.$thumb.addClass("smart-hidden"),Math.max(10,Math.min(a,e))}_dragStartHandler(e){const t=this;t.disabled||(t.thumbCapture=!0,t.dragStartX=e.clientX,t.dragStartY=e.clientY,t.dragStartValue=t.value,e.stopPropagation(),e.preventDefault())}_dragHandler(e){const t=this;if(!0!==t.thumbCapture)return;t._isThumbDragged=!0;const n=(t.max-t.min)/(t.scrollBarSize-t.thumbSize),i="horizontal"===t.orientation?(e.clientX-t.dragStartX)*n:(e.clientY-t.dragStartY)*n;let a=i;t.rightToLeft&&"horizontal"===t.orientation&&(a=-i),t._updateValue(t.dragStartValue+a),e.stopPropagation(),e.preventDefault(),e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault())}_dragEndHandler(e){const t=this;t._trackDownTimer&&(clearInterval(t._trackDownTimer),t._trackDownTimer=null),t.thumbCapture&&(t.thumbCapture=!1,t._isThumbDragged=!1,"switchWhenReleased"===t.mechanicalAction?t._updateValue(t.dragStartValue,t.value):"switchUntilReleased"===this.mechanicalAction&&t._updateValue(t.dragStartValue),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation())}_farButtonClickHandler(){const e=this;if(e.disabled)return;const t=e.value;e._updateValue(e.value+("horizontal"===e.orientation&&e.rightToLeft?-1:1)*e.step),"switchUntilReleased"===e.mechanicalAction&&e._updateValue(t)}_nearButtonClickHandler(){const e=this;if(e.disabled)return;const t=e.value;e._updateValue(e.value-("horizontal"===e.orientation&&e.rightToLeft?-1:1)*e.step),"switchUntilReleased"===e.mechanicalAction&&e._updateValue(t)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;switch(e){case"min":case"max":case"orientation":case"showButtons":i._layout(),"min"===e?i.setAttribute("aria-valuemin",n):"max"===e?i.setAttribute("aria-valuemax",n):"orientation"===e&&i.setAttribute("aria-orientation",n);break;case"value":i._updateValue(t,n);break;default:i._layout()}}render(){const e=this;e.setAttribute("role","scrollbar"),e.setAttribute("aria-orientation",e.orientation),e.setAttribute("aria-valuemin",e.min),e.setAttribute("aria-valuemax",e.max),e.setAttribute("aria-valuenow",e.value),e._layout(),super.render()}_resizeHandler(){this._layout()}refresh(){this._layout()}beginUpdate(){this._isUpdating=!0}endUpdate(){this._isUpdating=!1,this.refreshValue()}refreshValue(){const e=this;e._layout(),e._updateValue(e.value)}_layout(){const e=this;e._isUpdating||(e.scrollBarSize="horizontal"===e.orientation?e.$.track.offsetWidth:e.$.track.offsetHeight,e.thumbSize=e._calculateThumbSize(e.scrollBarSize),"horizontal"===e.orientation&&e.$.thumb.style.width!==e.thumbSize+"px"?e.$.thumb.style.width=e.thumbSize+"px":"vertical"===e.orientation&&e.$.thumb.style.height!==e.thumbSize+"px"&&(e.$.thumb.style.height=e.thumbSize+"px"),"horizontal"===e.orientation?(e.$.nearButton.classList.contains("smart-arrow-up")&&e.$.nearButton.classList.remove("smart-arrow-up"),e.$.farButton.classList.contains("smart-arrow-down")&&e.$.farButton.classList.remove("smart-arrow-down"),e.$.nearButton.classList.contains("smart-arrow-left")||e.$.nearButton.classList.add("smart-arrow-left"),e.$.farButton.classList.contains("smart-arrow-right")||e.$.farButton.classList.add("smart-arrow-right")):(e.$.nearButton.classList.contains("smart-arrow-left")&&e.$.nearButton.classList.remove("smart-arrow-left"),e.$.farButton.classList.contains("smart-arrow-right")&&e.$.farButton.classList.remove("smart-arrow-right"),e.$.nearButton.classList.contains("smart-arrow-up")||e.$.nearButton.classList.add("smart-arrow-up"),e.$.farButton.classList.contains("smart-arrow-down")||e.$.farButton.classList.add("smart-arrow-down")),e._updateThumbPosition(),(e.value>e.max||e.value<e.min)&&e._updateValue(e.value,e.value>e.max?e.max:e.min))}_selectStartHandler(e){this.thumbCapture&&e.preventDefault()}_trackDownHandler(e){const t=this;e.target===t.$.track&&(t._trackDownTimer&&clearInterval(t._trackDownTimer),t.thumbCapture||(t._trackDownTimer=setInterval(function(){t._trackClickHandler(e)},t.clickRepeatDelay),e.stopPropagation(),e.preventDefault()))}_trackClickHandler(e){const t=this;if(t.disabled)return;if(t._isThumbDragged)return clearInterval(t._trackDownTimer),void(t._trackDownTimer=null);const n=t.$.thumb.getBoundingClientRect(),i=e.pageX-window.pageXOffset,a=e.pageY-window.pageYOffset,r=(t.rightToLeft?-1:1)*t.value;"horizontal"===t.orientation?i>(t._isThumbDragged?t.dragStartX:n.right)?t._updateValue(t.value+(t.rightToLeft?-1:1)*t.largeStep):i<(t._isThumbDragged?t.dragStartX:n.left)&&t._updateValue(t.value-(t.rightToLeft?-1:1)*t.largeStep):a>(t._isThumbDragged?t.dragStartY:n.bottom)?t._updateValue(t.value+t.largeStep):a<(t._isThumbDragged?t.dragStartY:n.top)&&t._updateValue(t.value-t.largeStep),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(r)}_trackMoveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_updateValue(e,t){const n=this;if(!n._isUpdating&&(1===arguments.length&&(t=e,e=n.value),(void 0===t||isNaN(t))&&(t=n.min),t>n.max&&(t=n.max),t<n.min&&(t=n.min),n.value=t,e!==t)){if(n.setAttribute("aria-valuenow",t),n._updateThumbPosition(),n.thumbCapture&&"switchWhenReleased"===n.mechanicalAction)return;if(n.onChange)return void n.onChange({value:n.value,oldValue:e,min:n.min,max:n.max,context:n});n.$.fireEvent("change",{value:n.value,oldValue:e,min:n.min,max:n.max})}}_updateThumbPosition(){const e=this,t="horizontal"===e.orientation?e.$.track.offsetWidth:e.$.track.offsetHeight,n=e._calculateThumbSize(t);let a=(t-n)/(e.max-e.min)*(e.value-e.min);e.rightToLeft&&"horizontal"===e.orientation&&(a=(t-n)/(e.max-e.min)*(e.max-e.value-e.min)),a=Math.min(t-n,Math.max(0,a)),"vertical"===e.orientation&&e.$.thumb.style.top!==a+"px"?e.$.thumb.style.top=a+"px":"horizontal"===e.orientation&&e.$.thumb.style.left!==a+"px"&&(e.$.thumb.style.left=a+"px")}})},2616:()=>{Smart("smart-switch-button",class extends Smart.ToggleButton{static get properties(){return{inverted:{value:!1,type:"boolean"},orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},switchMode:{value:"default",allowedValues:["default","click","drag","none"],type:"string"},clickMode:{value:"release",allowedValues:["press","release","pressAndRelease"],type:"string"}}}static get listeners(){return{"container.down":"_mouseDownHandler","document.move":"_drag","container.move":"_moveHandler","document.up":"_switchThumbDropHandler",mouseenter:"_switchButtonOnMouseEnter",mouseleave:"_switchButtonOnMouseLeave",resize:"_resizeHandler","container.resize":"_resizeHandler","document.selectstart":"_selectStartHandler"}}static get styleUrls(){return["smart.switchbutton.css"]}propertyChangedHandler(e,t,n){const i=this;switch(super.propertyChangedHandler(e,t,n),i._updateContentProperties(),e){case"indeterminate":n?(i._valueCache=i.checked,i.checked=null):i.checked=i._valueCache,i._setAriaState();break;case"trueContent":i.trueContent=n;break;case"falseContent":i.falseContent=n;break;case"orientation":i._resizeHandler()}i._getContainersSizeAndBreakPoint(),i._removeDragStyles(),i._resizeHandler()}template(){return"<div  id='container' class='smart-container' role=\"presentation\">\n                    <div id='innerContainer' class='smart-inner-container' role=\"presentation\">\n                        <span id='falseContentContainer' inner-h-t-m-l='[[falseContent]]' class='smart-false-content-container'></span>\n                        <span id='switchThumb' class='smart-thumb' role=\"presentation\"></span>\n                        <span id='trueContentContainer' inner-h-t-m-l='[[trueContent]]' class='smart-true-content-container'></span>\n                    </div>\n                    <input id='hiddenInput' class='smart-hidden-input' type='hidden'>\n                </div>"}ready(){const e=this;super.ready(),e.setAttribute("role","switch");let t=e.animation;e.hasAnimation&&(e.animation="none"),e._supportCSSVariables=Smart.Utilities.Core.CSSVariablesSupport()&&Boolean(window.getComputedStyle(e.$.container).getPropertyValue("--smart-switch-button-default-width")),e._htmlBindOnInitialization(),e._resizeHandler(),e._initializePrivateVariables(),e._getContainersSizeAndBreakPoint(),e.indeterminate&&(e._valueCache=e.checked,e.checked=null),e._setAriaState(),e._handleTemplate(!0),e._handleTemplate(!1),e._handleTemplate(),e._updateHidenInputNameAndValue(),e._updateThumbPosition(),e.animation=t}_mouseDownHandler(e){const t=this;t.disabled||t.readonly||"none"===t.switchMode||(e.originalEvent.target.closest(".smart-thumb")!==t.$.switchThumb||"default"!==t.switchMode&&"drag"!==t.switchMode||t._switchThumbDragStartHandler(e),t._isSwitchClicked=t,t._updateContentProperties(),"release"!==t.clickMode&&"click"===t.switchMode&&(t._updateStateOnClick(),t.$.fireEvent("click"),t.indeterminate=!1,t._updateHidenInputNameAndValue()))}_updateStateOnClick(){this._changeCheckState(),this.focus()}_drag(e){this._mouseDown&&(Smart.Utilities.Core.isMobile&&e.originalEvent.preventDefault(),this._switchThumbDragHandler(e))}_switchThumbDragStartHandler(e){const t=this;t.disabled||("click"===t.switchMode&&"release"!==t.clickMode&&(e.preventDefault(),e.stopPropagation()),t._isInactiveOn("drag")||(t._mouseDown=!0,t._getContainersSizeAndBreakPoint(),t._pointerPosition="vertical"===t.orientation?e.pageY:e.pageX,e.preventDefault()))}_selectStartHandler(e){this._mouseDown&&e.preventDefault()}_switchThumbDragHandler(e){const t=this;if(t._isInactiveOn("drag"))return;if(!1===t._mouseDown)return void t._removeDragStyles();if(!t.hasAttribute("dragged")){if(Math.abs(("vertical"===t.orientation?e.pageY:e.pageX)-t._pointerPosition)<=1.5)return;t.setAttribute("dragged","")}let n=t.$.innerContainer,i=t.$.container.getBoundingClientRect(),a="vertical"===t.orientation?document.body.scrollTop||document.documentElement.scrollTop:document.body.scrollLeft||document.documentElement.scrollLeft,r="vertical"===t.orientation?i.top+a:i.left+a,o="vertical"===t.orientation?t._pointerPosition-n.offsetTop:t._pointerPosition-n.offsetLeft,s=t._pointerPosition>=r&&t._pointerPosition<=r+t._switchContainerSize;const l=-1*(t.offsetWidth-t.$.switchThumb.offsetWidth),d=-1*(t.offsetHeight-t.$.switchThumb.offsetHeight);if(t._pointerPosition="vertical"===t.orientation?e.pageY:e.pageX,s){let c=t._pointerPosition-o;c<-t._switchTrackLength&&(c=-t._switchTrackLength),c>0&&(c=0),"vertical"===t.orientation?t.$.innerContainer.style.top=Math.max(d,c)+"px":t.$.innerContainer.style.left=Math.max(l,c)+"px"}}_switchThumbDropHandler(){const e=this;e.hasAttribute("dragged")?e._endDrag():e._isSwitchClicked&&e._endClick(),e._mouseDown=!1,delete e._isSwitchClicked}_endDrag(){const e=this,t=e.inverted&&!e.rightToLeft||!e.inverted&&e.rightToLeft;if(e.indeterminate=!1,e._updateHidenInputNameAndValue(),e._isInactiveOn("drag")||!e._mouseDown)return;e.removeAttribute("dragged"),delete e._pointerPosition;const n=("vertical"===e.orientation?e.$.innerContainer.offsetTop+e.$.switchThumb.offsetTop+e.$.switchThumb.clientHeight/2:e.$.innerContainer.offsetLeft+e.$.switchThumb.offsetLeft+e.$.switchThumb.clientWidth/2)>e._switchBreakPoint;null!==e.checked?!t==(n===e.checked)&&e._changeCheckState(!e.checked):e._changeCheckState(n?t:!t),e._removeDragStyles(),e._updateThumbPosition()}_endClick(){const e=this;e._resizeHandler(),e.disabled||e.readonly||e._isInactiveOn("click")||("release"!==e.clickMode&&"pressAndRelease"!==e.clickMode||e._updateStateOnClick(),e.indeterminate=!1,e._updateHidenInputNameAndValue())}_switchButtonOnMouseEnter(){const e=this;e.disabled||e.readonly||e.$.addClass("hovered")}_switchButtonOnMouseLeave(){const e=this;e.disabled||e.readonly||e.$.removeClass("hovered")}_isInactiveOn(e){const t=this;return"default"!==t.switchMode&&(t.disabled||t.readonly||t.switchMode!==e)}_keyUpHandler(e){const t=this;t.disabled||t.readonly||32!==e.keyCode||"none"===t.switchMode||(t._getContainersSizeAndBreakPoint(),t._changeCheckState())}_initializePrivateVariables(){const e=this;e._switchContainerSize=e._switchTrackLength=e._switchBreakPoint=e._pointerPosition=0,e._mouseDown=!1}_changeCheckState(e){const t=this;let n=t.checked;if(null===n&&void 0!==e)return t.$.fireEvent("change",{value:e,oldValue:null,changeType:"pointer"}),t.$.fireEvent("uncheckValue",{changeType:"pointer"}),t.checked=e,void t._updateThumbPosition();t.checked=null===t.checked||!t.checked,t._setAriaState(),t._updateThumbPosition(),t.$.fireEvent("change",{value:t.checked,oldValue:n,changeType:"pointer"}),t.$.fireEvent(t.checked?"checkValue":"uncheckValue",{changeType:"pointer"}),t._updateHidenInputNameAndValue()}_getContainersSizeAndBreakPoint(){const e=this;e._switchContainerSize="vertical"===e.orientation?e.$.container.offsetHeight:e.$.container.offsetWidth,e._switchTrackLength="vertical"===e.orientation?e._switchContainerSize-e.$.switchThumb.offsetHeight:e._switchContainerSize-e.$.switchThumb.offsetWidth,e._switchBreakPoint=e._switchContainerSize/2}_removeDragStyles(){const e=this;e._supportCSSVariables?e.$.innerContainer.removeAttribute("style"):e.$.innerContainer.style.left="",e._supportCSSVariables?e.$.innerContainer.removeAttribute("style"):e.$.innerContainer.style.top="",e._mouseDown=!1}_moveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_resizeHandler(){const e=this;if(!document.body.contains(e))return;const t=window.getComputedStyle(e,null),n=parseInt(t.getPropertyValue("border-top-width")),i=parseInt(t.getPropertyValue("border-right-width")),a=parseInt(t.getPropertyValue("border-bottom-width")),r=parseInt(t.getPropertyValue("border-left-width")),o="vertical"===e.orientation?e.offsetHeight-(n+a):e.offsetWidth-(r+i);e._getContainersSizeAndBreakPoint(),e._supportCSSVariables?e.$.container.style.setProperty("--smart-switch-button-default-width",o+"px"):(e._innerContainerSize=o,e.$.innerContainer.style.height=e.$.innerContainer.style.width="",e.$.trueContentContainer.style.height=e.$.trueContentContainer.style.width="",e.$.falseContentContainer.style.height=e.$.falseContentContainer.style.width="","horizontal"===e.orientation?(e.$.innerContainer.style.setProperty("width",2*o-e.$.switchThumb.clientWidth+"px"),e.$.trueContentContainer.style.setProperty("width",e._switchTrackLength+"px"),e.$.falseContentContainer.style.setProperty("width",e._switchTrackLength+"px")):(e.$.innerContainer.style.setProperty("height",2*o-e.$.switchThumb.clientHeight+"px"),e.$.trueContentContainer.style.setProperty("height",e._switchTrackLength+"px"),e.$.falseContentContainer.style.setProperty("height",e._switchTrackLength+"px")),e._updateThumbPosition())}_updateThumbPosition(){const e=this,t=e.inverted&&!e.rightToLeft||!e.inverted&&e.rightToLeft;!e._supportCSSVariables&&(t?!0!==e.checked:!1!==e.checked)&&e._innerContainerSize?((t?!1===e.checked:e.checked)&&("horizontal"===e.orientation?(e.$.innerContainer.style.left=-1*(e._innerContainerSize-e.$.switchThumb.offsetWidth)+"px",e.$.innerContainer.style.top=""):(e.$.innerContainer.style.top=-1*(e._innerContainerSize-e.$.switchThumb.offsetHeight)+"px",e.$.innerContainer.style.left="")),null===e.checked&&("horizontal"===e.orientation?(e.$.innerContainer.style.left=-1*(e._innerContainerSize/2-e.$.switchThumb.offsetWidth/2)+"px",e.$.innerContainer.style.top=""):(e.$.innerContainer.style.top=-1*(e._innerContainerSize/2-e.$.switchThumb.offsetHeight/2)+"px",e.$.innerContainer.style.left=""))):e.$.innerContainer.style.left=e.$.innerContainer.style.top=""}_setAriaState(){const e=this,t=!!e.checked;e.setAttribute("aria-checked",t),t?(e.$.falseContentContainer.setAttribute("aria-hidden",!0),e.$.trueContentContainer.removeAttribute("aria-hidden")):(e.$.trueContentContainer.setAttribute("aria-hidden",!0),e.$.falseContentContainer.removeAttribute("aria-hidden"))}})},7341:()=>{Smart("smart-text-area",class extends Smart.Input{template(){return'<div id="inputContainer" role="presentation"><textarea class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\'  name=\'[[name]]\' value=\'{{value::keyup}}\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]"></textarea><span class="smart-hidden smart-hint" inner-h-t-m-l="[[hint]]" id="span"></span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}render(){super.render(),this.classList.add("smart-input")}})},5435:()=>{Smart("smart-time-box",class extends Smart.BaseElement{static get properties(){return{messages:{value:{en:{hours:"Hours",minutes:"Minutes",am:"am",pm:"pm"}},type:"object",extend:!0},value:{type:"array",value:[0,0]}}}static get listeners(){return{click:"_changeHandler"}}render(){const e=this,t=document.createElement("div");e.tabindex=-1,t.innerHTML='\n            <div class="hour-selection smart-calendar-week" role="row"><div class="header" role="rowheader"></div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="0">12</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="1">01</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="2">02</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="3">03</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="4">04</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="5">05</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="6">06</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="7">07</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="8">08</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="9">09</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="10">10</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="11">11</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="12" pm>12</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="13" pm>01</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="14" pm>02</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="15" pm>03</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="16" pm>04</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="17" pm>05</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="18" pm>06</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="19" pm>07</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="20" pm>08</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="21" pm>09</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="22" pm>10</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="23" pm>11</div>\n            </div>\n            <div class="minute-selection smart-calendar-week" role="row"><div class="header" role="rowheader"></div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="0">00</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="5">05</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="10">10</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="15">15</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="20">20</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="25">25</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="30">30</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="35">35</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="40">40</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="45">45</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="50">50</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="55">55</div>\n            </div>',t.classList.add("smart-timepicker","smart-calendar"),t.setAttribute("role","grid"),e.$.content.appendChild(t),Smart.Utilities.Core.isMobile||(t.onmouseover=function(r){const o=r.target.closest(".smart-calendar-cell");o&&o.setAttribute("hover","")},t.onmouseout=function(r){const o=r.target.closest(".smart-calendar-cell");o&&o.removeAttribute("hover")}),e._timepicker=t;const n=e._timepicker.querySelector(".hour-selection"),i=e._timepicker.querySelector(".minute-selection");n.setAttribute("am-label",e.localize("am")),n.setAttribute("pm-label",e.localize("pm")),n.querySelector(".header").textContent=e.localize("hours"),i.querySelector(".header").textContent=e.localize("minutes"),Array.from(e._timepicker.querySelectorAll("div[selected]")).map(r=>{r.removeAttribute("selected"),r.setAttribute("aria-selected",!1)});const a=e._timepicker.querySelectorAll(`.hour-selection div[value="${e.value[0]}"], .minute-selection div[value="${e.value[1]}"]`);for(let r=0;r<a.length;r++){const o=a[r];o&&(o.setAttribute("selected",!0),o.setAttribute("aria-selected",!0))}}_changeHandler(e){const t=this;let n=e.target;if(!n||!n.classList.contains("smart-calendar-cell"))return;n.closest(".hour-selection")?Array.from(t._timepicker.querySelectorAll(".hour-selection div[selected]")).map(s=>{s.removeAttribute("selected"),s.setAttribute("aria-selected",!1)}):Array.from(t._timepicker.querySelectorAll(".minute-selection div[selected]")).map(s=>{s.removeAttribute("selected"),s.setAttribute("aria-selected",!1)}),n.setAttribute("selected",!0),n.setAttribute("aria-selected",!0);const i=t._timepicker.querySelector(".hour-selection div[selected]"),a=i?parseInt(i.getAttribute("value")):0,r=t._timepicker.querySelector(".minute-selection div[selected]"),o=r?parseInt(r.getAttribute("value")):0;t.value=[a,o]}_setValue(e,t){const n=this;if(isNaN(e)&&(e=0),isNaN(t)&&(t=0),!n._timepicker)return;Array.from(n._timepicker.querySelectorAll(".hour-selection div[selected]")).map(r=>{r.removeAttribute("selected"),r.setAttribute("aria-selected",!1)}),Array.from(n._timepicker.querySelectorAll(".minute-selection div[selected]")).map(r=>{r.removeAttribute("selected"),r.setAttribute("aria-selected",!1)});const i=n._timepicker.querySelector(`.hour-selection div[value="${e}"]`),a=n._timepicker.querySelector(`.minute-selection div[value="${t}"]`);i&&(i.setAttribute("selected",!0),i.setAttribute("aria-selected",!0)),a&&(a.setAttribute("selected",!0),a.setAttribute("aria-selected",!0)),n.value=[e,t]}propertyChangedHandler(e,t,n){const i=this;switch(e){case"value":i._setValue(n[0],n[1]);break;case"locale":{const a=i._timepicker.querySelector(".hour-selection"),r=i._timepicker.querySelector(".minute-selection");a.setAttribute("am-label",i.localize("am")),a.setAttribute("pm-label",i.localize("pm")),a.querySelector(".header").textContent=i.localize("hours"),r.querySelector(".header").textContent=i.localize("minutes");break}}}}),Smart("smart-time-input",class extends Smart.Input{static get properties(){return{dropDownButtonPosition:{allowedValues:["none","left","right"],value:"right",defaultReflectToAttribute:!0,type:"string"},dropDownHeight:{type:"any",value:"auto"},messages:{value:{en:{hours:"Hours",minutes:"Minutes",am:"am",pm:"pm"}},type:"object",extend:!0},placeholder:{value:"hh:mm",type:"string"},dateTimeFormat:{type:"object",value:{hour:"2-digit",minute:"2-digit"}},value:{type:"any",value:""}}}template(){return'<div id="inputContainer" role="presentation"><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}static get listeners(){return{"input.change":"_changeHandler","input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}focus(){this.$.input.focus()}select(){const e=this;e.readonly?e.$.input.focus():e.$.input.select()}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t.contains(n))requestAnimationFrame(()=>{});else{if(t.$.scrollView.contains(n.shadowParent||n))return t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()),void e.preventDefault();t.opened&&(t._preventLookup=!0),t._isPointerDown=!1,t.close()}}_changeHandler(e){e.stopPropagation(),this._performSelect()}_focusHandler(){const e=this;e.setAttribute("focus",""),(e.readonly||0!==e.minLength||0!==e.$.input.value.length||e._preventLookup)&&(e.$.fireEvent("focus"),delete e._preventLookup)}_blurHandler(){const e=this;if(e.opened||e.removeAttribute("focus"),e.$.fireEvent("blur"),e._popup&&e._popup.isCompleted)e._setInputValue(e._popup.value[0],e._popup.value[1]);else{const t=e._getInputValue();e._setInputValue(t[0],t[1])}delete e._preventLookup}_is12HourFormat(){const e=(new Date).toLocaleTimeString(this.locale,this.dateTimeFormat);return e.indexOf("A")>=0||e.indexOf("a")>=0||e.indexOf("P")>=0||e.indexOf("p")>=0}_getInputValue(){const e=this.$.input.value,t=this.$.input.value.split(":");if(t.length<2)return[0,0];let n=parseInt(t[0]),i=parseInt(t[1]);if(isNaN(n)&&(n=0),isNaN(i)&&(i=0),e.match(/\s(.*)$/)){const a=e.match(/\s(.*)$/)[1];"PM"===a&&n<12&&(n+=12),"AM"===a&&12===n&&(n-=12)}return[n,i]}_setInputValue(e,t){const n=this;let i=n.value&&n.value.slice?n.value.slice(0):[0,0];const a=new Date;isNaN(e)&&(e=0),isNaN(t)&&(t=0),e>24&&(e=0),t>59&&(t=0),a.setHours(e),a.setMinutes(t);const r=a.toLocaleTimeString(n.locale,n.dateTimeFormat),o=[e,t];n.$.input.value=r,n.value=[e,t],n.setAttribute("data-value",e+":"+t),i.some(s=>o.indexOf(s)<0)&&(n.$.fireEvent("change",{oldValue:i,value:o}),n._updateTargetValue())}_performSelect(){}_open(){const e=this,t=e.getBoundingClientRect(),n=window.scrollX,i=window.scrollY;let a=0,r=0;if(this.opened)return;if(e.timer&&clearTimeout(e.timer),document.body.appendChild(e.$.scrollView),e.setAttribute("aria-owns",e.$.scrollView.id),e.readonly||e.$.input.setAttribute("aria-controls",e.$.scrollView.id),e.$.scrollView.enableShadowDOM&&!e._importedStyle&&(e.$.scrollView.importStyle(e._getStyleUrl("smart.textbox.css")),e._importedStyle=!0),"static"!==getComputedStyle(document.body).position){const l=document.body.getBoundingClientRect();a=l.left,r=l.top}e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.style.left=-3+t.left+n-a+"px",e.$.scrollView.style.top=t.bottom+i-r+1+"px",e.$.scrollView.classList.remove("open"),e.$.scrollView.onpointerdown=function(){e._isPointerDown=!0};const o=e._popup,s=o.context;o.rightToLeft=e.rightToLeft,o.messages=e.messages,o.theme=e.theme,o.context=e,o.locale=e.locale,o.context=s,e._refreshPopup(),requestAnimationFrame(function(){e.$.scrollView.setAttribute("open",""),e.setAttribute("open",""),e.$.dropDownButton.setAttribute("open",""),e.$.input.setAttribute("open","")}),this.opened=!0}_refreshPopup(){const e=this._getInputValue();this._popup._setValue(e[0],e[1])}close(){const e=this;return!!e.opened&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.$.scrollView.parentNode&&!e.opened&&(document.body.removeChild(e.$.scrollView),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))},1e3),e.$.scrollView.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.opened=!1,!0)}_lookup(){}_downHandler(e){this.readonly&&this._dropDownButtonDownHandler(e)}_dropDownButtonDownHandler(e){return this._toggle(),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}_toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this;e._process(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}_process(){this._performSelect(void 0,!0),this._open()}_matcher(){}_sorter(){}_highlighter(){}_render(){}ensureVisible(){}_next(){}_prev(){}_move(e){e.stopPropagation()}_keyPressHandler(e){}_insertKey(e,t=1){const n=this,i=n.$.input.selectionStart,a=n.$.input.value,r=a.substring(0,i),o=a.substring(i+t);n.$.input.value=r+e.key+o,n.$.input.selectionStart=n.$.input.selectionEnd=i+1}_keyDownHandler(e){const t=this;t._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(e.keyCode);let n=!1;switch(e.keyCode>=48&&e.keyCode<=57&&(n=!0),":"===e.key&&1===t.$.input.value.length&&(t.$.input.value="0"+t.$.input.value+":"),t.$.input.value.length>5&&n&&t.$.input.selectionEnd-t.$.input.selectionStart<=1&&(t.$.input.value.indexOf(":")===t.$.input.selectionStart&&(t.$.input.selectionStart=t.$.input.selectionEnd=t.$.input.selectionStart+1),t._insertKey(e),e.preventDefault()),e.key){case"ArrowLeft":case"ArrowUp":case"ArrowDown":case"ArrowRight":case"Home":case"End":case"Delete":case"Backspace":case"Tab":n=!0}"Tab"===e.key&&t.close(),e.ctrlKey&&(n=!0),n||e.preventDefault()}_keyUpHandler(e){const t=this,n=t.$.input.value.trim(),i=n.indexOf(":");2===n.length&&"Backspace"!==e.key&&"Delete"!==e.key?t.$.input.value=n+":":":"===e.key&&-1===i?t._insertKey(e,0):":"===e.key&&i>=0&&(t.$.input.selectionStart=t.$.input.selectionEnd=i+1);const a=n.split(":"),r=t._is12HourFormat();if(2===a.length&&r&&("p"===e.key||"a"===e.key)){let o=parseInt(parseInt(a[0])),s=parseInt(parseInt(a[1]));isNaN(o)&&(o=0),isNaN(s)&&(s=0);let l=n.match(/\s(.*)$/);if(!l)return;l=n.match(/\s(.*)$/)[1],"PM"===l&&o<12&&(o+=12),"AM"===l&&12===o&&(o-=12);const d=n.indexOf("a")>=0||n.indexOf("A")>=0;if("p"===e.key&&d)o+=12;else{if("a"!==e.key||d)return;o-=12}const c=t.$.input.selectionStart;t._setInputValue(o,s),t.$.input.selectionStart=c,t.$.input.selectionEnd=c}if(2===a.length&&(t.value=t._getInputValue()),t._refreshPopup(),!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault()}}propertyChangedHandler(e,t,n){const i=this;switch(e){case"value":if("string"==typeof n)i.$.input.value=n;else if(n instanceof Date)i._setInputValue(n.getHours(),n.getMinutes());else if(Array.isArray(n))i._setInputValue(n[0],n[1]);else{i.$.input.value=n;const a=i._getInputValue();i._setInputValue(a[0],a[1])}break;case"month":case"min":case"max":i.$.calendar&&(i.$.calendar[e]=n);break;case"theme":case"rightToLeft":case"animation":case"inverted":i.$.calendar&&(i.$.calendar[e]=n),n?i.$.scrollView.setAttribute(Smart.Utilities.Core.toDash(e),"boolean"==typeof n?"":n):i.$.scrollView.removeAttribute(Smart.Utilities.Core.toDash(e));break;case"locale":i._performSelect(),i.$.calendar.locale=n;break;default:super.propertyChangedHandler(e,t,n)}}_createElement(){const e=this,t=document.createElement("div");if(t.classList.add("smart-input-drop-down-menu","smart-date-input-drop-down-menu"),t.setAttribute("animation",e.animation),t.setAttribute("role","presentation"),e.rightToLeft?t.setAttribute("right-to-left",""):t.removeAttribute("right-to-left"),e.inverted?t.setAttribute("inverted",""):t.removeAttribute("inverted"),t.onclick=function(i){i.stopPropagation(),i.preventDefault();const a=i.target;e.$.input.focus();const r=a.closest(".smart-timepicker-button");if(r){const o=t.querySelectorAll(".smart-timepicker-button");for(let s=0;s<o.length;s++)o[s].removeAttribute("selected");r.setAttribute("selected","")}else a.closest("smart-done-button")?e.close():a.closest(".smart-timepicker")&&e._popup&&e._setInputValue(e._popup.value[0],e._popup.value[1])},!t.id){const i=t.tagName.toLowerCase();t.id=i.slice(0,1).toLowerCase()+i.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e.$.scrollView=t,e.classList.add("smart-input");const n=document.createElement("smart-time-box");if(e._popup=n,t.appendChild(n),""===e.value&&(e.value=[0,0]),e.$.input.value=e.value.join(":"),e.value&&e.value.length>0){const i=e._getInputValue();e._setInputValue(i[0],i[1])}}setValue(e){this.value=e}getValue(){return this.value}getFormattedValue(){const e=this;if(!e.$.input)return"";if(e.value&&e.value.length>0){const t=e._getInputValue();e._setInputValue(t[0],t[1])}return e.$.input.value}_refreshMenu(){}_setAriaRelations(){const e=this,t=e.getAttribute("aria-label");e.readonly?(e.setAttribute("role","button"),!t&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.removeAttribute("aria-readonly"),e.$.input.setAttribute("aria-hidden",!0),e.$.input.removeAttribute("aria-controls"),e.$.dropDownButton.setAttribute("aria-hidden",!0)):(e.setAttribute("role","presentation"),t&&t===e.placeholder&&e.removeAttribute("aria-label"),e.$.input.removeAttribute("aria-hidden"),e.$.dropDownButton.removeAttribute("aria-hidden")),e.setAttribute("aria-haspopup","dialog"),e.$.scrollView.setAttribute("role","dialog")}_setActiveDescendant(){}_setInputPurpose(){}})},1419:()=>{Smart("smart-time-picker",class extends Smart.BaseElement{static get properties(){return{autoSwitchToMinutes:{value:!1,type:"boolean"},footer:{value:!1,type:"boolean"},footerTemplate:{value:null,type:"any?"},format:{value:"12-hour",allowedValues:["12-hour","24-hour"],type:"string"},minuteInterval:{value:1,type:"number"},name:{value:"",type:"string"},selection:{value:"hour",allowedValues:["hour","minute"],type:"string"},value:{value:new Date,type:"any",reflectToAttribute:!1},view:{value:"portrait",allowedValues:["landscape","portrait"],type:"string"}}}static get listeners(){return{keydown:"_keydownHandler",resize:"_resizeHandler","header.click":"_headerClickHandler","picker.down":"_pickerDownHandler","picker.move":"_pickerMoveHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.Utilities.NumericProcessor":"smart.numeric.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.Draw":"smart.draw.js"}}static get styleUrls(){return["smart.timepicker.css"]}template(){return'<div id="container" role="presentation">\n                <div id="header" class="smart-header smart-unselectable" role="heading" aria-level="1">\n                    <div id="hourMinuteContainer" class="smart-hour-minute-container">\n                        <div id="hourContainer" class="smart-hour-container" role="button"></div>\n                        <div role="presentation">:</div>\n                        <div id="minuteContainer" class="smart-minute-container" role="button"></div>\n                    </div>\n                    <div id="ampmContainer" class="smart-am-pm-container" role="presentation">\n                        <div id="amContainer" class="smart-am-container" role="button">AM</div>\n                        <div id="pmContainer" class="smart-pm-container" role="button">PM</div>\n                    </div>\n                </div>\n                <div id="main" class="smart-main-container">\n                    <div id="svgContainer" class="smart-svg-container">\n                        <div id="picker" class="smart-svg-picker" role="slider"></div>\n                    </div>\n                    <div id="footer" class="smart-footer"></div>\n                </div>\n                <input id="hiddenInput" type="hidden" name="[[name]]">\n            </div>'}ready(){super.ready()}render(){this._createElement(),super.render()}setHours(e){const t=this;(e=24===e?0:Math.max(0,Math.min(e,23)))<12?t._selectAmPm("am"):t._selectAmPm("pm"),"12-hour"===t.format&&(0===e?e=12:e>12&&(e-=12)),t._updateHours(e,arguments[1]),"hour"===t.selection&&(t._inInnerCircle="24-hour"===t.format&&(0===e||e>12),t._drawArrow(!0,e,arguments[2]),t.hasAnimation||(t._inInnerCircle=!1))}setMinutes(e){const t=this;e=60===e?0:Math.max(0,Math.min(e,59)),t._updateMinutes(e),"minute"===t.selection&&t._drawArrow(!0,e,arguments[1])}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;switch(e){case"disabled":case"unfocusable":i._setFocusable();break;case"footer":case"view":i._resizeHandler();break;case"footerTemplate":i._validateFooterTemplate();break;case"format":{let a=i.value.getHours();"12-hour"===n?(i.$ampmContainer.removeClass("smart-hidden"),i.value.getHours()<12?i._selectAmPm("am"):i._selectAmPm("pm"),0===a?a=12:a>12&&(a-=12)):i.$ampmContainer.addClass("smart-hidden"),i.$.hourContainer.innerHTML=a,"hour"===i.selection&&(i.$.picker.setAttribute("aria-valuenow",a),i._draw.clear(),i._renderSVG());break}case"minuteInterval":{const a=Math.max(1,Math.min(n,60));a!==n&&(i.minuteInterval=a),"minute"===i.selection&&(i.interval=a);break}case"selection":"hour"===n?i._changeToHourSelection():i._changeToMinuteSelection();break;case"value":{i._oldValue=t,i._validateValue();const a=i.value.getHours()===t.getHours(),r=i.value.getMinutes()===t.getMinutes();a&&r||(r?i.setHours(i.value.getHours()):(a||i.setHours(i.value.getHours(),!0),i.setMinutes(i.value.getMinutes()))),delete i._oldValue;break}}}_applyInitialSettings(){const e=this,t=e.value;let n,i;n=t.getHours(),i=t.getMinutes(),"12-hour"===e.format?n<12?(e._ampm="am",e.$amContainer.addClass("smart-selected"),0===n&&(n=12)):(e._ampm="pm",e.$pmContainer.addClass("smart-selected"),n>12&&(n-=12)):e.$ampmContainer.addClass("smart-hidden"),i=i.toString(),1===i.length&&(i="0"+i),e.$.hourContainer.innerHTML=n,e.$.minuteContainer.innerHTML=i,"hour"===e.selection?(e.$hourContainer.addClass("smart-selected"),e.$.picker.setAttribute("aria-valuenow",n)):(e.$minuteContainer.addClass("smart-selected"),e.$.picker.setAttribute("aria-valuenow",i))}_changeSelection(e,t){const n=this,i=e.pageX,a=e.pageY,r=n._getCenterCoordinates(),o=Math.sqrt(Math.pow(r.x-i,2)+Math.pow(r.y-a,2));if(n._measurements.center=r,"down"===e.type){if(o>n._measurements.radius)return void e.stopPropagation();n._dragging=!0}n._inInnerCircle="24-hour"===n.format&&"hour"===n.selection&&o<n._measurements.radius-50;let s=-1*Math.atan2(a-r.y,i-r.x)*180/Math.PI;s<0&&(s+=360),n._angle=s;let l=n._numericProcessor.getValueByAngle(n._angle);"hour"===n.selection?("24-hour"===n.format&&n._inInnerCircle?0!==l&&12!==l?l+=12:l=0:0===l&&(l=12),n._updateHours(l)):(60===l&&(l=0),n._updateMinutes(l)),void 0!==n._oldTimePart&&(cancelAnimationFrame(n._animationFrameId),delete n._animationFrameId,n._drawArrow(!0,l,t))}_changeToHourSelection(){const e=this,t=e._centralCircle.parentElement||e._centralCircle.parentNode;let n=e.value.getHours();cancelAnimationFrame(e._animationFrameId),delete e._animationFrameId,e.interval=1,e.$hourContainer.addClass("smart-selected"),e.$minuteContainer.removeClass("smart-selected"),t.removeChild(e._centralCircle),t.removeChild(e._arrow),t.removeChild(e._head),e._getMeasurements(),e._numericProcessor.getAngleRangeCoefficient(),e._draw.clear(),t.appendChild(e._centralCircle),t.appendChild(e._arrow),t.appendChild(e._head),e._renderHours(),"24-hour"===e.format&&(0===n||n>12)?e._inInnerCircle=!0:"12-hour"===e.format&&(n%=12,0===n&&(n=12)),e._drawArrow(!0,void 0,!0),e._inInnerCircle=!1,e.$.picker.firstElementChild.setAttribute("aria-hidden",!0),e.$.picker.setAttribute("aria-valuenow",n)}_changeToMinuteSelection(){const e=this,t=e._centralCircle.parentElement||e._centralCircle.parentNode;e._inInnerCircle=!1,cancelAnimationFrame(e._animationFrameId),delete e._animationFrameId,e.interval=e.minuteInterval,e.$hourContainer.removeClass("smart-selected"),e.$minuteContainer.addClass("smart-selected"),t.removeChild(e._centralCircle),t.removeChild(e._arrow),t.removeChild(e._head),e._getMeasurements(),e._numericProcessor.getAngleRangeCoefficient(),e._draw.clear(),t.appendChild(e._centralCircle),t.appendChild(e._arrow),t.appendChild(e._head),e._renderMinutes(),e._drawArrow(!0,void 0,!0),e.$.picker.firstElementChild.setAttribute("aria-hidden",!0),e.$.picker.setAttribute("aria-valuenow",e.value.getMinutes())}_computeArrowBodyPoints(e,t,n,i){const a=Math.sin(t),r=Math.cos(t),o=e-n*r+i*a,s=e+n*a+i*r,l=e+n*r+i*a,d=e-n*a+i*r,c="M "+(e+n*r)+","+(e-n*a)+" L "+(e-n*r)+","+(e+n*a)+" L "+o+","+s+" "+l+","+d;return this._headCenter={x:(o+l)/2,y:(s+d)/2},c}_createElement(){const e=this;e.setAttribute("role","dialog"),e.coerce=!0,e.min=0,e._drawMin="0",e.startAngle=-270,e.endAngle=90,e._angleDifference=e.endAngle-e.startAngle,e.ticksVisibility="none",e._tickIntervalHandler={},e._tickIntervalHandler.labelsSize={},e._distance={majorTickDistance:0,minorTickDistance:0,labelDistance:10},e._measurements={},e._validateInitialPropertyValues(),e._applyInitialSettings(),e._numericProcessor=new Smart.Utilities.DecimalNumericProcessor(e),e._draw=new Smart.Utilities.Draw(e.$.picker),e._isVisible()?(e._setPickerSize(),e._getMeasurements(),e._numericProcessor.getAngleRangeCoefficient(),e._renderSVG(),e._setFocusable(),e.$.hiddenInput.value=e.value,e.enableShadowDOM&&e.appendChild(e.$.hiddenInput)):e._renderingSuspended=!0}_documentMoveHandler(e){this._dragging&&this._changeSelection(e,!0)}_documentUpHandler(){const e=this;e._dragging?(e._inInnerCircle=!1,e._dragging=!1,e.autoSwitchToMinutes&&"hour"===e.selection&&(e.hasAnimation?function t(){e._animationFrameId?requestAnimationFrame(t):(e.$picker.addClass("animate"),setTimeout(function(){e.selection="minute",e._changeToMinuteSelection()},250),setTimeout(function(){e.$picker.removeClass("animate")},550))}():(e.selection="minute",e._changeToMinuteSelection()))):e.hasAttribute("focus")&&(e.$.fireEvent("blur"),e.removeAttribute("focus"))}_drawArrow(e,t,n){const i=this,a="hour"===i.selection,r="12-hour"===i.format;let o,s,l=i._oldTimePart;if(delete i._oldTimePart,void 0===t&&(a?(t=i.value.getHours(),r&&t>12&&(t-=12)):t=i.value.getMinutes()),void 0===l||n||!i.hasAnimation)return void i._drawArrowSVG(e,t);if(a&&!r)return void i._animate24HourView(l,t);a?(o=.2,s=12,t%=s,l%=s):(o=1,s=60);let d=t-l,c=l-t;d<0&&(d+=s),c<0&&(c+=s),c<d&&(o*=-1),function u(){l+=o,l=parseFloat((l%s).toFixed(1)),l<0&&(l+=s),i._drawArrowSVG(e,l),e=!0,l!==t%s?i._animationFrameId=requestAnimationFrame(u):delete i._animationFrameId}()}_animate24HourView(e,t){const n=this;let i=.2;n._inInnerCircle=!1;const a=0===e||e>12,r=0===t||t>12;if(a!==r){if(e=a?Math.abs(e-12):(e+12)%24,n._inInnerCircle=r,n._drawArrowSVG(!0,e),e===t)return}else n._inInnerCircle=r;let o=e,s=t;n._inInnerCircle&&(0===s&&o<18?s=12:0===o&&s<18&&(o=12));let l=s-o,d=o-s;l<0&&(l+=12),d<0&&(d+=12),d<l&&(i*=-1),function c(u){n._inInnerCircle=u,u?((e=parseFloat((e+i).toFixed(1)))<0?e+=24:e<1&&(e+=12),12!==e&&24!==e||(e=0)):(12!==(e+=i)&&(e=parseFloat((e%12).toFixed(1))),e<=0&&(e+=12)),n._drawArrowSVG(!0,e),e!==t?n._animationFrameId=requestAnimationFrame(function(){c(u)}):(delete n._animationFrameId,n._inInnerCircle=!1)}(n._inInnerCircle)}_drawArrowSVG(e,t){const n=this,i=n._measurements,a=n._numericProcessor.getAngleByValue(t);let r;r=n._computeArrowBodyPoints(i.radius,a,1,n._inInnerCircle?i.innerRadius-n._largestLabelSize/2-45:i.innerRadius-n._largestLabelSize/2),e?(n._arrow.setAttribute("d",r),n._head.setAttribute("cx",n._headCenter.x),n._head.setAttribute("cy",n._headCenter.y),n._head.setAttribute("r",n._largestLabelSize),n._headRect=n._head.getBoundingClientRect(),t%1==0&&n._highlightLabel(t)):(n._arrow=n._draw.path(r,{class:"smart-needle"}),n._head=n._draw.circle(n._headCenter.x,n._headCenter.y,n._largestLabelSize,{class:"smart-needle-central-circle"}),n._headRect=n._head.getBoundingClientRect())}_drawLabel(e,t,n){const i=this,a=i._measurements,r=a.radius,o={class:"smart-label smart-unselectable","font-size":a.fontSize,"font-family":a.fontFamily,"font-weight":a.fontWeight,"font-style":a.fontStyle};"hour"===i.selection?i._plotInnerCircle?t>0?t+=12:t="00":0===t&&(t=12):1===t.toString().length&&(t="0"+t);const s=i._draw.measureText(t,0,o),l=r-n-i._largestLabelSize/2,d=r+l*Math.sin(e),c=r+l*Math.cos(e);i._draw.text(t,Math.round(d)-s.width/2,Math.round(c)-s.height/2,s.width,s.height,0,o).setAttribute("value",parseFloat(t))}_getCenterCoordinates(){const e=this.$.picker.getBoundingClientRect(),t=this._measurements.radius,n=document.body.scrollLeft||document.documentElement.scrollLeft,i=document.body.scrollTop||document.documentElement.scrollTop;return{x:e.left+n+t,y:e.top+i+t}}_getMeasurements(){const e=this,t=e._measurements,n=document.createElement("div");let i,a,r,o,s,l;n.className="smart-label",n.style.position="absolute",n.style.visibility="hidden",e.$.svgContainer.appendChild(n),"hour"===e.selection?(i="1",a="23",e.max=12,e._drawMax="12",e._range=12):(i="00",a="55",e.max=60,e._drawMax="60",e._range=60),n.innerHTML=i,r=n.offsetWidth,s=n.offsetHeight,n.innerHTML=a,o=n.offsetWidth,l=n.offsetHeight,e._largestLabelSize=Math.max(r,s,o,l),e._tickIntervalHandler.labelsSize.minLabelSize=s,e._tickIntervalHandler.labelsSize.maxLabelSize=l;const d=window.getComputedStyle(n);t.fontSize=d.fontSize,t.fontFamily=d.fontFamily,t.fontWeight=d.fontWeight,t.fontStyle=d.fontStyle,e.$.svgContainer.removeChild(n)}_headerClickHandler(e){const t=this;if(!t.disabled&&!t.readonly)switch(e.target){case t.$.hourContainer:"hour"!==t.selection&&(t.selection="hour",t._changeToHourSelection());break;case t.$.minuteContainer:"minute"!==t.selection&&(t.selection="minute",t._changeToMinuteSelection());break;case t.$.amContainer:if(!t.$amContainer.hasClass("smart-selected")){t._selectAmPm("am");const n=new Date(t.value.getTime());t.value.setHours(t.value.getHours()-12),t.$.hiddenInput.value=t.value,t.$.fireEvent("change",{value:t.value,oldValue:n})}break;case t.$.pmContainer:if(!t.$pmContainer.hasClass("smart-selected")){t._selectAmPm("pm");const n=new Date(t.value.getTime());t.value.setHours(t.value.getHours()+12),t.$.hiddenInput.value=t.value,t.$.fireEvent("change",{value:t.value,oldValue:n})}}}_highlightLabel(e){const t=this;if(t._highlightedLabel){if(parseFloat(t._highlightedLabel.getAttribute("value"))===e)return;t._highlightedLabel.classList.remove("smart-selected"),t._highlightedLabel=void 0}let n;"hour"===t.selection?(void 0===e&&(e=t.value.getHours()),"12-hour"===t.format&&(0===e?e=12:e>12&&(e-=12)),n=e):(void 0===e&&(e=t.value.getMinutes()),n=5*Math.round(e/5),60===n&&(n=0));const i=t.$.picker.querySelector('.smart-label[value="'+n+'"]');i&&(n===e||t._overlapsLabel(i))&&(t._highlightedLabel=i,i.classList.add("smart-selected"))}_isVisible(){const e=this;return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}_keydownHandler(e){const t=this;if(t._dragging)return;const n=(t.shadowRoot||t.getRootNode()).activeElement,i=e.key;if(!t.$.header.contains(n)||"Enter"!==i&&" "!==i){if(n===t.$.picker&&!e.altKey){let a;if("ArrowRight"===i||"ArrowUp"===i?a=1:"ArrowLeft"!==i&&"ArrowDown"!==i||(a=-1),a)if(e.preventDefault(),"hour"===t.selection){let r=t.value.getHours();0===r&&-1===a?r=23:23===r&&1===a?r=0:r+=a,"12-hour"===t.format&&(r>=12&&t.$amContainer.hasClass("smart-selected")?r-=12:r<12&&t.$pmContainer.hasClass("smart-selected")&&(r+=12)),t.setHours(r,void 0,!0)}else{let r=t.value.getMinutes();a*=t.minuteInterval,r+a>=60?r=0:r<-1*a?r=60%a==0?60+a:60-60%a:r+=a,t.setMinutes(r,!0)}}}else e.preventDefault(),t._headerClickHandler({target:n})}_overlapsLabel(e){const t=this,n=e.getBoundingClientRect();let i=t._headRect;return 0===i.height&&(i=t._headRect=t._head.getBoundingClientRect()),!(n.right-10<i.left||n.left+10>i.right||n.bottom-10<i.top||n.top+10>i.bottom)}_parseDateString(e,t){const n=e.indexOf("Date("),i=e.indexOf(")");let a=e;if(-1!==n&&-1!==i){if(a=e.slice(n+5,i),a=a.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),""===a.trim())return new Date;if(new RegExp(/(^(\d+)(\s*,\s*\d+)+$)/g).test(a))return a=a.replace(/\s/g,""),a=a.split(","),a.map(function(r,o){a[o]=parseInt(r)}),a.unshift(null),a=new(Function.prototype.bind.apply(Date,a)),a}if(""===a.trim())return t;if(!isNaN(a))return new Date(parseInt(a,10));try{a=new Date(a)}catch{a=t}return isNaN(a.getTime())?t:a}_pickerDownHandler(e){const t=this;t.disabled||t.readonly||!Smart.Utilities.Core.isMobile&&1!==e.which||(t._changeSelection(e),t.$.fireEvent("focus"),t.setAttribute("focus",""))}_pickerMoveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_renderHours(){const e=this;e._highlightedLabel=void 0,e._majorTicksInterval=1,e._numericProcessor.addGaugeTicksAndLabels(),"24-hour"===e.format?(e._plotInnerCircle=!0,e._distance.labelDistance=55,e._numericProcessor.addGaugeTicksAndLabels(),e._plotInnerCircle=!1,e._distance.labelDistance=10,e.$.picker.setAttribute("aria-valuemin",0),e.$.picker.setAttribute("aria-valuemax",23)):(e.$.picker.setAttribute("aria-valuemin",1),e.$.picker.setAttribute("aria-valuemax",12))}_renderMinutes(){const e=this;e._highlightedLabel=void 0,e._majorTicksInterval=5,e._numericProcessor.addGaugeTicksAndLabels(),e.$.picker.setAttribute("aria-valuemin",0),e.$.picker.setAttribute("aria-valuemax",59)}_renderSVG(){const e=this;if(e._isVisible()&&!e._renderingSuspended){if(e._centralCircle=e._draw.circle(e._measurements.radius,e._measurements.radius,4,{class:"smart-needle-central-circle"}),"hour"===e.selection&&"24-hour"===e.format&&(0===e.value.getHours()||e.value.getHours()>12)&&(e._inInnerCircle=!0),e._drawArrow(!1),e._inInnerCircle=!1,"hour"===e.selection){e.interval=1,e._renderHours();let t=e.value.getHours();"12-hour"===e.format&&t>12&&(t-=12),e._highlightLabel(t)}else e.interval=e.minuteInterval,e._renderMinutes(),e._highlightLabel(e.value.getMinutes());e.$.picker.firstElementChild.setAttribute("aria-hidden",!0)}else e._renderingSuspended=!0}refresh(){const e=this;let t=!1;e.isRendered&&(e._isVisible()?(e._renderingSuspended=!1,t=!0,e._getMeasurements(),e._numericProcessor.getAngleRangeCoefficient(),e._setPickerSize(),e._sizeChanged||t?(e._draw.clear(),e._renderSVG(),e._sizeChanged=!1):(e._headRect=e._head.getBoundingClientRect(),e._highlightLabel())):e._renderingSuspended=!0)}_resizeHandler(){this.refresh()}_selectAmPm(e){const t=this;"am"===e?(t._ampm="am",t.$pmContainer.removeClass("smart-selected"),t.$amContainer.addClass("smart-selected")):(t._ampm="pm",t.$amContainer.removeClass("smart-selected"),t.$pmContainer.addClass("smart-selected"))}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return e.$.hourContainer.removeAttribute("tabindex"),e.$.minuteContainer.removeAttribute("tabindex"),e.$.amContainer.removeAttribute("tabindex"),e.$.pmContainer.removeAttribute("tabindex"),void e.$.picker.removeAttribute("tabindex");const t=e.tabIndex>0?e.tabIndex:0;e.$.hourContainer.tabIndex=t,e.$.minuteContainer.tabIndex=t,e.$.amContainer.tabIndex=t,e.$.pmContainer.tabIndex=t,e.$.picker.tabIndex=t}_setPickerSize(){const e=this;let i=.9*Math.min(e.$.svgContainer.offsetWidth,e.$.svgContainer.offsetHeight);e._sizeChanged=void 0!==e._pickerSize&&e._pickerSize!==i,e._pickerSize=i,e._measurements.radius=i/2,e._measurements.innerRadius=e._measurements.radius-10,i+="px",e.$.picker.style.width=i,e.$.picker.style.height=i}_updateHours(e,t){const n=this;let i=e;"12-hour"===n.format?"am"===n._ampm?12===i&&(i=0):i<12&&(i+=12):i=e;const a=void 0!==n._oldValue?n._oldValue:new Date(n.value.getTime()),r=a.getHours();i!==r?(n._oldTimePart=r,void 0===n._oldValue&&n.value.setHours(i),n.$.hourContainer.innerHTML=e,!0!==t&&(n.$.hiddenInput.value=n.value,n.$.fireEvent("change",{value:n.value,oldValue:a})),"hour"===n.selection&&n.$.picker.setAttribute("aria-valuenow",e)):delete n._oldTimePart}_updateMinutes(e){const t=this,n=void 0!==t._oldValue?t._oldValue:new Date(t.value.getTime()),i=n.getMinutes();e!==i?(t._oldTimePart=i,void 0===t._oldValue&&t.value.setMinutes(e),"minute"===t.selection&&t.$.picker.setAttribute("aria-valuenow",e),1===(e=e.toString()).length&&(e="0"+e),t.$.minuteContainer.innerHTML=e,t.$.hiddenInput.value=t.value,t.$.fireEvent("change",{value:t.value,oldValue:n})):delete t._oldTimePart}_validateFooterTemplate(){const e=this,t=e.footerTemplate;if(null===t)return void(e.$.footer.innerHTML="");let n;if(t instanceof HTMLTemplateElement?n=t:"string"==typeof t&&(n=document.getElementById(t),n instanceof HTMLTemplateElement||(n=void 0)),void 0===n)return e.footerTemplate=null,void(e.$.footer.innerHTML="");const i=document.importNode(n.content,!0);if(e.enableShadowDOM)return e.$.footer.innerHTML="<slot></slot>",void e.appendChild(i);e.$.footer.appendChild(i)}_validateInitialPropertyValues(){const e=this;e._validateFooterTemplate(),e.minuteInterval=Math.max(1,Math.min(e.minuteInterval,60)),e._validateValue()}_validateValue(){const e=this,t=e.value,n=void 0!==e._oldValue?this._oldValue:new Date;if(!(t instanceof Date))if("string"==typeof t){if(/^\d{1,2}:\d{1,2}$/.test(t)){const i=t.split(":");return void(e.value=new Date(n.getFullYear(),n.getMonth(),n.getDate(),parseFloat(i[0]),parseFloat(i[1])))}e.value=e._parseDateString(t,n)}else e.value=n}})},4595:()=>{Smart("smart-toast-item",class extends Smart.ContentElement{static get properties(){return{showCloseButton:{value:!1,type:"boolean"},iconClass:{value:null,type:"string?"},itemClass:{value:null,type:"string?"},opened:{value:!1,type:"boolean"}}}static get styleUrls(){return["smart.toast.css"]}template(){return'<div id="container" role="presentation">\n                    <div class="smart-toast-item-header">\n                        <span class="smart-toast-item-close-button" role="button" aria-label="Close"></span>\n                    </div>\n                    <div class="smart-toast-item-container" id="itemContainer">\n                        <span class="smart-toast-item-icon" role="presentation"></span>\n                        <span class="smart-toast-item-content" id="itemContent" inner-h-t-m-l="[[innerHTML]]">\n                            <content></content>\n                        </span>\n                    </div>\n                </div>'}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n)}render(){const e=this,t=e.iconClass;e.setAttribute("role","alert"),e.itemClass&&(e.className+=" "+e.itemClass),e.$.itemContainer.firstElementChild.className+=" "+(t||"default"),super.render()}appendChild(e){const t=this;if(e){if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}t.$.itemContent.appendChild(e)}else t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}refresh(){}insertBefore(e,t){const n=this;if(e){if(!n.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,i.concat(Array.prototype.slice.call(arguments)))}n.$.itemContent.insertBefore(e,t||null)}else n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"insertBefore",node:"node"}))}removeChild(e){const t=this;if(e){if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}t.$.itemContent.removeChild(e)}else t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}}),Smart("smart-toast",class extends Smart.ContentElement{static get properties(){return{appendTo:{value:null,type:"any"},autoClose:{value:!1,type:"boolean"},autoCloseDelay:{value:3e3,type:"number"},autoOpen:{value:!1,type:"boolean"},iconClass:{value:null,type:"string?"},itemClass:{value:null,type:"string?"},itemTemplate:{value:null,type:"string?"},modal:{value:!1,type:"boolean"},position:{allowedValues:["top-left","top-right","bottom-left","bottom-right"],value:"top-right",type:"string"},showCloseButton:{value:!1,type:"boolean"},type:{allowedValues:["info","warning","success","error","mail","time",null],value:"info",type:"string?"},value:{value:"",type:"any"}}}get enableShadowDOM(){return!1}template(){return""}propertyChangedHandler(e,t,n){const i=this;switch(e){case"value":{const a=i._instances[i._instances.length-1];a&&(n instanceof HTMLElement?a.appendChild(n):i.itemTemplate?a.innerHTML=i._handleItemTemplate(n)||n:(a.shadowRoot?a.shadowRoot:a).querySelector(".smart-toast-item-content").innerHTML=n);break}case"itemTemplate":{const a=i._instances[i._instances.length-1];a&&i.itemTemplate&&(a.innerHTML=i._handleItemTemplate(i.value)||i.value);break}case"appendTo":case"modal":case"position":i._handleContainers();break;case"rightToLeft":case"showCloseButton":case"type":i._instances&&i._instances.forEach(a=>{if(a[e]=n,"type"===e&&n){const r=a.querySelector(".smart-toast-item-icon");["info","warning","success","error","mail","time"].forEach(o=>{a.classList.remove(o)}),a.classList.add(n),r&&r.setAttribute("aria-label",n+" icon")}});break;default:super.propertyChangedHandler(e,t,n)}}attached(){super.attached();const e=this,t=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];for(let n=0;n<t.length;n++){const i=e.$["toastContainer"+t[n]];i&&i.children.length&&("Custom"===t[n]?e._appendTo.appendChild(e._container):e.getShadowRootOrBody().appendChild(i))}}detached(){super.detached();const e=this,t=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];for(let n=0;n<t.length;n++){const i=e.$["toastContainer"+t[n]];i&&(e._removeContainerListeners(i),i.remove()),e.closeAll()}}ready(){super.ready()}render(){const e=this;if(!e.value||e.value instanceof HTMLElement){const t=e.querySelectorAll(".smart-element");if(t.length>0){for(let i=0;i<t.length;i++){const a=t[i],r=document.createElement(a.nodeName+"-clone");r.innerHTML=a.innerHTML,r.className=a.className,a.parentElement.insertBefore(r,a),a.remove()}const n=document.createElement("div");for(;e.childNodes.length;)n.appendChild(e.firstChild);e.value=n.innerHTML.replace(/-clone/gi,"")}else e.value=e.innerHTML}else e.innerHTML=e.value;e._instances=[],e.autoOpen&&e.open(),super.render()}closeAll(){const e=this,t=e._instances;if(t&&t.length)for(var n=e._instances.length-1;n>-1;n--)e._close(e._instances[n])}closeItem(e){const t=this;e&&0!==t._instances.length&&("string"==typeof e?e=document.getElementById(e):e instanceof HTMLElement&&(e=e.closest("smart-toast-item")),e&&-1!==t._instances.indexOf(e)&&t._close(e))}closeLast(){const e=this;e._instances.length>0&&e._close(e._instances[e._instances.length-1])}get items(){const e=this._instances;return this.isReady&&e&&e.length?e.slice():[]}toggle(){const e=this;void 0===e.opened&&(e.opened=!1,e.autoOpen&&(e.opened=!0)),e.opened=!e.opened,e.opened?e.open():e.closeAll()}open(e,t){const n=this;if(n.disabled)return;void 0===e&&(e=n.value),t||(t=n.type),n._handleContainers();let i=document.createElement("smart-toast-item");i.iconClass=n.iconClass,i.itemClass=n.itemClass,e instanceof HTMLElement?i.appendChild(e):i.innerHTML=n._handleItemTemplate(e)||e,i.rightToLeft=n.rightToLeft,i.theme=n.theme,i.animation=n.animation,i.showCloseButton=n.showCloseButton;for(let a=0;a<n.classList.length;a++)n.classList[a].indexOf("smart-")<0&&i.classList.add(n.classList[a]);if(n._container.appendChild(i),t){const a=i.querySelector(".smart-toast-item-icon");i.classList.add(t),a&&a.setAttribute("aria-label",t+" icon")}return i._parent=n._container,n._instances.push(i),n.hasAttribute("smart-blazor")?n.$.fireEvent("open",{instance:i.id||""}):n.$.fireEvent("open",{instance:i}),setTimeout(function(){i.opened=!0},10),n.autoClose&&(i._autoCloseTimeout=setTimeout(function(){n._close(i)},n.autoCloseDelay)),i}_containerClickHandler(e){const t=this,n=e.target.shadowRoot?e.composedPath()[0]:e.target,i=n.closest(".smart-toast-item-close-button"),a=(n.getRootNode().host||n).closest("smart-toast-item");n.closest('[data-dismiss="toast"]')&&(t.opened=!1,t._close(a)),i||a?(t.hasAttribute("smart-blazor")?t.$.fireEvent("itemClick",{instance:a.id||"",target:n.id||""}):t.$.fireEvent("itemClick",{instance:a,target:n}),i&&t._close(a)):t.modal&&t.closeAll()}_close(e){const t=this;function n(){clearTimeout(e._autoCloseTimeout),t.hasAttribute("smart-blazor")?t.$.fireEvent("close",{instance:e.id||""}):t.$.fireEvent("close",{instance:e}),e.parentNode&&e.parentNode.removeChild(e);const i=e._parent;i&&!i.children.length&&i.parentElement&&(t._removeContainerListeners(i),i.parentElement.removeChild(i))}if(t._instances.indexOf(e)>-1){const i=window.getComputedStyle(e,null).getPropertyValue("transition-duration");let a=i.indexOf("ms")>-1?parseInt(i):1e3*parseFloat(i);isNaN(a)&&(a=0),e.opened=!1,t._instances.splice(t._instances.indexOf(e),1),a?setTimeout(n,a):n()}}_handleContainers(){const e=this;let t;if("string"==typeof e.appendTo?t=document.getElementById(e.appendTo):e.appendTo instanceof HTMLElement&&(t=e.appendTo),e._container=e._getToastContainer(t),t)return e._appendTo=t,void(e._container.parentElement||(e._addContainerListeners(e._container),e._appendTo.appendChild(e._container)));t||!e.$.toastContainerCustom||e.$.toastContainerCustom.children.length||(e._removeContainerListeners(e.$.toastContainerCustom),e.$.toastContainerCustom.parentElement&&e.$.toastContainerCustom.parentElement.removeChild(e.$.toastContainerCustom)),e._container.parentElement||(e._addContainerListeners(e._container),e.getShadowRootOrBody().appendChild(e._container))}_addContainerListeners(e){const t=this;if(!e)return;const n=t["$"+e.getAttribute("smart-id")];n&&(n.listen("click",t._containerClickHandler.bind(t)),n.listen("swipeleft",t._swipeHandler.bind(t)),n.listen("swiperight",t._swipeHandler.bind(t)),n.listen("swipetop",t._swipeHandler.bind(t)),n.listen("swipebottom",t._swipeHandler.bind(t)))}_removeContainerListeners(e){if(!e)return;const t=this["$"+e.getAttribute("smart-id")];t&&(t.unlisten("click"),t.unlisten("swipeleft"),t.unlisten("swiperight"),t.unlisten("swipetop"),t.unlisten("swipebottom"))}_getToastContainer(e){const t=this;let n;e?n="Custom":t.modal?n="Modal":(n=Smart.Utilities.Core.toCamelCase(t.position),n=n.charAt(0).toUpperCase()+n.slice(1));const i="toastContainer"+n;if(!t.$[i]){let a=document.createElement("div");a.setAttribute("smart-id",i),a.classList.add("smart-toast-container"),a.classList.add("smart-toast-container-"+Smart.Utilities.Core.toDash(n)),t.$["toastContainer"+n]=a,t["$toastContainer"+n]=Smart.Utilities.Extend(a)}return t.$[i]}_handleItemTemplate(e){const t=this;let n=t.itemTemplate;if("content"in document.createElement("template")){if(e||(e=t.value),!n)return e;if(n=document.getElementById(n),null!==n&&"content"in n)return n.innerHTML.replace(/{{\w+}}/g,e);t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"template"}))}else t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}))}_swipeHandler(e){const t=this,n=e.originalEvent.target.closest("smart-toast-item");e.stopPropagation(),n&&(t.hasAttribute("smart-blazor")?t.$.fireEvent(e.type,{instance:n.id||""}):t.$.fireEvent(e.type,{instance:n}))}})},6693:()=>{Smart("smart-tooltip",class extends Smart.ContentElement{static get properties(){return{arrow:{value:!1,type:"boolean"},arrowDirection:{allowedValues:["bottom","top","left","right"],value:"bottom",type:"string"},align:{allowedValues:["left","center","right"],value:"center",type:"string"},delay:{value:0,type:"number"},messages:{extend:!0,value:{en:{invalidSelector:'{{elementType}}: "{{property}}" must be a String, an HTMLElement or null.',htmlTemplateNotSuported:"{{elementType}}: Browser doesn't support HTMLTemplate elements.",invalidTemplate:'{{elementType}}: "{{property}}" property accepts a string that must match the id of an HTMLTemplate element from the DOM.',invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},iframeRect:{value:null,type:"object?"},offset:{value:[],type:"array"},openMode:{allowedValues:["click","focus","hover","manual"],value:"hover",type:"string"},position:{allowedValues:["bottom","top","left","right","absolute","auto"],value:"top",type:"string"},selector:{value:null,type:"any?"},tooltipTemplate:{value:null,type:"any"},value:{value:"",type:"string",reflectToAttribute:!1},visible:{value:!1,type:"boolean"}}}static get styleUrls(){return["smart.tooltip.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="content" class="smart-tooltip-content" inner-h-t-m-l="[[innerHTML]]" role="presentation">\n                        <content></content>\n                    </div>\n                </div>'}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const i=this;let a;switch(e){case"align":i._applyPosition(n);break;case"openMode":i.close(),i._handleEventListeners(t),i._handleResize();break;case"selector":i._oldOwnerElement=i._ownerElement,i._handleSelector(n,t),i._handleEventListeners();break;case"tooltipTemplate":i._handleTemplate(t);break;case"value":i.tooltipTemplate?i._handleTemplate():i.$.content.innerHTML=i.value;break;case"visible":a=n?"open":"close",i.$.fireEvent(a,{owner:i._ownerElement},i.isInShadowDOM?{composed:!0,bubbles:!0,cancelable:!0}:void 0);break;case"position":return void i._applyPosition(t)}i._applyPosition()}ready(){super.ready()}render(){const e=this;super.render(),e.getAttribute("role")||e.setAttribute("role","tooltip"),e._isParentPositionStatic="static"===window.getComputedStyle(e.parentElement||document.querySelector("body")).position,e._handleSelector(e.selector),e.visible&&e._applyPosition(),e._handleEventListeners(),e._handleResize(),e.value=e.$.content.innerHTML=e.value?e.value:e.innerHTML,e._handleTemplate()}appendChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(t.$.content.appendChild(e),t._applyPosition()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}close(){const e=this;if(e._isOpening&&clearTimeout(e._isOpening),!e.visible)return;const t=e.isInShadowDOM?{composed:!0,bubbles:!0,cancelable:!0}:void 0;e.$.fireEvent("closing",{owner:e._ownerElement},t).defaultPrevented||(e.$.fireEvent("close",{owner:e._ownerElement},t),e.visible=!1)}clear(){const e=this.$.content;if(e)for(;e.childNodes.length;)e.removeChild(e.firstChild)}insertBefore(e,t){const n=this;if(!n.isCompleted){const i=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,i.concat(Array.prototype.slice.call(arguments)))}e&&t?(n.$.content.insertBefore(e,t),n._applyPosition()):n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}open(){const e=this;e.disabled||e.readonly||e.visible||(clearTimeout(e._isOpening),e._isOpening=setTimeout(function(){const t=e.isInShadowDOM?{composed:!0,bubbles:!0,cancelable:!0}:void 0;if(e.$.fireEvent("opening",{owner:e._ownerElement},t).defaultPrevented)return void clearTimeout(e._isOpening);e._applyPosition(),e.$.fireEvent("open",{owner:e._ownerElement},t);const n=e.context;e.context=e,e.visible=!0,e.context=n},e.delay))}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(t.$.content.removeChild(e),t._applyPosition()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}reposition(){this.isRendered&&this._applyPosition()}toggle(){const e=this;e.visible?e.close():e.open()}_getDomElementPosition(e){let t=[],n=e.parentElement;for(;n&&"BODY"!==n.nodeName;)t.push(n),n=!this.enableShadowDOM||n.parentElement?n.parentElement:n.getRootNode().host;return t}_getElementAndOwnerRelation(e){const t=this._getDomElementPosition(e||this),n=t.length;let i=null;for(let a=0;a<n;a++)if("static"!==window.getComputedStyle(t[a]).getPropertyValue("position")){i=t[a];break}return i}_applyPosition(e){const t=this;if(!t._ownerElement||!t.parentElement)return;t._isParentPositionStatic="static"===window.getComputedStyle(t.parentElement).position;const n=t._ownerElement.getBoundingClientRect(),i=t.parentElement?t.parentElement.getBoundingClientRect():{top:0,left:0};let a,r;t.parentElement&&"BODY"===t.parentElement.nodeName.toUpperCase()?(a=n.top+window.scrollY,r=n.left+window.scrollX):(a=n.top-i.top,r=n.left-i.left);const o=t.position,s=t.iframeRect;let l,d={top:n.top,left:n.left,right:n.right,width:n.width,height:n.height,nonStaticParent:t._getElementAndOwnerRelation()};switch(s&&(d.top+=s.top,d.left+=s.left,d.right+=s.right),o){case"auto":case"bottom":case"top":case"left":case"right":{t.style.left="";const u=t["_position"+o.charAt(0).toUpperCase()+o.slice(1)](r,a,d);a=u.top,r=u.left,l=u.translate;break}case"absolute":e?(t.style.top=t.style.left="",a=r=0):(a=parseFloat(t.style.top),r=parseFloat(t.style.left))}const c=t.getAttribute("arrow-direction");l?t.$.container.style.setProperty("--smart-tooltip-arrow-translate",l+"px"):t.$.container.style.removeProperty("--smart-tooltip-arrow-translate"),void 0===a||isNaN(a)||(a+=("auto"===o&&"top"===c?-1:1)*parseInt(t.offset[1])||0,t.style.top=a+"px"),void 0===r||isNaN(r)||(r+=("auto"===o&&"left"===c?-1:1)*parseInt(t.offset[0])||0,t.style.left=r+"px")}_positionAuto(e,t,n){const i=this;let a,r,o=i.parentElement;for(;o;){if("hidden"===getComputedStyle(o).getPropertyValue("overflow")){a=o;break}o=o.parentElement}if(a)r=a.getBoundingClientRect();else{const w=document.scrollingElement;let v,S;document.scrollingElement?(v=w.offsetWidth,S=w.offsetHeight):(v=window.innerWidth,S=window.innerHeight),a=document.body,r={width:v,height:S,left:0,top:0,right:v,bottom:S}}const s=parseFloat(window.getComputedStyle(i).getPropertyValue("--smart-tooltip-arrow-width"))||0;let l=i._positionTop(e,t,n),d=n.nonStaticParent,c=i.offsetWidth/2-s,u=0,m=0,y=l.left,b=r.right-(y+m+i.offsetWidth),f=Math.min(0,b);if(y<=0&&b>0&&(y=Math.min(e,y+b)),f<=0&&(f=Math.sign(f)*(Math.abs(f)+r.right-(e+n.width))),d){const w=d.getBoundingClientRect();u=w.top,m=w.left}return l.top+u>=r.top?(y<=0&&(y=e),t=l.top,{left:e=Math.max(r.left-m,y+f),top:t,translate:Math.max(-c,Math.min(c,l.left-e))}):(l=i._positionBottom(e,t,n),l.top+i.offsetHeight+u<=r.bottom?(y=l.left,y<=0&&(y=e),t=l.top,{left:e=Math.max(r.left-m,y+f),top:t,translate:Math.max(-c,Math.min(c,l.left-e))}):(l=i._positionLeft(e,t,n),t=l.top,c=i.offsetHeight/2-s,t=Math.max(r.top-u,l.top+Math.min(0,r.bottom-(l.top+u+i.offsetHeight))),l.left+m>=r.left?e=l.left:(l=i._positionRight(e,t,n),e=l.left+i.offsetWidth+m<=r.right?l.left:r.right-i.offsetWidth),{left:e,top:t,translate:Math.max(-c,Math.min(c,l.top-t))}))}_getRelativeParentOffset(e){const t=this;let i=t._getElementAndOwnerRelation(t._ownerElement),a=0,r=0;if(!e)return{left:r,top:a};for(;e&&i&&e!==i;)a+=i.offsetTop,r+=i.offsetLeft,i=t._getElementAndOwnerRelation(i);return{left:r,top:a}}_positionTop(e,t,n){const i=this,a=i._getRelativeParentOffset(n.nonStaticParent);if(i.set("arrowDirection","bottom"),null===n.nonStaticParent)return t=n.top+window.scrollY-i.offsetHeight,{left:(e=i._getAlignmentOffset(n.left,i.offsetWidth,n.width)+window.scrollX)+a.left,top:t+a.top};if(i._isParentPositionStatic){if(t=i._ownerElement.offsetTop-i.offsetHeight,e=i._getAlignmentOffset(i._ownerElement.offsetLeft,i.offsetWidth,n.width),i._ownerElement instanceof SVGElement){const r=i._ownerElement.getBoundingClientRect(),o=i._ownerElement.parentNode.getBoundingClientRect();t=r.top-o.top-i.offsetHeight/2,e=i._getAlignmentOffset(r.left,i.offsetWidth,o.left)}return{left:e+a.left,top:t+a.top}}if(i._ownerElement instanceof SVGElement&&i._ownerElement.parentElement){const r=i._ownerElement.getBoundingClientRect(),o=i._ownerElement.parentNode.getBoundingClientRect();return t=r.top-o.top-i.offsetHeight,{left:(e=i._getAlignmentOffset(r.left-o.left,i.offsetWidth,r.width))+a.left,top:t+a.top}}return t-=i.offsetHeight,{left:(e=i._getAlignmentOffset(e,i.offsetWidth,n.width))+a.left,top:t+a.top}}_positionBottom(e,t,n){const i=this,a=i._getRelativeParentOffset(n.nonStaticParent);return i.set("arrowDirection","top"),null===n.nonStaticParent?(t=n.top+window.scrollY+n.height,{left:(e=i._getAlignmentOffset(n.left,i.offsetWidth,n.width)+window.scrollX)+a.left,top:t+a.top}):i._isParentPositionStatic?(t=i._ownerElement.offsetTop+n.height,{left:(e=i._getAlignmentOffset(i._ownerElement.offsetLeft,i.offsetWidth,n.width))+a.left,top:t+a.top}):(t+=n.height,{left:(e=i._getAlignmentOffset(e,i.offsetWidth,n.width))+a.left,top:t+a.top})}_getAlignmentOffset(e,t,n){switch(this.align){case"left":return e;case"right":return e-t+n;default:return e-t/2+n/2}}_positionLeft(e,t,n){const i=this,a=i._getRelativeParentOffset(n.nonStaticParent);return i.set("arrowDirection","right"),null===n.nonStaticParent?(t=n.top+window.scrollY+n.height/2-i.$.content.offsetHeight/2,{left:(e=n.left+window.scrollX-i.offsetWidth)+a.left,top:t+a.top}):i._isParentPositionStatic?{left:(e=i._ownerElement.offsetLeft-i.offsetWidth)+a.left,top:(t=i._ownerElement.offsetTop+n.height/2-i.$.content.offsetHeight/2)+a.top}:{left:(e-=i.offsetWidth)+a.left,top:(t=t+n.height/2-i.$.content.offsetHeight/2)+a.top}}_positionRight(e,t,n){const i=this,a=i._getRelativeParentOffset(n.nonStaticParent);return i.set("arrowDirection","left"),null===n.nonStaticParent?(t=n.top+window.scrollY+n.height/2-i.$.content.offsetHeight/2,{left:(e=n.left+window.scrollX+n.width)+a.left,top:t+a.top}):i._isParentPositionStatic?{left:(e=i._ownerElement.offsetLeft+n.width)+a.left,top:(t=i._ownerElement.offsetTop+n.height/2-i.$.content.offsetHeight/2)+a.top}:{left:(e+=n.width)+a.left,top:(t=t+n.height/2-i.$.content.offsetHeight/2)+a.top}}_eventsHandler(e){const t=this;t.disabled||t.readonly||("click"!==e.type?"mouseenter"===e.type||"focus"===e.type?this.open():this.close():t.visible?this.close():this.open())}_handleEventListeners(e){const t=this;if(t._oldOwnerElement&&"manual"!==t.openMode){let n=t._oldOwnerElement.getAttribute("aria-describedby");n&&"tooltip"===t.getAttribute("role")&&(n===t.id?t._oldOwnerElement.removeAttribute("aria-describedby"):(n=n.replace(" "+t.id,""),n=n.replace(t.id+" ",""),t._oldOwnerElement.setAttribute("aria-describedby",n))),t._oldOwnerElement.$.unlisten("mouseenter.tooltip"),t._oldOwnerElement.$.unlisten("mouseleave.tooltip"),t._oldOwnerElement.$.unlisten("focus.tooltip"),t._oldOwnerElement.$.unlisten("blur.tooltip"),t._oldOwnerElement.$.unlisten("click.tooltip"),t._oldOwnerElement=null}if(t._ownerElement){if(e)switch(e){case"hover":t._ownerElement.$.unlisten("mouseenter.tooltip"),t._ownerElement.$.unlisten("mouseleave.tooltip");break;case"focus":t._ownerElement.$.unlisten("focus.tooltip"),t._ownerElement.$.unlisten("blur.tooltip");break;case"click":t._ownerElement.$.unlisten("click.tooltip")}if("manual"!==t.openMode)switch(t._ownerElement instanceof Smart.BaseElement||(t._ownerElement.$=Smart.Utilities.Extend(t._ownerElement)),t.openMode){case"hover":t._ownerElement.$.listen("mouseenter.tooltip",t._eventsHandler.bind(t)),t._ownerElement.$.listen("mouseleave.tooltip",t._eventsHandler.bind(t));break;case"focus":t._ownerElement.$.listen("focus.tooltip",t._eventsHandler.bind(t)),t._ownerElement.$.listen("blur.tooltip",t._eventsHandler.bind(t));break;case"click":t._ownerElement.$.listen("click.tooltip",t._eventsHandler.bind(t))}}}_handleResize(){const e=this;function t(){e._applyPosition()}"click"===e.openMode?window.addEventListener("resize",t):window.removeEventListener("resize",t)}_handleSelector(e,t){const n=this;if(t&&t.removeAttribute&&t.removeAttribute("aria-describedby"),"string"==typeof e)n._ownerElement=e.length>0?document.getElementById(e):void 0;else if(e&&e.nodeType===Node.ELEMENT_NODE)n._ownerElement=e;else{if(null===e)return void(n._ownerElement=void 0);n.error(n.localize("invalidSelector",{elementType:n.nodeName.toLowerCase(),property:"selector"}))}if(!n._ownerElement||"tooltip"!==n.getAttribute("role")||!n.value)return;const i=n._ownerElement?n._ownerElement.getAttribute("aria-describedby"):null;i?i.indexOf(n.id)<0&&n._ownerElement.setAttribute("aria-describedby",i+" "+n.id):n._ownerElement.setAttribute("aria-describedby",n.id)}_handleTemplate(e){const t=this;let n=t.tooltipTemplate;if(e&&(t.$.content.innerHTML=t.value?t.value:""),null===n||!n)return;if("function"==typeof t.tooltipTemplate)return void t.tooltipTemplate(t.$.content,{value:t.value});if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(n=document.getElementById(n),null===n||!("content"in n))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"template"}));const i=n.content,a=i.childNodes.length,r=/{{\w+}}/g;let o,s=[];for(let m=0;m<a;m++)for(o=r.exec(i.childNodes[m].innerHTML);o;)s.push({childNodeIndex:m,bindingString:o[0]}),o=r.exec(i.childNodes[m].innerHTML);const l=s.length;let d,c,u=document.importNode(n.content,!0);for(let m=0;m<l;m++){d=u.childNodes[s[m].childNodeIndex],c=s.length;for(let y=0;y<c;y++)d.innerHTML=d.innerHTML.replace(s[m].bindingString,t.value)}t.$.content.innerHTML="";for(let m=0;m<u.childNodes.length;m++)u.childNodes[m].outerHTML&&(t.$.content.innerHTML+=u.childNodes[m].outerHTML)}}),function(){const e=()=>{const t=document.querySelectorAll('[data-toggle="tooltip"');if(t.length>0)for(let n=0;n<t.length;n++){if(!t[n].hasAttribute("data-title"))continue;const i=document.createElement("smart-tooltip");i.selector=t[n],i.innerHTML=t[n].getAttribute("data-title"),document.body.appendChild(i),t[n].hasAttribute("data-placement")&&(i.position=t[n].getAttribute("data-placement"))}};"complete"===document.readyState?e():(window.removeEventListener("load",e),window.addEventListener("load",e))}()},8466:()=>{Smart("smart-window",class extends Smart.ContentElement{static get properties(){return{collapsed:{value:!1,type:"boolean"},closeOnMaskClick:{value:!1,type:"boolean"},disableEscape:{value:!1,type:"boolean"},disableSnap:{value:!1,type:"boolean"},footerPosition:{value:"bottom",allowedValues:["bottom","none"],type:"string"},footerTemplate:{value:null,type:"any"},headerButtons:{value:["close","maximize","minimize"],type:"array"},headerPosition:{value:"top",allowedValues:["top","bottom","left","right","none"],type:"string"},headerTemplate:{value:null,type:"any"},disableKeyboard:{value:!1,type:"boolean"},label:{value:"",type:"string"},liveResize:{value:!1,type:"boolean"},maximized:{value:!1,type:"boolean"},modal:{value:!1,type:"boolean"},minimized:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},pinned:{value:!1,type:"boolean"},resizeIndicator:{value:!1,type:"boolean"},resizeMode:{allowedValues:["none","horizontal","vertical","both","top","bottom","left","right"],value:"none",type:"string"},windowParent:{value:null,type:"any"}}}static get listeners(){return{"document.dragstart":"_dragStartHandler","document.focusin":"_documentFocusInEventHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.wheel":"_mouseWheelHandler","document.selectstart":"_documentSelectStartHandler",down:"_downHandler",focus:"_focusHandler",blur:"_focusHandler",move:"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler"}}get hasStyleObserver(){return!1}static get styleUrls(){return["smart.button.css","smart.window.css"]}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header" role="presentation">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container" role="presentation">\n                                <button id="pinButton" class="smart-button smart-element smart-pin-button" aria-label="Pin"></button>\n                                <button id="collapseButton" class="smart-button smart-element smart-collapse-button" aria-label="Collapse"></button>\n                                <button id="minimizeButton" class="smart-button smart-element smart-minimize-button"aria-label="Minimize"></button>\n                                <button id="maximizeButton" class="smart-button smart-element smart-maximize-button" aria-label="Maximize"></button>\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content" inner-h-t-m-l="[[innerHTML]]"><content></content></div>\n                        <div id="footer" class="smart-footer"></div>\n                    </div>\n                </div>'}propertyChangedHandler(e,t,n){const i=this;switch(e){case"collapsed":n?i.collapse(!0):i.expand(!0);break;case"disabled":case"unfocusable":i._setFocusable();break;case"headerTemplate":case"footerTemplate":i._applyLayoutTemplate(i.$[e.split(/[T]/)[0]],n);break;case"headerButtons":i._setHeaderButtons();break;case"headerPosition":{const a=i.minimized;i._preventEventFiring=!0,i.restore(),delete i._preventEventFiring,a&&i.minimize();break}case"label":i.$.header.innerHTML=i.label;break;case"maximized":n?i.maximize(!0):i.restore(e);break;case"modal":i._setModal(),i.setAttribute("aria-modal",n);break;case"minimized":n?i.minimize(!0):i.restore(e);break;case"opened":n?i.open(!0):i.close(!0);break;case"resizeMode":i.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right");break;case"windowParent":i._setElementParent(n);break;default:super.propertyChangedHandler(e,t,n)}}ready(){super.ready(),this._windowParent={initialParent:this.parentElement}}render(){const e=this,t=e.animation;e.$.header.id||(e.$.header.id=e.id+"Header"),e.$.content.id||(e.$.content.id=e.id+"Content"),e.opened||(e.animation="none"),e._windowParent={initialParent:e.parentElement},e.$.addClass("smart-window"),e._createElement(),e._setElementParent(e.windowParent),e._setHeaderButtons(),e.headerTemplate&&e._applyLayoutTemplate(e.$.header,e.headerTemplate),e.footerTemplate&&e._applyLayoutTemplate(e.$.footer,e.footerTemplate),e.opened?e.open():e.close(),e.maximized&&e.maximize(!0),e.minimized&&e.minimize(!0),e.collapsed&&e.collapse(!0),e.pinned?e.pin():e.unpin(),e._setFocusable(),e.animation=t,e.setAttribute("aria-modal",e.modal),e.setAttribute("aria-labelledby",e.$.header.id),e._setupDismissTargets(),super.render()}refresh(){const e=this;e.headerTemplate&&e._applyLayoutTemplate(e.$.header,e.headerTemplate),e.footerTemplate&&e._applyLayoutTemplate(e.$.footer,e.footerTemplate),e.opened?e.open():e.close(),e.maximized&&e.maximize(!0),e.minimized&&e.minimize(!0),e.collapsed&&e.collapse(!0),e.pinned?e.pin():e.unpin()}static get requires(){return{"Smart.Button":"smart.button.js"}}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.removeAttribute("tabindex"):e.setAttribute("tabindex",e.tabIndex>0?e.tabIndex:0)}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?t.$.content.appendChild(e):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}updateLabel(e){this.label=e}updateContent(e){this.content=e}move(e,t){const i=a=>"number"==typeof a?a+"px":"string"==typeof a?a:void 0;void 0!==e&&(this.style.left=i(e)),void 0!==t&&(this.style.top=i(t))}collapse(e){const t=this;!e&&t.collapsed||(t.collapsed=!0,t.$.fireEvent("collapse"),"left"===t.headerPosition||"right"===t.headerPosition?t.style.width="":t.style.height="")}close(e){const t=this;if(e||!t.$.hasClass("smart-visibility-hidden")){if(t.isCompleted){if(t.$.fireEvent("closing").defaultPrevented)return;t.$.addClass("smart-visibility-hidden"),t.opened=!1,t.isRendered&&t.$.fireEvent("close")}else t.$.addClass("smart-visibility-hidden"),t.opened=!1;t._setModal(),t.removeAttribute("ontop")}}attached(){super.attached();const e=this;e._windowParent.parent&&e._windowParent.parent!==e.getShadowRootOrBody()&&e._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&"static"===window.getComputedStyle(e._windowParent.parent).getPropertyValue("position")&&(e._windowParent.parent.style.position="relative"),e.opened&&e._modal&&e.parentElement.insertBefore(e._modal,e)}bringToFront(){const e=this;if(!e.parentElement)return;const t=e.parentElement.closest(".smart-window");if(t)return void t.bringToFront();const n=document.body.getElementsByClassName("smart-window");let i=[];for(let a=0;a<n.length;a++){const r=n[a];r.removeAttribute("ontop"),r.opened&&i.push(r)}1===i.length&&i[0]===e||e.setAttribute("ontop","")}clear(){const e=this;e.isCompleted&&"Smart-WINDOW"===e.nodeName&&(e.innerHTML=e.$.content.innerHTML="")}detached(){super.detached();const e=this;e._windowParent.parent&&!e._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(e._windowParent.parent.style.position=""),e._modal&&e._modal.parentElement&&e._modal.parentElement.removeChild(e._modal),e._resizeDummy&&e._resizeDummy.parentElement&&e._handleWindowResizeDummy(),e._refreshMinimizedWindowsPosition()}expand(e){const t=this;(e||t.collapsed)&&(t.collapsed=!1,t.$.fireEvent("expand"),t.maximized?"left"===t.headerPosition||"right"===t.headerPosition?t.style.width=Math.max(t._windowParent.scrollElement.scrollWidth,t._windowParent.element.clientWidth)-t._windowParent.borderWidth+"px":t.style.height=Math.max(t._windowParent.scrollElement.scrollHeight,t._windowParent.element.clientHeight)-t._windowParent.borderWidth+"px":"left"===t.headerPosition||"right"===t.headerPosition?t.style.width=t.className.indexOf("smart-window-snapped-")<0&&t._dragDetails?t._dragDetails.width+"px":"":t.style.height=t.className.indexOf("smart-window-snapped-")<0&&t._dragDetails?t._dragDetails.height+"px":"")}maximize(e){const t=this;if(!e&&t.maximized)return;t.minimized&&t._restoreFromMinimization(e),t._setDragDetails("minimize"),"none"!==t.resizeMode&&t.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right"),t._snapDummy&&t.$.hasClass("smart-window-snapped-"+t._snapDummy._position)&&t.classList.remove("smart-window-snapped-"+t._snapDummy._position),t.maximized=!0,t.$.fireEvent("maximize"),t.style.left=t.style.top=0,t.style.maxWidth=t.style.maxHeight="none";const n=t._windowParent.scrollElement.scrollHeight,i=t._windowParent.scrollElement.scrollWidth,a=t._windowParent.element.clientHeight,r=t._windowParent.element.clientWidth,o=Math.max(n,a),s=Math.max(i,r);"top"===t.headerPosition||"bottom"===t.headerPosition?(t.style.width=i>r?s-t._windowParent.borderWidth+"px":"100%",t.collapsed||(t.style.height=n>a?o-t._windowParent.borderWidth+"px":"100%")):(t.collapsed||(t.style.width=i>r?s-t._windowParent.borderWidth+"px":"100%"),t.style.height=n>a?o-t._windowParent.borderWidth+"px":"100%"),"100%"!==t.style.height&&t.addEventListener("transitionend",function l(){if(!t.maximized||!t.hasAnimation)return;const d=t._windowParent.scrollElement.scrollHeight,c=t._windowParent.element.clientHeight,u=Math.max(d,c);("top"===t.headerPosition||"bottom"===t.headerPosition)&&t.collapsed||(t.style.height=d>c?u-t._windowParent.borderWidth+"px":"100%"),t.removeEventListener("transitionend",l)})}minimize(e){const t=this;if(!e&&t.minimized)return;t.maximized&&(t._preventEventFiring=!0,t.restore(),delete t._preventEventFiring),t._setDragDetails(),t.minimized=!0,t.$.fireEvent("minimize"),t._snapDummy&&t.$.hasClass("smart-window-snapped-"+t._snapDummy._position)&&(t.$.removeClass("smart-window-snapped-"+t._snapDummy._position),t.style.right=t.style.top=t.style.left="");const n=t._getAllMinimizedWindows(t._windowParent.element);if(n.length>0){const i=n[n.length-1];t.style.left=(i.offsetLeft+i.offsetWidth+t._dragDetails.minWidth+10>t._windowParent.element.clientWidth?i.offsetLeft:i.offsetLeft+i.offsetWidth+5)+"px",t.style.top=i.offsetTop+"px"}else t.style.left="5px",t.style.top=t._windowParent.element.clientHeight+t._windowParent.scrollElement.scrollTop-t.$.headerSection.offsetHeight-5+"px";t.style.width="",t.style.height=t.$.headerSection.offsetHeight+"px"}_createElement(){this.setAttribute("role","dialog")}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?t.$.content.removeChild(e):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}restore(e){const t=this;if("maximized"===e||t.maximized?(t.maximized=!1,t.style.width=t.style.height=t.style.top=t.style.left=""):("minimized"===e||t.minimized)&&t._restoreFromMinimization(e),t._preventEventFiring||t.$.fireEvent("restore"),t.style.maxWidth=t.style.maxHeight="",t._dragDetails){if(t.style.left=Math.max(0,Math.min(t._dragDetails.windowX,t._windowParent.element.clientWidth-t._dragDetails.width))+"px",t.style.top=Math.max(0,Math.min(t._dragDetails.windowY,t._windowParent.scrollElement.scrollHeight-t._dragDetails.height))+"px",t.collapsed)return void("top"===t.headerPosition||"bottom"===t.headerPosition?t.style.width=t._dragDetails.width+"px":t.style.height=t._dragDetails.height+"px");t._dragDetails.resized&&(t.style.width=t._dragDetails.width+"px",t.style.height=t._dragDetails.height+"px")}}toggle(){const e=this;e.opened?e.close():e.open()}openModal(){this.modal=!0,this.open()}open(e){const t=this;if(e||t.$.hasClass("smart-visibility-hidden")){if(t.isCompleted){if(t.$.fireEvent("opening").defaultPrevented)return;t.$.removeClass("smart-visibility-hidden"),t.opened=!0,t.$.fireEvent("open")}else t.$.removeClass("smart-visibility-hidden"),t.opened=!0;t.bringToFront(),t._setModal(),t._handleActiveState(),t.hasAnimation?t.addEventListener("transitionend",n):n()}function n(i){if(!t.hasAnimation||i&&i.target===t){if(t.removeEventListener("transitionend",n),t._onOpenCallback)return void t._onOpenCallback();t.focus()}}}_setupDismissTargets(){const e=this;if(e.querySelector('[data-dismiss="modal"]')){const t=e.querySelectorAll('[data-dismiss="modal"]'),n=()=>{e.close()};for(let i=0;i<t.length;i++)t[i].removeEventListener("click",n,null),t[i].addEventListener("click",n)}}pin(){this.pinned=!0}unpin(){this.pinned=!1}_applyLayoutTemplate(e,t){const n=this;if(!t)return e.innerHTML="",void(e===n.$.header&&n.label&&(e.innerHTML=n.label));"content"in document.createElement("template")?(t instanceof HTMLTemplateElement||(t=document.getElementById(t)),null!==t&&"content"in t?(e.innerHTML="",e.appendChild(document.importNode(t.content,!0))):n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:e===n.$.footer?"footerTemplate":"headerTemplate"}))):n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}))}_cancelDragging(e){const t=this;if(t._dragDetails&&t._dragDetails.started&&"drag"===t._dragDetails.type){if(!e){const n=t.getBoundingClientRect();e={pageX:n.left,pageY:n.top}}t.$.fireEvent("dragEnd",{left:e.pageX,top:e.pageY}),t.removeAttribute("dragged"),t._dragDetails.started=!1,delete t._mouseManipulation}}_documentFocusInEventHandler(e){const t=this;t._changingFocus&&(t.contains(e.target)||t.contains(e.composedPath()[0])||t.focus(),delete t._changingFocus)}_downHandler(e){const t=this;let n=Smart.Utilities.Core.isMobile?document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset):e.originalEvent.target;if((t.shadowRoot||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0]),e.stopPropagation(),t.disabled||!Smart.Utilities.Core.isMobile&&1!==e.which)return;if(t._tabsWindow&&(t._tabsWindow._isAutoHideWindowClicked=!0),t.hasAttribute("ontop")||t.bringToFront(),n.closest&&n.closest(".smart-buttons-container")===t.$.buttonsContainer){if(t._buttonPressed=n.closest(".smart-button"),t._buttonPressed)return}else if(n.getRootNode()&&n.getRootNode().host&&(t._buttonPressed=n.getRootNode().host,t._buttonPressed.closest(".smart-buttons-container")===t.$.buttonsContainer))return;t._isWindowContentClicked=n.closest(".smart-content");let i=t.closest("smart-docking-layout");if(t.isInShadowDOM&&!i){let a=t.getRootNode().host;for(;a&&(i=a.closest("smart-docking-layout"),!i)&&a.getRootNode();)a=a.getRootNode().host}if(!(t instanceof Smart.TabsWindow&&i&&i.disabled)){if(t._handleActiveState(),!(t instanceof Smart.TabsWindow&&i))return n.closest(".smart-header-section")===t.$.headerSection&&(void 0===t._dblClickDetails&&(t._dblClickDetails={clicks:0}),clearTimeout(t._dblClickDetails.timeOut),t._dblClickDetails.clicks++,t._dblClickDetails.timeOut=setTimeout(function(){t._dblClickDetails&&(t._dblClickDetails.clicks=0)},300),2===t._dblClickDetails.clicks)?(t._headerDblCickHandler(e),void(t._dblClickDetails.clicks=0)):void(t.maximized||(Smart.Utilities.Core.isMobile&&t._moveHandler(e),!t.pinned&&!t.minimized&&t.$.container.className.indexOf("smart-window-resizing")<0&&(n=n.closest(".smart-header-section"),n&&n===t.$.headerSection&&(t._mouseManipulation=!0,t._setDragDetails("drag",e))),"none"!==t.resizeMode&&t.$.container.className.indexOf("smart-window-resizing")>-1&&(t._mouseManipulation=!0,t._setDragDetails("resize",e))));t.$.hasClass("smart-docking-layout-auto-hide-window")&&(Smart.Utilities.Core.isMobile&&t._moveHandler(e),"none"!==t.resizeMode&&t.$.container.className.indexOf("smart-window-resizing")>-1&&(t._mouseManipulation=!0,t._setDragDetails("resize",e)))}}_documentMoveHandler(e){const t=this;!t._dragDetails||!t._dragDetails.started||t.minimized||!t._mouseManipulation||Math.abs(e.pageX-t._dragDetails.x)<=5&&Math.abs(e.pageY-t._dragDetails.y)<=5||(t.hasAttribute("dragged")||t.hasAttribute("resized")||t.$.fireEvent(t._dragDetails.type+"Start",{left:e.pageX,top:e.pageY,width:t.offsetWidth,height:t.offsetHeight}),e.stopPropagation(),"drag"!==t._dragDetails.type||t.pinned?(t._dragDetails.resized=!0,t._resize(t._dragDetails.side,e),t._dragDetails.x=Math.max(t._windowParent.offsetLeft+t._dragDetails.left,Math.min(t._windowParent.offsetLeft+t._dragDetails.left+(t._dragDetails.side.toLowerCase().indexOf("left")>-1?0:t._dragDetails.newWidth),e.pageX)),t._dragDetails.y=Math.max(t._windowParent.offsetTop+t._dragDetails.top,Math.min(t._windowParent.offsetTop+t._dragDetails.top+(t._dragDetails.side.toLowerCase().indexOf("top")>-1?0:t._dragDetails.newHeight),e.pageY))):(t.setAttribute("dragged",""),t._snapDummy&&t.$.hasClass("smart-window-snapped-"+t._snapDummy._position)&&(t.$.removeClass("smart-window-snapped-"+t._snapDummy._position),t.style.right=t.style.top=t.style.left="",t.collapsed||(t.style.height=t._dragDetails.height+"px",t.style.width=t._dragDetails.width+"px")),t._drag(e,"both"),t._dragDetails.x=Math.max(t._windowParent.offsetLeft+t._dragDetails.offsetX-t._windowParent.scrollElement.scrollLeft,Math.min(t._windowParent.offsetLeft+t._windowParent.element.offsetWidth-(t._windowParent.element.offsetWidth-t.offsetLeft)+t._dragDetails.offsetX,e.pageX)),t._dragDetails.y=Math.max(t._windowParent.offsetTop+t._dragDetails.offsetY-t._windowParent.scrollElement.scrollTop,Math.min(t._windowParent.offsetTop+t._windowParent.element.offsetHeight-(t._windowParent.element.offsetHeight-t.offsetTop)+t._dragDetails.offsetY,e.pageY)),e.pageX>=t._windowParent.offsetLeft+t._windowParent.scrollElement.scrollWidth-1?t._handleSnapping("right"):e.pageY<=t._windowParent.offsetTop?t._handleSnapping("top"):e.pageX<=t._windowParent.offsetLeft?t._handleSnapping("left"):t._handleSnapping()))}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t.disabled)return t.removeAttribute("active"),delete t._buttonPressed,void delete t._isWindowContentClicked;if(t._dragDetails&&t._dragDetails.started&&(t.hasAttribute("resized")&&(t.$.fireEvent(t._dragDetails.type+"End",{left:e.pageX,top:e.pageY,width:t._dragDetails.newWidth,height:t._dragDetails.newHeight}),t.removeAttribute("resized"),t._handleWindowResizeDummy(),t.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right")),setTimeout(function(){t.$.removeClass("no-transition")},20),t.hasAttribute("dragged")&&(t.$.fireEvent(t._dragDetails.type+"End",{left:e.pageX,top:e.pageY}),t.removeAttribute("dragged")),t._dragDetails.started=!1,delete t._mouseManipulation),t._snapDummy&&!t._snapDummy.classList.contains("smart-visibility-hidden")){switch(t._snapDummy._position){case"left":case"top":t.style.left=t.style.top="0",t.style.right="auto";break;case"right":t.style.left="auto",t.style.top=t.style.right="0"}t.style.width="top"===t._snapDummy._position?"100%":"50%",t.style.height="100%",t.$.addClass("smart-window-snapped-"+t._snapDummy._position),t._handleSnapping()}t._modal&&n===t._modal&&!t._isWindowContentClicked&&(t.closeOnMaskClick?t.close():t.focus()),t._isWindowButton(n)&&t.focus(),delete t._isWindowContentClicked,delete t._buttonPressed;const i=t.shadowRoot&&t._windowParent.element&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;if(!t.hasAttribute("active")||i===t||!n.closest)return;let a=n.closest(".smart-window");for(;a&&a!==t;)a=a.parentElement,a&&(a=a.closest(".smart-window"));t.opened&&a!==t&&t.removeAttribute("active")}_documentSelectStartHandler(e){this._dragDetails&&this._dragDetails.started&&e.preventDefault()}_drag(e,t){const n=this;if(!e||n.pinned||n.maximized)return;let i,a;n._dragDetails&&n._dragDetails.started||n._setDragDetails("drag",e),n.$.addClass("no-transition"),"object"==typeof e?(i=e.pageX-n._dragDetails.x,a=e.pageY-n._dragDetails.y):i=a=e;const r=Math.max(n._windowParent.element.clientHeight,n._windowParent.scrollElement.scrollHeight),o=Math.max(n._windowParent.element.clientWidth,n._windowParent.scrollElement.scrollWidth);switch(t){case"horizontal":n._dragDetails.windowX=Math.max(0,Math.min(n._dragDetails.windowX+i,o-n.offsetWidth)),n.style.left=n._dragDetails.windowX+"px";break;case"vertical":n._dragDetails.windowY=Math.max(0,Math.min(n._dragDetails.windowY+a,r-n.offsetHeight)),n.style.top=n._dragDetails.windowY+"px";break;case"both":n._dragDetails.windowX=Math.max(0,Math.min(n._dragDetails.windowX+i,o-n.offsetWidth)),n._dragDetails.windowY=Math.max(0,Math.min(n._dragDetails.windowY+a,r-n.offsetHeight)),n.style.left=n._dragDetails.windowX+"px",n.style.top=n._dragDetails.windowY+"px"}n._dragDetails.top=n.offsetTop,n._dragDetails.left=n.offsetLeft}_dragStartHandler(e){this._dragDetails&&this._dragDetails.started&&e.preventDefault()}_focusHandler(e){const t=this;"focus"===e.type?(t.setAttribute("focus",""),t.bringToFront()):t._buttonPressed||(t.removeAttribute("focus"),t._dragDetails&&t._dragDetails.started&&t._handleWindowResizeDummy())}_getAllMinimizedWindows(e){const t=this;let n=[];e||(e=t._windowParent.element);const i=e.querySelectorAll("smart-window");for(let a=0;a<i.length;a++)i[a]!==t&&i[a].hasAttribute("minimized")&&n.push(i[a]);return n.sort(function(a,r){let o=a.getBoundingClientRect(),s=r.getBoundingClientRect();return o.right-s.right}),n}_handleSnapping(e){const t=this;e?t.disableSnap||t.collapsed||(t._snapDummy||(t._snapDummy=document.createElement("div"),t._snapDummy.addEventListener("transitionend",function(){t._snapDummy.classList.contains("smart-visibility-hidden")&&t._snapDummy.parentElement&&t._snapDummy.parentElement.removeChild(t._snapDummy)})),t._snapDummy.className="smart-window-snap-"+e+"-feedback",t._snapDummy._position=e,t._snapDummy.parentElement||t._windowParent.element.appendChild(t._snapDummy)):t._snapDummy&&t._snapDummy.parentElement&&t._snapDummy.classList.add("smart-visibility-hidden")}_headerDblCickHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;n!==t.$.headerSection&&n!==t.$.header||t.$.maximizeButton&&0===t.$.maximizeButton.offsetHeight||(t.maximized?t.restore():t.maximize())}_isWindowButton(e){const t=this;for(;e&&(e.closest&&e.closest(".smart-buttons-container"))!==t.$.buttonsContainer;)e=e.getRootNode().host;if(!e)return;const n=/smart-(\w+[-]*\w*)-button/gi;if((e=e.closest(".smart-button"))&&e===t._buttonPressed)switch(e){case t.$.closeButton:return t.close(),!0;case t.$.collapseButton:return t.collapsed?t.expand():t.collapse(),!0;case t.$.maximizeButton:return t.maximized?t.restore():t.maximize(),!0;case t.$.minimizeButton:return t.minimized?t.restore():t.minimize(),!0;case t.$.pinButton:return t.pinned?t.unpin():t.pin(),!0;default:return n.test(e.className)?(t.$.fireEvent(Smart.Utilities.Core.toCamelCase(e.className.match(n).toString().replace("smart-","").replace("-button","")),{button:e}),!0):void 0}}_keyDownHandler(e){const t=this;if(delete t._changingFocus,t.disabled||(t.hasAttribute("dragged")||t.hasAttribute("resized"))&&t._mouseManipulation)return;const n="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,i=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;if(!t.disableKeyboard)switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{if(t.minimized||i!==t)return;let a=e.key.indexOf("Right")>-1||e.key.indexOf("Left")>-1;e.preventDefault();const r=(t.isInShadowDOM?t.getRootNode().host:t).closest("smart-docking-layout");if(!a&&e.altKey&&!(t instanceof Smart.TabsWindow&&r))return void("ArrowUp"===e.key?t.maximize():t.restore());if(t.maximized)return;if(t.$.addClass("no-transition"),e.ctrlKey&&"none"!==t.resizeMode&&!t.collapsed)return a=-1===["horizontal","vertical","both"].indexOf(t.resizeMode)?t.resizeMode:a?"right":"bottom",t.hasAttribute("dragged")&&t._cancelDragging(e),t.hasAttribute("resized")||t.$.fireEvent("resizeStart",{position:{x:e.pageX,y:e.pageY}}),void t._resize(a,n);t.pinned||(t.hasAttribute("dragged")||(t.setAttribute("dragged",""),t.$.fireEvent("dragStart",{left:e.pageX,top:e.pageY})),t._drag(n,a?"horizontal":"vertical")),t.$.removeClass("no-transition");break}case"Escape":t.disableEscape||t.headerButtons.indexOf("close")>-1&&t.close();break;case"p":e.altKey&&t.headerButtons.indexOf("pin")>-1&&(t.pinned?t.unpin():t.pin());break;case"c":e.altKey&&t.headerButtons.indexOf("collapse")>-1&&(t.collapsed?t.expand():t.collapse());break;case"m":e.altKey&&t.headerButtons.indexOf("minimize")>-1&&(t.minimized?t.restore():t.minimize());break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let a;if(t.shadowRoot||t.isInShadowDOM?(a=e.composedPath()[0],t._buttonPressed=a.getRootNode().host):(a=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=a),!a)return;t._isWindowButton(a),delete t._buttonPressed;break}}}_keyUpHandler(e){const t=this;if(e.key&&!t.disableKeyboard){if("Control"===e.key&&t._dragDetails&&t.hasAttribute("resized")&&!t._mouseManipulation){if(!t._dragDetails.started)return;"drag"!==t._dragDetails.type&&(t.removeAttribute("resized"),t.$.fireEvent("resizeEnd",{left:e.pageX,top:e.pageY,width:t._dragDetails.newWidth,height:t._dragDetails.newHeight}),t._handleWindowResizeDummy()),t._dragDetails.started=!1}e.key.indexOf("Arrow")>-1&&t.hasAttribute("dragged")&&!t._mouseManipulation&&t._cancelDragging(e)}}_mouseWheelHandler(e){const t=this;!t.disabled&&t._dragDetails&&t._dragDetails.started&&(e.deltaY<0&&t._windowParent.scrollElement.scrollTop+e.deltaY<=0?t.style.top=Math.max(0,t._dragDetails.windowY)+"px":e.deltaY>0&&(t._dragDetails.windowY+t.offsetHeight+e.deltaY>=t._windowParent.scrollElement.scrollHeight||t._windowParent.scrollElement.scrollTop+t._windowParent.element.clientHeight===t._windowParent.scrollElement.scrollHeight)||("drag"===t._dragDetails.type?(t._dragDetails.windowY+=e.deltaY,t.style.top=t._dragDetails.windowY+"px"):(t._dragDetails.height+=e.deltaY,t.style.height=t._dragDetails.height+"px")))}_moveHandler(e){const t=this;if(!(t.disabled||t.collapsed||t.maximized||t.minimized||(Smart.Utilities.Core.isMobile&&navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&t.hasAttribute("dragged")&&e.originalEvent.preventDefault(),t._mouseManipulation||(t.$.container.className.indexOf("smart-window-resizing")>-1&&t.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right"),"none"===t.resizeMode)))){const n=t.getBoundingClientRect(),i=e.clientY<n.top+10,a=e.clientY>n.bottom-10,r=e.clientX>n.right-10,o=e.clientX<n.left+10;switch(t.resizeMode){case"none":break;case"both":if(t.resizeIndicator)return void(a&&r&&t.$.container.classList.add("smart-window-resizing-bottom-right"));if(o||r)return i?void t.$.container.classList.add("smart-window-resizing-top-"+(o?"left":"right")):a?void t.$.container.classList.add("smart-window-resizing-bottom-"+(o?"left":"right")):void t.$.container.classList.add("smart-window-resizing-"+(o?"left":"right"));if(i||a){if(r)return void t.$.container.classList.add("smart-window-resizing-"+(i?"top-right":"bottom-right"));if(o)return void t.$.container.classList.add("smart-window-resizing-"+(i?"top-left":"bottom-left"));t.$.container.classList.add("smart-window-resizing-"+(i?"top":"bottom"))}break;case"horizontal":if(t.resizeIndicator)return void(a&&r&&t.$.container.classList.add("smart-window-resizing-right"));if(o)return void t.$.container.classList.add("smart-window-resizing-left");r&&t.$.container.classList.add("smart-window-resizing-right");break;case"vertical":if(t.resizeIndicator)return void(a&&r&&t.$.container.classList.add("smart-window-resizing-bottom"));if(i)return void t.$.container.classList.add("smart-window-resizing-top");a&&t.$.container.classList.add("smart-window-resizing-bottom");break;case"top":if(i){if(t.resizeIndicator&&!o)return;t.$.container.classList.add("smart-window-resizing-top")}break;case"bottom":if(a){if(t.resizeIndicator&&!r)return;t.$.container.classList.add("smart-window-resizing-bottom")}break;case"left":if(o){if(t.resizeIndicator&&!i)return;t.$.container.classList.add("smart-window-resizing-left")}break;case"right":if(r){if(t.resizeIndicator&&!a)return;t.$.container.classList.add("smart-window-resizing-right")}}}}_handleActiveState(){const e=this,t=document.querySelectorAll(".smart-window");for(let n=0;n<t.length;n++)t[n].contains(e)||e.contains(t[n])||(t[n].removeAttribute("active"),t[n].removeAttribute("focus"));e.setAttribute("active","")}_handleWindowResizeDummy(){const e=this;if(e._resizeDummy||(e._resizeDummy=document.createElement("div"),e._resizeDummy.classList.add("smart-window-resize-feedback")),!e.hasAttribute("resized"))return e._resizeDummy&&e._resizeDummy.remove(),void(!e.liveResize&&"resize"===e._dragDetails.type&&e._dragDetails.started&&(e.style.top=e._dragDetails.top+"px",e.style.left=e._dragDetails.left+"px",e.style.width=e._dragDetails.newWidth+"px",e.style.height=e._dragDetails.newHeight+"px"));e._resizeDummy.parentElement||e._resizeDummy.getRootNode().host||(e._resizeDummy.style.width=e.offsetWidth+"px",e._resizeDummy.style.height=e.offsetHeight+"px",e._resizeDummy.style.top=e.offsetTop+"px",e._resizeDummy.style.left=e.offsetLeft+"px",e._windowParent.element.appendChild(e._resizeDummy))}_resize(e,t){const n=this;let i;if((!n._dragDetails||n._dragDetails&&"drag"===n._dragDetails.type)&&n._setDragDetails("resize"),!n._dragDetails)return;n._dragDetails.started=!0,n.hasAttribute("resized")||(n.setAttribute("resized",""),n.hasAnimation&&n.$.addClass("no-transition")),n.liveResize||n._handleWindowResizeDummy();const a=n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)?"snapWindowWidth":"width";switch(e){case"left":i="object"==typeof t?t.pageX-n._dragDetails.x:t,i=i>0?Math.min(i,n._dragDetails[a]-n._dragDetails.minWidth):-1*Math.min(n._dragDetails.maxWidth?n._dragDetails.maxWidth-n._dragDetails[a]:n._dragDetails.left,Math.abs(i)),n._dragDetails[a]=Math.min(n._dragDetails[a]+n._dragDetails.left-n._windowParent.scrollElement.scrollLeft,n._dragDetails[a]-i),n._dragDetails.windowX=Math.max(n._windowParent.scrollElement.scrollLeft,n._dragDetails.windowX+i),"object"!=typeof t&&(n._dragDetails[a]=Math.max(n._dragDetails[a],n._dragDetails.minWidth)),n._dragDetails[a]>=n._dragDetails.minWidth&&(n._dragDetails.left=n._dragDetails.windowX,n._dragDetails.newWidth=n._dragDetails[a]);break;case"right":{const o=n._windowParent.element.clientWidth!==n._windowParent.element.offsetWidth?n._windowParent.borderWidth:0,s=n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)?"snapWindowWidth":"width";i="object"==typeof t?t.pageX-n._dragDetails.x:t,i>0&&n._dragDetails.maxWidth&&(i=Math.min(n._dragDetails.maxWidth-n._dragDetails[s],i)),n._dragDetails[s]=Math.min(n._windowParent.element.clientWidth+n._windowParent.scrollElement.scrollLeft-n._dragDetails.left-o,Math.max(0,n._dragDetails[s]+i)),"object"!=typeof t&&(n._dragDetails[s]=Math.max(n._dragDetails[s],n._dragDetails.minWidth)),n._dragDetails.left=n.offsetLeft,n._dragDetails.newWidth=Math.max(n._dragDetails.minWidth,n._dragDetails[s]);break}case"top":n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)&&(n._dragDetails.height=n._dragDetails.snapWindowHeight),i="object"==typeof t?t.pageY-n._dragDetails.y:t,i=i>0?Math.min(i,n._dragDetails.height-n._dragDetails.minHeight):-1*Math.min(n._dragDetails.maxHeight?n._dragDetails.maxHeight-n._dragDetails.height:n._dragDetails.top,Math.abs(i)),n._dragDetails.snapWindowHeight=n._dragDetails.height=Math.min(n._dragDetails.height+n._dragDetails.top-n._windowParent.scrollElement.scrollTop,n._dragDetails.height-i),n._dragDetails.windowY=Math.max(n._windowParent.scrollElement.scrollTop,n._dragDetails.windowY+i),"object"!=typeof t&&(n._dragDetails.snapWindowHeight=n._dragDetails.height=Math.max(n._dragDetails.height,n._dragDetails.minHeight)),n._dragDetails.height>=n._dragDetails.minHeight&&(n._dragDetails.top=n._dragDetails.windowY,n._dragDetails.newHeight=n._dragDetails.height),n._dragDetails.newWidth=Math.max(n._dragDetails[a],n._dragDetails.newWidth);break;case"bottom":n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)&&(n._dragDetails.height=n._dragDetails.snapWindowHeight),i="object"==typeof t?t.pageY-n._dragDetails.y:t,i>0&&n._dragDetails.maxHeight&&(i=Math.min(n._dragDetails.maxHeight-n._dragDetails.height,i)),n._dragDetails.snapWindowHeight=n._dragDetails.height=Math.min(n._windowParent.element.clientHeight+n._windowParent.scrollElement.scrollTop-n._dragDetails.top-n._windowParent.borderWidth,Math.max(0,n._dragDetails.height+i)),"object"!=typeof t&&(n._dragDetails.snapWindowHeight=n._dragDetails.height=Math.max(n._dragDetails.height,n._dragDetails.minHeight)),n._dragDetails.newHeight=Math.max(n._dragDetails.minHeight,n._dragDetails.height),n._dragDetails.newWidth=Math.max(n._dragDetails[a],n._dragDetails.newWidth);break;case"bottomLeftCorner":n._resize("bottom",t),n._resize("left",t);break;case"bottomRightCorner":n._resize("bottom",t),n._resize("right",t);break;case"topLeftCorner":n._resize("top",t),n._resize("left",t);break;case"topRightCorner":n._resize("top",t),n._resize("right",t)}const r=n.liveResize?n:n._resizeDummy;n._dragDetails.newHeight=Math.max(n._dragDetails.snapWindowHeight,n._dragDetails.newHeight),r.style.top=n._dragDetails.top+"px",r.style.left=n._dragDetails.left+"px",r.style.width=n._dragDetails.newWidth+"px",r.style.height=n._dragDetails.newHeight+"px"}_restoreFromMinimization(){const e=this;e.minimized=!1,e.style.width=e.style.height=e.style.top=e.style.left="",e._refreshMinimizedWindowsPosition()}_refreshMinimizedWindowsPosition(){const e=this,t=e._getAllMinimizedWindows();if(0===t.length)return;let n;t[0].style.left="5px";for(let i=1;i<t.length;i++)parseFloat(t[i-1].style.left)+t[i-1].offsetWidth+t[i].offsetWidth+10<e._windowParent.element.clientWidth?(t[i].style.left=parseFloat(t[i-1].style.left)+t[i-1].offsetWidth+5+"px",t[i].style.top=t[i-1].offsetTop+"px",n=t[i]):(t[i].style.left=parseFloat(n.style.left)+"px",t[i].style.top=n.offsetTop+"px")}_setHeaderButtons(){const e=this,t=e.headerButtons,n=e.$.buttonsContainer.children,i=function(a){const r=e.$.buttonsContainer.getElementsByClassName("smart-"+(a+"").split(/(?=[A-Z])/).join("-").toLowerCase()+"-button")[0];return r&&r.classList.remove("smart-hidden"),r};for(let a=0;a<n.length;a++)n[a].classList.add("smart-hidden");if(t.length>0)for(let a=0;a<t.length;a++){let r=i(t[a]);if(!r){const o=(t[a]+"").split(/(?=[A-Z])/);r=document.createElement("button"),r.setAttribute("aria-label",o.map(s=>s.slice(0,1).toUpperCase()+s.slice(1)).join(" ")),r.classList.add("smart-"+o.join("-").toLowerCase()+"-button","smart-button","smart-element")}e.$.buttonsContainer.insertBefore(r,e.$.buttonsContainer.firstElementChild)}}_setDragDetails(e,t){const n=this;if(n._dragDetails||(n._dragDetails={}),void 0===n._dragDetails.minWidth||void 0===n._dragDetails.minHeight||void 0===n._dragDetails.maxWidth||void 0===n._dragDetails.maxHeight){const a=getComputedStyle(n);n._dragDetails.minWidth=parseFloat(a.getPropertyValue("min-width"))||0,n._dragDetails.minHeight=parseFloat(a.getPropertyValue("min-height"))||0,n._dragDetails.maxWidth=parseFloat(a.getPropertyValue("max-width"))||0,n._dragDetails.maxHeight=parseFloat(a.getPropertyValue("max-height"))||0}n._dragDetails.windowX=n.offsetLeft,n._dragDetails.windowY=n.offsetTop;const i=n.getBoundingClientRect();if(n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position))"right"===n.headerPosition&&n.collapsed&&(n._dragDetails.offsetX=i.left+n.offsetWidth-t.clientX);else{const a=n.parentElement===document.body?document.documentElement.getBoundingClientRect():n.parentElement?n.parentElement.getBoundingClientRect():document.documentElement.getBoundingClientRect(),r=window.scrollX||window.pageXOffset,o=window.scrollY||window.pageYOffset;n._windowParent.offsetLeft=a.left+r,n._windowParent.offsetTop=a.top+o,t&&"object"==typeof t&&(n._dragDetails.offsetX=t.clientX-i.left,n._dragDetails.offsetY=t.clientY-i.top),n.collapsed||(n.hasAnimation&&"minimize"===e?(n._dragDetails.width=n._dragDetails.width?n._dragDetails.width:n.offsetWidth,n._dragDetails.height=n._dragDetails.height?n._dragDetails.height:n.offsetHeight):(n._dragDetails.width=n.offsetWidth,n._dragDetails.height=n.offsetHeight),(n.style.width||n.style.height)&&(n._dragDetails.resized=!0))}if("minimize"!==e&&e&&(n._dragDetails.type=e,n._dragDetails.started=!0,n._dragDetails.snapWindowWidth=n.offsetWidth,n._dragDetails.snapWindowHeight=n.offsetHeight,t&&"object"==typeof t?(n._dragDetails.x=t.pageX,n._dragDetails.y=t.pageY):(n._dragDetails.x=n.offsetLeft,n._dragDetails.y=n.offsetTop),"resize"===e)){if("none"===n.resizeMode)return void delete n._dragDetails;n._dragDetails.top=n.offsetTop,n._dragDetails.left=n.offsetLeft,n._dragDetails.newWidth=n._dragDetails.width,n._dragDetails.newHeight=n._dragDetails.height,n.$container.hasClass("smart-window-resizing-right")?n._dragDetails.side="right":n.$container.hasClass("smart-window-resizing-left")?n._dragDetails.side="left":n.$container.hasClass("smart-window-resizing-top")?n._dragDetails.side="top":n.$container.hasClass("smart-window-resizing-bottom")?n._dragDetails.side="bottom":n.$container.hasClass("smart-window-resizing-top-left")?n._dragDetails.side="topLeftCorner":n.$container.hasClass("smart-window-resizing-bottom-left")?n._dragDetails.side="bottomLeftCorner":n.$container.hasClass("smart-window-resizing-top-right")?n._dragDetails.side="topRightCorner":n.$container.hasClass("smart-window-resizing-bottom-right")&&(n._dragDetails.side="bottomRightCorner")}}_setElementParent(e){const t=this;if(t._windowParent.element=void 0,t._windowParent.parent&&!t._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(t._windowParent.parent.style.position=""),e instanceof HTMLElement)t._windowParent.element=e;else if("string"==typeof e)if("body"===e){const n=t.getRootNode();t._windowParent.element=n&&n.host?t.getShadowRootOrBody():document.body}else t._windowParent.element=document.getElementById(e);if(t._windowParent.element||(t._windowParent.element=t._windowParent.initialParent&&t._windowParent.initialParent.parentElement?t._windowParent.initialParent:t.getShadowRootOrBody()),t.parentElement!==t._windowParent.element&&t._windowParent.element.appendChild(t),t._windowParent.element===document.body)t._windowParent.element=document.documentElement,t._windowParent.scrollElement=document.scrollingElement,t._windowParent.parent=document.body,t._windowParent.borderWidth=0;else{if(t.parentElement instanceof Smart.Window&&!t.parentElement.isCompleted)return void t.parentElement.whenRendered(function(){t.parentElement.appendChild(t),t._setElementParent(t.windowParent)});t._windowParent.element instanceof Smart.Window&&(t._windowParent.element=t._windowParent.element.$.content);const n=getComputedStyle(t.parentElement),i=n.getPropertyValue("position");t._windowParent.borderWidth=2*parseInt(n.getPropertyValue("border-width")||0),t._windowParent.parent=t.parentElement,t._windowParent.scrollElement=t._windowParent.element,"static"===i&&(t.parentElement.style.position="relative")}t._setModal(),t.style.left&&t.offsetLeft>t._windowParent.scrollElement.scrollWidth&&(t.style.left=t._windowParent.scrollElement.scrollWidth-t.offsetWidth+"px"),t.style.top&&t.offsetTop>t._windowParent.scrollElement.scrollHeight&&(t.style.top=t._windowParent.scrollElement.scrollHeight-t.offsetHeight+"px")}_setModal(){const e=this;if(delete e._changingFocus,e._windowParent.element)if(e.modal)if(e._modal||(e._modal=document.createElement("div"),e._modal.classList.add("smart-modal")),e._windowParent.parent!==document.body?e._modal.setAttribute("nested-modal",""):e._modal.removeAttribute("nested-modal"),e._modal._window=e,e.opened&&!e._modal.parentElement){const t=parseInt(getComputedStyle(e).getPropertyValue("z-index"));isNaN(t)||(e._modal.style.zIndex=t-1),e.parentElement.insertBefore(e._modal,e)}else e._modal.parentElement&&e._modal.parentElement.removeChild(e._modal);else e._modal&&e._modal.parentElement&&(e._modal.parentElement.removeChild(e._modal),delete e._modal)}}),Smart("smart-dialog-window",class extends Smart.Window{static get properties(){return{cancelLabel:{value:"Cancel",type:"string"},confirmLabel:{value:"Ok",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0}}}static get listeners(){return{"footer.click":"_footerClickHandler"}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="pinButton" class="smart-pin-button" aria-label="Pin"></button>\n                                <button id="collapseButton" class="smart-button smart-element smart-collapse-button" aria-label="Collapse"></button>\n                                <button id="minimizeButton" class="smart-button smart-element smart-minimize-button" aria-label="Minimize"></button>\n                                <button id="maximizeButton" class="smart-button smart-element smart-maximize-button" aria-label="Maximize"></button>\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content">\n                            <content></content>\n                        </div>\n                        <div id="footer" class="smart-footer">\n                            <button id="confirmButton" class="smart-button smart-element smart-confirm-button">[[confirmLabel]]</button>\n                            <button id="cancelButton" class="smart-button smart-element smart-cancel-button">[[cancelLabel]]</button>\n                        </div>\n                    </div>\n                </div>'}_createElement(){const e=this;e.setAttribute("role","alertdialog"),e.setAttribute("aria-describedby",e.$.content.id)}_footerClickHandler(e){const n=e.target;n.closest(".smart-confirm-button")?this.$.fireEvent("confirm"):n.closest(".smart-cancel-button")&&this.$.fireEvent("cancel")}_keyDownHandler(e){const t=this;if(delete t._changingFocus,t.disabled||(t.hasAttribute("dragged")||t.hasAttribute("resized"))&&t._mouseManipulation||t.disableKeyboard)return;e.stopPropagation();const n="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,i=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{if(t.minimized||i!==t)return;const a=e.key.indexOf("Right")>-1||e.key.indexOf("Left")>-1;if(e.preventDefault(),!a&&e.altKey)return void("ArrowUp"===e.key?t.maximize():t.restore());if(t.$.addClass("no-transition"),t.maximized)return;if(e.ctrlKey&&"none"!==t.resizeMode)return t.hasAttribute("dragged")&&t._cancelDragging(e),t.hasAttribute("resized")||t.$.fireEvent("resizeStart",{position:{x:e.pageX,y:e.pageY}}),void t._resize(a?"right":"bottom",n);t.pinned||(t.hasAttribute("dragged")||(t.setAttribute("dragged",""),t.$.fireEvent("dragStart",{left:e.pageX,top:e.pageY})),t._drag(n,a?"horizontal":"vertical")),t.$.removeClass("no-transition");break}case"Escape":t.disableEscape||t.headerButtons.indexOf("close")>-1&&t.close();break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let a;if(t.shadowRoot||t.isInShadowDOM?(a=e.composedPath()[0],t._buttonPressed=a.getRootNode().host):(a=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=a),!a)return;t._isWindowButton(a),delete t._buttonPressed;break}}}}),Smart("smart-alert-window",class extends Smart.DialogWindow{static get properties(){return{headerButtons:{value:[],type:"array"}}}_createElement(){const e=this;e.setAttribute("role","alertdialog"),e.setAttribute("aria-describedby",e.$.content.id)}}),Smart("smart-prompt-window",class extends Smart.DialogWindow{static get properties(){return{autoComplete:{allowedValues:["none","manual","auto","inline"],type:"string",value:"manual"},confirmLabel:{value:"Ok",type:"string"},cancelLabel:{value:"Cancel",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},displayMode:{value:"default",allowedValues:["default","escaped"],type:"string"},headerButtons:{value:["close"],type:"array"},form:{value:"",type:"string"},hint:{value:null,type:"any?"},maxLength:{value:null,type:"number?"},minLength:{value:2,type:"number"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}."}},type:"object"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},name:{value:"",type:"string"},placeholder:{value:"",type:"string"},promptLabel:{value:"",type:"string?"},required:{value:!1,type:"boolean"},requiredMessage:{value:"",type:"string"},selectAllOnFocus:{value:!1,type:"boolean"},value:{value:"",type:"string"}}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content">\n                            <content></content>\n                            <smart-text-box id="textBox"\n                                animation="[[animation]]"\n                                auto-complete="[[autoComplete]]"\n                                max-length="[[maxLength]]"\n                                value="{{value}}"\n                                form="[[form]]"\n                                label="[[promptLabel]]"\n                                hint="[[hint]]"\n                                display-mode="[[displayMode]]"\n                                max-length="[[maxLength]]"\n                                placeholder="[[placeholder]]"\n                                required="[[required]]"\n                                required-message="[[requiredMessage]]"\n                                select-all-on-focus="[[selectAllOnFocus]]"\n                                theme="[[theme]]"\n                                right-to-left="[[rightToLeft]]">\n                            </smart-text-box>\n                        </div>\n                        <div id="footer" class="smart-footer">\n                            <button id="confirmButton" class="smart-button smart-element smart-confirm-button flat">[[confirmLabel]]</button>\n                            <button id="cancelButton" class="smart-button smart-element smart-cancel-button flat">[[cancelLabel]]</button>\n                        </div>\n                    </div>\n                </div>'}static get listeners(){return{"footer.click":"_footerClickHandler"}}static get requires(){return{"Smart.TextBox":"smart.textbox.js"}}_footerClickHandler(e){const t=this,n=e.target;n.closest(".smart-confirm-button")?t.$.fireEvent("confirm",{value:t.$.textBox.value}):n.closest(".smart-cancel-button")&&t.$.fireEvent("cancel",{value:t.$.textBox.value})}_keyDownHandler(e){const t=this;function n(){t._dragDetails&&(t._dragDetails.started=!1),t.$.removeClass("no-transition")}if(delete t._changingFocus,t.disabled||t._dragDetails&&t._dragDetails.started||t.disableKeyboard)return;e.stopPropagation();const i="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,a=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(t.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(a!==t)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?t.maximize():t.restore(),void n();if(t.$.addClass("no-transition"),e.ctrlKey)return t._resize("bottom",i),void n();t._drag(i,"vertical");break;case"ArrowLeft":case"ArrowRight":if(a!==t)return;if(e.preventDefault(),t.$.addClass("no-transition"),e.ctrlKey)return t._resize("right",i),void n();t._drag(i,"horizontal"),t.$.removeClass("no-transition");break;case"Escape":t.disableEscape||t.headerButtons.indexOf("close")>-1&&t.close();break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let r;if(t.shadowRoot||t.isInShadowDOM?(r=e.composedPath()[0],t._buttonPressed=r.getRootNode().host):(r=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=r),!r)return;t._isWindowButton(r),delete t._buttonPressed;break}}n()}}),Smart("smart-multiline-prompt-window",class extends Smart.PromptWindow{static get properties(){return{autoCapitalize:{value:"none",allowedValues:["none","words","characters"],type:"string"},autoExpand:{value:!1,type:"boolean"},headerButtons:{value:["close"],type:"array"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},selectionDirection:{value:"none",allowedValues:["forward","backward","none"],type:"string"},selectionEnd:{value:0,reflectToAttribute:!1,type:"number"},selectionStart:{value:0,reflectToAttribute:!1,type:"number"},spellCheck:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},wrap:{value:"soft",allowedValues:["hard","soft","off"],type:"string"}}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content">\n                            <content></content>\n                           <smart-multiline-text-box id="textBox"\n                                animation="[[animation]]"\n                                horizontal-scroll-bar-visibility= "[[horizontalScrollBarVisibility]]"\n                                vertical-scroll-bar-visibility= "[[verticalScrollBarVisibility]]"\n                                auto-capitalize="[[autoCapitalize]]"\n                                auto-expand = "[[autoExpand]]"\n                                selection-direction= "[[selectionDirection]]"\n                                selection-end= "[[selectionEnd]]"\n                                selection-start="[[selectionStart]]"\n                                spell-check= "[[spellCheck]]"\n                                wrap="[[wrap]]"\n                                max-length="[[maxLength]]"\n                                value="{{value}}"\n                                form="[[form]]"\n                                label="[[promptLabel]]"\n                                hint="[[hint]]"\n                                display-mode="[[displayMode]]"\n                                max-length="[[maxLength]]"\n                                placeholder="[[placeholder]]"\n                                required="[[required]]"\n                                required-message="[[requiredMessage]]"\n                                select-all-on-focus="[[selectAllOnFocus]]"\n                                theme="[[theme]]"\n                                right-to-left="[[rightToLeft]]">\n                           </smart-multiline-text-box>\n                        </div>\n                        <div id="footer" class="smart-footer">\n                            <button id="confirmButton" class="smart-button smart-element smart-confirm-button flat">[[confirmLabel]]</button>\n                            <button id="cancelButton" class="smart-button smart-element smart-cancel-button flat">[[cancelLabel]]</button>\n                        </div>\n                    </div>\n                </div>'}static get listeners(){return{"footer.click":"_footerClickHandler"}}static get requires(){return{"Smart.MultilineTextBox":"smart.multilinetextbox.js"}}_footerClickHandler(e){const t=this,n=e.target;n.closest(".smart-confirm-button")?t.$.fireEvent("confirm",{value:t.$.textBox.value}):n.closest(".smart-cancel-button")&&t.$.fireEvent("cancel",{value:t.$.textBox.value})}}),Smart("smart-progress-window",class extends Smart.Window{static get properties(){return{completeLabel:{value:"Continue",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},indeterminate:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function"},max:{value:100,type:"number"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},min:{value:0,type:"number"},showProgressValue:{value:!1,type:"boolean"},value:{value:0,type:"number?"}}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content" inner-h-t-m-l="[[innerHTML]]">\n                            <content></content>\n                        </div>\n                        <div id="footer" class="smart-footer">\n                            <smart-progress-bar id="progressBar"\n                                animation="[[animation]]"\n                                min="[[min]]"\n                                max="[[max]]"\n                                indeterminate="[[inditerminate]]"\n                                inverted="[[inverted]]"\n                                format-function="[[formatFunction]]"\n                                show-progress-value="[[showProgressValue]]"\n                                theme="[[theme]]"\n                                right-to-left="[[rightToLeft]]"\n                                value="{{value}}">\n                            </smart-progress-bar>\n                            <button id="completeButton" class="smart-button smart-element smart-complete-button smart-visibility-hidden">[[completeLabel]]</button>\n                        </div>\n                    </div>\n                </div>'}static get requires(){return{"Smart.ProgressBar":"smart.progressbar.js"}}propertyChangedHandler(e,t,n){"value"===e?this._handleCompletion():super.propertyChangedHandler(e,t,n)}_createElement(){this.setAttribute("role","dialog"),this._handleCompletion()}_handleCompletion(){const e=this;e.$.completeButton&&(e.value>=e.max?(e.$completeButton.removeClass("smart-visibility-hidden"),e.$progressBar.addClass("smart-visibility-hidden")):(e.$completeButton.addClass("smart-visibility-hidden"),e.$progressBar.removeClass("smart-visibility-hidden")))}_keyDownHandler(e){const t=this;function n(){t._dragDetails&&(t._dragDetails.started=!1),t.$.removeClass("no-transition")}if(delete t._changingFocus,t.disabled||t._dragDetails&&t._dragDetails.started||t.disableKeyboard)return;e.stopPropagation();const i="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,a=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(t.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(a!==t)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?t.maximize():t.restore(),void n();if(t.$.addClass("no-transition"),e.ctrlKey)return t._resize("bottom",i),void n();t._drag(i,"vertical"),t.$.removeClass("no-transition");break;case"ArrowLeft":case"ArrowRight":if(a!==t)return;if(e.preventDefault(),t.$.addClass("no-transition"),e.ctrlKey)return t._resize("right",i),void n();t._drag(i,"horizontal"),t.$.removeClass("no-transition");break;case"Escape":t.disableEscape||t.headerButtons.indexOf("close")>-1&&t.close();break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let r;if(t.shadowRoot||t.isInShadowDOM?(r=e.composedPath()[0],t._buttonPressed=r.getRootNode().host):(r=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=r),!r)return;t._isWindowButton(r),delete t._buttonPressed;break}}n()}}),Smart("smart-tabs-window",class extends Smart.Window{static get properties(){return{disableSnap:{value:!0,readOnly:!0,type:"boolean"},dropPosition:{value:["all"],type:"array"},addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},autoHide:{value:!1,type:"boolean"},autoHideWindow:{value:null,type:"any"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},tabCloseButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},tabCloseButtons:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:'smart-tabs: The method "insert" requires a details Object to be passed as a second argument.',invalidIndex:'smart-tabs: "{{method}}" method accepts an index of type number.',referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:'smart-tabs: The method "{{method}}" requires a "smart-tab-item" element to be passed as an argument.'}},type:"object",extend:!0},tabOverflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},tabReorder:{value:!1,type:"boolean"},tabResize:{value:!1,type:"boolean"},tabScrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},locked:{value:!1,type:"boolean"},max:{value:"",type:"any"},min:{value:"",type:"any"},size:{value:"",type:"any"},tabLayout:{value:"scroll",allowedValues:["scroll","dropdown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},layout:{value:null,type:"any"}}}static get listeners(){return{"tabsElement.blur":"_tabsFocusHandler","tabsElement.change":"_tabsChangeHandler","tabsElement.focus":"_tabsFocusHandler","autoHideWindow.close":"_autoHideWindowCloseHandler","autoHideWindow.open":"_autoHideWindowOpenHandler"}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="minimizeButton" class="smart-button smart-element smart-minimize-button" aria-label="Minimize"></button>\n                                <button id="maximizeButton" class="smart-button smart-element smart-maximize-button" aria-label="Maximize"></button>\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div id="contentSection" class="smart-content">\n                           <smart-tabs id="tabsElement"\n                                animation="[[animation]]"\n                                add-new-tab="[[addNewTab]]"\n                                allow-toggle="[[allowToggle]]"\n                                close-button-mode="[[tabCloseButtonMode]]"\n                                close-buttons="[[tabCloseButtons]]"\n                                disabled="[[disabled]]"\n                                overflow="[[tabOverflow]]"\n                                reorder="[[tabReorder]]"\n                                resize="[[tabResize]]"\n                                scroll-buttons-position="[[tabScrollButtonsPosition]]"\n                                selected-index="{{selectedIndex}}"\n                                selection-mode="[[selectionMode]]"\n                                tab-layout="[[tabLayout]]"\n                                tab-position="[[tabPosition]]"\n                                tab-text-orientation="[[tabTextOrientation]]"\n                                theme="[[theme]]"\n                                right-to-left="[[rightToLeft]]">\n                                <content></content>\n                            </smart-tabs>\n                        </div>\n                        <div id="footer" class="smart-footer smart-hidden"></div>\n                    </div>\n                </div>'}static get requires(){return{"Smart.Tabs":"smart.tabs.js"}}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),t.$.tabsElement.appendChild(e)):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}insert(e,t){this.$.tabsElement.insert(e,t);const n=this.$.tabsElement._tabs[e];n&&(n.draggable=void 0===t.draggable||t.draggable,n.floatable=void 0===t.floatable||t.floatable)}insertBefore(e,t){this.$.tabsElement.insertBefore(e,t)}removeAt(e){this.$.tabsElement.removeAt(e)}removeChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),(t.shadowRoot||t).contains(e)||t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.$.tabsElement.removeChild(e)):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}refreshTabHeader(){const e=this;e.$.tabsElement&&e.$.tabsElement.isCompleted&&e.$.tabsElement.refreshTabHeader()}refreshTabs(){const e=this;e.$.tabsElement&&e.$.tabsElement.isCompleted&&e.$.tabsElement._applyTabOverflow()}select(e){this.$.tabsElement.select(e)}update(e,t,n){this.$.tabsElement.update(e,t,n)}get items(){return this.isCompleted&&this.$.tabsElement?this.$.tabsElement._tabs:null}get itemLabels(){return this.$?this.$.tabsElement._tabLabelContainers:null}get siblings(){const e=this;let t=[];if(!e.isCompleted)return t;const n=e.closest("smart-splitter");if(!n||!n.closest("smart-docking-layout"))return t;const i=n._items;if(!i||!i.length)return t;for(let a=0;a<i.length;a++){const r=i[a];r!==e.closest("smart-splitter-item")&&r.querySelector("smart-tabs-window").closest("smart-splitter")===n&&t.push(r.querySelector("smart-tabs-window"))}return t}propertyChangedHandler(e,t,n){const i=this;switch("collapsed"!==e&&super.propertyChangedHandler(e,t,n),e){case"theme":""!==t&&(i.$.closeButton.classList.remove(t),i.$.collapseButton.classList.remove(t),i.$.maximizeButton.classList.remove(t),i.$.pinButton.classList.remove(t)),i._applyTheme(n);break;case"autoHideWindow":i._handleAutoHideWindow();break;case"autoHide":n||(null!==i.$.tabsElement.selectedIndex&&(i.$.tabsElement._tabs[i.$.tabsElement.selectedIndex]._autoHideWindowSize=void 0),i._autoHideWindow&&i._autoHideWindow.close());break;case"dataSource":i.$.tabsElement.dataSource=n;break;case"layout":i._handleLayoutProperty();break;case"collapsible":case"collapsed":case"locked":case"max":case"min":case"size":{const a=i.getRootNode(),r=(a&&a.host?a.host:i).closest("smart-docking-layout"),o=i.closest("smart-splitter-item");if(!r)return void("collapsed"===e&&super.propertyChangedHandler(e,t,n));o&&(o[e]=n);break}}}_applyTheme(e){if(""!==e){const t=this.$.buttonsContainer.children;for(let n=0;n<t.length;n++)t[n].classList.add(e)}}_autoHideWindowCloseHandler(){const e=this;e.allowToggle&&null!==e.$.tabsElement.selectedIndex&&e.$.tabsElement.select(e.$.tabsElement.selectedIndex),e._autoHideWindow&&e._moveContent(e._autoHideWindow.items[0],e._autoHideWindow._tab)}_autoHideWindowOpenHandler(){const e=this;e.$.tabsElement.selectedIndex&&e._handleAutoHide(e.$.tabsElement.selectedIndex)}_createElement(){const e=this;e.setAttribute("role","dialog"),e.$.tabsElement.$.tabHeaderControls&&!e.$.tabsElement.$.tabHeaderControls.innerHTML&&e.$.tabsElement.$tabHeaderControls.addClass("smart-hidden"),e.$.tabsElement.dataSource=e.dataSource,e._applyTheme(e.theme),e._handleAutoHideWindow(),e.autoHide&&e._handleAutoHide(e.$.tabsElement.selectedIndex),e.allowToggle||e.selectedIndex||null===e.$.tabsElement.selectedIndex||(e.selectedIndex=e.$.tabsElement.selectedIndex,e.$.tabsElement.setAttribute("selected-index",e.selectedIndex)),e._handleLayoutProperty();const t=(e.isInShadowDOM?e.getRootNode().host:e||e).closest("smart-docking-layout"),n=e.closest("smart-splitter-item");t&&n&&(n.collapsible=e.collapsible,n.collapsed=e.collapsed,n.min=e.min,n.max=e.max,n.size=e.size,n.locked=e.locked)}attached(){super.attached();const e=this;e.classList.add("smart-window"),e.shadowRoot&&e.$.root.classList.add("smart-window")}_handleLayoutProperty(){const e=this;let t=e.closest("smart-docking-layout");if(Smart.DockingLayout){if(!e.ownerLayout&&e.getRootNode()){let n=e.getRootNode().host;for(;n;){if(!n.closest)return;if(n.closest("smart-docking-layout")){t=n.closest("smart-docking-layout");break}n=n.getRootNode()?n.getRootNode().host:void 0}}t?e.layout=t:e.layout instanceof Smart.DockingLayout||"string"==typeof e.layout&&(e.layout=document.getElementById(e.layout))}}_headerDblCickHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;e.ctrlKey||n!==t.$.headerSection&&n!==t.$.header||t.$.maximizeButton&&0===t.$.maximizeButton.offsetHeight||(t.maximized?t.restore():t.maximize())}_documentUpHandler(e){const t=this;let n=e.originalEvent.target.closest?e.originalEvent.target.closest(".smart-window"):e.originalEvent.target,i=n===t||n===t._autoHideWindow||t._isAutoHideWindowClicked,a=t.closest("smart-docking-layout");(t.shadowRoot||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0],i=n.getRootNode()===t.shadowRoot||n.closest(".smart-window")===t||n.closest(".smart-window")===t._autoHideWindow||t._isAutoHideWindowClicked),a=((t.isInShadowDOM?t.getRootNode().host:t)||t).closest("smart-docking-layout"),a&&a.disabled?delete t._isWindowContentClicked:(super._documentUpHandler(e),delete t._isAutoHideWindowClicked,t.autoHide&&t._autoHideWindow&&(i&&t._autoHideWindow.opened||(t.selectedIndex=null,t._autoHideWindow.parentElement&&t._autoHideWindow.parentElement.closest(".smart-window")===t&&t._autoHideWindow.close())))}_handleAutoHide(e){const t=this;if(!t.autoHide||null===e||(t._autoHideWindow||t._handleAutoHideWindow(!0),!t._autoHideWindow))return;t._autoHideWindow._tabsWindow&&t._autoHideWindow._tabsWindow!==t&&(t._autoHideWindow._tabsWindow.selectedIndex=null);const n=t.$.tabsElement._tabs[e];t._autoHideWindow._tab!==n&&t._moveContent(t._autoHideWindow.items[0],t._autoHideWindow._tab),t._autoHideWindow.label=n.label,t._autoHideWindow.draggable=n.draggable,t._autoHideWindow.floatable=n.floatable,t._autoHideWindow._tab=n,t._autoHideWindow.headerButtons=t.headerButtons,t._moveContent(t._autoHideWindow._tab,t._autoHideWindow.items[0]),t._autoHideWindow.bringToFront(),t._setAutoHideWindowSize(e),t._autoHideWindow.open(),t._autoHideWindow._tabsWindow=t,t._autoHideWindow.controlledBy&&t._autoHideWindow.controlledBy.removeAttribute("aria-controls"),t._autoHideWindow.controlledBy=t.$.tabsElement._tabLabelContainers[e],t._autoHideWindow.controlledBy.setAttribute("aria-controls",t._autoHideWindow.id)}_moveHandler(e){const t=this,n=t.closest("smart-docking-layout");n&&n.items.indexOf(t)>-1||(Smart.Utilities.Core.isMobile&&navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&t.layout instanceof Smart.DockingLayout&&t.layout.hasAttribute("dragged")&&e.originalEvent.preventDefault(),super._moveHandler(e))}_setAutoHideWindowSize(e){const t=this;if(!t._autoHideWindow)return;t._autoHideWindow.$.addClass("no-transition"),t._autoHideWindow.style.maxWidth=t._autoHideWindow.style.maxHeight="";const n=t.$.tabsElement._tabs[e],i=(t._autoHideWindow.isInShadowDOM?t._autoHideWindow.getRootNode().host:t._autoHideWindow).closest("smart-docking-layout")||t._autoHideWindow.parentElement;let a,r;if(n){if("top"===t.tabPosition||"bottom"===t.tabPosition){t._autoHideWindow.resizeMode="top"===t.tabPosition?"bottom":"top",t._autoHideWindow.style.width=t.$.tabsElement.offsetWidth+"px",a=i.getBoundingClientRect(),r=t.$.tabsElement.getBoundingClientRect();let o=n._autoHideWindowSize&&parseFloat(n._autoHideWindowSize)||"";Smart.DockingLayout&&i instanceof Smart.DockingLayout&&(o&&(o=Math.min(i.$.itemsContainer.offsetHeight,o)+"px"),t._autoHideWindow.style.maxHeight=i.$.itemsContainer.offsetHeight+"px"),t._autoHideWindow.style.height=o,t._autoHideWindow.style.left=r.left-a.left+"px",t._autoHideWindow&&(t._autoHideWindow.style.top="top"===t.tabPosition?r.top+-a.top+r.height+"px":r.top-a.top-t._autoHideWindow.offsetHeight+"px")}else{t._autoHideWindow.resizeMode="left"===t.tabPosition?"right":"left",t._autoHideWindow.style.height=t.$.tabsElement.offsetHeight+"px";let o=n._autoHideWindowSize&&parseFloat(n._autoHideWindowSize)||"";i instanceof Smart.DockingLayout&&(o&&(o=Math.min(i.$.itemsContainer.offsetWidth,o)+"px"),t._autoHideWindow.style.maxWidth=i.$.itemsContainer.offsetWidth+"px"),t._autoHideWindow.style.width=o,a=i.getBoundingClientRect(),r=t.$.tabsElement.getBoundingClientRect(),t._autoHideWindow.style.top=r.top-a.top+"px",t._autoHideWindow.style.left="left"===t.tabPosition?r.left-a.left+t.$.tabsElement.offsetWidth+"px":r.left-a.left-t._autoHideWindow.offsetWidth+"px"}t._autoHideWindow._dragDetails&&(t._autoHideWindow._dragDetails.maxWidth=void 0),t._autoHideWindow._setDragDetails("resize"),t._autoHideWindow._dragDetails.started=!1,t._autoHideWindow.$.removeClass("no-transition")}}_handleAutoHideWindow(e){const t=this;if(t.autoHideWindow){if(t._autoHideWindow&&t._autoHideWindow.parentElement.removeChild(t._autoHideWindow),"string"==typeof t.autoHideWindow)return void(t._autoHideWindow=document.getElementById(t.autoHideWindow));if(t.autoHideWindow instanceof Smart.Window)return void(t._autoHideWindow=t.autoHideWindow)}if(!e||t._autoHideWindow||2===t.$.contentSection.children.length&&t.$.contentSection.children[1]instanceof Smart.Window)return;const n=document.createElement("smart-window");n.$=Smart.Utilities.Extend(n),n.disableSnap=n.pinned=!0,n.headerButtons=["close"],t.$.contentSection.appendChild(n),t._autoHideWindow=n}_moveContent(e,t){if(!e||!t)return;const n=[].slice.call(e.$.content.childNodes);for(let i=0;i<n.length;i++)t.appendChild(n[i])}_tabsChangeHandler(e){const t=this;if(e.target===t.$.tabsElement&&t.autoHide){if(t._autoHideWindow||t._handleAutoHideWindow(!0),null!==e.detail.oldIndex&&t._autoHideWindow.opened&&(t.$.tabsElement._tabs[e.detail.oldIndex]._autoHideWindowSize=t._autoHideWindow.style["right"===t.$.tabsElement.tabPosition||"left"===t.$.tabsElement.tabPosition?"width":"height"]),!t.autoHide||null==e.detail.index)return t._autoHideWindow.setAttribute("active",""),void t._autoHideWindow.close();t._handleAutoHide(e.detail.index)}}_tabsFocusHandler(e){const t=this;"focus"===e.type?(t.bringToFront(),t.setAttribute("focus","")):t.removeAttribute("focus")}}),Smart("smart-wait-window",class extends Smart.ProgressWindow{static get properties(){return{headerButtons:{value:[],type:"array"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},pinned:{value:!0,type:"boolean",readOnly:!0}}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content">\n                            <content></content>\n                            <smart-progress-bar id="progressBar" animation="[[animation]]" indeterminate theme="[[theme]]" right-to-left="[[rightToLeft]]"></smart-progress-bar>\n                        </div>\n                        <div id="footer" class="smart-footer"></div>\n                    </div>\n                </div>'}_keyDownHandler(e){const t=this;function n(){t._dragDetails&&(t._dragDetails.started=!1),t.$.removeClass("no-transition")}if(delete t._changingFocus,t.disabled||t._dragDetails&&t._dragDetails.started)return;const i=t.shadowRoot||t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;e.stopPropagation();const a="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10;switch(t.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(i!==t)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?t.maximize():t.restore(),void n();if(t.$.addClass("no-transition"),e.ctrlKey)return t._resize("bottom",a),void n();t._drag(a,"vertical");break;case"ArrowLeft":case"ArrowRight":if(i!==t)return;if(e.preventDefault(),t.$.addClass("no-transition"),e.ctrlKey)return t._resize("right",a),void n();t._drag(a,"horizontal");break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let r;if(t.shadowRoot||t.isInShadowDOM?(r=e.composedPath()[0],t._buttonPressed=r.getRootNode().host):(r=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=r),!r)return;t._isWindowButton(r),delete t._buttonPressed;break}}n()}})}},Oe={};function ge(e){var t=Oe[e];if(void 0!==t)return t.exports;var n=Oe[e]={exports:{}};return He[e].call(n.exports,n,n.exports,ge),n.exports}ge.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return ge.d(t,{a:t}),t},ge.d=(e,t)=>{for(var n in t)ge.o(t,n)&&!ge.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},ge.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";ge(6321),ge(6057),ge(2612),ge(6867),ge(8649),ge(9135),ge(6693),ge(8588),ge(7341),ge(9264),ge(2864),ge(2066),ge(5435),ge(4896),ge(2052),ge(5707),ge(7650),ge(5810),ge(9613),ge(2754),ge(8687),ge(1419),ge(7054),ge(6802),ge(8466),ge(2616),ge(4595),ge(9097),ge(6670),ge(5453);class me extends Smart.Component{get name(){return"smartScheduler"}}})()})(),typeof self<"u"&&self,mt.exports=function(){return ge={},He.m=Oe=[function(be,e,t){"use strict";t.d(e,"f",function(){return i}),t.d(e,"e",function(){return a}),t.d(e,"g",function(){return r}),t.d(e,"d",function(){return o}),t.d(e,"k",function(){return s}),t.d(e,"l",function(){return l}),t.d(e,"n",function(){return d}),t.d(e,"i",function(){return c}),t.d(e,"m",function(){return u}),t.d(e,"j",function(){return m}),t.d(e,"a",function(){return y}),t.d(e,"b",function(){return b}),t.d(e,"h",function(){return f}),t.d(e,"c",function(){return w});var n=t(2),i=function(v){return null!=v},a=function(v){return"number"==typeof v},r=function(v){return 0<=n.a.indexOf(v)},o=Array.isArray,s=function(v,S){void 0===S&&(S=v),1===arguments.length&&(S=v,v=0);for(var _=[],T=v;T<S;T++)_.push(T);return _},l=function(v,S){var _=0,T=[];if(o(v))for(;_<S;_++)T[_]=[].concat(v);else for(;_<S;_++)T[_]=v;return T},d=function(v){return o(v)?v:[v]};function c(v,S,_){void 0===_&&(_=" ");var T=String(v);return T.length>(S>>=0)?String(T):((S-=T.length)>_.length&&(_+=l(_,S/_.length)),_.slice(0,S)+String(T))}var u=function(v,S,_){var T=v.split(S);return _?T.slice(0,_).concat([T.slice(_).join(S)]):T},m=function(v,S){var _=v%S;return _*S<0?_+S:_},y=function(v,S){return{div:Math.floor(v/S),mod:m(v,S)}},b=function(v){return!i(v)||0===v.length},f=function(v){return!b(v)},w=function(v,S){return f(v)&&-1!==v.indexOf(S)}},function(be,e,t){"use strict";t.r(e);var n,i,a=t(0);(i=n=n||{}).MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],i.ONE_DAY=864e5,i.MAXYEAR=9999,i.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),i.PY_WEEKDAYS=[6,0,1,2,3,4,5],i.getYearDay=function(C){var O=new Date(C.getUTCFullYear(),C.getUTCMonth(),C.getUTCDate());return Math.ceil((O.valueOf()-new Date(C.getUTCFullYear(),0,1).valueOf())/i.ONE_DAY)+1},i.isLeapYear=function(C){return C%4==0&&C%100!=0||C%400==0},i.isDate=function(C){return C instanceof Date},i.isValidDate=function(C){return i.isDate(C)&&!isNaN(C.getTime())},i.tzOffset=function(C){return 60*C.getTimezoneOffset()*1e3},i.daysBetween=function(C,O){var R=C.getTime()-i.tzOffset(C)-(O.getTime()-i.tzOffset(O));return Math.round(R/i.ONE_DAY)},i.toOrdinal=function(C){return i.daysBetween(C,i.ORDINAL_BASE)},i.fromOrdinal=function(C){return new Date(i.ORDINAL_BASE.getTime()+C*i.ONE_DAY)},i.getMonthDays=function(C){var O=C.getUTCMonth();return 1===O&&i.isLeapYear(C.getUTCFullYear())?29:i.MONTH_DAYS[O]},i.getWeekday=function(C){return i.PY_WEEKDAYS[C.getUTCDay()]},i.monthRange=function(C,O){var R=new Date(Date.UTC(C,O,1));return[i.getWeekday(R),i.getMonthDays(R)]},i.combine=function(C,O){return O=O||C,new Date(Date.UTC(C.getUTCFullYear(),C.getUTCMonth(),C.getUTCDate(),O.getHours(),O.getMinutes(),O.getSeconds(),O.getMilliseconds()))},i.clone=function(C){return new Date(C.getTime())},i.cloneDates=function(C){for(var O=[],R=0;R<C.length;R++)O.push(i.clone(C[R]));return O},i.sort=function(C){C.sort(function(O,R){return O.getTime()-R.getTime()})},i.timeToUntilString=function(C,O){void 0===O&&(O=!0);var R=new Date(C);return[Object(a.i)(R.getUTCFullYear().toString(),4,"0"),Object(a.i)(R.getUTCMonth()+1,2,"0"),Object(a.i)(R.getUTCDate(),2,"0"),"T",Object(a.i)(R.getUTCHours(),2,"0"),Object(a.i)(R.getUTCMinutes(),2,"0"),Object(a.i)(R.getUTCSeconds(),2,"0"),O?"Z":""].join("")},i.untilStringToDate=function(C){var O=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/.exec(C);if(!O)throw new Error("Invalid UNTIL value: "+C);return new Date(Date.UTC(parseInt(O[1],10),parseInt(O[2],10)-1,parseInt(O[3],10),parseInt(O[5],10)||0,parseInt(O[6],10)||0,parseInt(O[7],10)||0))};var r=n;function o(C,O){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=C,this.args=O,"between"===C?(this.maxDate=O.inc?O.before:new Date(O.before.getTime()-1),this.minDate=O.inc?O.after:new Date(O.after.getTime()+1)):"before"===C?this.maxDate=O.inc?O.dt:new Date(O.dt.getTime()-1):"after"===C&&(this.minDate=O.inc?O.dt:new Date(O.dt.getTime()+1))}var s=(o.prototype.accept=function(C){++this.total;var O=this.minDate&&C<this.minDate,R=this.maxDate&&C>this.maxDate;if("between"===this.method){if(O)return!0;if(R)return!1}else if("before"===this.method){if(R)return!1}else if("after"===this.method)return!!O||(this.add(C),!1);return this.add(C)},o.prototype.add=function(C){return this._result.push(C),!0},o.prototype.getValue=function(){var C=this._result;switch(this.method){case"all":case"between":return C;default:return C.length?C[C.length-1]:null}},o.prototype.clone=function(){return new o(this.method,this.args)},o),l=function(C,O){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,W){R.__proto__=W}||function(R,W){for(var I in W)W.hasOwnProperty(I)&&(R[I]=W[I])})(C,O)};function d(C,O){function R(){this.constructor=C}l(C,O),C.prototype=null===O?Object.create(O):(R.prototype=O.prototype,new R)}var c,u=function(){return(u=Object.assign||function(C){for(var O,R=1,W=arguments.length;R<W;R++)for(var I in O=arguments[R])Object.prototype.hasOwnProperty.call(O,I)&&(C[I]=O[I]);return C}).apply(this,arguments)};function m(){for(var C=0,O=0,R=arguments.length;O<R;O++)C+=arguments[O].length;var W=Array(C),I=0;for(O=0;O<R;O++)for(var A=arguments[O],H=0,V=A.length;H<V;H++,I++)W[I]=A[H];return W}function y(C,O,R){var W=c.call(this,C,O)||this;return W.iterator=R,W}var b,f,w=(d(y,c=s),y.prototype.add=function(C){return!!this.iterator(C,this._result.length)&&(this._result.push(C),!0)},y);function v(C){return C<b.HOURLY}(f=b=b||{})[f.YEARLY=0]="YEARLY",f[f.MONTHLY=1]="MONTHLY",f[f.WEEKLY=2]="WEEKLY",f[f.DAILY=3]="DAILY",f[f.HOURLY=4]="HOURLY",f[f.MINUTELY=5]="MINUTELY",f[f.SECONDLY=6]="SECONDLY";var S=t(2),_=(T.prototype.getHours=function(){return this.hour},T.prototype.getMinutes=function(){return this.minute},T.prototype.getSeconds=function(){return this.second},T.prototype.getMilliseconds=function(){return this.millisecond},T.prototype.getTime=function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)+this.millisecond},T);function T(C,O,R,W){this.hour=C,this.minute=O,this.second=R,this.millisecond=W||0}var z,M=(d(L,z=_),L.fromDate=function(C){return new this(C.getUTCFullYear(),C.getUTCMonth()+1,C.getUTCDate(),C.getUTCHours(),C.getUTCMinutes(),C.getUTCSeconds(),C.valueOf()%1e3)},L.prototype.getWeekday=function(){return n.getWeekday(new Date(this.getTime()))},L.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},L.prototype.getDay=function(){return this.day},L.prototype.getMonth=function(){return this.month},L.prototype.getYear=function(){return this.year},L.prototype.addYears=function(C){this.year+=C},L.prototype.addMonths=function(C){if(this.month+=C,12<this.month){var O=Math.floor(this.month/12),R=Object(a.j)(this.month,12);this.month=R,this.year+=O,0===this.month&&(this.month=12,--this.year)}},L.prototype.addWeekly=function(C,O){O>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-O))+7*C:this.day+=-(this.getWeekday()-O)+7*C,this.fixDay()},L.prototype.addDaily=function(C){this.day+=C,this.fixDay()},L.prototype.addHours=function(C,O,R){for(O&&(this.hour+=Math.floor((23-this.hour)/C)*C);;){this.hour+=C;var W=Object(a.a)(this.hour,24),I=W.div;if(I&&(this.hour=W.mod,this.addDaily(I)),Object(a.b)(R)||Object(a.c)(R,this.hour))break}},L.prototype.addMinutes=function(C,O,R,W){for(O&&(this.minute+=Math.floor((1439-(60*this.hour+this.minute))/C)*C);;){this.minute+=C;var I=Object(a.a)(this.minute,60),A=I.div;if(A&&(this.minute=I.mod,this.addHours(A,!1,R)),(Object(a.b)(R)||Object(a.c)(R,this.hour))&&(Object(a.b)(W)||Object(a.c)(W,this.minute)))break}},L.prototype.addSeconds=function(C,O,R,W,I){for(O&&(this.second+=Math.floor((86399-(3600*this.hour+60*this.minute+this.second))/C)*C);;){this.second+=C;var A=Object(a.a)(this.second,60),H=A.div;if(H&&(this.second=A.mod,this.addMinutes(H,!1,R,W)),(Object(a.b)(R)||Object(a.c)(R,this.hour))&&(Object(a.b)(W)||Object(a.c)(W,this.minute))&&(Object(a.b)(I)||Object(a.c)(I,this.second)))break}},L.prototype.fixDay=function(){if(!(this.day<=28)){var C=n.monthRange(this.year,this.month-1)[1];if(!(this.day<=C))for(;this.day>C;){if(this.day-=C,++this.month,13===this.month&&(this.month=1,++this.year,this.year>n.MAXYEAR))return;C=n.monthRange(this.year,this.month-1)[1]}}},L.prototype.add=function(C,O){var W=C.interval,I=C.wkst,A=C.byhour,H=C.byminute,V=C.bysecond;switch(C.freq){case b.YEARLY:return this.addYears(W);case b.MONTHLY:return this.addMonths(W);case b.WEEKLY:return this.addWeekly(W,I);case b.DAILY:return this.addDaily(W);case b.HOURLY:return this.addHours(W,O,A);case b.MINUTELY:return this.addMinutes(W,O,A,H);case b.SECONDLY:return this.addSeconds(W,O,A,H,V)}},L);function L(C,O,R,W,I,A,H){var V=z.call(this,W,I,A,H)||this;return V.year=C,V.month=O,V.day=R,V}function F(C){for(var O=[],R=0,W=Object.keys(C);R<W.length;R++){var I=W[R];Object(a.c)(Je,I)||O.push(I),r.isDate(C[I])&&!r.isValidDate(C[I])&&O.push(I)}if(O.length)throw new Error("Invalid options: "+O.join(", "));return u({},C)}function B(C){var O=C.split("\n").map(Q).filter(function(R){return null!==R});return u(u({},O[0]),O[1])}function J(C){var O={},R=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(C);if(!R)return O;var W=R[1],I=R[2];return W&&(O.tzid=W),O.dtstart=r.untilStringToDate(I),O}function Q(C){if(!(C=C.replace(/^\s+|\s+$/,"")).length)return null;var O=/^([A-Z]+?)[:;]/.exec(C.toUpperCase());if(!O)return ee(C);var R=O[1];switch(R.toUpperCase()){case"RRULE":case"EXRULE":return ee(C);case"DTSTART":return J(C);default:throw new Error("Unsupported RFC prop "+R+" in "+C)}}function ee(C){var O=J(C.replace(/^RRULE:/i,""));return C.replace(/^(?:RRULE|EXRULE):/i,"").split(";").forEach(function(R){var W,I=R.split("="),A=I[0],H=I[1];switch(A.toUpperCase()){case"FREQ":O.freq=b[H.toUpperCase()];break;case"WKST":O.wkst=Ae[H.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var V=-1===(W=H).indexOf(",")?se(W):W.split(",").map(se),j=A.toLowerCase();O[j]=V;break;case"BYWEEKDAY":case"BYDAY":O.byweekday=H.split(",").map(function(Y){if(2===Y.length)return Ae[Y];var Z=Y.match(/^([+-]?\d{1,2})([A-Z]{2})$/),G=Number(Z[1]);return new S.b(Ae[Z[2]].weekday,G)});break;case"DTSTART":case"TZID":var P=J(C);O.tzid=P.tzid,O.dtstart=P.dtstart;break;case"UNTIL":O.until=r.untilStringToDate(H);break;case"BYEASTER":O.byeaster=Number(H);break;default:throw new Error("Unknown RRULE property '"+A+"'")}}),O}function se(C){return/^[+-]?\d+$/.test(C)?Number(C):C}var fe=(Object.defineProperty(k.prototype,"isUTC",{get:function(){return!this.tzid||"UTC"===this.tzid.toUpperCase()},enumerable:!0,configurable:!0}),k.prototype.toString=function(){var C=r.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+C:";TZID="+this.tzid+":"+C},k.prototype.getTime=function(){return this.date.getTime()},k.prototype.rezonedDate=function(){if(this.isUTC)return this.date;try{return function(){throw new TypeError}().setZone(this.tzid,{keepLocalTime:!0}).toJSDate()}catch(C){return C instanceof TypeError&&console.error("Using TZID without Luxon available is unsupported. Returned times are in UTC, not the requested time zone"),this.date}},k);function k(C,O){this.date=C,this.tzid=O}function h(C){for(var O=[],R="",W=Object.keys(C),I=Object.keys(Qe),A=0;A<W.length;A++)if("tzid"!==W[A]&&Object(a.c)(I,W[A])){var H=W[A].toUpperCase(),V=C[W[A]],j="";if(Object(a.f)(V)&&(!Object(a.d)(V)||V.length)){switch(H){case"FREQ":j=Ce.FREQUENCIES[C.freq];break;case"WKST":j=Object(a.e)(V)?new S.b(V).toString():V.toString();break;case"BYWEEKDAY":H="BYDAY",j=Object(a.n)(V).map(function(q){return q instanceof S.b?q:Object(a.d)(q)?new S.b(q[0],q[1]):new S.b(q)}).toString();break;case"DTSTART":R=g(V,C.tzid);break;case"UNTIL":j=r.timeToUntilString(V,!C.tzid);break;default:if(Object(a.d)(V)){for(var P=[],Y=0;Y<V.length;Y++)P[Y]=String(V[Y]);j=P.toString()}else j=String(V)}j&&O.push([H,j])}}var Z=O.map(function(q){return q[0]+"="+q[1].toString()}).join(";"),G="";return""!==Z&&(G="RRULE:"+Z),[R,G].filter(function(q){return!!q}).join("\n")}function g(C,O){return C?"DTSTART"+new fe(new Date(C),O).toString():""}var D=(x.prototype._cacheAdd=function(C,O,R){O=O&&(O instanceof Date?r.clone(O):r.cloneDates(O)),"all"===C?this.all=O:(R._value=O,this[C].push(R))},x.prototype._cacheGet=function(C,O){function R(P){for(var Y=0;Y<I.length;Y++){var Z=I[Y];if(String(O[Z])!==String(P[Z]))return!0}return!1}var W=!1,I=O?Object.keys(O):[],A=this[C];if("all"===C)W=this.all;else if(Object(a.d)(A))for(var H=0;H<A.length;H++){var V=A[H];if(!I.length||!R(V)){W=V._value;break}}if(!W&&this.all){var j=new s(C,O);for(H=0;H<this.all.length&&j.accept(this.all[H]);H++);W=j.getValue(),this._cacheAdd(C,W,O)}return Object(a.d)(W)?r.cloneDates(W):W instanceof Date?r.clone(W):W},x);function x(){this.all=!1,this.before=[],this.after=[],this.between=[]}var p=m(Object(a.l)(1,31),Object(a.l)(2,28),Object(a.l)(3,31),Object(a.l)(4,30),Object(a.l)(5,31),Object(a.l)(6,30),Object(a.l)(7,31),Object(a.l)(8,31),Object(a.l)(9,30),Object(a.l)(10,31),Object(a.l)(11,30),Object(a.l)(12,31),Object(a.l)(1,7)),E=m(Object(a.l)(1,31),Object(a.l)(2,29),Object(a.l)(3,31),Object(a.l)(4,30),Object(a.l)(5,31),Object(a.l)(6,30),Object(a.l)(7,31),Object(a.l)(8,31),Object(a.l)(9,30),Object(a.l)(10,31),Object(a.l)(11,30),Object(a.l)(12,31),Object(a.l)(1,7)),$=Object(a.k)(1,29),N=Object(a.k)(1,30),U=Object(a.k)(1,31),K=Object(a.k)(1,32),ne=m(K,N,K,U,K,U,K,K,U,K,U,K,K.slice(0,7)),te=m(K,$,K,U,K,U,K,K,U,K,U,K,K.slice(0,7)),ie=Object(a.k)(-28,0),ve=Object(a.k)(-29,0),ce=Object(a.k)(-30,0),he=Object(a.k)(-31,0),xe=m(he,ve,he,ce,he,ce,he,he,ce,he,ce,he,he.slice(0,7)),Ie=m(he,ie,he,ce,he,ce,he,he,ce,he,ce,he,he.slice(0,7)),Ne=[0,31,60,91,121,152,182,213,244,274,305,335,366],we=[0,31,59,90,120,151,181,212,243,273,304,334,365],Se=function(){for(var C=[],O=0;O<55;O++)C=C.concat(Object(a.k)(7));return C}();function De(C){this.options=C}var ze=(De.prototype.rebuild=function(C,O){var R=this.options;if(C!==this.lastyear&&(this.yearinfo=function _e(C,O){var R,W,I,A,H,V,j=new Date(Date.UTC(C,0,1)),P=r.isLeapYear(C)?366:365,Y=r.isLeapYear(C+1)?366:365,Z=r.toOrdinal(j),G=r.getWeekday(j),q=u(u({yearlen:P,nextyearlen:Y,yearordinal:Z,yearweekday:G},(W=r.isLeapYear(R=C)?366:365,I=new Date(Date.UTC(R,0,1)),A=r.getWeekday(I),365!=W?{mmask:E,mdaymask:ne,nmdaymask:xe,wdaymask:Se.slice(A),mrange:Ne}:{mmask:p,mdaymask:te,nmdaymask:Ie,wdaymask:Se.slice(A),mrange:we})),{wnomask:null});if(Object(a.b)(O.byweekno))return q;q.wnomask=Object(a.l)(0,7+P);var X=H=Object(a.j)(7-G+O.wkst,7);V=4<=X?(X=0,q.yearlen+Object(a.j)(G-O.wkst,7)):P-X;for(var oe=Math.floor(V/7),de=Object(a.j)(V,7),ae=Math.floor(oe+de/4),re=0;re<O.byweekno.length;re++){var le=O.byweekno[re];if(le<0&&(le+=ae+1),0<le&&le<=ae){var ue=void 0;1<le?(ue=X+7*(le-1),X!==H&&(ue-=7-H)):ue=X;for(var Me=0;Me<7&&(q.wnomask[ue]=1,ue++,q.wdaymask[ue]!==O.wkst);Me++);}}if(Object(a.c)(O.byweekno,1)&&(ue=X+7*ae,X!==H&&(ue-=7-H),ue<P))for(re=0;re<7&&(ue+=q.wnomask[ue]=1,q.wdaymask[ue]!==O.wkst);re++);if(X){var Ee=void 0;if(Object(a.c)(O.byweekno,-1))Ee=-1;else{var Re,ke=r.getWeekday(new Date(Date.UTC(C-1,0,1))),Le=Object(a.j)(7-ke.valueOf()+O.wkst,7),Te=r.isLeapYear(C-1)?366:365;Re=4<=Le?(Le=0,Te+Object(a.j)(ke-O.wkst,7)):P-X,Ee=Math.floor(52+Object(a.j)(Re,7)/4)}if(Object(a.c)(O.byweekno,Ee))for(ue=0;ue<X;ue++)q.wnomask[ue]=1}return q}(C,R)),Object(a.h)(R.bynweekday)&&(O!==this.lastmonth||C!==this.lastyear)){var W=this.yearinfo;this.monthinfo=function(V,j,P,Y,Z,G){var q={lastyear:V,lastmonth:j,nwdaymask:[]},X=[];if(G.freq===Ce.YEARLY)if(Object(a.b)(G.bymonth))X=[[0,P]];else for(var oe=0;oe<G.bymonth.length;oe++)X.push(Y.slice((j=G.bymonth[oe])-1,j+1));else G.freq===Ce.MONTHLY&&(X=[Y.slice(j-1,j+1)]);if(Object(a.b)(X))return q;for(q.nwdaymask=Object(a.l)(0,P),oe=0;oe<X.length;oe++)for(var de=X[oe],ae=de[0],re=de[1]-1,le=0;le<G.bynweekday.length;le++){var ue=void 0,Me=G.bynweekday[le],Ee=Me[0],ke=Me[1];ke<0?(ue=re+7*(ke+1),ue-=Object(a.j)(Z[ue]-Ee,7)):(ue=ae+7*(ke-1),ue+=Object(a.j)(7-Z[ue]+Ee,7)),ae<=ue&&ue<=re&&(q.nwdaymask[ue]=1)}return q}(C,O,W.yearlen,W.mrange,W.wdaymask,R)}Object(a.f)(R.byeaster)&&(this.eastermask=function(V,j){void 0===j&&(j=0);var P=V%19,Y=Math.floor(V/100),Z=V%100,G=Math.floor(Y/4),q=Y%4,X=Math.floor((Y+8)/25),oe=Math.floor((Y-X+1)/3),de=Math.floor(19*P+Y-G-oe+15)%30,ae=Math.floor(Z/4),le=Math.floor(32+2*q+2*ae-de-Z%4)%7,ue=Math.floor((P+11*de+22*le)/451),Me=Math.floor((de+le-7*ue+114)/31),ke=Date.UTC(V,Me-1,(de+le-7*ue+114)%31+1+j),Le=Date.UTC(V,0,1);return[Math.ceil((ke-Le)/864e5)]}(C,R.byeaster))},Object.defineProperty(De.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(De.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),De.prototype.ydayset=function(){return[Object(a.k)(this.yearlen),0,this.yearlen]},De.prototype.mdayset=function(C,O,R){for(var W=this.mrange[O-1],I=this.mrange[O],A=Object(a.l)(null,this.yearlen),H=W;H<I;H++)A[H]=H;return[A,W,I]},De.prototype.wdayset=function(C,O,R){for(var W=Object(a.l)(null,this.yearlen+7),I=r.toOrdinal(new Date(Date.UTC(C,O-1,R)))-this.yearordinal,A=I,H=0;H<7&&(W[I]=I,++I,this.wdaymask[I]!==this.options.wkst);H++);return[W,A,I]},De.prototype.ddayset=function(C,O,R){var W=Object(a.l)(null,this.yearlen),I=r.toOrdinal(new Date(Date.UTC(C,O-1,R)))-this.yearordinal;return W[I]=I,[W,I,1+I]},De.prototype.htimeset=function(C,O,R,W){var I=this,A=[];return this.options.byminute.forEach(function(H){A=A.concat(I.mtimeset(C,H,R,W))}),r.sort(A),A},De.prototype.mtimeset=function(C,O,R,W){var I=this.options.bysecond.map(function(A){return new _(C,O,A,W)});return r.sort(I),I},De.prototype.stimeset=function(C,O,R,W){return[new _(C,O,R,W)]},De.prototype.getdayset=function(C){switch(C){case b.YEARLY:return this.ydayset.bind(this);case b.MONTHLY:return this.mdayset.bind(this);case b.WEEKLY:return this.wdayset.bind(this);default:return this.ddayset.bind(this)}},De.prototype.gettimeset=function(C){switch(C){case b.HOURLY:return this.htimeset.bind(this);case b.MINUTELY:return this.mtimeset.bind(this);case b.SECONDLY:return this.stimeset.bind(this)}},De);function We(C,O,R,W,I,A){for(var H=[],V=0;V<C.length;V++){var P,j=void 0,Y=C[V];P=Y<0?(j=Math.floor(Y/O.length),Object(a.j)(Y,O.length)):(j=Math.floor((Y-1)/O.length),Object(a.j)(Y-1,O.length));for(var Z=[],G=R;G<W;G++){var q=A[G];Object(a.f)(q)&&Z.push(q)}var X;X=j<0?Z.slice(j)[0]:Z[j];var oe=O[P],de=r.fromOrdinal(I.yearordinal+X),ae=r.combine(de,oe);Object(a.c)(H,ae)||H.push(ae)}return r.sort(H),H}function Ue(C,O){var R=O.dtstart,W=O.freq,A=O.until,H=O.bysetpos,V=O.count;if(0===V||0===O.interval)return me(C);var Le,Te,Re,Ve,qe,Xe,Ze,j=M.fromDate(R),P=new ze(O);P.rebuild(j.year,j.month);for(var Y=(Le=P,Te=j,void 0,void 0,void 0,void 0,qe=(Re=O).byhour,Xe=Re.byminute,Ze=Re.bysecond,v(Ve=Re.freq)?function(je){var it=je.dtstart.getTime()%1e3;if(!v(je.freq))return[];var dt=[];return je.byhour.forEach(function(ct){je.byminute.forEach(function(ut){je.bysecond.forEach(function(at){dt.push(new _(ct,ut,at,it))})})}),dt}(Re):Ve>=Ce.HOURLY&&Object(a.h)(qe)&&!Object(a.c)(qe,Te.hour)||Ve>=Ce.MINUTELY&&Object(a.h)(Xe)&&!Object(a.c)(Xe,Te.minute)||Ve>=Ce.SECONDLY&&Object(a.h)(Ze)&&!Object(a.c)(Ze,Te.second)?[]:Le.gettimeset(Ve)(Te.hour,Te.minute,Te.second,Te.millisecond));;){var Z=P.getdayset(W)(j.year,j.month,j.day),G=Z[0],q=Z[1],X=Z[2],oe=Ke(G,q,X,P,O);if(Object(a.h)(H))for(var de=We(H,Y,q,X,P,G),ae=0;ae<de.length;ae++){var re=de[ae];if(A&&A<re)return me(C);if(R<=re){var le=Ye(re,O);if(!C.accept(le)||V&&!--V)return me(C)}}else for(ae=q;ae<X;ae++){var ue=G[ae];if(Object(a.f)(ue))for(var Me=r.fromOrdinal(P.yearordinal+ue),Ee=0;Ee<Y.length;Ee++)if(re=r.combine(Me,Y[Ee]),A&&A<re||R<=re&&(le=Ye(re,O),!C.accept(le)||V&&!--V))return me(C)}if(0===O.interval||(j.add(O,oe),j.year>r.MAXYEAR))return me(C);v(W)||(Y=P.gettimeset(W)(j.hour,j.minute,j.second,0)),P.rebuild(j.year,j.month)}}function Ye(C,O){return new fe(C,O.tzid).rezonedDate()}function me(C){return C.getValue()}function Ke(C,O,R,W,I){for(var A,H,V,j,P,Y,Z,G,q,X,oe=!1,de=O;de<R;de++){var ae=C[de];A=W,H=ae,j=(V=I).bymonth,P=V.byweekno,Y=V.byweekday,Z=V.byeaster,G=V.bymonthday,q=V.bynmonthday,X=V.byyearday,(oe=Object(a.h)(j)&&!Object(a.c)(j,A.mmask[H])||Object(a.h)(P)&&!A.wnomask[H]||Object(a.h)(Y)&&!Object(a.c)(Y,A.wdaymask[H])||Object(a.h)(A.nwdaymask)&&!A.nwdaymask[H]||null!==Z&&!Object(a.c)(A.eastermask,H)||(Object(a.h)(G)||Object(a.h)(q))&&!Object(a.c)(G,A.mdaymask[H])&&!Object(a.c)(q,A.nmdaymask[H])||Object(a.h)(X)&&(H<A.yearlen&&!Object(a.c)(X,H+1)&&!Object(a.c)(X,-A.yearlen+H)||H>=A.yearlen&&!Object(a.c)(X,H+1-A.yearlen)&&!Object(a.c)(X,-A.nextyearlen+H-A.yearlen)))&&(C[ae]=null)}return oe}var Be=function(){return Be._nlp||(Be._nlp=t(3)),Be._nlp},Ae={MO:new S.b(0),TU:new S.b(1),WE:new S.b(2),TH:new S.b(3),FR:new S.b(4),SA:new S.b(5),SU:new S.b(6)},Qe={freq:b.YEARLY,dtstart:null,interval:1,wkst:Ae.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Je=Object.keys(Qe);function ye(C,O){void 0===C&&(C={}),void 0===O&&(O=!1),this._cache=O?null:new D,this.origOptions=F(C);var R=function(W){var I=u(u({},Qe),F(W));if(Object(a.f)(I.byeaster)&&(I.freq=Ce.YEARLY),!Object(a.f)(I.freq)||!Ce.FREQUENCIES[I.freq])throw new Error("Invalid frequency: "+I.freq+" "+W.freq);if(I.dtstart||(I.dtstart=new Date((new Date).setMilliseconds(0))),Object(a.f)(I.wkst)?Object(a.e)(I.wkst)||(I.wkst=I.wkst.weekday):I.wkst=Ce.MO.weekday,Object(a.f)(I.bysetpos)){Object(a.e)(I.bysetpos)&&(I.bysetpos=[I.bysetpos]);for(var A=0;A<I.bysetpos.length;A++)if(0===(j=I.bysetpos[A])||!(-366<=j&&j<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}if(!(Boolean(I.byweekno)||Object(a.h)(I.byweekno)||Object(a.h)(I.byyearday)||Boolean(I.bymonthday)||Object(a.h)(I.bymonthday)||Object(a.f)(I.byweekday)||Object(a.f)(I.byeaster)))switch(I.freq){case Ce.YEARLY:I.bymonth||(I.bymonth=I.dtstart.getUTCMonth()+1),I.bymonthday=I.dtstart.getUTCDate();break;case Ce.MONTHLY:I.bymonthday=I.dtstart.getUTCDate();break;case Ce.WEEKLY:I.byweekday=[r.getWeekday(I.dtstart)]}if(Object(a.f)(I.bymonth)&&!Object(a.d)(I.bymonth)&&(I.bymonth=[I.bymonth]),Object(a.f)(I.byyearday)&&!Object(a.d)(I.byyearday)&&Object(a.e)(I.byyearday)&&(I.byyearday=[I.byyearday]),Object(a.f)(I.bymonthday))if(Object(a.d)(I.bymonthday)){var H=[],V=[];for(A=0;A<I.bymonthday.length;A++){var j;0<(j=I.bymonthday[A])?H.push(j):j<0&&V.push(j)}I.bymonthday=H,I.bynmonthday=V}else I.bymonthday<0?(I.bynmonthday=[I.bymonthday],I.bymonthday=[]):(I.bynmonthday=[],I.bymonthday=[I.bymonthday]);else I.bymonthday=[],I.bynmonthday=[];if(Object(a.f)(I.byweekno)&&!Object(a.d)(I.byweekno)&&(I.byweekno=[I.byweekno]),Object(a.f)(I.byweekday))if(Object(a.e)(I.byweekday))I.byweekday=[I.byweekday],I.bynweekday=null;else if(Object(a.g)(I.byweekday))I.byweekday=[S.b.fromStr(I.byweekday).weekday],I.bynweekday=null;else if(I.byweekday instanceof S.b)!I.byweekday.n||I.freq>Ce.MONTHLY?(I.byweekday=[I.byweekday.weekday],I.bynweekday=null):(I.bynweekday=[[I.byweekday.weekday,I.byweekday.n]],I.byweekday=null);else{var P=[],Y=[];for(A=0;A<I.byweekday.length;A++){var Z=I.byweekday[A];Object(a.e)(Z)?P.push(Z):Object(a.g)(Z)?P.push(S.b.fromStr(Z).weekday):!Z.n||I.freq>Ce.MONTHLY?P.push(Z.weekday):Y.push([Z.weekday,Z.n])}I.byweekday=Object(a.h)(P)?P:null,I.bynweekday=Object(a.h)(Y)?Y:null}else I.bynweekday=null;return Object(a.f)(I.byhour)?Object(a.e)(I.byhour)&&(I.byhour=[I.byhour]):I.byhour=I.freq<Ce.HOURLY?[I.dtstart.getUTCHours()]:null,Object(a.f)(I.byminute)?Object(a.e)(I.byminute)&&(I.byminute=[I.byminute]):I.byminute=I.freq<Ce.MINUTELY?[I.dtstart.getUTCMinutes()]:null,Object(a.f)(I.bysecond)?Object(a.e)(I.bysecond)&&(I.bysecond=[I.bysecond]):I.bysecond=I.freq<Ce.SECONDLY?[I.dtstart.getUTCSeconds()]:null,{parsedOptions:I}}(C).parsedOptions;this.options=R}var Ge,Ce=(ye.parseText=function(C,O){return Be().parseText(C,O)},ye.fromText=function(C,O){return Be().fromText(C,O)},ye.fromString=function(C){return new ye(ye.parseString(C)||void 0)},ye.prototype._iter=function(C){return Ue(C,this.options)},ye.prototype._cacheGet=function(C,O){return!!this._cache&&this._cache._cacheGet(C,O)},ye.prototype._cacheAdd=function(C,O,R){if(this._cache)return this._cache._cacheAdd(C,O,R)},ye.prototype.all=function(C){if(C)return this._iter(new w("all",{},C));var O=this._cacheGet("all");return!1===O&&(O=this._iter(new s("all",{})),this._cacheAdd("all",O)),O},ye.prototype.between=function(C,O,R,W){if(void 0===R&&(R=!1),!r.isValidDate(C)||!r.isValidDate(O))throw new Error("Invalid date passed in to RRule.between");var I={before:O,after:C,inc:R};if(W)return this._iter(new w("between",I,W));var A=this._cacheGet("between",I);return!1===A&&(A=this._iter(new s("between",I)),this._cacheAdd("between",A,I)),A},ye.prototype.before=function(C,O){if(void 0===O&&(O=!1),!r.isValidDate(C))throw new Error("Invalid date passed in to RRule.before");var R={dt:C,inc:O},W=this._cacheGet("before",R);return!1===W&&(W=this._iter(new s("before",R)),this._cacheAdd("before",W,R)),W},ye.prototype.after=function(C,O){if(void 0===O&&(O=!1),!r.isValidDate(C))throw new Error("Invalid date passed in to RRule.after");var R={dt:C,inc:O},W=this._cacheGet("after",R);return!1===W&&(W=this._iter(new s("after",R)),this._cacheAdd("after",W,R)),W},ye.prototype.count=function(){return this.all().length},ye.prototype.toString=function(){return h(this.origOptions)},ye.prototype.toText=function(C,O,R){return Be().toText(this,C,O,R)},ye.prototype.isFullyConvertibleToText=function(){return Be().isFullyConvertible(this)},ye.prototype.clone=function(){return new ye(this.origOptions)},ye.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],ye.YEARLY=b.YEARLY,ye.MONTHLY=b.MONTHLY,ye.WEEKLY=b.WEEKLY,ye.DAILY=b.DAILY,ye.HOURLY=b.HOURLY,ye.MINUTELY=b.MINUTELY,ye.SECONDLY=b.SECONDLY,ye.MO=Ae.MO,ye.TU=Ae.TU,ye.WE=Ae.WE,ye.TH=Ae.TH,ye.FR=Ae.FR,ye.SA=Ae.SA,ye.SU=Ae.SU,ye.parseString=B,ye.optionsToString=h,ye),et={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function $e(C,O){return void 0===O&&(O={}),function(R,W){var I=function ht(C,O){var R=[],W=[],I=[],A=[],H=J(C),V=H.dtstart,j=H.tzid;return function(P,Y){if(void 0===Y&&(Y=!1),!(P=P&&P.trim()))throw new Error("Invalid empty string");if(!Y)return P.split(/\s/);for(var Z=P.split("\n"),G=0;G<Z.length;){var q=Z[G]=Z[G].replace(/\s+$/g,"");q?0<G&&" "===q[0]?(Z[G-1]+=q.slice(1),Z.splice(G,1)):G+=1:Z.splice(G,1)}return Z}(C,O.unfold).forEach(function(P){if(P){var Y=function(de){var ae=function(Me){if(-1===Me.indexOf(":"))return{name:"RRULE",value:Me};var Ee=Object(a.m)(Me,":",1);return{name:Ee[0],value:Ee[1]}}(de),le=ae.value,ue=ae.name.split(";");if(!ue)throw new Error("empty property name");return{name:ue[0].toUpperCase(),parms:ue.slice(1),value:le}}(P),Z=Y.name,G=Y.parms,q=Y.value;switch(Z.toUpperCase()){case"RRULE":if(G.length)throw new Error("unsupported RRULE parm: "+G.join(","));R.push(B(P));break;case"RDATE":var oe=/RDATE(?:;TZID=([^:=]+))?/i.exec(P)[1];oe&&!j&&(j=oe),W=W.concat(rt(q,G));break;case"EXRULE":if(G.length)throw new Error("unsupported EXRULE parm: "+G.join(","));I.push(B(q));break;case"EXDATE":A=A.concat(rt(q,G));break;case"DTSTART":break;default:throw new Error("unsupported property: "+Z)}}}),{dtstart:V,tzid:j,rrulevals:R,rdatevals:W,exrulevals:I,exdatevals:A}}(R,W),A=I.rrulevals,H=I.rdatevals,V=I.exrulevals,j=I.exdatevals,P=I.dtstart,Y=I.tzid,Z=!1===W.cache;if(W.compatible&&(W.forceset=!0,W.unfold=!0),W.forceset||1<A.length||H.length||V.length||j.length){var G=new tt(Z);return G.dtstart(P),G.tzid(Y||void 0),A.forEach(function(X){G.rrule(new Ce(Fe(X,P,Y),Z))}),H.forEach(function(X){G.rdate(X)}),V.forEach(function(X){G.exrule(new Ce(Fe(X,P,Y),Z))}),j.forEach(function(X){G.exdate(X)}),W.compatible&&W.dtstart&&G.rdate(P),G}var q=A[0]||{};return new Ce(Fe(q,q.dtstart||W.dtstart||P,q.tzid||W.tzid||Y),Z)}(C,function(R){var W=[],I=Object.keys(R),A=Object.keys(et);if(I.forEach(function(H){Object(a.c)(A,H)||W.push(H)}),W.length)throw new Error("Invalid options: "+W.join(", "));return u(u({},et),R)}(O))}function Fe(C,O,R){return u(u({},C),{dtstart:O,tzid:R})}function rt(C,O){return O.forEach(function(R){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(R))throw new Error("unsupported RDATE/EXDATE parm: "+R)}),C.split(",").map(function(R){return r.untilStringToDate(R)})}function ot(C){var O=this;return function(R){if(void 0!==R&&(O["_"+C]=R),void 0!==O["_"+C])return O["_"+C];for(var W=0;W<O._rrule.length;W++){var I=O._rrule[W].origOptions[C];if(I)return I}}}function Pe(C){void 0===C&&(C=!1);var O=Ge.call(this,{},C)||this;return O.dtstart=ot.apply(O,["dtstart"]),O.tzid=ot.apply(O,["tzid"]),O._rrule=[],O._rdate=[],O._exrule=[],O._exdate=[],O}var tt=(d(Pe,Ge=Ce),Pe.prototype._iter=function(C){return function(O,R,W,I,A,H){var V={},j=O.accept;function P(q,X){W.forEach(function(oe){oe.between(q,X,!0).forEach(function(de){V[Number(de)]=!0})})}A.forEach(function(q){var X=new fe(q,H).rezonedDate();V[Number(X)]=!0}),O.accept=function(q){var X=Number(q);return isNaN(X)?j.call(this,q):!(!V[X]&&(P(new Date(X-1),new Date(X+1)),!V[X]))||(V[X]=!0,j.call(this,q))},"between"===O.method&&(P(O.args.after,O.args.before),O.accept=function(q){var X=Number(q);return!!V[X]||(V[X]=!0,j.call(this,q))});for(var Y=0;Y<I.length;Y++){var Z=new fe(I[Y],H).rezonedDate();if(!O.accept(new Date(Z.getTime())))break}R.forEach(function(q){Ue(O,q.options)});var G=O._result;switch(r.sort(G),O.method){case"all":case"between":return G;case"before":return G.length&&G[G.length-1]||null;default:return G.length&&G[0]||null}}(C,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},Pe.prototype.rrule=function(C){nt(C,this._rrule)},Pe.prototype.exrule=function(C){nt(C,this._exrule)},Pe.prototype.rdate=function(C){st(C,this._rdate)},Pe.prototype.exdate=function(C){st(C,this._exdate)},Pe.prototype.rrules=function(){return this._rrule.map(function(C){return $e(C.toString())})},Pe.prototype.exrules=function(){return this._exrule.map(function(C){return $e(C.toString())})},Pe.prototype.rdates=function(){return this._rdate.map(function(C){return new Date(C.getTime())})},Pe.prototype.exdates=function(){return this._exdate.map(function(C){return new Date(C.getTime())})},Pe.prototype.valueOf=function(){var C=[];return!this._rrule.length&&this._dtstart&&(C=C.concat(h({dtstart:this._dtstart}))),this._rrule.forEach(function(O){C=C.concat(O.toString().split("\n"))}),this._exrule.forEach(function(O){C=C.concat(O.toString().split("\n").map(function(R){return R.replace(/^RRULE:/,"EXRULE:")}).filter(function(R){return!/^DTSTART/.test(R)}))}),this._rdate.length&&C.push(lt("RDATE",this._rdate,this.tzid())),this._exdate.length&&C.push(lt("EXDATE",this._exdate,this.tzid())),C},Pe.prototype.toString=function(){return this.valueOf().join("\n")},Pe.prototype.clone=function(){var C=new Pe(!!this._cache);return this._rrule.forEach(function(O){return C.rrule(O.clone())}),this._exrule.forEach(function(O){return C.exrule(O.clone())}),this._rdate.forEach(function(O){return C.rdate(new Date(O.getTime()))}),this._exdate.forEach(function(O){return C.exdate(new Date(O.getTime()))}),C},Pe);function nt(C,O){if(!(C instanceof Ce))throw new TypeError(String(C)+" is not RRule instance");Object(a.c)(O.map(String),String(C))||O.push(C)}function st(C,O){if(!(C instanceof Date))throw new TypeError(String(C)+" is not Date instance");Object(a.c)(O.map(Number),Number(C))||(O.push(C),r.sort(O))}function lt(C,O,R){var W=!R||"UTC"===R.toUpperCase();return(W?C+":":C+";TZID="+R+":")+O.map(function(I){return r.timeToUntilString(I.valueOf(),W)}).join(",")}t.d(e,"rrulestr",function(){return $e}),t.d(e,"Frequency",function(){return b}),t.d(e,"Weekday",function(){return S.b}),t.d(e,"RRule",function(){return Ce}),t.d(e,"RRuleSet",function(){return tt}),e.default=Ce},function(be,e,t){"use strict";t.d(e,"a",function(){return n}),t.d(e,"b",function(){return i});var n=["MO","TU","WE","TH","FR","SA","SU"],i=(a.fromStr=function(r){return new a(n.indexOf(r))},a.prototype.nth=function(r){return this.n===r?this:new a(this.weekday,r)},a.prototype.equals=function(r){return this.weekday===r.weekday&&this.n===r.n},a.prototype.toString=function(){var r=n[this.weekday];return this.n&&(r=(0<this.n?"+":"")+String(this.n)+r),r},a.prototype.getJsWeekday=function(){return 6===this.weekday?0:this.weekday+1},a);function a(r,o){if(0===o)throw new Error("Can't create weekday with n == 0");this.weekday=r,this.n=o}},function(be,e,t){"use strict";function n(v,S){return-1!==v.indexOf(S)}function i(v){return v.toString()}function a(v,S,_){return S+" "+_+", "+v}t.r(e);var r={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},o=t(1),s=t(0);function l(v,S,_,T){if(void 0===S&&(S=i),void 0===_&&(_=r),void 0===T&&(T=a),this.text=[],this.language=_||r,this.gettext=S,this.dateFormatter=T,this.rrule=v,this.options=v.options,this.origOptions=v.origOptions,this.origOptions.bymonthday){var z=[].concat(this.options.bymonthday),M=[].concat(this.options.bynmonthday);z.sort(function(J,Q){return J-Q}),M.sort(function(J,Q){return Q-J}),this.bymonthday=z.concat(M),this.bymonthday.length||(this.bymonthday=null)}if(Object(s.f)(this.origOptions.byweekday)){var L=Object(s.d)(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],F=String(L);this.byweekday={allWeeks:L.filter(function(J){return!J.n}),someWeeks:L.filter(function(J){return Boolean(J.n)}),isWeekdays:-1!==F.indexOf("MO")&&-1!==F.indexOf("TU")&&-1!==F.indexOf("WE")&&-1!==F.indexOf("TH")&&-1!==F.indexOf("FR")&&-1===F.indexOf("SA")&&-1===F.indexOf("SU"),isEveryDay:-1!==F.indexOf("MO")&&-1!==F.indexOf("TU")&&-1!==F.indexOf("WE")&&-1!==F.indexOf("TH")&&-1!==F.indexOf("FR")&&-1!==F.indexOf("SA")&&-1!==F.indexOf("SU")};var B=function(J,Q){return J.weekday-Q.weekday};this.byweekday.allWeeks.sort(B),this.byweekday.someWeeks.sort(B),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}var d=(l.isFullyConvertible=function(v){if(!(v.options.freq in l.IMPLEMENTED)||v.origOptions.until&&v.origOptions.count)return!1;for(var S in v.origOptions){if(n(["dtstart","wkst","freq"],S))return!0;if(!n(l.IMPLEMENTED[v.options.freq],S))return!1}return!0},l.prototype.isFullyConvertible=function(){return l.isFullyConvertible(this.rrule)},l.prototype.toString=function(){var v=this.gettext;if(!(this.options.freq in l.IMPLEMENTED))return v("RRule error: Unable to fully convert this rrule to text");if(this.text=[v("every")],this[o.default.FREQUENCIES[this.options.freq]](),this.options.until){this.add(v("until"));var S=this.options.until;this.add(this.dateFormatter(S.getUTCFullYear(),this.language.monthNames[S.getUTCMonth()],S.getUTCDate()))}else this.options.count&&this.add(v("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?v("times"):v("time"));return this.isFullyConvertible()||this.add(v("(~ approximate)")),this.text.join("")},l.prototype.HOURLY=function(){var v=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?v("hours"):v("hour"))},l.prototype.MINUTELY=function(){var v=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?v("minutes"):v("minute"))},l.prototype.DAILY=function(){var v=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.byweekday&&this.byweekday.isWeekdays?this.plural(this.options.interval)?v("weekdays"):v("weekday"):this.plural(this.options.interval)?v("days"):v("day")),this.origOptions.bymonth&&(this.add(v("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},l.prototype.WEEKLY=function(){var v=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?v("weeks"):v("week")),this.byweekday&&this.byweekday.isWeekdays?1===this.options.interval?this.add(this.plural(this.options.interval)?v("weekdays"):v("weekday")):this.add(v("on")).add(v("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?v("days"):v("day")):(1===this.options.interval&&this.add(v("week")),this.origOptions.bymonth&&(this.add(v("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},l.prototype.MONTHLY=function(){var v=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()).add(v("months")),this.plural(this.options.interval)&&this.add(v("in"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?v("months"):v("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(v("on")).add(v("weekdays")):this.byweekday&&this._byweekday()},l.prototype.YEARLY=function(){var v=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()),this.add(v("years"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?v("years"):v("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(v("on the")).add(this.list(this.options.byyearday,this.nth,v("and"))).add(v("day")),this.options.byweekno&&this.add(v("in")).add(this.plural(this.options.byweekno.length)?v("weeks"):v("week")).add(this.list(this.options.byweekno,void 0,v("and")))},l.prototype._bymonthday=function(){var v=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(v("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,v("or"))).add(v("the")).add(this.list(this.bymonthday,this.nth,v("or"))):this.add(v("on the")).add(this.list(this.bymonthday,this.nth,v("and")))},l.prototype._byweekday=function(){var v=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(v("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(v("and")),this.add(v("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,v("and"))))},l.prototype._byhour=function(){var v=this.gettext;this.add(v("at")).add(this.list(this.origOptions.byhour,void 0,v("and")))},l.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},l.prototype.nth=function(v){var S,_;v=parseInt(v.toString(),10);var T=this.gettext;if(-1===v)return T("last");switch(_=Math.abs(v)){case 1:case 21:case 31:S=_+T("st");break;case 2:case 22:S=_+T("nd");break;case 3:case 23:S=_+T("rd");break;default:S=_+T("th")}return v<0?S+" "+T("last"):S},l.prototype.monthtext=function(v){return this.language.monthNames[v-1]},l.prototype.weekdaytext=function(v){var S=Object(s.e)(v)?(v+1)%7:v.getJsWeekday();return(v.n?this.nth(v.n)+" ":"")+this.language.dayNames[S]},l.prototype.plural=function(v){return v%100!=1},l.prototype.add=function(v){return this.text.push(" "),this.text.push(v),this},l.prototype.list=function(v,S,_,T){function z(L){return S&&S.call(M,L)}void 0===T&&(T=","),Object(s.d)(v)||(v=[v]),S=S||function(L){return L.toString()};var M=this;return _?function(L,F,B){for(var J="",Q=0;Q<L.length;Q++)0!==Q&&(J+=Q===L.length-1?" "+B+" ":F+" "),J+=L[Q];return J}(v.map(z),T,_):v.map(z).join(T+" ")},l),c=(u.prototype.start=function(v){return this.text=v,this.done=!1,this.nextSymbol()},u.prototype.isDone=function(){return this.done&&null===this.symbol},u.prototype.nextSymbol=function(){var v,S;this.symbol=null,this.value=null;do{if(this.done)return!1;for(var _ in v=null,this.rules){var T=this.rules[_].exec(this.text);T&&(null===v||T[0].length>v[0].length)&&(v=T,S=_)}if(null!=v&&(this.text=this.text.substr(v[0].length),""===this.text&&(this.done=!0)),null==v)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"===S);return this.symbol=S,this.value=v,!0},u.prototype.accept=function(v){if(this.symbol!==v)return!1;if(this.value){var S=this.value;return this.nextSymbol(),S}return this.nextSymbol(),!0},u.prototype.acceptNumber=function(){return this.accept("number")},u.prototype.expect=function(v){if(this.accept(v))return!0;throw new Error("expected "+v+" but found "+this.symbol)},u);function u(v){this.done=!0,this.rules=v}function m(v,S){void 0===S&&(S=r);var _={},T=new c(S.tokens);return T.start(v)?(function(){T.expect("every");var J=T.acceptNumber();if(J&&(_.interval=parseInt(J[0],10)),T.isDone())throw new Error("Unexpected end");switch(T.symbol){case"day(s)":_.freq=o.default.DAILY,T.nextSymbol()&&(function(){if(T.accept("at"))do{var pe=T.acceptNumber();if(!pe)throw new Error("Unexpected symbol "+T.symbol+", expected hour");for(_.byhour=[parseInt(pe[0],10)];T.accept("comma");){if(!(pe=T.acceptNumber()))throw new Error("Unexpected symbol "+T.symbol+"; expected hour");_.byhour.push(parseInt(pe[0],10))}}while(T.accept("comma")||T.accept("at"))}(),B());break;case"weekday(s)":_.freq=o.default.WEEKLY,_.byweekday=[o.default.MO,o.default.TU,o.default.WE,o.default.TH,o.default.FR],T.nextSymbol(),B();break;case"week(s)":_.freq=o.default.WEEKLY,T.nextSymbol()&&(z(),B());break;case"hour(s)":_.freq=o.default.HOURLY,T.nextSymbol()&&(z(),B());break;case"minute(s)":_.freq=o.default.MINUTELY,T.nextSymbol()&&(z(),B());break;case"month(s)":_.freq=o.default.MONTHLY,T.nextSymbol()&&(z(),B());break;case"year(s)":_.freq=o.default.YEARLY,T.nextSymbol()&&(z(),B());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":_.freq=o.default.WEEKLY;var Q=T.symbol.substr(0,2).toUpperCase();if(_.byweekday=[o.default[Q]],!T.nextSymbol())return;for(;T.accept("comma");){if(T.isDone())throw new Error("Unexpected end");var ee=L();if(!ee)throw new Error("Unexpected symbol "+T.symbol+", expected weekday");_.byweekday.push(o.default[ee]),T.nextSymbol()}(function(){T.accept("on"),T.accept("the");var pe=F();if(pe)for(_.bymonthday=[pe],T.nextSymbol();T.accept("comma");){if(!(pe=F()))throw new Error("Unexpected symbol "+T.symbol+"; expected monthday");_.bymonthday.push(pe),T.nextSymbol()}})(),B();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(_.freq=o.default.YEARLY,_.bymonth=[M()],!T.nextSymbol())return;for(;T.accept("comma");){if(T.isDone())throw new Error("Unexpected end");var se=M();if(!se)throw new Error("Unexpected symbol "+T.symbol+", expected month");_.bymonth.push(se),T.nextSymbol()}z(),B();break;default:throw new Error("Unknown symbol")}}(),_):null;function z(){var J=T.accept("on"),Q=T.accept("the");if(J||Q)do{var ee=F(),se=L(),pe=M();if(ee)se?(T.nextSymbol(),_.byweekday||(_.byweekday=[]),_.byweekday.push(o.default[se].nth(ee))):(_.bymonthday||(_.bymonthday=[]),_.bymonthday.push(ee),T.accept("day(s)"));else if(se)T.nextSymbol(),_.byweekday||(_.byweekday=[]),_.byweekday.push(o.default[se]);else if("weekday(s)"===T.symbol)T.nextSymbol(),_.byweekday||(_.byweekday=[o.default.MO,o.default.TU,o.default.WE,o.default.TH,o.default.FR]);else if("week(s)"===T.symbol){T.nextSymbol();var fe=T.acceptNumber();if(!fe)throw new Error("Unexpected symbol "+T.symbol+", expected week number");for(_.byweekno=[parseInt(fe[0],10)];T.accept("comma");){if(!(fe=T.acceptNumber()))throw new Error("Unexpected symbol "+T.symbol+"; expected monthday");_.byweekno.push(parseInt(fe[0],10))}}else{if(!pe)return;T.nextSymbol(),_.bymonth||(_.bymonth=[]),_.bymonth.push(pe)}}while(T.accept("comma")||T.accept("the")||T.accept("on"))}function M(){switch(T.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function L(){switch(T.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return T.symbol.substr(0,2).toUpperCase();default:return!1}}function F(){switch(T.symbol){case"last":return T.nextSymbol(),-1;case"first":return T.nextSymbol(),1;case"second":return T.nextSymbol(),T.accept("last")?-2:2;case"third":return T.nextSymbol(),T.accept("last")?-3:3;case"nth":var J=parseInt(T.value[1],10);if(J<-366||366<J)throw new Error("Nth out of range: "+J);return T.nextSymbol(),T.accept("last")?-J:J;default:return!1}}function B(){if("until"===T.symbol){var J=Date.parse(T.text);if(!J)throw new Error("Cannot parse until date:"+T.text);_.until=new Date(J)}else T.accept("for")&&(_.count=parseInt(T.value[0],10),T.expect("number"))}}t.d(e,"fromText",function(){return y}),t.d(e,"isFullyConvertible",function(){return w}),t.d(e,"toText",function(){return f}),t.d(e,"parseText",function(){return m});var y=function(v,S){return void 0===S&&(S=r),new o.default(m(v,S)||void 0)},b=["count","until","interval","byweekday","bymonthday","bymonth"];d.IMPLEMENTED=[],d.IMPLEMENTED[o.default.HOURLY]=b,d.IMPLEMENTED[o.default.MINUTELY]=b,d.IMPLEMENTED[o.default.DAILY]=["byhour"].concat(b),d.IMPLEMENTED[o.default.WEEKLY]=b,d.IMPLEMENTED[o.default.MONTHLY]=b,d.IMPLEMENTED[o.default.YEARLY]=["byweekno","byyearday"].concat(b);var f=function(v,S,_,T){return new d(v,S,_,T).toString()},w=d.isFullyConvertible}],He.c=ge,He.d=function(be,e,t){He.o(be,e)||Object.defineProperty(be,e,{enumerable:!0,get:t})},He.r=function(be){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(be,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(be,"__esModule",{value:!0})},He.t=function(be,e){if(1&e&&(be=He(be)),8&e||4&e&&"object"==typeof be&&be&&be.__esModule)return be;var t=Object.create(null);if(He.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:be}),2&e&&"string"!=typeof be)for(var n in be)He.d(t,n,function(i){return be[i]}.bind(null,n));return t},He.n=function(be){var e=be&&be.__esModule?function(){return be.default}:function(){return be};return He.d(e,"a",e),e},He.o=function(be,e){return Object.prototype.hasOwnProperty.call(be,e)},He.p="",He(He.s=1);function He(be){if(ge[be])return ge[be].exports;var e=ge[be]={i:be,l:!1,exports:{}};return Oe[be].call(e.exports,e,e.exports,He),e.l=!0,e.exports}var Oe,ge}()}}]);