"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[6305],{6305:(nt,x,s)=>{s.r(x),s.d(x,{PagosModule:()=>r});var p=s(6895),d=s(4006),R=s(8277),u=s(4859),P=s(148),T=s(9549),g=s(7392),D=s(284),S=s(6338),h=s(8739),A=s(4385),U=s(3267),N=s(455),c=s(6308),n=s(3626),Z=s(266),Y=s(9132),L=s(5017),Q=s(4968),b=s(4707),B=s(6451),t=s(4650),C=s(7495),J=s(2340),G=s(9104),w=s(9751),z=s(529),F=s(8951);class i{constructor(a,o,l,f){this._httpClient=a,this._userService=o,this._zone=l,this._authService=f,this._apiHost=J.N.apiUrl+"/reporting/v1"}getExcel(){return this._httpClient.get(this._apiHost+"/rep/credito/pagos/excel",{responseType:"blob"})}getData(a,o,l){return new w.y(f=>{var v=new G.EventSourcePolyfill(this._apiHost+"/rep/credito/pagos",{headers:{Authorization:"Bearer "+this._authService.accessToken,"Application-corp":this._userService.userO.empresa.id}});v.onmessage=y=>{this._zone.run(()=>{f.next(y)})},v.onerror=y=>{v.close(),this._zone.run(()=>{})}})}}function j(e,a){1&e&&(t.TgZ(0,"div",23),t._UZ(1,"mat-spinner"),t.qZA())}function H(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"#"),t.qZA())}function I(e,a){if(1&e&&(t.TgZ(0,"mat-cell",25)(1,"span"),t._uU(2),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.hij(" ",o.consecutivo," ")}}function E(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Fecha"),t.qZA())}function $(e,a){if(1&e&&(t.TgZ(0,"mat-cell",25)(1,"span"),t._uU(2),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.hij(" ",o.fechaPago," ")}}function O(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Pago"),t.qZA())}function M(e,a){if(1&e&&(t.TgZ(0,"mat-cell",25)(1,"span"),t._uU(2),t.ALo(3,"currency"),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,o.pago)," ")}}function X(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Saldo"),t.qZA())}function V(e,a){if(1&e&&(t.TgZ(0,"mat-cell",25)(1,"span"),t._uU(2),t.ALo(3,"currency"),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,o.saldo)," ")}}function W(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Tipo"),t.qZA())}function K(e,a){if(1&e&&(t.TgZ(0,"mat-cell",25)(1,"span"),t._uU(2),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.hij(" ",o.tipo," ")}}function _(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Cobrador"),t.qZA())}function k(e,a){if(1&e&&(t.TgZ(0,"mat-cell",25)(1,"span"),t._uU(2),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.AsE(" ",null==o.cobrador?null:o.cobrador.nombre," ",null==o.cobrador?null:o.cobrador.apellidoPaterno," ")}}function q(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Status"),t.qZA())}function tt(e,a){if(1&e&&(t.TgZ(0,"mat-cell",25)(1,"span"),t._uU(2),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.hij(" ",o.status," ")}}function et(e,a){1&e&&t._UZ(0,"mat-header-row")}function at(e,a){1&e&&t._UZ(0,"mat-row")}i.\u0275fac=function(a){return new(a||i)(t.LFG(z.eN),t.LFG(C.K),t.LFG(t.R0b),t.LFG(F.e))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"});class m{constructor(a,o,l){this.userService=a,this._pagosService=o,this._formBuilder=l,this.products=[],this.dataToDisplay=new Array,this.resultsLength=0,this.isLoadingResults=!1,this.dataSource=new ot(this.dataToDisplay),this.columns=["consecutivo","fechaPago","pago","saldo","tipo","cobrador","status"]}ngOnInit(){this.paramsForm=this._formBuilder.group({fechaInicio:[""],fechaFin:[""]})}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,B.T)(this.sort.sortChange,this.paginator.page,(0,Q.R)(document.getElementById("descarga"),"click")).subscribe(a=>{this.descarga()})}addData(a){this.dataSource.setData(a)}removeData(){this.dataToDisplay=this.dataToDisplay.slice(0,-1),this.dataSource.setData(this.dataToDisplay)}descarga(){this.products=[],this.isLoadingResults=!0,this._pagosService.getData(this.sort.active,this.sort.direction,this.paginator.pageIndex).subscribe(a=>{this.isLoadingResults=!1;let o=JSON.parse(a.data);this.products.push(o),this.addData(this.products),this.resultsLength=this.products.length})}}m.\u0275fac=function(a){return new(a||m)(t.Y36(C.K),t.Y36(i),t.Y36(d.qu))},m.\u0275cmp=t.Xpm({type:m,selectors:[["pagos-rep"]],viewQuery:function(a,o){if(1&a&&(t.Gf(h.NW,5),t.Gf(c.YE,5)),2&a){let l;t.iGM(l=t.CRH())&&(o.paginator=l.first),t.iGM(l=t.CRH())&&(o.sort=l.first)}},inputs:{columns:"columns"},decls:37,vars:9,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4",3,"formGroup"],[1,"flex","flex-row","lg:flex-col","w-full","lg:w-1/3","lg:pl-8"],["id","descarga","mat-flat-button","",1,"ml-4","bg-primary","mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button","mat-primary","mat-mdc-button-base",3,"color"],[3,"svgIcon"],[1,"ml-2","mr-1"],["class","example-loading-shade",4,"ngIf"],["matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc","start","desc",1,"overflow-x-scroll",3,"dataSource"],["sort","matSort"],["matColumnDef","consecutivo"],["mat-sort-header","",4,"matHeaderCellDef"],["fxLayout","row","fxLayoutAlign","start center",4,"matCellDef"],["matColumnDef","fechaPago"],["matColumnDef","pago"],["matColumnDef","saldo"],["matColumnDef","tipo"],["matColumnDef","cobrador"],["matColumnDef","status"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["aria-label","Select page of GitHub search results",3,"length","pageSize"],[1,"example-loading-shade"],["mat-sort-header",""],["fxLayout","row","fxLayoutAlign","start center"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3," Reporte de pagos "),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"div",4),t.TgZ(6,"button",5),t._UZ(7,"mat-icon",6),t.TgZ(8,"span",7),t._uU(9,"Generar"),t.qZA()()()(),t.YNc(10,j,2,0,"div",8),t.TgZ(11,"mat-table",9,10),t.ynx(13,11),t.YNc(14,H,2,0,"mat-header-cell",12),t.YNc(15,I,3,1,"mat-cell",13),t.BQk(),t.ynx(16,14),t.YNc(17,E,2,0,"mat-header-cell",12),t.YNc(18,$,3,1,"mat-cell",13),t.BQk(),t.ynx(19,15),t.YNc(20,O,2,0,"mat-header-cell",12),t.YNc(21,M,4,3,"mat-cell",13),t.BQk(),t.ynx(22,16),t.YNc(23,X,2,0,"mat-header-cell",12),t.YNc(24,V,4,3,"mat-cell",13),t.BQk(),t.ynx(25,17),t.YNc(26,W,2,0,"mat-header-cell",12),t.YNc(27,K,3,1,"mat-cell",13),t.BQk(),t.ynx(28,18),t.YNc(29,_,2,0,"mat-header-cell",12),t.YNc(30,k,3,2,"mat-cell",13),t.BQk(),t.ynx(31,19),t.YNc(32,q,2,0,"mat-header-cell",12),t.YNc(33,tt,3,1,"mat-cell",13),t.BQk(),t.YNc(34,et,1,0,"mat-header-row",20),t.YNc(35,at,1,0,"mat-row",21),t.qZA(),t._UZ(36,"mat-paginator",22),t.qZA()),2&a&&(t.xp6(4),t.Q6J("formGroup",o.paramsForm),t.xp6(2),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:document-report"),t.xp6(3),t.Q6J("ngIf",o.isLoadingResults),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(23),t.Q6J("matHeaderRowDef",o.columns),t.xp6(1),t.Q6J("matRowDefColumns",o.columns),t.xp6(1),t.Q6J("length",o.resultsLength)("pageSize",10))},dependencies:[p.O5,g.Hw,u.lW,c.YE,c.nU,d.JL,d.sg,h.NW,n.BZ,n.fO,n.as,n.w1,n.Dz,n.nj,n.ge,n.ev,n.XQ,n.Gk,p.H9],styles:[".example-loading-shade{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0});class ot extends L.o2{constructor(a){super(),this._dataStream=new b.t,this.setData(a)}connect(){return this._dataStream}disconnect(){}setData(a){this._dataStream.next(a)}}const st=[{path:"",component:m}];class r{}r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[Y.Bz.forChild(st),p.ez,g.Ps,u.ot,T.lN,P.FA,R.Yd,N.rP,c.JX,p.ez,u.ot,g.Ps,S.ie,U.SJ,Z.AV,d.UX,u.ot,T.lN,g.Ps,D.c,h.TU,A.LD,c.JX,n.p0,Z.AV]})}}]);