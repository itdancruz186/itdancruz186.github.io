"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7262],{7262:(oe,B,s)=>{s.r(B),s.d(B,{ECommerceModule:()=>Q});var f=s(9132),h=s(9818),x=s(74),_=s(8455),y=s(7392),S=s(9203),$=s(3239),I=s(7686),J=s(1256),Z=s(3238),M=s(6308),O=s(5208),C=s(2793),E=s(7462),a=s(4466),e=s(4650);class l{constructor(){}}l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["inventory"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[f.lC],encapsulation:2,changeDetection:0});var u=s(262),p=s(2843),m=s(7821);class b{constructor(t){this._inventoryService=t}resolve(t,n){return this._inventoryService.getBrands()}}b.\u0275fac=function(t){return new(t||b)(e.LFG(m.V))},b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"});class A{constructor(t){this._inventoryService=t}resolve(t,n){return this._inventoryService.getCategories()}}A.\u0275fac=function(t){return new(t||A)(e.LFG(m.V))},A.\u0275prov=e.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"});class L{constructor(t){this._inventoryService=t}resolve(t,n){return this._inventoryService.getUOM()}}L.\u0275fac=function(t){return new(t||L)(e.LFG(m.V))},L.\u0275prov=e.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"});class R{constructor(t,n){this._inventoryService=t,this._router=n}resolve(t,n){return this._inventoryService.getProductById(t.paramMap.get("id")).pipe((0,u.K)(r=>{console.error(r);const i=n.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(i),(0,p._)(r)}))}}R.\u0275fac=function(t){return new(t||R)(e.LFG(m.V),e.LFG(f.F0))},R.\u0275prov=e.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"});class F{constructor(t){this._inventoryService=t}resolve(t,n){return this._inventoryService.init()}}F.\u0275fac=function(t){return new(t||F)(e.LFG(m.V))},F.\u0275prov=e.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"});class k{constructor(t){this._inventoryService=t}resolve(t,n){return this._inventoryService.getTags()}}k.\u0275fac=function(t){return new(t||k)(e.LFG(m.V))},k.\u0275prov=e.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"});class U{constructor(t){this._inventoryService=t}resolve(t,n){return this._inventoryService.getVendors()}}U.\u0275fac=function(t){return new(t||U)(e.LFG(m.V))},U.\u0275prov=e.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"});class D{constructor(t){this._inventoryService=t}resolve(t,n){return this._inventoryService.getImpuestos()}}D.\u0275fac=function(t){return new(t||D)(e.LFG(m.V))},D.\u0275prov=e.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"});class P{constructor(t){this._inventoryService=t}resolve(t,n){return this._inventoryService.getBranches()}}P.\u0275fac=function(t){return new(t||P)(e.LFG(m.V))},P.\u0275prov=e.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"});var g=s(4006),ne=s(8288),re=s(7579),T=s(2722),Y=s(8372),K=s(3900),z=s(4004),ie=s(6451),ae=s(2287),j=s(8256),G=s(5754),se=s(4363),q=s(6895);function ce(o,t){1&o&&(e.TgZ(0,"div",17),e._UZ(1,"mat-progress-bar",18),e.qZA()),2&o&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function le(o,t){if(1&o&&e._UZ(0,"img",39),2&o){const n=e.oxw().$implicit;e.Q6J("alt","Product thumbnail image")("src",n.imagen,e.LSH)}}function de(o,t){1&o&&(e.TgZ(0,"div",40),e._uU(1," NO IMG "),e.qZA())}function ue(o,t){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",41),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function pe(o,t){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",42),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function me(o,t){1&o&&e.GkF(0)}const ge=function(o){return{$implicit:o}};function _e(o,t){if(1&o&&(e.ynx(0),e.YNc(1,me,1,0,"ng-container",43),e.BQk()),2&o){const n=e.oxw().$implicit;e.oxw(4);const r=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(2,ge,n))}}function fe(o,t){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",29)(2,"div",30)(3,"div",31),e.YNc(4,le,1,2,"img",32),e.YNc(5,de,2,0,"div",33),e.qZA()(),e.TgZ(6,"div",34),e._uU(7),e.qZA(),e.TgZ(8,"div",35),e._uU(9),e.qZA(),e.TgZ(10,"div",26),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"div",36),e.YNc(14,ue,2,1,"ng-container",13),e.YNc(15,pe,2,1,"ng-container",13),e.qZA(),e.TgZ(16,"div")(17,"button",37),e.NdJ("click",function(){const d=e.CHM(n).$implicit,v=e.oxw(4);return e.KtG(v.toggleDetails(d.id))}),e._UZ(18,"mat-icon",38),e.qZA()()(),e.TgZ(19,"div",20),e.YNc(20,_e,2,4,"ng-container",13),e.qZA(),e.BQk()}if(2&o){const n=t.$implicit,r=e.oxw(4);e.xp6(4),e.Q6J("ngIf",n.imagen),e.xp6(1),e.Q6J("ngIf",!n.imagen),e.xp6(2),e.hij(" ",n.sku," "),e.xp6(2),e.hij(" ",n.producto," "),e.xp6(2),e.hij(" ",e.gM2(12,9,n.precio,"USD","symbol","1.2-2")," "),e.xp6(3),e.Q6J("ngIf",n.activo),e.xp6(1),e.Q6J("ngIf",!n.activo),e.xp6(3),e.Q6J("svgIcon",(null==r.selectedProduct?null:r.selectedProduct.id)===n.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("ngIf",(null==r.selectedProduct?null:r.selectedProduct.id)===n.id)}}function ve(o,t){if(1&o&&(e.ynx(0),e.YNc(1,fe,21,14,"ng-container",28),e.BQk()),2&o){const n=t.ngIf,r=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",n)("ngForTrackBy",r.trackByFn)}}const he=function(o){return{"pointer-events-none":o}},xe=function(){return[5,10,25,100]};function ye(o,t){if(1&o&&(e.ynx(0),e.TgZ(1,"div",20)(2,"div",21),e._UZ(3,"div"),e.TgZ(4,"div",22),e._uU(5," SKU "),e.qZA(),e.TgZ(6,"div",23),e._uU(7,"Producto"),e.qZA(),e.TgZ(8,"div",24),e._uU(9," Precio "),e.qZA(),e.TgZ(10,"div",25),e._uU(11," Activo "),e.qZA(),e.TgZ(12,"div",26),e._uU(13,"Detalles"),e.qZA()(),e.YNc(14,ve,2,2,"ng-container",13),e.ALo(15,"async"),e.qZA(),e._UZ(16,"mat-paginator",27),e.BQk()),2&o){const n=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","sku"),e.xp6(2),e.Q6J("mat-sort-header","producto"),e.xp6(2),e.Q6J("mat-sort-header","precio"),e.xp6(2),e.Q6J("mat-sort-header","activo"),e.xp6(4),e.Q6J("ngIf",e.lcZ(15,11,n.products$)),e.xp6(2),e.Q6J("ngClass",e.VKq(13,he,n.isLoading))("length",n.pagination.length)("pageIndex",n.pagination.page)("pageSize",n.pagination.size)("pageSizeOptions",e.DdM(15,xe))("showFirstLastButtons",!0)}}function Te(o,t){if(1&o&&(e.ynx(0),e.YNc(1,ye,17,16,"ng-container",19),e.BQk()),2&o){const n=t.ngIf;e.oxw();const r=e.MAs(20);e.xp6(1),e.Q6J("ngIf",n.length>0)("ngIfElse",r)}}function Ce(o,t){if(1&o&&(e.ynx(0),e._UZ(1,"img",115),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("src",n.selectedProductForm.get("imagenes").value[n.selectedProductForm.get("currentImageIndex").value],e.LSH)}}function Ze(o,t){1&o&&(e.TgZ(0,"span",116),e._uU(1,"NO IMAGE"),e.qZA())}function be(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",117)(1,"button",118),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.cycleImages(!1))}),e._UZ(2,"mat-icon",38),e.qZA(),e.TgZ(3,"span",119),e._uU(4),e.qZA(),e.TgZ(5,"button",118),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.cycleImages(!0))}),e._UZ(6,"mat-icon",38),e.qZA()()}if(2&o){const n=e.oxw(2);e.xp6(2),e.Q6J("svgIcon","heroicons_solid:arrow-narrow-left"),e.xp6(2),e.AsE(" ",n.selectedProductForm.get("currentImageIndex").value+1," of ",n.selectedProductForm.get("imagenes").value.length," "),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:arrow-narrow-right")}}function Ie(o,t){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",120),e._uU(2),e.qZA(),e.BQk()),2&o){const n=t.$implicit;e.xp6(1),e.Q6J("value",n),e.xp6(1),e.hij(" ",n.grupo," ")}}function we(o,t){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",120),e._uU(2),e.qZA(),e.BQk()),2&o){const n=t.$implicit;e.xp6(1),e.Q6J("value",n),e.xp6(1),e.hij(" ",n.unidadMedida," ")}}function Me(o,t){1&o&&e._UZ(0,"mat-icon",38),2&o&&e.Q6J("svgIcon","heroicons_solid:pencil-alt")}function Ae(o,t){1&o&&e._UZ(0,"mat-icon",38),2&o&&e.Q6J("svgIcon","heroicons_solid:check")}function Le(o,t){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"mat-checkbox",121),e.NdJ("change",function(i){const v=e.CHM(n).$implicit,w=e.oxw(3);return e.KtG(w.toggleProductTag(v,i))}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const n=t.$implicit,r=e.oxw(3);e.xp6(1),e.Q6J("color","primary")("checked",r.selectedProduct.etiquetas&&void 0!==r.selectedProduct.etiquetas&&r.selectedProduct.etiquetas.includes(n.etiqueta)),e.xp6(1),e.hij(" ",n.etiqueta," ")}}function Fe(o,t){if(1&o&&(e.ynx(0),e.YNc(1,Le,3,3,"ng-container",28),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.filteredTags)("ngForTrackBy",n.trackByFn)}}function ke(o,t){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",123)(2,"input",124),e.NdJ("input",function(i){const v=e.CHM(n).$implicit,w=e.oxw(3);return e.KtG(w.updateTagTitle(v,i))}),e.qZA(),e.TgZ(3,"button",125),e.NdJ("click",function(){const d=e.CHM(n).$implicit,v=e.oxw(3);return e.KtG(v.deleteTag(d))}),e._UZ(4,"mat-icon",38),e.qZA()(),e.BQk()}if(2&o){const n=t.$implicit;e.xp6(2),e.Q6J("autocomplete","off")("value",n.etiqueta),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Ue(o,t){if(1&o&&(e.ynx(0),e.TgZ(1,"div",122),e.YNc(2,ke,5,3,"ng-container",28),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",n.filteredTags)("ngForTrackBy",n.trackByFn)}}function De(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",126),e.NdJ("click",function(){e.CHM(n),e.oxw();const i=e.MAs(117);return e.oxw().createTag(i.value),e.KtG(i.value="")}),e._UZ(1,"mat-icon",127),e.TgZ(2,"div",128),e._uU(3,'Crear "'),e.TgZ(4,"b"),e._uU(5),e.qZA(),e._uU(6,'" '),e.qZA()()}if(2&o){e.oxw();const n=e.MAs(117);e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Oqu(n.value)}}function Pe(o,t){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"mat-checkbox",121),e.NdJ("change",function(i){const v=e.CHM(n).$implicit,w=e.oxw(2);return e.KtG(w.toggleProveedor(v,i))}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const n=t.$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("checked",r.existeProveedor(n.id)),e.xp6(1),e.hij(" ",n.proveedor," ")}}function qe(o,t){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",120),e._uU(2),e.qZA(),e.BQk()),2&o){const n=t.$implicit;e.xp6(1),e.Q6J("value",n),e.xp6(1),e.AsE(" ",n.sucursal," - ",n.tipoSucursal.tipoSucursal," ")}}function Qe(o,t){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"mat-checkbox",121),e.NdJ("change",function(i){const v=e.CHM(n).$implicit,w=e.oxw(2);return e.KtG(w.toggleTax(v,i))}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const n=t.$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("checked",r.existeImpuesto(n.id)),e.xp6(1),e.AsE(" ",n.impuesto," (",n.porcentaje,"%) ")}}function Je(o,t){1&o&&(e.TgZ(0,"div",138),e._UZ(1,"div",139),e.qZA())}function Re(o,t){1&o&&(e.TgZ(0,"div",140),e._UZ(1,"div",141),e.qZA())}function Ne(o,t){1&o&&(e.TgZ(0,"div",142),e._UZ(1,"div",143),e.qZA())}function Be(o,t){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",132)(2,"div",35),e._uU(3),e.qZA(),e.TgZ(4,"div",35),e._uU(5),e.qZA(),e.TgZ(6,"div",133)(7,"div",134),e._uU(8),e.qZA(),e.YNc(9,Je,2,0,"div",135),e.YNc(10,Re,2,0,"div",136),e.YNc(11,Ne,2,0,"div",137),e.qZA(),e.TgZ(12,"div",131),e._uU(13),e.qZA(),e.TgZ(14,"div",36),e._uU(15),e.qZA(),e.TgZ(16,"div",131),e._uU(17),e.ALo(18,"currency"),e.qZA(),e.TgZ(19,"div",35),e._uU(20),e.ALo(21,"currency"),e.qZA(),e.TgZ(22,"div",131),e._uU(23),e.ALo(24,"currency"),e.qZA(),e.TgZ(25,"div",133)(26,"button",109),e.NdJ("click",function(){const d=e.CHM(n).$implicit,v=e.oxw(5);return e.KtG(v.deleteInven(d))}),e._UZ(27,"mat-icon",38),e.qZA(),e._uU(28," \xa0 "),e.TgZ(29,"button",109),e.NdJ("click",function(){const d=e.CHM(n).$implicit,v=e.oxw(5);return e.KtG(v.editInven(d))}),e._UZ(30,"mat-icon",38),e.qZA()()(),e.BQk()}if(2&o){const n=t.$implicit;e.xp6(3),e.hij(" ",n.sucursal.sucursal," "),e.xp6(2),e.hij(" ",n.stockMinimo," "),e.xp6(3),e.Oqu(n.stockActual),e.xp6(1),e.Q6J("ngIf",n.stockActual<=n.stockMinimo),e.xp6(1),e.Q6J("ngIf",n.stockActual>n.stockMinimo&&n.stock<1.2*n.stockMinimo),e.xp6(1),e.Q6J("ngIf",n.stockActual>=1.2*n.stockMinimo),e.xp6(2),e.hij(" ",n.stockMaximo," "),e.xp6(2),e.hij(" ",n.reservado," "),e.xp6(2),e.hij(" ",e.gM2(18,15,n.costo,"USD","symbol","1.2-2")," "),e.xp6(3),e.hij(" ",e.gM2(21,20,n.precioBase,"USD","symbol","1.2-2")," "),e.xp6(3),e.hij(" ",e.gM2(24,25,n.precioVenta,"USD","symbol","1.2-2")," "),e.xp6(3),e.Q6J("color","warn"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:trash"),e.xp6(2),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil-alt")}}function Se(o,t){if(1&o&&(e.ynx(0),e.YNc(1,Be,31,30,"ng-container",28),e.BQk()),2&o){const n=t.ngIf,r=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",n)("ngForTrackBy",r.trackByFn)}}function Oe(o,t){if(1&o&&(e.ynx(0),e.TgZ(1,"div",20)(2,"div",129)(3,"div",35),e._uU(4," Sucursal "),e.qZA(),e.TgZ(5,"div",35),e._uU(6," Stock m\xednimo "),e.qZA(),e.TgZ(7,"div",130),e._uU(8," Stock actual "),e.qZA(),e.TgZ(9,"div",22),e._uU(10," Stock m\xe1ximo "),e.qZA(),e.TgZ(11,"div",36),e._uU(12," Reservado "),e.qZA(),e.TgZ(13,"div",131),e._uU(14," Costo "),e.qZA(),e.TgZ(15,"div",131),e._uU(16,"Precio "),e.qZA(),e.TgZ(17,"div"),e._uU(18,"Precio p\xfablico"),e.qZA()(),e.YNc(19,Se,2,2,"ng-container",13),e.ALo(20,"async"),e.qZA(),e.BQk()),2&o){const n=e.oxw(3);e.xp6(7),e.Q6J("mat-sort-header","stockActual"),e.xp6(2),e.Q6J("mat-sort-header","stockMaximo"),e.xp6(10),e.Q6J("ngIf",e.lcZ(20,3,n.inventario$))}}function Ee(o,t){if(1&o&&(e.ynx(0),e.YNc(1,Oe,21,5,"ng-container",19),e.BQk()),2&o){const n=t.ngIf;e.oxw(2);const r=e.MAs(22);e.xp6(1),e.Q6J("ngIf",n.length>0)("ngIfElse",r)}}function He(o,t){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",145),e.TgZ(2,"span",146),e._uU(3,"Producto actualizado"),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:check"))}function $e(o,t){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",147),e.TgZ(2,"span",146),e._uU(3,"Hubo un error, intenta otra vez!"),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"))}function je(o,t){if(1&o&&(e.TgZ(0,"div",144),e.YNc(1,He,4,1,"ng-container",13),e.YNc(2,$e,4,1,"ng-container",13),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf","success"===n.flashMessage),e.xp6(1),e.Q6J("ngIf","error"===n.flashMessage)}}function Ge(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",44)(1,"div",45)(2,"form",46)(3,"mat-tab-group")(4,"mat-tab",47)(5,"div",48)(6,"div",49)(7,"div",50)(8,"div",51),e.YNc(9,Ce,2,1,"ng-container",19),e.YNc(10,Ze,2,0,"ng-template",null,52,e.W1O),e.qZA(),e.YNc(12,be,7,4,"div",53),e.qZA(),e.TgZ(13,"div",54)(14,"div",55)(15,"span",56),e._uU(16,"Status"),e.qZA(),e.TgZ(17,"mat-slide-toggle",57),e._uU(18),e.qZA()(),e.TgZ(19,"div",58)(20,"span",56),e._uU(21," Tipo"),e.qZA(),e.TgZ(22,"mat-radio-group",59)(23,"mat-radio-button",60),e._uU(24," Producto "),e.qZA(),e.TgZ(25,"mat-radio-button",60),e._uU(26," Servicio "),e.qZA()()()(),e.TgZ(27,"div",61)(28,"div",62)(29,"span",56),e._uU(30,"Contiene alcohol"),e.qZA(),e.TgZ(31,"mat-slide-toggle",57),e._uU(32),e.qZA()(),e.TgZ(33,"div",62)(34,"span",56),e._uU(35,"Venta a menores"),e.qZA(),e.TgZ(36,"mat-slide-toggle",57),e._uU(37),e.qZA()()()(),e.TgZ(38,"div",63)(39,"div",64)(40,"mat-form-field",65)(41,"mat-label"),e._uU(42,"Producto"),e.qZA(),e._UZ(43,"input",66),e.qZA(),e.TgZ(44,"mat-form-field",67)(45,"mat-label"),e._uU(46,"Producto corto"),e.qZA(),e._UZ(47,"input",68),e.qZA(),e.TgZ(48,"div",69)(49,"mat-form-field",65)(50,"mat-label"),e._uU(51,"Descripci\xf3n"),e.qZA(),e._UZ(52,"textarea",66),e.qZA()(),e.TgZ(53,"div",69)(54,"mat-form-field",70)(55,"mat-label"),e._uU(56,"SKU"),e.qZA(),e._UZ(57,"input",66),e.qZA(),e.TgZ(58,"mat-form-field",71)(59,"mat-label"),e._uU(60,"Codigo de barras"),e.qZA(),e._UZ(61,"input",66),e.qZA()(),e.TgZ(62,"div",72)(63,"mat-form-field",73)(64,"mat-label"),e._uU(65,"Marca"),e.qZA(),e._UZ(66,"input",66),e.qZA(),e.TgZ(67,"mat-form-field",74)(68,"mat-label"),e._uU(69,"Modelo"),e.qZA(),e._UZ(70,"input",66),e.qZA(),e.TgZ(71,"mat-form-field",74)(72,"mat-label"),e._uU(73,"Grupo"),e.qZA(),e.TgZ(74,"mat-select",75),e.YNc(75,Ie,3,2,"ng-container",76),e.qZA()()(),e.TgZ(76,"div",69)(77,"div",77)(78,"span",56),e._uU(79,"Resurtir"),e.qZA(),e.TgZ(80,"mat-slide-toggle",57),e._uU(81),e.qZA()(),e.TgZ(82,"div",77)(83,"span",56),e._uU(84,"Vender"),e.qZA(),e.TgZ(85,"mat-slide-toggle",57),e._uU(86),e.qZA()(),e.TgZ(87,"div",77)(88,"span",56),e._uU(89,"Devolver"),e.qZA(),e.TgZ(90,"mat-slide-toggle",57),e._uU(91),e.qZA()(),e.TgZ(92,"div",55)(93,"span",56),e._uU(94,"Cambiar"),e.qZA(),e.TgZ(95,"mat-slide-toggle",57),e._uU(96),e.qZA()()()(),e.TgZ(97,"div",78)(98,"mat-form-field",65)(99,"mat-label"),e._uU(100,"Peso"),e.qZA(),e.TgZ(101,"span",79),e._uU(102,"grs."),e.qZA(),e._UZ(103,"input",66),e.qZA(),e.TgZ(104,"mat-form-field",80)(105,"mat-label"),e._uU(106,"Unidad de medida"),e.qZA(),e.TgZ(107,"mat-select",75)(108,"input",81),e.NdJ("keyup",function(i){e.CHM(n);const d=e.oxw();return e.KtG(d.filtraUnidades(i.target.value))}),e.qZA(),e.YNc(109,we,3,2,"ng-container",76),e.qZA()(),e.TgZ(110,"span",82),e._uU(111,"Etiquetas"),e.qZA(),e.TgZ(112,"div",83)(113,"div",84)(114,"div",85),e._UZ(115,"mat-icon",38),e.TgZ(116,"input",86,87),e.NdJ("input",function(i){e.CHM(n);const d=e.oxw();return e.KtG(d.filterTags(i))})("keydown",function(i){e.CHM(n);const d=e.oxw();return e.KtG(d.filterTagsInputKeyDown(i))}),e.qZA()(),e.TgZ(118,"button",88),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.toggleTagsEditMode())}),e.YNc(119,Me,1,1,"mat-icon",89),e.YNc(120,Ae,1,1,"mat-icon",89),e.qZA()(),e.TgZ(121,"div",90),e.YNc(122,Fe,2,2,"ng-container",13),e.YNc(123,Ue,3,2,"ng-container",13),e.YNc(124,De,7,2,"div",91),e.qZA()()(),e.TgZ(125,"div",78)(126,"span",82),e._uU(127,"Proveedores"),e.qZA(),e.TgZ(128,"div",83)(129,"div",84)(130,"div",85),e._UZ(131,"mat-icon",38),e.TgZ(132,"input",92,87),e.NdJ("input",function(i){e.CHM(n);const d=e.oxw();return e.KtG(d.filterProvs(i))})("keydown",function(i){e.CHM(n);const d=e.oxw();return e.KtG(d.filterProvsInputKeyDown(i))}),e.qZA()()(),e.TgZ(134,"div",90),e.ynx(135),e.YNc(136,Pe,3,3,"ng-container",28),e.BQk(),e.qZA()(),e.TgZ(137,"mat-form-field",93)(138,"mat-label"),e._uU(139,"Clasificaci\xf3n SAT"),e.qZA(),e.TgZ(140,"span",79),e._uU(141,"."),e.qZA(),e._UZ(142,"input",94),e.qZA()()()()(),e.TgZ(143,"mat-tab",95)(144,"form",96)(145,"div",48)(146,"div",63)(147,"div",64)(148,"div",97)(149,"mat-form-field",98)(150,"mat-label"),e._uU(151,"Sucursal"),e.qZA(),e._UZ(152,"mat-icon",6),e.TgZ(153,"mat-select",75),e.YNc(154,qe,3,3,"ng-container",76),e.qZA()(),e.TgZ(155,"mat-form-field",73)(156,"mat-label"),e._uU(157,"Reservado"),e.qZA(),e._UZ(158,"input",99),e.qZA()(),e.TgZ(159,"div",100)(160,"mat-form-field",101)(161,"mat-label"),e._uU(162,"Stock m\xednimo"),e.qZA(),e._UZ(163,"input",99),e.qZA(),e.TgZ(164,"mat-form-field",101)(165,"mat-label"),e._uU(166,"Stock actual"),e.qZA(),e._UZ(167,"input",99),e.qZA(),e.TgZ(168,"mat-form-field",101)(169,"mat-label"),e._uU(170,"Stock m\xe1ximo"),e.qZA(),e._UZ(171,"input",99),e.qZA()(),e.TgZ(172,"div",102)(173,"mat-form-field",103)(174,"mat-label"),e._uU(175,"Costo"),e.qZA(),e.TgZ(176,"span",79),e._uU(177,"$"),e.qZA(),e._UZ(178,"input",99),e.qZA(),e.TgZ(179,"mat-form-field",103)(180,"mat-label"),e._uU(181,"Precio base"),e.qZA(),e.TgZ(182,"span",79),e._uU(183,"$"),e.qZA(),e.TgZ(184,"input",104),e.NdJ("keyup",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.calculaPrecioConImpuesto())}),e.qZA()(),e.TgZ(185,"mat-form-field",103)(186,"mat-label"),e._uU(187,"Precio p\xfablico"),e.qZA(),e.TgZ(188,"span",79),e._uU(189,"$"),e.qZA(),e._UZ(190,"input",99),e.qZA()()(),e.TgZ(191,"div",105)(192,"div",106)(193,"span",82),e._uU(194,"Impuestos"),e.qZA(),e.TgZ(195,"div",83)(196,"div",84)(197,"div",85),e._UZ(198,"mat-icon",38),e.TgZ(199,"input",107,87),e.NdJ("input",function(i){e.CHM(n);const d=e.oxw();return e.KtG(d.filterTags(i))})("keydown",function(i){e.CHM(n);const d=e.oxw();return e.KtG(d.filterTagsInputKeyDown(i))}),e.qZA()()(),e.TgZ(201,"div",90),e.ynx(202),e.YNc(203,Qe,3,4,"ng-container",28),e.BQk(),e.qZA()()()(),e.TgZ(204,"div",108),e._UZ(205,"mat-label"),e.TgZ(206,"button",109),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addInventory())}),e.TgZ(207,"span",10),e._uU(208,"Actualizar inventario"),e.qZA(),e._UZ(209,"mat-icon",38),e.qZA()()()(),e.TgZ(210,"div",110),e.YNc(211,Ee,2,2,"ng-container",13),e.ALo(212,"async"),e.qZA()()()(),e.TgZ(213,"div",111)(214,"button",112),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.deleteSelectedProduct())}),e._uU(215," Eliminar "),e.qZA(),e.TgZ(216,"div",30),e.YNc(217,je,3,2,"div",113),e.TgZ(218,"button",114),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.updateSelectedProduct())}),e._uU(219," Actualizar "),e.qZA()()()()()()}if(2&o){const n=e.MAs(11),r=e.MAs(117),i=e.oxw();e.xp6(2),e.Q6J("formGroup",i.selectedProductForm),e.xp6(7),e.Q6J("ngIf",!i.selectedProductForm.get("imagenes")&&i.selectedProductForm.get("imagenes").value.length)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",!i.selectedProductForm.get("imagenes")&&i.selectedProductForm.get("imagenes").value.length),e.xp6(5),e.Q6J("formControlName","activo")("color","primary"),e.xp6(1),e.hij(" ",!0===i.selectedProductForm.get("activo").value?"Activo":"Inactivo"," "),e.xp6(4),e.Q6J("formControlName","tipo")("color","primary"),e.xp6(1),e.Q6J("value","PRODUCTO"),e.xp6(2),e.Q6J("value","SERVICIO"),e.xp6(6),e.Q6J("formControlName","contieneAlcohol")("color","primary"),e.xp6(1),e.hij(" ",!0===i.selectedProductForm.get("contieneAlcohol").value?"Si":"No"," "),e.xp6(4),e.Q6J("formControlName","ventaMenores")("color","primary"),e.xp6(1),e.hij(" ",!0===i.selectedProductForm.get("ventaMenores").value?"Si":"No"," "),e.xp6(6),e.Q6J("autocomplete","off")("formControlName","producto"),e.xp6(4),e.Q6J("autocomplete","off")("maxlength",100)("formControlName","productoCorto"),e.xp6(5),e.Q6J("autocomplete","off")("formControlName","descripcion"),e.xp6(5),e.Q6J("autocomplete","off")("formControlName","sku"),e.xp6(4),e.Q6J("autocomplete","off")("formControlName","codigoBarras"),e.xp6(5),e.Q6J("autocomplete","off")("formControlName","marca"),e.xp6(4),e.Q6J("autocomplete","off")("formControlName","modelo"),e.xp6(4),e.Q6J("formControlName","grupo")("compareWith",i.compareFn),e.xp6(1),e.Q6J("ngForOf",i.categories),e.xp6(5),e.Q6J("formControlName","esResurtible")("color","primary"),e.xp6(1),e.hij(" ",!0===i.selectedProductForm.get("esResurtible").value?"Si":"No"," "),e.xp6(4),e.Q6J("formControlName","seVende")("color","primary"),e.xp6(1),e.hij(" ",!0===i.selectedProductForm.get("seVende").value?"Si":"No"," "),e.xp6(4),e.Q6J("formControlName","admiteDevolucion")("color","primary"),e.xp6(1),e.hij(" ",!0===i.selectedProductForm.get("admiteDevolucion").value?"Si":"No"," "),e.xp6(4),e.Q6J("formControlName","admiteCambio")("color","primary"),e.xp6(1),e.hij(" ",!0===i.selectedProductForm.get("admiteCambio").value?"Si":"No"," "),e.xp6(7),e.Q6J("autocomplete","off")("formControlName","peso"),e.xp6(4),e.Q6J("formControlName","unidadMedida")("compareWith",i.compareFn),e.xp6(2),e.Q6J("ngForOf",i.uoms),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("maxLength",50),e.xp6(3),e.Q6J("ngIf",!i.tagsEditMode),e.xp6(1),e.Q6J("ngIf",i.tagsEditMode),e.xp6(2),e.Q6J("ngIf",!i.tagsEditMode),e.xp6(1),e.Q6J("ngIf",i.tagsEditMode),e.xp6(1),e.Q6J("ngIf",i.shouldShowCreateTagButton(r.value)),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("maxLength",50),e.xp6(4),e.Q6J("ngForOf",i.filteredProvs)("ngForTrackBy",i.trackByFn),e.xp6(6),e.Q6J("autocomplete","off")("formControlName","clasificacionSAT"),e.xp6(2),e.Q6J("formGroup",i.inventForm),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:office-building"),e.xp6(1),e.Q6J("formControlName","sucursal")("compareWith",i.compareFn),e.xp6(1),e.Q6J("ngForOf",i.branches),e.xp6(4),e.Q6J("autocomplete","off")("formControlName","reservado"),e.xp6(5),e.Q6J("autocomplete","off")("formControlName","stockMinimo"),e.xp6(4),e.Q6J("autocomplete","off")("formControlName","stockActual"),e.xp6(4),e.Q6J("autocomplete","off")("formControlName","stockMaximo"),e.xp6(7),e.Q6J("autocomplete","off")("formControlName","costo"),e.xp6(6),e.Q6J("autocomplete","off")("formControlName","precioBase"),e.xp6(6),e.Q6J("autocomplete","off")("formControlName","precioVenta"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("maxLength",50),e.xp6(4),e.Q6J("ngForOf",i.impuestos)("ngForTrackBy",i.trackByFn),e.xp6(3),e.Q6J("color","primary"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(2),e.Q6J("ngIf",e.lcZ(212,94,i.inventario$)),e.xp6(3),e.Q6J("color","warn"),e.xp6(3),e.Q6J("ngIf",i.flashMessage),e.xp6(1),e.Q6J("color","primary")}}function Ye(o,t){1&o&&(e.TgZ(0,"div",148),e._uU(1,"No hay productos! "),e.qZA())}function Ke(o,t){1&o&&(e.TgZ(0,"div",148),e._uU(1,"No hay inventario aun para este producto! "),e.qZA())}class N{constructor(t,n,r,i){this._changeDetectorRef=t,this._fuseConfirmationService=n,this._formBuilder=r,this._inventoryService=i,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new g.NI,this.selectedProduct=null,this.selectedInventory=null,this.tagsEditMode=!1,this._unsubscribeAll=new re.x,this.sucursalControl=new g.NI}ngOnInit(){this.selectedProductForm=this._formBuilder.group({id:[""],producto:["",[g.kI.required]],productoCorto:[""],descripcion:[""],codigoBarras:[""],sku:[""],marca:[""],modelo:[""],tipo:["PRODUCTO",[g.kI.required]],unidadMedida:[""],grupo:[""],imagen:[""],imagenes:[[]],etiquetas:[[]],caduca:[!1],esResurtible:[!1],seVende:[!1],esInventariable:[!1],admiteDevolucion:[!1],admiteCambio:[!1],contieneAlcohol:[!1],ventaMenores:[!0],peso:[""],proveedores:[""],clasificacionSAT:[""],currentImageIndex:[0],activo:[!1]}),this.inventForm=this._formBuilder.group({producto:[""],sucursal:["",[g.kI.required]],stockActual:["",[g.kI.required]],stockMinimo:["",[g.kI.required]],stockMaximo:["",[g.kI.required]],reservado:[""],costo:[""],precioBase:[""],precioVenta:[{value:"",disabled:!0},[g.kI.required]],precioCredito:[""],impuestos:[[]]}),this._inventoryService.brands$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(t=>{this.brands=t,this._changeDetectorRef.markForCheck()}),this._inventoryService.impuestos$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(t=>{this.impuestos=t,this._changeDetectorRef.markForCheck()}),this._inventoryService.uoms$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(t=>{this.uoms=t.slice(0,50),this.uomsOrigen=t,this._changeDetectorRef.markForCheck()}),this._inventoryService.categories$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=t,this._changeDetectorRef.markForCheck()}),this._inventoryService.pagination$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.products$=this._inventoryService.products$,this._inventoryService.tags$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()}),this._inventoryService.branches$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(t=>{this.branches=t,this._changeDetectorRef.markForCheck()}),this._inventoryService.vendors$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(t=>{this.vendors=t,this.filteredProvs=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,T.R)(this._unsubscribeAll),(0,Y.b)(300),(0,K.w)(t=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(0,10,"name","asc",t))),(0,z.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"producto",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,T.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,ie.T)(this._sort.sortChange,this._paginator.page).pipe((0,K.w)(()=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,z.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(t){this.selectedProduct&&this.selectedProduct.id===t?this.closeDetails():this._inventoryService.getProductById(t).subscribe(n=>{this.selectedProduct=n,this.selectedInventory={},this.selectedProductForm.reset(),this.inventForm.reset(),this.uoms.unshift(this.uomsOrigen.find(r=>r.id==n.unidadMedida.id)),this.selectedProductForm.patchValue(n),this._inventoryService.getInventario(t).subscribe(r=>{this.inventario$=this._inventoryService.inventario$}),this._changeDetectorRef.markForCheck()})}closeDetails(){this.selectedProduct=null}addInventory(){if(this.inventForm.valid){this.inventForm.get("producto").patchValue(this.selectedProduct.id);const t=this.inventForm.getRawValue();this._inventoryService.addInventario(t).subscribe(n=>{})}}editInven(t){this.selectedInventory=t,this.inventForm.patchValue(t)}deleteInven(t){this._inventoryService.deleteInventario(t.id).subscribe(n=>{})}cycleImages(t=!0){const n=this.selectedProductForm.get("imagenes").value.length,r=this.selectedProductForm.get("currentImageIndex").value,i=r+1===n?0:r+1,d=r-1<0?n-1:r-1;t?this.selectedProductForm.get("currentImageIndex").setValue(i):this.selectedProductForm.get("currentImageIndex").setValue(d)}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const n=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(r=>r.etiqueta.toLowerCase().includes(n))}filterProvs(t){const n=t.target.value.toLowerCase();this.filteredProvs=this.vendors.filter(r=>r.proveedor.toLowerCase().includes(n))}filterTagsInputKeyDown(t){if("Enter"!==t.key)return;if(0===this.filteredTags.length)return this.createTag(t.target.value),void(t.target.value="");const n=this.filteredTags[0];this.selectedProduct.etiquetas.find(i=>i===n.id)?this.removeTagFromProduct(n):this.addTagToProduct(n)}filterProvsInputKeyDown(t){if("Enter"!==t.key)return;if(0===this.filteredProvs.length)return void(t.target.value="");const n=this.filteredProvs[0];this.selectedProduct.proveedores.find(i=>i===n.id)?this.removeProvFromProduct(n):this.addProvToProduct(n)}createTag(t){this._inventoryService.createTag({etiqueta:t,empresa:null}).subscribe(r=>{this.addTagToProduct(r)})}updateTagTitle(t,n){t.etiqueta=n.target.value,this._inventoryService.updateTag(t.id,t).pipe((0,Y.b)(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(t){this._inventoryService.deleteTag(t.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToProduct(t){typeof this.selectedProduct.etiquetas>"u"&&(this.selectedProduct.etiquetas=[]),this.selectedProduct.etiquetas.unshift(t.etiqueta),this.selectedProductForm.get("etiquetas").patchValue(this.selectedProduct.etiquetas),this._changeDetectorRef.markForCheck()}removeTagFromProduct(t){this.selectedProduct.etiquetas.splice(this.selectedProduct.etiquetas.findIndex(n=>n===t.id),1),this.selectedProductForm.get("etiquetas").patchValue(this.selectedProduct.etiquetas),this._changeDetectorRef.markForCheck()}toggleProductTag(t,n){n.checked?this.addTagToProduct(t):this.removeTagFromProduct(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(n=>n.etiqueta.toLowerCase()===t.toLowerCase())>-1)}createProduct(){this._inventoryService.createProduct().subscribe(t=>{this.selectedProduct=t,this.selectedProductForm.reset(),this.selectedProductForm.patchValue(t),this._changeDetectorRef.markForCheck()})}updateSelectedProduct(){const t=this.selectedProductForm.getRawValue();delete t.currentImageIndex,this._inventoryService.updateProduct(t.id,t).subscribe(()=>{this.showFlashMessage("success"),setTimeout(()=>{this.toggleDetails(t.id)},1100)})}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"Delete product",message:"Seguro que deseas eliminar el producto? Esta acci\xf3n no se se puede desahacer!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(n=>{if("confirmed"===n){const r=this.selectedProductForm.getRawValue();this._inventoryService.deleteProduct(r.id).subscribe(()=>{this.closeDetails()})}})}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,n){return n.id||t}compareFn(t,n){return!!n&&t.id==n.id}toggleProveedor(t,n){n.checked?this.addProvToProduct(t):this.removeProvFromProduct(t)}addProvToProduct(t){console.log("PRove"),typeof this.selectedProduct.proveedores>"u"&&(this.selectedProduct.proveedores=[]),this.selectedProduct.proveedores.unshift(t),this.selectedProductForm.get("proveedores").patchValue(this.selectedProduct.proveedores),this._changeDetectorRef.markForCheck()}removeProvFromProduct(t){this.selectedProduct.proveedores.splice(this.selectedProduct.proveedores.findIndex(n=>n.id===t.id),1),this.selectedProductForm.get("proveedores").patchValue(this.selectedProduct.proveedores),this._changeDetectorRef.markForCheck()}toggleTax(t,n){n.checked?this.addTaxToProduct(t):this.removeTaxFromProduct(t)}addTaxToProduct(t){typeof this.selectedInventory.impuestos>"u"&&(this.selectedInventory.impuestos=[]),this.selectedInventory.impuestos.unshift(t),this.inventForm.get("impuestos").patchValue(this.selectedInventory.impuestos),this._changeDetectorRef.markForCheck(),this.calculaPrecioConImpuesto()}removeTaxFromProduct(t){this.selectedInventory.impuestos.splice(this.selectedInventory.impuestos.findIndex(n=>n===t.id),1),this.inventForm.get("impuestos").patchValue(this.selectedInventory.impuestos),this.calculaPrecioConImpuesto(),this._changeDetectorRef.markForCheck()}calculaPrecioConImpuesto(){let t=0;const n=this.inventForm.get("impuestos").value,r=+this.inventForm.get("precioBase").value;n.forEach(i=>{t+=r*(i.porcentaje/100)}),this.inventForm.get("precioVenta").patchValue(r+t)}existeImpuesto(t){return this.selectedInventory?.impuestos?.some(n=>n.id===t)}existeProveedor(t){return this.selectedProduct?.proveedores?.some(n=>n.id===t)}filtraUnidades(t){this.uoms=this.uomsOrigen.filter(n=>n.unidadMedida.toLowerCase().indexOf(t.toLowerCase())>-1)}}N.\u0275fac=function(t){return new(t||N)(e.Y36(e.sBO),e.Y36(ae.R),e.Y36(g.qu),e.Y36(m.V))},N.\u0275cmp=e.Xpm({type:N,selectors:[["productos"]],viewQuery:function(t,n){if(1&t&&(e.Gf(I.cl,5),e.Gf(M.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._paginator=r.first),e.iGM(r=e.CRH())&&(n._sort=r.first)}},decls:23,vars:10,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","formControl","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noProducts",""],["noInv",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-gridPrd","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","md:block",3,"mat-sort-header"],[3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-gridPrd","grid","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","items-center"],[1,"relative","flex","flex-0","items-center","justify-center","w-12","h-12","mr-6","rounded","overflow-hidden","border"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"hidden","md:block","truncate"],[1,"truncate"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],["label","Producto"],[1,"flex","flex-col","sm:flex-row"],[1,"flex","flex-row","sm:flex-col","items-center","sm:items-start","mb-8","sm:mb-0"],[1,"flex","flex-col","items-center"],[1,"w-32","h-44","border","rounded","overflow-hidden"],["noImage",""],["class","flex items-center mt-2 whitespace-nowrap",4,"ngIf"],[1,"flex","flex-col","pl-2"],[1,"flex","flex-col","mt-8"],[1,"font-semibold","mb-2"],[3,"formControlName","color"],[1,"flex","flex-col","mt-4"],["aria-labelledby","tipo",3,"formControlName","color"],[1,"",3,"value"],[1,"flex","flex-col"],[1,"flex","flex-col","mt-2"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-2/4","sm:pl-8"],[1,"w-full"],["matInput","",3,"autocomplete","formControlName"],["matToolTip","No agregue tildes en este campo, por compatibilidad con las impresoras",1,"w-full"],["matInput","",3,"autocomplete","maxlength","formControlName"],[1,"flex"],[1,"w-1/2","pr-2"],[1,"w-1/2","pl-2"],[1,"flex","text-center"],[1,"w-1/3"],[1,"w-1/3","pl-2"],[3,"formControlName","compareWith"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","mt-8","mr-2"],[1,"flex","flex-col","w-full","lg:w-1/4","sm:pl-8"],["matSuffix",""],[1,"w-full","pt-2"],[3,"keyup"],[1,"mb-px","font-medium","leading-tight"],[1,"mt-1.5","rounded-md","border","border-gray-300","dark:border-gray-500","shadow-sm","overflow-hidden"],[1,"flex","items-center","-my-px","py-2","px-3"],[1,"flex","items-center","flex-auto","min-w-0"],["type","text","placeholder","Ingresa etiqueta",1,"min-w-0","ml-2","py-1","border-0",3,"maxLength","input","keydown"],["newTagInput",""],["mat-icon-button","",1,"ml-3","w-8","h-8","min-h-8",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"h-44","leading-none","overflow-y-auto","border-t","border-gray-300","dark:border-gray-500"],["class","flex items-center h-10 min-h-10 -ml-0.5 pl-4 pr-3 leading-none cursor-pointer border-t hover:bg-gray-50 dark:hover:bg-hover","matRipple","",3,"click",4,"ngIf"],["type","text","placeholder","Filtra proveedor",1,"min-w-0","ml-2","py-1","border-0",3,"maxLength","input","keydown"],["matTooltip","La clave del SAT deben ser 8 digitos, revise la siguiente url para clasificar http://pys.sat.gob.mx/PyS/catPyS.aspx",1,"w-full","mt-2"],["matInput","","maxlength","8","pattern","[0-9]{8}",3,"autocomplete","formControlName"],["label","Inventario"],[3,"formGroup"],[1,"flex","gap-2","sm:flex-row","w-full"],[1,"w-2/3"],["matInput","","type","number",3,"autocomplete","formControlName"],[1,"grid","grid-cols-9","gap-3"],[1,"col-span-3","sm:col-span-3"],[1,"grid","grid-cols-6","gap-3"],[1,"col-span-4","sm:col-span-2"],["matInput","","type","number",3,"autocomplete","formControlName","keyup"],[1,"flex","flex-col","w-full","lg:w-2/4","lg:pl-8"],[1,"flex","flex-col","w-full","sm:pl-8"],["type","text","placeholder","Filtra impuestos",1,"min-w-0","ml-2","py-1","border-0",3,"maxLength","input","keydown"],[1,"w-1/2","pt-2"],["mat-flat-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"color","click"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-auto","sm:overflow-y-auto"],[1,"flex","items-center","justify-between","w-full","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"color","click"],["class","flex items-center mr-4",4,"ngIf"],["mat-flat-button","",3,"color","click"],[1,"w-full","h-full","object-cover",3,"src"],[1,"flex","items-center","min-h-20","text-lg","font-semibold"],[1,"flex","items-center","mt-2","whitespace-nowrap"],["mat-icon-button","",3,"click"],[1,"font-sm","mx-2"],[3,"value"],[1,"flex","items-center","h-10","min-h-10","px-4",3,"color","checked","change"],[1,"p-4","space-y-2"],[1,"fuse-mat-dense","fuse-mat-no-subscript","w-full"],["matInput","",3,"autocomplete","value","input"],["mat-icon-button","","matSuffix","",3,"click"],["matRipple","",1,"flex","items-center","h-10","min-h-10","-ml-0.5","pl-4","pr-3","leading-none","cursor-pointer","border-t","hover:bg-gray-50","dark:hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],["matSort","","matSortDisableClear","",1,"inventory-gridI","z-10","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"",3,"mat-sort-header"],[1,"hidden","md:block"],[1,"inventory-gridI","grid","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","flex-row"],[1,"min-w-4"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"flex","items-center","mr-4"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,ce,2,1,"div",2),e.TgZ(3,"div",3),e._uU(4,"Productos"),e.qZA(),e.TgZ(5,"div",4)(6,"mat-form-field",5),e._UZ(7,"mat-icon",6)(8,"input",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return n.createProduct()}),e._UZ(10,"mat-icon",9),e.TgZ(11,"span",10),e._uU(12,"Nuevo"),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",12),e.YNc(15,Te,2,2,"ng-container",13),e.ALo(16,"async"),e.YNc(17,Ge,220,96,"ng-template",null,14,e.W1O),e.YNc(19,Ye,2,0,"ng-template",null,15,e.W1O),e.YNc(21,Ke,2,0,"ng-template",null,16,e.W1O),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("autocomplete","off")("formControl",n.searchInputControl)("placeholder","Buscar"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(16,8,n.products$)))},dependencies:[h.eB,x.FC,_.v_,_.$V,_.g4,_.nX,j.OY,j.vy,y.Hw,S.k0,I.cl,G.SK,G.R7,J.eI,Z.wG,M.YE,M.nU,O.x8,se.CK,C.iZ,E.Kd,q.mk,q.sg,q.O5,q.tP,g._Y,g.Fj,g.wV,g.JJ,g.JL,g.nD,g.c5,g.oH,g.sg,g.u,q.Ov,q.H9],styles:[".inventory-gridPrd{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-gridPrd{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-gridPrd{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-gridPrd{grid-template-columns:48px 112px auto 112px 96px 96px 72px}}.inventory-gridI{grid-template-columns:130px 70px auto 100px 80px 80px 60px}@media (min-width: 600px){.inventory-gridI{grid-template-columns:150px 80px auto 80px 80px 100px 100px 80px 80px}}@media (min-width: 960px){.inventory-gridI{grid-template-columns:150px 70px auto 70px 70px 100px 100px 80px 80px}}@media (min-width: 1280px){.inventory-gridI{grid-template-columns:150px 70px auto 70px 70px 100px 100px 80px 80px}}\n"],encapsulation:2,data:{animation:ne.L},changeDetection:0});const ze=[{path:"",component:l,children:[{path:"",component:N,resolve:{brands:b,categories:A,products:F,tags:k,uoms:L,vendors:U,impuestos:D,branches:P}}]}];var c=s(4654);s(5017);let mt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.HT,Z.BQ,Z.BQ]}),o})();class Q{}Q.\u0275fac=function(t){return new(t||Q)},Q.\u0275mod=e.oAB({type:Q}),Q.\u0275inj=e.cJS({imports:[f.Bz.forChild(ze),h.yu,x.Zh,_.wp,j.Xo,y.Ps,S.x4,$.jT,I.gf,G.Nn,mt,J.jc,Z.si,M.JX,O.uw,C.Wd,E.AA,a.m]})},7821:(oe,B,s)=>{s.d(B,{V:()=>C});var f=s(1135),h=s(8505),x=s(5698),_=s(4004),y=s(3900),S=s(2843),$=s(9646),I=s(9300),J=s(2340),Z=s(4650),M=s(529),O=s(7495);class C{constructor(a,e){this._httpClient=a,this._userService=e,this._brands=new f.X(null),this._categories=new f.X(null),this._uoms=new f.X(null),this._pagination=new f.X(null),this._product=new f.X(null),this._products=new f.X(null),this._tags=new f.X(null),this._impuestos=new f.X(null),this._vendors=new f.X(null),this._branches=new f.X(null),this._inventario=new f.X(null),this._apiHost=J.N.apiUrl+"/business/v1",this._apiHostCore=J.N.apiUrl+"/core/v1",this.isLoaded=!1,this.isMarcasLoaded=!1,this.isBranchesLoaded=!1}get brands$(){return this._brands.asObservable()}get uoms$(){return this._uoms.asObservable()}get impuestos$(){return this._impuestos.asObservable()}get categories$(){return this._categories.asObservable()}get pagination$(){return this._pagination.asObservable()}get product$(){return this._product.asObservable()}get products$(){return this._products.asObservable()}get tags$(){return this._tags.asObservable()}get vendors$(){return this._vendors.asObservable()}get branches$(){return this._branches.asObservable()}get inventario$(){return this._inventario.asObservable()}getBrands(){if(!this.isLoaded&&!this.isMarcasLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/marcas").pipe((0,h.b)(a=>{this.isMarcasLoaded=!0,this._brands.next(a)}))}getCategories(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/grupos-producto-list").pipe((0,h.b)(a=>{this._categories.next(a)}))}getUOM(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/unidades-medida-list").pipe((0,h.b)(a=>{this._uoms.next(a)}))}getImpuestos(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/impuestos-list").pipe((0,h.b)(a=>{this._impuestos.next(a)}))}init(){if(!this.isLoaded)return this.getProducts()}getProducts(a=0,e=10,l="name",u="asc",p=""){return this._httpClient.get(this._apiHost+"/opr/cat/productos",{params:{page:""+a,size:""+e,sort:l,order:u,search:p}}).pipe((0,h.b)(m=>{this.isLoaded=!0,this._pagination.next(m.paginacion),this._products.next(m.productos)}))}getProductById(a){return this._products.pipe((0,x.q)(1),(0,_.U)(e=>{const l=e.find(u=>u.id===a)||null;return this._product.next(l),l}),(0,y.w)(e=>e?(0,$.of)(e):(0,S._)("Could not found product with id of "+a+"!")))}createProduct(){return this.products$.pipe((0,x.q)(1),(0,y.w)(a=>this._httpClient.post(this._apiHost+"/opr/cat/productos",{empresa:this._userService.userO.empresa}).pipe((0,_.U)(e=>(this._products.next([e,...a]),e)))))}updateProduct(a,e){return e.empresa=this._userService.userO.empresa,this.products$.pipe((0,x.q)(1),(0,y.w)(l=>this._httpClient.patch(this._apiHost+"/opr/cat/productos",e).pipe((0,_.U)(u=>{const p=l.findIndex(m=>m.id===a);return l[p]=u,this._products.next(l),u}),(0,y.w)(u=>this.product$.pipe((0,x.q)(1),(0,I.h)(p=>p&&p.id===a),(0,h.b)(()=>(this._product.next(u),u)))))))}deleteProduct(a){return this.products$.pipe((0,x.q)(1),(0,y.w)(e=>this._httpClient.delete(this._apiHost+"/opr/cat/productos/"+a).pipe((0,_.U)(l=>{const u=e.findIndex(p=>p.id===a);return e.splice(u,1),this._products.next(e),l}))))}getTags(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/etiquetas").pipe((0,h.b)(a=>{this._tags.next(a)}))}createTag(a){return a.empresa=this._userService.userO.empresa,this.tags$.pipe((0,x.q)(1),(0,y.w)(e=>this._httpClient.post(this._apiHost+"/opr/cat/etiquetas",a).pipe((0,_.U)(l=>(this._tags.next([...e,l]),l)))))}updateTag(a,e){return this.tags$.pipe((0,x.q)(1),(0,y.w)(l=>this._httpClient.patch(this._apiHost+"/opr/cat/etiquetas",e).pipe((0,_.U)(u=>{const p=l.findIndex(m=>m.id===a);return l[p]=u,this._tags.next(l),u}))))}deleteTag(a){return this.tags$.pipe((0,x.q)(1),(0,y.w)(e=>this._httpClient.delete(this._apiHost+"/opr/cat/etiquetas/"+a).pipe((0,_.U)(l=>{const u=e.findIndex(p=>p.id===a);return e.splice(u,1),this._tags.next(e),l}),(0,I.h)(l=>l),(0,y.w)(l=>this.products$.pipe((0,x.q)(1),(0,_.U)(u=>(u.forEach(p=>{const m=p.etiquetas.findIndex(b=>b===a);m>-1&&p.etiquetas.splice(m,1)}),l)))))))}getVendors(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/proveedores-list").pipe((0,h.b)(a=>{this._vendors.next(a)}))}getBranches(){if(!this.isLoaded&&!this.isBranchesLoaded)return this._httpClient.get(this._apiHostCore+"/adm/cat/sucursales-list").pipe((0,h.b)(a=>{this.isBranchesLoaded=!0,this._branches.next(a)}))}getInventario(a){return this._httpClient.get(this._apiHost+"/opr/inventario-producto/"+a).pipe((0,h.b)(e=>{this._inventario.next(e)}))}getInventariosucursal(a){return this._httpClient.get(this._apiHost+"/opr/inventario/"+a).pipe((0,h.b)(e=>{this._inventario.next(e)}))}addInventario(a){return this.inventario$.pipe((0,x.q)(1),(0,y.w)(e=>this._httpClient.post(this._apiHost+"/opr/inventario/",a).pipe((0,_.U)(l=>{const u=e.findIndex(p=>p.sucursal.id===a.sucursal.id);return e.splice(u,1),this._inventario.next([...e,l]),l}))))}deleteInventario(a){return this.inventario$.pipe((0,x.q)(1),(0,y.w)(e=>this._httpClient.delete(this._apiHost+"/opr/inventario/"+a).pipe((0,_.U)(l=>{const u=e.findIndex(p=>p.id===a);return e.splice(u,1),this._inventario.next(e),l}),(0,I.h)(l=>l))))}}C.\u0275fac=function(a){return new(a||C)(Z.LFG(M.eN),Z.LFG(O.K))},C.\u0275prov=Z.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"})}}]);