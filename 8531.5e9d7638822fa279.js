"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[8531],{8531:(x,C,i)=>{i.d(C,{DU:()=>f,Hx:()=>P,Vh:()=>l,a7:()=>c,d_:()=>v,rG:()=>r});var d=i(262),u=i(2843),n=i(4650),_=i(826),h=i(9132),O=i(7821);class v{constructor(t){this._academyService=t}resolve(t,e){return this._academyService.getClientes()}}v.\u0275fac=function(t){return new(t||v)(n.LFG(_.b))},v.\u0275prov=n.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"});class l{constructor(t){this._academyService=t}resolve(t,e){return this._academyService.getProductos(t.params.sucursal)}}l.\u0275fac=function(t){return new(t||l)(n.LFG(_.b))},l.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"});class f{constructor(t){this._posService=t}resolve(t,e){return this._posService.getVendedores(t.params.sucursal)}}f.\u0275fac=function(t){return new(t||f)(n.LFG(_.b))},f.\u0275prov=n.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"});class g{constructor(t,e){this._router=t,this._academyService=e}resolve(t,e){return this._academyService.getProductById(t.paramMap.get("id")).pipe((0,d.K)(o=>{console.error(o);const a=e.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(a),(0,u._)(o)}))}}g.\u0275fac=function(t){return new(t||g)(n.LFG(h.F0),n.LFG(_.b))},g.\u0275prov=n.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"});class c{constructor(t){this._posService=t}resolve(t,e){return this._posService.getFormasPago()}}c.\u0275fac=function(t){return new(t||c)(n.LFG(_.b))},c.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});class P{constructor(t){this._inventoryService=t}resolve(t,e){return this._inventoryService.getBrands()}}P.\u0275fac=function(t){return new(t||P)(n.LFG(O.V))},P.\u0275prov=n.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"});class r{constructor(t){this._posService=t}resolve(t,e){return this._posService.getRutas()}}r.\u0275fac=function(t){return new(t||r)(n.LFG(_.b))},r.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},826:(x,C,i)=>{i.d(C,{b:()=>c});var d=i(2340),u=i(1135),n=i(8505),_=i(5698),h=i(4004),O=i(3900),v=i(2843),l=i(9646),f=i(4650),g=i(529);class c{constructor(r){this._httpClient=r,this._clientes=new u.X(null),this._producto=new u.X(null),this._productos=new u.X(null),this._vendedores=new u.X(null),this._formasPago=new u.X(null),this._rutas=new u.X(null),this._apiHost=d.N.apiUrl+"/business/v1",this._apiHostCore=d.N.apiUrl+"/core/v1",this.isLoaded=!1}get formasPago$(){return this._formasPago.asObservable()}get clientes$(){return this._clientes.asObservable()}get rutas$(){return this._rutas.asObservable()}get productos$(){return this._productos.asObservable()}get vendedores$(){return this._vendedores.asObservable()}get course$(){return this._producto.asObservable()}getClientes(){if(!this.isLoaded)return this._httpClient.get(this._apiHostCore+"/adm/cat/clientes-pos").pipe((0,n.b)(r=>{this._clientes.next(r)}))}getRutas(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/rutas-list").pipe((0,n.b)(r=>{this._rutas.next(r)}))}getFormasPago(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/formas-pago/list").pipe((0,n.b)(r=>{this._formasPago.next(r)}))}addCliente(r){return this._clientes.pipe((0,_.q)(1),(0,h.U)(s=>{const t=s.findIndex(e=>e.id===r.id)||null;return t<0?s.push(r):s[t]=r,this._clientes.next(s),s}))}getProductos(r){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/inventario-list/"+r).pipe((0,n.b)(s=>{this.isLoaded=!0,this._productos.next(s)}))}getVendedores(r){if(!this.isLoaded)return this._httpClient.get(this._apiHostCore+"/adm/cat/vendedores-pos").pipe((0,n.b)(s=>{this._vendedores.next(s)}))}getProductById(r){return this._productos.pipe((0,_.q)(1),(0,h.U)(s=>{const t=s.find(e=>e.id===r)||null;return this._producto.next(t),t}),(0,O.w)(s=>s?(0,l.of)(s):(0,v._)("Could not found product with id of "+r+"!")))}updateProductById(r){return this._productos.pipe((0,_.q)(1),(0,h.U)(s=>{const t=s.findIndex(e=>e.id===r.id)||null;return s[t]=r,r}),(0,O.w)(s=>s?(0,l.of)(s):(0,v._)("Could not found product with id of "+s.id+"!")))}getProductoByIdOnline(r){return this._httpClient.get("api/apps/pos/courses/course",{params:{id:r}}).pipe((0,h.U)(s=>(this._producto.next(s),s)),(0,O.w)(s=>s?(0,l.of)(s):(0,v._)("Could not found course with id of "+r+"!")))}guardarVenta(r,s){return this._httpClient.post(this._apiHost+"/opr/inventario/"+s+"/venta",r)}}c.\u0275fac=function(r){return new(r||c)(f.LFG(g.eN))},c.\u0275prov=f.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})},7821:(x,C,i)=>{i.d(C,{V:()=>r});var d=i(1135),u=i(8505),n=i(5698),_=i(4004),h=i(3900),O=i(2843),v=i(9646),l=i(9300),f=i(2340),g=i(4650),c=i(529),P=i(7495);class r{constructor(t,e){this._httpClient=t,this._userService=e,this._brands=new d.X(null),this._categories=new d.X(null),this._uoms=new d.X(null),this._pagination=new d.X(null),this._product=new d.X(null),this._products=new d.X(null),this._tags=new d.X(null),this._impuestos=new d.X(null),this._vendors=new d.X(null),this._branches=new d.X(null),this._inventario=new d.X(null),this._apiHost=f.N.apiUrl+"/business/v1",this._apiHostCore=f.N.apiUrl+"/core/v1",this.isLoaded=!1,this.isMarcasLoaded=!1,this.isBranchesLoaded=!1}get brands$(){return this._brands.asObservable()}get uoms$(){return this._uoms.asObservable()}get impuestos$(){return this._impuestos.asObservable()}get categories$(){return this._categories.asObservable()}get pagination$(){return this._pagination.asObservable()}get product$(){return this._product.asObservable()}get products$(){return this._products.asObservable()}get tags$(){return this._tags.asObservable()}get vendors$(){return this._vendors.asObservable()}get branches$(){return this._branches.asObservable()}get inventario$(){return this._inventario.asObservable()}getBrands(){if(!this.isLoaded&&!this.isMarcasLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/marcas").pipe((0,u.b)(t=>{this.isMarcasLoaded=!0,this._brands.next(t)}))}getCategories(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/grupos-producto-list").pipe((0,u.b)(t=>{this._categories.next(t)}))}getUOM(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/unidades-medida-list").pipe((0,u.b)(t=>{this._uoms.next(t)}))}getImpuestos(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/impuestos-list").pipe((0,u.b)(t=>{this._impuestos.next(t)}))}init(){if(!this.isLoaded)return this.getProducts()}getProducts(t=0,e=10,o="name",a="asc",p=""){return this._httpClient.get(this._apiHost+"/opr/cat/productos",{params:{page:""+t,size:""+e,sort:o,order:a,search:p}}).pipe((0,u.b)(E=>{this.isLoaded=!0,this._pagination.next(E.paginacion),this._products.next(E.productos)}))}getProductById(t){return this._products.pipe((0,n.q)(1),(0,_.U)(e=>{const o=e.find(a=>a.id===t)||null;return this._product.next(o),o}),(0,h.w)(e=>e?(0,v.of)(e):(0,O._)("Could not found product with id of "+t+"!")))}createProduct(){return this.products$.pipe((0,n.q)(1),(0,h.w)(t=>this._httpClient.post(this._apiHost+"/opr/cat/productos",{empresa:this._userService.userO.empresa}).pipe((0,_.U)(e=>(this._products.next([e,...t]),e)))))}updateProduct(t,e){return e.empresa=this._userService.userO.empresa,this.products$.pipe((0,n.q)(1),(0,h.w)(o=>this._httpClient.patch(this._apiHost+"/opr/cat/productos",e).pipe((0,_.U)(a=>{const p=o.findIndex(E=>E.id===t);return o[p]=a,this._products.next(o),a}),(0,h.w)(a=>this.product$.pipe((0,n.q)(1),(0,l.h)(p=>p&&p.id===t),(0,u.b)(()=>(this._product.next(a),a)))))))}deleteProduct(t){return this.products$.pipe((0,n.q)(1),(0,h.w)(e=>this._httpClient.delete(this._apiHost+"/opr/cat/productos/"+t).pipe((0,_.U)(o=>{const a=e.findIndex(p=>p.id===t);return e.splice(a,1),this._products.next(e),o}))))}getTags(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/etiquetas").pipe((0,u.b)(t=>{this._tags.next(t)}))}createTag(t){return t.empresa=this._userService.userO.empresa,this.tags$.pipe((0,n.q)(1),(0,h.w)(e=>this._httpClient.post(this._apiHost+"/opr/cat/etiquetas",t).pipe((0,_.U)(o=>(this._tags.next([...e,o]),o)))))}updateTag(t,e){return this.tags$.pipe((0,n.q)(1),(0,h.w)(o=>this._httpClient.patch(this._apiHost+"/opr/cat/etiquetas",e).pipe((0,_.U)(a=>{const p=o.findIndex(E=>E.id===t);return o[p]=a,this._tags.next(o),a}))))}deleteTag(t){return this.tags$.pipe((0,n.q)(1),(0,h.w)(e=>this._httpClient.delete(this._apiHost+"/opr/cat/etiquetas/"+t).pipe((0,_.U)(o=>{const a=e.findIndex(p=>p.id===t);return e.splice(a,1),this._tags.next(e),o}),(0,l.h)(o=>o),(0,h.w)(o=>this.products$.pipe((0,n.q)(1),(0,_.U)(a=>(a.forEach(p=>{const E=p.etiquetas.findIndex(M=>M===t);E>-1&&p.etiquetas.splice(E,1)}),o)))))))}getVendors(){if(!this.isLoaded)return this._httpClient.get(this._apiHost+"/opr/cat/proveedores-list").pipe((0,u.b)(t=>{this._vendors.next(t)}))}getBranches(){if(!this.isLoaded&&!this.isBranchesLoaded)return this._httpClient.get(this._apiHostCore+"/adm/cat/sucursales-list").pipe((0,u.b)(t=>{this.isBranchesLoaded=!0,this._branches.next(t)}))}getInventario(t){return this._httpClient.get(this._apiHost+"/opr/inventario-producto/"+t).pipe((0,u.b)(e=>{this._inventario.next(e)}))}getInventariosucursal(t){return this._httpClient.get(this._apiHost+"/opr/inventario/"+t).pipe((0,u.b)(e=>{this._inventario.next(e)}))}addInventario(t){return this.inventario$.pipe((0,n.q)(1),(0,h.w)(e=>this._httpClient.post(this._apiHost+"/opr/inventario/",t).pipe((0,_.U)(o=>{const a=e.findIndex(p=>p.sucursal.id===t.sucursal.id);return e.splice(a,1),this._inventario.next([...e,o]),o}))))}deleteInventario(t){return this.inventario$.pipe((0,n.q)(1),(0,h.w)(e=>this._httpClient.delete(this._apiHost+"/opr/inventario/"+t).pipe((0,_.U)(o=>{const a=e.findIndex(p=>p.id===t);return e.splice(a,1),this._inventario.next(e),o}),(0,l.h)(o=>o))))}}r.\u0275fac=function(t){return new(t||r)(g.LFG(c.eN),g.LFG(P.K))},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}}]);