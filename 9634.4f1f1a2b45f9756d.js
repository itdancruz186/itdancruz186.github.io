"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[9634],{9634:(nt,B,i)=>{i.r(B),i.d(B,{VentasModule:()=>O});var J=i(8277),a=i(3238),Z=i(148),Q=i(4850),x=i(7392),T=i(9818),L=i(74),_=i(8455),k=i(9203),b=i(3239),z=i(7686),R=i(1256),E=i(5208),j=i(2793),Y=i(7462),$=i(1948),K=i(3267),V=i(6308),r=i(3848),p=i(9132),l=i(2287),c=i(4466),m=i(262),S=i(2843),t=i(4650),G=i(2340),D=i(1135),A=i(8505),y=i(5698),U=i(3900),w=i(4004),W=i(9300),X=i(529);class f{constructor(e){this._httpClient=e,this._venta=new D.X(null),this._ventas=new D.X(null),this._countries=new D.X(null),this._pago=new D.X(null),this._apiHostBusiness=G.N.apiUrl+"/business/v1"}get venta$(){return this._venta.asObservable()}get ventas$(){return this._ventas.asObservable()}get pago$(){return this._pago.asObservable()}getVentas(e){return this._httpClient.get(this._apiHostBusiness+"/opr/clientes/"+e+"/ventas/").pipe((0,A.b)(n=>{this._ventas.next(n)}))}getVenta(e){return this._httpClient.get(this._apiHostBusiness+"/opr/ventas/"+e).pipe((0,A.b)(n=>{this._venta.next(n)}))}searchVentas(e){return this._httpClient.get(this._apiHostBusiness+"/opr/ventas/search",{params:{query:e}}).pipe((0,A.b)(n=>{this._ventas.next(n)}))}createVenta(){return this.ventas$.pipe((0,y.q)(1),(0,U.w)(e=>this._httpClient.post("api/apps/ventas/venta",{}).pipe((0,w.U)(n=>(this._ventas.next([n,...e]),n)))))}updateVenta(e,n,s){return this.ventas$.pipe((0,y.q)(1),(0,U.w)(u=>this._httpClient.patch(this._apiHostBusiness+"/opr/clientes/"+s+"/ventas/"+e,{id:e,venta:n}).pipe((0,w.U)(g=>{const h=u.findIndex(Dt=>Dt.id===e);return u[h]=g,this._ventas.next(u),g}),(0,U.w)(g=>this.venta$.pipe((0,y.q)(1),(0,W.h)(h=>h&&h.id===e),(0,A.b)(()=>(this._venta.next(g),g)))))))}actualizaEstatus(e,n){return this._httpClient.patch(this._apiHostBusiness+"/opr/ventas/"+e+"/actualiza-estatus",n,{responseType:"text"}).pipe((0,m.K)(this.handleError))}handleError(e){let n="";return n=e.error instanceof ErrorEvent?`Error: ${e.error.message}`:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(n),(0,S._)(()=>new Error(n))}createPago(e,n){return this.pago$.pipe((0,y.q)(1),(0,U.w)(s=>this._httpClient.post(this._apiHostBusiness+"/opr/ventas/"+e+"/pagos",n).pipe((0,w.U)(u=>(this._pago.next(u),u)))))}uploadAvatar(e,n){return this.ventas$.pipe((0,y.q)(1),(0,U.w)(s=>this._httpClient.post("api/apps/ventas/avatar",{id:e,avatar:n},{headers:{"Content-Type":n.type}}).pipe((0,w.U)(u=>{const g=s.findIndex(h=>h.id===e);return s[g]=u,this._ventas.next(s),u}),(0,U.w)(u=>this.venta$.pipe((0,y.q)(1),(0,W.h)(g=>g&&g.id===e),(0,A.b)(()=>(this._venta.next(u),u)))))))}}f.\u0275fac=function(e){return new(e||f)(t.LFG(X.eN))},f.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"});class C{constructor(e){this._ventasService=e}resolve(e,n){return this._ventasService.getVentas(e.paramMap.get("id"))}}C.\u0275fac=function(e){return new(e||C)(t.LFG(f))},C.\u0275prov=t.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"});class P{constructor(e,n){this._ventasService=e,this._router=n}resolve(e,n){return this._ventasService.getVenta(e.paramMap.get("id")).pipe((0,m.K)(s=>{console.error(s);const u=n.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(u),(0,S._)(s)}))}}P.\u0275fac=function(e){return new(e||P)(t.LFG(f),t.LFG(p.F0))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"});var v=i(4006),H=i(7579),I=i(2722),et=i(826),at=i(9349),ot=i(4363),d=i(6895);class q{constructor(e){this._httpClient=e,this._bitacora=new D.X(null),this._apiHostCore=G.N.apiUrl+"/core/v1",this.isLoaded=!1}get bitacora$(){return this._bitacora.asObservable()}getBitacora(e){if(!this.isLoaded)return this._httpClient.get(this._apiHostCore+"/adm/bitacora?id="+e).pipe((0,A.b)(n=>{this.bitacora=n,this._bitacora.next(n)}))}}function it(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"div",11)(2,"div"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.qZA(),t.TgZ(9,"div"),t._uU(10),t.qZA()(),t.BQk()),2&o){const n=e.$implicit;t.xp6(3),t.hij(" ",t.xi3(4,6,n.fechaRegistro,"short")," "),t.xp6(3),t.hij(" ",n.mensaje," "),t.xp6(2),t.lnq(" ",null==n||null==n.personaAccion?null:n.personaAccion.nombre," ",null==n||null==n.personaAccion?null:n.personaAccion.apellidoPaterno," ",null==n||null==n.personaAccion?null:n.personaAccion.apellidoMaterno," "),t.xp6(2),t.hij(" ",n.tipo," ")}}function lt(o,e){if(1&o&&(t.ynx(0),t.YNc(1,it,11,9,"ng-container",10),t.BQk()),2&o){const n=e.ngIf,s=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n)("ngForTrackBy",s.trackByFn)}}function st(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"div",8)(2,"div",9)(3,"div"),t._uU(4," Fecha "),t.qZA(),t.TgZ(5,"div"),t._uU(6," Mensaje "),t.qZA(),t.TgZ(7,"div"),t._uU(8," Usuario "),t.qZA(),t.TgZ(9,"div"),t._uU(10," Tipo "),t.qZA()(),t.YNc(11,lt,2,2,"ng-container",6),t.ALo(12,"async"),t.qZA(),t.BQk()),2&o){const n=t.oxw();t.xp6(11),t.Q6J("ngIf",t.lcZ(12,1,n.bitacora$))}}q.\u0275fac=function(e){return new(e||q)(t.LFG(X.eN))},q.\u0275prov=t.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"});class N{constructor(e,n,s){this._activatedRoute=e,this._bitacoraService=n,this._router=s,this._unsubscribeAll=new H.x}ngOnInit(){this.bitacora=[],this._bitacoraService.bitacora$.pipe((0,I.R)(this._unsubscribeAll)).subscribe(e=>{this.bitacora=e}),this._bitacoraService.getBitacora(this.idObjeto).subscribe(),this.bitacora$=this._bitacoraService.bitacora$}back(){this._router.navigate(["../"],{relativeTo:this._activatedRoute})}trackByFn(e,n){return n.id||e}}function rt(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"div",74),t.TgZ(2,"div",75),t._uU(3),t.qZA(),t.TgZ(4,"div",76)(5,"div",77),t._uU(6),t.qZA(),t.TgZ(7,"div",78),t._uU(8),t.qZA()(),t.TgZ(9,"div",79),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"div",80),t._uU(13),t.qZA(),t.TgZ(14,"div",80),t._uU(15),t.ALo(16,"currency"),t.qZA(),t.BQk()),2&o){const n=e.$implicit,s=e.index;t.xp6(3),t.hij("",s+1," "),t.xp6(3),t.Oqu(null==n||null==n.producto?null:n.producto.producto),t.xp6(2),t.hij(" ",null==n||null==n.producto?null:n.producto.descripcion," "),t.xp6(2),t.hij("",t.lcZ(11,6,null==n?null:n.precioUnitario)," "),t.xp6(3),t.Oqu(null==n?null:n.cantidad),t.xp6(2),t.Oqu(t.lcZ(16,8,null==n?null:n.total))}}function ct(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"span",9),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.BQk()),2&o){const n=t.oxw();t.xp6(2),t.AsE("",null==n.venta||null==n.venta.formaPago?null:n.venta.formaPago.formaPago," - ",t.lcZ(3,2,null==n.venta?null:n.venta.pagaCon),"")}}function ut(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"span",9),t._uU(2),t.qZA(),t.BQk()),2&o){const n=t.oxw();t.xp6(2),t.AsE("",null==n.venta||null==n.venta.formaPago?null:n.venta.formaPago.formaPago," - ",null==n.venta?null:n.venta.folioVoucher,"")}}function gt(o,e){1&o&&(t.ynx(0),t._UZ(1,"mat-icon",93),t.BQk()),2&o&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:check"))}function pt(o,e){1&o&&(t.ynx(0),t._UZ(1,"mat-icon",94),t.BQk()),2&o&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:x"))}function dt(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"div",47),t._UZ(2,"bitacora",48),t.qZA(),t.BQk()),2&o){const n=t.oxw(4);t.xp6(2),t.Q6J("idObjeto",null==n.selectedPago?null:n.selectedPago.id)}}function mt(o,e){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",88)(2,"div",89),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div",90),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"div",90),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"div",90),t._uU(12),t.qZA(),t.TgZ(13,"div"),t.YNc(14,gt,2,1,"ng-container",46),t.YNc(15,pt,2,1,"ng-container",46),t.qZA(),t.TgZ(16,"div",90),t._uU(17),t.qZA(),t.TgZ(18,"div")(19,"button",91),t.NdJ("click",function(){const g=t.CHM(n).$implicit,h=t.oxw(3);return t.KtG(h.toggleDetails(g))}),t._UZ(20,"mat-icon",92),t.qZA()()(),t.TgZ(21,"div",85),t.YNc(22,dt,3,1,"ng-container",46),t.qZA(),t.BQk()}if(2&o){const n=e.$implicit,s=t.oxw(3);t.xp6(3),t.hij(" ",t.xi3(4,9,n.fechaPago,"yyyy-MM-dd hh:mm")," "),t.xp6(3),t.hij(" ",t.lcZ(7,12,n.pago)," "),t.xp6(3),t.hij(" ",t.lcZ(10,14,n.saldo)," "),t.xp6(3),t.hij(" ",n.formaPago.formaPago," "),t.xp6(2),t.Q6J("ngIf",n.validado),t.xp6(1),t.Q6J("ngIf",!n.validado),t.xp6(2),t.hij(" ",n.status," "),t.xp6(3),t.Q6J("svgIcon",(null==s.selectedPago?null:s.selectedPago.id)===n.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),t.xp6(2),t.Q6J("ngIf",(null==s.selectedPago?null:s.selectedPago.id)===n.id)}}function vt(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"div",85)(2,"div",86)(3,"div"),t._uU(4," Fecha "),t.qZA(),t.TgZ(5,"div"),t._uU(6," Pago "),t.qZA(),t.TgZ(7,"div"),t._uU(8," Saldo "),t.qZA(),t.TgZ(9,"div"),t._uU(10," Metodo de pago "),t.qZA(),t.TgZ(11,"div"),t._uU(12," Aplicado "),t.qZA(),t.TgZ(13,"div"),t._uU(14," status "),t.qZA(),t.TgZ(15,"div"),t._uU(16,"Detalles"),t.qZA()(),t.YNc(17,mt,23,16,"ng-container",87),t.qZA(),t.BQk()),2&o){const n=t.oxw(2);t.xp6(17),t.Q6J("ngForOf",n.venta.pagos)("ngForTrackBy",n.trackByFn)}}function _t(o,e){if(1&o&&(t.TgZ(0,"mat-tab",81)(1,"div",21)(2,"div",22)(3,"div",23),t._uU(4,"Pago inicial"),t.qZA(),t.TgZ(5,"div",26),t._UZ(6,"mat-icon",27),t.TgZ(7,"span",9),t._uU(8),t.ALo(9,"currency"),t.qZA()()(),t.TgZ(10,"div",22)(11,"div",23),t._uU(12,"Saldo"),t.qZA(),t.TgZ(13,"div",26),t._UZ(14,"mat-icon",27),t.TgZ(15,"span",9),t._uU(16),t.ALo(17,"currency"),t.qZA()()(),t.TgZ(18,"div",22)(19,"div",23),t._uU(20,"Ruta"),t.qZA(),t.TgZ(21,"div",26),t._UZ(22,"mat-icon",27),t.TgZ(23,"span",9),t._uU(24),t.qZA()()()(),t.TgZ(25,"div",21)(26,"div",22)(27,"div",23),t._uU(28,"Periodicidad de pago"),t.qZA(),t.TgZ(29,"div",26),t._UZ(30,"mat-icon",27),t.TgZ(31,"span",9),t._uU(32),t.qZA()()(),t.TgZ(33,"div",22)(34,"div",23),t._uU(35,"D\xeda de pago"),t.qZA(),t.TgZ(36,"div",26),t._UZ(37,"mat-icon",27),t.TgZ(38,"span",9),t._uU(39),t.qZA()()(),t.TgZ(40,"div",22)(41,"div",23),t._uU(42,"Monto de pago"),t.qZA(),t.TgZ(43,"div",26),t._UZ(44,"mat-icon",27),t.TgZ(45,"span",9),t._uU(46),t.ALo(47,"currency"),t.qZA()()()(),t._UZ(48,"mat-divider",19),t.TgZ(49,"div",82)(50,"div",4),t._UZ(51,"mat-icon",5),t.TgZ(52,"span",83),t._uU(53,"Historial de pagos"),t.qZA()()(),t.YNc(54,vt,18,2,"ng-container",84),t.qZA()),2&o){const n=t.oxw();t.xp6(6),t.Q6J("svgIcon","heroicons_solid:currency-dollar"),t.xp6(2),t.Oqu(t.lcZ(9,15,null==n.venta?null:n.venta.pagoInicial)),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:currency-dollar"),t.xp6(2),t.Oqu(t.lcZ(17,17,null==n.venta?null:n.venta.saldoActual)),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:currency-dollar"),t.xp6(2),t.Oqu(null==n.venta||null==n.venta.ruta?null:n.venta.ruta.ruta),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:currency-dollar"),t.xp6(2),t.Oqu(null==n.venta?null:n.venta.periodicidadPago),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:currency-dollar"),t.xp6(2),t.Oqu(null==n.venta?null:n.venta.diaPago),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:currency-dollar"),t.xp6(2),t.Oqu(t.lcZ(47,19,null==n.venta?null:n.venta.montoPago)),t.xp6(5),t.Q6J("svgIcon","heroicons_outline:credit-card"),t.xp6(3),t.Q6J("ngIf",(null==n.venta||null==n.venta.pagos?null:n.venta.pagos.length)>0)("ngIfElse",n.noProducts)}}function ft(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-option",65),t._uU(2),t.qZA(),t.BQk()),2&o){const n=e.$implicit;t.xp6(1),t.Q6J("value",n),t.xp6(1),t.AsE(" ",n.claveSAT," - ",n.formaPago," ")}}function ht(o,e){1&o&&(t.TgZ(0,"div",95)(1,"mat-form-field",53)(2,"mat-label"),t._uU(3,"Notas documento"),t.qZA(),t._UZ(4,"input",96),t.TgZ(5,"span",97),t._uU(6,"#"),t.qZA()()()),2&o&&(t.xp6(4),t.Q6J("formControlName","folioVoucher")("placeholder","Notas documento"))}function Zt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div",95)(1,"mat-form-field",98)(2,"mat-label"),t._uU(3,"Pago: "),t.qZA(),t.TgZ(4,"input",99),t.NdJ("input",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.calculaCambio())}),t.qZA(),t.TgZ(5,"span",97),t._uU(6,"$"),t.qZA()(),t.TgZ(7,"mat-form-field",100)(8,"mat-label"),t._uU(9,"Cambio: "),t.qZA(),t._UZ(10,"input",101),t.TgZ(11,"span",97),t._uU(12,"$"),t.qZA()()()}2&o&&(t.xp6(4),t.Q6J("formControlName","pagaCon"),t.xp6(6),t.Q6J("formControlName","cambio"))}N.\u0275fac=function(e){return new(e||N)(t.Y36(p.gz),t.Y36(q),t.Y36(p.F0))},N.\u0275cmp=t.Xpm({type:N,selectors:[["bitacora"]],inputs:{idObjeto:"idObjeto"},decls:10,vars:3,consts:[[1,"flex","flex-auto","overflow-hidden"],[1,"grid","grid-cols-1","xl:grid-cols-3","w-full"],[1,"xl:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded","overflow-hidden"],[1,"p-2"],[1,"mr-4","text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"overflow-x-auto"],[4,"ngIf"],[1,"my-10","border-t"],[1,"grid"],[1,"bitacora-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"bitacora-grid","grid","gap-4","py-3","px-6","md:px-8","border-b"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"Actividad registrada"),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,st,13,3,"ng-container",6),t.ALo(8,"async"),t.qZA()(),t._UZ(9,"div",7),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",t.lcZ(8,1,n.bitacora$)))},dependencies:[d.sg,d.O5,d.Ov,d.uU],styles:[".bitacora-grid[_ngcontent-%COMP%]{grid-template-columns:120px auto 150px 200px}@media (min-width: 600px){.bitacora-grid[_ngcontent-%COMP%]{grid-template-columns:120px auto 150px 200px}}@media (min-width: 960px){.bitacora-grid[_ngcontent-%COMP%]{grid-template-columns:120px auto 150px 200px}}@media (min-width: 1280px){.bitacora-grid[_ngcontent-%COMP%]{grid-template-columns:120px auto 150px 200px}}"],changeDetection:0});const tt=function(o,e,n,s){return{"text-green-800 bg-green-200 dark:text-green-100 dark:bg-green-500":o,"text-gray-800 bg-gray-200 dark:text-gray-100 dark:bg-gray-500":e,"text-red-600 bg-red-200 dark:text-red-100 dark:bg-red-400":n,"text-red-800 bg-red-200 dark:text-red-100 dark:bg-red-500":s}},xt=function(){return["../"]},Tt=function(o){return["/opr/cat/clientes",o]};class M{constructor(e,n,s,u,g){this._changeDetectorRef=e,this._ventasService=n,this._formBuilder=s,this._fuseConfirmationService=u,this._posService=g,this._unsubscribeAll=new H.x}ngOnInit(){this.ventaForm=this._formBuilder.group({id:[""],avatar:[null],name:["",[v.kI.required]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),title:[""],company:[""],birthday:[null],address:[null],notes:[null],tags:[[]]}),this.frmPago=this._formBuilder.group({fechaPago:[new Date,[v.kI.required]],consecutivo:[""],pago:["",[v.kI.required]],tipo:["Abono",[v.kI.required]],formaPago:["01"],pagaCon:[""],cambio:[""],folioVoucher:[""],observaciones:[""],cobrador:[""],validado:["false"]}),this._posService.formasPago$.pipe((0,I.R)(this._unsubscribeAll)).subscribe(e=>{this.formasPago=e,this._changeDetectorRef.markForCheck()}),this._ventasService.ventas$.pipe((0,I.R)(this._unsubscribeAll)).subscribe(e=>{this.ventas=e,this._changeDetectorRef.markForCheck()}),this._ventasService.venta$.pipe((0,I.R)(this._unsubscribeAll)).subscribe(e=>{this.venta=e,this.ventaForm.patchValue(e),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose(),this._changeDetectorRef.markForCheck()}pagar(){const e=this.frmPago.getRawValue();delete e.currentImageIndex,this._ventasService.createPago(this.venta.id,e).subscribe(()=>{this.venta.saldoActual=e.saldoActual,this._ventasService.getVenta(this.venta.id).subscribe(),this._fuseConfirmationService.open({title:"Pago realizado correctamente",message:'Gracias por realizar su pago <span class="font-medium">Se registr\xf3 correctamente!</span>',icon:{show:!0,name:"heroicons_outline:exclamation",color:"success"},actions:{confirm:{show:!0,label:"OK",color:"primary"},cancel:{show:!1,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(s=>{this._changeDetectorRef.markForCheck(),console.log(s),this.frmPago.reset()})})}calculaCambio(){const e=+this.frmPago.get("pago").value,n=+this.frmPago.get("pagaCon").value;this.frmPago.patchValue({cambio:n-e})}actualizarEstatus(e){this._ventasService.actualizaEstatus(this.venta.id,e).subscribe(n=>{this.venta.status=n.toString(),this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges()})}refreshVenta(){this._ventasService.getVenta(this.venta.id).subscribe()}toggleDetails(e){this.selectedPago=this.selectedPago&&this.selectedPago.id==e.id?null:e}compareFn(e,n){return e.id===n?.id}trackByFn(e,n){return n.id||e}}function bt(o,e){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.hij(" ",n.ventasCount," ")}}function At(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"div",23),t._uU(2),t.ALo(3,"date"),t.qZA(),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,n.fecha,"yyyy")," ")}}function yt(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"img",24),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("src",n.avatar,t.LSH)}}function Ut(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"div",25),t._uU(2),t.ALo(3,"date"),t.qZA(),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,n.fecha,"yyyy")," ")}}M.\u0275fac=function(e){return new(e||M)(t.Y36(t.sBO),t.Y36(f),t.Y36(v.qu),t.Y36(l.R),t.Y36(et.b))},M.\u0275cmp=t.Xpm({type:M,selectors:[["ventas-details"]],decls:230,vars:114,consts:[[1,"flex","flex-auto","bg-card","dark:bg-transparent"],[1,"flex","flex-col","flex-col-2","flex-auto","p-6","pt-10","sm:p-8","sm:pt-10","overflow-y-auto",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],[1,"pr-4","pl-3.5"],[1,"flex","items-center","justify-center"],[1,"text-primary",3,"svgIcon"],[1,"ml-2","font-semibold","pr-10"],[1,"flex","items-center","mt-1.5","px-4","leading-9","rounded-full",3,"ngClass"],[1,"icon-size-5","text-current",3,"svgIcon"],[1,"ml-2","mr-1","text-md","font-medium"],[1,"flex","items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"svgIcon"],["moreMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"text-green-600","dark:text-green-500",3,"svgIcon"],[1,"text-gray-600","dark:text-gray-500",3,"svgIcon"],[1,"text-red-600","dark:text-red-500",3,"svgIcon"],["mat-icon-button","",3,"routerLink"],[1,"mt-6","mb-4"],["label","Generales"],[1,"flex"],[1,"ml-6","w-1/3"],[1,"font-medium"],[1,"relative","flex","items-center","mt-1.5","px-4","leading-9","rounded-full","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"ml-2","text-md","font-medium"],[1,"flex","items-center","mt-1.5","px-4","leading-9","rounded-full","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"icon-size-4","text-current",3,"svgIcon"],[3,"routerLink"],[1,"col-span-12","grid","grid-cols-12","w-full","gap-2","bg-white"],[1,"lg:p-4","col-span-12","text-right","sticky","top-10"],[1,"grid","grid-cols-12"],[1,"col-span-3","self-center","font-medium","tracking-tight","text-secondary"],[1,"col-span-3","self-center","lg:text-2xl","font-medium","tracking-tight","text-secondary"],[1,"col-span-3","text-lg"],[1,"col-span-3","text-2xl","font-medium"],[1,"rounded-2xl","shadow","col-span-12","mb-2"],[1,"grid","grid-cols-12","content-start","md:pr-8","md:pl-8","pb-4","pt-4",3,"scrollTop"],["scrollMe",""],[1,"col-span-1","md:col-span-1","font-medium","text-md","mb-4"],[1,"col-span-3","md:col-span-5","font-medium","text-md","mb-4"],[1,"col-span-2","md:col-span-2","font-medium","text-md","text-right"],[1,"col-span-3","md:col-span-2","font-medium","text-md","text-right"],[4,"ngFor","ngForOf"],[1,"flex","flex-wrap","mt-4"],[1,"ml-6"],[4,"ngIf"],[1,"ml-6","mt-6"],[3,"idObjeto"],["label","Cr\xe9dito",4,"ngIf"],["label","Pago"],[1,"grid","grid-cols-6","sm:grid-cols-10","w-full","mt-8",3,"formGroup"],[1,"col-span-12","md:col-span-3","pr-2"],[1,"fuse-mat-no-subscript","w-full"],[3,"formControlName","compareWith"],[1,"col-span-5","sm:col-span-4","pr-2"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matSuffix","",3,"for"],["fecha",""],[1,"col-span-5","sm:col-span-3"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","autocomplete","off",3,"formControlName","input"],[1,"col-span-12","md:col-span-3","pr-2","mt-2"],[3,"formControlName"],[3,"value"],["class","col-span-12 md:col-span-8  mt-2",4,"ngIf"],["class","col-span-12 md:col-span-8 mt-2",4,"ngIf"],[1,"col-span-12"],[1,"fuse-mat-textarea","fuse-mat-no-subscript","w-full"],["matInput","","cdkTextareaAutosize","",3,"formControlName","cdkAutosizeMinRows"],[1,"col-span-3","sm:col-span-10","mt-3","text-right"],["mat-flat-button","",1,"mt-4",3,"color","click"],[1,"ml-2","mr-1"],[1,"col-span-12","border-b"],[1,"col-span-1","md:col-span-1"],[1,"col-span-3","md:col-span-5","mb-4"],[1,"text-lg","font-medium"],[1,"text-sm","text-secondary"],[1,"col-span-2","md:col-span-2","text-right"],[1,"col-span-3","md:col-span-2","text-right"],["label","Cr\xe9dito"],[1,"mb-4"],[1,"ml-2","font-semibold"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"pagos-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"pagos-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"truncate"],[1,"hidden","sm:block"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"col-span-12","md:col-span-8","mt-2"],["matInput","","required","",3,"formControlName","placeholder"],["matPrefix",""],[1,"fuse-mat-no-subscript","w-1/2","pr-2"],["matInput","","required","","matInput","","autocomplete","off",3,"formControlName","input"],[1,"fuse-mat-no-subscript","w-1/2"],["matInput","","readonly","","autocomplete","off",3,"formControlName"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"mat-icon",5),t.TgZ(6,"span",6),t._uU(7),t.qZA(),t.TgZ(8,"div",7),t._UZ(9,"mat-icon",8),t.TgZ(10,"span",9),t._uU(11),t.qZA()()()(),t.TgZ(12,"div",10)(13,"button",11),t._UZ(14,"mat-icon",12),t.qZA(),t.TgZ(15,"mat-menu",null,13)(17,"button",14),t.NdJ("click",function(){return n.actualizarEstatus("VENTA_OK_FACT_PEND")}),t._UZ(18,"mat-icon",15),t.TgZ(19,"span"),t._uU(20,"Generar factura"),t.qZA()(),t.TgZ(21,"button",14),t.NdJ("click",function(){return n.actualizarEstatus("VENTA_OK_FACT_NS")}),t._UZ(22,"mat-icon",16),t.TgZ(23,"span"),t._uU(24,"Reactivar venta"),t.qZA()(),t.TgZ(25,"button",14),t.NdJ("click",function(){return n.actualizarEstatus("VENTA_CANCELADA")}),t._UZ(26,"mat-icon",17),t.TgZ(27,"span"),t._uU(28,"Cancelar venta"),t.qZA()(),t.TgZ(29,"button",14),t.NdJ("click",function(){return n.refreshVenta()}),t._UZ(30,"mat-icon",15),t.TgZ(31,"span"),t._uU(32,"Actualizar"),t.qZA()()(),t.TgZ(33,"button",18),t._UZ(34,"mat-icon",12),t.qZA()()(),t._UZ(35,"mat-divider",19),t.TgZ(36,"mat-tab-group")(37,"mat-tab",20)(38,"div",21)(39,"div",22)(40,"div",23),t._uU(41,"Fecha de venta"),t.qZA(),t.TgZ(42,"div",24),t._UZ(43,"mat-icon",8),t.TgZ(44,"span",25),t._uU(45),t.ALo(46,"date"),t.qZA()()(),t.TgZ(47,"div",22)(48,"div",23),t._uU(49,"Tipo venta"),t.qZA(),t.TgZ(50,"div",26),t._UZ(51,"mat-icon",27),t.TgZ(52,"span",9),t._uU(53),t.qZA()()(),t.TgZ(54,"div",22)(55,"div",23),t._uU(56,"Cliente"),t.qZA(),t.TgZ(57,"div",26),t._UZ(58,"mat-icon",27),t.TgZ(59,"a",28)(60,"span",9),t._uU(61),t.qZA()()()()(),t.TgZ(62,"div",29)(63,"div",30)(64,"div",31)(65,"div",32),t._uU(66,"SUBTOTAL"),t.qZA(),t.TgZ(67,"div",32),t._uU(68,"IMPUESTOS "),t.qZA(),t.TgZ(69,"div",32),t._uU(70,"DESCUENTO "),t.qZA(),t.TgZ(71,"div",33),t._uU(72," TOTAL "),t.qZA(),t.TgZ(73,"div",34),t._uU(74),t.ALo(75,"currency"),t.qZA(),t.TgZ(76,"div",34),t._uU(77),t.ALo(78,"currency"),t.qZA(),t.TgZ(79,"div",34),t._uU(80),t.ALo(81,"currency"),t.qZA(),t.TgZ(82,"div",35),t._uU(83),t.ALo(84,"currency"),t.qZA()()()(),t.TgZ(85,"div",36)(86,"div",37,38)(88,"div",39),t._uU(89,"#"),t.qZA(),t.TgZ(90,"div",40),t._uU(91,"ARTICULO"),t.qZA(),t.TgZ(92,"div",41),t._uU(93,"$ UNIT."),t.qZA(),t.TgZ(94,"div",42),t._uU(95,"CANT."),t.qZA(),t.TgZ(96,"div",42),t._uU(97,"TOTAL"),t.qZA(),t.YNc(98,rt,17,10,"ng-container",43),t.qZA()(),t.TgZ(99,"div",44)(100,"div",45)(101,"div",23),t._uU(102,"Pago"),t.qZA(),t.TgZ(103,"div",26),t._UZ(104,"mat-icon",27),t.YNc(105,ct,4,4,"ng-container",46),t.YNc(106,ut,3,2,"ng-container",46),t.qZA()(),t.TgZ(107,"div",45)(108,"div",23),t._uU(109,"Cambio"),t.qZA(),t.TgZ(110,"div",26),t._UZ(111,"mat-icon",27),t.TgZ(112,"span",9),t._uU(113),t.ALo(114,"currency"),t.qZA()()(),t.TgZ(115,"div",22)(116,"div",23),t._uU(117,"Saldo"),t.qZA(),t.TgZ(118,"div",26),t._UZ(119,"mat-icon",27),t.TgZ(120,"span",9),t._uU(121),t.ALo(122,"currency"),t.qZA()()()(),t.TgZ(123,"div",44)(124,"div",45)(125,"div",23),t._uU(126,"Fecha de registro"),t.qZA(),t.TgZ(127,"div",24),t._UZ(128,"mat-icon",8),t.TgZ(129,"span",25),t._uU(130),t.ALo(131,"date"),t.qZA()()(),t.TgZ(132,"div",45)(133,"div",23),t._uU(134,"Usuario registra"),t.qZA(),t.TgZ(135,"div",26),t._UZ(136,"mat-icon",27),t.TgZ(137,"span",9),t._uU(138),t.qZA()()(),t.TgZ(139,"div",22)(140,"div",23),t._uU(141,"Vendedor"),t.qZA(),t.TgZ(142,"div",26),t._UZ(143,"mat-icon",27),t.TgZ(144,"span",9),t._uU(145),t.qZA()()(),t.TgZ(146,"div",45)(147,"div",23),t._uU(148,"Sucursal venta"),t.qZA(),t.TgZ(149,"div",26),t._UZ(150,"mat-icon",27),t.TgZ(151,"span",9),t._uU(152),t.qZA()()(),t.TgZ(153,"div",45)(154,"div",23),t._uU(155,"email"),t.qZA(),t.TgZ(156,"div",26),t._UZ(157,"mat-icon",27),t.TgZ(158,"span",9),t._uU(159),t.qZA()()(),t.TgZ(160,"div",45)(161,"div",23),t._uU(162,"ID"),t.qZA(),t.TgZ(163,"div",26),t._UZ(164,"mat-icon",27),t.TgZ(165,"span",9),t._uU(166),t.qZA()()(),t.TgZ(167,"div",45)(168,"div")(169,"div",23),t._uU(170,"Estatus"),t.qZA(),t.TgZ(171,"div",7),t._UZ(172,"mat-icon",8),t.TgZ(173,"span",9),t._uU(174),t.qZA()()()()(),t.TgZ(175,"div",47)(176,"div",23),t._uU(177,"Observaciones"),t.qZA(),t.TgZ(178,"div",24),t._UZ(179,"mat-icon",8),t.TgZ(180,"span",25),t._uU(181),t.qZA()()(),t.TgZ(182,"div",47),t._UZ(183,"bitacora",48),t.qZA()(),t.YNc(184,_t,55,21,"mat-tab",49),t.TgZ(185,"mat-tab",50)(186,"div",51)(187,"div",52)(188,"mat-form-field",53)(189,"mat-label"),t._uU(190,"Forma de pago"),t.qZA(),t.TgZ(191,"mat-select",54),t.YNc(192,ft,3,3,"ng-container",43),t.qZA()()(),t.TgZ(193,"div",55)(194,"mat-form-field",53)(195,"mat-label"),t._uU(196,"Fecha del pago"),t.qZA(),t._UZ(197,"mat-icon",56)(198,"input",57)(199,"mat-datepicker-toggle",58)(200,"mat-datepicker",null,59),t.qZA()(),t.TgZ(202,"div",60)(203,"mat-form-field",53)(204,"mat-label"),t._uU(205,"Monto"),t.qZA(),t.TgZ(206,"mat-icon",61),t._uU(207,"$"),t.qZA(),t.TgZ(208,"input",62),t.NdJ("input",function(){return n.calculaCambio()}),t.qZA()()(),t.TgZ(209,"div",63)(210,"mat-form-field",53)(211,"mat-label"),t._uU(212,"Tipo"),t.qZA(),t.TgZ(213,"mat-select",64)(214,"mat-option",65),t._uU(215," Abono "),t.qZA(),t.TgZ(216,"mat-option",65),t._uU(217," Ajuste "),t.qZA()()()(),t.YNc(218,ht,7,2,"div",66),t.YNc(219,Zt,13,2,"div",67),t.TgZ(220,"div",68)(221,"mat-form-field",69)(222,"mat-label"),t._uU(223,"Observaciones"),t.qZA(),t._UZ(224,"textarea",70),t.qZA()(),t.TgZ(225,"div",71)(226,"button",72),t.NdJ("click",function(){return n.pagar()}),t._UZ(227,"mat-icon",12),t.TgZ(228,"span",73),t._uU(229,"Pagar"),t.qZA()()()()()()()()),2&e){const s=t.MAs(16),u=t.MAs(87),g=t.MAs(201);t.xp6(1),t.Q6J("formGroup",n.ventaForm),t.xp6(4),t.Q6J("svgIcon","heroicons_outline:check-circle"),t.xp6(2),t.hij("Detalles de venta ",null==n.venta?null:n.venta.folio," "),t.xp6(1),t.Q6J("ngClass",t.l5B(101,tt,"VENTA_OK_FACT_OK"===n.venta.status||"VENTA_OK_FACT_OK_PDF_OK"===n.venta.status||"VENTA_OK_PAGADA"===n.venta.status,"VENTA_OK_FACT_NS"===n.venta.status,"VENTA_CANCELADA"===n.venta.status,n.venta.status.indexOf("FAIL")>-1)),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:document-text"),t.xp6(2),t.Oqu(n.venta.status),t.xp6(2),t.Q6J("matMenuTriggerFor",s),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:dots-vertical"),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:document-text"),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:arrow-up"),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:x"),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:refresh"),t.xp6(3),t.Q6J("routerLink",t.DdM(106,xt)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(9),t.Q6J("svgIcon","heroicons_solid:calendar"),t.xp6(2),t.hij(" ",t.xi3(46,83,null==n.venta?null:n.venta.fecha,"yyyy-MM-dd hh:mm:ss a")," "),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:adjustments"),t.xp6(2),t.Oqu(null==n.venta?null:n.venta.tipo),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(1),t.Q6J("routerLink",t.VKq(107,Tt,null==n.venta||null==n.venta.cliente?null:n.venta.cliente.id)),t.xp6(2),t.HOy("",null==n.venta||null==n.venta.cliente?null:n.venta.cliente.nombre," ",null==n.venta||null==n.venta.cliente?null:n.venta.cliente.segundoNombre," ",null==n.venta||null==n.venta.cliente?null:n.venta.cliente.apellidoPaterno," ",null==n.venta||null==n.venta.cliente?null:n.venta.cliente.apellidoMaterno,""),t.xp6(13),t.Oqu(t.lcZ(75,86,null==n.venta?null:n.venta.subtotal)),t.xp6(3),t.Oqu(t.lcZ(78,88,null==n.venta?null:n.venta.impuestos)),t.xp6(3),t.Oqu(t.lcZ(81,90,null==n.venta?null:n.venta.descuento)),t.xp6(3),t.Oqu(t.lcZ(84,92,null==n.venta?null:n.venta.total)),t.xp6(3),t.Q6J("scrollTop",u.scrollHeight),t.xp6(12),t.Q6J("ngForOf",null==n.venta?null:n.venta.productos),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:currency-dollar"),t.xp6(1),t.Q6J("ngIf","01"===(null==n.venta?null:n.venta.formaPago.claveSAT)),t.xp6(1),t.Q6J("ngIf","01"!==(null==n.venta?null:n.venta.formaPago.claveSAT)),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:cash"),t.xp6(2),t.Oqu(t.lcZ(114,94,null==n.venta?null:n.venta.cambio)),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:currency-dollar"),t.xp6(2),t.Oqu(t.lcZ(122,96,null==n.venta?null:n.venta.saldo)),t.xp6(7),t.Q6J("svgIcon","heroicons_solid:calendar"),t.xp6(2),t.hij(" ",t.xi3(131,98,null==n.venta?null:n.venta.fechaRegistro,"yyyy-MM-dd hh:mm:ss a")," "),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(2),t.HOy("",null==n.venta||null==n.venta.personaRegistro?null:n.venta.personaRegistro.nombre," ",null==n.venta||null==n.venta.personaRegistro?null:n.venta.personaRegistro.segundoNombre," ",null==n.venta||null==n.venta.personaRegistro?null:n.venta.personaRegistro.apellidoPaterno," ",null==n.venta||null==n.venta.personaRegistro?null:n.venta.personaRegistro.apellidoMaterno,""),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:user"),t.xp6(2),t.HOy("",null==n.venta||null==n.venta.vendedor?null:n.venta.vendedor.nombre," ",null==n.venta||null==n.venta.vendedor?null:n.venta.vendedor.segundoNombre," ",null==n.venta||null==n.venta.vendedor?null:n.venta.vendedor.apellidoPaterno," ",null==n.venta||null==n.venta.vendedor?null:n.venta.vendedor.apellidoMaterno,""),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:office-building"),t.xp6(2),t.AsE("",null==n.venta||null==n.venta.sucursal?null:n.venta.sucursal.sucursal," - ",null==n.venta||null==n.venta.sucursal||null==n.venta.sucursal.tipoSucursal?null:n.venta.sucursal.tipoSucursal.tipoSucursal,""),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:at-symbol"),t.xp6(2),t.Oqu(null==n.venta?null:n.venta.email),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:hashtag"),t.xp6(2),t.Oqu(null==n.venta?null:n.venta.id),t.xp6(5),t.Q6J("ngClass",t.l5B(109,tt,"VENTA_OK_FACT_OK"===n.venta.status||"VENTA_OK_FACT_OK_PDF_OK"===n.venta.status,"VENTA_OK_FACT_NS"===n.venta.status,"VENTA_CANCELADA"===n.venta.status,n.venta.status.indexOf("FAIL")>-1)),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:document-text"),t.xp6(2),t.Oqu(n.venta.status),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:document-text"),t.xp6(2),t.hij(" ",null==n.venta?null:n.venta.observaciones," "),t.xp6(2),t.Q6J("idObjeto",n.venta.id),t.xp6(1),t.Q6J("ngIf","CREDITO"==(null==n.venta?null:n.venta.tipo)),t.xp6(2),t.Q6J("formGroup",n.frmPago),t.xp6(5),t.Q6J("formControlName","formaPago")("compareWith",n.compareFn),t.xp6(1),t.Q6J("ngForOf",n.formasPago),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:calendar"),t.xp6(1),t.Q6J("matDatepicker",g)("formControlName","fechaPago")("placeholder","Fecha del pago"),t.xp6(1),t.Q6J("for",g),t.xp6(7),t.Q6J("svgIcon","heroicons_solid:currency-dollar"),t.xp6(2),t.Q6J("formControlName","pago"),t.xp6(5),t.Q6J("formControlName","tipo"),t.xp6(1),t.Q6J("value","Abono"),t.xp6(2),t.Q6J("value","Abono"),t.xp6(2),t.Q6J("ngIf","01"!==(null==n.frmPago.get("formaPago").value?null:n.frmPago.get("formaPago").value.claveSAT)),t.xp6(1),t.Q6J("ngIf","01"===(null==n.frmPago.get("formaPago").value?null:n.frmPago.get("formaPago").value.claveSAT)),t.xp6(5),t.Q6J("formControlName","observaciones")("cdkAutosizeMinRows",2),t.xp6(2),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:currency-dollar")}},dependencies:[p.rH,T.eB,_.v_,_.$V,_.g4,_.nX,x.Hw,at.IC,k.k0,b.W0,b.tN,b.D8,V.YE,Z.Mq,Z.hl,Z.nW,E.x8,ot.CK,r.uX,r.SP,Q.d,d.mk,d.sg,d.O5,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,N,d.H9,d.uU],styles:[".pagos-grid{grid-template-columns:auto 150px 45px 50px}@media (min-width: 600px){.pagos-grid{grid-template-columns:auto 121px 100px 50px 140px 50px}}@media (min-width: 960px){.pagos-grid{grid-template-columns:120px 90px 90px 150px 68px 180px 50px}}@media (min-width: 1280px){.pagos-grid{grid-template-columns:140px 100px 100px 150px 70px 180px auto}}\n"],encapsulation:2,changeDetection:0});const Ct=function(o,e){return{"hover:bg-gray-100 dark:hover:bg-hover":o,"bg-primary-50 dark:bg-hover":e}},Pt=function(o){return["./",o]};function It(o,e){if(1&o&&(t.ynx(0),t.YNc(1,At,4,4,"ng-container",5),t.ALo(2,"date"),t.ALo(3,"date"),t.TgZ(4,"a",18)(5,"div",19),t.YNc(6,yt,2,1,"ng-container",5),t.YNc(7,Ut,4,4,"ng-container",5),t.qZA(),t.TgZ(8,"div",20)(9,"div",21),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"div",22),t._uU(13),t.ALo(14,"currency"),t.qZA()()(),t.BQk()),2&o){const n=e.$implicit,s=e.index,u=t.oxw(2).ngIf,g=t.oxw();t.xp6(1),t.Q6J("ngIf",0===s||t.xi3(2,9,n.fecha,"yyyy")!==t.xi3(3,12,u[s-1].fecha,"yyyy")),t.xp6(3),t.Q6J("ngClass",t.WLB(20,Ct,!g.selectedVenta||g.selectedVenta.id!==n.id,g.selectedVenta&&g.selectedVenta.id===n.id))("routerLink",t.VKq(23,Pt,n.id)),t.xp6(2),t.Q6J("ngIf",n.avatar),t.xp6(1),t.Q6J("ngIf",!n.avatar),t.xp6(3),t.AsE("",t.xi3(11,15,n.fecha,"yyyy-MM-dd")," - ",n.folio," "),t.xp6(3),t.AsE("",n.id," [",t.lcZ(14,18,n.total),"]")}}function qt(o,e){if(1&o&&(t.ynx(0),t.YNc(1,It,15,25,"ng-container",17),t.BQk()),2&o){const n=t.oxw().ngIf,s=t.oxw();t.xp6(1),t.Q6J("ngForOf",n)("ngForTrackBy",s.trackByFn)}}function Ot(o,e){if(1&o&&(t.ynx(0),t.YNc(1,qt,2,2,"ng-container",16),t.BQk()),2&o){const n=e.ngIf;t.oxw();const s=t.MAs(23);t.xp6(1),t.Q6J("ngIf",n.length)("ngIfElse",s)}}function Jt(o,e){1&o&&(t.TgZ(0,"div",26),t._uU(1,"No hay ventas con los parametros de b\xfasqueda!"),t.qZA())}const Qt=function(){return{"=0":"Sin resultados","=1":"resultado",other:"resultados"}};class F{constructor(e,n){this._changeDetectorRef=e,this._ventasService=n,this.ventasCount=0,this.ventasTableColumns=["name","email","phoneNumber","job"],this.searchInputControl=new v.NI,this._unsubscribeAll=new H.x}ngOnInit(){this.ventas$=this._ventasService.ventas$,this._ventasService.ventas$.pipe((0,I.R)(this._unsubscribeAll)).subscribe(e=>{this.ventasCount=e.length,this._changeDetectorRef.markForCheck()}),this._ventasService.venta$.pipe((0,I.R)(this._unsubscribeAll)).subscribe(e=>{this.selectedContact=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}buscar(){this._ventasService.searchVentas(this.searchInputControl.value).subscribe()}trackByFn(e,n){return n.id||e}}F.\u0275fac=function(e){return new(e||F)(t.Y36(t.sBO),t.Y36(f))},F.\u0275cmp=t.Xpm({type:F,selectors:[["ventas-list"]],decls:24,vars:15,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","bg-card","dark:bg-transparent"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"ml-0.5","font-medium","text-secondary"],[4,"ngIf"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"flex-auto"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"relative"],["noVentas",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"z-20","flex","items-center","px-6","py-4","md:px-8","cursor-pointer","border-b",3,"ngClass","routerLink"],[1,"flex","flex-0","items-center","justify-center","w-10","h-10","rounded-full","overflow-hidden"],[1,"min-w-0","ml-4"],[1,"font-medium","leading-5","truncate"],[1,"leading-5","truncate","text-secondary"],[1,"z-10","sticky","top-0","-mt-px","px-6","py-1","md:px-8","border-t","border-b","font-medium","uppercase","text-secondary","bg-gray-50","dark:bg-gray-900"],["alt","Venta avatar",1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded-full","text-lg","uppercase","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5,"Buscar venta"),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,bt,2,1,"ng-container",5),t._uU(8),t.ALo(9,"i18nPlural"),t.qZA()(),t.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8),t._UZ(13,"mat-icon",9)(14,"input",10),t.qZA()(),t.TgZ(15,"button",11),t.NdJ("click",function(){return n.buscar()}),t._UZ(16,"mat-icon",12),t.TgZ(17,"span",13),t._uU(18,"Buscar"),t.qZA()()()(),t.TgZ(19,"div",14),t.YNc(20,Ot,2,2,"ng-container",5),t.ALo(21,"async"),t.YNc(22,Jt,2,0,"ng-template",null,15,t.W1O),t.qZA()()()),2&e&&(t.xp6(7),t.Q6J("ngIf",n.ventasCount>0),t.xp6(1),t.hij(" ",t.xi3(9,9,n.ventasCount,t.DdM(14,Qt))," "),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar ventas"),t.xp6(1),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:search"),t.xp6(4),t.Q6J("ngIf",t.lcZ(21,12,n.ventas$)))},dependencies:[p.rH,T.eB,_.v_,_.g4,x.Hw,k.k0,d.mk,d.sg,d.O5,v.Fj,v.JJ,v.oH,d.Ov,d.H9,d.uU,d.Gx],encapsulation:2,changeDetection:0});var Lt=i(8531);const kt=[{path:"",component:F,resolve:{ventas:C},children:[]},{path:":id",component:M,resolve:{venta:P,formasPago:Lt.a7}}];class O{}O.\u0275fac=function(e){return new(e||O)},O.\u0275mod=t.oAB({type:O}),O.\u0275inj=t.cJS({imports:[p.Bz.forChild(kt),T.yu,L.Zh,_.wp,x.Ps,k.x4,b.jT,z.gf,R.jc,a.si,V.JX,Z.FA,J.Yd,E.uw,j.Wd,Y.AA,r.Nh,Q.t,K.SJ,$.Fk,l.w,c.m]})},7686:(nt,B,i)=>{i.d(B,{cl:()=>K,gf:()=>V});var J=i(6895),a=i(4650),Z=i(3238),Q=i(9818),x=i(5208),T=i(7462),L=i(8739),_=i(8455),k=i(4363);function b(r,p){if(1&r&&(a.TgZ(0,"mat-option",19),a._uU(1),a.qZA()),2&r){const l=p.$implicit;a.Q6J("value",l),a.xp6(1),a.hij(" ",l," ")}}function z(r,p){if(1&r){const l=a.EpF();a.TgZ(0,"mat-form-field",16)(1,"mat-select",17),a.NdJ("selectionChange",function(m){a.CHM(l);const S=a.oxw(2);return a.KtG(S._changePageSize(m.value))}),a.YNc(2,b,2,2,"mat-option",18),a.qZA()()}if(2&r){const l=a.oxw(2);a.Q6J("appearance",l._formFieldAppearance)("color",l.color),a.xp6(1),a.Q6J("value",l.pageSize)("disabled",l.disabled)("panelClass",l.selectConfig.panelClass||"")("disableOptionCentering",l.selectConfig.disableOptionCentering)("aria-label",l._intl.itemsPerPageLabel),a.xp6(1),a.Q6J("ngForOf",l._displayedPageSizeOptions)}}function R(r,p){if(1&r&&(a.TgZ(0,"div",20),a._uU(1),a.qZA()),2&r){const l=a.oxw(2);a.xp6(1),a.Oqu(l.pageSize)}}function E(r,p){if(1&r&&(a.TgZ(0,"div",12)(1,"div",13),a._uU(2),a.qZA(),a.YNc(3,z,3,8,"mat-form-field",14),a.YNc(4,R,2,1,"div",15),a.qZA()),2&r){const l=a.oxw();a.xp6(2),a.hij(" ",l._intl.itemsPerPageLabel," "),a.xp6(1),a.Q6J("ngIf",l._displayedPageSizeOptions.length>1),a.xp6(1),a.Q6J("ngIf",l._displayedPageSizeOptions.length<=1)}}function j(r,p){if(1&r){const l=a.EpF();a.TgZ(0,"button",21),a.NdJ("click",function(){a.CHM(l);const m=a.oxw();return a.KtG(m.firstPage())}),a.O4$(),a.TgZ(1,"svg",7),a._UZ(2,"path",22),a.qZA()()}if(2&r){const l=a.oxw();a.Q6J("matTooltip",l._intl.firstPageLabel)("matTooltipDisabled",l._previousButtonsDisabled())("matTooltipPosition","above")("disabled",l._previousButtonsDisabled()),a.uIk("aria-label",l._intl.firstPageLabel)}}function Y(r,p){if(1&r){const l=a.EpF();a.O4$(),a.kcU(),a.TgZ(0,"button",23),a.NdJ("click",function(){a.CHM(l);const m=a.oxw();return a.KtG(m.lastPage())}),a.O4$(),a.TgZ(1,"svg",7),a._UZ(2,"path",24),a.qZA()()}if(2&r){const l=a.oxw();a.Q6J("matTooltip",l._intl.lastPageLabel)("matTooltipDisabled",l._nextButtonsDisabled())("matTooltipPosition","above")("disabled",l._nextButtonsDisabled()),a.uIk("aria-label",l._intl.lastPageLabel)}}const $=new a.OlP("MAT_LEGACY_PAGINATOR_DEFAULT_OPTIONS");let K=(()=>{class r extends L.n7{constructor(l,c,m){super(l,c,m),m&&null!=m.formFieldAppearance&&(this._formFieldAppearance=m.formFieldAppearance)}}return r.\u0275fac=function(l){return new(l||r)(a.Y36(L.ye),a.Y36(a.sBO),a.Y36($,8))},r.\u0275cmp=a.Xpm({type:r,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[a.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","panelClass","disableOptionCentering","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(l,c){1&l&&(a.TgZ(0,"div",0)(1,"div",1),a.YNc(2,E,5,3,"div",2),a.TgZ(3,"div",3)(4,"div",4),a._uU(5),a.qZA(),a.YNc(6,j,3,5,"button",5),a.TgZ(7,"button",6),a.NdJ("click",function(){return c.previousPage()}),a.O4$(),a.TgZ(8,"svg",7),a._UZ(9,"path",8),a.qZA()(),a.kcU(),a.TgZ(10,"button",9),a.NdJ("click",function(){return c.nextPage()}),a.O4$(),a.TgZ(11,"svg",7),a._UZ(12,"path",10),a.qZA()(),a.YNc(13,Y,3,5,"button",11),a.qZA()()()),2&l&&(a.xp6(2),a.Q6J("ngIf",!c.hidePageSize),a.xp6(3),a.hij(" ",c._intl.getRangeLabel(c.pageIndex,c.pageSize,c.length)," "),a.xp6(1),a.Q6J("ngIf",c.showFirstLastButtons),a.xp6(1),a.Q6J("matTooltip",c._intl.previousPageLabel)("matTooltipDisabled",c._previousButtonsDisabled())("matTooltipPosition","above")("disabled",c._previousButtonsDisabled()),a.uIk("aria-label",c._intl.previousPageLabel),a.xp6(3),a.Q6J("matTooltip",c._intl.nextPageLabel)("matTooltipDisabled",c._nextButtonsDisabled())("matTooltipPosition","above")("disabled",c._nextButtonsDisabled()),a.uIk("aria-label",c._intl.nextPageLabel),a.xp6(3),a.Q6J("ngIf",c.showFirstLastButtons))},dependencies:[J.sg,J.O5,Q.eB,_.v_,x.x8,k.CK,T.Kd],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{display:inline-block;width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}"],encapsulation:2,changeDetection:0}),r})(),V=(()=>{class r{}return r.\u0275fac=function(l){return new(l||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({providers:[L.ik],imports:[J.ez,Q.yu,x.uw,T.AA,Z.BQ]}),r})()}}]);